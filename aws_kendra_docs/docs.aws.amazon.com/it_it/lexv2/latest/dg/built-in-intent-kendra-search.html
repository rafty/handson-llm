<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="it-IT"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>AMAZON. KendraSearchIntent - Amazon Lex</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="built-in-intent-kendra-search" /><meta name="default_state" content="built-in-intent-kendra-search" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/it_it/lexv2/latest/dg/built-in-intent-kendra-search.html" /><meta name="description" content="Per cercare documenti che hai indicizzato con Amazon Kendra, utilizza l' AMAZON.KendraSearchIntent intento. Quando Amazon Lex V2 non è in grado di determinare l'azione successiva in una conversazione con l'utente, attiva l'intento di ricerca." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Lex" /><meta name="guide" content="Guida per gli sviluppatori V2" /><meta name="abstract" content="Fornisce una panoramica concettuale di Amazon Lex V2. Include istruzioni dettagliate per l'utilizzo di varie funzionalità, come le conversazioni in streaming, e fornisce un riferimento completo per le API V2." /><meta name="guide-locale" content="it_it" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/it_it/lexv2/latest/dg/built-in-intent-kendra-search.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="x-default" /><meta name="feedback-item" content="Lex" /><meta name="this_doc_product" content="Amazon Lex" /><meta name="this_doc_guide" content="Guida per gli sviluppatori V2" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'lex'}"></script><meta id="panorama-serviceSubSection" value="Guida per gli sviluppatori V2" /><meta id="panorama-serviceConsolePage" value="AMAZON. KendraSearchIntent" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>AMAZON. KendraSearchIntent - Amazon Lex</title><meta name="pdf" content="lex2.0.pdf#built-in-intent-kendra-search" /><meta name="rss" content="amazon-lex-v2-document-history.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=251" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lex&amp;topic_url=http://docs.aws.amazon.com/it_it/lexv2/latest/dg/built-in-intent-kendra-search.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/it_it/lexv2/latest/dg/built-in-intent-kendra-search.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/it_it/lexv2/latest/dg/built-in-intent-kendra-search.html" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Lex",
        "item" : "https://docs.aws.amazon.com/lex/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guida per gli sviluppatori V2",
        "item" : "https://docs.aws.amazon.com/it_it/lexv2/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Costruire robot",
        "item" : "https://docs.aws.amazon.com/it_it/lexv2/latest/dg/building-bots.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Intenti e tipi di slot integrati",
        "item" : "https://docs.aws.amazon.com/it_it/lexv2/latest/dg/built-in.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Intenti incorporati",
        "item" : "https://docs.aws.amazon.com/it_it/lexv2/latest/dg/howitworks-builtins-intents.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "AMAZON. KendraSearchIntent",
        "item" : "https://docs.aws.amazon.com/it_it/lexv2/latest/dg/howitworks-builtins-intents.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="lex2.0.pdf#built-in-intent-kendra-search" target="_blank" rel="noopener noreferrer" title="Apri PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentazione</a><a href="/lex/index.html">Amazon Lex</a><a href="what-is.html">Guida per gli sviluppatori V2</a></div><div id="page-toc-src"><a href="#kendra-search-iam">Policy IAM</a><a href="#kendra-search-filter">Utilizzo degli attributi di richiesta e di sessione come filtri</a><a href="#kendra-search-response">Utilizzo della risposta di ricerca</a><a href="#kendra-search-lambda">Utilizzo di una funzione Lambda per gestire la richiesta e la risposta</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Le traduzioni sono generate tramite traduzione automatica. In caso di conflitto tra il contenuto di una traduzione e la versione originale in Inglese, quest'ultima prevarrà.</p></awsui-alert><h1 class="topictitle" id="built-in-intent-kendra-search">AMAZON. KendraSearchIntent</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Per cercare documenti che hai indicizzato con Amazon Kendra, utilizza l'<code class="code">AMAZON.KendraSearchIntent</code>intento. Quando Amazon Lex V2 non è in grado di determinare l'azione successiva in una conversazione con l'utente, attiva l'intento di ricerca.</p><p><code class="code">AMAZON.KendraSearchIntent</code>È disponibile solo nelle versioni inglese (Oregon) ed Europa (Irlanda).</p><p>Amazon Kendra è un servizio machine-learning-based  di ricerca che indicizza documenti in linguaggio naturale come documenti PDF o file Microsoft Word. Può ricercare documenti indicizzati e restituire i seguenti tipi di risposte a una domanda:</p><div class="itemizedlist">
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>Una risposta </p>
                </li><li class="listitem">
                    <p>Una voce da una domanda frequente che potrebbe rispondere alla domanda</p>
                </li><li class="listitem">
                    <p>Un documento correlato alla domanda</p>
                </li></ul></div><p>Per un esempio di utilizzo di <code class="code">AMAZON.KendraSearchIntent</code>, consulta <a href="./faq-bot-kendra-search.html">Esempio: creazione di un bot con domande frequenti per un indice Amazon Kendra</a>.</p><p>Se configuri un<code class="code">AMAZON.KendraSearchIntent</code> intento per il tuo bot, Amazon Lex V2 richiama l'intento ogni volta che non è in grado di determinare l'espressione dell'intento da parte dell'utente. Se non viene ricevuta alcuna risposta da Amazon Kendra, la conversazione continua come configurato nel bot.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Nota</h6></div><div class="awsdocs-note-text"><p> Amazon Lex V2 attualmente non supporta l'elicitazione<code class="code">AMAZON.KendraSearchIntent</code> durante lo slot. Se Amazon Lex V2 non è in grado di determinare l'espressione dell'utente per uno slot, chiama il<code class="code">AMAZON.FallbackIntent</code>. </p></div></div><p>Quando lo usi<code class="code">AMAZON.KendraSearchIntent</code> con lo<code class="code">AMAZON.FallbackIntent</code> stesso bot, Amazon Lex V2 utilizza gli intenti come segue:</p><div class="orderedlist">
                 
                 
                 
                 
            <ol><li>
                    <p>Amazon Lex V2 chiama la<code class="code">AMAZON.KendraSearchIntent</code>. L'intento chiama l'<code class="code">Query</code>operazione Amazon Kendra.</p>
                </li><li>
                    <p>Se Amazon Kendra restituisce una risposta, Amazon Lex V2 mostra il risultato all'utente.</p>
                </li><li>
                    <p>Se Amazon Kendra non risponde, Amazon Lex V2 invia nuovamente una richiesta all'utente. L'operazione successiva dipende dalla risposta dell'utente.</p>
                    <div class="itemizedlist">
                         
                         
                    <ul class="itemizedlist"><li class="listitem">
                            <p>Se la risposta dell'utente contiene un'espressione che Amazon Lex V2 riconosce, ad esempio inserendo un valore di slot o confermando un intento, la conversazione con l'utente procede come configurato per il bot.</p>
                        </li><li class="listitem">
                            <p>Se la risposta dell'utente non contiene un'espressione riconosciuta da Amazon Lex V2, Amazon Lex V2 effettua un'altra chiamata all'<code class="code">Query</code>operazione.</p>
                        </li></ul></div>
                </li><li>
                    <p>Se non viene ricevuta alcuna risposta dopo il numero di tentativi configurato, Amazon Lex V2 chiama<code class="code">AMAZON.FallbackIntent</code> e termina la conversazione con l'utente.</p>
                </li></ol></div><p>Esistono tre modi per utilizzarlo<code class="code">AMAZON.KendraSearchIntent</code> per effettuare una richiesta ad Amazon Kendra:</p><div class="itemizedlist">
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>Lascia che sia l'intento di ricerca a fare la richiesta per te. Amazon Lex V2 chiama Amazon Kendra con l'enunciato dell'utente come stringa di ricerca. Quando crei l'intento, puoi definire una stringa di filtro delle query che limiti il numero di risposte restituite da Amazon Kendra. Amazon Lex V2 utilizza il filtro nella richiesta di interrogazione.</p>
                </li><li class="listitem">
                    <p>Aggiungi parametri di interrogazione aggiuntivi alla richiesta per restringere i risultati della ricerca utilizzando la funzione Lambda. Si aggiunge un<code class="code">kendraQueryFilterString</code> campo che contiene i parametri di interrogazione di Amazon Kendra all'azione<code class="code">delegate</code> di dialogo. Quando si aggiungono parametri di interrogazione alla richiesta con la funzione Lambda, questi hanno la precedenza sul filtro di interrogazione definito al momento della creazione dell'intento.</p>
                </li><li class="listitem">
                    <p>Creazione di una nuova query utilizzando la funzione Lambda. Puoi creare una richiesta di query Amazon Kendra completa che Amazon Lex V2 invia. È possibile specificare la query nel campo <code class="code">kendraQueryRequestPayload</code> dell'operazione di dialogo <code class="code">delegate</code>. Il campo <code class="code">kendraQueryRequestPayload</code> ha la precedenza sul campo <code class="code">kendraQueryFilterString</code>.</p>
                </li></ul></div><p>Per specificare il<code class="code">queryFilterString</code> parametro quando crei un bot o per specificare il<code class="code">kendraQueryFilterString</code> campo quando richiami l'<code class="code">delegate</code>azione in una funzione Lambda di dialogo, devi specificare una stringa che viene utilizzata come filtro degli attributi per la query di Amazon Kendra. Se la stringa non è un filtro di attributo valido, si otterrà un'eccezione <code class="code">InvalidBotConfigException</code> in fase di runtime. Per ulteriori informazioni sui filtri degli attributi, consulta <a href="https://docs.aws.amazon.com/kendra/latest/dg/filtering.html#search-filtering">Utilizzo degli attributi dei documenti per filtrare le query</a> nella <em>Amazon Kendra Developer Guide</em>.</p><p>Per avere il controllo sulla query che Amazon Lex V2 invia ad Amazon Kendra, puoi specificare una query nel<code class="code">kendraQueryRequestPayload</code> campo della tua funzione Lambda. Se la query non è valida, Amazon Lex V2 restituisce un'<code class="code">InvalidLambdaResponseException</code>eccezione. Per ulteriori informazioni, consulta l'<a href="https://docs.aws.amazon.com/kendra/latest/dg/API_Query.html">operazione di interrogazione</a> nella <em>Amazon Kendra Developer Guide</em>.</p><p>Per un esempio di come utilizzare <code class="code">AMAZON.KendraSearchIntent</code>, consulta <a href="./faq-bot-kendra-search.html">Esempio: creazione di un bot con domande frequenti per un indice Amazon Kendra</a>.</p>
                <h2 id="kendra-search-iam">Policy IAM per Amazon Kendra Search</h2>
                <p>Per utilizzare l'<code class="code">AMAZON.KendraSearchIntent</code>intento, è necessario utilizzare un ruolo che fornisca policyAWS Identity and Access Management (IAM) che consentano ad Amazon Lex V2 di assumere un ruolo di runtime autorizzato a richiamare l'<code class="code">Query</code>intento di Amazon Kendra. Le impostazioni IAM utilizzate dipendono dal fatto che le crei<code class="code">AMAZON.KendraSearchIntent</code> utilizzando la console Amazon Lex V2 o utilizzando un SDK AWS o ilAWS Command Line Interface (AWS CLI). Quando usi la console, puoi scegliere tra aggiungere l'autorizzazione per chiamare Amazon Kendra al ruolo collegato al servizio Amazon Lex V2 o utilizzare un ruolo specifico per chiamare l'<code class="code">Query</code>operazione Amazon Kendra. Quando si utilizza l'AWS CLI o un SDK per creare l'intento, è necessario utilizzare un ruolo specifico per richiamare l'operazione <code class="code">Query</code>.</p>
                 
                    <h3 id="kendra-iam-attach">Collegamento di autorizzazioni </h3>
                    <p>Puoi utilizzare la console per assegnare le autorizzazioni di accesso all'<code class="code">Query</code>operazione Amazon Kendra al ruolo predefinito collegato al servizio Amazon Lex V2. Quando associ le autorizzazioni al ruolo collegato al servizio, non devi creare e gestire un ruolo di runtime specifico per connetterti all'indice Amazon Kendra.</p>
                    <p>L'utente, il ruolo o il gruppo che usi per accedere alla console Amazon Lex V2 deve disporre delle autorizzazioni per gestire le politiche dei ruoli. Allegare la policy IAM al ruolo di accesso alla console. Quando si concedono queste autorizzazioni, il ruolo dispone delle autorizzazioni necessarie per modificare la policy del ruolo collegato ai servizi esistente. </p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "iam:AttachRolePolicy",
                "iam:PutRolePolicy",
                "iam:GetRolePolicy"
            ],
            "Resource": "arn:aws:iam::*:role/aws-service-role/lexv2.amazonaws.com/AWSServiceRoleForLexBots*"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": "iam:ListRoles",
            "Resource": "*"
        }
    ]
}</code></pre>
                 
                 
                    <h3 id="kendra-iam-role">Specifica di un ruolo </h3>
                    <p>Puoi utilizzare la consoleAWS CLI, l'o l'API per specificare un ruolo di runtime da utilizzare quando chiami l'<code class="code">Query</code>operazione Amazon Kendra. </p>
                    <p>L'utente, il ruolo o il gruppo utilizzato per specificare il ruolo di runtime deve disporre dell'<code class="code">iam:PassRole</code>autorizzazione. La policy seguente definisce l'autorizzazione. È possibile utilizzare le chiavi di contesto di condizione <code class="code">iam:AssociatedResourceArn</code> e <code class="code">iam:PassedToService</code> per limitare ulteriormente l'ambito delle autorizzazioni. Per ulteriori informazioni, consulta <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html">IAM eAWS STS Condition Context Keys</a> nella <em>Guida per l'AWS Identity and Access Managementutente</em>.</p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": "iam:PassRole",
            "Resource": "arn:aws:iam::<code class="replaceable">account</code>:role/<code class="replaceable">role</code>"
        }
    ]
}</code></pre>
                    <p>Il ruolo di runtime che Amazon Lex V2 deve utilizzare per chiamare Amazon Kendra deve disporre delle<code class="code">kendra:Query</code> autorizzazioni. Quando utilizzi un ruolo IAM esistente per l'autorizzazione a chiamare l'<code class="code">Query</code>operazione Amazon Kendra, al ruolo deve essere allegata la seguente politica.</p>
                    <p>Puoi utilizzare la console IAM, l'API IAM o la consoleAWS CLI per creare una policy e collegarla a un ruolo. Queste istruzioni utilizzano l'AWS CLI per creare il ruolo e le policy.</p>
                    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Nota</h6></div><div class="awsdocs-note-text"><p>Il codice seguente è formattato per Linux e MacOS. Per Windows, sostituire il carattere di continuazione della riga di Linux (\) con un accento circonflesso (^).</p></div></div>
                    <div class="procedure"><h6>Per aggiungere l'autorizzazione per l'operazione Query a un ruolo</h6><ol><li>
                            <p>Creare un documento denominato <code class="userinput">KendraQueryPolicy.json</code> nella directory corrente, aggiungervi il seguente codice e salvarlo</p>
                            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "kendra:Query"
            ],
            "Resource": [
                "arn:aws:kendra:<code class="replaceable">region</code>:<code class="replaceable">account</code>:index/<code class="replaceable">index ID</code>"
            ]
        }
    ]
}</code></pre>
                        </li><li>
                            <p>InAWS CLI, esegui il seguente comando per creare la policy IAM per l'esecuzione dell'<code class="code">Query</code>operazione Amazon Kendra.</p>
                            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws iam create-policy \
    --policy-name <code class="replaceable">query-policy-name</code> \
    --policy-document file://KendraQueryPolicy.json</code></pre>
                        </li><li>
                            <p>Collegare la policy al ruolo IAM utilizzato per chiamare l'<code class="code">Query</code>operazione.</p>
                            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws iam attach-role-policy \
    --policy-arn arn:aws:iam::<code class="replaceable">account-id</code>:policy/<code class="replaceable">query-policy-name</code>
    --role-name <code class="replaceable">role-name</code></code></pre>
                        </li></ol></div>
                    <p>Puoi scegliere di aggiornare il ruolo collegato al servizio Amazon Lex V2 o di utilizzare un ruolo che hai creato quando lo crei<code class="code">AMAZON.KendraSearchIntent</code> per il tuo bot. Di seguito viene mostrato come scegliere il ruolo IAM da utilizzare.</p>
                    <div class="procedure"><h6>Per specificare il ruolo di runtime per AMAZON. KendraSearchIntent</h6><ol><li>
                            <p>Accedi allaAWS Management Console e aprire la console console console Amazon Lex all'<a href="https://console.aws.amazon.com/lex/" rel="noopener noreferrer" target="_blank"><span>indirizzo https://console.aws.amazon.com/lex/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
                        </li><li>
                            <p>Scegliere il bot a cui si desidera aggiungere <code class="code">AMAZON.KendraSearchIntent</code>.</p>
                        </li><li>
                            <p>Scegliete il segno più (+) accanto a <b>Intenti</b>.</p>
                        </li><li>
                            <p>In <b>Aggiungi intento</b>, scegliere <b>Cerca intenti esistenti</b>.</p>
                        </li><li>
                            <p>In <b>Intenti di ricerca</b>, immettere <code class="userinput">AMAZON.KendraSearchIntent</code> e quindi scegliere <b>Aggiungi</b>.</p>
                        </li><li>
                            <p>In <b>Copia intento integrato</b>, immettere un nome per l'intento, ad esempio <code class="userinput">KendraSearchIntent</code>, quindi scegliere <b>Aggiungi</b>.</p>
                        </li><li>
                            <p>Aprire la sezione <b>Query Amazon Kendra</b>.</p>
                        </li><li>
                            <p>In <b>Ruolo IAM</b>, scegliere una delle seguenti opzioni:</p>
                            <div class="itemizedlist">
                                 
                                 
                            <ul class="itemizedlist"><li class="listitem">
                                    <p>Per aggiornare il ruolo collegato al servizio Amazon Lex V2 per consentire al bot di interrogare gli indici Amazon Kendra, scegli <b>Aggiungi autorizzazioni Amazon Kendra</b>.</p>
                                </li><li class="listitem">
                                    <p>Per utilizzare un ruolo autorizzato a chiamare l'<code class="code">Query</code>operazione Amazon Kendra, scegli <b>Usa un ruolo esistente</b>.</p>
                                </li></ul></div>
                        </li></ol></div>
                 
             
                <h2 id="kendra-search-filter">Utilizzo degli attributi di richiesta e di sessione come filtri</h2>
                <p>Per filtrare la risposta di Amazon Kendra agli elementi relativi alla conversazione corrente, utilizza gli attributi di sessione e richiesta come filtri aggiungendo il<code class="code">queryFilterString</code> parametro quando crei il bot. Specifichi un segnaposto per l'attributo quando crei l'intento, quindi Amazon Lex V2 sostituisce un valore prima di chiamare Amazon Kendra. Per ulteriori informazioni sugli attributi di richiesta, consulta <a href="./context-mgmt-request-attribs.html">Impostazione degli attributi della richiesta</a>. Per ulteriori informazioni sugli attributi di sessione, consulta <a href="./context-mgmt-session-attribs.html">Impostazione degli attributi della sessione</a>.</p>
                <p>Di seguito è riportato un esempio di<code class="code">queryFilterString</code> parametro che utilizza una stringa per filtrare la query di Amazon Kendra.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"<span>{</span>"equalsTo": <span>{</span>"key": "City", "value": <span>{</span>"stringValue": "Seattle"}}}"</code></pre>
                <p>Di seguito è riportato un esempio di<code class="code">queryFilterString</code> parametro che utilizza un attributo di sessione chiamato<code class="code">"SourceURI"</code> per filtrare la query di Amazon Kendra.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"<span>{</span>"equalsTo": <span>{</span>"key": "SourceURI","value": <span>{</span>"stringValue": "[FileURL]"}}}"</code></pre>
                <p>Di seguito è riportato un esempio di<code class="code">queryFilterString</code> parametro che utilizza un attributo di richiesta chiamato<code class="code">"DepartmentName"</code> per filtrare la query di Amazon Kendra.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"<span>{</span>"equalsTo": <span>{</span>"key": "Department","value": <span>{</span>"stringValue": "((DepartmentName))"}}}"</code></pre>
                <p>I<code class="code">AMAZON.KendraSearchInteng</code> filtri utilizzano lo stesso formato dei filtri di ricerca Amazon Kendra. Per ulteriori informazioni, consulta <a href="https://docs.aws.amazon.com/kendra/latest/dg/filtering.html#search-filtering">Utilizzo degli attributi dei documenti per filtrare i risultati di ricerca</a> nella <em>guida per gli sviluppatori di Amazon Kendra</em>.</p>
                <p>La stringa del filtro di interrogazione utilizzata con il<code class="code">AMAZON.KendraSearchIntent</code> deve utilizzare lettere minuscole per la prima lettera di ogni filtro. Ad esempio, il seguente è un filtro di query valido per<code class="code">AMAZON.KendraSearchIntent</code>.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copia"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "andAllFilters": [
        <span>{</span>
            "equalsTo": <span>{</span>
                "key": "City",
                "value": <span>{</span>
                    "stringValue": "Seattle"
                }
            }
        },
        <span>{</span>
            "equalsTo": <span>{</span>
                "key": "State",
                "value": <span>{</span>
                    "stringValue": "Washington"
                }
            }
        }
    ]
}</code></pre>
             
                <h2 id="kendra-search-response">Utilizzo della risposta di ricerca</h2>
                <p>Amazon Kendra restituisce la risposta a una ricerca in una risposta dalla<code class="code">IntentClosingSetting</code> dichiarazione di intenti. L'intento deve avere un'<code class="code">closingResponse</code>istruzione a meno che una funzione Lambda non produca un messaggio di risposta di chiusura.</p>
                <p>Amazon Kendra offre cinque tipi di risposte. </p>
                <div class="itemizedlist">
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>Le due risposte seguenti richiedono la configurazione di una domanda frequente per il tuo indice Amazon Kendra. Per maggiori dettagli, consulta <a href="https://docs.aws.amazon.com/kendra/latest/dg/in-creating-faq.html">Aggiungere domande e risposte direttamente a un indice</a>.</p>
                        <div class="itemizedlist">
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p> <code class="code">x-amz-lex:kendra-search-response-question_answer-question-&lt;N&gt;</code>— La domanda contenuta in una FAQ corrispondente alla ricerca. </p>
                            </li><li class="listitem">
                                <p> <code class="code">x-amz-lex:kendra-search-response-question_answer-answer-&lt;N&gt;</code>— La risposta da una FAQ corrispondente alla ricerca. </p>
                            </li></ul></div>                        
                    </li><li class="listitem">
                        <p>Le tre risposte seguenti richiedono la configurazione di una fonte di dati per l'indice Amazon Kendra. Per maggiori dettagli, consulta <a href="https://docs.aws.amazon.com/kendra/latest/dg/data-source.html">Creazione di un'origine dati</a>. </p>
                        <div class="itemizedlist">
                             
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p><code class="code">x-amz-lex:kendra-search-response-document-&lt;N&gt;</code>— Un estratto da un documento nell'indice relativo al testo dell'enunciato.</p>
                            </li><li class="listitem">
                                <p><code class="code">x-amz-lex:kendra-search-response-document-link-&lt;N&gt;</code>— L'URL di un documento nell'indice correlato al testo dell'enunciato.</p>
                            </li><li class="listitem">
                                <p><code class="code">x-amz-lex:kendra-search-response-answer-&lt;N&gt;</code>— Un estratto da un documento nell'indice che risponde alla domanda.</p>
                            </li></ul></div>
                    </li></ul></div>
                <p>Le risposte vengono restituite in attributi <code class="code">request</code>. Possono esserci fino a cinque risposte per ogni attributo, numerate da 1 a 5. Per ulteriori informazioni sulle risposte, consulta <a href="https://docs.aws.amazon.com/kendra/latest/dg/response-types.html">Tipi di risposta</a> nella <em>Amazon Kendra Developer Guide</em>. </p>
                <p>L'istruzione <code class="code">closingResponse</code> deve avere uno o più gruppi di messaggi. Ogni gruppo di messaggi contiene uno o più messaggi. Ogni messaggio può contenere una o più variabili segnaposto che vengono sostituite dagli attributi della richiesta nella risposta di Amazon Kendra. Nel gruppo di messaggi deve essere presente almeno un messaggio in cui tutte le variabili del messaggio vengono sostituite dai valori degli attributi di richiesta nella risposta runtime oppure nel gruppo deve essere presente un messaggio senza variabili segnaposto. Gli attributi della richiesta sono impostati con doppie parentesi ("((" "))"). I seguenti messaggi del gruppo di messaggi corrispondono a qualsiasi risposta di Amazon Kendra:</p>
                <div class="itemizedlist">
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>«Ho trovato una domanda FAQ per te: ((x-amz-lex:kendra-search-response-question _answer-question-1)), e la risposta è ((x-amz-lex:kendra-search-response-question _answer-answer-1))»</p>
                    </li><li class="listitem">
                        <p>«Ho trovato un estratto da un documento utile: ((x-amz-lex:kendra-search-response-document -1))»</p>
                    </li><li class="listitem">
                        <p>«Penso che la risposta alle tue domande sia ((x-amz-lex:kendra-search-response-answer -1))»</p>
                    </li></ul></div>
             
                <h2 id="kendra-search-lambda">Utilizzo di una funzione Lambda per gestire la richiesta e la risposta</h2>
                <p>L'<code class="code">AMAZON.KendraSearchIntent</code>intento può utilizzare il codice di dialogo e l'hook del codice di adempimento per gestire la richiesta ad Amazon Kendra e la risposta. Utilizza la funzione Lambda dell'hook del codice di dialogo quando desideri modificare la query che invii ad Amazon Kendra e la funzione hook del codice logistico Lambda quando desideri modificare la risposta.</p>
                 
                    <h3 id="kendra-search-lambda-dialog">Creazione di una query con l'hook del codice di dialogo</h3>
                    <p>Puoi utilizzare l'hook del codice di dialogo per creare una query da inviare ad Amazon Kendra. L'utilizzo dell'hook del codice di dialogo è facoltativo. Se non specifichi un hook per il codice di dialogo, Amazon Lex V2 crea un'interrogazione dall'enunciato dell'utente e utilizza<code class="code">queryFilterString</code> quello che hai fornito quando hai configurato l'intento, se ne hai fornito uno.</p>
                    <p>Puoi utilizzare due campi nella risposta hook del codice di dialogo per modificare la richiesta ad Amazon Kendra:</p>
                    <div class="itemizedlist">
                         
                         
                    <ul class="itemizedlist"><li class="listitem">
                            <p><code class="code">kendraQueryFilterString</code>— Utilizza questa stringa per specificare i filtri degli attributi per la richiesta Amazon Kendra. È possibile filtrare la query utilizzando uno qualsiasi dei campi di indice definiti nell'indice. Per la struttura della stringa di filtro, consulta <a href="https://docs.aws.amazon.com/kendra/latest/dg/filtering.html#search-filtering">Utilizzo degli attributi del documento per filtrare le query</a> nella <em>Amazon Kendra Developer Guide</em>. Se la stringa del filtro specificata non è valida, si otterrà un'eccezione <code class="code">InvalidLambdaResponseException</code>. La stringa <code class="code">kendraQueryFilterString</code> sovrascrive qualsiasi stringa di query specificata in <code class="code">queryFilterString</code> configurato per l'intento.</p>
                        </li><li class="listitem">
                            <p><code class="code">kendraQueryRequestPayload</code>— Usa questa stringa per specificare una query Amazon Kendra. La tua query può utilizzare una qualsiasi delle funzionalità di Amazon Kendra. Se non si specifica una query valida, si ottiene un'eccezione <code class="code">InvalidLambdaResponseException</code>. Per ulteriori informazioni, consulta <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_Query.html">Query</a> nella <em>Amazon Kendra Developer Guide</em>.</p>
                        </li></ul></div>
                    <p>Dopo aver creato il filtro o la stringa di query, invii la risposta ad Amazon Lex V2 con il<code class="code">dialogAction</code> campo della risposta impostato su<code class="code">delegate</code>. Amazon Lex V2 invia la query ad Amazon Kendra e quindi restituisce la risposta all'hook del codice logistico.</p>
                 
                 
                    <h3 id="kendra-search-lambda-fulfillment">Utilizzo dell'hook del codice di adempimento per la risposta</h3>
                    <p>Dopo che Amazon Lex V2 invia una query ad Amazon Kendra, la risposta alla query viene restituita alla funzione Lambda<code class="code">AMAZON.KendraSearchIntent</code> di adempimento. L'evento di input al code hook contiene la risposta completa di Amazon Kendra. I dati della query hanno la stessa struttura di quelli restituiti dall'<code class="code">Query</code>operazione Amazon Kendra. Per ulteriori informazioni, consulta la <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_Query.html#API_Query_ResponseSyntax">sintassi delle risposte alle query</a> nella <em>Amazon Kendra Developer Guide</em>.</p>
                    <p>L'hook del codice di adempimento è facoltativo. Se non ne esiste uno o se il code hook non restituisce un messaggio nella risposta, Amazon Lex V2 utilizza l'<code class="code">closingResponse</code>istruzione per le risposte.</p>
                 
            <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Avvertimento" /> <strong>JavaScript è disabilitato o non è disponibile nel tuo browser.</strong></p><p>Per usare la documentazione AWS, JavaScript deve essere abilitato. Consulta le pagine della guida del browser per le istruzioni.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenzioni dei documenti</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./built-in-intent-help.html">AMAZON. HelpIntent</div><div id="next" class="next-link" accesskey="n" href="./faq-bot-kendra-search.html">Esempio: creazione di un bot con domande frequenti per un indice Amazon Kendra</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Questa pagina ti è stata utile? - Sì</div><div class="content"><p>Grazie per averci comunicato che stiamo facendo un buon lavoro!</p><p>Se hai un momento, ti invitiamo a dirci che cosa abbiamo fatto che ti è piaciuto così possiamo offrirti altri contenuti simili.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lex&amp;topic_url=https://docs.aws.amazon.com/it_it/lexv2/latest/dg/built-in-intent-kendra-search.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Questa pagina ti è stata utile? - No</div><div class="content"><p>Grazie per averci comunicato che questa pagina ha bisogno di essere modificata. Siamo spiacenti di non aver soddisfatto le tue esigenze.</p><p>Se hai un momento, ti invitiamo a dirci come possiamo migliorare la documentazione.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lex&amp;topic_url=https://docs.aws.amazon.com/it_it/lexv2/latest/dg/built-in-intent-kendra-search.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>