<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Set up your network - Amazon Connect</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="ccp-networking" /><meta name="default_state" content="ccp-networking" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/connect/latest/adminguide/ccp-networking.html" /><meta name="description" content="Learn which domains/URLs to add to your allow list." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Connect" /><meta name="guide" content="Administrator Guide" /><meta name="abstract" content="Amazon Connect is a contact center as a service solution that offers easy, self-service configuration and enables dynamic, personal, and natural customer engagement at any scale." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/connect/latest/adminguide/ccp-networking.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/connect/latest/adminguide/ccp-networking.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/connect/latest/adminguide/ccp-networking.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/connect/latest/adminguide/ccp-networking.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/connect/latest/adminguide/ccp-networking.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/connect/latest/adminguide/ccp-networking.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/connect/latest/adminguide/ccp-networking.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/connect/latest/adminguide/ccp-networking.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/connect/latest/adminguide/ccp-networking.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/connect/latest/adminguide/ccp-networking.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/connect/latest/adminguide/ccp-networking.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/connect/latest/adminguide/ccp-networking.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/connect/latest/adminguide/ccp-networking.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/connect/latest/adminguide/ccp-networking.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/connect/latest/adminguide/ccp-networking.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/connect/latest/adminguide/ccp-networking.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/connect/latest/adminguide/ccp-networking.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/connect/latest/adminguide/ccp-networking.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/connect/latest/adminguide/ccp-networking.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/connect/latest/adminguide/ccp-networking.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/connect/latest/adminguide/ccp-networking.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/connect/latest/adminguide/ccp-networking.html" hreflang="x-default" /><meta name="feedback-item" content="Amazon Connect" /><meta name="this_doc_product" content="Amazon Connect" /><meta name="this_doc_guide" content="Administrator Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'connect'}"></script><meta id="panorama-serviceSubSection" value="Administrator Guide" /><meta id="panorama-serviceConsolePage" value="Set up your network" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Set up your network - Amazon Connect</title><meta name="pdf" content="/pdfs/connect/latest/adminguide/connect-ag.pdf#ccp-networking" /><meta name="github" content="https://github.com/awsdocs/amazon-connect-admin-guide/tree/master/doc_source/ccp-networking.md" /><meta name="rss" content="doc-history.xml.rss" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Amazon%20Connect&amp;topic_url=http://docs.aws.amazon.com/en_us/connect/latest/adminguide/ccp-networking.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/connect/latest/adminguide/ccp-networking.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/connect/latest/adminguide/ccp-networking.html" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Connect",
        "item" : "https://docs.aws.amazon.com/connect/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Administrator Guide",
        "item" : "https://docs.aws.amazon.com/connect/latest/adminguide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Set up your network",
        "item" : "https://docs.aws.amazon.com/connect/latest/adminguide/ccp-networking.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/connect/latest/adminguide/connect-ag.pdf#ccp-networking" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a href="https://github.com/awsdocs/amazon-connect-admin-guide/tree/master/doc_source/ccp-networking.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/connect/index.html">Amazon Connect</a><a href="what-is-amazon-connect.html">Administrator Guide</a></div><div id="page-toc-src"><a href="#option1">Option 1 (recommended): Replace Amazon EC2 and CloudFront IP range
                requirements with a domain allow list</a><a href="#option2">Option 2 (not recommended): Allow IP address ranges</a><a href="#about-connect-ip-address-range">About Amazon Connect IP address ranges</a><a href="#stateless-firewalls">Stateless firewalls</a><a href="#allow-dns-resolution">Allow DNS resolution for softphones</a><a href="#port-considerations">Port and protocol considerations</a><a href="#ccp-region-selection">Region selection considerations</a><a href="#remote-agents">Agents using Amazon Connect remotely</a><a href="#reroute-audio">Rerouting audio</a><a href="#using-directconnect">Using AWS Direct Connect</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="ccp-networking">Set up your network</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Traditional VoIP solutions require you to allow both inbound and outbound for specific UDP
        port ranges and IPs, such as 80 and 443. These solutions also apply to TCP. In comparison,
        the network requirements for using the Contact Control Panel (CCP) with a softphone are less
        intrusive. You can establish persistent outbound send/receive connections through your web
        browser. As a result, you don't need to open a client-side port to listen for inbound
        traffic. </p><p>The following diagram shows you what each port is used for. </p><div class="mediaobject">
         
            <img src="/images/connect/latest/adminguide/images/networking.png" class="aws-docs-img-whiteBg aws-docs-img-padding" style="max-width:100%" />
         
    </div><p>The following sections describe the two primary connectivity options for using the CCP. </p>
        <h2 id="option1">Option 1 (recommended): Replace Amazon EC2 and CloudFront IP range
                requirements with a domain allow list</h2>
        <p>This first option lets you significantly reduce your blast radius. </p>

        <p>We recommend trying Option 1 and testing it with more than 200 calls. Test for
            softphone errors, dropped calls, and conference/transfer functionality. If your error
            rate is greater than 2 percent, there might be an issue with proxy resolution. If that's
            the case, consider using Option 2. </p>


        <p>To allow traffic for Amazon EC2 endpoints, allow access for the URL and port, as shown in
            the first row of the following table. Do this instead of allowing all of the IP address
            ranges listed in the ip-ranges.json file. You get the same benefit using a domain for
            CloudFront, as shown in the second row of the following table.</p>
        <div class="table-container"><div class="table-contents disable-scroll"><table id="w771aac33c11b9"><thead>
                    <tr>
                        <th><p>Domain/URL allow list</p></th>
                        <th><p>AWS Region</p></th>
                        <th><p>Ports</p></th>
                        <th><p>Direction</p></th>
                        <th><p>Traffic</p></th>
                    </tr>
                </thead>
                    <tr>
                        <td><p>rtc*.connect-telecom.<code class="replaceable">region</code>.amazonaws.com</p>
                            <p>This is used by ccp# (v1).</p>
                            <p>Please see the note following this table.</p>
                        </td>
                        <td>Replace <code class="replaceable">region</code> with the Region where your
                            Amazon Connect instance is located</td>
                        <td><p>443 (TCP)</p></td>
                        <td><p>OUTBOUND</p></td>
                        <td><p>SEND/RECEIVE</p></td>
                    </tr>

                    <tr>
                        <td>
                            <p>Following is the minimum allow list for <b>*.my.connect.aws</b>:</p>
                            <div class="itemizedlist">
                                 
                                 
                                 
                                 
                                 
                            <ul class="itemizedlist"><li class="listitem">
                                    <p><code class="replaceable">myInstanceName</code>.my.connect.aws/ccp-v2</p>
                                </li><li class="listitem">
                                    <p><code class="replaceable">myInstanceName</code>.my.connect.aws/api</p>
                                </li><li class="listitem">
                                    <p><code class="replaceable">myInstanceName</code>.my.connect.aws/auth/authorize</p>
                                    
                                </li><li class="listitem">
                                    <p>*.static.connect.aws</p>
                                </li><li class="listitem">
                                    <p>*.cloudfront.net</p>
                                    
                                </li></ul></div>
                            <p>Following is the minimum allow list for <b>*.awsapps.com</b>:</p>
                            <div class="itemizedlist">
                                 
                                 
                                 
                                 
                                 
                            <ul class="itemizedlist"><li class="listitem">
                                    <p><code class="replaceable">myInstanceName</code>.awsapps.com/connect/ccp-v2</p>
                                </li><li class="listitem">
                                    <p><code class="replaceable">myInstanceName</code>.awsapps.com/connect/api</p>
                                </li><li class="listitem">
                                    <p><code class="replaceable">myInstanceName</code>.awsapps.com/connect/api</p>
                                </li><li class="listitem">
                                    <p><code class="replaceable">myInstanceName</code>.awsapps.com/connect/auth/authorize</p>
                                    
                                </li><li class="listitem">
                                    <p>*.cloudfront.net</p>
                                </li></ul></div>
                        </td>
                        <td><p>Replace <code class="replaceable">myInstanceName</code> with the
                                alias of your Amazon Connect instance</p>
                        </td>
                        <td><p>443 (TCP)</p></td>
                        <td><p>OUTBOUND</p></td>
                        <td><p>SEND/RECEIVE</p></td>
                    </tr>
                    <tr>
                        <td><p>*.telemetry.connect.<code class="replaceable">region</code>.amazonaws.com</p>
                        </td>
                        <td><p>Replace <code class="replaceable">region</code> with the location of
                                your Amazon Connect instance</p></td>
                        <td><p>443 (TCP)</p></td>
                        <td><p>OUTBOUND</p></td>
                        <td><p>SEND/RECEIVE</p></td>
                    </tr>
                    <tr>
                        <td><p>participant.connect.<code class="replaceable">region</code>.amazonaws.com</p>
                        </td>
                        <td><p>Replace <code class="replaceable">region</code> with the location of
                                your Amazon Connect instance</p></td>
                        <td><p>443 (TCP)</p></td>
                        <td><p>OUTBOUND</p></td>
                        <td><p>SEND/RECEIVE</p></td>
                    </tr>
                    <tr>
                        <td><p>*.transport.connect.<code class="replaceable">region</code>.amazonaws.com</p>
                            <p>This is used by ccp-v2.</p>
                        </td>
                        <td><p>Replace <code class="replaceable">region</code> with the location of
                                your Amazon Connect instance</p></td>
                        <td><p>443 (TCP)</p></td>
                        <td><p>OUTBOUND</p></td>
                        <td><p>SEND/RECEIVE</p></td>
                    </tr>
                    <tr>
                        <td><p><code class="replaceable">Amazon S3 bucket
                                    name</code>.s3.<code class="replaceable">region</code>.amazonaws.com</p>
                        </td>
                        <td><p>Replace <code class="replaceable">Amazon S3 bucket name</code> with the
                                name of the location where you store attachments. Replace
                                    <code class="replaceable">region</code> with the location of your
                                Amazon Connect instance</p></td>
                        <td><p>443 (TCP)</p></td>
                        <td><p>OUTBOUND</p></td>
                        <td><p>SEND/RECEIVE</p></td>
                    </tr>
                    <tr>
                        <td><p>TurnNlb-*.elb.<code class="replaceable">region</code>.amazonaws.com</p>
                            <p>To instead add specific endpoints to your allow list based on
                                Region, see <a href="#nlb-endpoints">NLB endpoints</a>. </p>
                        </td>
                        <td><p>Replace <code class="replaceable">region</code> with the location of
                                your Amazon Connect instance</p></td>
                        <td><p>3478 (UDP)</p></td>
                        <td><p>OUTBOUND</p></td>
                        <td><p>SEND/RECEIVE</p></td>
                    </tr>
                    <tr>
                        <td><p>GLOBALACCELERATOR</p></td>
                        <td><p>GLOBAL and Region where your Amazon Connect instance is located (add
                                GLOBAL AND any region-specific entry to your allow
                            list)</p></td>
                        <td><p>443 (HTTPS) and 80 (HTTP)</p></td>
                        <td>OUTBOUND</td>
                        <td>SEND/RECEIVE</td>
                    </tr>
                </table></div></div>
        <p>Fully qualified domain names (FQDNs) cannot be changed or customized on a per-customer
            basis. Instead, use <a href="#option2">Option 2 - allow IP address
            ranges</a>.</p>
        
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>If you're using SAML Sign-In to your Amazon Connect instance, add the Global Accelerator domain to your
                allow list: <b>*.awsglobalaccelerator.com</b>.</p></div></div>


        <div class="awsdocs-note awsdocs-tip"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Tip</h6></div><div class="awsdocs-note-text"><p>When using
                    <code class="code">rtc*.connect-telecom.<code class="replaceable">region</code>.amazonaws.com</code>,
                    <code class="code">
                    *.transport.connect.<code class="replaceable">region</code>.amazonaws.com</code>, and
                    <code class="code">https://myInstanceName.awsapps.com</code>, in certain proxy applications,
                web socket handling may impact functionality. Be sure to test and validate before
                deploying to a production environment.</p></div></div>

        <p>The following table lists the CloudFront domains used for static assets if you want to add
            domains to your allow list instead of IP ranges:</p>
        
        <div class="table-container"><div class="table-contents disable-scroll"><table id="w771aac33c11c23"><thead>
                    <tr>
                        <th><p>Region</p></th>
                        <th><p>CloudFront Domain</p></th>
                    </tr>
                </thead>
                    <tr>
                        <td><p>us-east-1</p>
                        </td>
                        <td><p>https://dd401jc05x2yk.cloudfront.net/ </p>
                            <p>https://d1f0uslncy85vb.cloudfront.net/ </p></td>
                    </tr>
                    <tr>
                        <td><p>us-west-2</p>
                        </td>
                        <td><p>https://d38fzyjx9jg8fj.cloudfront.net/ </p>
                            <p>https://d366s8lxuwna4d.cloudfront.net/ </p></td>
                    </tr>

                    <tr>
                        <td><p>ap-northeast-1</p>
                        </td>
                        <td><p>https://d3h58onr8hrozw.cloudfront.net/ </p>
                            <p>https://d13ljas036gz6c.cloudfront.net/ </p></td>
                    </tr>
                    <tr>
                        <td><p>ap-northeast-2</p>
                        </td>
                        <td><p>https://d11ouwvqpq1ads.cloudfront.net/</p>
                        </td>
                    </tr>
                    <tr>
                        <td><p>ap-southeast-1</p>
                        </td>
                        <td><p>https://d2g7up6vqvaq2o.cloudfront.net/ </p>
                            <p>https://d12o1dl1h4w0xc.cloudfront.net/ </p></td>
                    </tr>
                    <tr>
                        <td><p>ap-southeast-2</p>
                        </td>
                        <td><p>https://d2190hliw27bb8.cloudfront.net/ </p>
                            <p>https://d3mgrlqzmisce5.cloudfront.net/ </p></td>
                    </tr>
                    
                    <tr>
                        <td><p>eu-central-1</p>
                        </td>
                        <td><p>https://d1n9s7btyr4f0n.cloudfront.net/ </p>
                            <p>https://d3tqoc05lsydd3.cloudfront.net/ </p></td>
                    </tr>
                    <tr>
                        <td><p>eu-west-2</p>
                        </td>
                        <td><p>https://dl32tyuy2mmv6.cloudfront.net/ </p>
                            <p>https://d2p8ibh10q5exz.cloudfront.net/ </p></td>
                    </tr>
                </table></div></div>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>ca-central isn't included in the table because we host static contents behind the
                domain <code class="code">*.my.connect.aws</code>.</p></div></div>


        

        <p>If your business does not use SAML, and you have firewall restrictions, you can add
            the following entries per Region:</p>
        <div class="table-container"><div class="table-contents disable-scroll"><table id="w771aac33c11c31"><thead>
                    <tr>
                        <th><p>Region</p></th>
                        <th><p>CloudFront Domain</p></th>
                    </tr>
                </thead>
                    <tr>
                        <td><p>us-east-1</p>
                        </td>
                        <td><p>https://d32i4gd7pg4909.cloudfront.net/</p>
                        </td>
                    </tr>

                    <tr>
                        <td><p>us-west-2</p>
                        </td>
                        <td><p>https://d18af777lco7lp.cloudfront.net/</p>
                        </td>
                    </tr>

                    <tr>
                        <td><p>eu-west-2</p>
                        </td>
                        <td><p>https://d16q6638mh01s7.cloudfront.net/</p>
                        </td>
                    </tr>

                    <tr>
                        <td><p>ap-northeast-1</p>
                        </td>
                        <td><p>https://d2c2t8mxjhq5z1.cloudfront.net/</p>
                        </td>
                    </tr>
                    <tr>
                        <td><p>ap-northeast-2</p>
                        </td>
                        <td><p>https://d9j3u8qaxidxi.cloudfront.net/</p>
                        </td>
                    </tr>

                    <tr>
                        <td><p>ap-southeast-1</p>
                        </td>
                        <td><p>https://d3qzmd7y07pz0i.cloudfront.net/</p>
                        </td>
                    </tr>
                    <tr>
                        <td><p>ap-southeast-2</p>
                        </td>
                        <td><p>https://dwcpoxuuza83q.cloudfront.net/</p>
                        </td>
                    </tr>
                    <tr>
                        <td><p>eu-central-1</p>
                        </td>
                        <td><p>https://d1whcm49570jjw.cloudfront.net/</p>
                        </td>
                    </tr>
                    <tr>
                        <td><p>ca-central-1</p>
                        </td>
                        <td><p>https://d2wfbsypmqjmog.cloudfront.net/</p>
                        </td>
                    </tr>
                    <tr>
                        <td><p>us-gov-east-1:</p>
                        </td>
                        <td><p>https://s3-us-gov-east-1.amazonaws.com/warp-drive-console-static-content-prod-osu/</p>
                        </td>
                    </tr>
                    <tr>
                        <td><p>us-gov-west-1:</p>
                        </td>
                        <td><p>https://s3-us-gov-west-1.amazonaws.com/warp-drive-console-static-content-prod-pdt/</p>
                        </td>
                    </tr>

                </table></div></div>

         
            <h3 id="nlb-endpoints">NLB endpoints</h3>
            
            <p>The following table lists the specific endpoints for the Region the Amazon Connect instance
                is in. If you don't want to use the
                TurnNlb-*.elb.<code class="replaceable">region</code>.amazonaws.com wildcard, you can add
                these endpoints to your allow list instead.</p>
            <div class="table-container"><div class="table-contents disable-scroll"><table id="w771aac33c11c33b7"><thead>
                        <tr>
                            <th><p>Region</p></th>
                            <th><p>Turn Domain/URL</p></th>
                        </tr>
                    </thead>
                        <tr>
                            <td><p>us-west-2</p>
                            </td>
                            <td><p>TurnNlb-8d79b4466d82ad0e.elb.us-west-2.amazonaws.com</p>
                                <p>TurnNlb-dbc4ebb71307fda2.elb.us-west-2.amazonaws.com</p></td>
                        </tr>
                        <tr>
                            <td><p>us-east-1</p>
                            </td>
                            <td><p>TurnNlb-d76454ac48d20c1e.elb.us-east-1.amazonaws.com</p>
                                <p> TurnNlb-31a7fe8a79c27929.elb.us-east-1.amazonaws.com</p>
                                <p>TurnNlb-7a9b8e750cec315a.elb.us-east-1.amazonaws.com</p>
                            </td>
                        </tr>
                        <tr>
                            <td><p>af-south-1</p>
                            </td>
                            <td><p>TurnNlb-29b8f2824c2958b8.elb.af-south-1.amazonaws.com</p></td>
                        </tr>
                        <tr>
                            <td><p>ap-northeast-1</p>
                            </td>
                            <td><p>TurnNlb-3c6ddabcbeb821d8.elb.ap-northeast-1.amazonaws.com</p>
                            </td>
                        </tr>
                        <tr>
                            <td><p>ap-northeast-2</p>
                            </td>
                            <td><p>TurnNlb-a2d59ac3f246f09a.elb.ap-northeast-2.amazonaws.com</p></td>
                        </tr>
                        <tr>
                            <td><p>ap-southeast-1</p>
                            </td>
                            <td><p>TurnNlb-261982506d86d300.elb.ap-southeast-1.amazonaws.com</p></td>
                        </tr>
                        <tr>
                            <td><p>ap-southeast-2</p>
                            </td>
                            <td><p>TurnNlb-93f2de0c97c4316b.elb.ap-southeast-2.amazonaws.com</p></td>
                        </tr>

                        <tr>
                            <td><p>ca-central-1</p>
                            </td>
                            <td><p>TurnNlb-b019de6142240b9f.elb.ca-central-1.amazonaws.com</p></td>
                        </tr>
                        <tr>
                            <td><p>eu-central-1</p>
                            </td>
                            <td><p>TurnNlb-ea5316ebe2759cbc.elb.eu-central-1.amazonaws.com</p></td>
                        </tr>

                        <tr>
                            <td><p>eu-west-2</p>
                            </td>
                            <td><p>TurnNlb-1dc64a459ead57ea.elb.eu-west-2.amazonaws.com</p></td>
                        </tr>

                        <tr>
                            <td><p>us-gov-west-1</p>
                            </td>
                            <td><p>TurnNlb-d7c623c23f628042.elb.us-gov-west-1.amazonaws.com</p></td>
                        </tr>
                    </table></div></div>
         
     
        <h2 id="option2">Option 2 (not recommended): Allow IP address ranges</h2>
        <p>The second option relies on using an allow list to define the IP
            addresses and ports that Amazon Connect can use. You create this allow list using the IP addresses in the <a href="https://ip-ranges.amazonaws.com/ip-ranges.json" rel="noopener noreferrer" target="_blank"><span>AWS ip-ranges.json</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>
            file. </p>
        <p>If the Region you are using Amazon Connect in does not appear in the AWS ip-ranges.json file,
            use just the Global values.</p>
        
        <p>For more information about this file, see <a href="#about-connect-ip-address-range">About Amazon Connect IP address ranges</a>.</p>

        <div class="table-container"><div class="table-contents disable-scroll"><table id="w771aac33c13c11"><thead>
                    <tr>
                        <th><p>IP-Ranges entry</p></th>
                        <th><p>AWS Region</p></th>
                        <th><p>Ports/Protocols</p></th>
                        <th><p>Direction</p></th>
                        <th><p>Traffic</p></th>
                    </tr>
                </thead>
                    <tr>
                        <td><p>AMAZON_CONNECT</p></td>
                        <td><p>GLOBAL and Region where your Amazon Connect instance is located (add
                                GLOBAL AND any region-specific entry to your allow list)
                            </p></td>
                        <td><p>3478 (UDP)</p></td>
                        <td><p>OUTBOUND</p></td>
                        <td><p>SEND/RECEIVE</p></td>
                    </tr>

                    <tr>
                        <td><p>EC2</p></td>
                        <td><p>GLOBAL and Region where your Amazon Connect instance is located (GLOBAL
                                only if a region-specific entry doesn't exist)</p></td>
                        <td><p>443 (TCP)</p></td>
                        <td><p>OUTBOUND</p></td>
                        <td><p>SEND/RECEIVE</p></td>
                    </tr>
                    <tr>
                        <td><p>CLOUDFRONT</p></td>
                        <td><p>Global*</p></td>
                        <td><p>443 (TCP)</p></td>
                        <td><p>OUTBOUND</p></td>
                        <td><p>SEND/RECEIVE</p></td>
                    </tr>
                    <tr>
                        <td><p>GLOBALACCELERATOR</p></td>
                        <td><p>GLOBAL and Region where your Amazon Connect instance is located (add
                                GLOBAL AND any region-specific entry to your allow
                            list)</p></td>
                        <td><p>443 (HTTPS) and 80 (HTTP)</p></td>
                        <td>OUTBOUND</td>
                        <td>SEND/RECEIVE</td>
                    </tr>
                </table></div></div>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>If you're using SAML Sign-In to your Amazon Connect instance, be sure to add the Global Accelerator
                domain to your allow list: <b>*.awsglobalaccelerator.com</b>.</p></div></div>


        <p>*CloudFront serves static content such as images or javascript from an edge location that
            has the lowest latency in relation to where your agents are located. IP range allow
            lists for CloudFront are global and require all IP ranges associated with <b>"service":
                "CLOUDFRONT"</b> in the ip-ranges.json file. </p>

     
        <h2 id="about-connect-ip-address-range">About Amazon Connect IP address ranges</h2>

        <p>In the <a href="https://ip-ranges.amazonaws.com/ip-ranges.json" rel="noopener noreferrer" target="_blank"><span>AWS
                ip-ranges.json</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> file, the whole /19 IP address range is owned by Amazon Connect. All
            traffic to and from the /19 range comes to and from Amazon Connect.</p>
        <p>The /19 IP address range isn't shared with other services. It's for the exclusive use
            to Amazon Connect globally.</p>

        <p>In the AWS ip-ranges.json file, you can see the same range listed twice. For
            example: </p>

        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">            
                <span>{</span> "ip_prefix": "15.193.0.0/19", 
                "region": "GLOBAL", 
                "service": "AMAZON" 
                }, 
                <span>{</span>
                "ip_prefix": "15.193.0.0/19", 
                "region": "GLOBAL", 
                "service": "AMAZON_CONNECT" 
                },            
            </code></pre>


        <p>AWS always publishes any IP range twice: one for the specific service, and one for
            "AMAZON" service. There could even be a third listing for a more specific use case
            within a service. </p>

        <p>When there are new IP address ranges supported for Amazon Connect, they are added to the
            publicly available ip-ranges.json file. They are kept for a minimum of 30 days before
            they are used by the service. After 30 days, softphone traffic through the new IP
            address ranges increases over the subsequent two weeks. After two weeks, traffic is
            routed through the new ranges equivalent to all available ranges.</p>

        <p>For more information about this file and IP address ranges in AWS, see <a href="https://docs.aws.amazon.com/general/latest/gr/aws-ip-ranges.html">AWS IP Address Ranges</a>.</p>

     
        <h2 id="stateless-firewalls">Stateless firewalls</h2>
        <p>If you're using a stateless firewall for both options, use the requirements described
            in the previous sections. Then you must add to your allow list the ephemeral port range
            used by your browser, as shown in the following table. </p>
        <div class="table-container"><div class="table-contents"><table id="w771aac33c17b5"><thead>
                    <tr>
                        <th><p>IP-Range entry</p></th>
                        <th><p>Port</p></th>
                        <th><p>Direction</p></th>
                        <th><p>Traffic</p></th>
                    </tr>
                </thead>
                    <tr>
                        <td><p>AMAZON_CONNECT</p></td>
                        <td><p>For a Windows environment: 49152-65535 (UDP)</p>
                            <p>For a Linux environment: 32768 - 61000</p></td>
                        <td><p>INBOUND</p></td>
                        <td><p>SEND/RECEIVE</p></td>
                    </tr>

                </table></div></div>
     
        <h2 id="allow-dns-resolution">Allow DNS resolution for softphones</h2>
        <p>If you already added Amazon Connect IP ranges to your allow list, and you don’t have any
            restriction on DNS name resolution, then you don't need to add <b>TurnNlb-*.elb.<code class="replaceable">region</code>.amazonaws.com</b> to
            your allow list.</p>

        <div class="itemizedlist">
             
        <ul class="itemizedlist"><li class="listitem">
                <p>To check whether there are restrictions on DNS name resolution, while on your
                    network, use the <code class="code">nslookup</code> command. For example: </p>
                <p>
                    <code class="code">nslookup
                    TurnNlb-d76454ac48d20c1e.elb.us-east-1.amazonaws.com</code></p>
            </li></ul></div>

        <p>If you can't resolve the DNS, you must add the TurnNLB endpoints <a href="#nlb-endpoints">listed above</a> or
                    <b>TurnNlb-*.elb.<code class="replaceable">region</code>.amazonaws.com</b>
            to your allow list.</p>

        <p>If you don't allow this domain, your agents will get the following error in their
            Contact Control Panel (CCP) when they try to answer a call: </p>
        <div class="itemizedlist">
             
        <ul class="itemizedlist"><li class="listitem">
                <p>Failed to establish softphone connection. Try again or contact your
                    administrator with the following: Browser unable to establish media channel with
                        turn:TurnNlb-xxxxxxxxxxxxx.elb.<code class="replaceable">region</code>.amazonaws.com:3478?transport=udp</p>
            </li></ul></div>

     
        <h2 id="port-considerations">Port and protocol considerations</h2>
        <p>Consider the following when implementing your network configuration changes for
            Amazon Connect:</p>
        <div class="itemizedlist">
             
             
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>You need to allow traffic for all addresses and ranges for the Region in which
                    you created your Amazon Connect instance.</p>
            </li><li class="listitem">
                <p>If you are using a proxy or firewall between the CCP and Amazon Connect, increase the
                    SSL certificate cache timeout to cover the duration of an entire shift for your
                    agents, Do this to avoid connectivity issues with certificate renewals during
                    their scheduled working time. For example, if your agents are scheduled to work
                    8 hour shifts that include breaks, increase the interval to 8 hours plus time
                    for breaks and lunch.</p>
            </li><li class="listitem">
                <p>When opening ports, Amazon EC2 and Amazon Connect require only the ports for endpoints in
                    the same Region as your instance. CloudFront, however, serves static content from an
                    edge location that has the lowest latency in relation to where your agents are
                    located. IP range allow lists for CloudFront are global and require all IP ranges
                    associated with "service": "CLOUDFRONT" in ip-ranges.json.</p>
            </li><li class="listitem">
                <p>Once ip-ranges.json is updated, the associated AWS service will begin using
                    the updated IP ranges after 30 days. To avoid intermittent connectivity issues
                    when the service begins routing traffic to the new IP ranges, be sure to add the
                    new IP ranges to your allow list, within 30 days from the time they were added
                    to ip-ranges.json.</p>
            </li><li class="listitem">
                <p>If you are using a custom CCP with the Amazon Connect Streams API, you can create a
                    media-less CCP that does not require opening ports for communication with Amazon Connect,
                    but still requires ports opened for communication with Amazon EC2 and CloudFront.</p>
            </li></ul></div>

     
        <h2 id="ccp-region-selection">Region selection considerations</h2>
        <p>Amazon Connect Region selection is contingent upon data governance requirements, use case,
            services available in each Region, and latency in relation to your agents, contacts, and
            external transfer endpoint geography.</p>
        <div class="itemizedlist">
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Agent location/network</b>—CCP
                    connectivity traverses the public WAN, so it is important that the workstation
                    has the lowest latency and fewest hops possible, specifically to the AWS
                    Region where your resources and Amazon Connect instance are hosted. For example, hub and
                    spoke networks that need to make several hops to reach an edge router can add
                    latency and reduce the quality of experience.</p>
                <p>When you set up your instance and agents, make sure to create your instance in
                    the Region that is geographically closest to the agents. If you need to set up
                    an instance in a specific Region to comply with company policies or other
                    regulations, choose the configuration that results in the fewest network hops
                    between your agents' computers and your Amazon Connect instance.</p>
            </li><li class="listitem">
                <p><b>Location of your callers</b>—Because calls
                    are anchored to your Amazon Connect Region endpoint, they are subject to PSTN latency.
                    Ideally your callers and transfer endpoints are geographically located as
                    closely as possible to the AWS Region where your Amazon Connect instance is hosted for
                    lowest latency.</p>
                <p>For optimal performance, and to limit the latency for your customers when they
                    call in to your contact center, create your Amazon Connect instance in the Region that is
                    geographically closest to where your customers call from. You might consider
                    creating multiple Amazon Connect instances, and providing contact information to
                    customers for the number that is closest to where they call from.</p>
            </li><li class="listitem">
                <p><b>External transfers</b>—from Amazon Connect remain
                    anchored to your Amazon Connect Region endpoint for the duration of the call. Per-minute
                    usage continues to accrue until the call is disconnected by the recipient of the
                    transferred call. The call is not recorded after the agent drops or the transfer
                    completes. The contact record data and associated call recording of a
                    transferred call are generated after the call is terminated. Whenever possible,
                    don't transfer calls that could be transferred back into Amazon Connect, known as
                    circular transfers, to avoid compounding PSTN latency.</p>
            </li></ul></div>

     
        <h2 id="remote-agents">Agents using Amazon Connect remotely</h2>
        <p>Remote agents, those that use Amazon Connect from a location other than those connected to your
            organization's main network, may experience issues relating to their local network if
            they have an unstable connection, packet loss, or high latency. This is compounded if a
            VPN is required to access resources. Ideally, the agents are located close to the AWS
            Region where your AWS resources and Amazon Connect instance are hosted, and have a stable
            connection to the public WAN.</p>

     
        <h2 id="reroute-audio">Rerouting audio</h2>
        <p>When rerouting audio to an existing device, consider the location of the device in
            relation to your Amazon Connect Region. This is so you can account for potential additional
            latency. If you reroute your audio, whenever there is a call intended for the agent, an
            outbound call is placed to the configured device. When the agent answers the device,
            that agent is connected with the caller. If the agent does not answer their device, they
            are moved into a missed contact state until they or a supervisor changes their state
            back to available.</p>
     
        <h2 id="using-directconnect">Using AWS Direct Connect</h2>
        <p>Contact Control Panel (CCP) network connectivity issues are most often rooted in your
            route to AWS using private WAN/LAN, ISP, or both. While AWS Direct Connect does not solve issues
            specific to private LAN/WAN traversal to your edge router, it can help solve for latency
            and connectivity issues between your edge router and AWS resources. AWS Direct Connect provides
            a durable, consistent connection rather than relying on your ISP to dynamically route
            requests to AWS resources. It also allows you to configure your edge router to
            redirect AWS traffic across dedicated fiber rather than traversing the public
            WAN.</p>

    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./add-rules-task-creation.html">Create rules for third-party
            integrations</div><div id="next" class="next-link" accesskey="n" href="./detailed-network-paths.html">Detailed Network
                Paths</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Amazon Connect&amp;topic_url=https://docs.aws.amazon.com/en_us/connect/latest/adminguide/ccp-networking.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Amazon Connect&amp;topic_url=https://docs.aws.amazon.com/en_us/connect/latest/adminguide/ccp-networking.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>