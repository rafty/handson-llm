<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Granting a user permissions to switch roles - AWS Identity and Access Management</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="id_roles_use_permissions-to-switch" /><meta name="default_state" content="id_roles_use_permissions-to-switch" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use_permissions-to-switch.html" /><meta name="description" content="Grant permissions to an IAM user, so that user can switch roles." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS Identity and Access Management" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Control access to your AWS resources with user identity (authentication) and with policies that define specific permissions (authorization)." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use_permissions-to-switch.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/id_roles_use_permissions-to-switch.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/id_roles_use_permissions-to-switch.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/id_roles_use_permissions-to-switch.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/id_roles_use_permissions-to-switch.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use_permissions-to-switch.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use_permissions-to-switch.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/id_roles_use_permissions-to-switch.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/id_roles_use_permissions-to-switch.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/id_roles_use_permissions-to-switch.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/id_roles_use_permissions-to-switch.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/id_roles_use_permissions-to-switch.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/id_roles_use_permissions-to-switch.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/id_roles_use_permissions-to-switch.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/id_roles_use_permissions-to-switch.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/id_roles_use_permissions-to-switch.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/id_roles_use_permissions-to-switch.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/id_roles_use_permissions-to-switch.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/id_roles_use_permissions-to-switch.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/IAM/latest/UserGuide/id_roles_use_permissions-to-switch.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/id_roles_use_permissions-to-switch.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use_permissions-to-switch.html" hreflang="x-default" /><meta name="feedback-item" content="IAM" /><meta name="this_doc_product" content="AWS Identity and Access Management" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'iam'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="Granting a user permissions to switch roles" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Granting a user permissions to switch roles - AWS Identity and Access Management</title><meta name="pdf" content="/pdfs/IAM/latest/UserGuide/iam-ug.pdf#id_roles_use_permissions-to-switch" /><meta name="github" content="https://github.com/awsdocs/iam-user-guide/tree/main/doc_source/id_roles_use_permissions-to-switch.md" /><meta name="rss" content="aws-iam-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=76" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/id_roles_use_permissions-to-switch.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/id_roles_use_permissions-to-switch.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/id_roles_use_permissions-to-switch.html" /><meta name="keywords" content="IAM,AWS Identity and Access Management,IAM user,user,IAM group,group,IAM role,role,permission policy,trust policy,policy,access key,password" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS Identity and Access Management",
        "item" : "https://docs.aws.amazon.com/iam/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "IAM Identities (users, user groups, and roles)",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/id.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "IAM roles",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Using IAM roles",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "Granting a user permissions to switch roles",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/IAM/latest/UserGuide/iam-ug.pdf#id_roles_use_permissions-to-switch" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a href="https://github.com/awsdocs/iam-user-guide/tree/main/doc_source/id_roles_use_permissions-to-switch.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/iam/index.html">AWS Identity and Access Management</a><a href="introduction.html">User Guide</a></div><div id="page-toc-src"><a href="#roles-usingrole-createpolicy">Creating or editing the policy</a><a href="#roles-usingrole-giveuser">Providing information to the user</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="id_roles_use_permissions-to-switch">Granting a user permissions to switch
      roles</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>When an administrator <a href="./id_roles_create_for-user.html">creates a role for
    cross-account access</a>, they establish trust between the account that owns the role, the
    resources (trusting account), and the account that contains the users (trusted account). To do
    this, the administrator of the trusting account specifies the trusted account number as the
    <code class="code">Principal</code> in the role's trust policy. That <em>potentially</em> allows any user in the trusted account to assume the role. To complete
    the configuration, the administrator of the trusted account must give specific groups or users
    in that account permission to switch to the role.</p><div class="procedure"><h6>To grant permission to switch to a role</h6><ol><li>
      <p>As the administrator of the trusted account, create a new policy for the user, or edit
        an existing policy to add the required elements. For details, see <a href="#roles-usingrole-createpolicy">Creating or editing the policy</a>.</p>
    </li><li>
      <p>Then, choose how you want to share the role information: </p>
      <div class="itemizedlist">
         
         
      <ul class="itemizedlist"><li class="listitem">
          <p><b>Role link:</b> Send users a link that takes them to the
            <b>Switch Role</b> page with all the details already filled
            in. </p>
        </li><li class="listitem">
          <p><b>Account ID or alias:</b> Provide each user with the
            role name along with the account ID number or account alias. The user then goes to the
            <b>Switch Role</b> page and adds the details manually.
          </p>
        </li></ul></div>
      <p>For details, see <a href="#roles-usingrole-giveuser">Providing information to the user</a>.</p>
    </li></ol></div><p>Note that you can switch roles only when you sign in as an IAM user, a SAML-federated
    role, or a web-identity federated role. You cannot switch roles when you sign in as the
    AWS account root user.</p><div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>You cannot switch roles in the AWS Management Console to a role that requires an <a href="./id_roles_create_for-user_externalid.html">ExternalId</a> value. You can switch to
      such a role only by calling the <a href="https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRole.html"><code class="code">AssumeRole</code></a> API that supports the <code class="code">ExternalId</code>
      parameter.</p></div></div><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Notes</h6></div><div class="awsdocs-note-text"><div class="itemizedlist">
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p>This topic discusses policies for a <em>user</em>, because
          you are ultimately granting permissions to a user to accomplish a task. However, we
          don't recommend that you grant permissions directly to an individual user. When a
          user assumes a role, they are assigned the permissions associated with that role.</p>
      </li><li class="listitem">
        <p>When you switch roles in the AWS Management Console, the console always uses your original
          credentials to authorize the switch. This applies whether you sign in as an IAM user, as
          a SAML-federated role, or as a web-identity federated role. For example, if you switch to
          RoleA, IAM uses your original user or federated role credentials to determine if you are
          allowed to assume RoleA. If you then try to switch to RoleB <em>while
            you are using RoleA</em>, your <b>original</b> user or
          federated role credentials are used to authorize your attempt. The credentials for RoleA
          are not used for this action.</p>
      </li></ul></div></div></div><div class="highlights" id="inline-topiclist"><h6>Topics</h6><ul><li><a href="#roles-usingrole-createpolicy">Creating or editing the policy</a></li><li><a href="#roles-usingrole-giveuser">Providing information to the user</a></li></ul></div>
    <h2 id="roles-usingrole-createpolicy">Creating or editing the policy</h2>
    <p>A policy that grants a user permission to assume a role must include a statement with the
      <code class="code">Allow</code> effect on the following: </p>
    <div class="itemizedlist">
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p>The <code class="code">sts:AssumeRole</code> action</p>
      </li><li class="listitem">
        <p>The Amazon Resource Name (ARN) of the role in a <code class="code">Resource</code> element</p>
      </li></ul></div>
    <p>Users that get the policy are allowed to switch roles on the resource listed (either
      through group membership or directly attached).</p>
    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>If <code class="code">Resource</code> is set to <code class="code">*</code>, the user can assume any role in any
        account that trusts the user's account. (In other words, the role's trust policy specifies
        the user's account as <code class="code">Principal</code>). As a best practice, we recommend that you
        follow the <a href="http://en.wikipedia.org/wiki/Principle_of_least_privilege" rel="noopener noreferrer" target="_blank"><span>principle
          of least privilege</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> and specify the complete ARN for only the roles that the user
        needs.</p></div></div>
    <p>The following example shows a policy that lets the user assume roles in only one account.
      In addition, the policy uses a wildcard (*) to specify that the user can switch to a role only
      if the role name begins with the letters <code class="code">Test</code>.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
  "Version": "2012-10-17",
  "Statement": <span>{</span>
    "Effect": "Allow",
    "Action": "sts:AssumeRole",
    "Resource": "arn:aws:iam::<code class="replaceable">account-id</code>:role/Test*"
  }
}</code></pre>
    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>The permissions that the role grants to the user do not add to the permissions already
        granted to the user. When a user switches to a role, the user temporarily gives up his or
        her original permissions in exchange for those granted by the role. When the user exits the
        role, then the original user permissions are automatically restored. For example, let's say
        the user's permissions allow working with Amazon EC2 instances, but the role's permissions policy
        does not grant those permissions. In that case, while using the role, the user cannot work
        with Amazon EC2 instances in the console. In addition, temporary credentials obtained via
        <code class="code">AssumeRole</code> do not work with Amazon EC2 instances programmatically.</p></div></div>
   
    <h2 id="roles-usingrole-giveuser">Providing information to the user</h2>
    <p>After you create a role and grant your user permissions to switch to it, you must provide
      the user with the following:</p>
    <div class="itemizedlist">
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p>The name of the role</p>
      </li><li class="listitem">
        <p>The ID or alias of the account that contains the role</p>
      </li></ul></div>
    <p>You can streamline access for your users by sending them a link that is preconfigured with
      the account ID and role name. You can see the role link after completing the
      <b>Create Role</b> wizard by selecting the <b>View Role</b> banner, or on the <b>Role Summary</b> page for
      any cross-account enabled role.</p>
    <p>You can also use the following format to manually construct the link. Substitute your
      account ID or alias and the role name for the two parameters in the following example.</p>
    <p><code class="code">https://signin.aws.amazon.com/switchrole?account=<code class="replaceable">your_account_ID_or_alias</code>&amp;roleName=<code class="replaceable">optional_path/role_name</code></code></p>
    <p>We recommend that you direct your users to <a href="./id_roles_use_switch-role-console.html">Switching to a role (console)</a> to walk them through the process. To troubleshoot common issues that you might
      encounter when you assume a role, see <a href="./troubleshoot_roles.html#troubleshoot_roles_cant-assume-role">I can't assume a role</a>.</p>
    <div class="itemizedlist">
      <h6>Considerations</h6>
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p>If you create the role programmatically, you can create the role with a path and a
          name. If you do so, you must provide the complete path and role name to your users so they
          can enter it on the <b>Switch Role</b> page of the AWS Management Console. For example:
          <code class="code">division_abc/subdivision_efg/role_XYZ</code>.</p>
      </li><li class="listitem">
        <p>If you create the role programmatically, you can add a <code class="code">Path</code> of up to 512
          characters and a <code class="code">RoleName</code>. The role name can be up to 64
          characters long. However, to use a role with the <b>Switch Role</b> feature
          in the AWS Management Console, the combined <code class="code">Path</code> and <code class="code">RoleName</code> cannot exceed
          64 characters.</p>
      </li></ul></div>
    <div class="itemizedlist">
       
      
    <ul class="itemizedlist"><li class="listitem">
        <p>For security purposes, you can <a href="./cloudtrail-integration.html#cloudtrail-integration_signin-tempcreds">review AWS CloudTrail logs</a> to learn who performed an action in AWS. You can use the
          <code class="code">sts:SourceIdentity</code> condition key in the role trust policy to require users
          to specify an identity when they assume a role. For example, you can require that IAM
          users specify their own user name as their source identity. This can help you determine
          which user performed a specific action in AWS. For more information, see <a href="./reference_policies_iam-condition-keys.html#ck_sourceidentity">sts:SourceIdentity</a>. You can also use
          <a href="./reference_policies_iam-condition-keys.html#ck_rolesessionname">sts:RoleSessionName</a> to require
          users to specify a session name when they assume a role. This can help you differentiate
          between role sessions when a role is used by different principals.</p>
      </li></ul></div>
  <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./id_roles_use.html">Using roles</div><div id="next" class="next-link" accesskey="n" href="./id_roles_use_passrole.html">Granting permissions to pass a role to a service</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/id_roles_use_permissions-to-switch.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/id_roles_use_permissions-to-switch.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>