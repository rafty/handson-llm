<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Providing access to externally authenticated users (identity federation) - AWS Identity and Access Management</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="id_roles_common-scenarios_federated-users" /><meta name="default_state" content="id_roles_common-scenarios_federated-users" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_common-scenarios_federated-users.html" /><meta name="description" content="Use roles to grant an IAM user access through identity federation (authorization by an external service)." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS Identity and Access Management" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Control access to your AWS resources with user identity (authentication) and with policies that define specific permissions (authorization)." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_common-scenarios_federated-users.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/id_roles_common-scenarios_federated-users.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/id_roles_common-scenarios_federated-users.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/id_roles_common-scenarios_federated-users.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/id_roles_common-scenarios_federated-users.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_common-scenarios_federated-users.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_common-scenarios_federated-users.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/id_roles_common-scenarios_federated-users.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/id_roles_common-scenarios_federated-users.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/id_roles_common-scenarios_federated-users.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/id_roles_common-scenarios_federated-users.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/id_roles_common-scenarios_federated-users.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/id_roles_common-scenarios_federated-users.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/id_roles_common-scenarios_federated-users.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/id_roles_common-scenarios_federated-users.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/id_roles_common-scenarios_federated-users.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/id_roles_common-scenarios_federated-users.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/id_roles_common-scenarios_federated-users.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/id_roles_common-scenarios_federated-users.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/IAM/latest/UserGuide/id_roles_common-scenarios_federated-users.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/id_roles_common-scenarios_federated-users.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_common-scenarios_federated-users.html" hreflang="x-default" /><meta name="feedback-item" content="IAM" /><meta name="this_doc_product" content="AWS Identity and Access Management" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'iam'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="Providing access to externally authenticated users (identity federation)" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Providing access to externally authenticated users (identity federation) - AWS Identity and Access Management</title><meta name="pdf" content="/pdfs/IAM/latest/UserGuide/iam-ug.pdf#id_roles_common-scenarios_federated-users" /><meta name="github" content="https://github.com/awsdocs/iam-user-guide/tree/main/doc_source/id_roles_common-scenarios_federated-users.md" /><meta name="rss" content="aws-iam-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=76" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/id_roles_common-scenarios_federated-users.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/id_roles_common-scenarios_federated-users.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/id_roles_common-scenarios_federated-users.html" /><meta name="keywords" content="IAM,AWS Identity and Access Management,IAM user,user,IAM group,group,IAM role,role,permission policy,trust policy,policy,access key,password" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS Identity and Access Management",
        "item" : "https://docs.aws.amazon.com/iam/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "IAM Identities (users, user groups, and roles)",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/id.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "IAM roles",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Common scenarios for roles: Users, applications, and services",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_common-scenarios.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "Providing access to externally authenticated users (identity federation)",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_common-scenarios.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/IAM/latest/UserGuide/iam-ug.pdf#id_roles_common-scenarios_federated-users" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a href="https://github.com/awsdocs/iam-user-guide/tree/main/doc_source/id_roles_common-scenarios_federated-users.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/iam/index.html">AWS Identity and Access Management</a><a href="introduction.html">User Guide</a></div><div id="page-toc-src"><a href="#id_roles_common-scenarios_federated-users-cognito">Federating users of a mobile or web-based app with Amazon Cognito</a><a href="#id_roles_common-scenarios_federated-users-openId">Federating users with public identity service providers or OpenID Connect</a><a href="#id_roles_common-scenarios_federated-users-saml20">Federating users with SAML 2.0</a><a href="#id_roles_common-scenarios_federated-users-idbroker">Federating users by creating a custom identity broker application</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="id_roles_common-scenarios_federated-users">Providing access to externally
    authenticated users (identity federation)</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Your users might already have identities outside of AWS, such as in your corporate
    directory. If those users need to work with AWS resources (or work with applications that
    access those resources), then those users also need AWS security credentials. You can use an
    IAM role to specify permissions for users whose identity is federated from your organization
    or a third-party identity provider (IdP).</p><h2 id="id_roles_common-scenarios_federated-users-cognito">Federating users of a mobile or web-based app with Amazon Cognito</h2>
    
    <p>If you create a mobile or web-based app that accesses AWS resources, the app needs
      security credentials in order to make programmatic requests to AWS. For most mobile
      application scenarios, we recommend that you use <a href="https://aws.amazon.com/cognito/" rel="noopener noreferrer" target="_blank"><span>Amazon Cognito</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. You can use this service with the <a href="https://aws.amazon.com/sdkforios/" rel="noopener noreferrer" target="_blank"><span>AWS Mobile SDK for iOS</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> and the <a href="https://aws.amazon.com/sdkforandroid/" rel="noopener noreferrer" target="_blank"><span>AWS
        Mobile SDK for Android and Fire OS</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> to create unique identities for users and
      authenticate them for secure access to your AWS resources. Amazon Cognito supports the same identity
      providers as those listed in the next section, and it also supports <a href="http://aws.amazon.com/blogs/mobile/amazon-cognito-announcing-developer-authenticated-identities" rel="noopener noreferrer" target="_blank"><span>developer authenticated identities</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> and unauthenticated (guest) access. Amazon Cognito also
      provides API operations for synchronizing user data so that it is preserved as users move between
      devices. For more information, see <a href="./id_roles_providers_oidc_cognito.html">Using Amazon Cognito for mobile apps</a>. </p>
  <h2 id="id_roles_common-scenarios_federated-users-openId">Federating users with public identity service providers or OpenID Connect</h2>
    
    <p>Whenever possible, use Amazon Cognito for mobile and web-based application scenarios. Amazon Cognito does
      most of the behind-the-scenes work with public identity provider services for you. It works
      with the same third-party services and also supports anonymous sign-ins. However, for more
      advanced scenarios, you can work directly with a third-party service like Login with Amazon,
      Facebook, Google, or any IdP that is compatible with OpenID Connect (OIDC). For more
      information about using web identity federation using one of these services, see <a href="./id_roles_providers_oidc.html">About web identity federation</a>.</p>
  <h2 id="id_roles_common-scenarios_federated-users-saml20">Federating users with SAML 2.0</h2>
    
    <p>If your organization already uses an identity provider software package that supports SAML
      2.0 (Security Assertion Markup Language 2.0), you can create trust between your organization
      as an identity provider (IdP) and AWS as the service provider. You can then use SAML to
      provide your users with federated single-sign on (SSO) to the AWS Management Console or federated access to
      call AWS API operations. For example, if your company uses Microsoft Active Directory and Active
      Directory Federation Services, then you can federate using SAML 2.0. For more information
      about federating users with SAML 2.0, see <a href="./id_roles_providers_saml.html">About SAML 2.0-based federation</a>.</p>
  <h2 id="id_roles_common-scenarios_federated-users-idbroker">Federating users by creating a custom identity broker application</h2>
    
    <p>If your identity store is not compatible with SAML 2.0, then you can build a custom
      identity broker application to perform a similar function. The broker application
      authenticates users, requests temporary credentials for users from AWS, and then provides
      them to the user to access AWS resources. </p>
    <p>For example, Example Corp. has many employees who need to run internal applications that
      access the company's AWS resources. The employees already have identities in the company
      identity and authentication system, and Example Corp. doesn't want to create a separate IAM
      user for each company employee.</p>
    <p>Bob is a developer at Example Corp. To enable Example Corp. internal applications to
      access the company's AWS resources, Bob develops a custom identity broker application. The
      application verifies that employees are signed into the existing Example Corp. identity and
      authentication system, which might use LDAP, Active Directory, or another system. The identity
      broker application then obtains temporary security credentials for the employees. This
      scenario is similar to the previous one (a mobile app that uses a custom authentication
      system), except that the applications that need access to AWS resources all run within the
      corporate network, and the company has an existing authentication system.</p>
    <p>To get temporary security credentials, the identity broker application calls either
        <code class="code">AssumeRole</code> or <code class="code">GetFederationToken</code> to obtain temporary security
      credentials, depending on how Bob wants to manage the policies for users and when the
      temporary credentials should expire. (For more information about the differences between these
      API operations, see <a href="./id_credentials_temp.html">Temporary security credentials in IAM</a> and <a href="./id_credentials_temp_control-access.html">Controlling permissions for temporary
    security credentials</a>.) The call returns temporary security
      credentials consisting of an AWS access key ID, a secret access key, and a session token. The
      identity broker application makes these temporary security credentials available to the
      internal company application. The app can then use the temporary credentials to make calls to
      AWS directly. The app caches the credentials until they expire, and then requests a new set
      of temporary credentials. The following figure illustrates this scenario.</p>
    <div class="mediaobject">
       
        <img src="/images/IAM/latest/UserGuide/images/enterprise-authentication-with-identity-broker-application.diagram.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="Sample workflow using a custom identity broker application" />
       
       
    </div>
    <p>This scenario has the following attributes:</p>
    <div class="itemizedlist">
       
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p>The identity broker application has permissions to access IAM's token service (STS)
          API to create temporary security credentials.</p>
      </li><li class="listitem">
        <p>The identity broker application is able to verify that employees are authenticated
          within the existing authentication system.</p>
      </li><li class="listitem">
        <p>Users are able to get a temporary URL that gives them access to the AWS Management
          Console (which is referred to as single sign-on).</p>
      </li></ul></div>
    <p>To see a sample application similar to the identity broker application that is described
      in this scenario, go to <a href="https://aws.amazon.com/code/1288653099190193" rel="noopener noreferrer" target="_blank"><span>Identity Federation
        Sample Application for an Active Directory Use Case</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> at <em>AWS
        Sample Code &amp; Libraries</em>. For information about creating temporary security
      credentials, see <a href="./id_credentials_temp_request.html">Requesting temporary security credentials</a>. For more information about federated users
      getting access to the AWS Management Console, see <a href="./id_roles_providers_enable-console-saml.html">Enabling SAML 2.0 federated users to
      access the AWS Management Console</a>.</p>
  <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./confused-deputy.html">The confused deputy problem</div><div id="next" class="next-link" accesskey="n" href="./id_roles_providers.html">Identity providers and federation</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/id_roles_common-scenarios_federated-users.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/id_roles_common-scenarios_federated-users.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>