<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Requesting temporary security credentials - AWS Identity and Access Management</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="id_credentials_temp_request" /><meta name="default_state" content="id_credentials_temp_request" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_request.html" /><meta name="description" content="Request temporary security credentials from AWS Security Token Service." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS Identity and Access Management" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Control access to your AWS resources with user identity (authentication) and with policies that define specific permissions (authorization)." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_request.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/id_credentials_temp_request.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/id_credentials_temp_request.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/id_credentials_temp_request.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/id_credentials_temp_request.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_request.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_request.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/id_credentials_temp_request.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/id_credentials_temp_request.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/id_credentials_temp_request.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/id_credentials_temp_request.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/id_credentials_temp_request.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/id_credentials_temp_request.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/id_credentials_temp_request.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/id_credentials_temp_request.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/id_credentials_temp_request.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/id_credentials_temp_request.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/id_credentials_temp_request.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/id_credentials_temp_request.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/IAM/latest/UserGuide/id_credentials_temp_request.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/id_credentials_temp_request.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_request.html" hreflang="x-default" /><meta name="feedback-item" content="IAM" /><meta name="this_doc_product" content="AWS Identity and Access Management" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'iam'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="Requesting temporary security credentials" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Requesting temporary security credentials - AWS Identity and Access Management</title><meta name="pdf" content="/pdfs/IAM/latest/UserGuide/iam-ug.pdf#id_credentials_temp_request" /><meta name="github" content="https://github.com/awsdocs/iam-user-guide/tree/main/doc_source/id_credentials_temp_request.md" /><meta name="rss" content="aws-iam-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=76" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/id_credentials_temp_request.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/id_credentials_temp_request.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/id_credentials_temp_request.html" /><meta name="keywords" content="IAM,AWS Identity and Access Management,IAM user,user,IAM group,group,IAM role,role,permission policy,trust policy,policy,access key,password" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS Identity and Access Management",
        "item" : "https://docs.aws.amazon.com/iam/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "IAM Identities (users, user groups, and roles)",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/id.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Temporary security credentials in IAM",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Requesting temporary security credentials",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/IAM/latest/UserGuide/iam-ug.pdf#id_credentials_temp_request" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a href="https://github.com/awsdocs/iam-user-guide/tree/main/doc_source/id_credentials_temp_request.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/iam/index.html">AWS Identity and Access Management</a><a href="introduction.html">User Guide</a></div><div id="page-toc-src"><a href="#using_sts_regions">Using AWS STS with AWS Regions</a><a href="#api_assumerole">AssumeRole—cross-account delegation and federation through a custom
        identity broker</a><a href="#api_assumerolewithwebidentity">AssumeRoleWithWebIdentity—federation through a web-based identity
        provider</a><a href="#api_assumerolewithsaml">AssumeRoleWithSAML—federation through an enterprise Identity Provider
        compatible with SAML 2.0</a><a href="#api_getfederationtoken">GetFederationToken—federation through a custom identity broker</a><a href="#api_getsessiontoken">GetSessionToken—temporary credentials for users in untrusted
        environments</a><a href="#stsapi_comparison">Comparing the AWS STS API operations</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="id_credentials_temp_request">Requesting temporary security credentials</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>To request temporary security credentials, you can use AWS Security Token Service (AWS STS) operations in the
    AWS API. These include operations to create and provide trusted users with temporary security
    credentials that can control access to your AWS resources. For more information about AWS STS,
    see <a href="./id_credentials_temp.html">Temporary security credentials in IAM</a>. To learn about
    the different methods that you can use to request temporary security credentials by assuming a
    role, see <a href="./id_roles_use.html">Using IAM roles</a>.</p><p>To call the API operations, you can use one of the <a href="http://aws.amazon.com/tools/" rel="noopener noreferrer" target="_blank"><span>AWS SDKs</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. The SDKs are available for a variety of programming languages and
    environments, including Java, .NET, Python, Ruby, Android, and iOS. The SDKs take care of tasks
    such as cryptographically signing your requests, retrying requests if necessary, and handling
    error responses. You can also use the AWS STS Query API, which is described in the
    <a href="https://docs.aws.amazon.com/STS/latest/APIReference/">AWS Security Token Service API Reference</a>. Finally, two command line tools support the AWS STS commands: the <a href="https://aws.amazon.com/documentation/cli" rel="noopener noreferrer" target="_blank"><span>AWS Command Line Interface</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>, and the <a href="https://aws.amazon.com/documentation/powershell" rel="noopener noreferrer" target="_blank"><span>AWS Tools for Windows PowerShell</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. </p><p>The AWS STS API operations create a new session with temporary security credentials that
    include an access key pair and a session token. The access key pair consists of an access key ID
    and a secret key. Users (or an application that the user runs) can use these credentials to
    access your resources. You can create a role session and pass session policies and session tags
    programmatically using AWS STS API operations. The resulting session permissions are the
    intersection of the role's identity-based policies and the session policies. For more
    information about session policies, see <a href="./access_policies.html#policies_session">Session policies</a>. For more information about session tags, see <a href="./id_session-tags.html">Passing session tags in AWS STS</a>.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>The size of the session token that AWS STS API operations return is not fixed. We strongly
      recommend that you make no assumptions about the maximum size. The typical token size is less
      than 4096 bytes, but that can vary.</p></div></div>
    <h2 id="using_sts_regions">Using AWS STS with AWS Regions</h2>
    <p>You can send AWS STS API calls either to a global endpoint or to one of the Regional
      endpoints. If you choose an endpoint closer to you, you can reduce latency and improve the
      performance of your API calls. You also can choose to direct your calls to an alternative
      Regional endpoint if you can no longer communicate with the original endpoint. If you are
      using one of the various AWS SDKs, then use that SDK method to specify a Region before you
      make the API call. If you manually construct HTTP API requests, then you must direct the
      request to the correct endpoint yourself. For more information, see the <a href="https://docs.aws.amazon.com/general/latest/gr/rande.html#sts_region">AWS STS section of <em>Regions and
          Endpoints</em></a> and <a href="./id_credentials_temp_enable-regions.html">Managing AWS STS in an AWS Region</a>.</p>
    <p>The following are the API operations that you can use to acquire temporary credentials for
      use in your AWS environment and applications.</p>
   
    <h2 id="api_assumerole"><a href="https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRole.html">AssumeRole</a>—cross-account delegation and federation through a custom
        identity broker</h2>
    <p>The <code class="code">AssumeRole</code> API operation is useful for allowing existing IAM users to
      access AWS resources that they don't already have access to. For example, the user might
      need access to resources in another AWS account. It is also useful as a means to temporarily
      gain privileged access—for example, to provide multi-factor authentication (MFA). You
      must call this API using active credentials. To learn who can call this operation, see <a href="#stsapi_comparison">Comparing the AWS STS API operations</a>. For more information, see
        <a href="./id_roles_create_for-user.html">Creating a role to delegate permissions to an IAM
      user</a> and
        <a href="./id_credentials_mfa_configure-api-require.html">Configuring MFA-protected API
      access</a>.</p>
    <p>This call must be made using valid AWS security credentials. When you make this call,
      you pass the following information:</p>
    <div class="itemizedlist">
       
       
       
       
       
       
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p>The Amazon Resource Name (ARN) of the role that the app should assume. </p>
      </li><li class="listitem">
        <p>(Optional) Duration, which specifies the duration of the temporary security
          credentials. Use the <code class="code">DurationSeconds</code> parameter to specify the duration of the
          role session from 900 seconds (15 minutes) up to the maximum session duration setting for
          the role. To learn how to view the maximum value for your role, see <a href="./id_roles_use.html#id_roles_use_view-role-max-session">View the maximum session duration setting
        for a role</a>. If you do not pass this parameter,
          the temporary credentials expire in one hour. The <code class="code">DurationSeconds</code> parameter
          from this API is separate from the <code class="code">SessionDuration</code> HTTP parameter that you
          use to specify the duration of a console session. Use the <code class="code">SessionDuration</code>
          HTTP parameter in the request to the federation endpoint for a console sign-in token. For
          more information, see <a href="./id_roles_providers_enable-console-custom-url.html">Enabling custom identity broker
      access to the AWS console</a>.</p>
      </li><li class="listitem">
        <p>Role session name. Use this string value to identify the session when a role is used
          by different principals. For security purposes, administrators can view this field in
            <a href="./cloudtrail-integration.html#cloudtrail-integration_signin-tempcreds">AWS CloudTrail logs</a> to help
          identify who performed an action in AWS. Your administrator might require that you
          specify your IAM user name as the session name when you assume the role. For more
          information, see <a href="./reference_policies_iam-condition-keys.html#ck_rolesessionname">sts:RoleSessionName</a>.</p>
      </li><li class="listitem">
        <p>(Optional) Source identity. You can require users to specify a source identity when
          they assume a role. After the source identity is set, the value cannot be changed. It is
          present in the request for all actions that are taken during the role session. The source
          identity value persists across <a href="./id_roles_terms-and-concepts.html#iam-term-role-chaining">chained role</a>
          sessions. You can use source identity information in AWS CloudTrail logs to determine who took
          actions with a role. For more information about using source identity, see <a href="./id_credentials_temp_control-access_monitor.html">Monitor and control actions
            taken with assumed roles</a>.</p>
      </li><li class="listitem">
        <p>(Optional) Inline or managed session policies. These policies limit the permissions
          from the role's identity-based policy that are assigned to the role session. The resulting
          session's permissions are the intersection of the role's identity-based policies and the
          session policies. Session policies cannot be used to grant more permissions than those
          allowed by the identity-based policy of the role that is being assumed. For more
          information about role session permissions, see <a href="./access_policies.html#policies_session">Session policies</a>.</p>
      </li><li class="listitem">
        <p>(Optional) Session tags. You can assume a role and then use the temporary credentials
          to make a request. When you do, the session's principal tags include the role's tags and
          the passed session tags. If you make this call using temporary credentials, the new
          session also inherits transitive session tags from the calling session. For more
          information about session tags, see <a href="./id_session-tags.html">Passing session tags in AWS STS</a>.</p>
      </li><li class="listitem">
        <p>(Optional) MFA information. If configured to use multi-factor authentication (MFA),
          then you include the identifier for an MFA device and the one-time code provided by that
          device.</p>
      </li><li class="listitem">
        <p>(Optional) <code class="code">ExternalId</code> value that can be used when delegating access to
          your account to a third party. This value helps ensure that only the specified third party
          can access the role. For more information, see <a href="./id_roles_create_for-user_externalid.html">How to use an external ID when granting
      access to your AWS resources to a third party</a>.</p>
      </li></ul></div>
    <p>The following example shows a sample request and response using <code class="code">AssumeRole</code>.
      This example request assumes the <code class="code">demo</code> role for the specified duration with the
      included <a href="./access_policies.html#policies_session">session policy</a>, <a href="./id_session-tags.html">session tags</a>, <a href="./id_roles_create_for-user_externalid.html">external ID</a>, and <a href="./id_credentials_temp_control-access_monitor.html">source identity</a>. The resulting
      session is named <code class="code">John-session</code>. </p>
    <div class="example"><h6>Example request</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="http ">https://sts.amazonaws.com/
?Version=2011-06-15
&amp;Action=AssumeRole
&amp;RoleSessionName=John-session
&amp;RoleArn=arn:aws::iam::123456789012:role/demo
&amp;Policy=%7B%22Version%22%3A%222012-10-17%22%2C%22Statement%22%3A%5B%7B%22Sid%22%3A%20%22Stmt1%22%2C%22Effect%22%3A%20%22Allow%22%2C%22Action%22%3A%20%22s3%3A*%22%2C%22Resource%22%3A%20%22*%22%7D%5D%7D
&amp;DurationSeconds=1800
&amp;Tags.member.1.Key=Project
&amp;Tags.member.1.Value=Pegasus
&amp;Tags.member.2.Key=Cost-Center
&amp;Tags.member.2.Value=12345
&amp;ExternalId=123ABC
&amp;SourceIdentity=DevUser123
&amp;AUTHPARAMS</code></pre></div></div>
    <p>The policy value shown in the preceding example is the URL-encoded version of the
      following policy:</p>
    <p><code class="code"><span>{</span>"Version":"2012-10-17","Statement":[<span>{</span>"Sid":"Stmt1","Effect":"Allow","Action":"s3:*","Resource":"*"}]}</code></p>
    <p>The <code class="code">AUTHPARAMS</code> parameter in the example is a placeholder for your
        <em>signature</em>. A signature is the authentication information that you must
      include with AWS HTTP API requests. We recommend using the <a href="https://aws.amazon.com/tools/" rel="noopener noreferrer" target="_blank"><span>AWS SDKs</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> to create API requests, and one benefit of
      doing so is that the SDKs handle request signing for you. If you must create and sign API
      requests manually, see <a href="https://docs.aws.amazon.com/general/latest/gr/sigv4_signing.html">Signing AWS Requests By
        Using Signature Version 4</a> in the <em>Amazon Web Services General Reference</em> to learn how
      to sign a request.</p>

    <p>In addition to the temporary security credentials, the response includes the Amazon
      Resource Name (ARN) for the federated user and the expiration time of the credentials.</p>
    <div class="example"><h6>Example response</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"></div><code class="xml ">&lt;AssumeRoleResponse xmlns="https://sts.amazonaws.com/doc/2011-06-15/"&gt;
&lt;AssumeRoleResult&gt;
&lt;SourceIdentity&gt;DevUser123&lt;/SourceIdentity&gt;
&lt;Credentials&gt;
  &lt;SessionToken&gt;
   AQoDYXdzEPT//////////wEXAMPLEtc764bNrC9SAPBSM22wDOk4x4HIZ8j4FZTwdQW
   LWsKWHGBuFqwAeMicRXmxfpSPfIeoIYRqTflfKD8YUuwthAx7mSEI/qkPpKPi/kMcGd
   QrmGdeehM4IC1NtBmUpp2wUE8phUZampKsburEDy0KPkyQDYwT7WZ0wq5VSXDvp75YU
   9HFvlRd8Tx6q6fE8YQcHNVXAkiY9q6d+xo0rKwT38xVqr7ZD0u0iPPkUL64lIZbqBAz
   +scqKmlzm8FDrypNC9Yjc8fPOLn9FX9KSYvKTr4rvx3iSIlTJabIQwj2ICCR/oLxBA==
  &lt;/SessionToken&gt;
  &lt;SecretAccessKey&gt;
   wJalrXUtnFEMI/K7MDENG/bPxRfiCYzEXAMPLEKEY
  &lt;/SecretAccessKey&gt;
  &lt;Expiration&gt;2019-07-15T23:28:33.359Z&lt;/Expiration&gt;
  &lt;AccessKeyId&gt;AKIAIOSFODNN7EXAMPLE&lt;/AccessKeyId&gt;
&lt;/Credentials&gt;
&lt;AssumedRoleUser&gt;
  &lt;Arn&gt;arn:aws:sts::123456789012:assumed-role/demo/John&lt;/Arn&gt;
  &lt;AssumedRoleId&gt;ARO123EXAMPLE123:John&lt;/AssumedRoleId&gt;
&lt;/AssumedRoleUser&gt;
&lt;PackedPolicySize&gt;8&lt;/PackedPolicySize&gt;
&lt;/AssumeRoleResult&gt;
&lt;ResponseMetadata&gt;
&lt;RequestId&gt;c6104cbe-af31-11e0-8154-cbc7ccf896c7&lt;/RequestId&gt;
&lt;/ResponseMetadata&gt;
&lt;/AssumeRoleResponse&gt;</code></pre></div></div>
    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>An AWS conversion compresses the passed session policies and session tags into a
        packed binary format that has a separate limit. Your request can fail for this limit even if
        your plaintext meets the other requirements. The <code class="code">PackedPolicySize</code> response
        element indicates by percentage how close the policies and tags for your request are to the
        upper size limit.</p></div></div>
   
    <h2 id="api_assumerolewithwebidentity"><a href="https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html">AssumeRoleWithWebIdentity</a>—federation through a web-based identity
        provider</h2>
    <p>The <code class="code">AssumeRoleWithWebIdentity</code> API operation returns a set of temporary
      security credentials for federated users who are authenticated through a public identity
      provider. Examples of public identity providers include Login with Amazon, Facebook, Google,
      or any OpenID Connect (OIDC)-compatible identity provider. This operation is useful for
      creating mobile applications or client-based web applications that require access to AWS.
      Using this operation means that your users do not need their own AWS or IAM identities.
      For more information, see <a href="./id_roles_providers_oidc.html">About web identity federation</a>.</p>
    <p>Instead of directly calling <code class="code">AssumeRoleWithWebIdentity</code>, we recommend that you
      use Amazon Cognito and the Amazon Cognito credentials provider with the AWS SDKs for mobile development. For
      more information, see <a href="https://docs.amplify.aws/lib/auth/getting-started/q/platform/js/#authentication-with-amplify" rel="noopener noreferrer" target="_blank"><span>Authentication with Amplify</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> in the <em>Amplify
      Documentation</em>.</p>
    <p>If you are not using Amazon Cognito, you call the <code class="code">AssumeRoleWithWebIdentity</code> action of
      AWS STS. This is an unsigned call, meaning that the app does not need to have access to any
      AWS security credentials to make the call. When you make this call, you pass the following
      information:</p>
    <div class="itemizedlist">
       
       
       
       
       
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p>The Amazon Resource Name (ARN) of the role that the app should assume. If your app
          supports multiple ways for users to sign in, you must define multiple roles, one per
          identity provider. The call to <code class="code">AssumeRoleWithWebIdentity</code> should include the
          ARN of the role that is specific to the provider through which the user signed in. </p>
      </li><li class="listitem">
        <p>The token that the app gets from the IdP after the app authenticates the user.</p>
      </li><li class="listitem">
        <p>You can configure your IdP to pass attributes into your token as <a href="./id_session-tags.html">session tags</a>.</p>
      </li><li class="listitem">
        <p>(Optional) Duration, which specifies the duration of the temporary security
          credentials. Use the <code class="code">DurationSeconds</code> parameter to specify the duration of the
          role session from 900 seconds (15 minutes) up to the maximum session duration setting for
          the role. To learn how to view the maximum value for your role, see <a href="./id_roles_use.html#id_roles_use_view-role-max-session">View the maximum session duration setting
        for a role</a>. If you do not pass this parameter,
          the temporary credentials expire in one hour. The <code class="code">DurationSeconds</code> parameter
          from this API is separate from the <code class="code">SessionDuration</code> HTTP parameter that you
          use to specify the duration of a console session. Use the <code class="code">SessionDuration</code>
          HTTP parameter in the request to the federation endpoint for a console sign-in token. For
          more information, see <a href="./id_roles_providers_enable-console-custom-url.html">Enabling custom identity broker
      access to the AWS console</a>.</p>
      </li><li class="listitem">
        <p>Role session name. Use this string value to identify the session when a role is used
          by different principals. For security purposes, administrators can view this field in
            <a href="./cloudtrail-integration.html#cloudtrail-integration_signin-tempcreds">AWS CloudTrail logs</a> to learn
          who performed an action in AWS. Your administrator might require that you provide a
          specific value for the session name when you assume the role. For more information, see
            <a href="./reference_policies_iam-condition-keys.html#ck_rolesessionname">sts:RoleSessionName</a>.</p>
      </li><li class="listitem">
        <p>(Optional) Source identity. You can require federated users to specify a source
          identity when they assume a role. After the source identity is set, the value cannot be
          changed. It is present in the request for all actions that are taken during the role
          session. The source identity value persists across <a href="./id_roles_terms-and-concepts.html#iam-term-role-chaining">chained role</a> sessions. You can use source identity information in AWS CloudTrail logs
          to determine who took actions with a role. For more information about using source
          identity, see <a href="./id_credentials_temp_control-access_monitor.html">Monitor and control actions
            taken with assumed roles</a>.</p>
      </li><li class="listitem">
        <p>(Optional) Inline or managed session policies. These policies limit the permissions
          from the role's identity-based policy that are assigned to the role session. The resulting
          session's permissions are the intersection of the role's identity-based policies and the
          session policies. Session policies cannot be used to grant more permissions than those
          allowed by the identity-based policy of the role that is being assumed. For more
          information about role session permissions, see <a href="./access_policies.html#policies_session">Session policies</a>.</p>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>A call to <code class="code">AssumeRoleWithWebIdentity</code> is not signed (encrypted).
            Therefore, you should only include optional session policies if the request is
            transmitted through a trusted intermediary. In this case, someone could alter the policy
            to remove the restrictions.</p></div></div>
      </li></ul></div>
    <p>When you call <code class="code">AssumeRoleWithWebIdentity</code>, AWS verifies the authenticity of
      the token. For example, depending on the provider, AWS might make a call to the provider and
      include the token that the app has passed. Assuming that the identity provider validates the
      token, AWS returns the following information to you: </p>
    <div class="itemizedlist">
       
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p>A set of temporary security credentials. These consist of an access key ID, a secret
          access key, and a session token. </p>
      </li><li class="listitem">
        <p>The role ID and the ARN of the assumed role. </p>
      </li><li class="listitem">
        <p>A <code class="code">SubjectFromWebIdentityToken</code> value that contains the unique user
          ID.</p>
      </li></ul></div>
    <p>When you have the temporary security credentials, you can use them to make AWS API
      calls. This is the same process as making an AWS API call with long-term security
      credentials. The difference is that you must include the session token, which lets AWS
      verify that the temporary security credentials are valid.</p>
    <p>Your app should cache the credentials. As noted, by default the credentials expire after
      an hour. If you don't use the <a href="http://aws.amazon.com/blogs/mobile/using-the-amazoncredentialsprovider-protocol-in-the-aws-sdk-for-ios/" rel="noopener noreferrer" target="_blank"><span>AmazonSTSCredentialsProvider</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> operation in the AWS SDK, it's up to you and your
      app to call <code class="code">AssumeRoleWithWebIdentity</code> again. Call this operation to get a new set
      of temporary security credentials before the old ones expire.</p>
   
    <h2 id="api_assumerolewithsaml"><a href="https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRoleWithSAML.html">AssumeRoleWithSAML</a>—federation through an enterprise Identity Provider
        compatible with SAML 2.0</h2>
    <p>The <code class="code">AssumeRoleWithSAML</code> API operation returns a set of temporary security
      credentials for federated users who are authenticated by your organization's existing identity
      system. The users must also use <a href="https://www.oasis-open.org/standards#samlv2.0" rel="noopener noreferrer" target="_blank"><span>SAML</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> 2.0 (Security Assertion Markup Language) to pass authentication and
      authorization information to AWS. This API operation is useful in organizations that have
      integrated their identity systems (such as Windows Active Directory or OpenLDAP) with software
      that can produce SAML assertions. Such an integration provides information about user identity
      and permissions (such as Active Directory Federation Services or Shibboleth). For more
      information, see <a href="./id_roles_providers_saml.html">About SAML 2.0-based federation</a>.</p>
    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>A call to <code class="code">AssumeRoleWithSAML</code> is not signed (encrypted). Therefore, you
        should only include optional session policies if the request is transmitted through a
        trusted intermediary. In this case, someone could alter the policy to remove the
        restrictions.</p></div></div>
    <p>This is an unsigned call, which means that the app does not need to have access to any
      AWS security credentials in order to make the call. When you make this call, you pass the
      following information:</p>
    <div class="itemizedlist">
       
       
       
       
       
       
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p>The Amazon Resource Name (ARN) of the role that the app should assume. </p>
      </li><li class="listitem">
        <p>The ARN of the SAML provider created in IAM that describes the identity
          provider.</p>
      </li><li class="listitem">
        <p>The SAML assertion, encoded in base64, that was provided by the SAML identity provider
          in its authentication response to the sign-in request from your app.</p>
      </li><li class="listitem">
        <p>You can configure your IdP to pass attributes into your SAML assertion as <a href="./id_session-tags.html">session tags</a>.</p>
      </li><li class="listitem">
        <p>(Optional) Duration, which specifies the duration of the temporary security
          credentials. Use the <code class="code">DurationSeconds</code> parameter to specify the duration of the
          role session from 900 seconds (15 minutes) up to the maximum session duration setting for
          the role. To learn how to view the maximum value for your role, see <a href="./id_roles_use.html#id_roles_use_view-role-max-session">View the maximum session duration setting
        for a role</a>. If you do not pass this parameter,
          the temporary credentials expire in one hour. The <code class="code">DurationSeconds</code> parameter
          from this API is separate from the <code class="code">SessionDuration</code> HTTP parameter that you
          use to specify the duration of a console session. Use the <code class="code">SessionDuration</code>
          HTTP parameter in the request to the federation endpoint for a console sign-in token. For
          more information, see <a href="./id_roles_providers_enable-console-custom-url.html">Enabling custom identity broker
      access to the AWS console</a>.</p>
      </li><li class="listitem">
        <p>(Optional) Inline or managed session policies. These policies limit the permissions
          from the role's identity-based policy that are assigned to the role session. The resulting
          session's permissions are the intersection of the role's identity-based policies and the
          session policies. Session policies cannot be used to grant more permissions than those
          allowed by the identity-based policy of the role that is being assumed. For more
          information about role session permissions, see <a href="./access_policies.html#policies_session">Session policies</a>.</p>
      </li><li class="listitem">
        <p>Role session name. Use this string value to identify the session when a role is used
          by different principals. For security purposes, administrators can view this field in
            <a href="./cloudtrail-integration.html#cloudtrail-integration_signin-tempcreds">AWS CloudTrail logs</a> to learn
          who performed an action in AWS. Your administrator might require that you provide a
          specific value for the session name when you assume the role. For more information, see
            <a href="./reference_policies_iam-condition-keys.html#ck_rolesessionname">sts:RoleSessionName</a>.</p>
      </li><li class="listitem">
        <p>(Optional) Source identity. You can require federated users to specify a source
          identity when they assume a role. After the source identity is set, the value cannot be
          changed. It is present in the request for all actions that are taken during the role
          session. The source identity value persists across <a href="./id_roles_terms-and-concepts.html#iam-term-role-chaining">chained role</a> sessions. You can use source identity information in AWS CloudTrail logs
          to determine who took actions with a role. For more information about using source
          identity, see <a href="./id_credentials_temp_control-access_monitor.html">Monitor and control actions
            taken with assumed roles</a>.</p>
      </li></ul></div>
    <p>When you call <code class="code">AssumeRoleWithSAML</code>, AWS verifies the authenticity of the SAML
      assertion. Assuming that the identity provider validates the assertion, AWS returns the
      following information to you: </p>
    <div class="itemizedlist">
       
       
       
       
       
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p>A set of temporary security credentials. These consist of an access key ID, a secret
          access key, and a session token. </p>
      </li><li class="listitem">
        <p>The role ID and the ARN of the assumed role. </p>
      </li><li class="listitem">
        <p>An <code class="code">Audience</code> value that contains the value of the <code class="code">Recipient</code>
          attribute of the <code class="code">SubjectConfirmationData</code> element of the SAML
          assertion.</p>
      </li><li class="listitem">
        <p>An <code class="code">Issuer</code> value that contains the value of the <code class="code">Issuer</code>
          element of the SAML assertion.</p>
      </li><li class="listitem">
        <p>A <code class="code">NameQualifier</code> element that contains a hash value built from the
            <code class="code">Issuer</code> value, the AWS account ID, and the friendly name of the SAML
          provider. When combined with the <code class="code">Subject</code> element, they can uniquely identify
          the federated user.</p>
      </li><li class="listitem">
        <p>A <code class="code">Subject</code> element that contains the value of the <code class="code">NameID</code>
          element in the <code class="code">Subject</code> element of the SAML assertion.</p>
      </li><li class="listitem">
        <p>A <code class="code">SubjectType</code> element that indicates the format of the
            <code class="code">Subject</code> element. The value can be <code class="code">persistent</code>,
            <code class="code">transient</code>, or the full <code class="code">Format</code> URI from the
            <code class="code">Subject</code> and <code class="code">NameID</code> elements used in your SAML assertion. For
          information about the <code class="code">NameID</code> element's <code class="code">Format</code> attribute, see
            <a href="./id_roles_providers_create_saml_assertions.html">Configuring SAML assertions for the
      authentication response</a>. </p>
      </li></ul></div>
    <p>When you have the temporary security credentials, you can use them to make AWS API
      calls. This is the same process as making an AWS API call with long-term security
      credentials. The difference is that you must include the session token, which lets AWS
      verify that the temporary security credentials are valid.</p>
    <p>Your app should cache the credentials. By default the credentials expire after an hour. If
      you are not using the <a href="http://aws.amazon.com/blogs/mobile/using-the-amazoncredentialsprovider-protocol-in-the-aws-sdk-for-ios" rel="noopener noreferrer" target="_blank"><span>AmazonSTSCredentialsProvider</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> action in the AWS SDK, it's up to you and your app
      to call <code class="code">AssumeRoleWithSAML</code> again. Call this operation to get a new set of
      temporary security credentials before the old ones expire.</p>
   
    <h2 id="api_getfederationtoken"><a href="https://docs.aws.amazon.com/STS/latest/APIReference/API_GetFederationToken.html">GetFederationToken</a>—federation through a custom identity broker</h2>
    <p>The <code class="code">GetFederationToken</code> API operation returns a set of temporary security
      credentials for federated users. This API differs from <code class="code">AssumeRole</code> in that the
      default expiration period is substantially longer (12 hours instead of one hour).
      Additionally, you can use the <code class="code">DurationSeconds</code> parameter to specify a duration for
      the temporary security credentials to remain valid. The resulting credentials are valid for
      the specified duration, between 900 seconds (15 minutes) to 129,600 seconds (36 hours).The
      longer expiration period can help reduce the number of calls to AWS because you do not need
      to get new credentials as often. For more information, see <a href="./id_credentials_temp_request.html">Requesting temporary security credentials</a>.</p>
    <p>When you make this request, you use the credentials of a specific IAM user. The
      permissions for the temporary security credentials are determined by the session policies that
      you pass when you call <code class="code">GetFederationToken</code>. The resulting session permissions are
      the intersection of the IAM user policies and the session policies that you pass. Session
      policies cannot be used to grant more permissions than those allowed by the identity-based
      policy of the IAM user that is requesting federation. For more information about role
      session permissions, see <a href="./access_policies.html#policies_session">Session policies</a>.</p>
    <p>When you use the temporary credentials that are returned by the
        <code class="code">GetFederationToken</code> operation, the session's principal tags include the user's
      tags and the passed session tags. For more information about session tags, see <a href="./id_session-tags.html">Passing session tags in AWS STS</a>.</p>
    <p>The <code class="code">GetFederationToken</code> call returns temporary security credentials that
      consist of the session token, access key, secret key, and expiration. You can use
        <code class="code">GetFederationToken</code> if you want to manage permissions inside your organization
      (for example, using the proxy application to assign permissions). To view a sample application
      that uses <code class="code">GetFederationToken</code>, go to <a href="https://aws.amazon.com/code/1288653099190193" rel="noopener noreferrer" target="_blank"><span>Identity Federation Sample Application for an Active
        Directory Use Case</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> in the <em>AWS Sample Code &amp;
      Libraries</em>.</p>
    <p>The following example shows a sample request and response that uses
        <code class="code">GetFederationToken</code>. This example request federates the calling user for the
      specified duration with the <a href="./access_policies.html#policies_session">session policy</a> ARN and
        <a href="./id_session-tags.html">session tags</a>. The resulting session is named
        <code class="code">Jane-session</code>.</p>
    <div class="example"><h6>Example request</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="http ">https://sts.amazonaws.com/
?Version=2011-06-15
&amp;Action=GetFederationToken
&amp;Name=Jane-session
&amp;PolicyArns.member.1.arn==arn%3Aaws%3Aiam%3A%3A123456789012%3Apolicy%2FRole1policy
&amp;DurationSeconds=1800
&amp;Tags.member.1.Key=Project
&amp;Tags.member.1.Value=Pegasus
&amp;Tags.member.2.Key=Cost-Center
&amp;Tags.member.2.Value=12345
&amp;AUTHPARAMS</code></pre></div></div>
    <p>The policy ARN shown in the preceding example includes the following URL-encoded ARN: </p>
    <p><code class="code">arn:aws:iam::123456789012:policy/Role1policy</code></p>
    <p>Also, note that the <code class="code">&amp;AUTHPARAMS</code> parameter in the example is meant as a
      placeholder for the authentication information. This is the <em>signature</em>,
      which you must include with AWS HTTP API requests. We recommend using the <a href="https://aws.amazon.com/tools/" rel="noopener noreferrer" target="_blank"><span>AWS SDKs</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> to create API requests, and one benefit of
      doing so is that the SDKs handle request signing for you. If you must create and sign API
      requests manually, go to <a href="https://docs.aws.amazon.com/general/latest/gr/sigv4_signing.html">Signing AWS Requests
        By Using Signature Version 4</a> in the <em>Amazon Web Services General Reference</em> to learn
      how to sign a request.</p>
    <p>In addition to the temporary security credentials, the response includes the Amazon
      Resource Name (ARN) for the federated user and the expiration time of the credentials.</p>
    <div class="example"><h6>Example response</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"></div><code class="xml ">&lt;GetFederationTokenResponse xmlns="https://sts.amazonaws.com/doc/2011-06-15/"&gt;
&lt;GetFederationTokenResult&gt;
&lt;Credentials&gt;
  &lt;SessionToken&gt;
   AQoDYXdzEPT//////////wEXAMPLEtc764bNrC9SAPBSM22wDOk4x4HIZ8j4FZTwdQW
   LWsKWHGBuFqwAeMicRXmxfpSPfIeoIYRqTflfKD8YUuwthAx7mSEI/qkPpKPi/kMcGd
   QrmGdeehM4IC1NtBmUpp2wUE8phUZampKsburEDy0KPkyQDYwT7WZ0wq5VSXDvp75YU
   9HFvlRd8Tx6q6fE8YQcHNVXAkiY9q6d+xo0rKwT38xVqr7ZD0u0iPPkUL64lIZbqBAz
   +scqKmlzm8FDrypNC9Yjc8fPOLn9FX9KSYvKTr4rvx3iSIlTJabIQwj2ICCEXAMPLE==
  &lt;/SessionToken&gt;
  &lt;SecretAccessKey&gt;
  wJalrXUtnFEMI/K7MDENG/bPxRfiCYzEXAMPLEKEY
  &lt;/SecretAccessKey&gt;
  &lt;Expiration&gt;2019-04-15T23:28:33.359Z&lt;/Expiration&gt;
  &lt;AccessKeyId&gt;AKIAIOSFODNN7EXAMPLE;&lt;/AccessKeyId&gt;
&lt;/Credentials&gt;
&lt;FederatedUser&gt;
  &lt;Arn&gt;arn:aws:sts::123456789012:federated-user/Jean&lt;/Arn&gt;
  &lt;FederatedUserId&gt;123456789012:Jean&lt;/FederatedUserId&gt;
&lt;/FederatedUser&gt;
&lt;PackedPolicySize&gt;4&lt;/PackedPolicySize&gt;
&lt;/GetFederationTokenResult&gt;
&lt;ResponseMetadata&gt;
&lt;RequestId&gt;c6104cbe-af31-11e0-8154-cbc7ccf896c7&lt;/RequestId&gt;
&lt;/ResponseMetadata&gt;
&lt;/GetFederationTokenResponse&gt;</code></pre></div></div>
    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>An AWS conversion compresses the passed session policies and session tags into a
        packed binary format that has a separate limit. Your request can fail for this limit even if
        your plaintext meets the other requirements. The <code class="code">PackedPolicySize</code> response
        element indicates by percentage how close the policies and tags for your request are to the
        upper size limit.</p></div></div>
    <p>AWS recommends that you grant permissions at the resource level (for example, you attach
      a resource-based policy to an Amazon S3 bucket), you can omit the <code class="code">Policy</code> parameter.
      However, if you do not include a policy for the federated user, the temporary security
      credentials will not grant any permissions. In this case, you <em>must</em> use resource policies to grant the federated user access to your AWS
      resources.</p>
    <p>For example, assume your AWS account number is 111122223333, and you have an
      Amazon S3 bucket that you want to allow Susan to access. Susan's temporary security credentials
      don't include a policy for the bucket. In that case, you would need to ensure that the bucket
      has a policy with an ARN that matches Susan's ARN, such as
        <code class="code">arn:aws:sts::111122223333:federated-user/Susan</code>. </p>
   
    <h2 id="api_getsessiontoken"><a href="https://docs.aws.amazon.com/STS/latest/APIReference/API_GetSessionToken.html">GetSessionToken</a>—temporary credentials for users in untrusted
        environments</h2>
    <p>The <code class="code">GetSessionToken</code> API operation returns a set of temporary security
      credentials to an existing IAM user. This is useful for providing enhanced security, such as
      allowing AWS requests only when MFA is enabled for the IAM user. Because the credentials
      are temporary, they provide enhanced security when you have an IAM user who accesses your
      resources through a less secure environment. Examples of less secure environments include a
      mobile device or web browser. For more information, see <a href="./id_credentials_temp_request.html">Requesting temporary security credentials</a> or
        <a href="https://docs.aws.amazon.com/STS/latest/APIReference/API_GetSessionToken.html">GetSessionToken</a> in the <em>AWS Security Token Service API Reference</em>.</p>
    <p>By default, temporary security credentials for an IAM user are valid for a maximum of 12
      hours. But you can request a duration as short as 15 minutes or as long as 36 hours using the
        <code class="code">DurationSeconds</code> parameter. For security reasons, a token for an AWS account root user is
      restricted to a duration of one hour. </p>
    <p><code class="code">GetSessionToken</code> returns temporary security credentials consisting of a
      session token, an access key ID, and a secret access key. The following example shows a sample
      request and response using <code class="code">GetSessionToken</code>. The response also includes the
      expiration time of the temporary security credentials. </p>
    <div class="example"><h6>Example request</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="http ">https://sts.amazonaws.com/
?Version=2011-06-15
&amp;Action=GetSessionToken
&amp;DurationSeconds=1800
&amp;AUTHPARAMS</code></pre></div></div>
    <p>The <code class="code">AUTHPARAMS</code> parameter in the example is a placeholder for your
        <em>signature</em>. A signature is the authentication information that you must
      include with AWS HTTP API requests. We recommend using the <a href="https://aws.amazon.com/tools/" rel="noopener noreferrer" target="_blank"><span>AWS SDKs</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> to create API requests, and one benefit of
      doing so is that the SDKs handle request signing for you. If you must create and sign API
      requests manually, go to <a href="https://docs.aws.amazon.com/general/latest/gr/sigv4_signing.html">Signing AWS Requests
        By Using Signature Version 4</a> in the <em>Amazon Web Services General Reference</em> to learn
      how to sign a request.</p>
    <div class="example"><h6>Example response</h6><div class="example-contents"><pre class="programlisting"><div class="code-btn-container"></div><code class="xml ">&lt;GetSessionTokenResponse xmlns="https://sts.amazonaws.com/doc/2011-06-15/"&gt;
&lt;GetSessionTokenResult&gt;
&lt;Credentials&gt;
  &lt;SessionToken&gt;
   AQoEXAMPLEH4aoAH0gNCAPyJxz4BlCFFxWNE1OPTgk5TthT+FvwqnKwRcOIfrRh3c/L
   To6UDdyJwOOvEVPvLXCrrrUtdnniCEXAMPLE/IvU1dYUg2RVAJBanLiHb4IgRmpRV3z
   rkuWJOgQs8IZZaIv2BXIa2R4OlgkBN9bkUDNCJiBeb/AXlzBBko7b15fjrBs2+cTQtp
   Z3CYWFXG8C5zqx37wnOE49mRl/+OtkIKGO7fAE
  &lt;/SessionToken&gt;
  &lt;SecretAccessKey&gt;
  wJalrXUtnFEMI/K7MDENG/bPxRfiCYzEXAMPLEKEY
  &lt;/SecretAccessKey&gt;
  &lt;Expiration&gt;2011-07-11T19:55:29.611Z&lt;/Expiration&gt;
  &lt;AccessKeyId&gt;AKIAIOSFODNN7EXAMPLE&lt;/AccessKeyId&gt;
&lt;/Credentials&gt;
&lt;/GetSessionTokenResult&gt;
&lt;ResponseMetadata&gt;
&lt;RequestId&gt;58c5dbae-abef-11e0-8cfe-09039844ac7d&lt;/RequestId&gt;
&lt;/ResponseMetadata&gt;
&lt;/GetSessionTokenResponse&gt;</code></pre></div></div>
    <p>Optionally, the <code class="code">GetSessionToken</code> request can include <code class="code">SerialNumber</code>
      and <code class="code">TokenCode</code> values for AWS multi-factor authentication (MFA) verification. If
      the provided values are valid, AWS STS provides temporary security credentials that include
      the state of MFA authentication. The temporary security credentials can then be used to access
      the MFA-protected API operations or AWS websites for as long as the MFA authentication is
      valid. </p>
    <p>The following example shows a <code class="code">GetSessionToken</code> request that includes an MFA
      verification code and device serial number. </p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="http ">https://sts.amazonaws.com/
?Version=2011-06-15
&amp;Action=GetSessionToken
&amp;DurationSeconds=7200
&amp;SerialNumber=YourMFADeviceSerialNumber
&amp;TokenCode=123456
&amp;AUTHPARAMS</code></pre>
    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>The call to AWS STS can be to the global endpoint or to any of the Regional endpoints that
        you activate your AWS account. For more information, see the <a href="https://docs.aws.amazon.com/general/latest/gr/rande.html#sts_region">AWS STS section of <em>Regions and
            Endpoints</em></a>.</p><p>The <code class="code">AUTHPARAMS</code> parameter in the example is a placeholder for your
          <em>signature</em>. A signature is the authentication information that you
        must include with AWS HTTP API requests. We recommend using the <a href="https://aws.amazon.com/tools/" rel="noopener noreferrer" target="_blank"><span>AWS SDKs</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> to create API requests, and one benefit of
        doing so is that the SDKs handle request signing for you. If you must create and sign API
        requests manually, see <a href="https://docs.aws.amazon.com/general/latest/gr/sigv4_signing.html">Signing AWS Requests
          By Using Signature Version 4</a> in the <em>Amazon Web Services General Reference</em> to learn
        how to sign a request.</p></div></div>
   
    <h2 id="stsapi_comparison">Comparing the AWS STS API operations</h2>
    <p>The following table compares features of the API operations in AWS STS that return temporary
      security credentials. To learn about the different methods you can use to request temporary
      security credentials by assuming a role, see <a href="./id_roles_use.html">Using IAM roles</a>. To learn about the different AWS STS API operations that allow
      you to pass session tags, see <a href="./id_session-tags.html">Passing session tags in AWS STS</a>.</p>
    <a id="federation_api_differences"></a><div class="table-container"><div class="table-contents"><table id="w340aac16c35c15c23b5"><thead><tr><th class="table-header" colspan="100"><div class="title">Comparing your API options</div></th></tr>
          <tr>
            <th>
              <b>AWS STS API</b>
            </th>
            <th>
              <b>Who can call</b>
            </th>
            <th>
              <b>Credential lifetime (min | max | default)</b>
            </th>
            <th>
              <b>MFA support</b>¹ </th>
            <th>
              <b>Session policy support</b>² </th>
            <th>
              <b>Restrictions on resulting temporary credentials</b>
            </th>
          </tr>
        </thead>
          <tr>
            <td>
              <a href="https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRole.html">AssumeRole</a>
            </td>
            <td>IAM user or IAM role with existing temporary security credentials </td>
            <td>15 m | Maximum session duration setting³ | 1 hr </td>
            <td>Yes </td>
            <td>Yes</td>
            <td>
              <p>Cannot call <code class="code">GetFederationToken</code> or
                <code class="code">GetSessionToken</code>.</p>
            </td>
          </tr>
          <tr>
            <td>
              <a href="https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRoleWithSAML.html">AssumeRoleWithSAML</a>
            </td>
            <td>Any user; caller must pass a SAML authentication response that indicates
              authentication from a known identity provider</td>
            <td>15 m | Maximum session duration setting³ | 1 hr </td>
            <td>No</td>
            <td>Yes</td>
            <td>
              <p>Cannot call <code class="code">GetFederationToken</code> or
                <code class="code">GetSessionToken</code>.</p>
            </td>
          </tr>
          <tr>
            <td>
              <a href="https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html">AssumeRoleWithWebIdentity</a>
            </td>
            <td>Any user; caller must pass a web identity token that indicates authentication
              from a known identity provider</td>
            <td>15 m | Maximum session duration setting³ | 1 hr </td>
            <td>No</td>
            <td>Yes</td>
            <td>
              <p>Cannot call <code class="code">GetFederationToken</code> or
                <code class="code">GetSessionToken</code>.</p>
            </td>
          </tr>
          <tr>
            <td><a href="https://docs.aws.amazon.com/STS/latest/APIReference/API_GetFederationToken.html">GetFederationToken</a></td>
            <td>IAM user or AWS account root user</td>
            <td>
              <p>IAM user: 15 m | 36 hr | 12 hr</p>
              <p>Root user: 15 m | 1 hr | 1 hr</p>
            </td>
            <td>No </td>
            <td>Yes </td>
            <td>
              <p>Cannot call IAM operations using the AWS CLI or AWS API. This limitation does not apply to console sessions.</p>
              <p>Cannot call AWS STS operations except
                <code class="code">GetCallerIdentity</code>.⁴</p>
              <p>SSO to console is allowed.⁵</p>
            </td>
          </tr>
          <tr>
            <td><a href="https://docs.aws.amazon.com/STS/latest/APIReference/API_GetSessionToken.html">GetSessionToken</a></td>
            <td>IAM user or AWS account root user</td>
            <td>
              <p>IAM user: 15 m | 36 hr | 12 hr</p>
              <p>Root user: 15 m | 1 hr | 1 hr</p>
            </td>
            <td>Yes </td>
            <td>No </td>
            <td>
              <p>Cannot call IAM API operations unless MFA information is included with the
                request.</p>
              <p>Cannot call AWS STS API operations except <code class="code">AssumeRole</code> or
                  <code class="code">GetCallerIdentity</code>.</p>
              <p>SSO to console is not allowed.⁶</p>
            </td>
          </tr>
        </table></div></div>
    <p> ¹ <b>MFA support</b>. You can include information about a
      multi-factor authentication (MFA) device when you call the AssumeRole and GetSessionToken API
      operations. This ensures that the temporary security credentials that result from the API call
      can be used only by users who are authenticated with an MFA device. For more information, see
        <a href="./id_credentials_mfa_configure-api-require.html">Configuring MFA-protected API
      access</a>. </p>
    <p> ² <b>Session policy support</b>. Session policies are
      policies that you pass as a parameter when you programmatically create a temporary session for
      a role or federated user. This policy limits the permissions from the role or user's
      identity-based policy that are assigned to the session. The resulting session's permissions
      are the intersection of the entity's identity-based policies and the session policies. Session
      policies cannot be used to grant more permissions than those allowed by the identity-based
      policy of the role that is being assumed. For more information about role session permissions,
      see <a href="./access_policies.html#policies_session">Session policies</a>.</p>
    <p>³ <b>Maximum session duration setting</b>. Use the
        <code class="code">DurationSeconds</code> parameter to specify the duration of your role session from 900
      seconds (15 minutes) up to the maximum session duration setting for the role. To learn how to
      view the maximum value for your role, see <a href="./id_roles_use.html#id_roles_use_view-role-max-session">View the maximum session duration setting
        for a role</a>.</p>
    <p>⁴ <b>GetCallerIdentity</b>. No permissions are required
      to perform this operation. If an administrator adds a policy to your IAM user or role that
      explicitly denies access to the <code class="code">sts:GetCallerIdentity</code> action, you can still
      perform this operation. Permissions are not required because the same information is returned
      when an IAM user or role is denied access. To view an example response, see <a href="./troubleshoot_general.html#troubleshoot_general_access-denied-delete-mfa">I am not authorized to
            perform: iam:DeleteVirtualMFADevice</a>.</p>
    <p>⁵ <b>Single sign-on (SSO) to the console</b>. To support
      SSO, AWS lets you call a federation endpoint (<code class="code">https://signin.aws.amazon.com/federation</code>) and pass
      temporary security credentials. The endpoint returns a token that you can use to construct a
      URL that signs a user directly into the console without requiring a password. For more
      information, see <a href="./id_roles_providers_enable-console-saml.html">Enabling SAML 2.0 federated users to
      access the AWS Management Console</a> and <a href="http://aws.amazon.com/blogs/security/how-to-enable-cross-account-access-to-the-aws-management-console" rel="noopener noreferrer" target="_blank"><span> How to Enable Cross-Account Access to the AWS Management Console</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> in the AWS
      Security Blog. </p>
    <p>⁶ After you retrieve your temporary credentials, you can't access the AWS Management Console by
      passing the credentials to the federation single sign-on endpoint. For more information, see
        <a href="./id_roles_providers_enable-console-custom-url.html">Enabling custom identity broker
      access to the AWS console</a>.</p>
  <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./id_credentials_temp.html">Temporary security credentials</div><div id="next" class="next-link" accesskey="n" href="./id_credentials_temp_use-resources.html">Using temporary credentials with AWS
      resources</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/id_credentials_temp_request.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/id_credentials_temp_request.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>