<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>IAM and AWS STS condition context keys - AWS Identity and Access Management</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="reference_policies_iam-condition-keys" /><meta name="default_state" content="reference_policies_iam-condition-keys" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" /><meta name="description" content="Describes the IAM and related condition keys you can use in a policy." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS Identity and Access Management" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Control access to your AWS resources with user identity (authentication) and with policies that define specific permissions (authorization)." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="x-default" /><meta name="feedback-item" content="IAM" /><meta name="this_doc_product" content="AWS Identity and Access Management" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'iam'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="IAM and AWS STS condition context keys" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>IAM and AWS STS condition context keys - AWS Identity and Access Management</title><meta name="pdf" content="/pdfs/IAM/latest/UserGuide/iam-ug.pdf#reference_policies_iam-condition-keys" /><meta name="github" content="https://github.com/awsdocs/iam-user-guide/tree/main/doc_source/reference_policies_iam-condition-keys.md" /><meta name="rss" content="aws-iam-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=76" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" /><meta name="keywords" content="IAM,AWS Identity and Access Management,IAM user,user,IAM group,group,IAM role,role,permission policy,trust policy,policy,access key,password" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS Identity and Access Management",
        "item" : "https://docs.aws.amazon.com/iam/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Reference information for AWS Identity and Access Management",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/reference.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "IAM JSON policy reference",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "IAM and AWS STS condition context keys",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/IAM/latest/UserGuide/iam-ug.pdf#reference_policies_iam-condition-keys" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a href="https://github.com/awsdocs/iam-user-guide/tree/main/doc_source/reference_policies_iam-condition-keys.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/iam/index.html">AWS Identity and Access Management</a><a href="introduction.html">User Guide</a></div><div id="page-toc-src"><a href="#available-keys-for-iam">Available keys for IAM</a><a href="#condition-keys-wif">Available keys for AWS web identity
            federation</a><a href="#cross-condition-keys-wif">Cross-service AWS web identity federation
            context keys</a><a href="#condition-keys-saml">Available keys for SAML-based AWS STS
            federation</a><a href="#cross-condition-keys-saml">Cross-service SAML-based AWS STS federation
            context keys</a><a href="#condition-keys-sts">Available keys for AWS STS</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="reference_policies_iam-condition-keys">IAM and AWS STS condition context
         keys</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>You can use the <code class="code">Condition</code> element in a JSON policy to test the value of keys
      that are included in the request context of all AWS requests. These keys provide information
      about the request itself or the resources that the request references. You can check that keys
      have specified values before allowing the action requested by the user. This gives you
      granular control over when your JSON policy statements match or don't match an incoming
      request. For information about how to use the <code class="code">Condition</code> element in a JSON policy,
      see <a href="./reference_policies_elements_condition.html">IAM JSON policy elements:
        Condition</a>.</p><p>This topic describes the keys defined and provided by the IAM service (with an
         <code class="code">iam:</code> prefix) and the AWS Security Token Service (AWS STS) service (with an <code class="code">sts:</code>
      prefix). Several other AWS services also provide service-specific keys that are relevant to
      the actions and resources defined by that service. For more information, see <a href="reference_policies_actions-resources-contextkeys.html" rel="noopener noreferrer" target="_blank">Actions, Resources, and
         Condition Keys for AWS Services</a>. The documentation for a service that supports
      condition keys often has additional information. For example, for information about keys that
      you can use in policies for Amazon S3 resources, see <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/amazon-s3-policy-keys.html#AvailableKeys-iamV2">Amazon S3 Policy Keys</a>
      in the <em>Amazon Simple Storage Service User Guide</em>.</p><div class="highlights" id="inline-topiclist"><h6>Topics</h6><ul><li><a href="#available-keys-for-iam">Available keys for IAM</a></li><li><a href="#condition-keys-wif">Available keys for AWS web identity
            federation</a></li><li><a href="#cross-condition-keys-wif">Cross-service AWS web identity federation
            context keys</a></li><li><a href="#condition-keys-saml">Available keys for SAML-based AWS STS
            federation</a></li><li><a href="#cross-condition-keys-saml">Cross-service SAML-based AWS STS federation
            context keys</a></li><li><a href="#condition-keys-sts">Available keys for AWS STS</a></li></ul></div>
      <h2 id="available-keys-for-iam">Available keys for IAM</h2>
      <p>You can use the following condition keys in policies that control access to IAM
         resources: </p>
      <div class="variablelist">
          
          
          
          
          
          
          
      <dl>
            <dt><b><span class="term"><a id="ck_AssociatedResourceArn"></a>iam:AssociatedResourceArn</span></b></dt>
            <dd>
               <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_ARN">ARN operators</a>.</p>
               <p>Specifies the ARN of the resource to which this role will be associated at the
                  destination service. The resource usually belongs to the service to which the
                  principal is passing the role. Sometimes, the resource might belong to a third
                  service. For example, you might pass a role to Amazon EC2 Auto Scaling that they use on an Amazon EC2
                  instance. In this case, the condition would match the ARN of the Amazon EC2 instance. </p>
               <p>This condition key applies to only the <a href="./id_roles_use_passrole.html">PassRole</a> action in a policy. It can't be used to limit any other
                  action. </p>
               <p>Use this condition key in a policy to allow an entity to pass a role, but only
                  if that role is associated with the specified resource. You can use wildcards (*)
                  to allow operations performed on a specific type of resource without restricting
                  the Region or resource ID. For example, you can allow an IAM user or role to
                  pass any role to the Amazon EC2 service to be used with instances in the Region
                     <code class="code">us-east-1</code> or <code class="code">us-west-1</code>. The IAM user or role would
                  not be allowed to pass roles to other services. In addition, it doesn't allow
                  Amazon EC2 to use the role with instances in other Regions. </p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Effect": "Allow",
    "Action": "iam:PassRole",
    "Resource": "*",
    "Condition": <span>{</span>
        "StringEquals": <span>{</span>"iam:PassedToService": "ec2.amazonaws.com"},
        "ArnLike": <span>{</span>
            "iam:AssociatedResourceARN": [
                "arn:aws:ec2:us-east-1:111122223333:instance/*",
                "arn:aws:ec2:us-west-1:111122223333:instance/*"
            ]
        }
    }
}</code></pre>
               <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>AWS services that support <a href="#ck_PassedToService">iam:PassedToService</a> also support this condition key.</p></div></div>
            </dd>
         
            <dt><b><span class="term"><a id="ck_AWSServiceName"></a>iam:AWSServiceName</span></b></dt>
            <dd>
               <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
               <p>Specifies the AWS service to which this role is attached.</p>
               <p>In this example, you allow an entity to create a service-linked role if the
                  service name is <em>access-analyzer.amazonaws.com.</em></p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
   "Version": "2012-10-17",
   "Statement": [<span>{</span>
       "Effect": "Allow",
       "Action": "iam:CreateServiceLinkedRole",
       "Resource": "*",
       "Condition": <span>{</span>
         "StringLike": <span>{</span>
           "iam:AWSServiceName": "access-analyzer.amazonaws.com"
         }
       }
     }]
 }</code></pre>

            </dd>
         
            <dt><b><span class="term"><a id="ck_OrganizationsPolicyId"></a>iam:OrganizationsPolicyId</span></b></dt>
            <dd>
               <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
               <p>Checks that the policy with the specified AWS Organizations ID matches the policy used
                  in the request. To view an example IAM policy that uses this condition key, see
                     <a href="./reference_policies_examples_iam_service-accessed-data-orgs.html">IAM: View
            service last accessed information for an Organizations policy</a>.</p>
            </dd>
         
            <dt><b><span class="term"><a id="ck_PassedToService"></a>iam:PassedToService</span></b></dt>
            <dd>
               <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
               <p>Specifies the service principal of the service to which a role can be passed.
                  This condition key applies to only the <a href="./id_roles_use_passrole.html">PassRole</a> action in a policy. It can't be used to limit any other
                  action. </p>
               <p>When you use this condition key in a policy, specify the service using a
                  service principal. A service principal is the name of a service that can be
                  specified in the <code class="code">Principal</code> element of a policy. This is the usual
                  format: <code class="code">SERVICE_NAME_URL.amazonaws.com</code>. </p>
               <p>You can use <code class="code">iam:PassedToService</code> to restrict your users so that
                  they can pass roles only to specific services. For example, a user might create a
                     <a href="./id_roles_terms-and-concepts.html#iam-term-service-role">service role</a> that trusts CloudWatch to
                  write log data to an Amazon S3 bucket on their behalf. Then the user must attach a
                  permissions policy and a trust policy to the new service role. In this case, the
                  trust policy must specify <code class="code">cloudwatch.amazonaws.com</code> in the
                     <code class="code">Principal</code> element. To view a policy that allows the user to pass
                  the role to CloudWatch, see <a href="./reference_policies_examples_iam-passrole-service.html">IAM: Pass an IAM role to a
      specific AWS service</a>.</p>
               <p>By using this condition key, you can ensure that users create service roles
                  only for the services that you specify. For example, if a user with the preceding
                  policy attempts to create a service role for Amazon EC2, the operation will fail. The
                  failure occurs because the user does not have permission to pass the role to
                  Amazon EC2. </p>
               <p>Sometimes you pass a role to a service that then passes the role to a different
                  service. <code class="code">iam:PassedToService</code> includes only the final service that
                  assumes the role, not the intermediate service that passes the role.</p>
               <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Some services do not support this condition key.</p></div></div>
            </dd>
         
            <dt><b><span class="term"><a id="ck_PermissionsBoundary"></a>iam:PermissionsBoundary</span></b></dt>
            <dd>
               <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_ARN">ARN operators</a>.</p>
               <p>Checks that the specified policy is attached as permissions boundary on the
                  IAM principal resource. For more information, see <a href="./access_policies_boundaries.html">Permissions boundaries for IAM
            entities</a></p>
            </dd>
         
            <dt><b><span class="term"><a id="ck_PolicyARN"></a>iam:PolicyARN</span></b></dt>
            <dd>
               <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_ARN">ARN operators</a>.</p>
               <p>Checks the Amazon Resource Name (ARN) of a managed policy in requests that
                  involve a managed policy. For more information, see <a href="./access_controlling.html#access_controlling-policies">Controlling access to policies</a>. </p>
            </dd>
         
            <dt><b><span class="term"><a id="ck_ResourceTag"></a>iam:ResourceTag/<code class="replaceable">key-name</code></span></b></dt>
            <dd>
               <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
               <p>Checks that the tag attached to the identity resource (user or role) matches
                  the specified key name and value.</p>
               <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>IAM and AWS STS support both the <code class="code">iam:ResourceTag</code> IAM
                     condition key and the <code class="code">aws:ResourceTag</code> global condition key.</p></div></div>
               <p>You can add custom attributes to IAM resources in the form of a key-value
                  pair. For more information about tags for IAM resources, see <a href="./id_tags.html">Tagging IAM resources</a>. You can use <code class="code">ResourceTag</code> to <a href="./access_tags.html#access_tags_control-resources">control access</a> to AWS
                  resources, including IAM resources. However, because IAM does not support tags
                  for groups, you cannot use tags to control access to groups.</p>
               <p>This example shows how you might create an identity-based policy that allows deleting users with the
                     <code class="userinput">status=terminated</code> tag. To use this policy, replace the <code class="replaceable">italicized placeholder text</code> in the example policy with your own information.
  Then, follow the directions in <a href="./access_policies_create.html">create a policy</a> or <a href="./access_policies_manage-edit.html">edit a policy</a>.</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
    "Version": "2012-10-17",
    "Statement": [<span>{</span>
        "Effect": "Allow",
        "Action": "iam:DeleteUser",
        "Resource": "*",
        "Condition": <span>{</span>"StringEquals": <span>{</span>"iam:ResourceTag/<code class="replaceable">status</code>": "<code class="replaceable">terminated</code>"}}
    }]
}</code></pre>
            </dd>
         </dl></div>
    
      <h2 id="condition-keys-wif">Available keys for AWS web identity
            federation</h2>
      <p>You can use web identity federation to give temporary security credentials to users who
         have been authenticated through an OpenID Connect compliant OpenID Provider (OP) to an
         IAM OpenID Connect (OIDC) identity provider in your AWS account. Examples of such
         providers include Login with Amazon, Amazon Cognito, Google, or Facebook. Identity tokens
         (id_tokens) from your own OpenID OP may be used, as well as id_tokens issued to service
         accounts of Amazon Elastic Kubernetes Service clusters. In that case, additional condition keys are available when
         the temporary security credentials are used to make a request. You can use these keys to
         write policies that limit the access of federated users to resources that are associated
         with a specific provider, app, or user. These keys are typically used in the trust policy
         for a role. Define condition keys using the name of the OIDC provider followed by the claim
            (<code class="code">:aud</code>, <code class="code">:azp</code>, <code class="code">:amr</code>, <code class="code">sub</code>). For roles
         used by Amazon Cognito, keys are defined using <code class="code">cognito-identity.amazonaws.com</code> followed
         by the claim.</p>
      <div class="variablelist">
          
          
          
          
          
          
      <dl>
            <dt><b><span class="term"><a id="ck_wif-amr"></a>amr</span></b></dt>
            <dd>
               <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
               <p><b>Example</b>:
                     <code class="code">cognito-identity.amazonaws.com:amr</code></p>
               <p>If you are using Amazon Cognito for web identity federation, the
                     <code class="code">cognito-identity.amazonaws.com:amr</code> key (Authentication
                  Methods Reference) includes login information about the user. The key is
                  multivalued, meaning that you test it in a policy using <a href="./reference_policies_multi-value-conditions.html">condition set
                     operators</a>. The key can contain the following values: </p>
               <div class="itemizedlist">
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p>If the user is unauthenticated, the key contains only
                           <code class="code">unauthenticated</code>.</p>
                  </li><li class="listitem">
                     <p>If the user is authenticated, the key contains the value
                           <code class="code">authenticated</code> and the name of the login provider used in the
                        call (<code class="code">graph.facebook.com</code>, <code class="code">accounts.google.com</code>, or
                           <code class="code">www.amazon.com</code>). </p>
                  </li></ul></div>
               <p>As an example, the following condition in the trust policy for an Amazon
                  Cognito role tests whether the user is unauthenticated:</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">"Condition": <span>{</span>
  "StringEquals": 
    <span>{</span> "cognito-identity.amazonaws.com:aud": "us-east-2:<code class="replaceable">identity-pool-id</code>" },
  "ForAnyValue:StringLike": 
    <span>{</span> "cognito-identity.amazonaws.com:amr": "unauthenticated" }
}</code></pre>
            </dd>
         
            <dt><b><span class="term"><a id="ck_wif-aud"></a>aud</span></b></dt>
            <dd>
               <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
               <p>Use the <code class="code">aud</code> condition key to verify that the Google client ID or
                  Amazon Cognito identity pool ID matches the one that you specify in the policy. You can use
                  the <code class="code">aud</code> key with the <code class="code">sub</code> key for the same identity
                  provider.</p>
               <p><b>Examples</b>:</p>
               <div class="itemizedlist">
                   
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p><code class="code">graph.facebook.com:app_id</code></p>
                  </li><li class="listitem">
                     <p><code class="code">accounts.google.com:aud</code></p>
                  </li><li class="listitem">
                     <p><code class="code">cognito-identity.amazonaws.com:aud</code></p>
                  </li></ul></div>
               <p>The <code class="code">graph.facebook.com:app_id</code> field supplies the audience context
                  that matches the aud field used by other identity providers.</p>
               <p>The <code class="code">accounts.google.com:aud</code> condition key matches the following
                  Google ID Token fields. </p>
               <div class="itemizedlist">
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p><code class="code">aud</code> for OAuth 2.0 Google client IDs of your application,
                        when the <code class="code">azp</code> field is not set. When the <code class="code">azp</code> field
                        is set, the <code class="code">aud</code> field matches the <a href="#ck_oaud">accounts.google.com:oaud</a> condition key.</p>
                  </li><li class="listitem">
                     <p><code class="code">azp</code> when the <code class="code">azp</code> field is set. This can happen
                        for hybrid apps where a web application and Android app have a different
                        OAuth 2.0 Google client ID but share the same Google APIs project. </p>
                  </li></ul></div>
               <p>For more information about Google <code class="code">aud</code> and <code class="code">azp</code> fields,
                  see the <a href="https://developers.google.com/identity/protocols/OpenIDConnect" rel="noopener noreferrer" target="_blank"><span>Google
                     Identity Platform OpenID Connect</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> Guide.</p>
               <p>When you write a policy using the <code class="code">accounts.google.com:aud</code>
                  condition key, you must know whether the app is a hybrid app that sets the
                     <code class="code">azp</code> field. </p>
               <p><code class="code">azp</code> Field Not Set</p>
               <p>The following example policy works for non-hybrid apps that do not set the
                     <code class="code">azp</code> field. In this case the Google ID Token <code class="code">aud</code> field
                  value matches both the <code class="code">accounts.google.com:aud</code> and the
                     <code class="code">accounts.google.com:oaud</code> condition key values.</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Principal": <span>{</span>"Federated": "accounts.google.com"},
            "Action": "sts:AssumeRoleWithWebIdentity",
            "Condition": <span>{</span>
                "StringEquals": <span>{</span>
                    "accounts.google.com:aud": "aud-value",
                    "accounts.google.com:oaud": "aud-value",
                    "accounts.google.com:sub": "sub-value"
                }
            }
        }
    ]
}</code></pre>
               <p><code class="code">azp</code> Field Set</p>
               <p>The following example policy works for hybrid apps that do set the
                     <code class="code">azp</code> field. In this case, the Google ID Token <code class="code">aud</code>
                  field value matches only the <code class="code">accounts.google.com:oaud</code> condition key
                  value. The <code class="code">azp</code> field value matches the
                     <code class="code">accounts.google.com:aud</code> condition key value.</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Principal": <span>{</span>"Federated": "accounts.google.com"},
            "Action": "sts:AssumeRoleWithWebIdentity",
            "Condition": <span>{</span>
                "StringEquals": <span>{</span>
                    "accounts.google.com:aud": "azp-value",
                    "accounts.google.com:oaud": "aud-value",
                    "accounts.google.com:sub": "sub-value"
                }
            }
        }
    ]
}</code></pre>
            </dd>
         
            <dt><b><span class="term"><a id="ck_wif-id"></a>id</span></b></dt>
            <dd>
               <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
               <p><b>Examples</b>:</p>
               <div class="itemizedlist">
                   
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p><code class="code">graph.facebook.com:id</code></p>
                  </li><li class="listitem">
                     <p><code class="code">www.amazon.com:app_id</code></p>
                  </li><li class="listitem">
                     <p><code class="code">www.amazon.com:user_id</code></p>
                  </li></ul></div>
               <p>Use these keys to verify that the application (or site) ID or user ID matches
                  the one that you specify in the policy. This works for Facebook or Login with
                  Amazon. You can use the <code class="code">app_id</code> key with the <code class="code">id</code> key for
                  the same identity provider.</p>
            </dd>
         
            <dt><b><span class="term"><a id="ck_oaud"></a>oaud</span></b></dt>
            <dd>
               <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
               <p><b>Example</b>:
                  <code class="code">accounts.google.com:oaud</code></p>
               <p>If you use Google for web identity federation, this key specifies the Google
                  audience (<code class="code">aud</code>) that this ID token is intended for. It must be one of
                  the OAuth 2.0 client IDs of your application.</p>
            </dd>
         
            <dt><b><span class="term"><a id="ck_wif-sub"></a>sub</span></b></dt>
            <dd>
               <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
               <p><b>Examples</b>: </p>
               <div class="itemizedlist">
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p><code class="code">accounts.google.com:sub</code></p>
                  </li><li class="listitem">
                     <p><code class="code">cognito-identity.amazonaws.com:sub</code></p>
                  </li></ul></div>
               <p>Use these keys to verify that the user ID matches the one that you specify in
                  the policy. You can use the <code class="code">sub</code> key with the <code class="code">aud</code> key for
                  the same identity provider.</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        "Condition": <span>{</span>
              "StringEquals": <span>{</span>
                  "oidc.eks.us-east-1.amazonaws.com/id/111122223333:aud": "sts.amazonaws.com",
                  "oidc.eks.us-east-1.amazonaws.com/id/111122223333:sub": "system:serviceaccount:default:assumer"
               }
            }
    ]
      }</code></pre>
            </dd>
         
            <dt><b><span class="term">More information about web identity federation</span></b></dt>
            <dd>
               <p>For more information about web identity federation, see the following:</p>
               <div class="itemizedlist">
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p><a href="https://docs.aws.amazon.com/cognito/latest/developerguide/cognito-identity.html">Amazon Cognito User
                           Guide</a>.</p>
                  </li><li class="listitem">
                     <p><a href="./id_roles_providers_oidc.html">About web identity federation</a></p>
                  </li></ul></div>
            </dd>
         </dl></div>
    
      <h2 id="cross-condition-keys-wif">Cross-service AWS web identity federation
            context keys</h2>
      <p>Some web identity federation condition keys can be used in role trust policies to define
         what users are allowed to access in other AWS services. These are the following condition
         keys that can be used in role trust policies when federated principals assume another role,
         and in resource policies from other AWS services to authorize resource access by
         federated principals. If you are using Amazon Cognito for web identity federation, then these keys
         are available when the user is authenticated.</p>
      <p>Select a condition key to see the description.</p>
      <div class="itemizedlist">
          
          
          
          
      <ul class="itemizedlist"><li class="listitem">
            <p><a href="#ck_wif-amr">amr</a></p>
         </li><li class="listitem">
            <p><a href="#ck_wif-aud">aud</a></p>
         </li><li class="listitem">
            <p><a href="#ck_wif-id">id</a></p>
         </li><li class="listitem">
            <p><a href="#ck_wif-sub">sub</a></p>
         </li></ul></div>
      <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>No other web identitiy based federation condition keys are available for use after
            the external identity provider (IdP) authentication and authorization for the
            initial AssumeRoleWithWebIdentity operation.</p></div></div>
    
      <h2 id="condition-keys-saml">Available keys for SAML-based AWS STS
            federation</h2>
      <p>If you are working with <a href="https://docs.aws.amazon.com/STS/latest/UsingSTS/CreatingSAML.html">SAML-based
            federation</a> using AWS Security Token Service (AWS STS), you can include additional condition keys in
         the policy. </p>
       
         <h3 id="condition-keys-saml_trust-policy">SAML role trust policies</h3>
         <p>In the trust policy of a role, you can include the following keys, which help you
            establish whether the caller is allowed to assume the role. Except for
               <code class="code">saml:doc</code>, all the values are derived from the SAML assertion. All items
            in the list are available in the IAM console visual editor when you create or edit a
            policy with conditions. Items marked with <code class="code">[]</code>
            <em>can</em> have a value that is a list of the specified
            type.</p>
         <div class="variablelist">
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
         <dl>
               <dt><b><span class="term"><a id="ck_aud"></a>saml:aud </span></b></dt>
               <dd>
                  <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
                  <p>An endpoint URL to which SAML assertions are presented. The value for this
                     key comes from the <code class="code">SAML Recipient</code> field in the assertion,
                        <em>not </em>the <code class="code">Audience</code>
                     field.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_commonname"></a>saml:commonName[]</span></b></dt>
               <dd>
                  <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
                  <p>This is a <code class="code">commonName</code> attribute.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_cn"></a>saml:cn[]</span></b></dt>
               <dd>
                  <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
                  <p>This is an <code class="code">eduOrg</code> attribute.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_doc"></a>saml:doc</span></b></dt>
               <dd>
                  <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
                  <p>This represents the principal that was used to assume the role. The format
                     is
                        <code class="replaceable">account-ID</code>/<code class="replaceable">provider-friendly-name</code>,
                     such as <code class="code">123456789012/SAMLProviderName</code>. The <em>account-ID</em> value refers to the account that owns
                     the <a href="./id_roles_providers_create_saml.html">SAML provider</a>.
                  </p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_edupersonaffiliation"></a>saml:edupersonaffiliation[]</span></b></dt>
               <dd>
                  <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
                  <p>This is an <code class="code">eduPerson</code> attribute.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_edupersonassurance"></a>saml:edupersonassurance[]</span></b></dt>
               <dd>
                  <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
                  <p>This is an <code class="code">eduPerson</code> attribute.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_edupersonentitlement"></a>saml:edupersonentitlement[]</span></b></dt>
               <dd>
                  <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
                  <p>This is an <code class="code">eduPerson</code> attribute.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_edupersonnickname"></a>saml:edupersonnickname[]</span></b></dt>
               <dd>
                  <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
                  <p>This is an <code class="code">eduPerson</code> attribute.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_edupersonorgdn"></a>saml:edupersonorgdn</span></b></dt>
               <dd>
                  <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
                  <p>This is an <code class="code">eduPerson</code> attribute.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_edupersonorgunitdn"></a>saml:edupersonorgunitdn[]</span></b></dt>
               <dd>
                  <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
                  <p>This is an <code class="code">eduPerson</code> attribute.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_edupersonprimaryaffiliation"></a>saml:edupersonprimaryaffiliation</span></b></dt>
               <dd>
                  <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
                  <p>This is an <code class="code">eduPerson</code> attribute.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_edupersonprimaryorgunitdn"></a>saml:edupersonprimaryorgunitdn</span></b></dt>
               <dd>
                  <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
                  <p>This is an <code class="code">eduPerson</code> attribute.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_edupersonprincipalname"></a>saml:edupersonprincipalname</span></b></dt>
               <dd>
                  <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
                  <p>This is an <code class="code">eduPerson</code> attribute.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_edupersonscopedaffiliation"></a>saml:edupersonscopedaffiliation[]</span></b></dt>
               <dd>
                  <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
                  <p>This is an <code class="code">eduPerson</code> attribute.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_edupersontargetedid"></a>saml:edupersontargetedid[]</span></b></dt>
               <dd>
                  <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
                  <p>This is an <code class="code">eduPerson</code> attribute.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_eduorghomepageuri"></a>saml:eduorghomepageuri[]</span></b></dt>
               <dd>
                  <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
                  <p>This is an <code class="code">eduOrg</code> attribute.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_eduorgidentityauthnpolicyuri"></a>saml:eduorgidentityauthnpolicyuri[]</span></b></dt>
               <dd>
                  <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
                  <p>This is an <code class="code">eduOrg</code> attribute.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_eduorglegalname"></a>saml:eduorglegalname[]</span></b></dt>
               <dd>
                  <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
                  <p>This is an <code class="code">eduOrg</code> attribute.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_eduorgsuperioruri"></a>saml:eduorgsuperioruri[]</span></b></dt>
               <dd>
                  <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
                  <p>This is an <code class="code">eduOrg</code> attribute.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_eduorgwhitepagesuri"></a>saml:eduorgwhitepagesuri[]</span></b></dt>
               <dd>
                  <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
                  <p>This is an <code class="code">eduOrg</code> attribute.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_givenname"></a>saml:givenName[]</span></b></dt>
               <dd>
                  <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
                  <p>This is a <code class="code">givenName</code> attribute.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_iss"></a>saml:iss</span></b></dt>
               <dd>
                  <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
                  <p>The issuer, which is represented by a URN. </p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_mail"></a>saml:mail[]</span></b></dt>
               <dd>
                  <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
                  <p>This is a <code class="code">mail</code> attribute.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_name"></a>saml:name[]</span></b></dt>
               <dd>
                  <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
                  <p>This is a <code class="code">name</code> attribute.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_saml-namequalifier"></a>saml:namequalifier</span></b></dt>
               <dd>
                  <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
                  <p>A hash value based on the friendly name of the SAML provider. The value is
                     the concatenation of the following values, in order and separated by a '/'
                     character:</p>
                  <div class="orderedlist">
                      
                      
                      
                  <ol><li>
                        <p>The <code class="code">Issuer</code> response value (<code class="code">saml:iss</code>)</p>
                     </li><li>
                        <p>The <code class="code">AWS</code> account ID</p>
                     </li><li>
                        <p> The friendly name (the last part of the ARN) of the SAML provider in
                           IAM </p>
                     </li></ol></div>
                  <p>The concatenation of the account ID and friendly name of the SAML provider
                     is available to IAM policies as the key <code class="code">saml:doc</code>. For more
                     information, see <a href="./id_roles_providers_saml.html#CreatingSAML-userid">Uniquely identifying users in SAML-based
          federation</a>.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_organizationstatus"></a>saml:organizationStatus[]</span></b></dt>
               <dd>
                  <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
                  <p>This is an <code class="code">organizationStatus</code> attribute.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_primarygroupsid"></a>saml:primaryGroupSID[]</span></b></dt>
               <dd>
                  <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
                  <p>This is a <code class="code">primaryGroupSID</code> attribute.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_saml-sub"></a>saml:sub</span></b></dt>
               <dd>
                  <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
                  <p>This is the subject of the claim, which includes a value that uniquely
                     identifies an individual user within an organization (for example,
                        <code class="code">_cbb88bf52c2510eabe00c1642d4643f41430fe25e3</code>). </p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_saml-subtype"></a>saml:sub_type</span></b></dt>
               <dd>
                  <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
                  <p>This key can have the value <code class="code">persistent</code>, <code class="code">transient</code>,
                     or consist of the full <code class="code">Format</code> URI from the <code class="code">Subject</code>
                     and <code class="code">NameID</code> elements used in your SAML assertion. A value of
                        <code class="code">persistent</code> indicates that the value in <code class="code">saml:sub</code> is
                     the same for a user between sessions. If the value is <code class="code">transient</code>,
                     the user has a different <code class="code">saml:sub</code> value for each session. For
                     information about the <code class="code">NameID</code> element's <code class="code">Format</code>
                     attribute, see <a href="./id_roles_providers_create_saml_assertions.html">Configuring SAML assertions for the
      authentication response</a>.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_surname"></a>saml:surname[]</span></b></dt>
               <dd>
                  <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
                  <p>This is a <code class="code">surnameuid</code> attribute.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_uid"></a>saml:uid[]</span></b></dt>
               <dd>
                  <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
                  <p>This is a <code class="code">uid</code> attribute.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_x500uniqueidentifier"></a>saml:x500UniqueIdentifier[]</span></b></dt>
               <dd>
                  <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
                  <p>This is an <code class="code">x500UniqueIdentifier</code> attribute.</p>
               </dd>
            </dl></div>
         <p>For general information about <code class="code">eduPerson</code> and <code class="code">eduOrg</code>
            attributes, see the <a href="https://wiki.refeds.org/display/STAN/eduPerson" rel="noopener noreferrer" target="_blank"><span>REFEDS
               Wiki website</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. For a list of <code class="code">eduPerson</code> attributes, see <a href="https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html" rel="noopener noreferrer" target="_blank"><span>eduPerson Object Class Specification (201602)</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. </p>
         <p>Condition keys whose type is a list can include multiple values. To create conditions
            in the policy for list values, you can use <a href="./reference_policies_multi-value-conditions.html">set operators</a>
               (<code class="code">ForAllValues</code>, <code class="code">ForAnyValue</code>). For example, to allow any user
            whose affiliation is "faculty" or "staff" (but not "student"), you might use a condition
            like the following: </p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">"Condition": <span>{</span>
   "ForAllValues:StringLike": <span>{</span>
     "saml:edupersonaffiliation":[ "faculty", "staff"] 
   }
}</code></pre>
       
    
      <h2 id="cross-condition-keys-saml">Cross-service SAML-based AWS STS federation
            context keys</h2>
      <p>Some SAML-based federation condition keys can be used in subsequent requests to
         authorize AWS operations in other services and <code class="code">AssumeRole</code> calls. These are
         the following condition keys that can be used in role trust policies when federated
         principals assume another role, and in resource policies from other AWS services to
         authorize resource access by federated principals. For more information about using these
         keys, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_providers_saml.html#CreatingSAML-userid">About SAML
            2.0-based federation</a>. </p>
      <p>Select a condition key to see the description.</p>
      <div class="itemizedlist">
          
          
          
      <ul class="itemizedlist"><li class="listitem">
            <p><a href="#ck_saml-namequalifier">saml:namequalifier</a></p>
         </li><li class="listitem">
            <p><a href="#ck_saml-sub">saml:sub</a></p>
         </li><li class="listitem">
            <p><a href="#ck_saml-subtype">saml:sub_type</a></p>
         </li></ul></div>
      <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>No other SAML-based federation condition keys are available for use after the initial
            external identity provider (IdP) authentication response.</p></div></div>
    
      <h2 id="condition-keys-sts">Available keys for AWS STS</h2>
      <p>You can use the following condition keys in IAM role trust policies for roles that are
         assumed using AWS Security Token Service (AWS STS) operations. </p>
      <div class="variablelist">
                  
          
          
          
          
          
          
      <dl>
            <dt><b><span class="term"><a id="ck_sub"></a>saml:sub</span></b></dt>
            <dd>
               <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
               <p>This is the subject of the claim, which includes a value that uniquely
                  identifies an individual user within an organization (for example,
                  <code class="code">_cbb88bf52c2510eabe00c1642d4643f41430fe25e3</code>). </p>
            </dd>
         
            <dt><b><span class="term"><a id="ck_awsservicename"></a>sts:AWSServiceName</span></b></dt>
            <dd>
               <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
               <p>Use this key to specify a service where a bearer token can be used. When you
                  use this condition key in a policy, specify the service using a service principal.
                  A service principal is the name of a service that can be specified in the
                     <code class="code">Principal</code> element of a policy. For example,
                     <code class="code">codeartifact.amazonaws.com</code> is the AWS CodeArtifact service
                  principal.</p>
               <p>Some AWS services require that you have permission to get an AWS STS service
                  bearer token before you can access their resources programmatically. For example,
                  AWS CodeArtifact requires principals to use bearer tokens to perform some
                  operations. The <code class="code">aws codeartifact get-authorization-token</code> command
                  returns a bearer token. You can then use the bearer token to perform AWS
                  CodeArtifact operations. For more information about bearer tokens, see <a href="./id_credentials_bearer.html">Using bearer tokens</a>. </p>
               <p><b>Availability</b>  This key is present in
                  requests that get a bearer token. You cannot make a direct call to AWS STS to get a
                  bearer token. When you perform some operations in other services, the service
                  requests the bearer token on your behalf.</p>
               <p>You can use this condition key to allow principals to get a bearer token for
                  use with a specific service.</p>
            </dd>
         
            <dt><b><span class="term"><a id="ck_durationseconds"></a>sts:DurationSeconds</span></b></dt>
            <dd>
               <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_Numeric">numeric operators</a>.</p>
               <p>Use this key to specify the duration (in seconds) that a principal can use when
                  getting an AWS STS bearer token.</p>
               <p>Some AWS services require that you have permission to get an AWS STS service
                  bearer token before you can access their resources programmatically. For example,
                  AWS CodeArtifact requires principals to use bearer tokens to perform some
                  operations. The <code class="code">aws codeartifact get-authorization-token</code> command
                  returns a bearer token. You can then use the bearer token to perform AWS
                  CodeArtifact operations. For more information about bearer tokens, see <a href="./id_credentials_bearer.html">Using bearer tokens</a>. </p>
               <p><b>Availability</b>  This key is present in
                  requests that get a bearer token. You cannot make a direct call to AWS STS to get a
                  bearer token. When you perform some operations in other services, the service
                  requests the bearer token on your behalf. The key is not present for AWS STS
                  assume-role operations.</p>
               
            </dd>
         
            <dt><b><span class="term"><a id="ck_externalid"></a>sts:ExternalId</span></b></dt>
            <dd>
               <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
               <p>Use this key to require that a principal provide a specific identifier when
                  assuming an IAM role.</p>
               <p><b>Availability</b>  This key is present in
                  the request when the principal provides an external ID while assuming a role using
                  the AWS CLI or AWS API. </p>
               <p>A unique identifier that might be required when you assume a role in another
                  account. If the administrator of the account to which the role belongs provided
                  you with an external ID, then provide that value in the <code class="code">ExternalId</code>
                  parameter. This value can be any string, such as a passphrase or account number.
                  The primary function of the external ID is to address and prevent the confused
                  deputy problem. For more information about the external ID and the confused deputy
                  problem, see <a href="./id_roles_create_for-user_externalid.html">How to use an external ID when granting
      access to your AWS resources to a third party</a>.</p>
               <p>The <code class="code">ExternalId</code> value must have a minimum of 2 characters and a
                  maximum of 1,224 characters. The value must be alphanumeric without white space.
                  It can also include the following symbols: plus (+), equal (=), comma (,), period
                  (.), at (@), colon (:), forward slash (/), and hyphen (-).</p>
            </dd>
         
            <dt><b><span class="term"><a id="ck_rolesessionname"></a>sts:RoleSessionName</span></b></dt>
            <dd>
               <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
               <p>Use this key to compare the session name that a principal specifies when
                  assuming a role with the value that is specified in the policy.</p>
               <p><b>Availability</b>  This key is present in
                  the request when the principal assumes the role using the AWS Management Console, any
                  assume-role CLI command, or any AWS STS <code class="code">AssumeRole</code> API
                  operation.</p>
               <p>You can use this key in a role trust policy to require that your users provide
                  a specific session name when they assume a role. For example, you can require that
                  IAM users specify their own user name as their session name. After the IAM
                  user assumes the role, activity appears in <a href="./cloudtrail-integration.html#cloudtrail-integration_signin-tempcreds">AWS CloudTrail logs</a> with the
                  session name that matches their user name. This makes it easier for administrators
                  to differentiate between role sessions when a role is used by different
                  principals.</p>
               <p>The following role trust policy requires that IAM users in account
                     <code class="code">111122223333</code> provide their IAM user name as the
                  session name when they assume the role. This requirement is enforced using the
                     <code class="code">aws:username</code>
                  <a href="./reference_policies_variables.html">condition variable</a> in the
                  condition key. This policy allows IAM users to assume the role to which the
                  policy is attached. This policy does not allow anyone using temporary credentials
                  to assume the role because the <code class="code">username</code> variable is present for only
                  IAM users.</p>
               <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>You can use any single-valued condition key as a <a href="./reference_policies_variables.html">variable</a>. You can't use a
                     multivalued condition key as a variable.</p></div></div>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "RoleTrustPolicyRequireUsernameForSessionName",
            "Effect": "Allow",
            "Action": "sts:AssumeRole",
            "Principal": <span>{</span>"AWS": "arn:aws:iam::111122223333:root"},
            "Condition": <span>{</span>
                "StringLike": <span>{</span>"sts:RoleSessionName": "$<span>{</span>aws:username}"}
            }
        }
    ]
}</code></pre>
               <p>When an administrator views the AWS CloudTrail log for an action, they can compare
                  the session name to the user names in their account. In the following example, the
                  user named <code class="code">matjac</code> performed the operation using the role named
                     <code class="code">MateoRole</code>. The administrator can then contact Mateo Jackson, who
                  has the user named <code class="code">matjac</code>.</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">    "assumedRoleUser": <span>{</span>
        "assumedRoleId": "AROACQRSTUVWRAOEXAMPLE:<code class="replaceable">matjac</code>",
        "arn": "arn:aws:sts::111122223333:assumed-role/<code class="replaceable">MateoRole</code>/<code class="replaceable">matjac</code>"
    }</code></pre>
               <p>If you allow <a href="./id_roles_common-scenarios_aws-accounts.html">cross-account access using roles</a>, then users in one account can assume
                  a role in another account. The ARN of the assumed role user listed in CloudTrail
                  includes the account <em>where the role exists</em>. It
                  does not include the account of the user that assumed the role. Users are unique
                  only within an account. Therefore, we recommend that you use this method for
                  checking CloudTrail logs only for roles that are assumed by users in accounts that you
                  administer. Your users might use the same user name in multiple accounts.</p>
            </dd>
         
            <dt><b><span class="term"><a id="ck_sourceidentity"></a>sts:SourceIdentity</span></b></dt>
            <dd>
               <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
               <p>Use this key to compare the source identity that a principal specifies when
                  assuming a role with the value that is specified in the policy.</p>
               <p><b>Availability</b>  This key is present in
                  the request when the principal provides a source identity while assuming a role
                  using any AWS STS assume-role CLI command, or AWS STS <code class="code">AssumeRole</code> API
                  operation.</p>
               <p>You can use this key in a role trust policy to require that your users set a
                  specific source identity when they assume a role. For example, you can require
                  your workforce or federated identities to specify a value for source identity. You
                  can configure your identity provider (IdP) to use one of the attributes that are
                  associated with your users, like a user name or email as the source identity. The
                  IdP then passes the source identity as an attribute in the assertions or claims
                  that it sends to AWS. The value of the source identity attribute identifies the
                  user or application who is assuming the role.</p>
               <p>After the user assumes the role, activity appears in <a href="./cloudtrail-integration.html#cloudtrail-integration_signin-tempcreds">AWS CloudTrail logs</a> with the
                  source identity value that was set. This makes it easier for administrators to
                  determine who or what performed actions with a role in AWS. You must grant
                  permissions for the <code class="code">sts:SetSourceIdentity</code> action to allow an identity
                  to set a source identity. </p>
               <p>Unlike <a href="#ck_rolesessionname">sts:RoleSessionName</a>, after the source identity is set, the
                  value cannot be changed. It is present in the request context for all actions
                  taken with the role by the source identity. The value persists into subsequent
                  role sessions when you use the session credentials to assume another role.
                  Assuming one role from another is called <a href="./id_roles_terms-and-concepts.html#iam-term-role-chaining">role chaining</a>. </p>
               <p>You can use the <a href="./reference_policies_condition-keys.html#condition-keys-sourceidentity">aws:SourceIdentity</a> global condition key to further
                  control access to AWS resources based on the value of source identity in
                  subsequent requests. </p>
               <p>The following role trust policy allows the IAM user <code class="code">AdminUser</code> to
                  assume a role in account <code class="code">111122223333</code>. It also grants
                  permission to the <code class="code">AdminUser</code> to set a source identity, as long as the
                  source identity set is <code class="code">DiegoRamirez</code>.</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "AllowAdminUserAssumeRole",
            "Effect": "Allow",
            "Principal": <span>{</span>"AWS": " arn:aws:iam::111122223333:user/AdminUser"},
            "Action": [
                "sts:AssumeRole",
                "sts:SetSourceIdentity"
            ],
            "Condition": <span>{</span>
                "StringEquals": <span>{</span>"sts:SourceIdentity": "DiegoRamirez"}
            }
        }
    ]
}
</code></pre>
               <p>To learn more about using source identity information, see <a href="./id_credentials_temp_control-access_monitor.html">Monitor and control actions
            taken with assumed roles</a>.</p>
            </dd>
         
            <dt><b><span class="term"><a id="ck_transitivetagkeys"></a>sts:TransitiveTagKeys</span></b></dt>
            <dd>
               <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
               <p>Use this key to compare the transitive session tag keys in the request with
                  those specified in the policy. </p>
               <p><b>Availability</b>  This key is present in
                  the request when you make a request using temporary security credentials. These
                  include credentials created using any assume-role operation, or the
                     <code class="code">GetFederationToken</code> operation.</p>
               <p>When you make a request using temporary security credentials, the <a href="./reference_policies_elements_condition.html#AccessPolicyLanguage_RequestContext">request context</a> includes
                  the <code class="code"><a href="./reference_policies_condition-keys.html#condition-keys-principaltag">aws:PrincipalTag</a></code> context key. This key includes a list of <a href="./id_session-tags.html">session tags</a>, <a href="./id_session-tags.html#id_session-tags_role-chaining">transitive session tags</a>, and
                  role tags. Transitive session tags are tags that persist into all subsequent
                  sessions when you use the session credentials to assume another role. Assuming one
                  role from another is called <a href="./id_roles_terms-and-concepts.html#iam-term-role-chaining">role
                     chaining</a>. </p>
               <p>You can use this condition key in a policy to require setting specific session
                  tags as transitive when assuming a role or federating a user.</p>
            </dd>
         </dl></div>
   <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./reference_policies_condition-keys.html">Global condition keys</div><div id="next" class="next-link" accesskey="n" href="./reference_policies_actions-resources-contextkeys.html">Actions, resources, and condition keys</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>