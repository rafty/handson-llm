<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Previewing access with IAM Access Analyzer APIs - AWS Identity and Access Management</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="access-analyzer-preview-access-apis" /><meta name="default_state" content="access-analyzer-preview-access-apis" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access-analyzer-preview-access-apis.html" /><meta name="description" content="Learn about how to preview access with IAM Access Analyzer APIs." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS Identity and Access Management" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Control access to your AWS resources with user identity (authentication) and with policies that define specific permissions (authorization)." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access-analyzer-preview-access-apis.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/access-analyzer-preview-access-apis.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/access-analyzer-preview-access-apis.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/access-analyzer-preview-access-apis.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/access-analyzer-preview-access-apis.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access-analyzer-preview-access-apis.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access-analyzer-preview-access-apis.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/access-analyzer-preview-access-apis.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/access-analyzer-preview-access-apis.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/access-analyzer-preview-access-apis.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/access-analyzer-preview-access-apis.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/access-analyzer-preview-access-apis.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/access-analyzer-preview-access-apis.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/access-analyzer-preview-access-apis.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/access-analyzer-preview-access-apis.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/access-analyzer-preview-access-apis.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/access-analyzer-preview-access-apis.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/access-analyzer-preview-access-apis.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/access-analyzer-preview-access-apis.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/IAM/latest/UserGuide/access-analyzer-preview-access-apis.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/access-analyzer-preview-access-apis.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access-analyzer-preview-access-apis.html" hreflang="x-default" /><meta name="feedback-item" content="IAM" /><meta name="this_doc_product" content="AWS Identity and Access Management" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'iam'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="Previewing access with IAM Access Analyzer APIs" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Previewing access with IAM Access Analyzer APIs - AWS Identity and Access Management</title><meta name="pdf" content="/pdfs/IAM/latest/UserGuide/iam-ug.pdf#access-analyzer-preview-access-apis" /><meta name="github" content="https://github.com/awsdocs/iam-user-guide/tree/main/doc_source/access-analyzer-preview-access-apis.md" /><meta name="rss" content="aws-iam-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=76" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/access-analyzer-preview-access-apis.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/access-analyzer-preview-access-apis.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/access-analyzer-preview-access-apis.html" /><meta name="keywords" content="IAM,AWS Identity and Access Management,IAM user,user,IAM group,group,IAM role,role,permission policy,trust policy,policy,access key,password" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS Identity and Access Management",
        "item" : "https://docs.aws.amazon.com/iam/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Using AWS Identity and Access Management Access Analyzer",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/what-is-access-analyzer.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Preview access",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/access-analyzer-access-preview.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Previewing access with IAM Access Analyzer APIs",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/access-analyzer-access-preview.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/IAM/latest/UserGuide/iam-ug.pdf#access-analyzer-preview-access-apis" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a href="https://github.com/awsdocs/iam-user-guide/tree/main/doc_source/access-analyzer-preview-access-apis.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/iam/index.html">AWS Identity and Access Management</a><a href="introduction.html">User Guide</a></div><div id="page-toc-src"><a href="#access-analyzer-preview-access-s3-bucket">Preview access to your Amazon S3
                bucket</a><a href="#access-analyzer-preview-access-kms-key">Preview access to your AWS KMS
                key</a><a href="#access-analyzer-preview-iam-role">Preview access to your IAM
                role</a><a href="#access-analyzer-preview-sqs-queue">Preview access to your Amazon SQS
                queue</a><a href="#access-analyzer-preview-secrets-manager-secret">Preview access to your
                Secrets Manager secret</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="access-analyzer-preview-access-apis">Previewing access with IAM Access Analyzer
            APIs</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>You can use <a href="https://docs.aws.amazon.com/access-analyzer/latest/APIReference/Welcome.html">IAM Access Analyzer APIs</a> to preview
        public and cross-account access for your Amazon S3 buckets, AWS KMS keys, IAM roles, Amazon SQS queues
        and Secrets Manager secrets. You can preview access by providing proposed permissions for an
        existing resource you own or a new resource you want to deploy.</p><p>To preview external access to your resource, you must have an active account analyzer for
        the account and region of the resource. You must also have the permissions required to use
        IAM Access Analyzer and preview access. For more information on enabling IAM Access Analyzer and permissions
        required, see <a href="./access-analyzer-getting-started.html#access-analyzer-enabling">Enabling IAM Access Analyzer</a>. </p><p>To preview access for a resource, you can use the <code class="code">CreateAccessPreview</code>
        operation and provide the analyzer ARN and the access control configuration for the
        resource. The service returns the unique ID for the access preview, which you can use to
        check the status of the access preview with the <code class="code">GetAccessPreview</code> operation.
        When the status is <code class="code">Completed</code>, you can use the
        <code class="code">ListAccessPreviewFindings</code> operation to retrieve the findings generated for
        the access preview. The <code class="code">GetAccessPreview</code> and
        <code class="code">ListAccessPreviewFindings</code> operations will retrieve access previews and
        findings created within about 24 hours.</p><p>Each finding retrieved contains <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access-analyzer-findings-view.html">finding details</a>
        describing the access. A preview status of the finding describing whether the finding would
        be <code class="code">Active</code>, <code class="code">Archived</code>, or <code class="code">Resolved</code> after permissions
        deployment, and a <code class="code">changeType</code>. The <code class="code">changeType</code> provides context on
        how the access preview finding compares to existing access identified in IAM Access Analyzer:</p><div class="itemizedlist">
         
         
         
    <ul class="itemizedlist"><li class="listitem">
            <p><b>New</b> – the finding is for newly introduced
                access.</p>
        </li><li class="listitem">
            <p><b>Unchanged</b> – the preview finding is an
                existing finding that would remain unchanged.</p>
        </li><li class="listitem">
            <p><b>Changed</b> – the preview finding is an
                existing finding with a change in status.</p>
        </li></ul></div><p>The <code class="code">status</code> and the <code class="code">changeType</code> help you understand how the
        resource configuration would change existing resource access. If the <code class="code">changeType</code>
        is <code class="code">Unchanged</code> or Changed, the finding will also contain the existing ID and
        status of the finding in IAM Access Analyzer. For example, a <code class="code">Changed</code> finding with preview
        status <code class="code">Resolved</code> and existing status <code class="code">Active</code> indicates the existing
        <code class="code">Active</code> finding for the resource would become <code class="code">Resolved</code> as a
        result of the proposed permissions change.</p><p>You can use the <code class="code">ListAccessPreviews</code> operation to retrieve a list of access
        previews for the specified analyzer. This operation will retrieve information on access
        preview created within about one hour.</p><p>In general, if the access preview is for an existing resource and you leave a
        configuration option unspecified, the access preview will use the existing resource
        configuration by default. If the access preview is for a new resource and you leave a
        configuration option unspecified, the access preview will use the default value depending on
        the resource type. For configuration cases for each resource type, see below.</p>
        <h2 id="access-analyzer-preview-access-s3-bucket">Preview access to your Amazon S3
                bucket</h2>
        <p>To create an access preview for a new Amazon S3 bucket or an existing Amazon S3 bucket that you
            own, you can propose a bucket configuration by specifying the Amazon S3 bucket policy, bucket
            ACLs, bucket BPA settings, and Amazon S3 access points, including multi-region access points,
            attached to the bucket.</p>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Before attempting to create an access preview for a new bucket, we recommend you
                call the Amazon S3 <a href="https://docs.aws.amazon.com/AmazonS3/latest/API/API_HeadBucket.html">HeadBucket</a> operation to
                check whether the named bucket already exists. This operation is useful to determine
                if a bucket exists and you have permission to access it.</p></div></div>
        <p><span class="topcom">Bucket policy</span> – If the configuration is for an
            existing Amazon S3 bucket and you do not specify the Amazon S3 bucket policy, the access preview
            uses the existing policy attached to the bucket. If the access preview is for a new
            resource and you do not specify the Amazon S3 bucket policy, the access preview assumes a
            bucket without a policy. To propose deletion of an existing bucket policy, you can
            specify an empty string. For more information about supported bucket policy limits, see
            <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/example-bucket-policies.html">Bucket policy examples</a>.</p>
        <p><span class="topcom">Bucket ACL grants</span> – You can propose up to 100
            ACL grants per bucket. If the proposed grant configuration is for an existing bucket,
            the access preview uses the proposed list of grant configurations in place of the
            existing grants. Otherwise, the access preview uses the existing grants for the
            bucket.</p>
        <p><span class="topcom">Bucket access points</span> – The analysis supports up
            to 100 access points,including multi-region access points, per bucket, including up to
            ten new access points you can propose per bucket. If the proposed Amazon S3 access point
            configuration is for an existing bucket, the access preview uses the proposed access
            point configuration in place of the existing access points. To propose an access point
            without a policy, you can provide an empty string as the access point policy. For more
            information about access point policy limits, see <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/access-points-restrictions-limitations.html">Access points
                restrictions and limitations</a>.</p>
        <p><span class="topcom">Block public access configuration</span> – If the
            proposed configuration is for an existing Amazon S3 bucket and you do not specify the
            configuration, the access preview uses the existing setting. If the proposed
            configuration is for a new bucket and you do not specify the bucket BPA configuration,
            the access preview uses <code class="code">false</code>. If the proposed configuration is for a new
            access point or multi-region access point,  and you do not specify the access point BPA
            configuration, the access preview uses <code class="code">true</code>.</p>
     
        <h2 id="access-analyzer-preview-access-kms-key">Preview access to your AWS KMS
                key</h2>
        <p>To create an access preview for a new AWS KMS key or an existing AWS KMS key that you own,
            you can propose a AWS KMS key configuration by specifying the key policy and the AWS KMS
            grant configuration.</p>
        <p><span class="topcom">AWS KMS key policy</span> – If the configuration is for
            an existing key and you do not specify the key policy, the access preview uses the
            existing policy for the key. If the access preview is for a new resource and you do not
            specify the key policy, then the access preview uses the default key policy. The
            proposed key policy cannot be an empty string.</p>
        <p><span class="topcom">AWS KMS grants</span> – The analysis supports up to 100
            KMS grants per configuration*.* If the proposed grant configuration is for an existing
            key, the access preview uses the proposed list of grant configurations in place of the
            existing grants. Otherwise, the access preview uses the existing grants for the
            key.</p>
     
        <h2 id="access-analyzer-preview-iam-role">Preview access to your IAM
                role</h2>
        <p>To create an access preview for a new IAM role or an existing IAM role that you
            own, you can propose an IAM role configuration by specifying the trust policy.</p>
        <p><span class="topcom">Role trust policy</span> – If the configuration is for
            a new IAM role, you must specify the trust policy. If the configuration is for an
            existing IAM role that you own and you do not propose the trust policy, the access
            preview uses the existing trust policy for the role. The proposed trust policy cannot be
            an empty string.</p>
     
        <h2 id="access-analyzer-preview-sqs-queue">Preview access to your Amazon SQS
                queue</h2>
        <p>To create an access preview for a new Amazon SQS queue or an existing Amazon SQS queue that you
            own, you can propose an Amazon SQS queue configuration by specifying the Amazon SQS policy for the
            queue. </p>
        <p><span class="topcom">Amazon SQS queue policy</span> – If the configuration is for
            an existing Amazon SQS queue and you do not specify the Amazon SQS policy, the access preview uses
            the existing Amazon SQS policy for the queue. If the access preview is for a new resource and
            you do not specify the policy, the access preview assumes an Amazon SQS queue without a
            policy. To propose deletion of an existing Amazon SQS queue policy, you can specify an empty
            string for the Amazon SQS policy.</p>
     
        <h2 id="access-analyzer-preview-secrets-manager-secret">Preview access to your
                Secrets Manager secret</h2>
        <p>To create an access preview for a new Secrets Manager secret or an existing Secrets Manager
            secret that you own, you can propose a Secrets Manager secret configuration by specifying the
            secret policy and optional AWS KMS encryption key.</p>
        <p><span class="topcom">Secret policy</span> – If the configuration is for an
            existing secret and you do not specify the secret policy, the access preview uses the
            existing policy for the secret. If the access preview is for a new resource and you do
            not specify the policy, the access preview assumes a secret without a policy. To propose
            deletion of an existing policy, you can specify an empty string.</p>
        <p><span class="topcom">AWS KMS encryption key</span> – If the proposed
            configuration is for a new secret and you do not specify the AWS KMS key ID, the access
            preview uses the default KMS key of the AWS account. If you specify an empty string for the
            AWS KMS key ID, the access preview uses the default KMS key of the AWS account.</p>
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./access-analyzer-preview-access-s3-console.html">Previewing access in Amazon S3 console</div><div id="next" class="next-link" accesskey="n" href="./access-analyzer-policy-validation.html">IAM Access Analyzer policy validation</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/access-analyzer-preview-access-apis.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/access-analyzer-preview-access-apis.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>