<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>AWS global condition context keys - AWS Identity and Access Management</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="reference_policies_condition-keys" /><meta name="default_state" content="reference_policies_condition-keys" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_condition-keys.html" /><meta name="description" content="Describes each of the AWS global condition keys available to use in IAM policies." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS Identity and Access Management" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Control access to your AWS resources with user identity (authentication) and with policies that define specific permissions (authorization)." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_condition-keys.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="x-default" /><meta name="feedback-item" content="IAM" /><meta name="this_doc_product" content="AWS Identity and Access Management" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'iam'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="AWS global condition context keys" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>AWS global condition context keys - AWS Identity and Access Management</title><meta name="pdf" content="/pdfs/IAM/latest/UserGuide/iam-ug.pdf#reference_policies_condition-keys" /><meta name="github" content="https://github.com/awsdocs/iam-user-guide/tree/main/doc_source/reference_policies_condition-keys.md" /><meta name="rss" content="aws-iam-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=76" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/reference_policies_condition-keys.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/reference_policies_condition-keys.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/reference_policies_condition-keys.html" /><meta name="keywords" content="IAM,AWS Identity and Access Management,IAM user,user,IAM group,group,IAM role,role,permission policy,trust policy,policy,access key,password,Resource OU ID" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS Identity and Access Management",
        "item" : "https://docs.aws.amazon.com/iam/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Reference information for AWS Identity and Access Management",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/reference.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "IAM JSON policy reference",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "AWS global condition context keys",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/IAM/latest/UserGuide/iam-ug.pdf#reference_policies_condition-keys" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a href="https://github.com/awsdocs/iam-user-guide/tree/main/doc_source/reference_policies_condition-keys.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/iam/index.html">AWS Identity and Access Management</a><a href="introduction.html">User Guide</a></div><div id="page-toc-src"><a href="#condition-keys-calledvia">CalledVia</a><a href="#condition-keys-calledviafirst">CalledViaFirst</a><a href="#condition-keys-calledvialast">CalledViaLast</a><a href="#condition-keys-currenttime">CurrentTime</a><a href="#condition-keys-ec2instancesourcevpc">Ec2InstanceSourceVpc</a><a href="#condition-keys-ec2instancesourceprivateip4">Ec2InstanceSourcePrivateIPv4</a><a href="#condition-keys-epochtime">EpochTime</a><a href="#condition-keys-federatedprovider">FederatedProvider</a><a href="#condition-keys-multifactorauthage">MultiFactorAuthAge</a><a href="#condition-keys-multifactorauthpresent">MultiFactorAuthPresent</a><a href="#condition-keys-principalaccount">PrincipalAccount</a><a href="#condition-keys-principalarn">PrincipalArn</a><a href="#condition-keys-principalisawsservice">PrincipalIsAWSService</a><a href="#condition-keys-principalorgid">PrincipalOrgID</a><a href="#condition-keys-principalorgpaths">PrincipalOrgPaths</a><a href="#condition-keys-principalservicename">PrincipalServiceName</a><a href="#condition-keys-principalservicenameslist">PrincipalServiceNamesList</a><a href="#condition-keys-principaltag">PrincipalTag</a><a href="#condition-keys-principaltype">PrincipalType</a><a href="#condition-keys-referer">Referer</a><a href="#condition-keys-requestedregion">RequestedRegion</a><a href="#condition-keys-requesttag">RequestTag</a><a href="#condition-keys-resourceaccount">ResourceAccount</a><a href="#condition-keys-resourceorgid">ResourceOrgID</a><a href="#condition-keys-resourceorgpaths">ResourceOrgPaths</a><a href="#condition-keys-resourcetag">ResourceTag</a><a href="#condition-keys-securetransport">SecureTransport</a><a href="#condition-keys-sourceaccount">SourceAccount</a><a href="#condition-keys-sourcearn">SourceArn</a><a href="#condition-keys-sourceidentity">SourceIdentity</a><a href="#condition-keys-sourceip">SourceIp</a><a href="#condition-keys-sourcevpc">SourceVpc</a><a href="#condition-keys-sourcevpce">SourceVpce</a><a href="#condition-keys-tagkeys">TagKeys</a><a href="#condition-keys-tokenissuetime">TokenIssueTime</a><a href="#condition-keys-useragent">UserAgent</a><a href="#condition-keys-userid">Userid</a><a href="#condition-keys-username">Username</a><a href="#condition-keys-viaawsservice">ViaAWSService</a><a href="#condition-keys-vpcsourceip">VpcSourceIp</a><a href="#condition-keys-other">Other cross-service keys</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="reference_policies_condition-keys">AWS global condition context
            keys</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>When a <a href="./intro-structure.html#intro-structure-principal">principal</a> makes a <a href="./intro-structure.html#intro-structure-request">request</a> to AWS, AWS gathers the request
        information into a <a href="./intro-structure.html#intro-structure-request">request context</a>. You can
        use the <code class="code">Condition</code> element of a JSON policy to compare keys in the request
        context with key values that you specify in your policy. To learn more about the
        circumstances under which a global key is included in the request context, see the <b>Availability</b> information for each global condition key. For
        information about how to use the <code class="code">Condition</code> element in a JSON policy, see <a href="./reference_policies_elements_condition.html">IAM JSON policy elements:
        Condition</a>.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>If you use condition keys that are available only in some circumstances, you can use
            the <a href="./reference_policies_elements_condition_operators.html#Conditions_IfExists">IfExists</a> versions of the condition
            operators. If the condition keys are missing from a request context, the policy can fail
            the evaluation. For example, use the following condition block with
                <code class="code">...IfExists</code> operators to match when a request comes from a specific IP
            range or from a specific VPC. If either or both keys are not included in the request
            context, the condition still returns <code class="code">true</code>. The values are only checked if
            the specified key is included in the request context. </p><pre class="programlisting"><div class="code-btn-container"></div><code class="json ">"Condition": <span>{</span>
    "IpAddressIfExists": <span>{</span>"aws:SourceIp" : ["xxx"] },
    "StringEqualsIfExists" : <span>{</span>"aws:SourceVpc" : ["yyy"]} 
}</code></pre></div></div><p>Global condition keys are condition keys with an <code class="code">aws:</code> prefix. AWS services
        can support global condition keys or provide service-specific keys that include their
        service prefix. For example, IAM condition keys include the <code class="code">iam:</code> prefix. For
        more information, see <a href="reference_policies_actions-resources-contextkeys.html" rel="noopener noreferrer" target="_blank">Actions, Resources, and Condition Keys for AWS Services</a> and choose the
        service whose keys you want to view.</p><div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>To compare your condition against a request context with multiple key values, you must
            use the <code class="code">ForAllValues</code> or <code class="code">ForAnyValue</code> set operators. Use set
            operators only with multivalued condition keys. Do not use set operators with
            single-valued condition keys. For more information, see <a href="./reference_policies_multi-value-conditions.html">Creating a condition with multiple
         keys or values</a>.</p></div></div>
        <h2 id="condition-keys-calledvia">aws:CalledVia</h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
        <p>Use this key to compare the services in the policy with the services that made
            requests on behalf of the IAM principal (user or role). When a principal makes a
            request to an AWS service, that service might use the principal's credentials to make
            subsequent requests to other services. The <code class="code">aws:CalledVia</code> key contains an
            ordered list of each service in the chain that made requests on the principal's
            behalf.</p>
        <p>For example, you can use AWS CloudFormation to read and write from an Amazon DynamoDB table. DynamoDB
            then uses encryption supplied by AWS Key Management Service (AWS KMS).</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is present in
                    the request when a service that supports <code class="code">aws:CalledVia</code> uses the
                    credentials of an IAM principal to make a request to another service. This key
                    is not present if the service uses a <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-role">service role</a> or <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-linked-role">service-linked role</a> to make a call on the principal's behalf. This
                    key is also not present when the principal makes the call directly.</p>
            </li><li class="listitem">
                <p><b>Value type</b> – Multivalued</p>
            </li></ul></div>
        <a id="calledvia-services"></a>
        <p>To use the <code class="code">aws:CalledVia</code> condition key in a policy, you must provide the
            service principals to allow or deny AWS service requests. AWS supports using the
            following service principals with <code class="code">aws:CalledVia</code>.</p>
        <div class="table-container"><div class="table-contents"><table id="w340aac35c19c20c11c15"><thead>
                    <tr>
                        <th>Service principal</th>
                    </tr>
                </thead>
                    <tr>
                        <td>athena.amazonaws.com</td>
                    </tr>
                    <tr>
                        <td>backup.amazonaws.com</td>
                    </tr>
                    <tr>
                        <td>cloud9.amazonaws.com</td>
                    </tr>
                    <tr>
                        <td>cloudformation.amazonaws.com</td>
                    </tr>
                    <tr>
                        <td>databrew.amazonaws.com</td>
                    </tr>
                    <tr>
                        <td>dataexchange.amazonaws.com</td>
                    </tr>
                    <tr>
                        <td>dynamodb.amazonaws.com</td>
                    </tr>
                    <tr>
                        <td>imagebuilder.amazonaws.com</td>
                    </tr>
                    <tr>
                        <td>kms.amazonaws.com</td>
                    </tr>
                    <tr>
                        <td>mgn.amazonaws.com</td>
                    </tr>
                    <tr>
                        <td>nimble.amazonaws.com</td>
                    </tr>
                    <tr>
                        <td>omics.amazonaws.com</td>
                    </tr>
                    <tr>
                        <td>ram.amazonaws.com</td>
                    </tr>
                    <tr>
                        <td>servicecatalog-appregistry.amazonaws.com</td>
                    </tr>
                    <tr>
                        <td>sqlworkbench.amazonaws.com</td>
                    </tr>
                </table></div></div>
        <p>To allow or deny access when <em>any</em> service makes a
            request using the principal's credentials, use the <code class="code"><a href="#condition-keys-viaawsservice">aws:ViaAWSService</a></code> condition key. That
            condition key supports AWS services.</p>
        <p>The <code class="code">aws:CalledVia</code> key is a <a href="./reference_policies_multi-value-conditions.html">multivalued key</a>. However,
            you can't enforce order using this key in a condition. Using the example above,
                <b>User 1</b> makes a request to AWS CloudFormation, which calls DynamoDB, which calls
            AWS KMS. These are three separate requests. The final call to AWS KMS is performed by User 1
                <em>via</em> AWS CloudFormation and then DynamoDB. </p>
        <div class="mediaobject">
             
                <img src="/images/IAM/latest/UserGuide/images/condition-key-calledvia-example-diagram.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                Example using aws:CalledVia&#xA;            " style="max-width:100%" />
             
             
        </div>
        <p>In this case, the <code class="code">aws:CalledVia</code> key in the request context includes
                <code class="code">cloudformation.amazonaws.com</code> and <code class="code">dynamodb.amazonaws.com</code>, in
            that order. If you care only that the call was made via DynamoDB somewhere in the chain of
            requests, you can use this condition key in your policy. </p>
        <p>For example, the following policy allows managing the AWS KMS key named
                <code class="code">my-example-key</code>, but only if DynamoDB is one of the requesting services.
            The <code class="code"><a href="./reference_policies_multi-value-conditions.html#reference_policies_multi-key-or-value-conditions">ForAnyValue:StringEquals</a></code> condition operator ensures that DynamoDB is
            one of the calling services. If the principal makes the call to AWS KMS directly, the
            condition returns <code class="code">false</code> and the request is not allowed by this
            policy.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "KmsActionsIfCalledViaDynamodb",
            "Effect": "Allow",
            "Action": [
                "kms:Encrypt",
                "kms:Decrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey",
                "kms:DescribeKey"
            ],
            "Resource": "arn:aws:kms:<code class="replaceable">region</code>:<code class="replaceable">111122223333</code>:key/<code class="replaceable">my-example-key</code>",
            "Condition": <span>{</span>
                "ForAnyValue:StringEquals": <span>{</span>
                    "aws:CalledVia": ["dynamodb.amazonaws.com"]
                }
            }
        }
    ]
}</code></pre>
        <p>If you want to enforce which service makes the first or last call in the chain, you
            can use the <code class="code"><a href="#condition-keys-calledviafirst">aws:CalledViaFirst</a></code> and <code class="code"><a href="#condition-keys-calledviafirst">aws:CalledViaLast</a></code> keys.
            For example, the following policy allows managing the key named
                <code class="code">my-example-key</code> in AWS KMS. These AWS KMS operations are allowed only if
            multiple requests were included in the chain. The first request must be made via AWS CloudFormation
            and the last via DynamoDB. If other services make requests in the middle of the chain, the
            operation is still allowed.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "KmsActionsIfCalledViaChain",
            "Effect": "Allow",
            "Action": [
                "kms:Encrypt",
                "kms:Decrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey",
                "kms:DescribeKey"
            ],
            "Resource": "arn:aws:kms:<code class="replaceable">region</code>:<code class="replaceable">111122223333</code>:key/<code class="replaceable">my-example-key</code>",
            "Condition": <span>{</span>
                "StringEquals": <span>{</span>
                    "aws:CalledViaFirst": "cloudformation.amazonaws.com",
                    "aws:CalledViaLast": "dynamodb.amazonaws.com"
                }
            }
        }
    ]
}</code></pre>
        <p>The <code class="code"><a href="#condition-keys-calledviafirst">aws:CalledViaFirst</a></code> and <code class="code"><a href="#condition-keys-calledviafirst">aws:CalledViaLast</a></code> keys are
            present in the request when a service uses an IAM principal's credentials to call
            another service. They indicate the first and last services that made calls in the chain
            of requests. For example, assume that AWS CloudFormation calls another service named <code class="code">X
                Service</code>, which calls DynamoDB, which then calls AWS KMS. The final call to AWS KMS
            is performed by <code class="code">User 1</code>
            <em>via</em> AWS CloudFormation, then <code class="code">X Service</code>, and then
            DynamoDB. It was first called via AWS CloudFormation and last called via DynamoDB. </p>
        <div class="mediaobject">
             
                <img src="/images/IAM/latest/UserGuide/images/condition-key-calledviafirstlast-example-diagram.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                Example using aws:CalledViaFirst and aws:CalledViaLast&#xA;            " style="max-width:100%" />
             
             
        </div>
        
     
        <h2 id="condition-keys-calledviafirst">aws:CalledViaFirst</h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
        <p>Use this key to compare the services in the policy with the <em><b>first service</b></em> that made a request
            on behalf of the IAM principal (user or role). For more information, see <code class="code"><a href="#condition-keys-calledvia">aws:CalledVia</a></code>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is present in
                    the request when a service uses the credentials of an IAM principal to make at
                    least one other request to a different service. This key is not present if the
                    service uses a <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-role">service role</a> or <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-linked-role">service-linked role</a> to make a call on the principal's behalf. This
                    key is also not present when the principal makes the call directly.</p>
            </li><li class="listitem">
                <p><b>Value type</b> – Single-valued</p>
            </li></ul></div>
     
        <h2 id="condition-keys-calledvialast">aws:CalledViaLast</h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
        <p>Use this key to compare the services in the policy with the <em>last service</em> that made a request on behalf of the IAM principal (user
            or role). For more information, see <code class="code"><a href="#condition-keys-calledvia">aws:CalledVia</a></code>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is present in
                    the request when a service uses the credentials of an IAM principal to make at
                    least one other request to a different service. This key is not present if the
                    service uses a <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-role">service role</a> or <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-linked-role">service-linked role</a> to make a call on the principal's behalf. This
                    key is also not present when the principal makes the call directly.</p>
            </li><li class="listitem">
                <p><b>Value type</b> – Single-valued</p>
            </li></ul></div>
     
        <h2 id="condition-keys-currenttime">aws:CurrentTime</h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_Date">date operators</a>.</p>
        <p>Use this key to compare the date and time of the request with the date and time that
            you specify in the policy. To view an example policy that uses this condition key, see
                <a href="./reference_policies_examples_aws-dates.html">AWS: Allows access based on date and
      time</a>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is always
                    included in the request context.</p>
            </li><li class="listitem">
                <p><b>Value type</b> – Single-valued</p>
            </li></ul></div>
     
        <h2 id="condition-keys-ec2instancesourcevpc">aws:Ec2InstanceSourceVpc</h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
        <p>This key identifies the VPC to which Amazon EC2 IAM role credentials were delivered to.
            You can use this key in a policy with the <a href="#condition-keys-sourcevpc">aws:SourceVPC</a> global key to check if a call is made from a
            VPC (<code class="code">aws:SourceVPC</code>) that matches the VPC where a credential was delivered
            to (<code class="code">aws:Ec2InstanceSourceVpc</code>).</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is included in
                    the request context whenever the requester is signing requests with an Amazon EC2
                    role credential. It can be used in IAM policies, service control policies, VPC
                    endpoint policies, and resource policies.</p>
            </li><li class="listitem">
                <p><b>Value type</b> – Single-valued</p>
            </li></ul></div>
        <p>This key can be used with VPC identifier values, but is most useful when used as a
            variable combined with the <code class="code">aws:SourceVpc</code> context key. The
                <code class="code">aws:SourceVpc</code> context key is included in the request context only if
            the requester uses a VPC endpoint to make the request. Using
                <code class="code">aws:Ec2InstanceSourceVpc</code> with <code class="code">aws:SourceVpc</code> allows you to
            use <code class="code">aws:Ec2InstanceSourceVpc</code> more broadly since it compares values that
            typically change together.</p>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>This condition key is not available in EC2-Classic.</p></div></div>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Sid": "RequireSameVPC",
      "Effect": "Deny",
      "Action": "*",
      "Resource": "*",
      "Condition": <span>{</span>
        "StringNotEquals": <span>{</span>
            "aws:SourceVpc": "$<span>{</span>aws:Ec2InstanceSourceVpc}"
        },
        "Null": <span>{</span>
          "ec2:SourceInstanceARN": "false"
        },
        "BoolIfExists": <span>{</span>
          "aws:ViaAWSService": "false"
        }
      }
    }
  ]
}</code></pre>
        <p>In the example above, access is denied if the <code class="code">aws:SourceVpc</code> value isn’t
            equal to the <code class="code">aws:Ec2InstanceSourceVpc</code> value. The policy statement is
            limited to only roles used as Amazon EC2 instance roles by testing for the existence of the
                <code class="code">ec2:SourceInstanceARN</code> condition key.</p>
        <p>The policy uses <code class="code">aws:ViaAWSService</code> to allow AWS to authorize requests
            when requests are made on behalf of your Amazon EC2 instance roles. For example, when you
            make a request from an Amazon EC2 instance to an encrypted Amazon S3 bucket, Amazon S3 makes a call to
            AWS KMS on your behalf. Some of the keys are not present when the request is made to
            AWS KMS.</p>
     
        <h2 id="condition-keys-ec2instancesourceprivateip4">aws:Ec2InstanceSourcePrivateIPv4</h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_IPAddress">IP address operators</a>.</p>
        <p>This key identifies the private IPv4 address of the primary elastic network interface
            to which Amazon EC2 IAM role credentials were delivered. You must use this condition key
            with its companion key <code class="code">aws:Ec2InstanceSourceVpc</code> to ensure that you have a
            globally unique combination of VPC ID and source private IP. Use this key with
                <code class="code">aws:Ec2InstanceSourceVpc</code> to ensure that a request was made from the
            same private IP address that the credentials were delivered to.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is included in
                    the request context whenever the requester is signing requests with an Amazon EC2
                    role credential. It can be used in IAM policies, service control policies, VPC
                    endpoint policies, and resource policies.</p>
            </li><li class="listitem">
                <p><b>Value type</b> – Single-valued</p>
            </li></ul></div>
        <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>This key should not be used alone in an <code class="code">Allow</code> statement. Private IP
                addresses are by definition not globally unique. You should use the
                    <code class="code">aws:Ec2InstanceSourceVpc</code> key every time you use the
                    <code class="code">aws:Ec2InstanceSourcePrivateIPv4</code> key to specify the VPC your Amazon EC2
                instance credentials can be used from.</p></div></div>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>This condition key is not available in EC2-Classic.</p></div></div>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Deny",
            "Action":  "*",
            "Resource": "*",
            "Condition": <span>{</span>
                "StringNotEquals": <span>{</span>
                    "aws:Ec2InstanceSourceVpc": "$<span>{</span>aws:SourceVpc}"
                },                
                "Null": <span>{</span>
                    "ec2:SourceInstanceARN": "false"
                },
                "BoolIfExists": <span>{</span>
                    "aws:ViaAWSService": "false"
                }
            }
        },
        <span>{</span>
            "Effect": "Deny",
            "Action":  "*",
            "Resource": "*",
            "Condition": <span>{</span>
                "StringNotEquals": <span>{</span>
                    "aws:Ec2InstanceSourcePrivateIPv4": "$<span>{</span>aws:VpcSourceIp}"
                },                               
                "Null": <span>{</span>
                    "ec2:SourceInstanceARN": "false"
                },
                "BoolIfExists": <span>{</span>
                    "aws:ViaAWSService": "false"
                }
            }
        }
    ]
}</code></pre>
     
        <h2 id="condition-keys-epochtime">aws:EpochTime</h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_Date">date operators</a> or <a href="./reference_policies_elements_condition_operators.html#Conditions_Numeric">numeric operators</a>.</p>
        <p>Use this key to compare the date and time of the request in epoch or Unix time with
            the value that you specify in the policy. This key also accepts the number of seconds
            since January 1, 1970. </p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is always
                    included in the request context.</p>
            </li><li class="listitem">
                <p><b>Value type</b> – Single-valued</p>
            </li></ul></div>
     
        <h2 id="condition-keys-federatedprovider">aws:FederatedProvider</h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
        <p>Use this key to compare the principal's issuing identity provider (IdP) with the IdP
            that you specify in the policy. This means that an IAM role was assumed using the
                <code class="code">AssumeRoleWithWebIdentity</code> or <code class="code">AssumeRoleWithSAML</code> AWS STS
            operations. When the resulting role session's temporary credentials are used to make a
            request, the request context identifies the IdP that authenticated the original
            federated identity.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is present when
                    the principal is a role session principal and that session was issued using a
                    third-party identity provider. </p>
            </li><li class="listitem">
                <p><b>Value type</b> – Single-valued</p>
            </li></ul></div>
        <p>For example, if the user was authenticated through Amazon Cognito, the request context includes
            the value <code class="code">cognito-identity.amazonaws.com</code>. Similarly, if the user was
            authenticated through Login with Amazon, the request context includes the value
                <code class="code">www.amazon.com</code>.</p>
        <p>You can use any single-valued condition key as a <a href="./reference_policies_variables.html">variable</a>. The following example
            resource-based policy uses the <code class="code">aws:FederatedProvider</code> key as a policy
            variable in the ARN of a resource. This policy allows any principal who authenticated
            using an IdP to get objects out of an Amazon S3 bucket with a path that's specific to the
            issuing identity provider.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": <span>{</span>
    "Effect": "Allow",
    "Principal": "*",
    "Action": "s3:GetObject",
    "Resource": "arn:aws:s3:::<code class="replaceable"><code class="replaceable">DOC-EXAMPLE-BUCKET</code></code>/$<span>{</span>aws:FederatedProvider}/*"
  }
}</code></pre>
     
        <h2 id="condition-keys-multifactorauthage">aws:MultiFactorAuthAge</h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_Numeric">numeric operators</a>.</p>
        <p>Use this key to compare the number of seconds since the requesting principal was
            authorized using MFA with the number that you specify in the policy. For more
            information about MFA, see <a href="./id_credentials_mfa.html">Using multi-factor authentication (MFA) in AWS</a>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is included in
                    the request context only if the principal making the call was authenticated
                    using MFA. If MFA was not used, this key is not present.</p>
            </li><li class="listitem">
                <p><b>Value type</b> – Single-valued</p>
            </li></ul></div>
     
        <h2 id="condition-keys-multifactorauthpresent">aws:MultiFactorAuthPresent</h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_Boolean">Boolean operators</a>.</p>
        <p>Use this key to check whether multi-factor authentication (MFA) was used to validate
            the temporary security credentials that made the request.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is included in
                    the request context only when the principal uses temporary credentials to make
                    the request. The key is not present in AWS CLI, AWS API, or AWS SDK
                    requests that are made using long-term credentials. </p>
            </li><li class="listitem">
                <p><b>Value type</b> – Single-valued</p>
            </li></ul></div>
        <p>Temporary credentials are used to authenticate IAM roles, federated users, IAM
            users with temporary tokens from <code class="code">sts:GetSessionToken</code>, and users of the
            AWS Management Console. IAM user access keys are long-term credentials, but in some cases, AWS
            creates temporary credentials on behalf of IAM users to perform operations. In these
            cases, the <code class="code">aws:MultiFactorAuthPresent</code> key is present in the request and set
            to a value of <code class="code">false</code>. There are two common cases where this can
            happen:</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>IAM users in the AWS Management Console unknowingly use temporary credentials. Users sign
                    into the console using their user name and password, which are long-term
                    credentials. However, in the background, the console generates temporary
                    credentials on behalf of the user. </p>
            </li><li class="listitem">
                <p>If an IAM user makes a call to an AWS service, the service re-uses the
                    user's credentials to make another request to a different service. For example,
                    when calling Athena to access an Amazon S3 bucket, or when using AWS CloudFormation to create an
                    Amazon EC2 instance. For the subsequent request, AWS uses temporary
                    credentials.</p>
            </li></ul></div>
        <p>To learn which services support using temporary credentials, see <a href="./reference_aws-services-that-work-with-iam.html">AWS services that work with
      IAM</a>.</p>
        <p>The <code class="code">aws:MultiFactorAuthPresent</code> key is not present when an API or CLI
            command is called with long-term credentials, such as user access key pairs. Therefore
            we recommend that when you check for this key that you use the <code class="code"><a href="./reference_policies_elements_condition_operators.html#Conditions_IfExists">...IfExists</a></code> versions of the
            condition operators.</p>
        <p>It is important to understand that the following <code class="code">Condition</code> element is
                    <em><b>not</b></em> a reliable way to
            check whether a request is authenticated using MFA.</p>
        <pre class="programlisting"><div class="code-btn-container"></div><code class="json ">#####   WARNING: NOT RECOMMENDED   #####
"Effect" : "Deny",
"Condition" : <span>{</span> "Bool" : <span>{</span> "aws:MultiFactorAuthPresent" : "false" } }</code></pre>
        <p>This combination of the <code class="code">Deny</code> effect, <code class="code">Bool</code> element, and
                <code class="code">false</code> value denies requests that can be authenticated using MFA, but
            were not. This applies only to temporary credentials that support using MFA. This
            statement does not deny access to requests that are made using long-term credentials, or
            to requests that are authenticated using MFA. Use this example with caution because its
            logic is complicated and it does not test whether MFA-authentication was actually used. </p>
        <p>Also do not use the combination of the <code class="code">Deny</code> effect, <code class="code">Null</code>
            element, and <code class="code">true</code> because it behaves the same way and the logic is even
            more complicated.</p>
         
            <h6>Recommended Combination</h6>
            <p>We recommend that you use the <a href="./reference_policies_elements_condition_operators.html#Conditions_IfExists">BoolIfExists</a> operator to check whether a request is
                authenticated using MFA.</p>
         
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Effect" : "Deny",
"Condition" : <span>{</span> "BoolIfExists" : <span>{</span> "aws:MultiFactorAuthPresent" : "false" } }</code></pre>
        <p>This combination of <code class="code">Deny</code>, <code class="code">BoolIfExists</code>, and
                <code class="code">false</code> denies requests that are not authenticated using MFA.
            Specifically, it denies requests from temporary credentials that do not include MFA. It
            also denies requests that are made using long-term credentials, such as AWS CLI or AWS
            API operations made using access keys. The <code class="code">*IfExists</code> operator checks for
            the presence of the <code class="code">aws:MultiFactorAuthPresent</code> key and whether or not it
            could be present, as indicated by its existence. Use this when you want to deny any
            request that is not authenticated using MFA. This is more secure, but can break any code
            or scripts that use access keys to access the AWS CLI or AWS API. </p>
         
            <h6>Alternative Combinations</h6>
            <p>You can also use the <a href="./reference_policies_elements_condition_operators.html#Conditions_IfExists">BoolIfExists</a> operator to allow MFA-authenticated requests
                and AWS CLI or AWS API requests that are made using long-term credentials.</p>
         
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Effect" : "Allow",
"Condition" : <span>{</span> "BoolIfExists" : <span>{</span> "aws:MultiFactorAuthPresent" : "true" } }</code></pre>
        <p>This condition matches either if the key exists and is present <b>or</b> if the key does not exist. This combination of <code class="code">Allow</code>,
                <code class="code">BoolIfExists</code>, and <code class="code">true</code> allows requests that are
            authenticated using MFA, or requests that cannot be authenticated using MFA. This means
            that AWS CLI, AWS API, and AWS SDK operations are allowed when the requester uses
            their long-term access keys. This combination does not allow requests from temporary
            credentials that could, but do not include MFA. </p>
        <p>When you create a policy using the IAM console visual editor and choose
                <b>MFA required</b>, this combination is applied. This setting
            requires MFA for console access, but allows programmatic access with no MFA. </p>
        <p>Alternatively, you can use the <code class="code">Bool</code> operator to allow programmatic and
            console requests only when authenticated using MFA.</p>
        <pre class="programlisting"><div class="code-btn-container"></div><code class="json ">"Effect" : "Allow",
"Condition" : <span>{</span> "Bool" : <span>{</span> "aws:MultiFactorAuthPresent" : "true" } }</code></pre>
        <p>This combination of the <code class="code">Allow</code>, <code class="code">Bool</code>, and <code class="code">true</code>
            allows only MFA-authenticated requests. This applies only to temporary credentials that
            support using MFA. This statement does not allow access to requests that were made using
            long-term access keys, or to requests made using temporary credentials without MFA. </p>
        <p><b><em>Do not</em></b> use a
            policy construct similar to the following to check whether the MFA key is
            present:</p>
        <pre class="programlisting"><div class="code-btn-container"></div><code class="json ">#####   WARNING: USE WITH CAUTION   #####

"Effect" : "Allow",
"Condition" : <span>{</span> "Null" : <span>{</span> "aws:MultiFactorAuthPresent" : "false" } }</code></pre>
        <p>This combination of the <code class="code">Allow</code> effect, <code class="code">Null</code> element, and
                <code class="code">false</code> value allows only requests that can be authenticated using MFA,
            regardless of whether the request is actually authenticated. This allows all requests
            that are made using temporary credentials, and denies access for long-term credentials.
            Use this example with caution because it does not test whether MFA-authentication was
            actually used. </p>
     
        <h2 id="condition-keys-principalaccount">aws:PrincipalAccount</h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
        <p>Use this key to compare the account to which the requesting principal belongs with the
            account identifier that you specify in the policy. For anonymous requests, the request
            context returns <code class="code">anonymous</code>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is included in
                    the request context for all requests, including anonymous requests.</p>
            </li><li class="listitem">
                <p><b>Value type</b> – Single-valued</p>
            </li></ul></div>
        <p>In the following example, access is denied except to principals with the account
            number <code class="code">123456789012</code>.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Sid": "DenyAccessFromPrincipalNotInSpecificAccount",
      "Action": "<code class="replaceable">service</code>:*",
      "Effect": "Deny",
      "Resource": [
        "arn:aws:<code class="replaceable">service:region:accountID:resource</code>"
      ],
      "Condition": <span>{</span>
        "StringNotEquals": <span>{</span>
          "aws:PrincipalAccount": [
            "123456789012"
          ]
        }
      }
    }
  ]
}
        </code></pre>

     
        <h2 id="condition-keys-principalarn">aws:PrincipalArn</h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_ARN">ARN operators</a> and <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
        <p>Use this key to compare the <a href="./reference_identifiers.html#identifiers-arns">Amazon Resource
                Name</a> (ARN) of the principal that made the request with the ARN that you
            specify in the policy. For IAM roles, the request context returns the ARN of the role,
            not the ARN of the user that assumed the role. </p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is included in
                    the request context for all signed requests. Anonymous requests do not include
                    this key. You can specify the following types of principals in this condition
                    key: </p>
                <div class="itemizedlist">
                     
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>IAM role</p>
                    </li><li class="listitem">
                        <p>IAM user</p>
                    </li><li class="listitem">
                        <p>AWS STS federated user session</p>
                    </li><li class="listitem">
                        <p>AWS account root user</p>
                    </li></ul></div>
            </li><li class="listitem">
                <p><b>Value type</b> – Single-valued</p>
            </li></ul></div>
        <p>The following list shows the request context value returned for different types of
            principals that you can specify in the <code class="code">aws:PrincipalArn</code> condition
            key:</p>
        <div class="itemizedlist">
             
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>IAM role</b> – The request context
                    contains the following value for condition key <code class="code">aws:PrincipalArn</code>. Do
                    not specify the assumed role session ARN as a value for this condition key. For
                    more information about the assumed role session principal, see <a href="./reference_policies_elements_principal.html#principal-role-session">Role session principals</a>.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="code" copy="true">arn:aws:iam::123456789012:role/role-name</code></code></pre>
            </li><li class="listitem">
                <p><b>IAM user</b> – The request context
                    contains the following value for condition key
                    <code class="code">aws:PrincipalArn</code>.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="code" copy="true">arn:aws:iam::123456789012:user/<code class="replaceable">user-name</code></code></code></pre>
            </li><li class="listitem">
                <p><b>AWS STS federated user sessions</b> – The
                    request context contains the following value for condition key
                        <code class="code">aws:PrincipalArn</code>.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="code" copy="true">arn:aws:sts::123456789012:federated-user/<code class="replaceable">user-name</code></code></code></pre>
            </li><li class="listitem">
                <p><b>AWS account root user</b> – The request
                    context contains the following value for condition key
                        <code class="code">aws:PrincipalArn</code>. When you specify the root user ARN as the value
                    for the <code class="code">aws:PrincipalArn</code> condition key, it limits permissions only
                    for the root user of the AWS account. This is different from specifying the
                    root user ARN in the principal element of a resource-based policy, which delegates
                    authority to the AWS account. For more information about specifying the root user
                    ARN in the principal element of a resource-based policy, see <a href="./reference_policies_elements_principal.html#principal-accounts">AWS account principals</a>. </p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="code" copy="true">arn:aws:iam::123456789012:root</code></code></pre>
                <p>You can specify the root user ARN as a value for condition key
                        <code class="code">aws:PrincipalArn</code> in AWS Organizations service control policies (SCPs).
                    SCPs are a type of organization policy used to manage permissions in your
                    organization and affect only member accounts in the organization. An SCP
                    restricts permissions for IAM users and roles in member accounts, including the
                    member account's root user. For more information about the effect of SCPs on
                    permissions, see <a href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_scps.html#scp-effects-on-permissions">SCP effects on permissions</a> in the <em>Organizations User
                        Guide</em>.</p>
            </li></ul></div>
        
     
        <h2 id="condition-keys-principalisawsservice">aws:PrincipalIsAWSService</h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_Boolean">Boolean operators</a>.</p>
        <p>Use this key to check whether the call to your resource is being made directly by an
            AWS <a href="./reference_policies_elements_principal.html#principal-services">service principal</a>. For example, AWS CloudTrail
            uses the service principal <code class="code">cloudtrail.amazonaws.com</code> to write logs to your
            Amazon S3 bucket. The request context key is set to true when a service uses a service
            principal to perform a direct action on your resources. The context key is set to false
            if the service uses the credentials of an IAM principal to make a request on the
            principal's behalf. It is also set to false if the service uses a <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-role">service
                role</a> or <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-linked-role">service-linked role</a> to make a call on the principal's behalf.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is present in
                    the request context for all signed API requests that use AWS credentials.
                    Anonymous requests do not include this key.</p>
            </li><li class="listitem">
                <p><b>Value type</b> – Single-valued</p>
            </li></ul></div>
        <p>You can use this condition key to limit access to your trusted identities and expected
            network locations while safely granting access to AWS services.</p>
        <p>In the following Amazon S3 bucket policy example, access to the bucket is restricted unless
            the request originates from <code class="code">vpc-111bbb22</code> or is from a service principal,
            such as CloudTrail.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Sid": "Expected-network+service-principal",
      "Effect": "Deny",
      "Principal": "*",
      "Action": "s3:PutObject",
      "Resource": "arn:aws:s3:::<code class="replaceable"><code class="replaceable">DOC-EXAMPLE-BUCKET1</code></code>/AWSLogs/<code class="replaceable">AccountNumber</code>/*",
      "Condition": <span>{</span>
        "StringNotEqualsIfExists": <span>{</span>
          "aws:SourceVpc": "vpc-111bbb22"
        },
        "BoolIfExists": <span>{</span>
          "aws:PrincipalIsAWSService": "false"
        }
      }
    }
  ]
}</code></pre>
        
        <p>In the following video, learn
            more about how you might use the <code class="code">aws:PrincipalIsAWSService</code> condition key in
            a policy.</p>
        <div class="mediaobject">
             
                <iframe width="720" height="330" frameborder="0" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" sandbox="allow-scripts allow-same-origin allow-popups" src="https://www.youtube-nocookie.com/embed/gv-_H8a42G4"></iframe>
             
             
        </div>
        
        
        
     
        <h2 id="condition-keys-principalorgid">aws:PrincipalOrgID</h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
        <p>Use this key to compare the identifier of the organization in AWS Organizations to which the
            requesting principal belongs with the identifier specified in the policy.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is included in
                    the request context only if the principal is a member of an organization.
                    Anonymous requests do not include this key.</p>
            </li><li class="listitem">
                <p><b>Value type</b> – Single-valued</p>
            </li></ul></div>
        <p>This global key provides an alternative to listing all the account IDs for all AWS
            accounts in an organization. You can use this condition key to simplify specifying the
                <code class="code">Principal</code> element in a <a href="./access_policies_identity-vs-resource.html">resource-based policy</a>. You can
            specify the <a href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_org_details.html">organization
                ID</a> in the condition element. When you add and remove accounts, policies that
            include the <code class="code">aws:PrincipalOrgID</code> key automatically include the correct
            accounts and don't require manual updating.</p>
        <p>For example, the following Amazon S3 bucket policy allows members of any account in the
                <code class="code">o-xxxxxxxxxxx</code> organization to add an object into the
                <code class="code">policy-ninja-dev</code> bucket. </p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "> <span>{</span>
  "Version": "2012-10-17",
  "Statement": <span>{</span>
    "Sid": "AllowPutObject",
    "Effect": "Allow",
    "Principal": "*",
    "Action": "s3:PutObject",
    "Resource": "arn:aws:s3:::policy-ninja-dev/*",
    "Condition": <span>{</span>"StringEquals":
      <span>{</span>"aws:PrincipalOrgID":"o-xxxxxxxxxxx"}
    }
  }
}</code></pre>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>This global condition also applies to the management account of an AWS
                organization. This policy prevents all principals outside of the specified
                organization from accessing the Amazon S3 bucket. This includes any AWS services that
                interact with your internal resources, such as AWS CloudTrail sending log data to your
                Amazon S3 buckets. To learn how you can safely grant access for AWS services, see <a href="#condition-keys-principalisawsservice">aws:PrincipalIsAWSService</a>.</p></div></div>
        <p>For more information about AWS Organizations, see <a href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_introduction.html">What Is AWS Organizations?</a> in the
                <em>AWS Organizations User Guide</em>.</p>
     
        <h2 id="condition-keys-principalorgpaths">aws:PrincipalOrgPaths</h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
        <p>Use this key to compare the AWS Organizations path for the principal who is making the request
            to the path in the policy. That principal can be an IAM user, IAM role, federated
            user, or AWS account root user. In a policy, this condition key ensures that the requester is an
            account member within the specified organization root or organizational units (OUs) in
            AWS Organizations. An AWS Organizations path is a text representation of the structure of an Organizations entity.
            For more information about using and understanding paths, see <a href="./access_policies_access-advisor-view-data-orgs.html#access_policies_access-advisor-viewing-orgs-entity-path">Understand the
            AWS Organizations entity path</a>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is included in
                    the request context only if the principal is a member of an organization.
                    Anonymous requests do not include this key.</p>
            </li><li class="listitem">
                <p><b>Value type</b> – Multivalued</p>
            </li></ul></div>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Organization IDs are globally unique but OU IDs and root IDs are unique only
                within an organization. This means that no two organizations share the same
                organization ID. However, another organization might have an OU or root with the
                same ID as yours. We recommend that you always include the organization ID when you
                specify an OU or root.</p></div></div>
        
        <p>For example, the following
            condition returns <code class="code">true</code> for principals in accounts that are
            attached directly to the <code class="code">ou-ab12-22222222</code> OU, but not in its child
            OUs.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">"Condition" : <span>{</span> "ForAnyValue:StringEquals" : <span>{</span>
     "aws:PrincipalOrgPaths":["o-a1b2c3d4e5/r-ab12/ou-ab12-11111111/ou-ab12-22222222/"]
}}</code></pre>
        
        <p>The following
            condition
            returns <code class="code">true</code> for principals in an account that is attached directly to the
            OU or any of its child OUs. When you include a wildcard, you must use the
                <code class="code">StringLike</code> condition operator.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">"Condition" : <span>{</span> "ForAnyValue:StringLike" : <span>{</span>
     "aws:PrincipalOrgPaths":["o-a1b2c3d4e5/r-ab12/ou-ab12-11111111/ou-ab12-22222222/*"]
}}</code></pre>
        <p>The following 
            condition returns <code class="code">true</code> for principals in an account that is attached
            directly to any of the child OUs, but not directly to the parent OU. The previous
            condition is for the OU or any children. The following condition is for only the
            children (and any children of those children).</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">"Condition" : <span>{</span> "ForAnyValue:StringLike" : <span>{</span>
     "aws:PrincipalOrgPaths":["o-a1b2c3d4e5/r-ab12/ou-ab12-11111111/ou-ab12-22222222/ou-*"]
}}</code></pre>
        <p>The following condition allows access for every principal in the
                <code class="code">o-a1b2c3d4e5</code> organization, regardless of their parent OU.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">"Condition" : <span>{</span> "ForAnyValue:StringLike" : <span>{</span>
     "aws:PrincipalOrgPaths":["o-a1b2c3d4e5/*"]
}}</code></pre>
        <p><code class="code">aws:PrincipalOrgPaths</code> is a multivalued condition key. Multivalued keys
            can have multiple values in the request context. When you use multiple values with the
                <code class="code">ForAnyValue</code> condition operator, the principal's path must match one of
            the paths listed in the policy. For more information about multivalued condition keys,
            see <a href="./reference_policies_multi-value-conditions.html#reference_policies_multi-key-or-value-conditions">Using multiple keys and
            values</a>.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">    "Condition": <span>{</span>
        "ForAnyValue:StringLike": <span>{</span>
            "aws:PrincipalOrgPaths": [
                "o-a1b2c3d4e5/r-ab12/ou-ab12-33333333/*",
                "o-a1b2c3d4e5/r-ab12/ou-ab12-22222222/*"
            ]
        }
    }</code></pre>
     
        <h2 id="condition-keys-principalservicename">aws:PrincipalServiceName</h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
        <p>Use this key to compare the <a href="./reference_policies_elements_principal.html#principal-services">service
                principal</a> name in the policy with the service principal that is making
            requests to your resources. You can use this key to check whether this call is made by a
            specific service principal. When a service principal makes a direct request to your
            resource, the <code class="code">aws:PrincipalServiceName</code> key contains the name of the service
            principal. For example, the AWS CloudTrail service principal name is
                <code class="code">cloudtrail.amazonaws.com</code>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is present in
                    the request when the call is made by an AWS service principal. This key is not
                    present in any other situation, including the following:</p>
                <div class="itemizedlist">
                     
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>If the service uses a <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-role">service role</a> or <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-linked-role">service-linked role</a> to make a call on the principal's
                            behalf.</p>
                    </li><li class="listitem">
                        <p>If the service uses the credentials of an IAM principal to make a
                            request on the principal's behalf.</p>
                    </li><li class="listitem">
                        <p>If the call is made directly by an IAM principal.</p>
                    </li><li class="listitem">
                        <p>If the call is made by an anonymous requester.</p>
                    </li></ul></div>
            </li><li class="listitem">
                <p><b>Value type</b> – Single-valued</p>
            </li></ul></div>
        <p>You can use this condition key to limit access to your trusted identities and expected
            network locations while safely granting access to an AWS service.</p>
        <p>In the following Amazon S3 bucket policy example, access to the bucket is restricted unless
            the request originates from <code class="code">vpc-111bbb22</code> or is from a service principal,
            such as CloudTrail.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Sid": "expected-network+service-principal",
      "Effect": "Deny",
      "Principal": "*",
      "Action": "s3:PutObject",
      "Resource": "arn:aws:s3:::<code class="replaceable"><code class="replaceable">DOC-EXAMPLE-BUCKET1</code></code>/AWSLogs/<code class="replaceable">AccountNumber</code>/*",
      "Condition": <span>{</span>
        "StringNotEqualsIfExists": <span>{</span>
          "aws:SourceVpc": "vpc-111bbb22",
          "aws:PrincipalServiceName": "cloudtrail.amazonaws.com"
        }
      }
    }
  ]
}
        </code></pre>
     
        <h2 id="condition-keys-principalservicenameslist">aws:PrincipalServiceNamesList</h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
        <p>This key provides a list of all <a href="./reference_policies_elements_principal.html#principal-services">service
                principal</a> names that belong to the service. This is an advanced condition
            key. You can use it to restrict the service from accessing your resource from a specific
            Region only. Some services may create Regional service principals to indicate a
            particular instance of the service within a specific Region. You can limit access to a
            resource to a particular instance of the service. When a service principal makes a
            direct request to your resource, the <code class="code">aws:PrincipalServiceNamesList</code> contains
            an unordered list of all service principal names associated with the Regional instance
            of the service.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is present in
                    the request when the call is made by an AWS service principal. This key is not
                    present in any other situation, including the following:</p>
                <div class="itemizedlist">
                     
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>If the service uses a <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-role">service role</a> or <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-linked-role">service-linked role</a> to make a call on the principal's
                            behalf.</p>
                    </li><li class="listitem">
                        <p>If the service uses the credentials of an IAM principal to make a
                            request on the principal's behalf.</p>
                    </li><li class="listitem">
                        <p>If the call is made directly by an IAM principal.</p>
                    </li><li class="listitem">
                        <p>If the call is made by an anonymous requester.</p>
                    </li></ul></div>
            </li><li class="listitem">
                <p><b>Value type</b> – Multivalued</p>
            </li></ul></div>
        <p><code class="code">aws:PrincipalServiceNamesList</code> is a multivalued condition key. Multivalued
            keys can have multiple values in the request context. You must use the
                <code class="code">ForAnyValue</code> or <code class="code">ForAllValues</code> set operators with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string condition operators</a> for this key. For more
            information about multivalued condition keys, see <a href="./reference_policies_multi-value-conditions.html#reference_policies_multi-key-or-value-conditions">Using multiple keys and
            values</a>.</p>
     
        <h2 id="condition-keys-principaltag">aws:PrincipalTag/<em>tag-key</em></h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
        <p>Use this key to compare the tag attached to the principal making the request with the
            tag that you specify in the policy. If the principal has more than one tag attached, the
            request context includes one <code class="code">aws:PrincipalTag</code> key for each attached tag
            key.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is included in
                    the request context if the principal is using an IAM user with attached tags.
                    It is included for a principal using an IAM role with attached tags or <a href="./id_session-tags.html">session tags</a>. Anonymous requests do not
                    include this key.</p>
            </li><li class="listitem">
                <p><b>Value type</b> – Single-valued</p>
            </li></ul></div>
        <p>You can add custom attributes to a user or role in the form of a key-value pair. For
            more information about IAM tags, see <a href="./id_tags.html">Tagging IAM resources</a>. You can use <code class="code">aws:PrincipalTag</code> to <a href="./access_iam-tags.html#access_iam-tags_control-principals">control access</a> for AWS
            principals.</p>
        <p>This example shows how you might create an identity-based policy that allows users with the <code class="userinput">department=hr</code> tag
            to manage IAM users, groups, or roles. To use this policy, replace the <code class="replaceable">italicized placeholder text</code> in the example policy with your own information.
  Then, follow the directions in <a href="./access_policies_create.html">create a policy</a> or <a href="./access_policies_manage-edit.html">edit a policy</a>.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Action": "iam:*",
      "Resource": "*",
      "Condition": <span>{</span>
        "StringEquals": <span>{</span>
          "aws:PrincipalTag/<code class="replaceable">department</code>": "<code class="replaceable">hr</code>"
        }
      }
    }
  ]
}</code></pre>
        <p>This example shows how you might create a resource-based policy with the
                <code class="code">aws:PrincipalTag</code> key in the resource ARN. The policy allows the
                <code class="code">s3:GetObject</code> action only if the bucket name ends with a team name from
            the <code class="code"><code class="replaceable">team</code></code> principal tag.
             To use this policy, replace the <code class="replaceable">italicized placeholder text</code> in the example policy with your own information.
  Then, follow the directions in <a href="./access_policies_create.html">create a policy</a> or <a href="./access_policies_manage-edit.html">edit a policy</a>.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": <span>{</span>
    "Effect": "Allow",
    "Principal": "*",
    "Action": "s3:GetObject",
    "Resource": "arn:aws:s3:::<code class="replaceable">DOC-EXAMPLE-BUCKET</code>-$<span>{</span>aws:PrincipalTag/<code class="replaceable">team</code>}/"
  }
}</code></pre>
     
        <h2 id="condition-keys-principaltype">aws:PrincipalType</h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
        <p>Use this key to compare the type of principal making the request with the principal
            type that you specify in the policy. For more information, see <a href="./reference_policies_elements_principal.html#Principal_specifying">Specifying a principal</a>. For specific
            examples of <code class="code">principal</code> key values, see <a href="./reference_policies_variables.html#principaltable">Principal key values</a>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is included in
                    the request context for all requests, including anonymous requests.</p>
            </li><li class="listitem">
                <p><b>Value type</b> – Single-valued</p>
            </li></ul></div>
     
        <h2 id="condition-keys-referer">aws:referer</h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
        <p>Use this key to compare who referred the request in the client browser with the
            referer that you specify in the policy. The <code class="code">aws:referer</code> request context
            value is provided by the caller in an HTTP header. The <code class="code">Referer</code> header is
            included in a web browser request when you select a link on a web page. The
                <code class="code">Referer</code> header contains the URL of the web page where the link was
            selected.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is included in
                    the request context only if the request to the AWS resource was invoked by
                    linking from a web page URL in the browser. This key is not included for
                    programmatic requests because it doesn't use a browser link to access the AWS
                    resource.</p>
            </li><li class="listitem">
                <p><b>Value type</b> – Single-valued</p>
            </li></ul></div>
        <p>For example, you can access an Amazon S3 object directly using a URL or using direct API
            invocation. For more information, see <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/example-bucket-policies.html#example-bucket-policies-use-case-4">Amazon S3 API operations directly using a web browser</a>. When you access an Amazon S3
            object from a URL that exists in a webpage, the URL of the source web page is in used in
                <code class="code">aws:referer</code>. When you access an Amazon S3 object by typing the URL into your
            browser, <code class="code">aws:referer</code> is not present. When you invoke the API directly,
                <code class="code">aws:referer</code> is also not present. You can use the
                <code class="code">aws:referer</code> condition key in a policy to allow requests made from a
            specific referer, such as a link on a web page in your company's domain. </p>
        <div class="awsdocs-note awsdocs-warning"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Warning</h6></div><div class="awsdocs-note-text"><p>This key should be used carefully. It is dangerous to include a publicly known
                referer header value. Unauthorized parties can use modified or custom browsers to
                provide any <code class="code">aws:referer</code> value that they choose. As a result,
                    <code class="code">aws:referer</code> should not be used to prevent unauthorized parties from
                making direct AWS requests. It is offered only to allow customers to protect their
                digital content, such as content stored in Amazon S3, from being referenced on
                unauthorized third-party sites.</p></div></div>
     
        <h2 id="condition-keys-requestedregion">aws:RequestedRegion</h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
        <p>Use this key to compare the AWS Region that was called in the request with the
            Region that you specify in the policy. You can use this global condition key to control
            which Regions can be requested. To view the AWS Regions for each service, see <a href="https://docs.aws.amazon.com/general/latest/gr/aws-service-information.html">Service endpoints and quotas</a>
            in the <em>Amazon Web Services General Reference</em>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is always
                    included in the request context.</p>
            </li><li class="listitem">
                <p><b>Value type</b> – Single-valued</p>
            </li></ul></div>
        <p>Some global services, such as IAM, have a single endpoint. Because this endpoint is
            physically located in the US East (N. Virginia) Region, IAM calls are always made to the
            us-east-1 Region. For example, if you create a policy that denies access to
            all services if the requested Region is not us-west-2, then IAM calls always fail. To
            view an example of how to work around this, see <a href="./reference_policies_elements_notaction.html">NotAction with Deny</a>. </p>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>The <code class="code">aws:RequestedRegion</code> condition key allows you to control which
                endpoint of a service is invoked but does not control the impact of the operation.
                Some services have cross-Region impacts. For example, Amazon S3 has API operations that
                control cross-Region replication. You can invoke
                    <code class="code">s3:PutBucketReplication</code> in one Region (which is affected by the
                    <code class="code">aws:RequestedRegion</code> condition key), but other Regions are affected
                based on the replications configuration settings. </p></div></div>
        <p>You can use this context key to limit access to AWS services within a given set of
            Regions. For example, the following policy allows a user to view all of the Amazon EC2
            instances in the AWS Management Console. However it only allows them to make changes to instances in
            Ireland (eu-west-1), London (eu-west-2), or Paris (eu-west-3).</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "InstanceConsoleReadOnly",
            "Effect": "Allow",
            "Action": [
                "ec2:Describe*",
                "ec2:Export*",
                "ec2:Get*",
                "ec2:Search*"
            ],
            "Resource": "*"
        },
        <span>{</span>
            "Sid": "InstanceWriteRegionRestricted",
            "Effect": "Allow",
            "Action": [
                "ec2:Associate*",
                "ec2:Import*",
                "ec2:Modify*",
                "ec2:Monitor*",
                "ec2:Reset*",
                "ec2:Run*",
                "ec2:Start*",
                "ec2:Stop*",
                "ec2:Terminate*"
            ],
            "Resource": "*",
            "Condition": <span>{</span>
                "StringEquals": <span>{</span>
                    "aws:RequestedRegion": [
                        "eu-west-1",
                        "eu-west-2",
                        "eu-west-3"
                    ]
                }
            }
        }
    ]
}       </code></pre>
     
        <h2 id="condition-keys-requesttag">aws:RequestTag/<em>tag-key</em></h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
        <p>Use this key to compare the tag key-value pair that was passed in the request with the
            tag pair that you specify in the policy. For example, you could check whether the
            request includes the tag key <code class="code">"Dept"</code> and that it has the value
                <code class="code">"Accounting"</code>. For more information, see <a href="./access_tags.html#access_tags_control-requests">Controlling access during AWS
                requests</a>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is included in
                    the request context when tag key-value pairs are passed in the request. When
                    multiple tags are passed in the request, there is one context key for each tag
                    key-value pair.</p>
            </li><li class="listitem">
                <p><b>Value type</b> – Single-valued</p>
            </li></ul></div>
        <p>This context key is formatted
                    <code class="code">"aws:RequestTag/<code class="replaceable">tag-key</code>":"<code class="replaceable">tag-value</code>"</code>
            where <code class="replaceable">tag-key</code> and <code class="replaceable">tag-value</code> are a
            tag key and value pair. Tag keys and values are not case-sensitive. This means that if
            you specify <code class="code">"aws:RequestTag/TagKey1": "Value1"</code> in the condition element of
            your policy, then the condition matches a request tag key named either
                <code class="code">TagKey1</code> or <code class="code">tagkey1</code>, but not both.</p>
        <p>This example shows that while the key is single-valued, you can still use multiple
            key-value pairs in a request if the keys are different.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": <span>{</span>
    "Effect": "Allow",
    "Action": "ec2:CreateTags",
    "Resource": "arn:aws:ec2:::instance/*",
    "Condition": <span>{</span>
      "StringEquals": <span>{</span>
        "aws:RequestTag/environment": [
          "preprod",
          "production"
        ],
        "aws:RequestTag/team": [
          "engineering"
        ]
      }
    }
  }
}
</code></pre>
     
        <h2 id="condition-keys-resourceaccount">aws:ResourceAccount</h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
        <p>Use this key to compare the requested resource owner's <a href="https://docs.aws.amazon.com/general/latest/gr/acct-identifiers.html">AWS account ID</a> with the
            resource account in the policy. You can then allow or deny access to that resource based
            on the account that owns the resource.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is always
                    included in the request context for most service actions. The following actions
                    don't support this key:</p>
                <div class="itemizedlist">
                     
                     
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>Amazon Elastic Block Store – All actions</p>
                    </li><li class="listitem">
                        <p>Amazon EC2</p>
                        <div class="itemizedlist">
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p><code class="code">ec2:AcceptTransitGatewayPeeringAttachment</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:AcceptVpcEndpointConnections</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:AcceptVpcPeeringConnection</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:CopySnapshot</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:CreateVolume</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:CreateVpcEndpoint</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:CreateVpcPeeringConnection</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:DeleteTransitGatewayPeeringAttachment</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:DeleteVpcPeeringConnection</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:RejectTransitGatewayPeeringAttachment</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:RejectVpcEndpointConnections</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:RejectVpcPeeringConnection</code></p>
                            </li></ul></div>
                    </li><li class="listitem">
                        <p>Amazon EventBridge</p>
                        <div class="itemizedlist">
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p><code class="code">events:PutEvents</code> – EventBridge
                                        <code class="code">PutEvents</code> calls on an event bus in another
                                    account, if that event bus was configured as a cross-account
                                    EventBridge target before March 2, 2023. For more information, see
                                        <a href="https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-cross-account.html#eb-receiving-events-from-another-account">Grant permissions to allow events from other AWS
                                        accounts</a> in the <em>Amazon EventBridge User
                                        Guide</em>.</p>
                            </li></ul></div>
                    </li><li class="listitem">
                        <p>Amazon Route 53</p>
                        <div class="itemizedlist">
                             
                             
                             
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p><code class="code">route53:AssociateVpcWithHostedZone</code></p>
                            </li><li class="listitem">
                                <p><code class="code">route53:CreateVPCAssociationAuthorization</code></p>
                            </li><li class="listitem">
                                <p><code class="code">route53:DeleteVPCAssociationAuthorization</code></p>
                            </li><li class="listitem">
                                <p><code class="code">route53:DisassociateVPCFromHostedZone</code></p>
                            </li><li class="listitem">
                                <p><code class="code">route53:ListHostedZonesByVPC</code></p>
                            </li></ul></div>
                    </li><li class="listitem">
                        <p>Amazon WorkSpaces</p>
                        <div class="itemizedlist">
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p><code class="code">workspaces:DescribeWorkspaceImages</code></p>
                            </li></ul></div>
                    </li></ul></div>
            </li><li class="listitem">
                <p><b>Value type</b> – Single-valued</p>
            </li></ul></div>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>For additional considerations for the above unsupported actions, see the <a href="https://github.com/aws-samples/data-perimeter-policy-examples" rel="noopener noreferrer" target="_blank"><span>Data
                    Perimeter Policy Examples</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> repository.</p></div></div>
        <p>This key is equal to the AWS account ID for the account with the resources evaluated
            in the request.</p>
        <p>For most resources in your account, the <a href="./reference_policies_elements_condition_operators.html#Conditions_ARN">ARN</a> contains the owner account ID for that
            resource. For certain resources, such as Amazon S3 buckets, the resource ARN does not include
            the account ID. The following two examples show the difference between a resource with
            an account ID in the ARN, and an Amazon S3 ARN without an account ID:</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><code class="code">arn:aws:iam::123456789012:role/AWSExampleRole</code> –
                    IAM role created and owned within the account 123456789012. </p>
            </li><li class="listitem">
                <p><code class="code">arn:aws:s3:::<code class="replaceable">DOC-EXAMPLE-BUCKET2</code></code> – Amazon S3 bucket created
                    and owned within the account <code class="code">111122223333</code>, not displayed
                    in the ARN.</p>
            </li></ul></div>
        <p>Use the AWS console, or API, or CLI, to find all of your resources and corresponding
            ARNs.</p>
        <p>You write a policy that denies permissions to resources based on the resource owner's
            account ID. For example, the following identity-based policy denies access to the
                <em>specified resource</em> if the resource does not belong to the
                <em>specified account</em>.</p>
        <p>To use this policy, replace the <em>italicized placeholder text</em> with
            your account information. </p>
        <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>This policy does not allow any actions. Instead, it uses the <code class="code">Deny</code>
                effect which explicitly denies access to all of the resources listed in the
                statement that do not belong to the listed account. Use this policy in combination
                with other policies that allow access to specific resources.</p></div></div>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Sid": "DenyInteractionWithResourcesNotInSpecificAccount",
      "Action": "<code class="replaceable">service</code>:*",
      "Effect": "Deny",
      "Resource": [
        "arn:aws:<code class="replaceable">service</code>:<code class="replaceable">region</code>:<code class="replaceable">account</code>:<code class="replaceable">*</code>"
      ],
      "Condition": <span>{</span>
        "StringNotEquals": <span>{</span>
          "aws:ResourceAccount": [
            "<code class="replaceable">account</code>"
          ]
        }
      }
    }
  ]
}</code></pre>
        <p>This policy denies access to all resources for a specific AWS service unless the
            specified AWS account owns the resource. </p>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Some AWS services require access to AWS owned resources that are hosted in
                another AWS account. Using <code class="code">aws:ResourceAccount</code> in your identity-based
                policies might impact your identity's ability to access these resources.</p></div></div>
        <p>Certain AWS services, such as AWS Data Exchange, rely on access to resources outside of your
            AWS accounts for normal operations. If you use the element
                <code class="code">aws:ResourceAccount</code> in your policies, include additional statements to
            create exemptions for those services. The example policy <a href="./reference_policies_examples_resource_account_data_exch.html">AWS: Deny access to
      Amazon S3 resources outside your account except AWS Data Exchange</a>
            demonstrates how to deny access based on the resource account while defining exceptions
            for service-owned resources.</p>
        <p>Use this policy example as a template for creating your own custom policies. Refer to
            your service <a href="https://docs.aws.amazon.com/index.html">documentation</a> for more
            information.</p>
     
        <h2 id="condition-keys-resourceorgid">aws:ResourceOrgID</h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
        <p>Use this key to compare the identifier of the organization in AWS Organizations to which the
            requested resource belongs with the identifier specified in the policy.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is included in
                    the request context only if the account that owns the resource is a member of an
                    organization. This global condition key does not support the following
                    actions:</p>
                <div class="itemizedlist">
                     
                     
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>Amazon Elastic Block Store – All actions</p>
                    </li><li class="listitem">
                        <p>Amazon EC2</p>
                        <div class="itemizedlist">
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p><code class="code">ec2:AcceptTransitGatewayPeeringAttachment</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:AcceptVpcEndpointConnections</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:AcceptVpcPeeringConnection</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:CopySnapshot</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:CreateVolume</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:CreateVpcEndpoint</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:CreateVpcPeeringConnection</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:DeleteTransitGatewayPeeringAttachment</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:DeleteVpcPeeringConnection</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:RejectTransitGatewayPeeringAttachment</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:RejectVpcEndpointConnections</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:RejectVpcPeeringConnection</code></p>
                            </li></ul></div>
                    </li><li class="listitem">
                        <p>Amazon EventBridge</p>
                        <div class="itemizedlist">
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p><code class="code">events:PutEvents</code> – EventBridge
                                        <code class="code">PutEvents</code> calls on an event bus in another
                                    account, if that event bus was configured as a cross-account
                                    EventBridge target before March 2, 2023. For more information, see
                                        <a href="https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-cross-account.html#eb-receiving-events-from-another-account">Grant permissions to allow events from other AWS
                                        accounts</a> in the <em>Amazon EventBridge User
                                        Guide</em>.</p>
                            </li></ul></div>
                    </li><li class="listitem">
                        <p>Amazon Route 53</p>
                        <div class="itemizedlist">
                             
                             
                             
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p><code class="code">route53:AssociateVpcWithHostedZone</code></p>
                            </li><li class="listitem">
                                <p><code class="code">route53:CreateVPCAssociationAuthorization</code></p>
                            </li><li class="listitem">
                                <p><code class="code">route53:DeleteVPCAssociationAuthorization</code></p>
                            </li><li class="listitem">
                                <p><code class="code">route53:DisassociateVPCFromHostedZone</code></p>
                            </li><li class="listitem">
                                <p><code class="code">route53:ListHostedZonesByVPC</code></p>
                            </li></ul></div>
                    </li><li class="listitem">
                        <p>Amazon WorkSpaces</p>
                        <div class="itemizedlist">
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p><code class="code">workspaces:DescribeWorkspaceImages</code></p>
                            </li></ul></div>
                    </li></ul></div>
            </li><li class="listitem">
                <p><b>Value type</b> – Single-valued</p>
            </li></ul></div>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>For additional considerations for the above unsupported actions, see the <a href="https://github.com/aws-samples/data-perimeter-policy-examples" rel="noopener noreferrer" target="_blank"><span>Data
                    Perimeter Policy Examples</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> repository.</p></div></div>
        <p>This global key returns the resource organization ID for a given request. It allows
            you to create rules that apply to all resources in an organization that are specified in
            the <code class="code">Resource</code> element of an <a href="./access_policies_identity-vs-resource.html">identity-based policy</a>. You can
            specify the <a href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_org_details.html">organization
                ID</a> in the condition element. When you add and remove accounts, policies that
            include the <code class="code">aws:ResourceOrgID</code> key automatically include the correct
            accounts and you don't have to manually update it.</p>
        <p>For example, the following policy prevents the principal from adding objects to the
                <code class="code">policy-genius-dev</code> resource unless the Amazon S3 resource belongs to the same
            organization as the principal making the request.</p>
        <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>This policy does not allow any actions. Instead, it uses the <code class="code">Deny</code>
                effect which explicitly denies access to all of the resources listed in the
                statement that do not belong to the listed account. Use this policy in combination
                with other policies that allow access to specific resources.</p></div></div>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": <span>{</span>
    "Sid": "DenyPutObjectToS3ResourcesOutsideMyOrganization",
    "Effect": "Deny",
    "Action": "s3:PutObject",
    "Resource": "arn:<code class="replaceable">partition</code>:s3:::policy-genius-dev/*",
    "Condition": <span>{</span>
      "StringNotEquals": <span>{</span>
        "aws:ResourceOrgID": "$<span>{</span>aws:PrincipalOrgID}"
      }
    }
  }
}</code></pre>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Some AWS services require access to AWS owned resources that are hosted in
                another AWS account. Using <code class="code">aws:ResourceOrgID</code> in your identity-based
                policies might impact your identity's ability to access these resources.</p></div></div>
        
        <p>Certain AWS services, such as AWS Data Exchange, rely on access to
            resources outside of your AWS accounts for normal operations. If you use the
                <code class="code">aws:ResourceOrgID</code> key in your policies, include additional statements
            to create exemptions for those services. The example policy <a href="./reference_policies_examples_resource_account_data_exch.html">AWS: Deny access to
      Amazon S3 resources outside your account except AWS Data Exchange</a>
            demonstrates how to deny access based on the resource account while defining exceptions
            for service-owned resources. You can create a similar policy to restrict access to
            resources within your organization using the <code class="code">aws:ResourceOrgID</code> key, while
            accounting for service-owned resources.</p>
        <p>Use this policy example as a template for creating your own
            custom policies. Refer to your service <a href="https://docs.aws.amazon.com/index.html">documentation</a> for more information.</p>
        
        <p>In the following video, learn
            more about how you might use the <code class="code">aws:ResourceOrgID</code> condition key in a
            policy.</p>
        <div class="mediaobject">
             
                <iframe width="720" height="330" frameborder="0" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" sandbox="allow-scripts allow-same-origin allow-popups" src="https://www.youtube-nocookie.com/embed/cWVW0xAiWwc"></iframe>
             
             
        </div>
        
        
        
     
        <h2 id="condition-keys-resourceorgpaths">aws:ResourceOrgPaths</h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
        <p>Use this key to compare the AWS Organizations path for the accessed resource to the path in
            the policy. In a policy, this condition key ensures that the resource belongs to an
            account member within the specified organization root or organizational units (OUs) in
            AWS Organizations. An AWS Organizations path is a text representation of the structure of an
            Organizations entity. For more information about using and understanding paths, see
                <a href="./access_policies_access-advisor-view-data-orgs.html#access_policies_access-advisor-viewing-orgs-entity-path">Understand the
            AWS Organizations entity path</a>
        </p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is included in
                    the request context only if the account that owns the resource is a member of an
                    organization. This global condition key does not support the following
                    actions:</p>
                <div class="itemizedlist">
                     
                     
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>Amazon Elastic Block Store – All actions</p>
                    </li><li class="listitem">
                        <p>Amazon EC2</p>
                        <div class="itemizedlist">
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p><code class="code">ec2:AcceptTransitGatewayPeeringAttachment</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:AcceptVpcEndpointConnections</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:AcceptVpcPeeringConnection</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:CopySnapshot</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:CreateVolume</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:CreateVpcEndpoint</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:CreateVpcPeeringConnection</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:DeleteTransitGatewayPeeringAttachment</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:DeleteVpcPeeringConnection</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:RejectTransitGatewayPeeringAttachment</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:RejectVpcEndpointConnections</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:RejectVpcPeeringConnection</code></p>
                            </li></ul></div>
                    </li><li class="listitem">
                        <p>Amazon EventBridge</p>
                        <div class="itemizedlist">
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p><code class="code">events:PutEvents</code> – EventBridge
                                        <code class="code">PutEvents</code> calls on an event bus in another
                                    account, if that event bus was configured as a cross-account
                                    EventBridge target before March 2, 2023. For more information, see
                                        <a href="https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-cross-account.html#eb-receiving-events-from-another-account">Grant permissions to allow events from other AWS
                                        accounts</a> in the <em>Amazon EventBridge User
                                        Guide</em>.</p>
                            </li></ul></div>
                    </li><li class="listitem">
                        <p>Amazon Route 53</p>
                        <div class="itemizedlist">
                             
                             
                             
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p><code class="code">route53:AssociateVpcWithHostedZone</code></p>
                            </li><li class="listitem">
                                <p><code class="code">route53:CreateVPCAssociationAuthorization</code></p>
                            </li><li class="listitem">
                                <p><code class="code">route53:DeleteVPCAssociationAuthorization</code></p>
                            </li><li class="listitem">
                                <p><code class="code">route53:DisassociateVPCFromHostedZone</code></p>
                            </li><li class="listitem">
                                <p><code class="code">route53:ListHostedZonesByVPC</code></p>
                            </li></ul></div>
                    </li><li class="listitem">
                        <p>Amazon WorkSpaces</p>
                        <div class="itemizedlist">
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p><code class="code">workspaces:DescribeWorkspaceImages</code></p>
                            </li></ul></div>
                    </li></ul></div>
            </li><li class="listitem">
                <p><b>Value type</b> – Multivalued</p>
            </li></ul></div>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>For additional considerations for the above unsupported actions, see the <a href="https://github.com/aws-samples/data-perimeter-policy-examples" rel="noopener noreferrer" target="_blank"><span>Data
                    Perimeter Policy Examples</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> repository.</p></div></div>
        <p><code class="code">aws:ResourceOrgPaths</code> is a multivalued condition key. Multivalued keys can
            have multiple values in the request context. You must use the <code class="code">ForAnyValue</code>
            or <code class="code">ForAllValues</code> set operators with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string
                condition operators</a> for this key. For more information about multivalued
            condition keys, see <a href="./reference_policies_multi-value-conditions.html#reference_policies_multi-key-or-value-conditions">Using multiple keys and
            values</a>.</p>
        <p>For example, the following condition returns <code class="code">True</code> for resources that
            belong to the organization <code class="code">o-a1b2c3d4e5</code>. When you include a wildcard, you
            must use the <a href="./reference_policies_elements_condition_operators.html">StringLike</a> condition operator.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">"Condition": <span>{</span> 
      "ForAnyValue:StringLike": <span>{</span>
             "aws:ResourceOrgPaths":["o-a1b2c3d4e5/*"]
   }
}</code></pre>
        <p>The following condition returns <code class="code">True</code> for resources with the OU ID
                <code class="code">ou-ab12-11111111</code>. It will match resources owned by accounts attached to
            the OU ou-ab12-11111111 or any of the child OUs.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">"Condition": <span>{</span> "ForAnyValue:StringLike" : <span>{</span>
     "aws:ResourceOrgPaths":["o-a1b2c3d4e5/r-ab12/ou-ab12-11111111/*"]
}}</code></pre>
        <p>The following condition returns <code class="code">True</code> for resources owned by accounts
            attached directly to the OU ID <code class="code">ou-ab12-22222222</code>, but not the child OUs. The
            following example uses the <a href="./reference_policies_elements_condition_operators.html">StringEquals</a>
            condition operator to specify the exact match requirement for the OU ID and not a
            wildcard match.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">"Condition": <span>{</span> "ForAnyValue:StringEquals" : <span>{</span>
     "aws:ResourceOrgPaths":["o-a1b2c3d4e5/r-ab12/ou-ab12-11111111/ou-ab12-22222222/"]
}}</code></pre>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Some AWS services require access to AWS owned resources that are hosted in
                another AWS account. Using <code class="code">aws:ResourceOrgPaths</code> in your
                identity-based policies might impact your identity's ability to access these
                resources.</p></div></div>
        
        <p>Certain AWS services, such as AWS Data Exchange, rely on access to
            resources outside of your AWS accounts for normal operations. If you use the
                <code class="code">aws:ResourceOrgPaths</code> key in your policies, include additional
            statements to create exemptions for those services. The example policy <a href="./reference_policies_examples_resource_account_data_exch.html">AWS: Deny access to
      Amazon S3 resources outside your account except AWS Data Exchange</a>
            demonstrates how to deny access based on the resource account while defining exceptions
            for service-owned resources. You can create a similar policy to restrict access to
            resources within an organizational unit (OU) using the <code class="code">aws:ResourceOrgPaths</code>
            key, while accounting for service-owned resources.</p>
        <p>Use this policy example as a template for creating your own
            custom policies. Refer to your service <a href="https://docs.aws.amazon.com/index.html">documentation</a> for more information.</p>
     
        <h2 id="condition-keys-resourcetag">aws:ResourceTag/<em>tag-key</em></h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
        <p>Use this key to compare the tag key-value pair that you specify in the policy with the
            key-value pair attached to the resource. For example, you could require that access to a
            resource is allowed only if the resource has the attached tag key <code class="code">"Dept"</code>
            with the value <code class="code">"Marketing"</code>. For more information, see <a href="./access_tags.html#access_tags_control-resources">Controlling access to AWS
                resources</a>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is included in
                    the request context when the requested resource already has attached tags or in
                    requests that create a resource with an attached tag. This key is returned only
                    for resources that <a href="./reference_aws-services-that-work-with-iam.html">support authorization based on tags</a>. There is one context key for
                    each tag key-value pair.</p>
            </li><li class="listitem">
                <p><b>Value type</b> – Single-valued</p>
            </li></ul></div>
        <p>This context key is formatted
                    <code class="code">"aws:ResourceTag/<code class="replaceable">tag-key</code>":"<code class="replaceable">tag-value</code>"</code>
            where <code class="replaceable">tag-key</code> and <code class="replaceable">tag-value</code> are a
            tag key and value pair. Tag keys and values are not case-sensitive. This means that if
            you specify <code class="code">"aws:ResourceTag/TagKey1": "Value1"</code> in the condition element of
            your policy, then the condition matches a resource tag key named either
                <code class="code">TagKey1</code> or <code class="code">tagkey1</code>, but not both.</p>
        <p>For examples of using the <code class="code">aws:ResourceTag</code> key to control access to IAM
            resources, see <a href="./access_tags.html#access_tags_control-resources">Controlling access to AWS
                resources</a>.</p>
        <p>For examples of using the <code class="code">aws:ResourceTag</code> key to control access to other
            AWS resources, see <a href="./access_tags.html">Controlling access to AWS resources using tags</a>.</p>
        <p>For a tutorial on using the <code class="code">aws:ResourceTag</code> condition key for attribute
            based access control (ABAC), see <a href="./tutorial_attribute-based-access-control.html">IAM tutorial: Define permissions to
         access AWS resources based on tags</a>.</p>
     
        <h2 id="condition-keys-securetransport">aws:SecureTransport</h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_Boolean">Boolean operators</a>.</p>
        <p>Use this key to check whether the request was sent using SSL. The request context
            returns <code class="code">true</code> or <code class="code">false</code>. In a policy, you can allow specific
            actions only if the request is sent using SSL.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is always
                    included in the request context.</p>
            </li><li class="listitem">
                <p><b>Value type</b> – Single-valued</p>
            </li></ul></div>
     
        <h2 id="condition-keys-sourceaccount">aws:SourceAccount</h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
        <p>Use this key to compare the account ID of the resource making a service-to-service
            request with the account ID that you specify in the policy. </p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is included in
                    the request context only if accessing a resource triggers an AWS service to
                    call another service on behalf of the resource owner. The calling service must
                    pass the resource account ID of the source to the called service. This account
                    ID includes the source account ID.</p>
            </li><li class="listitem">
                <p><b>Value type</b> – Single-valued</p>
            </li></ul></div>
        <p>You can use this condition key to prevent an AWS service from being used as a <a href="./confused-deputy.html">confused deputy</a> during transactions between
            services. Set the value of this condition key to the account of the resource in the
            request. For example, when an Amazon S3 bucket update triggers an Amazon SNS topic post, the Amazon S3
            service invokes the <code class="code">sns:Publish</code> API operation. In the policy that allows
            the <code class="code">sns:Publish</code> operation, set the value of the condition key to the
            account ID of the Amazon S3 bucket. For information about how and when these condition keys
            are recommended, see the documentation for the AWS services you are using.</p>
     
        <h2 id="condition-keys-sourcearn">aws:SourceArn</h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_ARN">ARN operators</a> and <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>. AWS recommends that you use
            ARN operators instead of string operators when comparing ARNs.</p>
        <p>Use this key to compare the <a href="./reference_identifiers.html#identifiers-arns">Amazon Resource Name
                (ARN)</a> of the resource making a service-to-service request with the ARN that
            you specify in the policy. The source's ARN includes the account ID, so it is not
            necessary to use <code class="code">aws:SourceAccount</code> with <code class="code">aws:SourceArn</code>.</p>
        <p>This key does not work with the ARN of the principal making the request. Instead, use
                <a href="#condition-keys-principalarn">aws:PrincipalArn</a>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is included in
                    the request context only if accessing a resource triggers an AWS service to
                    call another service on behalf of the resource owner. The calling service must
                    pass the ARN of the original resource to the called service.</p>
            </li><li class="listitem">
                <p><b>Value type</b> – Single-valued</p>
            </li></ul></div>
        <p>You can use this condition key to prevent an AWS service from being used as a <a href="./confused-deputy.html">confused deputy</a> during transactions between
            services. Set the value of this condition key to the ARN of the resource in the request.
            For example, when an Amazon S3 bucket update triggers an Amazon SNS topic post, the Amazon S3 service
            invokes the <code class="code">sns:Publish</code> API operation. In the policy that allows the
                <code class="code">sns:Publish</code> operation, set the value of the condition key to the ARN of
            the Amazon S3 bucket. For information about how and when these condition keys are
            recommended, see the documentation for the AWS services you are using.</p>
     
        <h2 id="condition-keys-sourceidentity">aws:SourceIdentity</h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
        <p>Use this key to compare the source identity that was set by the principal with the
            source identity that you specify in the policy. </p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is included in
                    the request context after a source identity has been set when a role is assumed
                    using any AWS STS assume-role CLI command, or AWS STS <code class="code">AssumeRole</code> API
                    operation.</p>
            </li><li class="listitem">
                <p><b>Value type</b> – Single-valued</p>
            </li></ul></div>
        <p>You can use this key in a policy to allow actions in AWS by principals that have set
            a source identity when assuming a role. Activity for the role's specified source
            identity appears in <a href="./cloudtrail-integration.html#cloudtrail-integration_signin-tempcreds">AWS CloudTrail</a>. This makes it easier for administrators to determine who or what
            performed actions with a role in AWS.</p>
        <p>Unlike <a href="./reference_policies_iam-condition-keys.html#ck_rolesessionname">sts:RoleSessionName</a>,
            after the source identity is set, the value cannot be changed. It is present in the
            request context for all actions taken by the role. The value persists into subsequent
            role sessions when you use the session credentials to assume another role. Assuming one
            role from another is called <a href="./id_roles_terms-and-concepts.html#iam-term-role-chaining">role chaining</a>. </p>
        <p>The <a href="./reference_policies_iam-condition-keys.html#ck_sourceidentity">sts:SourceIdentity</a> key is
            present in the request when the principal initially sets a source identity while
            assuming a role using any AWS STS assume-role CLI command, or AWS STS
                <code class="code">AssumeRole</code> API operation. The <code class="code">aws:SourceIdentity</code> key is
            present in the request for any actions that are taken with a role session that has a
            source identity set.</p>
        <p>The following role trust policy for <code class="code">CriticalRole</code> in account
                <code class="code">111122223333</code> contains a condition for
                <code class="code">aws:SourceIdentity</code> that prevents a principal without a source identity
            that is set to Saanvi or Diego from assuming the role.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "AssumeRoleIfSourceIdentity",
            "Effect": "Allow",
            "Principal": <span>{</span>"AWS": "arn:aws:iam::123456789012:role/CriticalRole"},
            "Action": [
                "sts:AssumeRole",
                "sts:SetSourceIdentity"
            ],
            "Condition": <span>{</span>
                "StringLike": <span>{</span>
                    "aws:SourceIdentity": ["Saanvi","Diego"]
                }
            }
        }
    ]
}
</code></pre>
        <p>To learn more about using source identity information, see <a href="./id_credentials_temp_control-access_monitor.html">Monitor and control actions
            taken with assumed roles</a>.</p>
     
        <h2 id="condition-keys-sourceip">aws:SourceIp</h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_IPAddress">IP address operators</a>.</p>
        <p>Use this key to compare the requester's IP address with the IP address that you
            specify in the policy. The <code class="code">aws:SourceIp</code> condition key can only be used for
            public IP address ranges.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is included in
                    the request context, except when the requester uses a VPC endpoint to make the
                    request.</p>
            </li><li class="listitem">
                <p><b>Value type</b> – Single-valued</p>
            </li></ul></div>
        <p>The <code class="code">aws:SourceIp</code> condition key can be used in a policy to allow
            principals to make requests only from within a specified IP range. However, this policy
            denies access if an AWS service makes calls on the principal's behalf. In this case,
            you can use <code class="code">aws:SourceIp</code> with the <code class="code"><a href="#condition-keys-viaawsservice">aws:ViaAWSService</a></code> key to ensure that the
            source IP restriction applies only to requests made directly by a principal. </p>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>
                <code class="code">aws:SourceIp</code> supports both IPv4 and IPv6 address or range of IP
                addresses. For details, see <a href="https://docs.aws.amazon.com/marketplace/latest/buyerguide/buyer-security-ipv6-upgrade.html">Upgrade
                    IAM policies to IPv6</a>.</p></div></div>
        <p>For example, you can attach the following policy to an IAM user. This policy allows
            the user to put an object into the <code class="code"><code class="replaceable">DOC-EXAMPLE-BUCKET3</code></code> Amazon S3 bucket
            directly if they make the call from the specified IP address. However, if the user makes
            another request that causes a service to call Amazon S3, the IP address restriction does not
            apply. The <code class="code">PrincipalPutObjectIfIpAddress</code> statement restricts the IP address
            only if the request is not made by a service. The <code class="code">ServicePutObject</code>
            statement allows the operation without IP address restriction if the request is made by
            a service.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "PrincipalPutObjectIfIpAddress",
            "Effect": "Allow",
            "Action": "s3:PutObject",
            "Resource": "arn:aws:s3:::<code class="replaceable">DOC-EXAMPLE-BUCKET3</code>/*",
            "Condition": <span>{</span>
                "Bool": <span>{</span>"aws:ViaAWSService": "false"},
                "IpAddress": <span>{</span>"aws:SourceIp": "<code class="replaceable">203.0.113.0</code>"}
            }
        },
        <span>{</span>
            "Sid": "ServicePutObject",
            "Effect": "Allow",
            "Action": "s3:PutObject",
            "Resource": "arn:aws:s3:::<code class="replaceable">DOC-EXAMPLE-BUCKET</code>/*",
            "Condition": <span>{</span>
                "Bool": <span>{</span>"aws:ViaAWSService": "true"}
            }
        }
    ]
}</code></pre>
        <p>If the request comes from a host that uses an Amazon VPC endpoint, then the
                <code class="code">aws:SourceIp</code> key is not available. You should instead use a
            VPC-specific key such as aws:VpcSourceIp.
            For more information about using VPC endpoints, see <a href="https://docs.aws.amazon.com/vpc/latest/privatelink/vpc-endpoints-iam.html">Identity and access management for
                VPC endpoints and VPC endpoint services</a> in the
                <em>AWS PrivateLink Guide</em>.</p>
     
        <h2 id="condition-keys-sourcevpc">aws:SourceVpc</h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
        <p>Use this key to check whether the request comes from the VPC that you specify in the
            policy. In a policy, you can use this key to allow access to only a specific VPC. For
            more information, see <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/example-bucket-policies-vpc-endpoint.html#example-bucket-policies-restrict-access-vpc">Restricting Access to a Specific VPC</a> in the
                <em>Amazon Simple Storage Service User Guide</em>. </p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is included in
                    the request context only if the requester uses a VPC endpoint to make the
                    request.</p>
            </li><li class="listitem">
                <p><b>Value type</b> – Single-valued</p>
            </li></ul></div>
     
        <h2 id="condition-keys-sourcevpce">aws:SourceVpce</h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
        <p>Use this key to compare the VPC endpoint identifier of the request with the endpoint
            ID that you specify in the policy. In a policy, you can use this key to restrict access
            to a specific VPC endpoint. For more information, see <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/example-bucket-policies-vpc-endpoint.html#example-bucket-policies-restrict-access-vpc-endpoint">Restricting Access to a Specific VPC Endpoint</a> in the
                <em>Amazon Simple Storage Service User Guide</em>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is included in
                    the request context only if the requester uses a VPC endpoint to make the
                    request.</p>
            </li><li class="listitem">
                <p><b>Value type</b> – Single-valued</p>
            </li></ul></div>
     
        <h2 id="condition-keys-tagkeys">aws:TagKeys</h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
        <p>Use this key to compare the tag keys in a request with the keys that you specify in
            the policy. We recommend that when you use policies to control access using tags, use
            the <code class="code">aws:TagKeys</code> condition key to define what tag keys are allowed. For
            example policies and more information, see <a href="./access_tags.html#access_tags_control-tag-keys">Controlling access based on tag
                keys</a>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is included in
                    the request context if the operation supports passing tags in the
                    request.</p>
            </li><li class="listitem">
                <p><b>Value type</b> – Multivalued</p>
            </li></ul></div>
        <p>This context key is formatted
                <code class="code">"aws:TagKeys":"<code class="replaceable">tag-key</code>"</code> where
                <code class="replaceable">tag-key</code> is a list of tag keys without values (for
            example, <code class="code">["Dept","Cost-Center"]</code>).</p>
        <p>Because you can include multiple tag key-value pairs in a request, the request content
            could be a <a href="./reference_policies_multi-value-conditions.html">multivalued</a>
            request. In this case, you must use the <code class="code">ForAllValues</code> or
                <code class="code">ForAnyValue</code> set operators. For more information, see <a href="./reference_policies_multi-value-conditions.html#reference_policies_multi-key-or-value-conditions">Using multiple keys and
            values</a>.</p>
        <p>Some services support tagging with resource operations, such as creating, modifying,
            or deleting a resource. To allow tagging and operations as a single call, you must
            create a policy that includes both the tagging action and the resource-modifying action.
            You can then use the <code class="code">aws:TagKeys</code> condition key to enforce using specific
            tag keys in the request. For example, to limit tags when someone creates an Amazon EC2
            snapshot, you must include the <code class="code">ec2:CreateSnapshot</code> creation action <em><b>and</b></em> the
                <code class="code">ec2:CreateTags</code> tagging action in the policy. To view a policy for this
            scenario that uses <code class="code">aws:TagKeys</code>, see <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ExamplePolicies_EC2.html#iam-creating-snapshot-with-tags">Creating a Snapshot with Tags</a> in the <em>Amazon EC2 User Guide for Linux Instances</em>.
        </p>
     
        <h2 id="condition-keys-tokenissuetime">aws:TokenIssueTime</h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_Date">date operators</a>.</p>
        <p>Use this key to compare the date and time that temporary security credentials were
            issued with the date and time that you specify in the policy. </p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is included in
                    the request context only when the principal uses temporary credentials to make
                    the request. The key is not present in AWS CLI, AWS API, or AWS SDK requests
                    that are made using access keys.</p>
            </li><li class="listitem">
                <p><b>Value type</b> – Single-valued</p>
            </li></ul></div>
        <p>To learn which services support using temporary credentials, see <a href="./reference_aws-services-that-work-with-iam.html">AWS services that work with
      IAM</a>.</p>
     
        <h2 id="condition-keys-useragent">aws:UserAgent</h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
        <p>Use this key to compare the requester's client application with the application that
            you specify in the policy.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is always
                    included in the request context.</p>
            </li><li class="listitem">
                <p><b>Value type</b> – Single-valued</p>
            </li></ul></div>
        <div class="awsdocs-note awsdocs-warning"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Warning</h6></div><div class="awsdocs-note-text"><p>This key should be used carefully. Since the <code class="code">aws:UserAgent</code> value is
                provided by the caller in an HTTP header, unauthorized parties can use modified or
                custom browsers to provide any <code class="code">aws:UserAgent</code> value that they choose. As
                a result, <code class="code">aws:UserAgent</code> should not be used to prevent unauthorized
                parties from making direct AWS requests. You can use it to allow only specific
                client applications, and only after testing your policy.</p></div></div>
     
        <h2 id="condition-keys-userid">aws:userid</h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
        <p>Use this key to compare the requester's principal identifier with the ID that you
            specify in the policy. For IAM users, the request context value is the user ID. For
            IAM roles, this value format can vary. For details about how the information appears
            for different principals, see <a href="./reference_policies_elements_principal.html#Principal_specifying">Specifying a principal</a>. For specific examples of
                <code class="code">principal</code> key values, see <a href="./reference_policies_variables.html#principaltable">Principal key values</a>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is included in
                    the request context for all requests, including anonymous requests.</p>
            </li><li class="listitem">
                <p><b>Value type</b> – Single-valued</p>
            </li></ul></div>
     
        <h2 id="condition-keys-username">aws:username</h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_String">string operators</a>.</p>
        <p>Use this key to compare the requester's user name with the user name that you specify
            in the policy. For details about how the information appears for different principals,
            see <a href="./reference_policies_elements_principal.html#Principal_specifying">Specifying a principal</a>. For
            specific examples of <code class="code">principal</code> key values, see <a href="./reference_policies_variables.html#principaltable">Principal key values</a>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is always
                    included in the request context for IAM users. Anonymous requests and requests
                    that are made using the AWS account root user or IAM roles do not include this key.
                    Requests made using IAM Identity Center credentials do not include this key in the
                    context.</p>
            </li><li class="listitem">
                <p><b>Value type</b> – Single-valued</p>
            </li></ul></div>
     
        <h2 id="condition-keys-viaawsservice">aws:ViaAWSService</h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_Boolean">Boolean operators</a>.</p>
        <p>Use this key to check whether an AWS service makes a request to another service on
            your behalf.</p>
        <p>The request context key returns <code class="code">true</code> when a service uses the credentials
            of an IAM principal to make a request on behalf of the principal. The context key
            returns <code class="code">false</code> if the service uses a <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-role">service
                role</a> or <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-linked-role">service-linked role</a> to make a call on the principal's behalf. The request
            context key also returns <code class="code">false</code> when the principal makes the call
            directly.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is always
                    included in the request context.</p>
            </li><li class="listitem">
                <p><b>Value type</b> – Single-valued</p>
            </li></ul></div>
        <p>You can use this condition key to allow or deny access based on whether a request was
            made by a service. To view an example policy, see <a href="./reference_policies_examples_aws_deny-ip.html">AWS: Denies access to AWS based on
      the source IP</a>.</p>
     
        <h2 id="condition-keys-vpcsourceip">aws:VpcSourceIp</h2>
        <p>Works with <a href="./reference_policies_elements_condition_operators.html#Conditions_IPAddress">IP address operators</a>.</p>
        <p>Use this key to compare the IP address from which a request was made with the IP
            address that you specify in the policy. In a policy, the key matches only if the request
            originates from the specified IP address and it goes through a VPC endpoint.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – This key is included in
                    the request context only if the request is made using a VPC endpoint.</p>
            </li><li class="listitem">
                <p><b>Value type</b> – Single-valued</p>
            </li></ul></div>
        <p>For more information, see <a href="https://docs.aws.amazon.com/vpc/latest/userguide/vpc-endpoints-access.html">Controlling Access to Services with VPC Endpoints</a> in the
                <em>Amazon VPC User Guide</em>.</p>
     
        <h2 id="condition-keys-other">Other cross-service condition keys</h2>
        <p>Global condition keys are condition keys with an <code class="code">aws:</code> prefix. Individual
            services can create their own condition keys. These service-specific condition keys
            include a prefix that matches the name of the service, such as <code class="code">iam:</code> or
                <code class="code">sts:</code>.</p>
        <p>Services can create service-specific keys that are available in the request context
            for other services. These keys are available across multiple services, but are not
            global condition keys. For example, AWS STS supports <a href="./reference_policies_iam-condition-keys.html#condition-keys-saml">SAML-based federation condition keys</a>. These keys are available when a user
            who was federated using SAML performs AWS operations in other services. Other examples
            include <code class="code"><a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html#ck_saml-namequalifier">saml:namequalifier</a></code> and <code class="code"><a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-policy-structure.html#amazon-ec2-keys">ec2:SourceInstanceArn</a></code>.</p>
        <p>To view the service-specific condition keys for a service, see <a href="https://docs.aws.amazon.com/service-authorization/latest/reference/reference_policies_actions-resources-contextkeys.html">Actions, Resources, and Condition Keys for AWS Services</a> and choose the
            service whose keys you want to view.</p>
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./access_policies_job-functions_create-policies.html">Creating roles and attaching
        policies (console)</div><div id="next" class="next-link" accesskey="n" href="./reference_policies_iam-condition-keys.html">IAM condition keys</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/reference_policies_condition-keys.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/reference_policies_condition-keys.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>