<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Refining permissions in AWS using last accessed information - AWS Identity and Access Management</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="access_policies_access-advisor" /><meta name="default_state" content="access_policies_access-advisor" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_access-advisor.html" /><meta name="description" content="Use IAM last accessed information for services and actions to provide only necessary permissions." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS Identity and Access Management" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Control access to your AWS resources with user identity (authentication) and with policies that define specific permissions (authorization)." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_access-advisor.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/access_policies_access-advisor.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/access_policies_access-advisor.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/access_policies_access-advisor.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/access_policies_access-advisor.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_access-advisor.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_access-advisor.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/access_policies_access-advisor.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/access_policies_access-advisor.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/access_policies_access-advisor.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/access_policies_access-advisor.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/access_policies_access-advisor.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/access_policies_access-advisor.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/access_policies_access-advisor.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/access_policies_access-advisor.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/access_policies_access-advisor.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/access_policies_access-advisor.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/access_policies_access-advisor.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/access_policies_access-advisor.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/IAM/latest/UserGuide/access_policies_access-advisor.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/access_policies_access-advisor.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_access-advisor.html" hreflang="x-default" /><meta name="feedback-item" content="IAM" /><meta name="this_doc_product" content="AWS Identity and Access Management" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'iam'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="Refining permissions in AWS using last accessed information" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Refining permissions in AWS using last accessed information - AWS Identity and Access Management</title><meta name="pdf" content="/pdfs/IAM/latest/UserGuide/iam-ug.pdf#access_policies_access-advisor" /><meta name="github" content="https://github.com/awsdocs/iam-user-guide/tree/main/doc_source/access_policies_access-advisor.md" /><meta name="rss" content="aws-iam-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=76" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/access_policies_access-advisor.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/access_policies_access-advisor.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/access_policies_access-advisor.html" /><meta name="keywords" content="IAM,AWS Identity and Access Management,IAM user,user,IAM group,group,IAM role,role,permission policy,trust policy,policy,access key,password" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS Identity and Access Management",
        "item" : "https://docs.aws.amazon.com/iam/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Access management for AWS resources",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/access.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Managing IAM policies",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_manage.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Refining permissions in AWS using last accessed information",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_manage.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/IAM/latest/UserGuide/iam-ug.pdf#access_policies_access-advisor" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a href="https://github.com/awsdocs/iam-user-guide/tree/main/doc_source/access_policies_access-advisor.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/iam/index.html">AWS Identity and Access Management</a><a href="introduction.html">User Guide</a></div><div id="page-toc-src"><a href="#access_policies_access-advisor-data-types">Last accessed information types
            for IAM</a><a href="#access_policies_access-advisor-orgs">Last accessed information for
            AWS Organizations</a><a href="#access_policies_access-advisor-know">Things to know about last accessed
            information</a><a href="#access_policies_access-advisor-permissions">Permissions required</a><a href="#access_policies_access-advisor-troubleshooting">Troubleshooting activity
            for IAM and Organizations entities</a><a href="#access-advisor_tracking-period">Where AWS tracks last accessed
            information</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="access_policies_access-advisor">Refining permissions in AWS using last
         accessed information</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>As an administrator, you might grant permissions to entities (users or roles) beyond what
      they require. IAM provides last accessed information to help you identify unused permissions
      so that you can remove them. You can use last accessed information to refine your policies and
      allow access to only the services and actions that your entities use. This helps you to better
      adhere to the <a href="./best-practices.html#grant-least-privilege">best
         practice of least privilege.</a> You can view last accessed information for entities or
      policies that exist in IAM or AWS Organizations. </p><div class="highlights"><h6>Topics</h6><ul><li><a href="#access_policies_access-advisor-data-types">Last accessed information types
            for IAM</a></li><li><a href="#access_policies_access-advisor-orgs">Last accessed information for
            AWS Organizations</a></li><li><a href="#access_policies_access-advisor-know">Things to know about last accessed
            information</a></li><li><a href="#access_policies_access-advisor-permissions">Permissions required</a></li><li><a href="#access_policies_access-advisor-troubleshooting">Troubleshooting activity
            for IAM and Organizations entities</a></li><li><a href="#access-advisor_tracking-period">Where AWS tracks last accessed
            information</a></li><li><a href="./access_policies_access-advisor-view-data.html">Viewing last accessed information
         for IAM</a></li><li><a href="./access_policies_access-advisor-view-data-orgs.html">Viewing last accessed
         information for Organizations</a></li><li><a href="./access_policies_access-advisor-example-scenarios.html">Example scenarios for using
         last accessed information</a></li></ul></div>
      <h2 id="access_policies_access-advisor-data-types">Last accessed information types
            for IAM</h2>
      <p>You can view two types of last accessed information for IAM entities: allowed AWS
         service information and allowed action information. The information includes the date and
         time when the attempt was made. Action last accessed information is available for Amazon EC2,
         IAM, Lambda, and Amazon S3 management actions. Management actions include creation, deletion,
         and modification actions. To learn more about how to view last accessed information for
         IAM, see <a href="./access_policies_access-advisor-view-data.html">Viewing last accessed information
         for IAM</a>.</p>
      <p>For example scenarios for using last accessed information to make decisions about the
         permissions that you grant to your IAM entities, see <a href="./access_policies_access-advisor-example-scenarios.html">Example scenarios for using
         last accessed information</a>.</p>
      <p>To learn more about how the information for management actions is provided, see <a href="#access_policies_access-advisor-know">Things to know about last accessed
            information</a>.</p>
    
      <h2 id="access_policies_access-advisor-orgs">Last accessed information for
            AWS Organizations</h2>
      <p>If you sign in using management account credentials, you can view service last accessed
         information for an AWS Organizations entity or policy in your organization. AWS Organizations entities
         include the organization root, organizational units (OUs), or accounts. Last accessed
         information for AWS Organizations includes information about services that are allowed by a service
         control policy (SCP). The information indicates which principals in an organization or
         account last attempted to access the service and when. To learn more about the report and
         how to view last accessed information for AWS Organizations, see <a href="./access_policies_access-advisor-view-data-orgs.html">Viewing last accessed
         information for Organizations</a>.</p>
      <p>For example scenarios for using last accessed information to make decisions about the
         permissions that you grant to your Organizations entities, see <a href="./access_policies_access-advisor-example-scenarios.html">Example scenarios for using
         last accessed information</a>.</p>
    
      <h2 id="access_policies_access-advisor-know">Things to know about last accessed
            information</h2>
      <p>Before you use last accessed information from a report to change the permissions for an
         IAM entity or Organizations entity, review the following details about the information.</p>
      <div class="itemizedlist">
          
          
          
          
          
          
          
          
          
          
          
      <ul class="itemizedlist"><li class="listitem">
            <p><a id="service-last-accessed-reporting-period"></a><b>Tracking period</b> – Recent activity usually appears in the IAM
               console within four hours. The tracking period for service information is the last
               400 days. The tracking period for Amazon S3 actions information began on April, 12, 2020.
               The tracking period for Amazon EC2, IAM, and Lambda actions began on April 7, 2021. For
               more information, see <a href="#access-advisor_tracking-period">Where AWS tracks last accessed
            information</a>.</p>
         </li><li class="listitem">
            <p><b>Attempts reported</b> – The service last
               accessed data includes all attempts to access an AWS API, not just the successful
               attempts. This includes all attempts that were made using the AWS Management Console, the AWS
               API through any of the SDKs, or any of the command line tools. An unexpected entry in
               the service last accessed data does not mean that your account has been compromised,
               because the request might have been denied. Refer to your CloudTrail logs as the
               authoritative source for information about all API calls and whether they were
               successful or denied access.</p>
         </li><li class="listitem">
            <p><b>PassRole</b> – The <code class="code">iam:PassRole</code>
               action is not tracked and is not included in IAM action last accessed
               information.</p>
         </li><li class="listitem">
            <p><b>Action last accessed information</b> – Action
               last accessed information is available for Amazon EC2, IAM, Lambda, and Amazon S3 management
               actions accessed by IAM entities. IAM provides action information for Amazon EC2,
               IAM, Lambda, and Amazon S3 management events that are logged by CloudTrail. Sometimes, CloudTrail
               management events are also called control plane operations or control plane events.
               Management events provide visibility into administrative operations that are
               performed on resources in your AWS account. To learn more about management events
               in CloudTrail, see <a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/logging-management-events-with-cloudtrail.html">Logging Management Events with Cloudtrail</a>.</p>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Action last accessed information is not available for Amazon S3 data events.</p></div></div>
         </li><li class="listitem">
            <p><b>Report owner</b> – Only the principal that
               generates a report can view the report details. This means that when you view the
               information in the AWS Management Console, you might have to wait for it to generate and load. If
               you use the AWS CLI or AWS API to get report details, your credentials must match the
               credentials of the principal that generated the report. If you use temporary
               credentials for a role or federated user, you must generate and retrieve the report
               during the same session. For more information about assumed-role session principals,
               see <a href="./reference_policies_elements_principal.html">AWS JSON policy elements:
        Principal</a>.</p>
         </li><li class="listitem">
            <p><b>IAM entities</b> – The information for IAM
               includes IAM entities (users or roles) in your account. Information for Organizations
               includes principals (IAM users, IAM roles, or the AWS account root user) in the specified
               Organizations entity. The information does not include unauthenticated attempts.</p>
         </li><li class="listitem">
            <p><b>IAM policy types</b> – The information for
               IAM includes services that are allowed by an IAM entity's policies. These are
               policies attached to a role or attached to a user directly or through a group. Access
               allowed by other policy types is not included in your report. The excluded policy
               types include resource-based policies, access control lists, AWS Organizations SCPs, IAM
               permissions boundaries, and session policies. Permissions that are provided by
               service-linked roles are defined by the service that they are linked to and can't be
               modified in IAM. To learn more about service-linked roles, see <a href="./using-service-linked-roles.html">Using service-linked roles</a>
               To learn how the different policy types are evaluated to allow or deny access, see
                  <a href="./reference_policies_evaluation-logic.html">Policy evaluation logic</a>.</p>
         </li><li class="listitem">
            <p><b>Organizations policy types</b> – The information for
               AWS Organizations includes only services that are allowed by an Organizations entity's inherited
               service control policies (SCPs). SCPs are policies attached to a root, OU, or
               account. Access allowed by other policy types is not included in your report. The
               excluded policy types include identity-based policies, resource-based policies,
               access control lists, IAM permissions boundaries, and session policies. To learn
               how the different policy types are evaluated to allow or deny access, see <a href="./reference_policies_evaluation-logic.html">Policy evaluation logic</a>.</p>
         </li><li class="listitem">
            <p><b>Specifying a policy ID</b> – When you use the
               AWS CLI or AWS API to generate a report for last accessed information in Organizations, you
               can optionally specify a policy ID. The resulting report includes information for the
               services that are allowed by only that policy. The information includes the most
               recent account activity in the specified Organizations entity or the entity's children. For
               more information, see <a href="https://docs.aws.amazon.com/cli/latest/reference/iam/generate-organizations-access-report.html">aws iam
                  generate-organizations-access-report</a> or <a href="https://docs.aws.amazon.com/IAM/latest/APIReference/API_GenerateOrganizationsAccessReport.html">GenerateOrganizationsAccessReport</a>.</p>
         </li><li class="listitem">
            <p><b>Organizations management account</b> – You must sign in
               to your organization's management account to view service last accessed information.
               You can choose to view information for the management account using the IAM console,
               the AWS CLI, or the AWS API. The resulting report lists all AWS services, because
               the management account is not limited by SCPs. If you specify a policy ID in the CLI
               or API, the policy is ignored. For each service, the report includes information for
               only the management account. However, reports for other Organizations entities do not return
               information for activity in the management account.</p>
         </li><li class="listitem">
            <p><b>Organizations settings</b> – An administrator must
                  <a href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies.html#enable_policies_on_root">enable
                  SCPs in your organization root</a> before you can generate data for
               Organizations.</p>
         </li></ul></div>
    
      <h2 id="access_policies_access-advisor-permissions">Permissions required</h2>
      <p>To view the last accessed information in the AWS Management Console, you must have a policy that
         grants the necessary permissions.</p>
       
         <h3 id="access_policies_access-advisor-permissions-iam">Permissions for IAM
               information</h3>
         <p>To use the IAM console to view the last accessed information for an IAM user,
            role, or policy, you must have a policy that includes the following actions:</p>
         <div class="itemizedlist">
             
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p><code class="code">iam:GenerateServiceLastAccessedDetails</code></p>
            </li><li class="listitem">
               <p><code class="code">iam:Get*</code></p>
            </li><li class="listitem">
               <p><code class="code">iam:List*</code></p>
            </li></ul></div>
         <p>These permissions allow a user to see the following:</p>
         <div class="itemizedlist">
             
             
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>Which users, groups, or roles are attached to a <a href="https://docs.aws.amazon.com/general/latest/gr/glos-chap.html#managed_policy">managed policy</a></p>
            </li><li class="listitem">
               <p>Which services a user or role can access</p>
            </li><li class="listitem">
               <p>The last time they accessed the service</p>
            </li><li class="listitem">
               <p>The last time they attempted to use a specific Amazon EC2, IAM, Lambda, or Amazon S3
                  action</p>
            </li></ul></div>
         <p>To use the AWS CLI or AWS API to view last accessed information for IAM, you must
            have permissions that match the operation you want to use:</p>
         <div class="itemizedlist">
             
             
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p><code class="code">iam:GenerateServiceLastAccessedDetails</code></p>
            </li><li class="listitem">
               <p><code class="code">iam:GetServiceLastAccessedDetails</code></p>
            </li><li class="listitem">
               <p><code class="code">iam:GetServiceLastAccessedDetailsWithEntities</code></p>
            </li><li class="listitem">
               <p><code class="code">iam:ListPoliciesGrantingServiceAccess</code></p>
            </li></ul></div>
         <p>This example shows how you might create an identity-based policy that allows viewing IAM last accessed information. Additionally,
            it allows read-only access to all of IAM. This policy defines permissions for programmatic and console access. </p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Version": "2012-10-17",
    "Statement": <span>{</span>
        "Effect": "Allow",
        "Action": [
            "iam:GenerateServiceLastAccessedDetails",
            "iam:Get*",
            "iam:List*"
        ],
        "Resource": "*"
    }</code></pre>
       
       
         <h3 id="access_policies_access-advisor-permissions-orgs">Permissions for
               AWS Organizations information</h3>
         <p>To use the IAM console to view a report for the root, OU, or account entities in
            Organizations, you must have a policy that includes the following actions:</p>
         <div class="itemizedlist">
             
             
             
             
             
             
             
             
             
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p><code class="code">iam:GenerateOrganizationsAccessReport</code></p>
            </li><li class="listitem">
               <p><code class="code">iam:GetOrganizationsAccessReport</code></p>
            </li><li class="listitem">
               <p><code class="code">organizations:DescribeAccount</code></p>
            </li><li class="listitem">
               <p><code class="code">organizations:DescribeOrganization</code></p>
            </li><li class="listitem">
               <p><code class="code">organizations:DescribeOrganizationalUnit</code></p>
            </li><li class="listitem">
               <p><code class="code">organizations:DescribePolicy</code></p>
            </li><li class="listitem">
               <p><code class="code">organizations:ListChildren</code></p>
            </li><li class="listitem">
               <p><code class="code">organizations:ListParents</code></p>
            </li><li class="listitem">
               <p><code class="code">organizations:ListPoliciesForTarget</code></p>
            </li><li class="listitem">
               <p><code class="code">organizations:ListRoots</code></p>
            </li><li class="listitem">
               <p><code class="code">organizations:ListTargetsForPolicy</code></p>
            </li></ul></div>
         <p>To use the AWS CLI or AWS API to view service last accessed information for Organizations, you
            must have a policy that includes the following actions:</p>
         <div class="itemizedlist">
             
             
             
             
             
             
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p><code class="code">iam:GenerateOrganizationsAccessReport</code></p>
            </li><li class="listitem">
               <p><code class="code">iam:GetOrganizationsAccessReport</code></p>
            </li><li class="listitem">
               <p><code class="code">organizations:DescribePolicy</code></p>
            </li><li class="listitem">
               <p><code class="code">organizations:ListChildren</code></p>
            </li><li class="listitem">
               <p><code class="code">organizations:ListParents</code></p>
            </li><li class="listitem">
               <p><code class="code">organizations:ListPoliciesForTarget</code></p>
            </li><li class="listitem">
               <p><code class="code">organizations:ListRoots</code></p>
            </li><li class="listitem">
               <p><code class="code">organizations:ListTargetsForPolicy</code></p>
            </li></ul></div>
         <p>This example shows how you might create an identity-based policy that allows viewing service last accessed information for Organizations.
            Additionally, it allows read-only access to all of Organizations. This policy defines permissions for programmatic and console access. </p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Version": "2012-10-17",
    "Statement": <span>{</span>
        "Effect": "Allow",
        "Action": [
            "iam:GenerateOrganizationsAccessReport",
            "iam:GetOrganizationsAccessReport",
            "organizations:Describe*",
            "organizations:List*"
        ],
        "Resource": "*"
    }
}</code></pre>
         <p>You can also use the <a href="./reference_policies_iam-condition-keys.html#ck_OrganizationsPolicyId">iam:OrganizationsPolicyId</a> condition key to allow generating a report only for
            a specific Organizations policy. For an example policy, see <a href="./reference_policies_examples_iam_service-accessed-data-orgs.html">IAM: View
            service last accessed information for an Organizations policy</a>.</p>
       
    
      <h2 id="access_policies_access-advisor-troubleshooting">Troubleshooting activity
            for IAM and Organizations entities</h2>
      <p>In some cases, your AWS Management Console last accessed information table might be empty. Or perhaps
         your AWS CLI or AWS API request returns an empty set of information or a null field. In
         these cases, review the following issues:</p>
      <div class="itemizedlist">
          
          
          
          
          
          
          
          
          
          
      <ul class="itemizedlist"><li class="listitem">
            <p>For action last accessed information, an action that you are expecting to see
               might not be returned in the list. This can happen either because the IAM entity
               does not have permissions for the action, or AWS does not yet track the action for
               last accessed information.</p>
         </li><li class="listitem">
            <p>For an IAM user, make sure that the user has at least one inline or managed
               policy attached, either directly or through group memberships.</p>
         </li><li class="listitem">
            <p>For an IAM group, verify that the group has at least one inline or managed
               policy attached.</p>
         </li><li class="listitem">
            <p>For an IAM group, the report returns only the service last accessed information
               for members that used the group's policies to access a service. To learn whether a
               member used other policies, review the last accessed information for that
               user.</p>
         </li><li class="listitem">
            <p>For an IAM role, verify that the role has at least one inline or managed policy
               attached.</p>
         </li><li class="listitem">
            <p>For an IAM entity (user or role), review other policy types that might affect
               the permissions of that entity. These include resource-based policies, access control
               lists, AWS Organizations policies, IAM permissions boundaries, or session policies. For more
               information, see <a href="./access_policies.html#access_policy-types">Policy types</a> or <a href="./reference_policies_evaluation-logic.html#policy-eval-basics">Evaluating policies within a single account</a>.</p>
         </li><li class="listitem">
            <p>For an IAM policy, make sure that the specified managed policy is attached to at
               least one user, group with members, or role.</p>
         </li><li class="listitem">
            <p>For an Organizations entity (root, OU, or account), make sure that you are signed using
               Organizations management account credentials.</p>
         </li><li class="listitem">
            <p>Verify that <a href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies.html#enable_policies_on_root">SCPs are
                  enabled in your organization root</a>.</p>
         </li><li class="listitem">
            <p>Action last accessed information is only available for some Amazon EC2, IAM, Lambda,
               and Amazon S3 actions.</p>
         </li></ul></div>
      <p>When you make changes, wait at least four hours for activity to appear in your IAM
         console report. If you use the AWS CLI or AWS API, you must generate a new report to view
         the updated information.</p>
    
      <h2 id="access-advisor_tracking-period">Where AWS tracks last accessed
            information</h2>
      <p>AWS collects last accessed information for the standard AWS Regions. When AWS adds
         additional Regions, those Regions are added to the following table, including the date that
         AWS started tracking information in each Region.</p>
      <div class="itemizedlist">
          
          
      <ul class="itemizedlist"><li class="listitem">
            <p><b>Service information</b> – The tracking period
               for services is the last 400 days, or less if your Region began supporting this
               feature within the last year.</p>
         </li><li class="listitem">
            <p><b>Actions information</b> – The tracking period
               for Amazon S3 management actions began on April, 12, 2020. The tracking period for Amazon EC2,
               IAM, and Lambda management actions began on April 7, 2021. If the Region started
               supporting an action at a later date, then that date is also the action's tracking
               start date for the Region.</p>
         </li></ul></div>
      <div class="table-container"><div class="table-contents"><table id="w340aac18c22c33c17b7"><thead>
               <tr>
                  <th>Region name</th>
                  <th>Region</th>
                  <th>Tracking start date</th>
               </tr>
            </thead>
               <tr>
                  <td>US East (Ohio)</td>
                  <td>us-east-2</td>
                  <td>October 27, 2017</td>
               </tr>
               <tr>
                  <td>US East (N. Virginia)</td>
                  <td>us-east-1</td>
                  <td>October 1, 2015</td>
               </tr>
               <tr>
                  <td>US West (N. California)</td>
                  <td>us-west-1</td>
                  <td>October 1, 2015</td>
               </tr>
               <tr>
                  <td>US West (Oregon)</td>
                  <td>us-west-2</td>
                  <td>October 1, 2015</td>
               </tr>
               <tr>
                  <td>Asia Pacific (Hong Kong)</td>
                  <td>ap-east-1</td>
                  <td>April 24, 2019</td>
               </tr>
               <tr>
                  <td>Asia Pacific (Jakarta)</td>
                  <td>ap-southeast-3</td>
                  <td>December 13, 2021</td>
               </tr>
               <tr>
                  <td>Asia Pacific (Mumbai)</td>
                  <td>ap-south-1</td>
                  <td>June 27, 2016</td>
               </tr>
               <tr>
                  <td>Asia Pacific (Seoul)</td>
                  <td>ap-northeast-2</td>
                  <td>January 6, 2016</td>
               </tr>
               <tr>
                  <td>Asia Pacific (Singapore)</td>
                  <td>ap-southeast-1</td>
                  <td>October 1, 2015</td>
               </tr>
               <tr>
                  <td>Asia Pacific (Sydney)</td>
                  <td>ap-southeast-2</td>
                  <td>October 1, 2015</td>
               </tr>
               <tr>
                  <td>Asia Pacific (Tokyo)</td>
                  <td>ap-northeast-1</td>
                  <td>October 1, 2015</td>
               </tr>
               <tr>
                  <td>Canada (Central)</td>
                  <td>ca-central-1</td>
                  <td>October 28, 2017</td>
               </tr>
               <tr>
                  <td>Europe (Frankfurt)</td>
                  <td>eu-central-1</td>
                  <td>October 1, 2015</td>
               </tr>
               <tr>
                  <td>Europe (Stockholm)</td>
                  <td>eu-north-1</td>
                  <td>December 12, 2018</td>
               </tr>
               <tr>
                  <td>Europe (Ireland)</td>
                  <td>eu-west-1</td>
                  <td>October 1, 2015</td>
               </tr>
               <tr>
                  <td>Europe (London)</td>
                  <td>eu-west-2</td>
                  <td>October 28, 2017</td>
               </tr>
               <tr>
                  <td>Europe (Milan)</td>
                  <td>eu-south-1</td>
                  <td>April 28, 2020</td>
               </tr>
               <tr>
                  <td>Europe (Paris)</td>
                  <td>eu-west-3</td>
                  <td>December 18, 2017</td>
               </tr>               
               <tr>
                  <td>Middle East (Bahrain)</td>
                  <td>me-south-1</td>
                  <td>July 29, 2019</td>
               </tr>
               <tr>
                  <td>Middle East (UAE)</td>
                  <td>me-central-1</td>
                  <td>August 30, 2022</td>
               </tr>
               <tr>
                  <td>Africa (Cape Town)</td>
                  <td>af-south-1</td>
                  <td>April 22, 2020</td>
               </tr>
               <tr>
                  <td>South America (São Paulo)</td>
                  <td>sa-east-1</td>
                  <td>December 11, 2015</td>
               </tr>
            </table></div></div>
      <p>If a Region is not listed in the previous table, then that Region does not yet provide
         last accessed information.</p>
      <p>An AWS Region is a collection of AWS resources in a geographic area. Regions are
         grouped into partitions. The standard Regions are the Regions that belong to the
            <code class="code">aws</code> partition. For more information about the different partitions, see
            <a href="https://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html#arns-syntax">Amazon Resource Names
            (ARNs) Format</a> in the AWS General Reference. For more information about Regions, see
            <a href="https://docs.aws.amazon.com/general/latest/gr/rande-manage.html#region-what-is">About AWS Regions</a>
         also in the AWS General Reference. </p>
   <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./access_policies_manage-delete.html">Deleting IAM policies</div><div id="next" class="next-link" accesskey="n" href="./access_policies_access-advisor-view-data.html">View IAM access information</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/access_policies_access-advisor.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/access_policies_access-advisor.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>