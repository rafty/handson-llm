<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Creating a role for web identity or OpenID Connect Federation (console) - AWS Identity and Access Management</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="id_roles_create_for-idp_oidc" /><meta name="default_state" content="id_roles_create_for-idp_oidc" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-idp_oidc.html" /><meta name="description" content="Create an IAM role that determines what permissions that users have when they are authenticated through an OpenID connect-compatible identity provider." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS Identity and Access Management" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Control access to your AWS resources with user identity (authentication) and with policies that define specific permissions (authorization)." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-idp_oidc.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/id_roles_create_for-idp_oidc.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/id_roles_create_for-idp_oidc.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/id_roles_create_for-idp_oidc.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/id_roles_create_for-idp_oidc.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-idp_oidc.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-idp_oidc.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/id_roles_create_for-idp_oidc.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/id_roles_create_for-idp_oidc.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/id_roles_create_for-idp_oidc.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/id_roles_create_for-idp_oidc.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/id_roles_create_for-idp_oidc.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/id_roles_create_for-idp_oidc.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/id_roles_create_for-idp_oidc.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/id_roles_create_for-idp_oidc.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/id_roles_create_for-idp_oidc.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/id_roles_create_for-idp_oidc.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/id_roles_create_for-idp_oidc.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/id_roles_create_for-idp_oidc.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/IAM/latest/UserGuide/id_roles_create_for-idp_oidc.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/id_roles_create_for-idp_oidc.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-idp_oidc.html" hreflang="x-default" /><meta name="feedback-item" content="IAM" /><meta name="this_doc_product" content="AWS Identity and Access Management" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'iam'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="Creating a role for web identity or OpenID Connect Federation (console)" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Creating a role for web identity or OpenID Connect Federation (console) - AWS Identity and Access Management</title><meta name="pdf" content="/pdfs/IAM/latest/UserGuide/iam-ug.pdf#id_roles_create_for-idp_oidc" /><meta name="github" content="https://github.com/awsdocs/iam-user-guide/tree/main/doc_source/id_roles_create_for-idp_oidc.md" /><meta name="rss" content="aws-iam-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=76" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/id_roles_create_for-idp_oidc.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/id_roles_create_for-idp_oidc.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/id_roles_create_for-idp_oidc.html" /><meta name="keywords" content="IAM,AWS Identity and Access Management,IAM user,user,IAM group,group,IAM role,role,permission policy,trust policy,policy,access key,password" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS Identity and Access Management",
        "item" : "https://docs.aws.amazon.com/iam/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "IAM Identities (users, user groups, and roles)",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/id.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "IAM roles",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Creating IAM roles",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "Creating a role for a third-party Identity Provider (federation)",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-idp.html"
      },
      {
        "@type" : "ListItem",
        "position" : 8,
        "name" : "Creating a role for web identity or OpenID Connect Federation (console)",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-idp.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/IAM/latest/UserGuide/iam-ug.pdf#id_roles_create_for-idp_oidc" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a href="https://github.com/awsdocs/iam-user-guide/tree/main/doc_source/id_roles_create_for-idp_oidc.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/iam/index.html">AWS Identity and Access Management</a><a href="introduction.html">User Guide</a></div><div id="page-toc-src"><a href="#idp_oidc_Prerequisites">Prerequisites for creating a role for web identity or
        OIDC</a><a href="#idp_oidc_Create">Creating a role for web identity or OIDC</a><a href="#idp_oidc_Create_GitHub">Configuring a role for GitHub OIDC identity
        provider</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="id_roles_create_for-idp_oidc">Creating a role for web identity or OpenID
      Connect Federation (console)</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>You can use Web Identity or OpenID Connect (OIDC) federated identity providers instead of
    creating AWS Identity and Access Management users in your AWS account. With an identity provider (IdP), you can manage
    your user identities outside of AWS and give these external user identities permissions to
    access AWS resources in your account. For more information about federation and IdPs, see
      <a href="./id_roles_providers.html">Identity providers and federation</a>.</p>
    <h2 id="idp_oidc_Prerequisites">Prerequisites for creating a role for web identity or
        OIDC</h2>
    <p>Before you can create a role for web identity federation, you must first complete the
      following prerequisite steps.</p>
    <div class="procedure"><a id="oidc-prereqs"></a><h6>To prepare to create a role for web identity federation</h6><ol><li>
        <p>Sign up with one or more services offering federated OIDC identity. If you are
          creating an app that needs access to your AWS resources, you also configure your app
          with the provider information. When you do, the provider gives you an application or
          audience ID that is unique to your app. (Different providers use different terminology for
          this process. This guide uses the term <em>configure</em> for the process of
          identifying your app with the provider.) You can configure multiple apps with each
          provider, or multiple providers with a single app. View information about using the
          identity providers as follows:</p>
        <div class="itemizedlist">
           
           
           
        <ul class="itemizedlist"><li class="listitem">
            <p><a href="https://login.amazon.com/" rel="noopener noreferrer" target="_blank"><span>Login with Amazon Developer
              Center</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a></p>
          </li><li class="listitem">
            <p><a href="https://developers.facebook.com/docs/facebook-login/v2.1" rel="noopener noreferrer" target="_blank"><span>Add Facebook
                Login to Your App or Website</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> on the Facebook developers site.</p>
          </li><li class="listitem">
            <p><a href="https://developers.google.com/accounts/docs/OAuth2Login" rel="noopener noreferrer" target="_blank"><span>Using OAuth
                2.0 for Login (OpenID Connect)</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> on the Google developers site.</p>
          </li></ul></div>
      </li><li><a id="idpoidcstep2"></a>
        <p>After you receive the required information from the IdP, create an IdP in IAM. For
          more information, see <a href="./id_roles_providers_create_oidc.html">Creating OpenID Connect (OIDC) identity
      providers</a>.</p>
        <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>If you are using an OIDC IdP from Google, Facebook, or Amazon Cognito, don't create a
            separate IAM IdP in the AWS Management Console. These OIDC identity providers are already built
            into AWS and are available for you to use. Skip this step and create new roles using
            your IdP in the following step.</p></div></div>
      </li><li>
        <p>Prepare the policies for the role that the IdP-authenticated users will assume. As
          with any role, a role for a mobile app includes two policies. One is the trust policy that
          specifies who can assume the role. The other is the permissions policy that specifies the
          AWS actions and resources that the mobile app is allowed or denied access to.</p>
        <p>For web IdPs, we recommend that you use <a href="https://aws.amazon.com/cognito/" rel="noopener noreferrer" target="_blank"><span>Amazon Cognito</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> to manage identities. In this case, use a trust policy similar to this
          example.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
    "Version": "2012-10-17",
    "Statement": <span>{</span>
        "Effect": "Allow",
        "Principal": <span>{</span>"Federated": "cognito-identity.amazonaws.com"},
        "Action": "sts:AssumeRoleWithWebIdentity",
        "Condition": <span>{</span>
            "StringEquals": <span>{</span>"cognito-identity.amazonaws.com:aud": "<code class="replaceable">us-east-2:12345678-abcd-abcd-abcd-123456</code>"},
            "ForAnyValue:StringLike": <span>{</span>"cognito-identity.amazonaws.com:amr": "unauthenticated"}
        }
    }
}</code></pre>
        <p>Replace <code class="code">us-east-2:12345678-abcd-abcd-abcd-123456</code> with the
          identity pool ID that Amazon Cognito assigns to you.</p>
        <p>If you manually configure a web identity IdP, when you create the trust policy, you
          must use three values that ensure that only your app can assume the role:</p>
        <div class="itemizedlist">
           
           
           
        <ul class="itemizedlist"><li class="listitem">
            <p>For the <code class="code">Action</code> element, use the
                <code class="code">sts:AssumeRoleWithWebIdentity</code> action.</p>
          </li><li class="listitem">
            <p>For the <code class="code">Principal</code> element, use the string
                  <code class="code"><span>{</span>"Federated":<code class="replaceable">providerUrl/providerArn</code>}</code>.</p>
            <div class="itemizedlist">
               
               
            <ul class="itemizedlist"><li class="listitem">
                <p>For some common OIDC IdPs, the
                    <code class="code"><code class="replaceable">providerUrl</code></code> is a URL. The following
                  examples include methods to specify the principal for some common IdPs:</p>
                <p><code class="code">"Principal":<span>{</span>"Federated":"cognito-identity.amazonaws.com"}</code></p>
                <p><code class="code">"Principal":<span>{</span>"Federated":"www.amazon.com"}</code></p>
                <p><code class="code">"Principal":<span>{</span>"Federated":"graph.facebook.com"}</code></p>
                <p><code class="code">"Principal":<span>{</span>"Federated":"accounts.google.com"}</code></p>
              </li><li class="listitem">
                <p>For other OIDC providers, use the Amazon Resource Name (ARN) of the OIDC IdP
                  that you created in <a href="#idpoidcstep2">Step 2</a>,
                  such as the following example:</p>
                <p><code class="code">"Principal":<span>{</span>"Federated":"arn:aws:iam::123456789012:oidc-provider/server.example.com"}</code></p>
              </li></ul></div>
          </li><li class="listitem">
            <p>For the <code class="code">Condition</code> element, use a <code class="code">StringEquals</code> condition
              to limit permissions. Test the identity pool ID for Amazon Cognito) or the app ID for other
              providers. The identity pool ID should match the app ID that you received when you
              configured the app with the IdP. This match between the IDs ensures that the request
              comes from your app. Create a condition element similar to one of the following
              examples, depending on the IdP that you are using: </p>
            <p><code class="code">"Condition": <span>{</span>"StringEquals":
                  <span>{</span>"<code class="replaceable">cognito-identity.amazonaws.com:aud</code>":
                "us-east:12345678-ffff-ffff-ffff-123456"}}</code></p>
            <p><code class="code">"Condition": <span>{</span>"StringEquals":
                  <span>{</span>"<code class="replaceable">www.amazon.com:app_id</code>":
                "amzn1.application-oa2-123456"}}</code></p>
            <p><code class="code">"Condition": <span>{</span>"StringEquals":
                  <span>{</span>"<code class="replaceable">graph.facebook.com:app_id</code>":
                "111222333444555"}}</code></p>
            <p><code class="code">"Condition": <span>{</span>"StringEquals":
                  <span>{</span>"<code class="replaceable">accounts.google.com:aud</code>":
                "66677788899900pro0"}}</code></p>
            <p>For OIDC providers, use the fully qualified URL of the OIDC IdP with the
                <code class="code">aud</code> context key, such as the following example: </p>
            <p><code class="code">"Condition": <span>{</span>"StringEquals":
                  <span>{</span>"<code class="replaceable">server.example.com:aud</code>":
                "appid_from_oidc_idp"}}</code></p>
          </li></ul></div>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>The values for the principal in the trust policy for the role are specific to an
            IdP. A role for web identity or OIDC can specify only one principal. Therefore, if the
            mobile app allows users to sign in from more than one IdP, create a separate role for
            each IdP that you want to support. Create separate trust policies for each IdP.</p></div></div>
        <p>If a user uses a mobile app to sign in from Login with Amazon, the following example
          trust policy would apply. In the example,
            <code class="replaceable">amzn1.application-oa2-123456</code> represents the app ID that
          Amazon assigns when you configured the app using Login with Amazon.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
      "Version": "2012-10-17",
      "Statement": [<span>{</span>
          "Sid": "RoleForLoginWithAmazon",
          "Effect": "Allow",
          "Principal": <span>{</span>"Federated": "www.amazon.com"},
          "Action": "sts:AssumeRoleWithWebIdentity",
          "Condition": <span>{</span>"StringEquals": <span>{</span>"www.amazon.com:app_id": "<code class="replaceable">amzn1.application-oa2-123456</code>"}}
      }]
  }
        </code></pre>
        <p>If a user uses a mobile app to sign in from Facebook, the following example trust
          policy would apply. In this example, <code class="replaceable">111222333444555</code> represents
          the app ID that Facebook assigns.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
      "Version": "2012-10-17",
      "Statement": [<span>{</span>
          "Sid": "RoleForFacebook",
          "Effect": "Allow",
          "Principal": <span>{</span>"Federated": "graph.facebook.com"},
          "Action": "sts:AssumeRoleWithWebIdentity",
          "Condition": <span>{</span>"StringEquals": <span>{</span>"graph.facebook.com:app_id": "<code class="replaceable">111222333444555</code>"}}
      }]
  }
        </code></pre>
        <p>If a user uses a mobile app to sign in from Google, the following example trust policy
          would apply. In this example, <code class="replaceable">666777888999000</code> represents the
          app ID that Google assigns.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
      "Version": "2012-10-17",
      "Statement": [<span>{</span>
          "Sid": "RoleForGoogle",
          "Effect": "Allow",
          "Principal": <span>{</span>"Federated": "accounts.google.com"},
          "Action": "sts:AssumeRoleWithWebIdentity",
          "Condition": <span>{</span>"StringEquals": <span>{</span>"accounts.google.com:aud": "<code class="replaceable">666777888999000</code>"}}
      }]
  }
        </code></pre>
        <p>If a user uses a mobile app to sign in from Amazon Cognito, the following example trust policy
          would apply. In this example,
            <code class="replaceable">us-east:12345678-ffff-ffff-ffff-123456</code> represents the
          identity pool ID that Amazon Cognito assigns.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
      "Version": "2012-10-17",
      "Statement": [<span>{</span>
          "Sid": "RoleForCognito",
          "Effect": "Allow",
          "Principal": <span>{</span>"Federated": "cognito-identity.amazonaws.com"},
          "Action": "sts:AssumeRoleWithWebIdentity",
          "Condition": <span>{</span>"StringEquals": <span>{</span>"cognito-identity.amazonaws.com:aud": "<code class="replaceable">us-east:12345678-ffff-ffff-ffff-123456</code>"}}
      }]
  }
        </code></pre>
      </li></ol></div>
   
    <h2 id="idp_oidc_Create">Creating a role for web identity or OIDC</h2>
    <p>After you complete the prerequisites, you can create the role in IAM. The following
      procedure describes how to create the role for web identity or OIDC federation in the
      AWS Management Console. To create a role from the AWS CLI or AWS API, see the procedures at <a href="./id_roles_create_for-idp.html">Creating a role for a third-party Identity Provider
      (federation)</a>.</p>
    <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>If you use Amazon Cognito, use the Amazon Cognito console to set up the roles. Otherwise, use the IAM
        console to create a role for web identity federation.</p></div></div>
    <div class="procedure"><h6>To create an IAM role for web identity federation</h6><ol><li><p>Sign in to the AWS Management Console and open the IAM console at <a href="https://console.aws.amazon.com/iam/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/iam/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></li><li>
        <p>In the navigation pane, choose <b>Roles</b> and then choose
            <b>Create role</b>.</p>
      </li><li>
        <p>Choose the <b>Web Identity</b> role type.</p>
      </li><li>
        <p>For <b>Identity provider</b>, choose the IdP for your role: </p>
        <div class="itemizedlist">
           
           
        <ul class="itemizedlist"><li class="listitem">
            <p>If you want to create a role for an individual web IdP, choose <b>Login
                with Amazon</b>, <b>Facebook</b>, or
                <b>Google</b>. </p>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>You must create a separate role for each IdP that you want to support.</p></div></div>
          </li><li class="listitem">
            <p>If you want to create an advanced scenario role for Amazon Cognito, choose
                <b>Amazon Cognito</b>. </p>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>You must manually create a role to use with Amazon Cognito only when you work on an
                advanced scenario. Otherwise, Amazon Cognito can create roles for you. For more information
                about Amazon Cognito, see <a href="https://docs.aws.amazon.com/cognito/latest/developerguide/external-identity-providers.html">Identity
                  pools (federated identities) external identity providers</a> in the
                  <em>Amazon Cognito Developer Guide</em>. </p></div></div>
          </li></ul></div>
      </li><li>
        <p>Enter the identifier for your application. The label of the identifier changes based
          on the provider you choose:</p>
        <div class="itemizedlist">
           
           
           
           
        <ul class="itemizedlist"><li class="listitem">
            <p>If you want to create a role for Login with Amazon, enter the app ID into the
                <b>Application ID</b> box.</p>
          </li><li class="listitem">
            <p>If you want to create a role for Facebook, enter the app ID into the
                <b>Application ID</b> box.</p>
          </li><li class="listitem">
            <p>If you want to create a role for Google, enter the audience name into the
                <b>Audience</b> box.</p>
          </li><li class="listitem">
            <p>If you want to create a role for Amazon Cognito, enter the ID of the identity pool that you
              have created for your Amazon Cognito applications into the <b>Identity Pool
                ID</b> box.</p>
          </li></ul></div>
      </li><li>
        <p>(Optional) Choose <b>Condition (optional)</b> to create additional
          conditions that must be met before users of your application can use the permissions that
          the role grants. For example, you can add a condition that grants access to AWS
          resources only for a specific IAM user ID.</p>
      </li><li>
        <p>Review your web identity information and then choose <b>Next</b>.</p>
      </li><li>
        <p>IAM includes a list of the AWS managed and customer managed policies in your
          account. Select the policy to use for the permissions policy, or choose <b>Create
            policy</b> to open a new browser tab and create a new policy from scratch. For
          more information, see <a href="./access_policies_create-console.html#access_policies_create-start">Creating IAM policies</a>. After you create the policy, close that
          tab and return to your original tab. Select the check box next to the permissions policies
          that you want web identity users to have. If you prefer, you can select no policies at
          this time, and then attach policies to the role later. By default, a role has no
          permissions.</p>
      </li><li>
        <p>(Optional) Set a <a href="./access_policies_boundaries.html">permissions
            boundary</a>. This is an advanced feature.</p>
        <p>Open the <b>Permissions boundary</b> section and choose <b>Use a
            permissions boundary to control the maximum role permissions</b>. Select the
          policy to use for the permissions boundary.</p>
      </li><li>
        <p>Choose <b>Next</b>.</p>
      </li><li>
        <p>For <b>Role name</b>, enter a role name. Role names must be unique
          within your AWS account. They are not case dependent. For example, you can't create
          roles named both <code class="userinput">PRODROLE</code> and <code class="userinput">prodrole</code>.
          Because other AWS resources might reference the role, you can't edit the name of the
          role after you create it.</p>
      </li><li>
        <p>(Optional) For <b>Description</b>, enter a description for the new
          role.</p>
      </li><li>
        <p>To edit the use cases and permissions for the role, choose <b>Edit</b>
          in the <b>Step 1: Select trusted entities</b> or <b>Step 2: Add
            permissions</b> sections. </p>
      </li><li>
        <p>(Optional) To add metadata to the role, attach tags as key–value pairs. For more
          information about using tags in IAM, see <a href="./id_tags.html">Tagging IAM resources</a>.</p>
      </li><li>
        <p>Review the role and then choose <b>Create role</b>.</p>
      </li></ol></div>
   
    <h2 id="idp_oidc_Create_GitHub">Configuring a role for GitHub OIDC identity
        provider</h2>
    <p>If you use GitHub as an OIDC IdP, best practice is to limit the entities that can assume
      the role associated with the IAM IdP. When you include a condition statement in the trust
      policy, you can limit the role to a specific GitHub organization, repository, or branch. For
      information about limiting roles, see <a href="https://docs.github.com/en/actions/deployment/security-hardening-your-deployments/about-security-hardening-with-openid-connect" rel="noopener noreferrer" target="_blank"><span>GitHub Docs - About security hardening with OpenID Connect</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. You can use the
      condition key <code class="code">token.actions.githubusercontent.com:sub</code> to limit access. We
      recommend that you limit the condition to a specific set of repositories or branches. If you
      do not include this condition, then GitHub Actions from organizations or repositories outside
      of your control are able to assume roles associated with the GitHub IAM IdP in your
      AWS account. For information about how to configure AWS to trust GitHub's OIDC as a
      federated identity, see <a href="https://docs.github.com/en/actions/deployment/security-hardening-your-deployments/configuring-openid-connect-in-amazon-web-services" rel="noopener noreferrer" target="_blank"><span>GitHub Docs - Configuring OpenID Connect in Amazon Web Services</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
    <p>The following example trust policy limits access to the defined GitHub organization,
      repository, and branch.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Principal": <span>{</span>
        "Federated": "arn:aws:iam::012345678910:oidc-provider/token.actions.githubusercontent.com"
      },
      "Action": "sts:AssumeRoleWithWebIdentity",
      "Condition": <span>{</span>
        "StringEquals": <span>{</span>
          "token.actions.githubusercontent.com:aud": "sts.amazonaws.com",
          "token.actions.githubusercontent.com:sub": "repo:<code class="replaceable">GitHubOrg</code>/<code class="replaceable">GitHubRepo</code>:ref:refs/heads/<code class="replaceable">GitHubBranch</code>"
        }
      }
    }
  ]
}</code></pre>
    <p>The following example condition limits access to the defined GitHub organization and
      repository, but grants access to any branch within the repository.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">"Condition": <span>{</span>
  "StringLike": <span>{</span>
    "token.actions.githubusercontent.com:aud": "sts.amazonaws.com",
    "token.actions.githubusercontent.com:sub": "repo:<code class="replaceable">GitHubOrg</code>/<code class="replaceable">GitHubRepo</code>:<code class="replaceable">*</code>"
  }
}</code></pre>
    <p>The following example condition limits access to any repository or branch within the
      defined GitHub organization. We recommend this as a minimum trust policy condition for roles
      that use GitHub as an OIDC IdP.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">"Condition": <span>{</span>
  "StringLike": <span>{</span>
    "token.actions.githubusercontent.com:aud": "sts.amazonaws.com",
    "token.actions.githubusercontent.com:sub": "repo:<code class="replaceable">GitHubOrg</code>/<code class="replaceable">*</code>"
  }
}</code></pre>
    <p>For more information about the web identity federation keys available for condition checks
      in policies, see <a href="./reference_policies_iam-condition-keys.html#condition-keys-wif">Available keys for AWS web identity
            federation</a>.</p>
  <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./id_roles_create_for-idp.html">Creating a role for identity federation</div><div id="next" class="next-link" accesskey="n" href="./id_roles_create_for-idp_saml.html">Creating a role for SAML 2.0 federation</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/id_roles_create_for-idp_oidc.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/id_roles_create_for-idp_oidc.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>