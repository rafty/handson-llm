<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>IAM policy elements: Variables and tags - AWS Identity and Access Management</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="reference_policies_variables" /><meta name="default_state" content="reference_policies_variables" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_variables.html" /><meta name="description" content="Use AWS Identity and Access Management (IAM) policy variables as placeholders when you don't know the exact value of a resource or condition key when you write the policy." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS Identity and Access Management" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Control access to your AWS resources with user identity (authentication) and with policies that define specific permissions (authorization)." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_variables.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/reference_policies_variables.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/reference_policies_variables.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/reference_policies_variables.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/reference_policies_variables.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_variables.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_variables.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/reference_policies_variables.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/reference_policies_variables.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/reference_policies_variables.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/reference_policies_variables.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/reference_policies_variables.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/reference_policies_variables.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/reference_policies_variables.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/reference_policies_variables.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/reference_policies_variables.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/reference_policies_variables.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/reference_policies_variables.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/reference_policies_variables.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/IAM/latest/UserGuide/reference_policies_variables.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/reference_policies_variables.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_variables.html" hreflang="x-default" /><meta name="feedback-item" content="IAM" /><meta name="this_doc_product" content="AWS Identity and Access Management" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'iam'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="IAM policy elements: Variables and tags" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>IAM policy elements: Variables and tags - AWS Identity and Access Management</title><meta name="pdf" content="/pdfs/IAM/latest/UserGuide/iam-ug.pdf#reference_policies_variables" /><meta name="github" content="https://github.com/awsdocs/iam-user-guide/tree/main/doc_source/reference_policies_variables.md" /><meta name="rss" content="aws-iam-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=76" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/reference_policies_variables.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/reference_policies_variables.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/reference_policies_variables.html" /><meta name="keywords" content="IAM,AWS Identity and Access Management,IAM user,user,IAM group,group,IAM role,role,permission policy,trust policy,policy,access key,password" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS Identity and Access Management",
        "item" : "https://docs.aws.amazon.com/iam/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Reference information for AWS Identity and Access Management",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/reference.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "IAM JSON policy reference",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "IAM JSON policy elements reference",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "IAM policy elements: Variables and tags",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/IAM/latest/UserGuide/iam-ug.pdf#reference_policies_variables" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a href="https://github.com/awsdocs/iam-user-guide/tree/main/doc_source/reference_policies_variables.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/iam/index.html">AWS Identity and Access Management</a><a href="introduction.html">User Guide</a></div><div id="page-toc-src"><a href="#policy-vars-intro">Introduction</a><a href="#policy-vars-using-variables">Using variables in policies</a><a href="#policy-vars-tags">Tags as policy variables</a><a href="#policy-vars-wheretouse">Where you can use policy variables</a><a href="#policy-vars-no-value">Policy variables with no value</a><a href="#policy-vars-infotouse">Request information that you can use for policy
        variables</a><a href="#policy-vars-default-values">Specifying default values</a><a href="#policy-vars-formoreinfo">For more information</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="reference_policies_variables">IAM policy elements: Variables and tags</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Use AWS Identity and Access Management (IAM) policy variables as placeholders when you don't know the exact value
    of a resource or condition key when you write the policy.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>If AWS cannot resolve a variable this might cause the entire statement to be invalid.
      For example, if you use the <code class="code">aws:TokenIssueTime</code> variable, the variable resolves to
      a value only when the requester authenticated using temporary credentials (an IAM role). To
      prevent variables from causing invalid statements, use the <a href="./reference_policies_elements_condition_operators.html#Conditions_IfExists">...IfExists condition operator.</a></p></div></div><div class="highlights" id="inline-topiclist"><h6>Topics</h6><ul><li><a href="#policy-vars-intro">Introduction</a></li><li><a href="#policy-vars-using-variables">Using variables in policies</a></li><li><a href="#policy-vars-tags">Tags as policy variables</a></li><li><a href="#policy-vars-wheretouse">Where you can use policy variables</a></li><li><a href="#policy-vars-no-value">Policy variables with no value</a></li><li><a href="#policy-vars-infotouse">Request information that you can use for policy
        variables</a></li><li><a href="#policy-vars-default-values">Specifying default values</a></li><li><a href="#policy-vars-formoreinfo">For more information</a></li></ul></div>
    <h2 id="policy-vars-intro">Introduction</h2>
    <p>In IAM policies, many actions allow you to provide a name for the specific resources
      that you want to control access to. For example, the following policy allows users to list,
      read, and write objects in the S3 bucket <code class="code">DOC-EXAMPLE-BUCKET</code> for
        <code class="code">marketing</code> projects.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Action": ["s3:ListBucket"],      
      "Resource": ["arn:aws:s3:::DOC-EXAMPLE-BUCKET"],
      "Condition": <span>{</span>"StringLike": <span>{</span>"s3:prefix": ["marketing/*"]}}
    },
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "s3:GetObject",
        "s3:PutObject"
      ],      
      "Resource": ["arn:aws:s3:::DOC-EXAMPLE-BUCKET/marketing/*"]
    }
  ]
}</code></pre>
    <p>In some cases, you might not know the exact name of the resource when you write the
      policy. You might want to generalize the policy so it works for many users without having to
      make a unique copy of the policy for each user. Instead of creating a separate policy for each
      user, we recommend you create a single group policy that works for any user in that group.
    </p>
   
    <h2 id="policy-vars-using-variables">Using variables in policies</h2>
    <p>You can define dynamic values inside policies by using <em>policy
        variables</em> that set placeholders in a policy. When the policy is evaluated, the
      policy variables are replaced with values that come from the conditional context keys passed
      in the request. Global condition context keys can be used as variables in requests across
      AWS services. Service specific condition keys can also be used as variables when interacting
      with AWS resources, but are only available when requests are made against resources which
      support them. For a list of context keys available for each AWS service and resource, see
      the <a href="https://docs.aws.amazon.com/service-authorization/latest/reference/reference.html"><em>Service Authorization Reference</em></a>.</p>
    <p>Variables can be used in <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html">identity-based policies, resource policies,
        service control policies, session policies</a>, and <a href="https://docs.aws.amazon.com/vpc/latest/privatelink/vpc-endpoints-access.html">VPC endpoint policies</a>.
      Identity-based policies used as permissions boundaries also support policy variables. </p>
    <p>Under certain circumstances, you canâ€™t populate global condition context keys with a
      value. To learn more about each key, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_condition-keys.html"><em>AWS global
          condition context keys</em></a>. </p>
    <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><div class="itemizedlist">
         
         
      <ul class="itemizedlist"><li class="listitem">
          <p>Key names are case-insensitive. For example, <code class="code">aws:CurrentTime</code> is
            equivalent to <code class="code">AWS:currenttime</code>.</p>
        </li><li class="listitem">
          <p>You can use any single-valued condition key as a variable. You can't use a
            multivalued condition key as a variable.</p>
        </li></ul></div></div></div>
    <p>The following example shows a policy for or an IAM role or user that replaces a specific
      resource name with a policy variable. You can reuse this policy by taking advantage of the
        <code class="code">aws:PrincipalTag</code> condition key. When this policy is evaluated,
        <code class="code">$<span>{</span>aws:PrincipalTag/team}</code> allows the actions only if the bucket name ends with a
      team name from the <code class="code">project</code> principal tag.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Action": ["s3:ListBucket"],      
      "Resource": ["arn:aws:s3:::DOC-EXAMPLE-BUCKET"],
      "Condition": <span>{</span>"StringLike": <span>{</span>"s3:prefix": ["$<span>{</span>aws:PrincipalTag/project}/*"]}}
    },
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "s3:GetObject",
        "s3:PutObject"
      ],      
      "Resource": ["arn:aws:s3:::DOC-EXAMPLE-BUCKET/$<span>{</span>aws:PrincipalTag/project}/*"]
    }
  ]
}</code></pre>
    <p>The variable is marked using a <code class="code">$</code> prefix followed by a pair of curly braces
        (<code class="code"><span>{</span> }</code>). Inside the <code class="code">$<span>{</span> }</code> characters, you can include the name of the
      value from the request that you want to use in the policy. The values you can use are
      discussed later on this page.</p>
    <p>For details about this global condition key, see <a href="./reference_policies_condition-keys.html#condition-keys-principaltag">aws:PrincipalTag/tag-key</a> in the
      list of global condition keys.</p>
    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>In order to use policy variables, you must include the <code class="code">Version</code> element in a
        statement, and the version must be set to a version that supports policy variables.
        Variables were introduced in version <code class="code">2012-10-17</code>. Earlier versions of the policy
        language don't support policy variables. If you don't include the <code class="code">Version</code>
        element and set it to an appropriate version date, variables like
          <code class="code">$<span>{</span>aws:username}</code> are treated as literal strings in the policy. </p><p>A <code class="code">Version</code> policy element is different from a policy version. The
          <code class="code">Version</code> policy element is used within a policy and defines the version of the
        policy language. A policy version, on the other hand, is created when you change a customer
        managed policy in IAM. The changed policy doesn't overwrite the existing policy. Instead,
        IAM creates a new version of the managed policy. To learn more about the
          <code class="code">Version</code> policy element see <a href="./reference_policies_elements_version.html">IAM JSON policy elements:
        Version</a>. To learn more about policy versions, see
          <a href="./access_policies_managed-versioning.html">Versioning IAM policies</a>.</p></div></div>
    <p>A policy that allows a principal to get objects from the /David path of an S3 bucket looks
      like this:</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [<span>{</span>
    "Effect": "Allow",
    "Action": ["s3:GetObject"],    
    "Resource": ["arn:aws:s3::DOC-EXAMPLE-BUCKET/<code class="replaceable">David</code>/*"]
  }]
}</code></pre>
    <p>If this policy is attached to user <code class="code">David</code>, that user get objects from his own
      S3 bucket, but you would have to create a separate policy for each user that includes the
      user's name. You would then attach each policy to the individual users.</p>
    <p>By using a policy variable, you can create policies that can be reused. The following
      policy allows a user to get objects from an Amazon S3 bucket if the tag-key value for
        <code class="code">aws:PrincipalTag</code> matches the tag-key <code class="code">owner</code> value passed in the
      request. </p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [<span>{</span>
    "Sid": "AllowUnlessOwnedBySomeoneElse",
    "Effect": "Allow",
    "Action": ["s3:GetObject"],    
    "Resource": ["*"],
    "Condition": <span>{</span>
        "StringEquals": <span>{</span>
          "$<span>{</span>s3:ExistingObjectTag/owner}": "$<span>{</span>aws:PrincipalTag/owner}"
        }
      }
    }
  ]
}</code></pre>
    <p>When you use a policy variable in place of a user like this, you don't have to have a
      separate policy for each individual user. In the following example, the policy is attached to
      an IAM role that is assumed by Product Managers using temporary security credentials. When a
      user makes a request to add an Amazon S3 object, IAM substitutes the <code class="code">dept</code> tag value
      from the current request for the <code class="code">$<span>{</span>aws:PrincipalTag}</code> variable and evaluates the
      policy. </p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [<span>{</span>
    "Sid": "AllowOnlyDeptS3Prefix",
    "Effect": "Allow",
    "Action": ["s3:GetObject"],    
    "Resource": ["arn:aws:s3:::DOC-EXAMPLE-BUCKET/$<span>{</span>aws:PrincipalTag/dept}/*"],    
    }
  ]
}</code></pre>
   
    <h2 id="policy-vars-tags">Tags as policy variables</h2>
    <p>In some AWS services you can attach your own custom attributes to resources that are
      created by those services. For example, you can apply tags to Amazon S3 buckets or to IAM users.
      These tags are key-value pairs. You define the tag key name and the value that is associated
      with that key name. For example, you might create a tag with a
        <code class="userinput">department</code> key and a <code class="userinput">Human Resources</code> value.
      For more information about tagging IAM entities, see <a href="./id_tags.html">Tagging IAM resources</a>. For information about tagging resources created by other AWS
      services, see the documentation for that service. For information about using Tag Editor, see
        <a href="https://docs.aws.amazon.com/awsconsolehelpdocs/latest/gsg/tag-editor.html">Working with Tag
        Editor</a> in the <em>AWS Management Console User Guide</em>.</p>
    <p>You can tag IAM resources to simplify discovering, organizing, and tracking your IAM
      resources. You can also tag IAM identities to control access to resources or to tagging
      itself. To learn more about using tags to control access, see <a href="./access_iam-tags.html">Controlling access to and for IAM users and roles using
         tags</a>. </p>
   
    <h2 id="policy-vars-wheretouse">Where you can use policy variables</h2>
    <p> You can use policy variables in the <code class="code">Resource</code> element and in string
      comparisons in the <code class="code">Condition</code> element.</p>

     
      <h3 id="policy-vars-resourceelement">Resource element</h3>
      <p>You can use a policy variable in the <code class="code">Resource</code> element, but only in the
        resource portion of the ARN. This portion of the ARN appears after the fifth colon (:). You
        can't use a variable to replace parts of the ARN before the fifth colon, such as the service
        or account. For more information about the ARN format, see <a href="./reference_identifiers.html#identifiers-arns">IAM ARNs</a>.</p>
      <p>To replace part of an ARN with a tag value, surround the prefix and key name with
          <code class="code">$<span>{</span> }</code>. For example, the following Resource element refers to only a bucket
        that is named the same as the value in the requesting user's department tag.</p>
      <p><code class="code">"Resource":
            ["arn:aws::s3:::bucket/$<span>{</span>aws:PrincipalTag/<code class="replaceable">department</code>}"]</code></p>

      <p>Many AWS resources use ARNs that contain a user-created name. The following IAM policy
        ensures that only intended users with matching access-project, access-application, and
        access-environment tag values can modify their resources. In addition, using <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements_resource.html">* wildcard matches</a>, they are able to allow for custom resource name suffixes. </p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Sid": "AllowAccessBasedOnArnMatching",
      "Effect": "Allow",
      "Action": [
        "sns:CreateTopic",
        "sns:DeleteTopic"],      
      "Resource": ["arn:aws:sns:*:*:$<span>{</span>aws:PrincipalTag/<code class="replaceable">access-project</code>}-$<span>{</span>aws:PrincipalTag/<code class="replaceable">access-application</code>}-$<span>{</span>aws:PrincipalTag/<code class="replaceable">access-environment</code>}-*"
      ]
    }
  ]
} </code></pre>     
    
     
     
      <h3 id="policy-vars-conditionelement">Condition element</h3>
      <p>You can use a policy variable for <code class="code">Condition</code> values in any condition that
        involves the string operators or the ARN operators. String operators include
          <code class="code">StringEquals</code>, <code class="code">StringLike</code>, and <code class="code">StringNotLike</code>. ARN
        operators include <code class="code">ArnEquals</code> and <code class="code">ArnLike</code>. You can't use a policy
        variable with other operators, such as <code class="code">Numeric</code>, <code class="code">Date</code>,
          <code class="code">Boolean</code>, <code class="code">Binary</code>, <code class="code">IP Address</code>, or <code class="code">Null</code>
        operators. For more information about condition operators, see <a href="./reference_policies_elements_condition_operators.html">IAM JSON policy elements:
      Condition operators</a>.</p>
      <p>The following Amazon SNS topic policy gives users in AWS account <code class="code">999999999999</code>
        the ability to manage (perform all actions for) the topic. However this permission is
        granted only if the URL matches their AWS user name. </p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Principal": <span>{</span>
        "AWS": "999999999999"
      },
      "Effect": "Allow",
      "Action": "sns:*",
      "Condition": <span>{</span>
        "StringLike": <span>{</span>
          "sns:endpoint": "https://example.com/$<span>{</span>aws:PrincipalTag}/"
        },
        "StringEquals": <span>{</span>
          "sns:Protocol": "https"
        }
      }
    }
  ]
}</code></pre>
      <p>When referencing a tag in a <code class="code">Condition</code> element expression, use the relevant
        prefix and key name as the condition key. Then use the value that you want to test in the
        condition value.</p> 
      <p>For example, the following policy example allows full access to 
        users, but only if the tag <code class="code">costCenter</code> is attached to the user. The tag must
        also have a value of either <code class="code">12345</code> or <code class="code">67890</code>. If the tag has no
        value, or has any other value, then the request fails.</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Action": [
          "iam:*user*"
       ],
      "Resource": "*",
      "Condition": <span>{</span>
        "StringLike": <span>{</span>
          "iam:ResourceTag/costCenter": [ "12345", "67890" ]
        }
      }
    }
  ]
}</code></pre>
     
   
    <h2 id="policy-vars-no-value">Policy variables with no value</h2>
    <p>When policy variables reference a condition context key that has no value or is not
      present in an authorization context for a request, the value is effectively null. There is no
      equal or like value. Condition context keys may not be present in the authorization context
      when:</p>
    <div class="itemizedlist">
       
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p>You are using service specific condition context keys in requests to resources that do
          not support that condition key.</p>
      </li><li class="listitem">
        <p>Tags on IAM principals, sessions, resources, or requests are not present.</p>
      </li><li class="listitem">
        <p>Other circumstances as listed for each global condition context key in <a href="./reference_policies_condition-keys.html">AWS global condition context
            keys</a>.</p>
      </li></ul></div>
    <p>When you use a variable with no value in the condition element of an IAM policy, <a href="./reference_policies_elements_condition_operators.html">IAM JSON policy elements:
      Condition operators</a> like
        <code class="code">StringEquals</code> or <code class="code">StringLike</code> do not match, and the policy statement
      does not take effect.</p>

    <p>Inverted condition operators like <code class="code">StringNotEquals</code> or
        <code class="code">StringNotLike</code> do match against a null value, as the value of the condition key
      they are testing against is not equal to or like the effectively null value.</p>
    <p>In the following example, <code class="code">aws:principaltag/Team</code> must be equal to
        <code class="code">s3:ExistingObjectTag/Team</code> to allow access. Access is explicitly denied when
        <code class="code">aws:principaltag/Team</code> is not set. If a variable that has no value in the
      authorization context is used as part of the <code class="code">Resource</code> or <code class="code">NotResource</code>
      element of a policy, the resource that includes a policy variable with no value will not match
      any resource.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Effect": "Deny",
      "Action": "s3:GetObject",
      "Resource": "arn:aws:s3:::/example-bucket/*",
        "StringNotEquals": <span>{</span>
          "s3:ExistingObjectTag/Team": "$<span>{</span>aws:PrincipalTag/Team}"
        }
      }
    }
  ]
}</code></pre>

   
    <h2 id="policy-vars-infotouse">Request information that you can use for policy
        variables</h2>
    <p> You can use the <code class="code">Condition</code> element of a JSON policy to compare keys in the
        <a href="./reference_policies_evaluation-logic.html#policy-eval-reqcontext">request context</a> with key values that you
      specify in your policy. When you use a policy variable, AWS substitutes a value from the
      request context key in place of the variable in your policy.</p>



     
      <h3 id="principaltable">Principal key values</h3>
      <p>The values for <code class="code">aws:username</code>, <code class="code">aws:userid</code>, and
          <code class="code">aws:PrincipalType</code> depend on what type of principal initiated the request. For
        example, the request could be made using the credentials of an IAM user, an IAM role, or
        the AWS account root user. The following <span>table</span>
         shows values for these keys for different types
        of principals. </p>
      <div class="table-container"><div class="table-contents"><table id="w340aac35c19c11c38c19b5b5"><thead>
            <tr>
              <th>Principal</th>
              <th><code class="code">aws:username</code></th>
              <th><code class="code">aws:userid</code></th>
              <th><code class="code">aws:PrincipalType</code></th>
            </tr>
          </thead>
            <tr>
              <td>AWS account root user</td>
              <td>(not present)</td>
              <td>AWS account ID</td>
              <td><code class="code">Account</code></td>
            </tr>
            <tr>
              <td>IAM user</td>
              <td><code class="replaceable">IAM-user-name</code></td>
              <td><a href="./reference_identifiers.html#identifiers-unique-ids">unique ID</a></td>
              <td><code class="code">User</code></td>
            </tr>
            <tr>
              <td>Federated user</td>
              <td>(not present)</td>
              <td><code class="replaceable">account</code>:<code class="replaceable">caller-specified-name</code></td>
              <td><code class="code">FederatedUser</code></td>
            </tr>
            <tr>
              <td>Web federated user (Login with Amazon, Amazon Cognito, Facebook, Google)
                  <p>For information about policy keys that are available when you use web
                  identity federation, see <a href="./id_roles_providers_oidc_user-id.html">Identifying users with web identity
    federation</a>. </p></td>
              <td>(not present)</td>
              <td>
                <p>
                  <code class="replaceable">role-id</code>:<code class="replaceable">caller-specified-role-name</code>
                </p>
                <p>where <code class="code">role-id</code> is the <a href="./reference_identifiers.html#identifiers-unique-ids">unique id of the role</a> and the caller-specified-role-name is specified by
                  the <a href="https://docs.aws.amazon.com/IAM/latest/APIReference/API_AssumeRole.html#API_AssumeRoleWithWebIdentity_RequestParameters">RoleSessionName parameter</a> passed to the AssumeRoleWithWebIdentity
                  request.</p>
              </td>
              <td><code class="code">AssumedRole</code></td>
            </tr>
            <tr>
              <td>SAML federated user <p>For information about policy keys that are available
                  when you use SAML federation, see <a href="./id_roles_providers_saml.html#CreatingSAML-userid">Uniquely identifying users in SAML-based
          federation</a>. </p></td>
              <td>(not present)</td>
              <td>
                <p><code class="replaceable">role-id</code>:<code class="replaceable">caller-specified-role-name</code></p>
                <p>where <code class="code">role-id</code> is the <a href="./reference_identifiers.html#identifiers-unique-ids">unique id of the role</a> and the caller-specified-role-name is specified by
                  the Attribute element with the <a href="./id_roles_providers_create_saml_assertions.html">Name attribute</a> set to
                  https://aws.amazon.com/SAML/attributes/RoleSessionName.</p>
              </td>
              <td><code class="code">AssumedRole</code></td>
            </tr>
            <tr>
              <td>Assumed role</td>
              <td>(not present)</td>
              <td>
                <p><code class="replaceable">role-id</code>:<code class="replaceable">caller-specified-role-name</code></p>
                <p>where <code class="code">role-id</code> is the <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_identifiers.html#identifiers-unique-ids">unique id
                    of the role</a> and the caller-specified-role-name is specified by the
                    <a href="https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRole.html#API_AssumeRole_RequestParameters">RoleSessionName parameter</a> passed to the AssumeRole request.</p>
              </td>
              <td><code class="code">AssumedRole</code></td>
            </tr>
            <tr>
              <td>Role assigned to an Amazon EC2 instance</td>
              <td>(not present)</td>
              <td>
                <p><code class="replaceable">role-id</code>:<code class="replaceable">ec2-instance-id</code></p>
                <p>where <code class="code">role-id</code> is <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_identifiers.html#identifiers-unique-ids">the unique
                    id of the role</a> and the ec2-instance-id is the <a href="https://docs.aws.amazon.com/AWSEC2/latest/APIReference/API_DescribeInstances.html">unique identifier of the EC2 instance</a>.</p>
              </td>
              <td><code class="code">AssumedRole</code></td>
            </tr>
            <tr>
              <td>Anonymous caller (Amazon SQS, Amazon SNS, and Amazon S3 only)</td>
              <td>(not present)</td>
              <td><code class="code">anonymous</code></td>
              <td><code class="code">Anonymous</code></td>
            </tr>
          </table></div></div>
      
      <p>For the items in this <span>table,</span>
         note the following:</p>
      <div class="itemizedlist">
         
         
         
         
      <ul class="itemizedlist"><li class="listitem">
          <p><em>not present</em> means that the value is not in the current request
            information, and any attempt to match it fails and causes the statement to be invalid.
          </p>
        </li><li class="listitem">
          <p><code class="replaceable">role-id</code> is a unique identifier assigned to each role at
            creation. You can display the role ID with the AWS CLI command: <code class="code">aws iam get-role
              --role-name <code class="replaceable">rolename</code></code></p>
        </li><li class="listitem">
          <p><code class="replaceable">caller-specified-name</code> and
              <code class="replaceable">caller-specified-role-name</code> are names that are passed by the
            calling process (such as an application or service) when it makes a call to get
            temporary credentials.</p>
        </li><li class="listitem">
          <p><code class="replaceable">ec2-instance-id</code> is a value assigned to the instance when
            it is launched and appears on the <b>Instances</b> page of the Amazon EC2
            console. You can also display the instance ID by running the AWS CLI command: <code class="code">aws
              ec2 describe-instances</code></p>
        </li></ul></div>

     
     
      <h3 id="policy-vars-infoWIF">Information available in requests for federated
          users</h3>
      <p>Federated users are users who are authenticated using a system other than IAM. For
        example, a company might have an application for use in-house that makes calls to AWS. It
        might be impractical to give an IAM identity to every corporate user who uses the
        application. Instead, the company might use a proxy (middle-tier) application that has a
        single IAM identity, or the company might use a SAML identity provider (IdP). The proxy
        application or SAML IdP authenticates individual users using the corporate network. A proxy
        application can then use its IAM identity to get temporary security credentials for
        individual users. A SAML IdP can in effect exchange identity information for AWS temporary
        security credentials. The temporary credentials can then be used to access AWS resources. </p>
      <p>Similarly, you might create an app for a mobile device in which the app needs to access
        AWS resources. In that case, you might use <em>web identity federation</em>,
        where the app authenticates the user using a well-known identity provider like Login with
        Amazon, Amazon Cognito, Facebook, or Google. The app can then use the user's authentication
        information from these providers to get temporary security credentials for accessing AWS
        resources. </p>
      <p>The recommended way to use web identity federation is by taking advantage of Amazon
        Cognito and the AWS mobile SDKs. For more information, see the following:</p>
      <div class="itemizedlist">
         
         
      <ul class="itemizedlist"><li class="listitem">
          <p><a href="https://docs.aws.amazon.com/cognito/latest/developerguide/cognito-identity.html">Amazon Cognito User Guide</a>.
          </p>
        </li><li class="listitem">
          <p><a href="./id_credentials_temp.html#sts-introduction">Common scenarios for temporary credentials</a>.</p>
        </li></ul></div>
     

     
      <h3 id="policy-vars-specialchars">Special characters</h3>
      <p>There are a few special predefined policy variables that have fixed values that enable
        you to represent characters that otherwise have special meaning. If these special characters
        are part of the string, you are trying to match and you inserted them literally they would
        be misinterpreted. For example, inserting an * asterisk in the string would be interpreted
        as a wildcard, matching any characters, instead of as a literal *. In these cases, you can
        use the following predefined policy variables:</p>
      <div class="itemizedlist">
         
         
         
      <ul class="itemizedlist"><li class="listitem">
          <p><b>$<span>{</span>*}</b> - use where you need an * (asterisk)
            character.</p>
        </li><li class="listitem">
          <p><b>$<span>{</span>?}</b> - use where you need a ? (question mark)
            character.</p>
        </li><li class="listitem">
          <p><b>$<span>{</span>$}</b> - use where you need a $ (dollar sign)
            character.</p>
        </li></ul></div>
      <p>These predefined policy variables can be used in any string where you can use regular
        policy variables.</p>
     
   
    <h2 id="policy-vars-default-values">Specifying default values</h2>

    <p>To add a default value to a variable, surround the default value with single quotes
        (<code class="code">' '</code>), and separate the variable text and the default value with a
      comma and space (<code class="code">, </code>).</p>
    <p>For example, if a principal is tagged with <code class="code">team=yellow</code>, they can access
        <code class="code">ExampleCorp's</code> Amazon S3 bucket named <code class="code"><code class="replaceable">DOC-EXAMPLE-BUCKET</code>-yellow</code>. A
      policy with this resource allows team members to access their team bucket, but not those of
      other teams. For users without team tags, it sets a default value of <code class="code">company-wide</code>
      for the bucket name. These users can access only the
        <code class="code"><code class="replaceable">DOC-EXAMPLE-BUCKET</code>-company-wide</code> bucket where they can view broad information,
      such as instructions for joining a team.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">"Resource":"arn:aws:s3:::<code class="replaceable"><code class="replaceable">DOC-EXAMPLE-BUCKET</code></code>-$<span>{</span>aws:PrincipalTag/team, '<code class="replaceable">company-wide</code>'}"</code></pre>
    
   
    <h2 id="policy-vars-formoreinfo">For more information</h2>
    <p>For more information about policies, see the following: </p>
    <div class="itemizedlist">
       
       
       
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p>
          <a href="./access_policies.html">Policies and permissions in IAM</a>
        </p>
      </li><li class="listitem">
        <p>
          <a href="./access_policies_examples.html">Example IAM identity-based policies</a>
        </p>
      </li><li class="listitem">
        <p>
          <a href="./reference_policies_elements.html">IAM JSON policy elements reference</a>
        </p>
      </li><li class="listitem">
        <p>
          <a href="./reference_policies_evaluation-logic.html">Policy evaluation logic</a>
        </p>
      </li><li class="listitem">
        <p>
          <a href="./id_roles_providers_oidc.html">About web identity federation</a></p>
      </li></ul></div>
  <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./reference_policies_single-vs-multi-valued-condition-keys.html">Single-valued vs.
            multivalued condition keys</div><div id="next" class="next-link" accesskey="n" href="./reference_policies_elements_datatypes.html">Supported data types</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/reference_policies_variables.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/reference_policies_variables.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>