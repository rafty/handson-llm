<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Granting a user permissions to pass a role to an AWS service - AWS Identity and Access Management</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="id_roles_use_passrole" /><meta name="default_state" content="id_roles_use_passrole" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use_passrole.html" /><meta name="description" content="Grant permissions to an IAM user to pass a role to an AWS service." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS Identity and Access Management" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Control access to your AWS resources with user identity (authentication) and with policies that define specific permissions (authorization)." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use_passrole.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/id_roles_use_passrole.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/id_roles_use_passrole.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/id_roles_use_passrole.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/id_roles_use_passrole.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use_passrole.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use_passrole.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/id_roles_use_passrole.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/id_roles_use_passrole.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/id_roles_use_passrole.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/id_roles_use_passrole.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/id_roles_use_passrole.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/id_roles_use_passrole.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/id_roles_use_passrole.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/id_roles_use_passrole.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/id_roles_use_passrole.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/id_roles_use_passrole.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/id_roles_use_passrole.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/id_roles_use_passrole.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/IAM/latest/UserGuide/id_roles_use_passrole.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/id_roles_use_passrole.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use_passrole.html" hreflang="x-default" /><meta name="feedback-item" content="IAM" /><meta name="this_doc_product" content="AWS Identity and Access Management" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'iam'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="Granting a user permissions to pass a role to an AWS service" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Granting a user permissions to pass a role to an AWS service - AWS Identity and Access Management</title><meta name="pdf" content="/pdfs/IAM/latest/UserGuide/iam-ug.pdf#id_roles_use_passrole" /><meta name="github" content="https://github.com/awsdocs/iam-user-guide/tree/main/doc_source/id_roles_use_passrole.md" /><meta name="rss" content="aws-iam-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=76" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/id_roles_use_passrole.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/id_roles_use_passrole.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/id_roles_use_passrole.html" /><meta name="keywords" content="IAM,AWS Identity and Access Management,IAM user,user,IAM group,group,IAM role,role,permission policy,trust policy,policy,access key,password" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS Identity and Access Management",
        "item" : "https://docs.aws.amazon.com/iam/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "IAM Identities (users, user groups, and roles)",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/id.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "IAM roles",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Using IAM roles",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "Granting a user permissions to pass a role to an AWS service",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/IAM/latest/UserGuide/iam-ug.pdf#id_roles_use_passrole" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a href="https://github.com/awsdocs/iam-user-guide/tree/main/doc_source/id_roles_use_passrole.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/iam/index.html">AWS Identity and Access Management</a><a href="introduction.html">User Guide</a></div><div id="page-toc-src"><a href="#id_roles_use_passrole_logs">iam:PassRole actions in AWS CloudTrail
        logs</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="id_roles_use_passrole">Granting a user permissions to pass a role to an AWS
      service</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>To configure many AWS services, you must <em>pass</em> an IAM
    role to the service. This allows the service to assume the role later and perform actions on
    your behalf. For most services, you only have to pass the role to the service once during setup,
    and not every time that the service assumes the role. For example, assume that you have an
    application running on an Amazon EC2 instance. That application requires temporary credentials for
    authentication, and permissions to authorize the application to perform actions in AWS. When
    you set up the application, you must pass a role to Amazon EC2 to use with the instance that provides
    those credentials. You define the permissions for the applications running on the instance by
    attaching an IAM policy to the role. The application assumes the role every time it needs to
    perform the actions that are allowed by the role.</p><p>To pass a role (and its permissions) to an AWS service, a user must have permissions to
      <em>pass the role</em> to the service. This helps administrators ensure that only
    approved users can configure a service with a role that grants permissions. To allow a user to
    pass a role to an AWS service, you must grant the <code class="code">PassRole</code> permission to the
    user's IAM user, role, or group.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Notes</h6></div><div class="awsdocs-note-text"><div class="itemizedlist">
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p>You cannot use the <code class="code">PassRole</code> permission to pass a cross-account
          role.</p>
      </li><li class="listitem">
        <p>You cannot limit permissions to pass a role based on tags attached to the role using
          the <code class="code">ResourceTag/<code class="replaceable">key-name</code></code> condition key. For more
          information, see <a href="./access_tags.html#access_tags_control-resources">Controlling access to AWS
                resources</a>.</p>
      </li></ul></div></div></div><p>When you specify a service-linked role, you must also have permission to pass that role to
    the service. Some services automatically create a service-linked role in your account when you
    perform an action in that service. For example, Amazon EC2 Auto Scaling creates the
      <code class="code">AWSServiceRoleForAutoScaling</code> service-linked role for you when you create an Auto
    Scaling group for the first time. If you try to specify the service-linked role when you create
    an Auto Scaling group and you don't have the <code class="code">iam:PassRole</code> permission, you receive an
    error. If you don't explicitly specify the role, the <code class="code">iam:PassRole</code> permission is not required,
    and the default is to use <code class="code">AWSServiceRoleForAutoScaling</code> role for all operations that are
    performed on that group. To learn which services support service-linked roles, see <a href="./reference_aws-services-that-work-with-iam.html">AWS services that work with
      IAM</a>. To learn which services
    automatically create a service-linked role when you perform an action in that service, choose
    the <b>Yes</b> link and view the service-linked role documentation for the
    service.</p><p>A user can pass a role ARN as a parameter in any API operation that uses the role to assign
    permissions to the service. The service then checks whether that user has the
      <code class="code">iam:PassRole</code> permission. To limit the user to passing only approved roles, you
    can filter the <code class="code">iam:PassRole</code> permission with the <code class="code">Resources</code> element of
    the IAM policy statement. </p><p>You can use the <code class="code">Condition</code> element in a JSON policy to test the value of keys
    included in the request context of all AWS requests. To learn more about using condition keys
    in a policy, see <a href="./reference_policies_elements_condition.html">IAM JSON policy elements:
        Condition</a>. The <code class="code">iam:PassedToService</code>
    condition key can be used to specify the service principal of the service to which a role can be
    passed. To learn more about using the <code class="code">iam:PassedToService</code> condition key in a
    policy, see <a href="./reference_policies_iam-condition-keys.html#ck_PassedToService">iam:PassedToService</a>.</p>
    <h6>Example 1</h6>
    <p>Suppose you want to grant a user the ability to pass any of an approved set of roles to
      the Amazon EC2 service upon launching an instance. You need three elements:</p>
  <div class="itemizedlist">
     
     
     
  <ul class="itemizedlist"><li class="listitem">
      <p>An IAM <em>permissions policy</em> attached to the role that determines
        what the role can do. Scope permissions to only the actions that the role must perform, and
        to only the resources that the role needs for those actions. You can use an AWS managed or
        customer-created IAM permissions policy.</p>
      <pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight"><span>{</span>
    "Version": "2012-10-17",
    "Statement": <span>{</span>
        "Effect": "Allow",
        "Action": [ "<code class="replaceable">A list of the permissions the role is allowed to use</code>" ],
        "Resource": [ "<code class="replaceable">A list of the resources the role is allowed to access</code>" ]
    }
}      </code></pre>
    </li><li class="listitem">
      <p>A<em> trust policy</em> for the role that allows the service to assume the
        role. For example, you could attach the following trust policy to the role with the
          <code class="code">UpdateAssumeRolePolicy</code> action. This trust policy allows Amazon EC2 to use the role
        and the permissions attached to the role.</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Version": "2012-10-17",
    "Statement": <span>{</span>
        "Sid": "TrustPolicyStatementThatAllowsEC2ServiceToAssumeTheAttachedRole",
        "Effect": "Allow",
        "Principal": <span>{</span> "Service": "ec2.amazonaws.com" },
       "Action": "sts:AssumeRole"
    }
}                    </code></pre>
    </li><li class="listitem">
      <p>An IAM <em>permissions policy</em> attached to the IAM user that allows
        the user to pass only those approved roles. You usually add <code class="code">iam:GetRole</code> to
          <code class="code">iam:PassRole</code> so the user can get the details of the role to be passed. In
        this example, the user can pass only roles that exist in the specified account with names
        beginning with <code class="code">EC2-roles-for-XYZ-</code>:</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
    "Version": "2012-10-17",
    "Statement": [<span>{</span>
        "Effect": "Allow",
        "Action": [
            "iam:GetRole",
            "iam:PassRole"
        ],
        "Resource": "arn:aws:iam::<code class="replaceable">account-id</code>:role/EC2-roles-for-XYZ-*"
    }]
}</code></pre>
    </li></ul></div><p>Now the user can start an Amazon EC2 instance with an assigned role. Applications running on the
    instance can access temporary credentials for the role through the instance profile metadata.
    The permissions policies attached to the role determine what the instance can do. </p>
    <h6>Example 2</h6>
    <p>Amazon Relational Database Service (Amazon RDS) supports a feature called <b>Enhanced
        Monitoring</b>. This feature enables Amazon RDS to monitor a database instance using an
      agent. It also allows Amazon RDS to log metrics to Amazon CloudWatch Logs. To enable this feature, you must
      create a service role to give Amazon RDS permissions to monitor and write metrics to your logs.
    </p>
  <div class="procedure"><h6>To create a role for Amazon RDS enhanced monitoring</h6><ol><li><p>Sign in to the AWS Management Console and open the IAM console at <a href="https://console.aws.amazon.com/iam/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/iam/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></li><li>
      <p>Choose <b>Roles</b>, and then choose <b>Create
        role</b>.</p>
    </li><li>
      <p>Choose the <b>AWS Service</b> role type, and then for <b>Use
          cases for other AWS services</b>, choose the <b>RDS</b> service.
        Choose <b>RDS – Enhanced Monitoring</b>, and then choose
          <b>Next</b>.</p>
    </li><li>
      <p>Choose the <b>AmazonRDSEnhancedMonitoringRole</b> permissions
        policy.</p>
    </li><li>
      <p>Choose <b>Next</b>.</p>
    </li><li>

      <p>For <b>Role name</b>, enter a role name that helps you identify the
        purpose of this role. Role names must be unique within your AWS account. They are not
        distinguished by case. For example, you cannot create roles named both
          <code class="userinput">PRODROLE</code> and <code class="userinput">prodrole</code>. Because various
        entities might reference the role, you cannot edit the name of the role after it has been
        created. </p>
    </li><li>
      <p>(Optional) For <b>Description</b>, enter a description for the new
        role.</p>
    </li><li>
      <p>(Optional) Add metadata to the user by attaching tags as key-value pairs. For more
        information about using tags in IAM, see <a href="./id_tags.html">Tagging IAM resources</a>.</p>
    </li><li>
      <p>Review the role and then choose <b>Create role</b>.</p>
    </li></ol></div><p>The role automatically gets a trust policy that grants the
      <code class="code">monitoring.rds.amazonaws.com</code> service permissions to assume the role. After it
    does, Amazon RDS can perform all of the actions that the <code class="code">AmazonRDSEnhancedMonitoringRole</code>
    policy allows.</p><p>The user that you want to access Enhanced Monitoring needs a policy that includes a
    statement that allows the user to to list the RDS roles and a statement that allows the user to
    pass the role, like the following. Use your account number and replace the role name with the
    name you provided in step 6.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">    <span>{</span>
      "Sid": "PolicyStatementToAllowUserToListRoles",
      "Effect": "Allow",
      "Action": ["iam:ListRoles"],
      "Resource": "*"
    },
    <span>{</span>
        "Sid": "PolicyStatementToAllowUserToPassOneSpecificRole",
        "Effect": "Allow",
        "Action": [ "iam:PassRole" ],
        "Resource": "arn:aws:iam::<code class="replaceable">account-id</code>:role/<code class="replaceable">RDS-Monitoring-Role</code>"
    }
   </code></pre><p>You can combine this statement with statements in another policy or put it in its own
    policy. To instead specify that the user can pass any role that begins with <code class="code">RDS-</code>,
    you can replace the role name in the resource ARN with a wildcard, as follows.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">        "Resource": "arn:aws:iam::<code class="replaceable">account-id</code>:role/RDS-*"</code></pre>
    <h2 id="id_roles_use_passrole_logs"><code class="code">iam:PassRole</code> actions in AWS CloudTrail
        logs</h2>
    <p>
      <code class="code">PassRole</code> is not an API call. <code class="code">PassRole</code> is a permission, meaning no
      CloudTrail logs are generated for IAM <code class="code">PassRole</code>. To review what roles are passed to
      which AWS services in CloudTrail, you must review the CloudTrail log that created or modified the AWS
      resource receiving the role. For example, a role is passed to an AWS Lambda function when it's
      created. The log for the <code class="code">CreateFunction</code> action shows a record of role that was
      passed to the function. </p>
  <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./id_roles_use_permissions-to-switch.html">Granting a user permissions to switch roles</div><div id="next" class="next-link" accesskey="n" href="./id_roles_use_switch-role-console.html">Switching roles (console)</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/id_roles_use_passrole.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/id_roles_use_passrole.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>