<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>AWS JSON policy elements: Principal - AWS Identity and Access Management</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="reference_policies_elements_principal" /><meta name="default_state" content="reference_policies_elements_principal" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements_principal.html" /><meta name="description" content="Describes the Principal element of the AWS JSON policy language." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS Identity and Access Management" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Control access to your AWS resources with user identity (authentication) and with policies that define specific permissions (authorization)." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements_principal.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/reference_policies_elements_principal.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/reference_policies_elements_principal.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/reference_policies_elements_principal.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/reference_policies_elements_principal.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements_principal.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements_principal.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/reference_policies_elements_principal.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/reference_policies_elements_principal.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/reference_policies_elements_principal.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/reference_policies_elements_principal.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/reference_policies_elements_principal.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/reference_policies_elements_principal.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/reference_policies_elements_principal.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/reference_policies_elements_principal.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/reference_policies_elements_principal.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/reference_policies_elements_principal.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/reference_policies_elements_principal.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/reference_policies_elements_principal.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/IAM/latest/UserGuide/reference_policies_elements_principal.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/reference_policies_elements_principal.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements_principal.html" hreflang="x-default" /><meta name="feedback-item" content="IAM" /><meta name="this_doc_product" content="AWS Identity and Access Management" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'iam'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="AWS JSON policy elements: Principal" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>AWS JSON policy elements: Principal - AWS Identity and Access Management</title><meta name="pdf" content="/pdfs/IAM/latest/UserGuide/iam-ug.pdf#reference_policies_elements_principal" /><meta name="github" content="https://github.com/awsdocs/iam-user-guide/tree/main/doc_source/reference_policies_elements_principal.md" /><meta name="rss" content="aws-iam-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=76" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/reference_policies_elements_principal.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/reference_policies_elements_principal.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/reference_policies_elements_principal.html" /><meta name="keywords" content="IAM,AWS Identity and Access Management,IAM user,user,IAM group,group,IAM role,role,permission policy,trust policy,policy,access key,password" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS Identity and Access Management",
        "item" : "https://docs.aws.amazon.com/iam/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Reference information for AWS Identity and Access Management",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/reference.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "IAM JSON policy reference",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "IAM JSON policy elements reference",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "AWS JSON policy elements: Principal",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/IAM/latest/UserGuide/iam-ug.pdf#reference_policies_elements_principal" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a href="https://github.com/awsdocs/iam-user-guide/tree/main/doc_source/reference_policies_elements_principal.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/iam/index.html">AWS Identity and Access Management</a><a href="introduction.html">User Guide</a></div><div id="page-toc-src"><a href="#Principal_specifying">Specifying a principal</a><a href="#principal-accounts">AWS account principals</a><a href="#principal-roles">IAM role principals</a><a href="#principal-role-session">Role session principals</a><a href="#principal-users">IAM user principals</a><a href="#sts-session-principals">Federated user session principals</a><a href="#principal-services">AWS service principals</a><a href="#principal-services-in-opt-in-regions">AWS service principals in opt-in
        Regions</a><a href="#principal-anonymous">All principals</a><a href="#Principal_more-info">More information</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="reference_policies_elements_principal">AWS JSON policy elements:
        Principal</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Use the <code class="code">Principal</code> element in a resource-based JSON policy to specify the
    principal that is allowed or denied access to a resource. </p><p>You must use the <code class="code">Principal</code> element in <a href="./access_policies_identity-vs-resource.html">resource-based policies</a>. Several
    services support resource-based policies, including IAM. The IAM resource-based policy type
    is a role trust policy. In IAM roles, use the <code class="code">Principal</code> element in the role trust
    policy to specify who can assume the role. For cross-account access, you must specify the
    12-digit identifier of the trusted account. 
To learn whether principals in accounts outside of your zone of trust (trusted organization or account) have access to assume your roles, see 
<a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/what-is-access-analyzer.html">What is IAM Access Analyzer?</a>.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>After you create the role, you can change the account to "*" to allow everyone to assume
      the role. If you do this, we strongly recommend that you limit who can access the role through
      other means, such as a <code class="code">Condition</code> element that limits access to only certain IP
      addresses. Do not leave your role accessible to everyone!</p></div></div><p>Other examples of resources that support resource-based policies include an Amazon S3 bucket or
    an AWS KMS key.</p><p>You cannot use the <code class="code">Principal</code> element in an identity-based policy.
    Identity-based policies are permissions policies that you attach to IAM identities (users,
    groups, or roles). In those cases, the principal is implicitly the identity where the policy is
    attached.</p><div class="highlights" id="inline-topiclist"><h6>Topics</h6><ul><li><a href="#Principal_specifying">Specifying a principal</a></li><li><a href="#principal-accounts">AWS account principals</a></li><li><a href="#principal-roles">IAM role principals</a></li><li><a href="#principal-role-session">Role session principals</a></li><li><a href="#principal-users">IAM user principals</a></li><li><a href="#sts-session-principals">AWS STS federated user session principals</a></li><li><a href="#principal-services">AWS service principals</a></li><li><a href="#principal-services-in-opt-in-regions">AWS service principals in opt-in
        Regions</a></li><li><a href="#principal-anonymous">All principals</a></li><li><a href="#Principal_more-info">More information</a></li></ul></div>
    <h2 id="Principal_specifying">Specifying a principal</h2>
    <p>You specify a principal in the <code class="code">Principal</code> element of a resource-based policy
      or in condition keys that support principals.</p>
    <p>You can specify any of the following principals in a policy:</p>
    <div class="itemizedlist">
       
       
       
       
       
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p>AWS account and root user</p>
      </li><li class="listitem">
        <p>IAM roles</p>
      </li><li class="listitem">
        <p>Role sessions </p>
      </li><li class="listitem">
        <p>IAM users</p>
      </li><li class="listitem">
        <p>Federated user sessions</p>
      </li><li class="listitem">
        <p>AWS services</p>
      </li><li class="listitem">
        <p>All principals</p>
      </li></ul></div>
    <p>You cannot identify a user group as a principal in a policy (such as a resource-based
      policy) because groups relate to permissions, not authentication, and principals are
      authenticated IAM entities.</p>
    <p>You can specify more than one principal for each of the principal types in following
      sections using an array. Arrays can take one or more values. When you specify more than one
      principal in an element, you grant permissions to each principal. This is a logical
        <code class="code">OR</code> and not a logical <code class="code">AND</code>, because you authenticate as one
      principal at a time. If you include more than one value, use square brackets (<code class="code">[</code>
      and <code class="code">]</code>) and comma-delimit each entry for the array. The following example policy
      defines permissions for the 123456789012 account or the 555555555555
      account.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Principal" : <span>{</span> 
"AWS": [ 
  "123456789012",
  "555555555555" 
  ]
}</code></pre>
    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>You cannot use a wildcard to match part of a principal name or ARN. </p></div></div>
   
    <h2 id="principal-accounts">AWS account principals</h2>
    <p>You can specify AWS account identifiers in the <code class="code">Principal</code> element of a
      resource-based policy or in condition keys that support principals. This delegates authority
      to the account. When you allow access to a different account, an administrator in that account
      must then grant access to an identity (IAM user or role) in that account. When you specify
      an AWS account, you can use the account ARN
        (arn:aws:iam::<code class="replaceable">account-ID</code>:root), or a shortened form that
      consists of the <code class="code">"AWS":</code> prefix followed by the account ID.</p>
    <p>For example, given an account ID of <code class="code">123456789012</code>, you can use either
      of the following methods to specify that account in the <code class="code">Principal</code> element:</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Principal": <span>{</span> "AWS": "arn:aws:iam::123456789012:root" }</code></pre>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Principal": <span>{</span> "AWS": "123456789012" }</code></pre>
    <p>The account ARN and the shortened account ID behave the same way. Both delegate
      permissions to the account. Using the account ARN in the <code class="code">Principal</code> element does
      not limit permissions to only the root user of the account. </p>
    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>When you save a resource-based policy that includes the shortened account ID, the
        service might convert it to the principal ARN. This does not change the functionality of the
        policy.</p></div></div>
    <p>Some AWS services support additional options for specifying an account principal. For
      example, Amazon S3 lets you specify a <a href="https://docs.aws.amazon.com/general/latest/gr/acct-identifiers.html#FindingCanonicalId">canonical user ID</a> using
      the following format:</p>
    <pre class="programlisting"><div class="code-btn-container"></div><code class="json ">"Principal": <span>{</span> "CanonicalUser": "79a59df900b949e55d96a1e698fbacedfd6e09d98eacf8f8d5218e7cd47ef2be" }</code></pre>
    <p>You can also specify more than one AWS account, (or canonical user ID) as a principal
      using an array. For example, you can specify a principal in a bucket policy using all three
      methods.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Principal": <span>{</span> 
  "AWS": [
    "arn:aws:iam::123456789012:root",
    "999999999999"
  ],
  "CanonicalUser": "79a59df900b949e55d96a1e698fbacedfd6e09d98eacf8f8d5218e7cd47ef2be"
}</code></pre>
   
    <h2 id="principal-roles">IAM role principals</h2>
    <p>You can specify IAM role principal ARNs in the <code class="code">Principal</code> element of a
      resource-based policy or in condition keys that support principals. IAM roles are
      identities. In IAM, identities are resources to which you can assign permissions. Roles
      trust another authenticated identity to assume that role. This includes a principal in AWS
      or a user from an external identity provider (IdP). When a principal or identity assumes a
      role, they receive temporary security credentials with the assumed role’s permissions. When
      they use those session credentials to perform operations in AWS, they become a
        <em>role session principal</em>. </p>
    <p>IAM roles are identities that exist in IAM. Roles trust another authenticated
      identity, such as a principal in AWS or a user from an external identity provider. When a
      principal or identity assumes a role, they receive temporary security credentials. They can
      then use those credentials as a role session principal to perform operations in AWS. </p>
    <p>When you specify a role principal in a resource-based policy, the effective permissions
      for the principal are limited by any policy types that limit permissions for the role. This
      includes session policies and permissions boundaries. For more information about how the
      effective permissions for a role session are evaluated, see <a href="./reference_policies_evaluation-logic.html">Policy evaluation logic</a>.</p>
    <p>To specify the role ARN in the <code class="code">Principal</code> element, use the following
      format:</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Principal": <span>{</span> "AWS": "arn:aws:iam::<code class="replaceable">AWS-account-ID</code>:role/<code class="replaceable">role-name</code>" }</code></pre>
    <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>If your <code class="code">Principal</code> element in a role trust policy contains an ARN that
        points to a specific IAM role, then that ARN transforms to the role unique principal ID
        when you save the policy. This helps mitigate the risk of someone escalating their
        privileges by removing and recreating the role. You don't normally see this ID in the
        console, because IAM uses a reverse transformation back to the role ARN when the trust
        policy is displayed. However, if you delete the role, then you break the relationship. The
        policy no longer applies, even if you recreate the role because the new role has a new
        principal ID that does not match the ID stored in the trust policy. When this happens, the
        principal ID appears in resource-based policies because AWS can no longer map it back to a
        valid ARN. The end result is that if you delete and recreate a role referenced in a trust
        policy's <code class="code">Principal</code> element, you must edit the role in the policy to replace the
        principal ID with the correct ARN. The ARN once again transforms into the role's new
        principal ID when you save the policy.</p></div></div>
    <p>Alternatively, you can specify the role principal as the principal in a resource-based
      policy or <a href="#principal-anonymous">create a broad-permission policy</a> that
      uses the <code class="code">aws:PrincipalArn</code> condition key. When you use this key, the role session
      principal is granted the permissions based on the ARN of role that was assumed, and not the
      ARN of the resulting session. Because AWS does not convert condition key ARNs to IDs,
      permissions granted to the role ARN persist if you delete the role and then create a new role
      with the same name. Identity-based policy types, such as permissions boundaries or session
      policies, do not limit permissions granted using the <code class="code">aws:PrincipalArn</code> condition
      key with a wildcard(*) in the <code class="code">Principal</code> element, unless the identity-based
      policies contain an explicit deny.</p>
   
    <h2 id="principal-role-session">Role session principals</h2>
    <p>You can specify role sessions in the <code class="code">Principal</code> element of a resource-based
      policy or in condition keys that support principals. When a principal or identity assumes a
      role, they receive temporary security credentials with the assumed role’s permissions. When
      they use those session credentials to perform operations in AWS, they become a
        <em>role session principal</em>.</p>
    <p>The format that you use for a role session principal depends on the AWS STS operation that
      was used to assume the role.</p>
    <p>Additionally, administrators can design a process to control how role sessions are issued.
      For example, they can provide a one-click solution for their users that creates a predictable
      session name. If your administrator does this, you can use role session principals in your
      policies or condition keys. Otherwise, you can specify the role ARN as a principal in the
        <code class="code">aws:PrincipalArn</code> condition key. How you specify the role as a principal can
      change the effective permissions for the resulting session. For more information, see <a href="#principal-roles">IAM role principals</a>. </p>
     
      <h3 id="principal-sessions">Assumed-role session principals</h3>
      <p>An <em>assumed-role session principal</em> is a session principal that
        results from using the AWS STS <code class="code">AssumeRole</code> operation. For more information about
        which principals can assume a role using this operation, see <a href="./id_credentials_temp_request.html#stsapi_comparison">Comparing the AWS STS API operations</a>.</p>
      <p>To specify the assumed-role session ARN in the <code class="code">Principal</code> element, use the
        following format:</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Principal": <span>{</span> "AWS": "arn:aws:sts::<code class="replaceable">AWS-account-ID</code>:assumed-role/role-name/role-session-name" }</code></pre>
      <p>When you specify an assumed-role session in a <code class="code">Principal</code> element, you cannot
        use a wildcard "*" to mean all sessions. Principals must always name a specific
        session.</p>
     
     
      <h3 id="principal-federated-web-identity">Web identity session principals</h3>
      <p>A <em>web identity session principal</em> is a session principal that
        results from using the AWS STS <code class="code">AssumeRoleWithWebIdentity</code> operation. You can use
        an external web identity provider (IdP) to sign in, and then assume an IAM role using this
        operation. This leverages identity federation and issues a role session. For more
        information about which principals can assume a role using this operation, see <a href="./id_credentials_temp_request.html#stsapi_comparison">Comparing the AWS STS API operations</a>.</p>
      <p>When you issue a role from a web identity provider, you get this special type of session
        principal that includes information about the web identity provider. </p>
      <p>Use this principal type in your policy to allow or deny access based on the trusted web
        identity provider. To specify the web identity role session ARN in the
          <code class="code">Principal</code> element of a role trust policy, use the following format:</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Principal": <span>{</span> "Federated": "cognito-identity.amazonaws.com" }</code></pre>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Principal": <span>{</span> "Federated": "www.amazon.com" }</code></pre>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Principal": <span>{</span> "Federated": "graph.facebook.com" }</code></pre>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Principal": <span>{</span> "Federated": "accounts.google.com" }</code></pre>
     
     
      <h3 id="principal-saml">SAML session principals</h3>
      <p>A <em>SAML session principal</em> is a session principal that results from
        using the AWS STS <code class="code">AssumeRoleWithSAML</code> operation. You can use an external SAML
        identity provider (IdP) to sign in, and then assume an IAM role using this operation. This
        leverages identity federation and issues a role session. For more information about which
        principals can assume a role using this operation, see <a href="./id_credentials_temp_request.html#stsapi_comparison">Comparing the AWS STS API operations</a>.</p>
      <p>When you issue a role from a SAML identity provider, you get this special type of
        session principal that includes information about the SAML identity provider.</p>
      <p>Use this principal type in your policy to allow or deny access based on the trusted SAML
        identity provider. To specify the SAML identity role session ARN in the
          <code class="code">Principal</code> element of a role trust policy, use the following format:</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Principal": <span>{</span> "Federated": "arn:aws:iam::<code class="replaceable">AWS-account-ID</code>:saml-provider/<code class="replaceable">provider-name</code>" }</code></pre>
     
   
    <h2 id="principal-users">IAM user principals</h2>
    <p>You can specify IAM users in the <code class="code">Principal</code> element of a resource-based
      policy or in condition keys that support principals.</p>
    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>In a <code class="code">Principal</code> element, the user name part of the <a href="./reference_identifiers.html#identifiers-arns">Amazon Resource Name (ARN)</a> is case
        sensitive.</p></div></div>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Principal": <span>{</span> "AWS": "arn:aws:iam::<code class="replaceable">AWS-account-ID</code>:user/<code class="replaceable">user-name</code>" }</code></pre>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Principal": <span>{</span>
  "AWS": [
    "arn:aws:iam::<code class="replaceable">AWS-account-ID</code>:user/<code class="replaceable">user-name-1</code>", 
    "arn:aws:iam::<code class="replaceable">AWS-account-ID</code>:user/<code class="replaceable">user-name-2</code>"
  ]
}</code></pre>
    <p>When you specify users in a <code class="code">Principal</code> element, you cannot use a wildcard
        (<code class="code">*</code>) to mean "all users". Principals must always name specific users. </p>
    <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>If your <code class="code">Principal</code> element in a role trust policy contains an ARN that
        points to a specific IAM user, then IAM transforms the ARN to the user's unique
        principal ID when you save the policy. This helps mitigate the risk of someone escalating
        their privileges by removing and recreating the user. You don't normally see this ID in the
        console, because there is also a reverse transformation back to the user's ARN when the
        trust policy is displayed. However, if you delete the user, then you break the relationship.
        The policy no longer applies, even if you recreate the user. That's because the new user has
        a new principal ID that does not match the ID stored in the trust policy. When this happens,
        the principal ID appears in resource-based policies because AWS can no longer map it back
        to a valid ARN. The result is that if you delete and recreate a user referenced in a trust
        policy <code class="code">Principal</code> element, you must edit the role to replace the now incorrect
        principal ID with the correct ARN. IAM once again transforms ARN into the user's new
        principal ID when you save the policy.</p></div></div>
   
    <h2 id="sts-session-principals">AWS STS federated user session principals</h2>
    <p>You can specify <em>federated user sessions</em> in the <code class="code">Principal</code>
      element of a resource-based policy or in condition keys that support principals.</p>
    <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>AWS recommends that you use AWS STS federated user sessions only when necessary, such as
        when <a href="https://docs.aws.amazon.com/general/latest/gr/root-vs-iam.html#aws_tasks-that-require-root">root user access
          is required</a>. Instead, <a href="./tutorial_cross-account-with-roles.html">use roles
          to delegate permissions</a>.</p></div></div>
    <p>An <em>AWS STS federated user session principal</em> is a session principal that
      results from using the AWS STS <code class="code">GetFederationToken</code> operation. In this case,
      AWS STS uses <a href="https://aws.amazon.com/identity/federation/" rel="noopener noreferrer" target="_blank"><span>identity federation</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>
      as the method to obtain temporary access tokens instead of using IAM roles. </p>
    <p>In AWS, IAM users or an AWS account root user can authenticate using long-term access keys. For
      more information about which principals can federate using this operation, see <a href="./id_credentials_temp_request.html#stsapi_comparison">Comparing the AWS STS API operations</a>. </p>
    <div class="itemizedlist">
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p><b>IAM federated user</b> – An IAM user federates
          using the <code class="code">GetFederationToken</code> operation that results in a federated user
          session principal for that IAM user.</p>
      </li><li class="listitem">
        <p><b>Federated root user</b> – A root user federates using
          the <code class="code">GetFederationToken</code> operation that results in a federated user session
          principal for that root user.</p>
      </li></ul></div>
    <p>When an IAM user or root user requests temporary credentials from AWS STS using this
      operation, they begin a temporary federated user session. This session’s ARN is based on the
      original identity that was federated.</p>
    <p>To specify the federated user session ARN in the <code class="code">Principal</code> element, use the
      following format:</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Principal": <span>{</span> "AWS": "arn:aws:sts::<code class="replaceable">AWS-account-ID</code>:federated-user/<code class="replaceable">user-name</code>" }</code></pre>
   
    <h2 id="principal-services">AWS service principals</h2>
    <p>You can specify AWS services in the <code class="code">Principal</code> element of a resource-based
      policy or in condition keys that support principals. A <em>service principal</em>
      is an identifier for a service. </p>
    <p>IAM roles that can be assumed by an AWS service are called <em><a href="./id_roles_terms-and-concepts.html#iam-term-service-role">service roles</a></em>. Service roles must
      include a trust policy. <em>Trust policies</em> are resource-based
      policies attached to a role that defines which principals can assume the role. Some service
      roles have predefined trust policies. However, in some cases, you must specify the service
      principal in the trust policy.</p>
    
    <p>The identifier for a service principal includes the service name, and is usually in the
      following format:</p>
    <p><code class="code"><code class="replaceable">service-name</code>.amazonaws.com</code></p>
    
    
    <p>The service principal is defined by the service. You can find the service principal for
      some services by opening <a href="./reference_aws-services-that-work-with-iam.html">AWS services that work with
      IAM</a>, checking whether the service
      has <b>Yes </b>in the <b>Service-linked
        role</b> column, and opening the <b>Yes</b> link to view
      the service-linked role documentation for that service. Find the <b>Service-Linked Role
        Permissions</b> section for that service to view the service principal.</p>
    <p>The following example shows a policy that can be attached to a service role. The policy
      enables two services, Amazon ECS and Elastic Load Balancing, to assume the role. The services can then perform any
      tasks granted by the permissions policy assigned to the role (not shown). To specify multiple
      service principals, you do not specify two <code class="code">Service</code> elements; you can have only
      one. Instead, you use an array of multiple service principals as the value of a single
        <code class="code">Service</code> element.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Principal": <span>{</span>
    "Service": [
        "ecs.amazonaws.com",
        "elasticloadbalancing.amazonaws.com"
   ]
}</code></pre>
   
    <h2 id="principal-services-in-opt-in-regions">AWS service principals in opt-in
        Regions</h2>
    <p>You can launch resources in several AWS Regions and some of those Regions you must opt
      in to. For a complete list of Regions you must opt in to, see <a href="https://docs.aws.amazon.com/general/latest/gr/rande-manage.html">Managing AWS Regions</a> in the <em>AWS General Reference</em> guide.</p>
    
    <p>When an AWS service in an opt-in Region makes a request within the same Region, the
      service principal name format is identified as the non-regionalized version of their service
      principal name:</p>
    <p><code class="code"><code class="replaceable">service-name</code>.amazonaws.com</code></p>
    <p>When an AWS service in an opt-in Region makes a cross-region request to another Region,
      the service principal name format is identified as the regionalized version of their service
      principal name:</p>
    <p><code class="code"><code class="replaceable">service-name</code>.<code class="replaceable"><span>{</span>region}</code>.amazonaws.com</code></p>
    <p>For example, you have an Amazon SNS topic located in Region <code class="code">ap-southeast-1</code> and an
      Amazon S3 bucket located in opt-in Region <code class="code">ap-east-1</code>. You want to configure S3 bucket
      notifications to publish messages to the SNS topic. To allow the S3 service to post messages
      to the SNS topic you must grant the S3 service principal <code class="code">sns:Publish</code> permission
      via the resource-based access policy of the topic.</p>
    <p>If you specify the non-regionalized version of the S3 service principal,
        <code class="code">s3.amazonaws.com</code>, in the topic access policy, the <code class="code">sns:Publish</code>
      request from the bucket to the topic will fail. The following example specifies the
      non-regionalized S3 service principal in the <code class="code">Principal</code> policy element of the SNS
      topic access policy.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Principal": <span>{</span> "Service": "s3.amazonaws.com" }</code></pre>
    <p>Since the bucket is located in an opt-in Region and the request is made outside of that
      same Region, the S3 service principal appears as the regionalized service principal name,
        <code class="code">s3.ap-east-1.amazonaws.com</code>. You must use the regionalized service principal
      name when an AWS service in an opt-in Region makes a request to another Region. After you
      specify the regionalized service principal name, if the bucket makes an
        <code class="code">sns:Publish</code> request to the SNS topic located in another Region, the request
      will be successful. The following example specifies the regionalized S3 service principal in
      the <code class="code">Principal</code> policy element of the SNS topic access policy.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Principal": <span>{</span> "Service": "s3.ap-east-1.amazonaws.com" }</code></pre>
    <p>Resource policies or service principal-based allow-lists for cross-Region requests from an
      opt-in Region to another Region will only be successful if you specify the regionalized
      service principal name.</p>
    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>For IAM role trust policies, we recommend using the non-regionalized service principal
        name. IAM resources are global and therefore the same role can be used in any
        Region.</p></div></div>
   
    <h2 id="principal-anonymous">All principals</h2>
    <p>You can use a wildcard (*) to specify all principals in the <code class="code">Principal</code> element
      of a resource-based policy or in condition keys that support principals. <a href="./access_policies.html#policies_resource-based">Resource-based policies</a>
      <em>grant</em> permissions and <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_condition-keys.html">condition keys</a> are used
      to limit the conditions of a policy statement.</p>
    <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>We strongly recommend that you do not use a wildcard (*) in the <code class="code">Principal</code>
        element of a resource-based policy with an <code class="code">Allow</code> effect unless you intend to
        grant public or anonymous access. Otherwise, specify intended principals, services, or AWS
        accounts in the <code class="code">Principal</code> element and then further restrict access in the
          <code class="code">Condition</code> element. This is especially true for IAM role trust policies,
        because they allow other principals to become a principal in your account.</p></div></div>
    <p>For resource-based policies, using a wildcard (*) with an <code class="code">Allow</code> effect grants
      access to all users, including anonymous users (public access). For IAM users and role
      principals within your account, no other permissions are required. For principals in other
      accounts, they must also have identity-based permissions in their account that allow them to
      access your resource. This is called <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_evaluation-logic-cross-account.html">cross-account
        access</a>.</p>
    <p>For anonymous users, the following elements are equivalent:</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Principal": "*"</code></pre>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Principal" : <span>{</span> "AWS" : "*" }</code></pre>
    <p>You cannot use a wildcard to match part of a principal name or ARN.</p>
    <p>The following example shows a resource-based policy that can be used instead of <a href="./reference_policies_elements_notprincipal.html#specifying-notprincipal">Specifying NotPrincipal with
        Deny</a> to explicitly
      deny all principals <em>except</em> for the ones specified in the
        <code class="code">Condition</code> element.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Sid": "UsePrincipalArnInsteadOfNotPrincipalWithDeny",
      "Effect": "Deny",
      "Action": "s3:*",
      "Principal": "*",
      "Resource": [
        "arn:aws:s3:::<code class="replaceable">BUCKETNAME</code>/*",
        "arn:aws:s3:::<code class="replaceable">BUCKETNAME</code>"
      ],
      "Condition": <span>{</span>
        "ArnNotEquals": <span>{</span>
          "aws:PrincipalArn": "arn:aws:iam::444455556666:user/<code class="replaceable">user-name</code>"
        }
      }
    }
  ]
}</code></pre>
   
    <h2 id="Principal_more-info">More information</h2>
    <p>For more information, see the following:</p>
    <div class="itemizedlist">
       
       
       
       
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p><a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/example-bucket-policies.html">Bucket policy examples</a>
          in the <em>Amazon Simple Storage Service User Guide</em></p>
      </li><li class="listitem">
        <p><a href="https://docs.aws.amazon.com/sns/latest/dg/UsingIAMwithSNS.html#ExamplePolicies_SNS">Example policies for
            Amazon SNS</a> in the <em>Amazon Simple Notification Service Developer Guide</em></p>
      </li><li class="listitem">
        <p><a href="https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/SQSExamples.html">Amazon SQS policy examples</a> in the
            <em>Amazon Simple Queue Service Developer Guide</em></p>
      </li><li class="listitem">
        <p><a href="https://docs.aws.amazon.com/kms/latest/developerguide/key-policies.html">Key policies</a> in the
            <em>AWS Key Management Service Developer Guide</em></p>
      </li><li class="listitem">
        <p><a href="https://docs.aws.amazon.com/general/latest/gr/acct-identifiers.html">Account identifiers</a> in the
            <em>AWS General Reference</em></p>
      </li><li class="listitem">
        <p><a href="./id_roles_providers_oidc.html">About web identity federation</a></p>
      </li></ul></div>
  <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./reference_policies_elements_effect.html">Effect</div><div id="next" class="next-link" accesskey="n" href="./reference_policies_elements_notprincipal.html">NotPrincipal</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/reference_policies_elements_principal.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/reference_policies_elements_principal.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>