<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Permissions boundaries for IAM entities - AWS Identity and Access Management</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="access_policies_boundaries" /><meta name="default_state" content="access_policies_boundaries" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_boundaries.html" /><meta name="description" content="Learn how policies can be used to set the permissions boundary for a user or role." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS Identity and Access Management" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Control access to your AWS resources with user identity (authentication) and with policies that define specific permissions (authorization)." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_boundaries.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/access_policies_boundaries.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/access_policies_boundaries.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/access_policies_boundaries.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/access_policies_boundaries.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_boundaries.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_boundaries.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/access_policies_boundaries.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/access_policies_boundaries.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/access_policies_boundaries.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/access_policies_boundaries.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/access_policies_boundaries.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/access_policies_boundaries.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/access_policies_boundaries.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/access_policies_boundaries.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/access_policies_boundaries.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/access_policies_boundaries.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/access_policies_boundaries.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/access_policies_boundaries.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/IAM/latest/UserGuide/access_policies_boundaries.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/access_policies_boundaries.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_boundaries.html" hreflang="x-default" /><meta name="feedback-item" content="IAM" /><meta name="this_doc_product" content="AWS Identity and Access Management" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'iam'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="Permissions boundaries for IAM entities" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Permissions boundaries for IAM entities - AWS Identity and Access Management</title><meta name="pdf" content="/pdfs/IAM/latest/UserGuide/iam-ug.pdf#access_policies_boundaries" /><meta name="github" content="https://github.com/awsdocs/iam-user-guide/tree/main/doc_source/access_policies_boundaries.md" /><meta name="rss" content="aws-iam-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=76" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/access_policies_boundaries.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/access_policies_boundaries.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/access_policies_boundaries.html" /><meta name="keywords" content="IAM,AWS Identity and Access Management,IAM user,user,IAM group,group,IAM role,role,permission policy,trust policy,policy,access key,password" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS Identity and Access Management",
        "item" : "https://docs.aws.amazon.com/iam/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Access management for AWS resources",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/access.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Policies and permissions in IAM",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Permissions boundaries for IAM entities",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/IAM/latest/UserGuide/iam-ug.pdf#access_policies_boundaries" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a href="https://github.com/awsdocs/iam-user-guide/tree/main/doc_source/access_policies_boundaries.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/iam/index.html">AWS Identity and Access Management</a><a href="introduction.html">User Guide</a></div><div id="page-toc-src"><a href="#access_policies_boundaries-eval-logic">Evaluating effective permissions
                with boundaries</a><a href="#access_policies_boundaries-delegate">Delegating responsibility to
                others using permissions boundaries</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="access_policies_boundaries">Permissions boundaries for IAM
            entities</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>AWS supports <em>permissions boundaries</em> for IAM
        entities (users or roles). A permissions boundary is an advanced feature for using a managed
        policy to set the maximum permissions that an identity-based policy can grant to an IAM
        entity. An entity's permissions boundary allows it to perform only the actions that are
        allowed by both its identity-based policies and its permissions boundaries.</p><p>For more information about policy types, see <a href="./access_policies.html#access_policy-types">Policy types</a>.</p><p>You can use an AWS managed policy or a customer managed policy to set the boundary for
        an IAM entity (user or role). That policy limits the maximum permissions for the user or
        role.</p><p>For example, assume that the IAM user named <code class="code">ShirleyRodriguez</code> should be
        allowed to manage only Amazon S3, Amazon CloudWatch, and Amazon EC2. To enforce this rule, you can use the
        following policy to set the permissions boundary for the <code class="code">ShirleyRodriguez</code>
        user:</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "s3:*",
                "cloudwatch:*",
                "ec2:*"
            ],
            "Resource": "*"
        }
    ]
}</code></pre><p>When you use a policy to set the permissions boundary for a user, it limits the user's
        permissions but does not provide permissions on its own. In this example, the policy sets
        the maximum permissions of <code class="code">ShirleyRodriguez</code> as all operations in Amazon S3, CloudWatch,
        and Amazon EC2. Shirley can never perform operations in any other service, including IAM, even
        if she has a permissions policy that allows it. For example, you can add the following
        policy to the <code class="code">ShirleyRodriguez</code> user:</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": <span>{</span>
    "Effect": "Allow",
    "Action": "iam:CreateUser",
    "Resource": "*"
  }
}</code></pre><p>This policy allows creating a user in IAM. If you attach this permissions policy to the
            <code class="code">ShirleyRodriguez</code> user, and Shirley tries to create a user, the operation
        fails. It fails because the permissions boundary does not allow the
            <code class="code">iam:CreateUser</code> operation. Given these two policies, Shirley does not have
        permission to perform any operations in AWS. You must add a different permissions policy
        to allow actions in other services, such as Amazon S3. Alternatively, you could update the
        permissions boundary to allow her to create a user in IAM.</p>
        <h2 id="access_policies_boundaries-eval-logic">Evaluating effective permissions
                with boundaries</h2>
        <p>The permissions boundary for an IAM entity (user or role) sets the maximum
            permissions that the entity can have. This can change the effective permissions for that
            user or role. The effective permissions for an entity are the permissions that are
            granted by all the policies that affect the user or role. Within an account, the
            permissions for an entity can be affected by identity-based policies, resource-based
            policies, permissions boundaries, Organizations SCPs, or session policies. For more information
            about the different types of policies, see <a href="./access_policies.html">Policies and permissions in IAM</a>.</p>
        <p>If any one of these policy types explicitly denies access for an operation, then the
            request is denied. The permissions granted to an entity by multiple permissions types
            are more complex. For more details about how AWS evaluates policies, see <a href="./reference_policies_evaluation-logic.html">Policy evaluation logic</a>.</p>
        <p><b>Identity-based policies with boundaries</b> –
            Identity-based policies are inline or managed policies that are attached to a user,
            group of users, or role. Identity-based policies grant permission to the entity, and
            permissions boundaries limit those permissions. The effective permissions are the
            intersection of both policy types. An explicit deny in either of these policies
            overrides the allow.</p>
        <div class="mediaobject">
             
                <img src="/images/IAM/latest/UserGuide/images/permissions_boundary.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                Evaluation of identity-based policies and permissions boundaries&#xA;            " />
             
             
        </div>

        <div class="variablelist">
            <p><b>Resource-based policies</b> – Resource-based
                policies control how the specified principal can access the resource to which the
                policy is attached.</p>
             
             
             
        <dl>
                <dt><span class="term"><em>Resource-based policies for IAM
                    users</em></span></dt>
                <dd>
                    <p>Within the same account, resource-based policies that grant permissions to
                        an IAM user ARN (that is not a federated user session) are not limited by
                        an implicit deny in an identity-based policy or permissions boundary.</p>

                    <div class="mediaobject">
                         
                            <img src="/images/IAM/latest/UserGuide/images/EffectivePermissions-rbp-boundary-id.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                            Evaluation of a resource-based policy, permissions boundary, and&#xA;                                identity-based policy&#xA;                        " />
                         
                         
                    </div>
                </dd>
             
                <dt><span class="term"><em>Resource-based policies for IAM roles
                    </em></span></dt>
                <dd>
                    <p><b>IAM role</b> – Resource-based
                        policies that grant permissions to an IAM role ARN are limited by an
                        implicit deny in a permissions boundary or session policy.</p>
                    <p><b>IAM role session</b> – Within the
                        same account, resource-based policies that grant permissions to an IAM
                        role session ARN grant permissions directly to the assumed role session.
                        Permissions granted directly to a session are not limited by an implicit
                        deny in an identity-based policy, a permissions boundary, or session policy.
                        When you assume a role and make a request, the principal making the request
                        is the IAM role session ARN and not the ARN of the role itself.</p>
                </dd>
             
                <dt><span class="term"><em>Resource-based policies for IAM federated user
                        sessions</em></span></dt>

                <dd>
                    <p><b>IAM federated user sessions</b> – An
                        IAM federated user session is a session created by calling <a href="./id_credentials_temp_request.html#api_getfederationtoken">GetFederationToken</a>.
                        When a federated user makes a request, the principal making the request is
                        the federated user ARN and not the ARN of the IAM user who federated.
                        Within the same account, resource-based policies that grant permissions to a
                        federated user ARN grant permissions directly to the session. Permissions
                        granted directly to a session are not limited by an implicit deny in an
                        identity-based policy, a permissions boundary, or session policy.</p>
                    <p>However, if a resource-based policy grants permission to the ARN of the
                        IAM user who federated, then requests made by the federated user during
                        the session are limited by an implicit deny in a permission boundary or
                        session policy.</p>
                </dd>
            </dl></div>
        <p><b>Organizations SCPs</b> – SCPs are applied to an entire
            AWS account. They limit permissions for every request made by a principal within the
            account. An IAM entity (user or role) can make a request that is affected by an SCP, a
            permissions boundary, and an identity-based policy. In this case, the request is allowed
            only if all three policy types allow it. The effective permissions are the intersection
            of all three policy types. An explicit deny in any of these policies overrides the
            allow.</p>
        <div class="mediaobject">
             
                <img src="/images/IAM/latest/UserGuide/images/EffectivePermissions-scp-boundary-id.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                Evaluation of an SCP, permissions boundary, and identity-based&#xA;                    policy&#xA;            " />
             
             
        </div>
        <p>You can learn <a href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_org_details.html#orgs_view_account">whether your account is a member of an organization</a> in AWS Organizations.
            Organization members might be affected by an SCP. To view this data using the AWS CLI
            command or AWS API operation, you must have permissions for the
                <code class="code">organizations:DescribeOrganization</code> action for your Organizations entity. You
            must have additional permissions to perform the operation in the Organizations console. To learn
            whether an SCP is denying access to a specific request, or to change your effective
            permissions, contact your AWS Organizations administrator.</p>
        <p><b>Session policies</b> – Session policies are
            advanced policies that you pass as a parameter when you programmatically create a
            temporary session for a role or federated user. The permissions for a session come from
            the IAM entity (user or role) used to create the session and from the session policy.
            The entity's identity-based policy permissions are limited by the session policy and the
            permissions boundary. The effective permissions for this set of policy types are the
            intersection of all three policy types. An explicit deny in any of these policies
            overrides the allow. For more information about session policies, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html#policies_session">Session
            Policies</a>.</p>
        <div class="mediaobject">
             
                <img src="/images/IAM/latest/UserGuide/images/EffectivePermissions-session-boundary-id.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                Evaluation of a session policy, permissions boundary, and identity-based&#xA;                    policy&#xA;            " />
             
             
        </div>
     
        <h2 id="access_policies_boundaries-delegate">Delegating responsibility to
                others using permissions boundaries</h2>
        <p>You can use permissions boundaries to delegate permissions management tasks, such as
            user creation, to IAM users in your account. This permits others to perform tasks on
            your behalf within a specific boundary of permissions.</p>
        <p>For example, assume that María is the administrator of the X-Company AWS account.
            She wants to delegate user creation duties to Zhang. However, she must ensure that Zhang
            creates users that adhere to the following company rules:</p>
        <div class="itemizedlist">
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>Users cannot use IAM to create or manage users, groups, roles, or
                    policies.</p>
            </li><li class="listitem">
                <p>Users are denied access to the Amazon S3 <code class="code">logs</code> bucket and cannot access
                    the <code class="code">i-1234567890abcdef0</code> Amazon EC2 instance.</p>
            </li><li class="listitem">
                <p>Users cannot remove their own boundary policies.</p>
            </li></ul></div>
        <p>To enforce these rules, María completes the following tasks, for which details are
            included below:</p>
        <div class="orderedlist">
             
             
             
             
        <ol><li>
                <p>María creates the <code class="code">XCompanyBoundaries</code> managed policy to use as a
                    permissions boundary for all new users in the account.</p>
            </li><li>
                <p>María creates the <code class="code">DelegatedUserBoundary</code> managed policy and
                    assigns it as the permissions boundary for Zhang. Maria makes a note of her
                    admin user's ARN and uses it in the policy to prevent Zhang from accessing
                    it.</p>
            </li><li>
                <p>María creates the <code class="code">DelegatedUserPermissions</code> managed policy and
                    attaches it as a permissions policy for Zhang.</p>
            </li><li>
                <p>María tells Zhang about his new responsibilities and limitations.</p>
            </li></ol></div>
        <p><b>Task 1:</b> María must first create a managed policy to
            define the boundary for the new users. María will allow Zhang to give users the
            permissions policies they need, but she wants those users to be restricted. To do this,
            she creates the following customer managed policy with the name
                <code class="code">XCompanyBoundaries</code>. This policy does the following:</p>
        <div class="itemizedlist">
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>Allows users full access to several services</p>
            </li><li class="listitem">
                <p>Allows limited self-managing access in the IAM console. This means they can
                    change their password after signing into the console. They can't set their
                    initial password. To allow this, add the <code class="code">"*LoginProfile"</code> action to
                    the <code class="code">AllowManageOwnPasswordAndAccessKeys</code> statement.</p>
            </li><li class="listitem">
                <p>Denies users access to the Amazon S3 logs bucket or the
                        <code class="code">i-1234567890abcdef0</code> Amazon EC2 instance</p>
            </li></ul></div>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "ServiceBoundaries",
            "Effect": "Allow",
            "Action": [
                "s3:*",
                "cloudwatch:*",
                "ec2:*",
                "dynamodb:*"
            ],
            "Resource": "*"
        },
        <span>{</span>
            "Sid": "AllowIAMConsoleForCredentials",
            "Effect": "Allow",
            "Action": [
                "iam:ListUsers",
                "iam:GetAccountPasswordPolicy"
            ],
            "Resource": "*"
        },
        <span>{</span>
            "Sid": "AllowManageOwnPasswordAndAccessKeys",
            "Effect": "Allow",
            "Action": [
                "iam:*AccessKey*",
                "iam:ChangePassword",
                "iam:GetUser",
                "iam:*ServiceSpecificCredential*",
                "iam:*SigningCertificate*"
            ],
            "Resource": ["arn:aws:iam::*:user/$<span>{</span>aws:username}"]
        },
        <span>{</span>
            "Sid": "DenyS3Logs",
            "Effect": "Deny",
            "Action": "s3:*",
            "Resource": [
                "arn:aws:s3:::logs",
                "arn:aws:s3:::logs/*"
            ]
        },
        <span>{</span>
            "Sid": "DenyEC2Production",
            "Effect": "Deny",
            "Action": "ec2:*",
            "Resource": "arn:aws:ec2:*:*:instance/i-1234567890abcdef0"
        }
    ]
}</code></pre>
        <p>Each statement serves a different purpose:</p>
        <div class="orderedlist">
             
             
             
             
             
        <ol><li>
                <p>The <code class="code">ServiceBoundaries</code> statement of this policy allows full access
                    to the specified AWS services. This means that a new user's actions in these
                    services are limited only by the permissions policies that are attached to the
                    user.</p>
            </li><li>
                <p>The <code class="code">AllowIAMConsoleForCredentials</code> statement allows access to list
                    all IAM users. This access is necessary to navigate the
                        <b>Users</b> page in the AWS Management Console. It also allows viewing the
                    password requirements for the account, which is necessary when changing your own
                    password.</p>
            </li><li>
                <p>The <code class="code">AllowManageOwnPasswordAndAccessKeys</code> statement allows the
                    users manage only their own console password and programmatic access keys. This
                    is important if Zhang or another administrator gives a new user a permissions
                    policy with full IAM access. In that case, that user could then change their
                    own or other users' permissions. This statement prevents that from
                    happening.</p>
            </li><li>
                <p>The <code class="code">DenyS3Logs</code> statement explicitly denies access to the
                        <code class="code">logs</code> bucket.</p>
            </li><li>
                <p>The <code class="code">DenyEC2Production</code> statement explicitly denies access to the
                        <code class="code">i-1234567890abcdef0</code> instance.</p>
            </li></ol></div>
        <p><b>Task 2:</b> María wants to allow Zhang to create all
            X-Company users, but only with the <code class="code">XCompanyBoundaries</code> permissions boundary.
            She creates the following customer managed policy named
                <code class="code">DelegatedUserBoundary</code>. This policy defines the maximum permissions that
            Zhang can have.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "CreateOrChangeOnlyWithBoundary",
            "Effect": "Allow",
            "Action": [
                "iam:AttachUserPolicy",
                "iam:CreateUser",
                "iam:DeleteUserPolicy",
                "iam:DetachUserPolicy",
                "iam:PutUserPermissionsBoundary",
                "iam:PutUserPolicy"
            ],
            "Resource": "*",
            "Condition": <span>{</span>
               "StringEquals": <span>{</span>
                 "iam:PermissionsBoundary": "arn:aws:iam::123456789012:policy/XCompanyBoundaries"
                }
            }
        },
        <span>{</span>
            "Sid": "CloudWatchAndOtherIAMTasks",
            "Effect": "Allow",
            "Action": [
              "cloudwatch:*",
              "iam:CreateAccessKey",
              "iam:CreateGroup",
              "iam:CreateLoginProfile",
              "iam:CreatePolicy",
              "iam:DeleteGroup",
              "iam:DeletePolicy",
              "iam:DeletePolicyVersion",
              "iam:DeleteUser",
              "iam:GetAccountPasswordPolicy",
              "iam:GetGroup",
              "iam:GetLoginProfile",
              "iam:GetPolicy",
              "iam:GetPolicyVersion",
              "iam:GetRolePolicy",
              "iam:GetUser",
              "iam:GetUserPolicy",
              "iam:ListAccessKeys",
              "iam:ListAttachedRolePolicies",
              "iam:ListAttachedUserPolicies",
              "iam:ListEntitiesForPolicy",
              "iam:ListGroups",
              "iam:ListGroupsForUser",
              "iam:ListMFADevices",
              "iam:ListPolicies",
              "iam:ListPolicyVersions",
              "iam:ListRolePolicies",
              "iam:ListSSHPublicKeys",
              "iam:ListServiceSpecificCredentials",
              "iam:ListSigningCertificates",
              "iam:ListUserPolicies",
              "iam:ListUsers",
              "iam:SetDefaultPolicyVersion",
              "iam:SimulateCustomPolicy",
              "iam:SimulatePrincipalPolicy",
              "iam:UpdateGroup",
              "iam:UpdateLoginProfile",
              "iam:UpdateUser"
            ],
            "NotResource": "arn:aws:iam::123456789012:user/Maria"
        },
        <span>{</span>
            "Sid": "NoBoundaryPolicyEdit",
            "Effect": "Deny",
            "Action": [
                "iam:CreatePolicyVersion",
                "iam:DeletePolicy",
                "iam:DeletePolicyVersion",
                "iam:SetDefaultPolicyVersion"
            ],
            "Resource": [
                "arn:aws:iam::123456789012:policy/XCompanyBoundaries",
                "arn:aws:iam::123456789012:policy/DelegatedUserBoundary"
            ]
        },
        <span>{</span>
            "Sid": "NoBoundaryUserDelete",
            "Effect": "Deny",
            "Action": "iam:DeleteUserPermissionsBoundary",
            "Resource": "*"
        }
    ]
}</code></pre>
        <p>Each statement serves a different purpose:</p>
        <div class="orderedlist">
             
             
             
             
        <ol><li>
                <p>The <code class="code">CreateOrChangeOnlyWithBoundary</code> statement allows Zhang to
                    create IAM users but only if he uses the <code class="code">XCompanyBoundaries</code>
                    policy to set the permissions boundary. This statement also allows him to set
                    the permissions boundary for existing users but only using that same policy.
                    Finally, this statement allows Zhang to manage permissions policies for users
                    with this permissions boundary set.</p>
            </li><li>
                <p>The <code class="code">CloudWatchAndOtherIAMTasks</code> statement allows Zhang to complete
                    other user, group, and policy management tasks. He has permissions to reset
                    passwords and create access keys for any IAM user not listed in the
                        <code class="code">NotResource</code> policy element. This allows him to help users with
                    sign-in issues.</p>
            </li><li>
                <p>The <code class="code">NoBoundaryPolicyEdit</code> statement denies Zhang access to update
                    the <code class="code">XCompanyBoundaries</code> policy. He is not allowed to change any
                    policy that is used to set the permissions boundary for himself or other
                    users.</p>
            </li><li>
                <p>The <code class="code">NoBoundaryUserDelete</code> statement denies Zhang access to delete
                    the permissions boundary for himself or other users.</p>
            </li></ol></div>
        <p>María then assigns the <code class="code">DelegatedUserBoundary</code> policy <a href="./id_users_change-permissions.html#users_change_permissions-set-boundary-console">as the permissions
                boundary</a> for the <code class="code">Zhang</code> user. </p>
        <p><b>Task 3:</b> Because the permissions boundary limits the
            maximum permissions, but does not grant access on its own, Maria must create a
            permissions policy for Zhang. She creates the following policy named
                <code class="code">DelegatedUserPermissions</code>. This policy defines the operations that Zhang
            can perform, within the defined boundary.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "IAM",
            "Effect": "Allow",
            "Action": "iam:*",
            "Resource": "*"
        },
        <span>{</span>
            "Sid": "CloudWatchLimited",
            "Effect": "Allow",
            "Action": [
                "cloudwatch:GetDashboard",
                "cloudwatch:GetMetricData",
                "cloudwatch:ListDashboards",
                "cloudwatch:GetMetricStatistics",
                "cloudwatch:ListMetrics"
            ],
            "Resource": "*"
        },
        <span>{</span>
            "Sid": "S3BucketContents",
            "Effect": "Allow",
            "Action": "s3:ListBucket",
            "Resource": "arn:aws:s3:::ZhangBucket"
        }
    ]
}</code></pre>
        <p>Each statement serves a different purpose:</p>
        <div class="orderedlist">
             
             
             
        <ol><li>
                <p>The <code class="code">IAM</code> statement of the policy allows Zhang full access to
                    IAM. However, because his permissions boundary allows only some IAM
                    operations, his effective IAM permissions are limited only by his permissions
                    boundary.</p>
            </li><li>
                <p>The <code class="code">CloudWatchLimited</code> statement allows Zhang to perform five
                    actions in CloudWatch. His permissions boundary allows all actions in CloudWatch, so his
                    effective CloudWatch permissions are limited only by his permissions policy.</p>
            </li><li>
                <p>The <code class="code">S3BucketContents</code> statement allows Zhang to list the
                        <code class="code">ZhangBucket</code> Amazon S3 bucket. However, his permissions boundary does
                    not allow any Amazon S3 action, so he cannot perform any S3 operations, regardless of
                    his permissions policy.</p>
                <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Zhang's policies allow him to create a user that can then access Amazon S3
                        resources that he can't access. By delegating these administrative actions,
                        Maria effectively trusts Zhang with access to Amazon S3. </p></div></div>
            </li></ol></div>
        <p>María then attaches the <code class="code">DelegatedUserPermissions</code> policy as the
            permissions policy for the <code class="code">Zhang</code> user. </p>
        <p><b>Task 4:</b> She gives Zhang instructions to create a new
            user. She tells him that he can create new users with any permissions that they need,
            but he must assign them the <code class="code">XCompanyBoundaries</code> policy as a permissions
            boundary.</p>
        <p>Zhang completes the following tasks:</p>
        <div class="orderedlist">
             
             
             
             
             
             
        <ol><li>
                <p>Zhang <a href="./id_users_create.html#id_users_create_console">creates a user</a> with the
                    AWS Management Console. He types the user name <code class="code">Nikhil</code> and enables console access
                    for the user. He clears the checkbox next to <b>Requires password
                        reset</b>, because the policies above allow users to change their
                    passwords only after they are signed in to the IAM console.</p>
            </li><li>
                <p>On the <b>Set permissions</b> page, Zhang chooses the
                        <b>IAMFullAccess</b> and <b>
                        AmazonS3ReadOnlyAccess</b> permissions policies that allow Nikhil to
                    do his work. </p>
            </li><li>
                <p>Zhang skips the <b>Set permissions boundary</b> section,
                    forgetting María's instructions.</p>
            </li><li>
                <p>Zhang reviews the user details and chooses <b>Create
                    user</b>.</p>
                <p>The operation fails and access is denied. Zhang's
                        <code class="code">DelegatedUserBoundary</code> permissions boundary requires that any
                    user he creates have the <code class="code">XCompanyBoundaries</code> policy used as a
                    permissions boundary.</p>
            </li><li>
                <p>Zhang returns to the previous page. In the <b>Set permissions
                        boundary</b> section, he chooses the <code class="code">XCompanyBoundaries</code>
                    policy. </p>
            </li><li>
                <p>Zhang reviews the user details and chooses <b>Create
                    user</b>.</p>
                <p>The user is created. </p>
            </li></ol></div>
        <p>When Nikhil signs in, he has access to IAM and Amazon S3, except those operations that
            are denied by the permissions boundary. For example, he can change his own password in
            IAM but can't create another user or edit his policies. Nikhil has read-only access to
            Amazon S3.</p>
        <p>If someone adds a resource-based policy to the <code class="code">logs</code> bucket that allows
            Nikhil to put an object in the bucket, he still cannot access the bucket. The reason is
            that any actions on the <code class="code">logs</code> bucket are explicitly denied by his
            permissions boundary. An explicit deny in any policy type results in a request being
            denied. However, if a resource-based policy attached to a Secrets Manager secret allows
            Nikhil to perform the <code class="code">secretsmanager:GetSecretValue</code> action, then Nikhil can
            retrieve and decrypt the secret. The reason is that Secrets Manager operations are not
            explicitly denied by his permissions boundary, and implicit denies in permissions
            boundaries do not limit resource-based policies.</p>
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./access_policies_managed-deprecated.html">Deprecated AWS managed policies</div><div id="next" class="next-link" accesskey="n" href="./access_policies_identity-vs-resource.html">Identity vs resource</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/access_policies_boundaries.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/access_policies_boundaries.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>