<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Creating a role for SAML 2.0 federation (console) - AWS Identity and Access Management</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="id_roles_create_for-idp_saml" /><meta name="default_state" content="id_roles_create_for-idp_saml" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-idp_saml.html" /><meta name="description" content="Create an IAM role that determines that permissions for users who are authenticated by a third-party provider." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS Identity and Access Management" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Control access to your AWS resources with user identity (authentication) and with policies that define specific permissions (authorization)." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-idp_saml.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/id_roles_create_for-idp_saml.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/id_roles_create_for-idp_saml.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/id_roles_create_for-idp_saml.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/id_roles_create_for-idp_saml.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-idp_saml.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-idp_saml.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/id_roles_create_for-idp_saml.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/id_roles_create_for-idp_saml.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/id_roles_create_for-idp_saml.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/id_roles_create_for-idp_saml.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/id_roles_create_for-idp_saml.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/id_roles_create_for-idp_saml.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/id_roles_create_for-idp_saml.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/id_roles_create_for-idp_saml.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/id_roles_create_for-idp_saml.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/id_roles_create_for-idp_saml.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/id_roles_create_for-idp_saml.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/id_roles_create_for-idp_saml.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/IAM/latest/UserGuide/id_roles_create_for-idp_saml.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/id_roles_create_for-idp_saml.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-idp_saml.html" hreflang="x-default" /><meta name="feedback-item" content="IAM" /><meta name="this_doc_product" content="AWS Identity and Access Management" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'iam'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="Creating a role for SAML 2.0 federation (console)" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Creating a role for SAML 2.0 federation (console) - AWS Identity and Access Management</title><meta name="pdf" content="/pdfs/IAM/latest/UserGuide/iam-ug.pdf#id_roles_create_for-idp_saml" /><meta name="github" content="https://github.com/awsdocs/iam-user-guide/tree/main/doc_source/id_roles_create_for-idp_saml.md" /><meta name="rss" content="aws-iam-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=76" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/id_roles_create_for-idp_saml.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/id_roles_create_for-idp_saml.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/id_roles_create_for-idp_saml.html" /><meta name="keywords" content="IAM,AWS Identity and Access Management,IAM user,user,IAM group,group,IAM role,role,permission policy,trust policy,policy,access key,password" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS Identity and Access Management",
        "item" : "https://docs.aws.amazon.com/iam/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "IAM Identities (users, user groups, and roles)",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/id.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "IAM roles",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Creating IAM roles",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "Creating a role for a third-party Identity Provider (federation)",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-idp.html"
      },
      {
        "@type" : "ListItem",
        "position" : 8,
        "name" : "Creating a role for SAML 2.0 federation (console)",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-idp.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/IAM/latest/UserGuide/iam-ug.pdf#id_roles_create_for-idp_saml" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a href="https://github.com/awsdocs/iam-user-guide/tree/main/doc_source/id_roles_create_for-idp_saml.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/iam/index.html">AWS Identity and Access Management</a><a href="introduction.html">User Guide</a></div><div id="page-toc-src"><a href="#idp_saml_Prerequisites">Prerequisites for creating a role for SAML</a><a href="#idp_saml_Create">Creating a role for SAML</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="id_roles_create_for-idp_saml">Creating a role for SAML 2.0 federation
      (console)</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p> You can use SAML 2.0 federation instead of creating IAM users in your AWS account. With
    an identity provider (IdP), you can manage your user identities outside of AWS and give these
    external user identities permissions to access AWS resources in your account. For more
    information about federation and identity providers, see <a href="./id_roles_providers.html">Identity providers and federation</a>.</p><div class="awsdocs-note awsdocs-tip"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Tip</h6></div><div class="awsdocs-note-text"><p>If you need to support SAML federation across Regions, see the AWS Security Blog article <a href="http://aws.amazon.com/blogs/security/how-to-use-regional-saml-endpoints-for-failover" rel="noopener noreferrer" target="_blank"><span>How to use regional SAML endpoints for failover</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></div></div>
    <h2 id="idp_saml_Prerequisites">Prerequisites for creating a role for SAML</h2>
    <p>Before you can create a role for SAML 2.0 federation, you must first complete the
      following prerequisite steps.</p>
    <div class="procedure"><a id="saml-prereqs"></a><h6>To prepare to create a role for SAML 2.0 federation</h6><ol><li><a id="idpsamlstep1"></a>
        <p>Before you create a role for SAML-based federation, you must create a SAML provider in
          IAM. For more information, see <a href="./id_roles_providers_create_saml.html">Creating IAM SAML identity providers</a>.</p>
      </li><li>
        <p>Prepare the policies for the role that the SAML 2.0–authenticated users will
          assume. As with any role, a role for the SAML federation includes two policies. One is the
          role trust policy that specifies who can assume the role. The other is the IAM
          permissions policy that specifies the AWS actions and resources that the federated user
          is allowed or denied access to.</p>
        <p>When you create the trust policy for your role, you must use three values to ensure
          that only your application can assume the role:</p>
        <div class="itemizedlist">
           
           
           
        <ul class="itemizedlist"><li class="listitem">
            <p>For the <code class="code">Action</code> element, use the <code class="code">sts:AssumeRoleWithSAML</code>
              action.</p>
          </li><li class="listitem">
            <p>For the <code class="code">Principal</code> element, use the string
                  <code class="code"><span>{</span>"Federated":<code class="replaceable">ARNofIdentityProvider</code>}</code>.
              Replace <code class="code"><code class="replaceable">ARNofIdentityProvider</code></code> with the ARN of
              the <a href="./id_roles_providers_saml.html">SAML identity provider</a> that you
              created in <a href="#idpsamlstep1">Step 1</a>.</p>
          </li><li class="listitem">
            <p>For the <code class="code">Condition</code> element, use a <code class="code">StringEquals</code> condition
              to test that the <code class="code">saml:aud</code> attribute from the SAML response matches the
              SAML federation endpoint for AWS. </p>
          </li></ul></div>
        <p>The following example trust policy is designed for a SAML federated user:</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
    "Version": "2012-10-17",
    "Statement": <span>{</span>
      "Effect": "Allow",
      "Action": "sts:AssumeRoleWithSAML",
      "Principal": <span>{</span>"Federated": "arn:aws:iam::<code class="replaceable">account-id</code>:saml-provider/<code class="replaceable">PROVIDER-NAME</code>"},
      "Condition": <span>{</span>"StringEquals": <span>{</span>"SAML:aud": "https://signin.aws.amazon.com/saml"}}
    }
  }</code></pre>
        <p>Replace the principal ARN with the actual ARN for the SAML provider that you created
          in IAM. It will have your own account ID and provider name. </p>
      </li></ol></div>
   
    <h2 id="idp_saml_Create">Creating a role for SAML</h2>
    <p>After you complete the prerequisite steps, you can create the role for SAML-based
      federation. </p>
    <div class="procedure"><h6>To create a role for SAML-based federation</h6><ol><li><p>Sign in to the AWS Management Console and open the IAM console at <a href="https://console.aws.amazon.com/iam/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/iam/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></li><li>
        <p>In the navigation pane of the IAM console, choose <b>Roles</b> and
          then choose <b>Create role</b>.</p>
      </li><li>
        <p>Choose the <b>SAML 2.0 federation</b> role type.</p>
      </li><li>
        <p>For <b>Select a SAML provider</b>, choose the provider for your role.
        </p>
      </li><li>
        <p>Choose the SAML 2.0 access level method. </p>
        <div class="itemizedlist">
           
           
        <ul class="itemizedlist"><li class="listitem">
            <p>Choose <b>Allow programmatic access only</b> to create a role that
              can be assumed programmatically from the AWS API or AWS CLI.</p>
          </li><li class="listitem">
            <p>Choose <b>Allow programmatic and AWS Management Console access</b> to create a
              role that can be assumed programmatically and from the AWS Management Console.</p>
          </li></ul></div>
        <p>The roles created by both are similar, but the role that can also be assumed from the
          console includes a trust policy with a particular condition. That condition explicitly
          ensures that the SAML audience (<code class="code">SAML:aud</code> attribute) is set to the AWS
          sign-in endpoint for SAML (https://signin.aws.amazon.com/saml).</p>
      </li><li>
        <p>If you're creating a role for programmatic access, choose an attribute from the
            <b>Attribute</b> list. Then, in the <b>Value</b> box, enter
          a value to include in the role. This restricts role access to users from the identity
          provider whose SAML authentication response (assertion) includes the attributes that you
          specify. You must specify at least one attribute to ensure that your role is limited to a
          subset of users at your organization. </p>
        <p>If you're creating a role for programmatic and console access, the
            <code class="code">SAML:aud</code> attribute is automatically added and set to the URL of the AWS
          SAML endpoint (https://signin.aws.amazon.com/saml). </p>
      </li><li>
        <p>To add more attribute-related conditions to the trust policy, choose
            <b>Condition (optional)</b>, select the additional condition, and specify
          a value. </p>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>The list includes the most commonly used SAML attributes. IAM supports additional
            attributes that you can use to create conditions. For a list of the supported
            attributes, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html#condition-keys-saml">Available Keys for SAML Federation</a>. If you need a condition for a supported
            SAML attribute that's not in the list, you can manually add that condition. To do that,
            edit the trust policy after you create the role.</p></div></div>
      </li><li>
        <p> Review your SAML 2.0 trust information and then choose <b>Next</b>.
        </p>
      </li><li>
        <p>IAM includes a list of the AWS managed and customer managed policies in your
          account. Select the policy to use for the permissions policy, or choose <b>Create
            policy</b> to open a new browser tab and create a new policy from scratch. For
          more information, see <a href="./access_policies_create-console.html#access_policies_create-start">Creating IAM policies</a>. After you create the policy, close that
          tab and return to your original tab. Select the check box next to the permissions policies
          that you want web identity users to have. If you prefer, you can select no policies at
          this time, and then attach policies to the role later. By default, a role has no
          permissions.</p>
      </li><li>
        <p>(Optional) Set a <a href="./access_policies_boundaries.html">permissions
            boundary</a>. This is an advanced feature.</p>
        <p>Open the <b>Permissions boundary</b> section and choose
            <b>Use a permissions boundary to control the maximum role permissions</b>.
          Select the policy to use for the permissions boundary.</p>
      </li><li>
        <p>Choose <b>Next</b>.</p>
      </li><li>
        <p>Choose <b>Next: Review</b>.</p>
      </li><li>
        <p>For <b>Role name</b>, enter a role name. Role names must be unique
          within your AWS account. They are not distinguished by case. For example, you cannot
          create roles named both <code class="userinput">PRODROLE</code> and
            <code class="userinput">prodrole</code>. Because other AWS resources might reference the role,
          you cannot edit the name of the role after it has been created. </p>
      </li><li>
        <p>(Optional) For <b>Description</b>, enter a description for the new
          role.</p>
      </li><li>
        <p>Choose <b>Edit</b> in the <b>Step 1: Select trusted
            entities</b> or <b>Step 2: Add permissions</b> sections to edit the
          use cases and permissions for the role. </p>
      </li><li>
        <p>(Optional) Add metadata to the role by attaching tags as key–value pairs. For
          more information about using tags in IAM, see <a href="./id_tags.html">Tagging IAM resources</a>.</p>
      </li><li>
        <p>Review the role and then choose <b>Create role</b>.</p>
      </li></ol></div>
    <p>After you create the role, you complete the SAML trust by configuring your identity
      provider software with information about AWS. This information includes the roles that you
      want your federated users to use. This is referred to as configuring the relying party trust
      between your IdP and AWS. For more information, see <a href="./id_roles_providers_create_saml_relying-party.html">Configuring your SAML 2.0 IdP
      with relying party trust and adding claims</a>. </p>
  <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./id_roles_create_for-idp_oidc.html">Creating a role for web Identity/OIDC federation</div><div id="next" class="next-link" accesskey="n" href="./id_roles_create_for-custom.html">Creating a role using custom trust policies</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/id_roles_create_for-idp_saml.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/id_roles_create_for-idp_saml.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>