<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Creating a condition with multiple keys or values - AWS Identity and Access Management</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="reference_policies_multi-value-conditions" /><meta name="default_state" content="reference_policies_multi-value-conditions" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_multi-value-conditions.html" /><meta name="description" content="Create conditions with multiple keys or values, a practice that is useful for fine-grained access in some AWS services." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS Identity and Access Management" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Control access to your AWS resources with user identity (authentication) and with policies that define specific permissions (authorization)." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_multi-value-conditions.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/reference_policies_multi-value-conditions.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/reference_policies_multi-value-conditions.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/reference_policies_multi-value-conditions.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/reference_policies_multi-value-conditions.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_multi-value-conditions.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_multi-value-conditions.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/reference_policies_multi-value-conditions.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/reference_policies_multi-value-conditions.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/reference_policies_multi-value-conditions.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/reference_policies_multi-value-conditions.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/reference_policies_multi-value-conditions.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/reference_policies_multi-value-conditions.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/reference_policies_multi-value-conditions.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/reference_policies_multi-value-conditions.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/reference_policies_multi-value-conditions.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/reference_policies_multi-value-conditions.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/reference_policies_multi-value-conditions.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/reference_policies_multi-value-conditions.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/IAM/latest/UserGuide/reference_policies_multi-value-conditions.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/reference_policies_multi-value-conditions.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_multi-value-conditions.html" hreflang="x-default" /><meta name="feedback-item" content="IAM" /><meta name="this_doc_product" content="AWS Identity and Access Management" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'iam'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="Creating a condition with multiple keys or values" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Creating a condition with multiple keys or values - AWS Identity and Access Management</title><meta name="pdf" content="/pdfs/IAM/latest/UserGuide/iam-ug.pdf#reference_policies_multi-value-conditions" /><meta name="github" content="https://github.com/awsdocs/iam-user-guide/tree/main/doc_source/reference_policies_multi-value-conditions.md" /><meta name="rss" content="aws-iam-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=76" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/reference_policies_multi-value-conditions.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/reference_policies_multi-value-conditions.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/reference_policies_multi-value-conditions.html" /><meta name="keywords" content="IAM,AWS Identity and Access Management,IAM user,user,IAM group,group,IAM role,role,permission policy,trust policy,policy,access key,password" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS Identity and Access Management",
        "item" : "https://docs.aws.amazon.com/iam/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Reference information for AWS Identity and Access Management",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/reference.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "IAM JSON policy reference",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "IAM JSON policy elements reference",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "IAM JSON policy elements: Condition",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements_condition.html"
      },
      {
        "@type" : "ListItem",
        "position" : 8,
        "name" : "Creating a condition with multiple keys or values",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements_condition.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/IAM/latest/UserGuide/iam-ug.pdf#reference_policies_multi-value-conditions" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a href="https://github.com/awsdocs/iam-user-guide/tree/main/doc_source/reference_policies_multi-value-conditions.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/iam/index.html">AWS Identity and Access Management</a><a href="introduction.html">User Guide</a></div><div id="page-toc-src"><a href="#reference_policies_multiple-conditions-eval">Evaluation logic for
            conditions with multiple keys or values</a><a href="#reference_policies_multi-key-or-value-conditions">Using multiple keys and
            values</a><a href="#reference_policies_multi-value-conditions-examples">Examples of using
            multiple values with condition set operators</a><a href="#reference_policies_multi-value-conditions-eval">Evaluation logic for
            multiple values with condition set operators</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="reference_policies_multi-value-conditions">Creating a condition with multiple
         keys or values</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>You can use the <code class="code">Condition</code> element of a policy to test multiple keys or
      multiple values for a single key in a request. When you make a request to AWS, either
      programmatically or through the AWS Management Console, your request includes information about your
      principal, operation, tags, and more. To learn about information and data included in a
      request, see <a href="./intro-structure.html#intro-structure-request">Request</a>. You can use condition keys to test the values of the matching keys in the request. For
      example, you can use a condition key to control access to specific attributes of a DynamoDB table
      or to an Amazon EC2 instance based on tags.</p><p>A <code class="code">Condition</code> element can contain multiple conditions, and each condition can
      contain multiple key-value pairs. Most condition keys support using multiple values. The
      following figure illustrates this. Unless otherwise specified, all keys can have multiple
      values.</p><div class="mediaobject">
       
         <img src="/images/IAM/latest/UserGuide/images/AccessPolicyLanguage_Condition_Block.diagram.png" class="aws-docs-img-whiteBg aws-docs-img-padding" />
       
   </div><div class="highlights" id="inline-topiclist"><h6>Topics</h6><ul><li><a href="#reference_policies_multiple-conditions-eval">Evaluation logic for
            conditions with multiple keys or values</a></li><li><a href="#reference_policies_multi-key-or-value-conditions">Using multiple keys and
            values</a></li><li><a href="#reference_policies_multi-value-conditions-examples">Examples of using
            multiple values with condition set operators</a></li><li><a href="#reference_policies_multi-value-conditions-eval">Evaluation logic for
            multiple values with condition set operators</a></li></ul></div>
      <h2 id="reference_policies_multiple-conditions-eval">Evaluation logic for
            conditions with multiple keys or values</h2>
      <p>If your policy has multiple <a href="./reference_policies_elements_condition_operators.html">condition operators</a> or
         multiple keys attached to a single condition operator, the conditions are evaluated using a
         logical <code class="code">AND</code>. If a single condition operator includes multiple values for one
         key, that condition operator is evaluated using a logical <code class="code">OR</code>. All conditions
         must resolve to true to invoke the desired <code class="code">Allow</code> or <code class="code">Deny</code>
         effect.</p>
      <div class="mediaobject">
          
            <img src="/images/IAM/latest/UserGuide/images/AccessPolicyLanguage_Condition_Block_AND.diagram.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;            Condition block showing how AND and OR are applied to multiple values&#xA;         " />
          
          
      </div>
      <p>For example, the following condition block shows how the figure above presents in a
         policy. The condition block uses condition operators <code class="code">StringEqualsIgnoreCase</code>
         and <code class="code">StringEquals</code>, and condition keys <code class="code">aws:PrincipalTag</code> and
            <code class="code">aws:PrincipalAccount</code>. To invoke the desired <code class="code">Allow</code> or
            <code class="code">Deny</code> effect, all conditions must resolve to true. The user making the
         request must have both principal tag keys, <em>department</em> and
            <em>role</em>, that include one of the tag key values specified in the
         policy. Also, the user making the request must belong to the AWS account identifier
         specified in the policy.</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">"Condition": <span>{</span>
  "StringEqualsIgnoreCase": <span>{</span>
    "aws:PrincipalTag/department": [ "finance", "hr", "legal" ],
    "aws:PrincipalTag/role": [ "audit", "security" ]
  },
  "StringEquals": <span>{</span>
    "aws:PrincipalAccount": "123456789012"
  }
}</code></pre>
      <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>When multiple values are listed in a policy for negated matching condition operators
            such as <code class="code">StringNotEquals</code> and <code class="code">DateNotEquals</code>, the effective
            permissions work like a logical <code class="code">AND</code>. For example, if there are multiple
               <code class="code">aws:PrincipalAccount</code> values in a <code class="code">StringNotEquals</code> condition
            operator, the string cannot match any of the <code class="code">aws:PrincipalAccount</code> values
            listed to resolve the condition to true.</p></div></div>
    
      <h2 id="reference_policies_multi-key-or-value-conditions">Using multiple keys and
            values</h2>
      <p>To compare your condition against a <a href="./intro-structure.html#intro-structure-request">request
            context</a> with multiple key values, you must use the <code class="code">ForAllValues</code> or
            <code class="code">ForAnyValue</code> set operators. These set operators are used to compare two sets
         of values.</p>
      <p>When a policy condition compares two sets of values, such as the set of tags in a
         request and the set of tags in a policy condition, you need to tell AWS how to compare
         the sets. IAM defines two set operators, <code class="code">ForAnyValue</code> and
            <code class="code">ForAllValues</code>. You must use set operators with
            <em>multivalued</em> condition keys. Do not use set operators with
            <em>single-valued</em> condition keys.</p>
      <p>To determine whether an AWS condition key is single-valued or multivalued, review its
         data type. To view the condition key data types for a service, see <a href="https://docs.aws.amazon.com/service-authorization/latest/reference/reference_policies_actions-resources-contextkeys.html">Actions, Resources, and Condition Keys for AWS Services</a> and choose the
         service whose condition keys you want to view. If the condition <b>Type</b>
         field includes the <code class="code">ArrayOf</code> prefix, the condition key is multivalued. For
         example, <a href="https://docs.aws.amazon.com/service-authorization/latest/reference/list_awskeymanagementservice.html">AWS Key Management Service</a> supports condition keys with the <code class="code">String</code> single-valued
         data type and the <code class="code">ArrayOfString</code> multivalued data type.</p>
      <div class="itemizedlist">
          
          
      <ul class="itemizedlist"><li class="listitem">
            <p><em>Single-valued</em> condition keys have at most one value in the
               request context. For example, you can tag resources in AWS. Resource tags are
               stored as tag key-value pairs. A resource tag key can have a single tag value.
               Therefore, <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_condition-keys.html#condition-keys-resourcetag"><code class="code">aws:ResourceTag/tag-key</code></a> is a single-valued condition key.
               Do not use a set operator with a single-valued condition key.</p>
         </li><li class="listitem">
            <p><em>Multivalued</em> condition keys can have multiple values in the
               request context. For example, you can tag resources in AWS and include multiple tag
               key-value pairs in a request. Therefore, <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_condition-keys.html#condition-keys-tagkeys"><code class="code">aws:TagKeys</code></a> is a multivalued condition key. Multivalued
               condition keys require a set operator.</p>
         </li></ul></div>
      <p>The <code class="code">ForAllValues</code> and <code class="code">ForAnyValue</code> qualifiers add set-operation
         functionality to the condition operator so that you can test multiple request values
         against multiple condition values. Additionally, if you include a multivalued string key in
         your policy with a wildcard or a variable, you must also use the <code class="code">StringLike</code>
         <a href="./reference_policies_elements_condition_operators.html#Conditions_String">condition operator</a>. For requests that include
         multiple values for a single key, you must enclose the condition key values within brackets
         like an <a href="./reference_policies_grammar.html#policies-grammar-json">array</a>. For example,
            <code class="code">"Key2":["Value2A", "Value2B"]</code>.</p>
      <div class="itemizedlist">
          
          
      <ul class="itemizedlist"><li class="listitem">
            <p><code class="code">ForAllValues</code> – Use with multivalued condition keys. Tests
               whether the value of every member of the request set is a subset of the condition key
               set. The condition returns true if every key value in the request matches at least
               one value in the policy. It also returns true if there are no keys in the request, or
               if the key values resolve to a null data set, such as an empty string. Do not use
                  <code class="code">ForAllValues</code> with an <code class="code">Allow</code> effect because it can be
               overly permissive.</p>
         </li><li class="listitem">
            <p><code class="code">ForAnyValue</code> – Use with multivalued condition keys. Tests
               whether at least one member of the set of request values matches at least one member
               of the set of condition key values. The condition returns true if any one of the key
               values in the request matches any one of the condition values in the policy. For no
               matching key or a null dataset, the condition returns false.</p>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>The difference between single-valued and multivalued condition keys depends on
                  the number of values in the request context, not the number of values in the
                  policy condition.</p></div></div>
         </li></ul></div>
    
      <h2 id="reference_policies_multi-value-conditions-examples">Examples of using
            multiple values with condition set operators</h2>
      <p>You can create a policy to test multiple values in a request against one or more values
         that you specify in the policy. Assume that you have an Amazon DynamoDB table named
            <code class="code">Thread</code> that is used to store information about threads in a technical
         support forum. The table has attributes named <code class="code">ID</code>, <code class="code">UserName</code>,
            <code class="code">PostDateTime</code>, <code class="code">Message</code>, and <code class="code">Tags</code>. </p>
      <pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight"><span>{</span>	
  ID=101
  UserName=Bob
  PostDateTime=20130930T231548Z
  Message="A good resource for this question is docs.aws.amazon.com"
  Tags=["AWS", "Database", "Security"]
}</code></pre>
      <p>For information about how set operators are used in DynamoDB to implement fine-grained
         access to individual data items and attributes, see <a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/FGAC_DDB.html">Fine-Grained Access Control for DynamoDB</a> in the
            <em>Amazon DynamoDB Developer Guide</em>. </p>
      <p>You can create a policy that allows users to see only the <code class="code">PostDateTime</code>,
            <code class="code">Message</code>, and <code class="code">Tags</code> attributes. If the user's request contains
         any of these attributes, it is allowed. But if the request contains any other attributes
         (for example, <code class="code">ID</code>), the request is denied. Logically speaking, you want to
         create a list of allowed attributes (<code class="code">PostDateTime</code>, <code class="code">Message</code>,
            <code class="code">Tags</code>). You also want to indicate in the policy that all of the user's
         requested attributes must be in that list of allowed attributes.</p>
      <p>The following example policy shows how to use the <code class="code">ForAllValues</code> qualifier
         with the <code class="code">StringEquals</code> condition operator. The condition allows a user to
         request <em>only</em> the attributes <code class="code">ID</code>, <code class="code">Message</code>, or
            <code class="code">Tags</code> from the DynamoDB table named <code class="code">Thread</code>.</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": "dynamodb:GetItem",
            "Resource": "arn:aws:dynamodb:*:*:table/Thread",
            "Condition": <span>{</span>
                "ForAllValues:StringEquals": <span>{</span>
                    "dynamodb:Attributes": [
                        "ID",
                        "Message",
                        "Tags"
                    ]
                }
            }
        }
    ]
}</code></pre>
      <p>Assume the user makes a request to DynamoDB to get the attributes <code class="code">Message</code> and
            <code class="code">Tags</code> from the <code class="code">Thread</code> table. In that case, the request is
         allowed because the user's requested attributes all match values specified in the policy.
         The <code class="code">GetItem</code> operation requires the user to pass the <code class="code">ID</code> attribute
         as the database table key, which is also allowed in the policy. However, if the user's
         request includes the <code class="code">UserName</code> attribute, the request fails. The reason is that
            <code class="code">UserName</code> is not within the list of allowed attributes and the
            <code class="code">ForAllValues</code> qualifier requires all requested values to be listed in the
         policy.</p>
      <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>If you use <code class="code">dynamodb:Attributes</code>, you must specify the names of all of the
            primary key and index key attributes for the table. You must also specify any secondary
            indexes that are listed in the policy. Otherwise, DynamoDB can't use these key attributes
            to perform the requested action.</p></div></div>
      <p>Alternatively, you might want to make sure that users are explicitly forbidden to
         include some attributes in a request, such as the <code class="code">ID</code> and <code class="code">UserName</code>
         attributes. For example, you might exclude attributes when the user is updating the DynamoDB
         table, because an update (<code class="code">PUT</code> operation) should not change certain attributes.
         In that case, you create a list of forbidden attributes (<code class="code">ID</code>,
            <code class="code">UserName</code>). If any of the user's requested attributes match any of the
         forbidden attributes, the request is denied. </p>
      <p>The following example shows how to use the <code class="code">ForAnyValue</code> qualifier to deny
         access to the <code class="code">ID</code> and <code class="code">PostDateTime</code> attributes if the user tries to
         perform the <code class="code">PutItem</code> action. That is, if the user tries to update either of
         those attributes in the <code class="code">Thread</code> table. Notice that the <code class="code">Effect</code>
         element is set to <code class="code">Deny</code>.</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Version": "2012-10-17",
    "Statement": <span>{</span>
        "Effect": "Deny",
        "Action": "dynamodb:PutItem",
        "Resource": "arn:aws:dynamodb:*:*:table/Thread",
        "Condition": <span>{</span>
            "ForAnyValue:StringEquals": <span>{</span>
                "dynamodb:Attributes": [
                    "ID",
                    "PostDateTime"
                ]
            }
        }
    }
}</code></pre>
      <p>Assume that the user makes a request to update the <code class="code">PostDateTime</code> and
            <code class="code">Message</code> attributes of the <code class="code">Thread</code> table. The
            <code class="code">ForAnyValue</code> qualifier determines whether any of the requested attributes
         appear in the list in the policy. In this case, there is one match
            (<code class="code">PostDateTime</code>), so the condition is true. Assuming the other values in the
         request also match (for example, the resource), the overall policy evaluation returns true.
         Because the policy's effect is <code class="code">Deny</code>, the request is denied. </p>
      <p>Imagine the user instead makes a request to perform <code class="code">PutItem</code> with just the
            <code class="code">UserName</code> attribute. None of the attributes in the request (just
            <code class="code">UserName</code>) match any of attributes listed in the policy (<code class="code">ID</code>,
            <code class="code">PostDateTime</code>). The condition returns false, so the effect of the policy
            (<code class="code">Deny</code>) is also false, and the request is not denied by this policy. (For
         the request to succeed, it must be explicitly allowed by a different policy. It is not
         explicitly denied by this policy, but all requests are implicitly denied.)</p>
      <div class="awsdocs-note awsdocs-warning"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Warning</h6></div><div class="awsdocs-note-text"><p>When you use the <code class="code">ForAllValues</code> condition operator, it returns true if
            there are no keys in the request, or if the key values resolve to a null data set, such
            as an empty string. To require that the request includes at least one value, you must
            use another condition in the policy. For an example, see <a href="./access_tags.html#access_tags_control-requests">Controlling access during AWS
                requests</a>.</p></div></div>
    
      <h2 id="reference_policies_multi-value-conditions-eval">Evaluation logic for
            multiple values with condition set operators</h2>
      <p>This section discusses the specifics of the evaluation logic used with the
            <code class="code">ForAllValues</code> and <code class="code">ForAnyValue</code> operators. The following table
         illustrates possible keys that might be included in a request (<code class="code">PostDateTime</code>
         and <code class="code">UserName</code>) and a policy condition that includes the values
            <code class="code">PostDateTime</code>, <code class="code">Message</code>, and <code class="code">Tags</code>. </p>
      <div class="table-container"><div class="table-contents"><table id="w340aac35c19c11c35c32c17b5"><thead>
               <tr>
                  <th>
                     <p>Key (in the request)</p>
                  </th>
                  <th>
                     <p>Condition value (in the policy)</p>
                  </th>
               </tr>
            </thead>
               <tr>
                  <td>
                     <p><code class="code">PostDateTime</code></p>
                  </td>
                  <td>
                     <p><code class="code">PostDateTime</code></p>
                  </td>
               </tr>
               <tr>
                  <td>
                     <p><code class="code">UserName</code></p>
                  </td>
                  <td>
                     <p><code class="code">Message</code></p>
                  </td>
               </tr>
               <tr>
                  <td>
                     <p> </p>
                  </td>
                  <td>
                     <p><code class="code">Tags</code></p>
                  </td>
               </tr>
            </table></div></div>
      <p>The evaluation for the combination is this:</p>
      <div class="table-container"><div class="table-contents"><table id="w340aac35c19c11c35c32c17b9">
               <tr>
                  <td>
                     <p><code class="code">PostDateTime</code> matches <code class="code">PostDateTime</code>?</p>
                  </td>
               </tr>
               <tr>
                  <td>
                     <p><code class="code">PostDateTime</code> matches <code class="code">Message</code>?</p>
                  </td>
               </tr>
               <tr>
                  <td>
                     <p><code class="code">PostDateTime</code> matches <code class="code">Tags</code>?</p>
                  </td>
               </tr>
               <tr>
                  <td>
                     <p><code class="code">UserName</code> matches <code class="code">PostDateTime</code>?</p>
                  </td>
               </tr>
               <tr>
                  <td>
                     <p><code class="code">UserName</code> matches <code class="code">Message</code>?</p>
                  </td>
               </tr>
               <tr>
                  <td>
                     <p><code class="code">UserName</code> matches <code class="code">Tags</code>?</p>
                  </td>
               </tr>
            </table></div></div>
      <p>The result of the condition operator depends on which modifier is used with the policy
         condition:</p>
      <div class="itemizedlist">
          
          
      <ul class="itemizedlist"><li class="listitem">
            <p><code class="code">ForAllValues</code>. If every key in the request (<code class="code">PostDateTime</code>
               or <code class="code">UserName</code>) matches at least one condition value in the policy
                  (<code class="code">PostDateTime</code>, <code class="code">Message</code>, <code class="code">Tags</code>), the
               condition operator returns true. Stated another way, in order for the condition to be
               true, (<code class="code">PostDateTime</code> must equal <code class="code">PostDateTime</code>,
                  <code class="code">Message</code>, or <code class="code">Tags</code>) <em>and</em>
                  (<code class="code">UserName</code> must equal <code class="code">PostDateTime</code>, <code class="code">Message</code>,
               or <code class="code">Tags</code>). </p>
         </li><li class="listitem">
            <p><code class="code">ForAnyValue</code>. If any combination of request value and policy value
               (any one of the six in the example) returns true, the condition operator returns
               true. </p>
         </li></ul></div>
      <p>The following policy includes a <code class="code">ForAllValues</code> qualifier: </p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Version": "2012-10-17",
    "Statement": <span>{</span>
        "Effect": "Allow",
        "Action": "dynamodb:GetItem",
        "Resource": "arn:aws:dynamodb:*:*:table/Thread",
        "Condition": <span>{</span>
            "ForAllValues:StringEquals": <span>{</span>
                "dynamodb:Attributes": [
                    "PostDateTime",
                    "Message",
                    "Tags"
                ]
            }
        }
    }
}</code></pre>
      <p>Suppose that the user makes a request to DynamoDB to get the attributes
            <code class="code">PostDateTime</code> and <code class="code">UserName</code>. The evaluation for the combination
         is this:</p>
      <div class="table-container"><div class="table-contents"><table id="w340aac35c19c11c35c32c17c21">
               <tr>
                  <td>
                     <p><code class="code">PostDateTime</code> matches <code class="code">PostDateTime</code>?</p>
                  </td>
                  <td>
                     <p><code class="code">True</code></p>
                  </td>
               </tr>
               <tr>
                  <td>
                     <p><code class="code">PostDateTime</code> matches <code class="code">Message</code>?</p>
                  </td>
                  <td>
                     <p><code class="code">False</code></p>
                  </td>
               </tr>
               <tr>
                  <td>
                     <p><code class="code">PostDateTime</code> matches <code class="code">Tags</code>?</p>
                  </td>
                  <td>
                     <p><code class="code">False</code></p>
                  </td>
               </tr>
               <tr>
                  <td>
                     <p><code class="code">UserName</code> matches <code class="code">PostDateTime</code>?</p>
                  </td>
                  <td>
                     <p><code class="code">False</code></p>
                  </td>
               </tr>
               <tr>
                  <td>
                     <p><code class="code">UserName</code> matches <code class="code">Message</code>?</p>
                  </td>
                  <td>
                     <p><code class="code">False</code></p>
                  </td>
               </tr>
               <tr>
                  <td>
                     <p><code class="code">UserName</code> matches <code class="code">Tags</code>?</p>
                  </td>
                  <td>
                     <p><code class="code">False</code></p>
                  </td>
               </tr>
            </table></div></div>
      <p>The policy includes the <code class="code">ForAllValues</code> condition operator modifier, meaning
         that there must be at least one match for <code class="code">PostDateTime</code> and one match for
            <code class="code">UserName</code>. There's no match for <code class="code">UserName</code>, so the condition
         operator returns false, and the policy does not allow the request. </p>
      <p>The following policy includes a <code class="code">ForAnyValue</code> qualifier: </p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Version": "2012-10-17",
    "Statement": <span>{</span>
        "Effect": "Deny",
        "Action": "dynamodb:PutItem",
        "Resource": "arn:aws:dynamodb:*:*:table/Thread",
        "Condition": <span>{</span>
            "ForAnyValue:StringEquals": <span>{</span>
                "dynamodb:Attributes": [
                    "ID",
                    "PostDateTime"
                ]
            }
        }
    }
}</code></pre>
      <p>Notice that the policy includes <code class="code">"Effect":"Deny"</code> and the action is
            <code class="code">PutItem</code>. Imagine that the user makes a <code class="code">PutItem</code> request that
         includes the attributes <code class="code">UserName</code>, <code class="code">Message</code>, and
            <code class="code">PostDateTime</code>. The evaluation is this: </p>
      <div class="table-container"><div class="table-contents"><table id="w340aac35c19c11c35c32c17c31">
               <tr>
                  <td>
                     <p><code class="code">UserName</code> matches <code class="code">ID</code>?</p>
                  </td>
                  <td>
                     <p><code class="code">False</code></p>
                  </td>
               </tr>
               <tr>
                  <td>
                     <p><code class="code">UserName</code> matches <code class="code">PostDateTime</code>?</p>
                  </td>
                  <td>
                     <p><code class="code">False</code></p>
                  </td>
               </tr>
               <tr>
                  <td>
                     <p><code class="code">Messages</code> matches <code class="code">ID</code>?</p>
                  </td>
                  <td>
                     <p><code class="code">False</code></p>
                  </td>
               </tr>
               <tr>
                  <td>
                     <p><code class="code">Message</code> matches <code class="code">PostDateTime</code>?</p>
                  </td>
                  <td>
                     <p><code class="code">False</code></p>
                  </td>
               </tr>
               <tr>
                  <td>
                     <p><code class="code">PostDateTime</code> matches <code class="code">ID</code>?</p>
                  </td>
                  <td>
                     <p><code class="code">False</code></p>
                  </td>
               </tr>
               <tr>
                  <td>
                     <p><code class="code">PostDateTime</code> matches <code class="code">PostDateTime</code>?</p>
                  </td>
                  <td>
                     <p><code class="code">True</code></p>
                  </td>
               </tr>
            </table></div></div>
      <p>With the modifier <code class="code">ForAnyValue</code>, if any one of these tests returns true, the
         condition returns true. The last test returns true, so the condition is true; because the
            <code class="code">Effect</code> element is set to <code class="code">Deny</code>, the request is denied. </p>
      <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>If the key values in the request resolve to an empty data set, such as an empty list,
            a condition operator modified by <code class="code">ForAllValues</code> returns true. A condition
            operator modified by <code class="code">ForAnyValue</code> returns false. </p></div></div>
   <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./reference_policies_elements_condition_operators.html">Condition operators</div><div id="next" class="next-link" accesskey="n" href="./reference_policies_single-vs-multi-valued-condition-keys.html">Single-valued vs.
            multivalued condition keys</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/reference_policies_multi-value-conditions.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/reference_policies_multi-value-conditions.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>