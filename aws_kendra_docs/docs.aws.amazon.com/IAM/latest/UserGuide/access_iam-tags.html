<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Controlling access to and for IAM users and roles using tags - AWS Identity and Access Management</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="access_iam-tags" /><meta name="default_state" content="access_iam-tags" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_iam-tags.html" /><meta name="description" content="Use tags to control access to IAM users and roles." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS Identity and Access Management" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Control access to your AWS resources with user identity (authentication) and with policies that define specific permissions (authorization)." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_iam-tags.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/access_iam-tags.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/access_iam-tags.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/access_iam-tags.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/access_iam-tags.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_iam-tags.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_iam-tags.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/access_iam-tags.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/access_iam-tags.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/access_iam-tags.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/access_iam-tags.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/access_iam-tags.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/access_iam-tags.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/access_iam-tags.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/access_iam-tags.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/access_iam-tags.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/access_iam-tags.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/access_iam-tags.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/access_iam-tags.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/IAM/latest/UserGuide/access_iam-tags.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/access_iam-tags.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_iam-tags.html" hreflang="x-default" /><meta name="feedback-item" content="IAM" /><meta name="this_doc_product" content="AWS Identity and Access Management" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'iam'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="Controlling access to and for IAM users and roles using tags" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Controlling access to and for IAM users and roles using tags - AWS Identity and Access Management</title><meta name="pdf" content="/pdfs/IAM/latest/UserGuide/iam-ug.pdf#access_iam-tags" /><meta name="github" content="https://github.com/awsdocs/iam-user-guide/tree/main/doc_source/access_iam-tags.md" /><meta name="rss" content="aws-iam-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=76" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/access_iam-tags.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/access_iam-tags.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/access_iam-tags.html" /><meta name="keywords" content="IAM,AWS Identity and Access Management,IAM user,user,IAM group,group,IAM role,role,permission policy,trust policy,policy,access key,password" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS Identity and Access Management",
        "item" : "https://docs.aws.amazon.com/iam/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Access management for AWS resources",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/access.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Policies and permissions in IAM",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Controlling access to and for IAM users and roles using tags",
        "item" : "https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/IAM/latest/UserGuide/iam-ug.pdf#access_iam-tags" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a href="https://github.com/awsdocs/iam-user-guide/tree/main/doc_source/access_iam-tags.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/iam/index.html">AWS Identity and Access Management</a><a href="introduction.html">User Guide</a></div><div id="page-toc-src"><a href="#access_iam-tags_control-principals">Controlling access for IAM
            principals</a><a href="#access_iam-tags_control-tag-keys">Controlling access based on tag
            keys</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="access_iam-tags">Controlling access to and for IAM users and roles using
         tags</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Use the information in the following section to control who can access your IAM users and
      roles and what resources your users and roles can access. For more general information and
      examples of controlling access to other AWS resources, including other IAM resources, see
         <a href="./id_tags.html">Tagging IAM resources</a>.</p><p>Tags can be attached to the IAM <em>resource</em>, passed in
      the <em>request</em>, or attached to the <em>principal</em> that is making the request. An IAM user or role can be both a
      resource and principal. For example, you can write a policy that allows a user to list the
      groups for a user. This operation is allowed only if the user making the request (the
      principal) has the same <code class="code">project=blue</code> tag as the user they're trying to view. In
      this example, the user can view the group membership for any user, including themselves, as
      long as they are working on the same project.</p><p>To control access based on tags, you provide tag information in the <a href="./reference_policies_elements_condition.html">condition element</a> of a policy. When
      you create an IAM policy, you can use IAM tags and the associated tag condition key to
      control access to any of the following:</p><div class="itemizedlist">
       
       
       
       
   <ul class="itemizedlist"><li class="listitem">
         <p><b><a href="./access_tags.html#access_tags_control-resources">Resource</a></b> – Control access to user or role resources based
            on their tags. To do this, use the <b>aws:ResourceTag/<code class="replaceable">key-name</code></b> condition key to
            specify which tag key-value pair must be attached to the resource. For more information,
            see <a href="./access_tags.html#access_tags_control-resources">Controlling access to AWS
                resources</a>.</p>
      </li><li class="listitem">
         <p><b><a href="./access_tags.html#access_tags_control-requests">Request</a></b> – Control what tags can be passed in an IAM
            request. To do this, use the <b>aws:RequestTag/<code class="replaceable">key-name</code></b> condition key to
            specify what tags can be added, changed, or removed from an IAM user or role. This key
            is used the same way for IAM resources and other AWS resources. For more
            information, see <a href="./access_tags.html#access_tags_control-requests">Controlling access during AWS
                requests</a>.</p>
      </li><li class="listitem">
         <p><b><a href="#access_iam-tags_control-principals">Principal</a></b> – Control what the person making the request
            (the principal) is allowed to do based on the tags that are attached to that person's
            IAM user or role. To do this, use the <b>aws:PrincipalTag/<code class="replaceable">key-name</code></b> condition key to
            specify what tags must be attached to the IAM user or role before the request is
            allowed.</p>
      </li><li class="listitem">
         <p><b><a href="#access_iam-tags_control-tag-keys">Any part of
                  the authorization process</a></b> – Use the <b>aws:TagKeys</b> condition key to control whether specific tag keys can be
            used on a resource, in a request, or by a principal. In this case, the key value does
            not matter. This key behaves similarly for IAM resources and other AWS resources.
            However, when you tag a user in IAM, this also controls whether the principal can make
            the request to any service. For more information, see <a href="./access_tags.html#access_tags_control-tag-keys">Controlling access based on tag
                keys</a>.</p>
      </li></ul></div><p>You can create an IAM policy using the visual editor, using JSON, or by importing an
      existing managed policy. For details, see <a href="./access_policies_create.html">Creating IAM policies</a>.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>You can also pass <a href="./id_session-tags.html">session
         tags</a> when you assume an IAM role or federate a user. These are valid only for the
      length of the session.</p></div></div>
      <h2 id="access_iam-tags_control-principals">Controlling access for IAM
            principals</h2>
      <p>You can control what the principal is allowed to do based on the tags attached to that
         person's identity. </p>
      <p>This example shows how you might create an identity-based policy that allows any user in this account to view the group membership for
         any user, including themselves, as long as they are working on the same project. This
         operation is allowed only when the user's resource tag and the principal's tag have the
         same value for the tag key <code class="code">project</code>.  To use this policy, replace the <code class="replaceable">italicized placeholder text</code> in the example policy with your own information.
  Then, follow the directions in <a href="./access_policies_create.html">create a policy</a> or <a href="./access_policies_manage-edit.html">edit a policy</a>.</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "VisualEditor0",
            "Effect": "Allow",
            "Action": "iam:ListGroupsForUser",
            "Resource": "arn:aws:iam::111222333444:user/*",
            "Condition": <span>{</span>
                "StringEquals": <span>{</span>"aws:ResourceTag/<code class="replaceable">project</code>": "$<span>{</span>aws:PrincipalTag/<code class="replaceable">project</code>}"}
            }
        }]
}</code></pre>
    
      <h2 id="access_iam-tags_control-tag-keys">Controlling access based on tag
            keys</h2>
      <p>You can use tags in your IAM policies to control whether specific tag keys can be used
         on a resource, in a request, or by a principal.</p>
      <p>This example shows how you might create an identity-based policy that allows removing only the tag with the <code class="code">temporary</code> key
         from users. To use this policy, replace the <code class="replaceable">italicized placeholder text</code> in the example policy with your own information.
  Then, follow the directions in <a href="./access_policies_create.html">create a policy</a> or <a href="./access_policies_manage-edit.html">edit a policy</a>.</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
    "Version": "2012-10-17",
    "Statement": [<span>{</span>
        "Effect": "Allow",
        "Action": "iam:UntagUser",
        "Resource": "*",
        "Condition": <span>{</span>"ForAllValues:StringEquals": <span>{</span>"aws:TagKeys": ["<code class="replaceable">temporary</code>"]}}
    }]
}</code></pre>
   <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./access_controlling.html">Controlling access using policies</div><div id="next" class="next-link" accesskey="n" href="./access_tags.html">Control access to AWS resources using tags</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/access_iam-tags.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/en_us/IAM/latest/UserGuide/access_iam-tags.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>