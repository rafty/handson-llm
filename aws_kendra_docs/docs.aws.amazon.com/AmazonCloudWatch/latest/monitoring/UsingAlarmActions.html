<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Create alarms to stop, terminate, reboot, or recover an EC2 instance - Amazon CloudWatch</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="UsingAlarmActions" /><meta name="default_state" content="UsingAlarmActions" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/UsingAlarmActions.html" /><meta name="description" content="Create CloudWatch alarms that automatically stop, terminate, reboot, or recover your Amazon EC2 instances." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon CloudWatch" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Monitor your AWS services, collect and track metrics from AWS services and your own applications, and set alarms based on data from those metrics." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/UsingAlarmActions.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AmazonCloudWatch/latest/monitoring/UsingAlarmActions.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AmazonCloudWatch/latest/monitoring/UsingAlarmActions.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AmazonCloudWatch/latest/monitoring/UsingAlarmActions.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AmazonCloudWatch/latest/monitoring/UsingAlarmActions.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/UsingAlarmActions.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/UsingAlarmActions.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AmazonCloudWatch/latest/monitoring/UsingAlarmActions.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AmazonCloudWatch/latest/monitoring/UsingAlarmActions.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AmazonCloudWatch/latest/monitoring/UsingAlarmActions.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AmazonCloudWatch/latest/monitoring/UsingAlarmActions.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AmazonCloudWatch/latest/monitoring/UsingAlarmActions.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AmazonCloudWatch/latest/monitoring/UsingAlarmActions.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AmazonCloudWatch/latest/monitoring/UsingAlarmActions.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AmazonCloudWatch/latest/monitoring/UsingAlarmActions.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AmazonCloudWatch/latest/monitoring/UsingAlarmActions.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AmazonCloudWatch/latest/monitoring/UsingAlarmActions.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AmazonCloudWatch/latest/monitoring/UsingAlarmActions.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AmazonCloudWatch/latest/monitoring/UsingAlarmActions.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AmazonCloudWatch/latest/monitoring/UsingAlarmActions.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AmazonCloudWatch/latest/monitoring/UsingAlarmActions.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/UsingAlarmActions.html" hreflang="x-default" /><meta name="feedback-item" content="CloudWatch" /><meta name="this_doc_product" content="Amazon CloudWatch" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudwatch'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="Create alarms to stop, terminate, reboot, or recover an EC2 instance" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Create alarms to stop, terminate, reboot, or recover an EC2 instance - Amazon CloudWatch</title><meta name="pdf" content="/pdfs/AmazonCloudWatch/latest/monitoring/acw-ug.pdf#UsingAlarmActions" /><meta name="github" content="https://github.com/awsdocs/amazon-cloudwatch-user-guide/tree/master/doc_source/UsingAlarmActions.md" /><meta name="rss" content="amazon-cloudwatch-document-history.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=138" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudWatch&amp;topic_url=http://docs.aws.amazon.com/en_us/AmazonCloudWatch/latest/monitoring/UsingAlarmActions.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/AmazonCloudWatch/latest/monitoring/UsingAlarmActions.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/AmazonCloudWatch/latest/monitoring/UsingAlarmActions.html" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon CloudWatch",
        "item" : "https://docs.aws.amazon.com/cloudwatch/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Using Amazon CloudWatch alarms",
        "item" : "https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/AlarmThatSendsEmail.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Create alarms to stop, terminate, reboot, or recover an EC2 instance",
        "item" : "https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/AlarmThatSendsEmail.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/AmazonCloudWatch/latest/monitoring/acw-ug.pdf#UsingAlarmActions" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a href="https://github.com/awsdocs/amazon-cloudwatch-user-guide/tree/master/doc_source/UsingAlarmActions.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/cloudwatch/index.html">Amazon CloudWatch</a><a href="WhatIsCloudWatch.html">User Guide</a></div><div id="page-toc-src"><a href="#AddingStopActions">Adding stop actions to Amazon CloudWatch alarms</a><a href="#AddingTerminateActions">Adding terminate actions to Amazon CloudWatch alarms</a><a href="#AddingRebootActions">Adding reboot actions to Amazon CloudWatch alarms</a><a href="#AddingRecoverActions">Adding recover actions to Amazon CloudWatch alarms</a><a href="#ViewAlarmHistory">Viewing the history of triggered alarms and actions</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="UsingAlarmActions">Create alarms to stop, terminate, reboot, or recover an EC2
      instance</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Using Amazon CloudWatch alarm actions, you can create alarms that automatically stop, terminate,
    reboot, or recover your EC2 instances. You can use the stop or terminate actions
    to help you save money when you no longer need an instance to be running. You can use the reboot
    and recover actions to automatically reboot those instances or recover them onto new hardware if
    a system impairment occurs.</p><p>There are a number of scenarios in which you might want to automatically stop or terminate
    your instance. For example, you might have instances dedicated to batch payroll processing jobs
    or scientific computing tasks that run for a period of time and then complete their work. Rather
    than letting those instances sit idle (and accrue charges), you can stop or terminate them,
    which helps you to save money. The main difference between using the stop and the terminate
    alarm actions is that you can easily restart a stopped instance if you need to run it again
    later. You can also keep the same instance ID and root volume. However, you cannot restart a
    terminated instance. Instead, you must launch a new instance.</p><p>You can add the stop, terminate, or reboot, actions to any alarm that is set on an
    Amazon EC2 per-instance metric, including basic and detailed monitoring metrics provided by Amazon CloudWatch
    (in the AWS/EC2 namespace), in addition to any custom metrics that include the "InstanceId="
    dimension, as long as the InstanceId value refers to a valid running Amazon EC2 instance. You can also add
    the recover action to alarms that is set on any Amazon EC2 per-instance metric except for <code class="code">StatusCheckFailed_Instance</code>.</p><p>To set up a CloudWatch alarm action that can reboot, stop, or terminate an instance, you must use a service-linked IAM role, 
    <em>AWSServiceRoleForCloudWatchEvents</em>. The AWSServiceRoleForCloudWatchEvents IAM 
    role enables AWS to perform alarm actions on your behalf.</p><p>To create the service-linked role for CloudWatch Events, use the following command:</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">aws iam create-service-linked-role --aws-service-name events.amazonaws.com</code></pre>
    <h6>Console support</h6>
    <p>You can create alarms using the CloudWatch console or the Amazon EC2 console.
      The procedures in this documentation use the CloudWatch console. 
      For procedures that use the Amazon EC2 console, see <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/UsingAlarmActions.html">Create Alarms That Stop, Terminate, Reboot, or Recover an Instance</a>
      in the <em>Amazon EC2 User Guide for Linux Instances</em>.</p>
   
    <h6>Permissions</h6>
    <p>If you are using an AWS Identity and Access Management (IAM) account to create or modify an alarm that performs 
      EC2 actions or Systems Manager OpsItem actions, you must
      have the <code class="code">iam:CreateServiceLinkedRole</code> permission.</p>
  <div class="highlights" id="inline-topiclist"><h6>Contents</h6><ul><li><a href="#AddingStopActions">Adding stop actions to Amazon CloudWatch alarms</a></li><li><a href="#AddingTerminateActions">Adding terminate actions to Amazon CloudWatch alarms</a></li><li><a href="#AddingRebootActions">Adding reboot actions to Amazon CloudWatch alarms</a></li><li><a href="#AddingRecoverActions">Adding recover actions to Amazon CloudWatch alarms</a></li><li><a href="#ViewAlarmHistory">Viewing the history of triggered alarms and actions</a></li></ul></div><h2 id="AddingStopActions">Adding stop actions to Amazon CloudWatch alarms</h2>
    

    <p>You can create an alarm that stops an Amazon EC2 instance when a certain threshold has been
        met. For example, you may run development or test instances and occasionally forget to shut
        them off. You can create an alarm that is triggered when the average CPU utilization
        percentage has been lower than 10 percent for 24 hours, signaling that it is idle and no
        longer in use. You can adjust the threshold, duration, and period to suit your needs, plus
        you can add an SNS notification, so that you will receive an email when the
        alarm is triggered.</p>

      <p>Amazon EC2 instances that use an Amazon Elastic Block Store volume as the root device can be stopped or
        terminated, whereas instances that use the instance store as the root device can only be
        terminated.</p>

      <div class="procedure"><h6>To create an alarm to stop an idle instance using the Amazon CloudWatch console</h6><ol><li> <p>Open the CloudWatch console at
         <a href="https://console.aws.amazon.com/cloudwatch/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/cloudwatch/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p> </li><li>
          <p>In the navigation pane, choose <b>Alarms</b>, <b>All alarms</b>.</p>
        </li><li>
          <p>Choose <b>Create alarm</b>.</p>
        </li><li>
          <p>Choose <b>Select Metric</b>.</p></li><li><p>For <b>AWS namespaces</b>, choose <b>EC2</b>.</p></li><li>
          <p>Do the following:</p>
          <ol><li>
              <p>Choose <b>Per-Instance Metrics</b>.</p>
            </li><li>
              <p>Select the check box in the row with the correct instance and the <b>CPUUtilization</b> metric.</p>
            </li><li>
              <p>Choose <b>Graphed metrics</b>.</p>
            </li><li>
              <p>For the statistic, choose <b>Average</b>.</p>
            </li><li>
              <p>Choose a period (for example, <code class="userinput">1 Hour</code>).</p>
            </li><li>
              <p>Choose <b>Select metric</b>.</p>
            </li></ol>
        </li><li>
          <p>For the <b>Define Alarm</b> step, do the following:</p>
          <ol><li>
              <p>Under <b>Conditions</b>, choose <b>Static</b>. </p> 
              
             
            </li><li>
              <p>Under <b>Whenever CPUUtilization is</b>, choose <b>Lower</b>.</p></li><li><p>For <b>than</b>, type <code class="userinput">10</code>.</p></li><li><p>Choose <b>Next</b>.</p></li><li>
              <p>Under <b>Notification</b>, for <b>Send notification
                to</b>, choose an existing SNS topic or create a new one.</p>
              <p>To create an SNS topic, choose <b>New list</b>. For <b>Send
                notification to</b>, type a name for the SNS topic (for example,
              Stop_EC2_Instance). For <b>Email list</b>, type a comma-separated list
              of email addresses to be notified when the alarm changes to the <code class="code">ALARM</code>
              state. Each email address is sent a topic subscription confirmation email. You must
              confirm the subscription before notifications can be sent to an email address.</p>
            </li><li>
              <p>Choose <b>Add EC2 Action</b>.</p>
            </li><li>
              <p>For <b>Alarm state trigger</b>, choose <b>In alarm</b>. 
                For <b>Take the following action</b>, choose <b>Stop
                this instance</b>.</p>
            </li><li><p>Choose <b>Next</b>.</p></li><li>
              <p>Enter a name and description for the alarm. The name must contain only ASCII
                characters. Then choose <b>Next</b>.</p>
            </li><li><p>Under <b>Preview and create</b>, confirm that the information and conditions are what you want, then 
              choose <b>Create alarm</b>.</p></li></ol>
        </li></ol></div>
  <h2 id="AddingTerminateActions">Adding terminate actions to Amazon CloudWatch alarms</h2>
    
    <p>You can create an alarm that terminates an EC2 instance automatically when a certain
        threshold has been met (as long as termination protection is not enabled for the instance).
        For example, you might want to terminate an instance when it has completed its work, and you
        don't need the instance again. If you might want to use the instance later, you should stop
        the instance instead of terminating it. For information about enabling and disabling
        termination protection for an instance, see <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/Using_ChangingDisableAPITermination.html">Enabling Termination Protection for an Instance</a> in the
          <em>Amazon EC2 User Guide for Linux Instances</em>.</p>

      <div class="procedure"><h6>To create an alarm to terminate an idle instance using the Amazon CloudWatch console</h6><ol><li> <p>Open the CloudWatch console at
         <a href="https://console.aws.amazon.com/cloudwatch/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/cloudwatch/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p> </li><li>
          <p>In the navigation pane, choose <b>Alarms</b>, <b>Create
            Alarm</b>.</p>
        </li><li>
          <p>For the <b>Select Metric</b> step, do the following:</p>
          <ol><li>
              <p>Under <b>EC2 Metrics</b>, choose <b>Per-Instance Metrics</b>.</p>
            </li><li>
              <p>Select the row with the instance and the <b>CPUUtilization</b> metric.</p>
            </li><li>
              <p>For the statistic, choose <b>Average</b>.</p>
            </li><li>
              <p>Choose a period (for example, <code class="userinput">1 Hour</code>).</p>
            </li><li>
              <p>Choose <b>Next</b>.</p>
            </li></ol>
        </li><li>
          <p>For the <b>Define Alarm</b> step, do the following:</p>
          <ol><li>
              <p>Under <b>Alarm Threshold</b>, type a unique name for the alarm (for example, 
                Terminate EC2 instance) and a description of the alarm (for example, Terminate EC2 instance 
                when CPU is idle for too long). Alarm names must contain only ASCII characters.</p>
            </li><li>
              <p>Under <b>Whenever</b>, for <b>is</b>, choose <b>&lt;</b> 
                and type <code class="userinput">10</code>. For <b>for</b>, type <code class="userinput">24</code>
                consecutive periods.</p>
              <p>A graphical representation of the threshold is shown under <b>Alarm
                Preview</b>.</p>
            </li><li>
              <p>Under <b>Notification</b>, for <b>Send notification
                to</b>, choose an existing SNS topic or create a new one.</p>
              <p>To create an SNS topic, choose <b>New list</b>. For <b>Send
                notification to</b>, type a name for the SNS topic (for example,
              Terminate_EC2_Instance). For <b>Email list</b>, type a comma-separated
              list of email addresses to be notified when the alarm changes to the
                <code class="code">ALARM</code> state. Each email address is sent a topic subscription
              confirmation email. You must confirm the subscription before notifications can be sent
              to an email address.</p>
            </li><li>
              <p>Choose <b>EC2 Action</b>.</p>
            </li><li>
              <p>For <b>Whenever this alarm</b>, choose <b>State is
                ALARM</b>. For <b>Take this action</b>, choose
                <b>Terminate this instance</b>.</p>
            </li><li>
              <p>Choose <b>Create Alarm</b>.</p>
            </li></ol>
        </li></ol></div>
  <h2 id="AddingRebootActions">Adding reboot actions to Amazon CloudWatch alarms</h2>
    

    <p>You can create an Amazon CloudWatch alarm that monitors an Amazon EC2 instance and automatically reboots
      the instance. The reboot alarm action is recommended for Instance Health Check failures (as
      opposed to the recover alarm action, which is suited for System Health Check failures). An
      instance reboot is equivalent to an operating system reboot. In most cases, it takes only a
      few minutes to reboot your instance. When you reboot an instance, it remains on the same
      physical host, so your instance keeps its public DNS name, private IP address, and any data on
      its instance store volumes.</p>

    <p>Rebooting an instance doesn't start a new instance billing hour, unlike stopping and
      restarting your instance. For more information about rebooting an instance, see <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-instance-reboot.html">Reboot Your Instance</a> in the
        <em>Amazon EC2 User Guide for Linux Instances</em>.</p>
    
    <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>To avoid a race condition between the reboot and recover actions, avoid
        setting the same evaluation period for both a reboot alarm and a recover alarm. We recommend that you set
        reboot alarms to three evaluation periods of one minute each. </p></div></div>

    <div class="procedure"><h6>To create an alarm to reboot an instance using the Amazon CloudWatch console</h6><ol><li> <p>Open the CloudWatch console at
         <a href="https://console.aws.amazon.com/cloudwatch/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/cloudwatch/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p> </li><li>
        <p>In the navigation pane, choose <b>Alarms</b>, <b>Create
            Alarm</b>.</p>
      </li><li>
        <p>For the <b>Select Metric</b> step, do the following:</p>
        <ol><li>
            <p>Under <b>EC2 Metrics</b>, choose <b>Per-Instance Metrics</b>.</p>
          </li><li>
            <p>Select the row with the instance and the <b>StatusCheckFailed_Instance</b> metric.</p>
          </li><li>
            <p>For the statistic, choose <b>Minimum</b>.</p>
          </li><li>
            <p>Choose a period (for example, <code class="userinput">1 Minute</code>) and choose
                <b>Next</b>.</p>
          </li></ol>
      </li><li>
        <p>For the <b>Define Alarm</b> step, do the following:</p>
        <ol><li>
            <p>Under <b>Alarm Threshold</b>, type a unique name for the alarm (for example, 
              Reboot EC2 instance) and a description of the alarm (for example, Reboot EC2 instance when  
              health checks fail). Alarm names must contain only ASCII characters.</p>
          </li><li>
            <p>Under <b>Whenever</b>, for <b>is</b>, choose <b>&gt;</b> 
              and type <code class="userinput">0</code>. For <b>for</b>, type <code class="userinput">3</code>
              consecutive periods.</p>
            <p>A graphical representation of the threshold is shown under <b>Alarm
              Preview</b>.</p>
          </li><li>
            <p>Under <b>Notification</b>, for <b>Send notification
              to</b>, choose an existing SNS topic or create a new one.</p>
            <p>To create an SNS topic, choose <b>New list</b>. For <b>Send
                notification to</b>, type a name for the SNS topic (for example,
              Reboot_EC2_Instance). For <b>Email list</b>, type a comma-separated list
              of email addresses to be notified when the alarm changes to the <code class="code">ALARM</code>
              state. Each email address is sent a topic subscription confirmation email. You must
              confirm the subscription before notifications can be sent to an email address.</p>
          </li><li>
            <p>Choose <b>EC2 Action</b>.</p>
          </li><li>
            <p>For <b>Whenever this alarm</b>, choose <b>State is
                ALARM</b>. For <b>Take this action</b>, choose <b>Reboot
                this instance</b>.</p>
          </li><li>
            <p>Choose <b>Create Alarm</b>.</p>
          </li></ol>
      </li></ol></div>
  <h2 id="AddingRecoverActions">Adding recover actions to Amazon CloudWatch alarms</h2>
    

      <p>You can create an Amazon CloudWatch alarm that monitors an Amazon EC2 instance and automatically
        recovers the instance if it becomes impaired due to an underlying hardware failure or a
        problem that requires AWS involvement to repair. Terminated instances cannot be recovered. A
        recovered instance is identical to the original instance, including the instance ID, private
        IP addresses, Elastic IP addresses, and all instance metadata.</p>

      <p>When the <code class="code">StatusCheckFailed_System</code> alarm is triggered, and the recover
        action is initiated, you will be notified by the Amazon SNS topic that you chose when you
        created the alarm and associated the recover action. During instance recovery, the instance
        is migrated during an instance reboot, and any data that is in-memory is lost. When the
        process is complete, information is published to the SNS topic you've configured for the
        alarm. Anyone who is subscribed to this SNS topic will receive an email notification that
        includes the status of the recovery attempt and any further instructions. You will notice an
        instance reboot on the recovered instance.</p>
    
    <p>The recover action can be used only with <code class="code">StatusCheckFailed_System</code>, not with <code class="code">StatusCheckFailed_Instance</code>.</p>

    <p>Examples of problems that cause system status checks to fail include:</p> 
      
    <div class="itemizedlist">
       
       
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p>Loss of network connectivity</p>
      </li><li class="listitem">
        <p>Loss of system power</p>
      </li><li class="listitem">
        <p>Software issues on the physical host</p>
      </li><li class="listitem">
        <p>Hardware issues on the physical host that impact network reachability</p>
      </li></ul></div>
    
    <p>The recover action is supported only on some instance types. For more information about supported instance types
      and other requirements, see 
      <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-instance-recover.html">
        Recover your instance</a> and 
      <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-instance-recover.html#requirements-for-recovery">
       Requirements</a>.</p>


    <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>To avoid a race condition between the reboot and recover actions, avoid setting the same evaluation period 
        for both a reboot alarm and a recover alarm.  We recommend that you set recover alarms to 
        two evaluation periods of one minute each and reboot alarms to three evaluation periods of one minute each.</p></div></div>
    <div class="procedure"><h6>To create an alarm to recover an instance using the Amazon CloudWatch console</h6><ol><li> <p>Open the CloudWatch console at
         <a href="https://console.aws.amazon.com/cloudwatch/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/cloudwatch/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p> </li><li>
          <p>In the navigation pane, choose <b>Alarms</b>, <b>Create
            Alarm</b>.</p>
        </li><li>
          <p>For the <b>Select Metric</b> step, do the following:</p>
          <ol><li>
              <p>Under <b>EC2 Metrics</b>, choose <b>Per-Instance Metrics</b>.</p>
            </li><li>
              <p>Select the row with the instance and the <b>StatusCheckFailed_System</b> metric.</p>
            </li><li>
              <p>For the statistic, choose <b>Minimum</b>.</p>
            </li><li>
              <p>Choose a period (for example, <code class="userinput">1 Minute</code>).</p>
              <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>To avoid a race condition between the reboot and recover actions, avoid
                  setting the same evaluation period for both a reboot alarm and a recover alarm. We recommend that you set
                  recover alarms to two evaluation periods of one minute each.</p></div></div>
            </li><li>
              <p>Choose <b>Next</b>.</p>
            </li></ol>
        </li><li>
          <p>For the <b>Define Alarm</b> step, do the following:</p>
          <ol><li>
              <p>Under <b>Alarm Threshold</b>, type a unique name for the alarm (for example, 
                Recover EC2 instance) and a description of the alarm (for example, Recover EC2 instance when  
                health checks fail). Alarm names must contain only ASCII characters.</p>
            </li><li>
              <p>Under <b>Whenever</b>, for <b>is</b>, choose <b>&gt;</b> 
                and type <code class="userinput">0</code>. For <b>for</b>, type <code class="userinput">2</code>
                consecutive periods.</p>
 
            </li><li>
              <p>Under <b>Notification</b>, for <b>Send notification
                to</b>, choose an existing SNS topic or create a new one.</p>
              <p>To create an SNS topic, choose <b>New list</b>. For <b>Send
                notification to</b>, type a name for the SNS topic (for example,
              Recover_EC2_Instance). For <b>Email list</b>, type a comma-separated
              list of email addresses to be notified when the alarm changes to the
                <code class="code">ALARM</code> state. Each email address is sent a topic subscription
              confirmation email. You must confirm the subscription before notifications can be sent
              to an email address.</p>
            </li><li>
              <p>Choose <b>EC2 Action</b>.</p>
            </li><li>
              <p>For <b>Whenever this alarm</b>, choose <b>State is
                ALARM</b>. For <b>Take this action</b>, choose
                <b>Recover this instance</b>.</p>
            </li><li>
              <p>Choose <b>Create Alarm</b>.</p>
            </li></ol>
        </li></ol></div>
  <h2 id="ViewAlarmHistory">Viewing the history of triggered alarms and actions</h2>
    
    <p>You can view alarm and action history in the Amazon CloudWatch console. Amazon CloudWatch keeps the last two
      weeks' worth of alarm and action history.</p>

    <div class="procedure"><h6>To view the history of triggered alarms and actions</h6><ol><li> <p>Open the CloudWatch console at
         <a href="https://console.aws.amazon.com/cloudwatch/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/cloudwatch/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p> </li><li>
        <p>In the navigation pane, choose <b>Alarms</b> and select an alarm.</p>
      </li><li>
        <p>To view the most recent state transition along with the time and metric values, choose
            <b>Details</b>.</p>
      </li><li>
        <p>To view the most recent history entries, choose <b>History</b>.</p>
      </li></ol></div>
  <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./US_AlarmAtThresholdEBS.html">Create a storage throughput alarm</div><div id="next" class="next-link" accesskey="n" href="./monitor_estimated_charges_with_cloudwatch.html">Create a billing alarm</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudWatch&amp;topic_url=https://docs.aws.amazon.com/en_us/AmazonCloudWatch/latest/monitoring/UsingAlarmActions.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudWatch&amp;topic_url=https://docs.aws.amazon.com/en_us/AmazonCloudWatch/latest/monitoring/UsingAlarmActions.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>