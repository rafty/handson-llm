<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>API access control - AWS Marketplace Catalog API</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="api-access-control" /><meta name="default_state" content="api-access-control" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/marketplace-catalog/latest/api-reference/api-access-control.html" /><meta name="description" content="Learn how to set up IAM permissions before you use the AWS Marketplace Catalog API." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS Marketplace Catalog API" /><meta name="guide" content="Reference" /><meta name="abstract" content="This AWS Marketplace Catalog API Reference guide describes the APIS and how to use them." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/marketplace-catalog/latest/api-reference/api-access-control.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/marketplace-catalog/latest/api-reference/api-access-control.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/marketplace-catalog/latest/api-reference/api-access-control.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/marketplace-catalog/latest/api-reference/api-access-control.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/marketplace-catalog/latest/api-reference/api-access-control.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/marketplace-catalog/latest/api-reference/api-access-control.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/marketplace-catalog/latest/api-reference/api-access-control.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/marketplace-catalog/latest/api-reference/api-access-control.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/marketplace-catalog/latest/api-reference/api-access-control.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/marketplace-catalog/latest/api-reference/api-access-control.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/marketplace-catalog/latest/api-reference/api-access-control.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/marketplace-catalog/latest/api-reference/api-access-control.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/marketplace-catalog/latest/api-reference/api-access-control.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/marketplace-catalog/latest/api-reference/api-access-control.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/marketplace-catalog/latest/api-reference/api-access-control.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/marketplace-catalog/latest/api-reference/api-access-control.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/marketplace-catalog/latest/api-reference/api-access-control.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/marketplace-catalog/latest/api-reference/api-access-control.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/marketplace-catalog/latest/api-reference/api-access-control.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/marketplace-catalog/latest/api-reference/api-access-control.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/marketplace-catalog/latest/api-reference/api-access-control.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/marketplace-catalog/latest/api-reference/api-access-control.html" hreflang="x-default" /><meta name="feedback-item" content="Marketplace" /><meta name="this_doc_product" content="AWS Marketplace Catalog API" /><meta name="this_doc_guide" content="Reference" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'marketplace'}"></script><meta id="panorama-serviceSubSection" value="Reference" /><meta id="panorama-serviceConsolePage" value="API access control" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>API access control - AWS Marketplace Catalog API</title><meta name="pdf" content="/pdfs/marketplace-catalog/latest/api-reference/AWSMPCAPIReference.pdf#api-access-control" /><meta name="rss" content="doc-history.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=337" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Marketplace&amp;topic_url=http://docs.aws.amazon.com/en_us/marketplace-catalog/latest/api-reference/api-access-control.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/marketplace-catalog/latest/api-reference/api-access-control.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/marketplace-catalog/latest/api-reference/api-access-control.html" /><meta name="keywords" content="API,catalog,access" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS Marketplace Catalog",
        "item" : "https://docs.aws.amazon.com/marketplace/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Reference",
        "item" : "https://docs.aws.amazon.com/marketplace-catalog/latest/api-reference"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "AWS Marketplace Catalog API",
        "item" : "https://docs.aws.amazon.com/marketplace-catalog/latest/api-reference/welcome.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "API access control",
        "item" : "https://docs.aws.amazon.com/marketplace-catalog/latest/api-reference/welcome.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/marketplace-catalog/latest/api-reference/AWSMPCAPIReference.pdf#api-access-control" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/marketplace/index.html">AWS Marketplace Catalog</a><a href="welcome.html">Reference</a></div><div id="page-toc-src"><a href="#allowing-actions-with-managed-policies">Allowing actions with AWS
                managed policies</a><a href="#allowing-actions-on-all-resources">Allowing actions on all
                resources</a><a href="#allowing-actions-on-specific-resources">Allowing actions on specific
                resources</a><a href="#allowing-actions-with-specific-changetype-condition-key">Allowing
                actions with specific ChangeType condition key</a><a href="#allowing-actions-with-specific-resource-tag-condition-key">Allowing
                actions with specific aws:ResourceTag condition key</a><a href="#managing-tags-on-resources">Managing tags on resources</a><a href="#managing-tags-when-requesting-changes-to-resources">Managing tags when
                requesting changes to resources</a><a href="#grant-permission-to-mange-tags-on-resources">Granting permission to
                manage tags on resources</a><a href="#grant-permission-to-manage-tags-resources-specific-tags">Granting
                permission to manage tags on resources only when those resources have specific
                tags</a><a href="#grant-permission-create-entities-change-sets-tags">Granting permission
                to create entities and change sets only with tags</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="api-access-control">API access control</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>You can use the AWS Marketplace Catalog API to manage <a href="https://docs.aws.amazon.com/marketplace-catalog/latest/api-reference/seller-products.html">a seller product in
            AWS Marketplace</a> or an <a href="https://docs.aws.amazon.com/marketplace-catalog/latest/api-reference/private-marketplace.html">experience in a
            private marketplace</a>. However, first make sure your user or role can access the
        API functionality that you want to call.</p><p>Use AWS Identity and Access Management (IAM) to create users and roles and assign policies that grant limited
        permissions to end users. The policies define the actions that the user or role can take on
        your resources through the AWS Marketplace Catalog API.</p><p>For example, you can define roles such as engineering, marketing, and pricing. Then, you
        can add a user in your organization to the engineering role. In that role, they might be
        granted permissions to initiate a change request to publish a new version of your seller
        product. However, the engineering role doesn't allow the user to list all change
        sets.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>To sell products on AWS Marketplace, your AWS account must be set up as a seller account. For
            more details about becoming an AWS Marketplace seller, see <a href="https://docs.aws.amazon.com/marketplace/latest/userguide/user-guide-for-sellers.html">Getting started as a
                seller</a> in the <em>AWS Marketplace Seller Guide</em>.</p></div></div><p>You can use AWS managed policies, or you can create your own IAM policies to have more
        granular control than what's available in AWS managed policies. For details about these
        approaches, see the following topics.</p><div class="highlights" id="inline-topiclist"><h6>Topics</h6><ul><li><a href="#allowing-actions-with-managed-policies">Allowing actions with AWS
                managed policies</a></li><li><a href="#allowing-actions-on-all-resources">Allowing actions on all
                resources</a></li><li><a href="#allowing-actions-on-specific-resources">Allowing actions on specific
                resources</a></li><li><a href="#allowing-actions-with-specific-changetype-condition-key">Allowing
                actions with specific ChangeType condition key</a></li><li><a href="#allowing-actions-with-specific-resource-tag-condition-key">Allowing
                actions with specific aws:ResourceTag condition key</a></li><li><a href="#managing-tags-on-resources">Managing tags on resources</a></li><li><a href="#managing-tags-when-requesting-changes-to-resources">Managing tags when
                requesting changes to resources</a></li><li><a href="#grant-permission-to-mange-tags-on-resources">Granting permission to
                manage tags on resources</a></li><li><a href="#grant-permission-to-manage-tags-resources-specific-tags">Granting
                permission to manage tags on resources only when those resources have specific
                tags</a></li><li><a href="#grant-permission-create-entities-change-sets-tags">Granting permission
                to create entities and change sets only with tags</a></li></ul></div>
        <h2 id="allowing-actions-with-managed-policies">Allowing actions with AWS
                managed policies</h2>
        <p>You can use policies that are managed by AWS to grant permissions to your user or
            role.</p>
        <p>To work with products that you sell on AWS Marketplace, you can use the
                <code class="code">AWSMarketplaceSellerFullAccess</code> IAM managed policy, which has full
            access to the AWS Marketplace Catalog API in addition to its other permissions. You can grant read-only
            access for the Catalog API with the <code class="code">AWSMarketplaceSellerProductsReadOnly</code>
            policy. For more information, see <a href="https://docs.aws.amazon.com/marketplace/latest/userguide/marketplace-management-portal-user-access.html">Controlling access to AWS Marketplace Management Portal</a>, <a href="https://docs.aws.amazon.com/marketplace/latest/userguide/detailed-management-portal-permissions.html">Policies and permissions for AWS Marketplace sellers</a>, and <a href="https://docs.aws.amazon.com/marketplace/latest/userguide/security-iam-awsmanpol.html">AWS managed policies
                for AWS Marketplace sellers</a> in the <em>AWS Marketplace Seller
                Guide.</em></p>
        <p>To manage a private marketplace, you can use the
                <code class="code">AWSPrivateMarketplaceAdminFullAccess</code> IAM managed policy, which has
            full access to create and edit the private marketplace for your account or AWS
            organization. For more information, see <a href="https://docs.aws.amazon.com/marketplace/latest/buyerguide/buyer-iam-users-groups-policies.html">Controlling
                access to AWS Marketplace subscriptions</a>, <a href="https://docs.aws.amazon.com/marketplace/latest/buyerguide/it-administrator.html">Creating a private
                marketplace administrator</a>, and <a href="https://docs.aws.amazon.com/marketplace/latest/buyerguide/buyer-security-iam-awsmanpol.html">AWS managed
                policies for AWS Marketplace buyers</a> in the <em>AWS Marketplace Buyer
                Guide.</em></p>
        <p>Alternatively, you can create your own IAM policies to have more granular control
            than is available in AWS managed policies. Use the following topics to create your own
            IAM policies.</p>
     
        <h2 id="allowing-actions-on-all-resources">Allowing actions on all
                resources</h2>
        <p>Resources are objects that the actions can act upon. Not every resource type can be
            specified with every action. Some resource types work with only certain actions. For
            more information, see <a href="https://docs.aws.amazon.com/service-authorization/latest/reference/list_awsmarketplacecatalog.html">Actions, resources, and condition keys for the AWS Marketplace Catalog</a> in the
                <em>Service Authorization Reference</em>.</p>
        <p>There are two resource types in the Catalog API:</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Entity</b> – An entity is a <a href="https://docs.aws.amazon.com/marketplace-catalog/latest/api-reference/seller-products.html">seller
                        product in AWS Marketplace</a> or an <a href="https://docs.aws.amazon.com/marketplace-catalog/latest/api-reference/private-marketplace.html">experience in a private marketplace</a>.</p>
            </li><li class="listitem">
                <p><b>ChangeSet</b> – A change set is returned
                    each time you use Catalog API to make changes to an entity. The change set
                    describes the requested changes and its status. A change set can be canceled if
                    the status is in the <code class="code">PREPARING</code> state.</p>
            </li></ul></div>
        <p>To allow a user or role the permission to make changes to all entities in an
            AWS account, you can add the following IAM policy. With this policy, the user or
            role can use the <code class="code">StartChangeSet</code> action on all resources
            (<code class="code">"*"</code>).</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "aws-marketplace:StartChangeSet"
      ],
      "Resource": "*"
    }
  ]
}
</code></pre>
        <p>For information about all actions available for the Catalog API, see <a href="https://docs.aws.amazon.com/service-authorization/latest/reference/list_awsmarketplacecatalog.html">Actions, resources, and condition keys for AWS Marketplace Catalog</a> in the <em>Service Authorization Reference</em>.</p>
     
        <h2 id="allowing-actions-on-specific-resources">Allowing actions on specific
                resources</h2>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Resource-level permissions and condition context keys for the <code class="code">StartChangeSet</code> action are only supported when used with Catalog API. They are not supported when used with the <a href="http://aws.amazon.com/marketplace/management" rel="noopener noreferrer" target="_blank"><span>AWS Marketplace Management Portal</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></div></div>
        <p>Instead of allowing changes to all resources, you can use resource-level permissions
            to allow changes to specific resources.</p>
        <p>For example, you can allow changes to a specific seller product in the AWS account
            instead of to all seller products. You do this by specifying the Amazon Resource Name
            (ARN) of the seller product in the <code class="code">Resource</code> of the IAM policy.</p>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>To specify granular, resource-level permissions with actions that create new
                change sets, you need to also include a <code class="code">ChangeSet</code> ARN to the list of
                resources. The <code class="code">ChangeSet</code> ARN must include the wildcard
                    (<code class="code">/*</code>) to match any new change set ID that's created as shown.</p></div></div>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "aws-marketplace:StartChangeSet"
      ],
      "Resource": [
        "arn:aws:aws-marketplace:us-east-1:123456789012:AWSMarketplace/AmiProduct/example1-abcd-1234-5ef6-7890abcdef12",
        "arn:aws:aws-marketplace:us-east-1:123456789012:AWSMarketplace/ChangeSet/*"
      ]
    }
  ]
}
</code></pre>
        <p>For another example, you can allow changes to a specific experience in a private
            marketplace instead of to all experiences. You do this by specifying the ARN of the
            experience in the <code class="code">Resource</code> of the IAM policy.</p>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>To specify granular, resource-level permissions with actions that create new
                change sets, you need to also include a <code class="code">ChangeSet</code> ARN to the list of
                resources. The <code class="code">ChangeSet</code> ARN must include the wildcard
                    (<code class="code">/*</code>) to match any new change set ID that's created as shown.</p></div></div>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "aws-marketplace:StartChangeSet"
      ],
      "Resource": [
        "arn:aws:aws-marketplace:us-east-1:123456789012:AWSMarketplace/Experience/exp-example12345",
        "arn:aws:aws-marketplace:us-east-1:123456789012:AWSMarketplace/ChangeSet/*"
      ]
    }
  ]
}
</code></pre>
     
        <h2 id="allowing-actions-with-specific-changetype-condition-key">Allowing
                actions with specific ChangeType condition key</h2>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Resource-level permissions and condition context keys for the <code class="code">StartChangeSet</code> action are only supported when used with Catalog API. They are not supported when used with the <a href="http://aws.amazon.com/marketplace/management" rel="noopener noreferrer" target="_blank"><span>AWS Marketplace Management Portal</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></div></div>
        <p>The Catalog API action <code class="code">StartChangeSet</code> has several different change types.
            You can allow access to only specific change types.</p>
        <p>For example, you might only want to allow changes to the metadata of the seller
            product, such as the product title, and not allow adding new product versions. In this
            example, the change type <code class="code">UpdateInformation</code> allows changing the metadata of
            a seller product, including the title. For more information about the different change
            types, see <a href="https://docs.aws.amazon.com/marketplace-catalog/latest/api-reference/seller-products.html">Working with
                seller products</a> and <a href="https://docs.aws.amazon.com/marketplace-catalog/latest/api-reference/private-marketplace.html">Working with
                a private marketplace</a> in the <em>AWS Marketplace Catalog API
                Reference</em>.</p>
        <p>To limit the action to one or multiple change types, specify the
                <code class="code">ChangeType</code> in the condition keys. In the following example IAM
            policy, the condition operator <code class="code">StringEquals</code> specifies that the action is
            only allowed if the <code class="code">ChangeType</code> matches <code class="code">UpdateInformation</code>. For
            more information about condition keys, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements_condition_operators.html">Condition operators</a> in the <em>AWS Identity and Access
                Management User Guide</em>.</p>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>To specify granular, resource-level permissions with actions that create new
                change sets, you need to also include a <code class="code">ChangeSet</code> ARN to the list of
                resources. The <code class="code">ChangeSet</code> ARN must include the wildcard
                    (<code class="code">/*</code>) to match any new change set ID that's created as shown.</p></div></div>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "aws-marketplace:StartChangeSet"
      ],
      "Resource": [
        "arn:aws:aws-marketplace:us-east-1:123456789012:AWSMarketplace/AmiProduct/example1-abcd-1234-5ef6-7890abcdef12",
        "arn:aws:aws-marketplace:us-east-1:123456789012:AWSMarketplace/ChangeSet/*"
      ],
      "Condition": <span>{</span>
        "StringEquals": <span>{</span>
          "catalog:ChangeType": "UpdateInformation"
        }
      }
    }
  ]
}
</code></pre>
     
        <h2 id="allowing-actions-with-specific-resource-tag-condition-key">Allowing
                actions with specific aws:ResourceTag condition key</h2>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Resource-level permissions and condition context keys for the <code class="code">StartChangeSet</code> action are only supported when used with Catalog API. They are not supported when used with the <a href="http://aws.amazon.com/marketplace/management" rel="noopener noreferrer" target="_blank"><span>AWS Marketplace Management Portal</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></div></div>
        <p>You can allow actions on a group of entities without having to keep updating the
            policy and specifying a possibly growing list of entity ARNs. You can do this with
            resource tagging. Adding tags to resources allows you to control access to those
            resources based on their tags. For example, you might want to allow describing a group
            of seller products without specifying individual ARNs for each seller product.</p>
        <p>For example, the following IAM policy allows the <code class="code">DescribeEntity</code> action
            on any entity resource (<code class="code">"*"</code>) that has a tag key of
                <code class="code">product-team</code> and tag value of <code class="code">team-xyz</code>.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "aws-marketplace:DescribeEntity"
      ],
      "Resource": "*",
      "Condition": <span>{</span>
        "StringEquals": <span>{</span>
          "aws:ResourceTag/product-team": "team-xyz"
        }
      }
    }
  ]
}
</code></pre>
        <p>You can also allow describing and canceling change sets that were created with
            specific tags.</p>
        <p>For example, the following IAM policy allows the <code class="code">DescribeChangeSet</code> and
                <code class="code">CancelChangeSet</code> actions on any change set resource (<code class="code">"*"</code>)
            that has a tag key of <code class="code">product-team</code> and tag value of
            <code class="code">team-xyz</code>.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "aws-marketplace:DescribeChangeSet",
        "aws-marketplace:CancelChangeSet"
      ],
      "Resource": "*",
      "Condition": <span>{</span>
        "StringEquals": <span>{</span>
          "aws:ResourceTag/product-team": "team-xyz"
        }
      }
    }
  ]
}
</code></pre>
        <p>Also, you can allow starting change sets on entities only when those entities have
            specific tags. For example, you can allow changes to seller products with specific
            tags.</p>
        <p>For example, the following IAM policy allows the <code class="code">StartChangeSet</code> action
            on any entity resource (<code class="code">"*"</code>) that has a tag key of
                <code class="code">product-team</code> and tag value of <code class="code">team-xyz</code>. In addition, the
                <code class="code">TagResource</code> action is required so that when the change set is created,
            it’s tagged with the same tag key and value.</p>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>If your policy to allow the <code class="code">StartChangeSet</code> action includes a
                condition to match against specific tags, the same policy must also include the
                    <code class="code">TagResource</code> action. This is because the policy condition must match
                both the tag on the entity and the tag on the newly created change set resulting
                from the change request. Thus, it requires the user or role to also have the
                permission to tag the newly created change set. For an example of starting a change
                set and tagging the change set, see <a href="#example-adding-tags-entity-creation">Example: Adding tags to an
                    entity and change set during creation</a>.</p></div></div>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "aws-marketplace:StartChangeSet",
        "aws-marketplace:TagResource"
      ],
      "Resource": "*",
      "Condition": <span>{</span>
        "StringEquals": <span>{</span>
          "aws:ResourceTag/product-team": "team-xyz"
        }
      }
    }
  ]
}
</code></pre>
     
        <h2 id="managing-tags-on-resources">Managing tags on resources</h2>
        <p>You can add, list, and remove tags from existing entities or change sets.</p>
         
            <h3 id="add-tags-to-resources">Add tags to resources</h3>
            <p>To add tags to an entity or change set, use the <code class="code">TagResource</code> API
                action.</p>
            <p><b>Request</b></p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">POST /TagResource HTTP/1.1
Content-type: application/json

<span>{</span>
  "Catalog": "AWSMarketplace",
  "ResourceArn": "string",
  "Tags": [
    <span>{</span>
      "Key": "string",
      "Value": "string"
    }
    ...
  ]
}
</code></pre>
            <p>Request parameters include:</p>
            <div class="itemizedlist">
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>Catalog (String) – (Required) Must be
                        <code class="code">AWSMarketplace</code>.</p>
                </li><li class="listitem">
                    <p>ResourceArn (String) – (Required) ARN of the change set or entity.
                        A change set describes changes you make with Catalog API. An entity can be a
                            <a href="https://docs.aws.amazon.com/marketplace-catalog/latest/api-reference/seller-products.html">seller product in AWS Marketplace</a> or an <a href="https://docs.aws.amazon.com/marketplace-catalog/latest/api-reference/private-marketplace.html">experience in a private marketplace</a>.</p>
                </li><li class="listitem">
                    <p>Tags (Array of objects) – (Required) A list of objects specifying
                        each tag key and value. Number of objects allowed: 1–50.</p>
                    <div class="itemizedlist">
                         
                         
                    <ul class="itemizedlist"><li class="listitem">
                            <p>Key (String) – (Required) Name of the tag.</p>
                            <div class="itemizedlist">
                                 
                                 
                            <ul class="itemizedlist"><li class="listitem">
                                    <p>Regex pattern –
                                            <code class="code">^([\p<span>{</span>L}\p<span>{</span>Z}\p<span>{</span>N}_.:/=+\-@]*)$</code></p>
                                </li><li class="listitem">
                                    <p>Character length – 1–128</p>
                                </li></ul></div>
                        </li><li class="listitem">
                            <p>Value (String) – (Required) Value of the tag.</p>
                            <div class="itemizedlist">
                                 
                                 
                            <ul class="itemizedlist"><li class="listitem">
                                    <p>Regex pattern –
                                            <code class="code">^([\p<span>{</span>L}\p<span>{</span>Z}\p<span>{</span>N}_.:/=+\-@]*)$</code></p>
                                </li><li class="listitem">
                                    <p>Character length – 0–256</p>
                                </li></ul></div>
                        </li></ul></div>
                </li></ul></div>
            <p><b>Response</b></p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>}</code></pre>
         
         
            <h3 id="remove-tags-from-resources">Remove tags from resources</h3>
            <p>To remove a tag or list of tags from an entity or change set, use the
                    <code class="code">UntagResource</code> API action.</p>
            <p><b>Request</b></p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">POST /UntagResource HTTP/1.1
Content-type: application/json

<span>{</span>
  "Catalog": "AWSMarketplace",
  "ResourceArn": "string",
  "TagKeys": [
    "string"
    ...
  ]
}
</code></pre>
            <p>Request parameters include:</p>
            <div class="itemizedlist">
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>Catalog (String) – (Required) Must be
                        <code class="code">AWSMarketplace</code>.</p>
                </li><li class="listitem">
                    <p>ResourceArn (String) – (Required) ARN of the change set or entity.
                        A change set describes changes you make with Catalog API. An entity can be a
                            <a href="https://docs.aws.amazon.com/marketplace-catalog/latest/api-reference/seller-products.html">seller product in AWS Marketplace</a> or an <a href="https://docs.aws.amazon.com/marketplace-catalog/latest/api-reference/private-marketplace.html">experience in a private marketplace</a>.</p>
                </li><li class="listitem">
                    <p>Tags (Array of objects) – (Required) A list of key names of tags to
                        be removed. Number of strings allowed: 0–256.</p>
                </li></ul></div>
            <p><b>Response</b></p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>}</code></pre>
         
         
            <h3 id="list-all-tags-on-resource">List all tags on a resource</h3>
            <p>To list all tags that have been added to and not yet removed from a change set or
                entity, use the <code class="code">ListTagsForResource</code> API
                action.</p>
            <p><b>Request</b></p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">POST /ListTagsForResource HTTP/1.1
Content-type: application/json

<span>{</span>
  "Catalog": "AWSMarketplace",
  "ResourceArn": "string"
}
</code></pre>
            <p>Request parameters include:</p>
            <div class="itemizedlist">
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>Catalog (String) – (Required) Must be
                        <code class="code">AWSMarketplace</code>.</p>
                </li><li class="listitem">
                    <p>ResourceArn (String) - (Required) ARN of the change set or entity. A
                        change set describes changes you make with Catalog API. An entity can be a
                            <a href="https://docs.aws.amazon.com/marketplace-catalog/latest/api-reference/seller-products.html">seller product in AWS Marketplace</a> or an <a href="https://docs.aws.amazon.com/marketplace-catalog/latest/api-reference/private-marketplace.html">experience in a private marketplace</a>.</p>
                </li></ul></div>
            <p><b>Response</b></p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
  "ResourceArn": "string",
  "Tags": [
    <span>{</span>
      "Key": "string",
      "Value": "string"
    }
    ...
  ]
}
</code></pre>
         
     
        <h2 id="managing-tags-when-requesting-changes-to-resources">Managing tags when
                requesting changes to resources</h2>
        <p>You can add tags when entities or change sets are created.</p>
         
            <h3 id="example-adding-tags-creating-change-set">Example: Adding tags to a
                    change set when creating a change set</h3>
            <p>The following is an example of a <code class="code">StartChangeSet</code> request that updates
                the product metadata for a seller product. This request adds a tag to the change set
                that's created with this request by including the tag in the
                    <code class="code">ChangeSetTags</code> property.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">POST /StartChangeSet HTTP/1.1
Content-type: application/json

<span>{</span>
  "Catalog": "AWSMarketplace",
  "ChangeSet": [ 
    <span>{</span> 
      "ChangeType":"UpdateInformation",
      "Entity": <span>{</span>
        "Identifier":"example1-abcd-1234-5ef6-7890abcdef12",
        "Type":"AmiProduct@1.0"
      },
      "Details": "<span>{</span>\"ProductTitle\":\"My updated title\"}"
    }
  ],
  "ChangeSetTags": [
    <span>{</span>
      "Key": "product-team",
      "Value": "team-xyz"
    }
  ]
}
</code></pre>
            <p>For more information about managing seller products, see <a href="https://docs.aws.amazon.com/marketplace-catalog/latest/api-reference/seller-products.html">Working with
                    seller products</a> in the <em>AWS Marketplace Catalog API
                    Reference</em>.</p>
         
         
            <h3 id="example-adding-tags-entity-creation">Example: Adding tags to an
                    entity and change set during creation</h3>
            <p>The following is an example of a <code class="code">StartChangeSet</code> request that creates
                a private marketplace experience entity. The request adds tags to both the entity
                resource and change set resource created with this request by including the tags in
                the <code class="code">EntityTags</code> and <code class="code">ChangeSetTags</code> properties. With these
                tags, the permission policy of a user or role can be specified to only allow
                describing or canceling the change set this request creates or only allow creating
                further change sets on the entity this request creates. For more information, see
                the <a href="#grant-permission-create-entities-change-sets-tags">Granting permission
                to create entities and change sets only with tags</a>
                section.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">POST /StartChangeSet HTTP/1.1
Content-type: application/json

<span>{</span>
  "Catalog": "AWSMarketplace",
  "ChangeSet": [ 
    <span>{</span> 
      "ChangeType": "CreateExperience",
      "Entity": <span>{</span> 
        "Type": "Experience@1.0"
      },
      "Details": "<span>{</span>\"Name\": \"ExamplePrivateMarketplace\"}",
      "EntityTags": [
        <span>{</span>
          "Key": "product-team",
          "Value": "team-xyz"
        }
      ]
    }
  ],
  "ChangeSetTags": [
    <span>{</span>
      "Key": "product-team",
      "Value": "team-xyz"
    }
  ]
}
</code></pre>
            <p>For more information about managing a private marketplace, see <a href="https://docs.aws.amazon.com/marketplace-catalog/latest/api-reference/private-marketplace.html">Working
                    with a private marketplace</a> in the <em>AWS Marketplace Catalog API
                    Reference</em>.</p>
         
     
        <h2 id="grant-permission-to-mange-tags-on-resources">Granting permission to
                manage tags on resources</h2>
        <p>To allow a user or role to add, remove, and list tags on all entities or change sets,
            they need the following IAM policy.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "aws-marketplace:TagResource",
        "aws-marketplace:UntagResource",
        "aws-marketplace:ListTagsForResource"
      ],
      "Resource": "*"
    }
  ]
}
</code></pre>
     
        <h2 id="grant-permission-to-manage-tags-resources-specific-tags">Granting
                permission to manage tags on resources only when those resources have specific
                tags</h2>
        <p>You can allow a user or role to add, remove, and list tags on entities or change sets
            that have specific tags. The following IAM policy allows those actions on any entity
            resource (<code class="code">"*"</code>) that has a tag key of <code class="code">product-team</code> and tag
            value of <code class="code">team-xyz</code>.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "aws-marketplace:TagResource",
        "aws-marketplace:UntagResource",
        "aws-marketplace:ListTagsForResource"
      ],
      "Resource": "*",
      "Condition": <span>{</span>
        "StringEquals": <span>{</span>
          "aws:ResourceTag/product-team": "team-xyz"
        }
      }
    }
  ]
}
</code></pre>
     
        <h2 id="grant-permission-create-entities-change-sets-tags">Granting permission
                to create entities and change sets only with tags</h2>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Resource-level permissions and condition context keys for the <code class="code">StartChangeSet</code> action are only supported when used with Catalog API. They are not supported when used with the <a href="http://aws.amazon.com/marketplace/management" rel="noopener noreferrer" target="_blank"><span>AWS Marketplace Management Portal</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></div></div>
        <p>You can enforce tagging when entities or change sets are created. Add the following
            policy to allow the <code class="code">StartChangeSet</code> and the <code class="code">TagResource</code>
            actions, with a condition specifying the tag key matches <code class="code">product-team</code> and
            the tag value matches <code class="code">team-xyz</code>. This policy condition must match both the
            tag on the newly created entity and the tag on the newly created change set resulting
            from the creation request. For an example of tagging an entity on creation, see <a href="#example-adding-tags-entity-creation">Example: Adding tags to an
                    entity and change set during creation</a>.</p>
        <p>For existing entities, this policy also enforces tagging change sets when requesting
            changes to those entities. This also requires that the existing entity has this existing
            tag. This is because the policy condition must match both the tag on the existing entity
            and the newly created change set resulting from the change request. For an example of
            adding tags to change requests, see <a href="#example-adding-tags-creating-change-set">Example: Adding tags to a
                    change set when creating a change set</a>.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "aws-marketplace:StartChangeSet",
        "aws-marketplace:TagResource"
      ],
      "Resource": "*",
      "Condition": <span>{</span>
        "StringEquals": <span>{</span>
          "aws:ResourceTag/product-team": "team-xyz"
        }
      }
    }
  ]
}
</code></pre>
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./welcome.html">AWS Marketplace Catalog API</div><div id="next" class="next-link" accesskey="n" href="./api-request-limits.html">Service quotas</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Marketplace&amp;topic_url=https://docs.aws.amazon.com/en_us/marketplace-catalog/latest/api-reference/api-access-control.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Marketplace&amp;topic_url=https://docs.aws.amazon.com/en_us/marketplace-catalog/latest/api-reference/api-access-control.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>