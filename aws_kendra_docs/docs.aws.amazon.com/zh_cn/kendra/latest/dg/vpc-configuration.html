<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>配置Amazon Kendra为使用 VPC - Amazon Kendra</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="vpc-configuration" /><meta name="default_state" content="vpc-configuration" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/zh_cn/kendra/latest/dg/vpc-configuration.html" /><meta name="description" content="Amazon Kendra可以Amazon Virtual Private Cloud连接到您的 to 索引内容存储在私有云中运行的数据源或数据库中。创建数据源连接器或数据库连接器时，您需要为包含您的数据源或数据库的子网提供安全组和子网标识符。 Amazon Kendra使用这些信息创建elastic network interface，用于安全地与您的数据源或数据库通信。" /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Kendra" /><meta name="guide" content="开发人员指南" /><meta name="abstract" content="提供了对 Amazon Kendra 的概念性概述。了解Amazon Kendra功能并开始使用控制台、CLI 和 API 为文档编制索引。" /><meta name="guide-locale" content="zh_cn" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/zh_cn/kendra/latest/dg/vpc-configuration.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/kendra/latest/dg/vpc-configuration.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/kendra/latest/dg/vpc-configuration.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/kendra/latest/dg/vpc-configuration.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/kendra/latest/dg/vpc-configuration.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/kendra/latest/dg/vpc-configuration.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/kendra/latest/dg/vpc-configuration.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/kendra/latest/dg/vpc-configuration.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/kendra/latest/dg/vpc-configuration.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/kendra/latest/dg/vpc-configuration.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/kendra/latest/dg/vpc-configuration.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/kendra/latest/dg/vpc-configuration.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/kendra/latest/dg/vpc-configuration.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/kendra/latest/dg/vpc-configuration.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/kendra/latest/dg/vpc-configuration.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/kendra/latest/dg/vpc-configuration.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/kendra/latest/dg/vpc-configuration.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/kendra/latest/dg/vpc-configuration.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/kendra/latest/dg/vpc-configuration.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/kendra/latest/dg/vpc-configuration.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/kendra/latest/dg/vpc-configuration.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/kendra/latest/dg/vpc-configuration.html" hreflang="x-default" /><meta name="feedback-item" content="Kendra" /><meta name="this_doc_product" content="Amazon Kendra" /><meta name="this_doc_guide" content="开发人员指南" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'kendra'}"></script><meta id="panorama-serviceSubSection" value="开发人员指南" /><meta id="panorama-serviceConsolePage" value="配置Amazon Kendra为使用 VPC" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>配置Amazon Kendra为使用 VPC - Amazon Kendra</title><meta name="pdf" content="kendra-dg.pdf#vpc-configuration" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Kendra&amp;topic_url=http://docs.aws.amazon.com/zh_cn/kendra/latest/dg/vpc-configuration.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/zh_cn/kendra/latest/dg/vpc-configuration.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/zh_cn/kendra/latest/dg/vpc-configuration.html" /><meta name="keywords" content="Kendra,Amazon Kendra,搜索,智能搜索,自然语言,index,question,关键字,数据源,连接器,常见问题" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Kendra",
        "item" : "https://docs.aws.amazon.com/kendra/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "开发人员指南",
        "item" : "https://docs.aws.amazon.com/zh_cn/kendra/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "创建数据源连接器",
        "item" : "https://docs.aws.amazon.com/zh_cn/kendra/latest/dg/data-source.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "配置Amazon Kendra为使用 VPC",
        "item" : "https://docs.aws.amazon.com/zh_cn/kendra/latest/dg/data-source.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="kendra-dg.pdf#vpc-configuration" target="_blank" rel="noopener noreferrer" title="打开 PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">文档</a><a href="/kendra/index.html">Amazon Kendra</a><a href="what-is-kendra.html">开发人员指南</a></div><div id="page-toc-src"><a href="#vpc-example">连接到 VPC 中的数据库</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>本文属于机器翻译版本。若本译文内容与英语原文存在差异，则一律以英文原文为准。</p></awsui-alert><h1 class="topictitle" id="vpc-configuration">配置Amazon Kendra为使用 VPC</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Amazon Kendra可以Amazon Virtual Private Cloud连接到您的 to 索引内容存储在私有云中运行的数据源或数据库中。创建数据源连接器或数据库连接器时，您需要为包含您的数据源或数据库的子网提供安全组和子网标识符。 Amazon Kendra使用这些信息创建elastic network interface，用于安全地与您的数据源或数据库通信。</p><p>如果您的数据源或数据库未在上运行Amazon VPC，则可以使用虚拟专用网络 (VPN) 将数据源或数据库连接到您的Amazon VPC数据源或数据库。创建亚马逊账户时，您将获得默认 VPC。有关设置 VPP 的信息，请参阅<a href="https://docs.aws.amazon.com/vpn/">AWS VPN文档</a>。</p><p></p><p>要使用 VPC，您必须告知Amazon Kendra数据库所属子网的标识符以及访问该子网Amazon Kendra必须使用的所有安全组的标识符。例如，如果您使用 MySQL 数据库的默认端口，则安全组必须Amazon Kendra允许访问运行数据库的主机上的端口 3306。</p><p>仅在数据源或数据库的 VPC 配置中使用私有子网。如果您的 RDS 实例位于 VPC 的公有子网中，则您无法直接使用该子网同步您的数据源或数据库。而是创建一个私有子网，以便对公有子网中的 NAT 网关进行出站访问。为数据源或数据库配置 VPC 时，请指定该私有子网。对于使用 VPC 配置的数据库数据源，子网必须位于以下可用区 ID 之一：</p><div class="itemizedlist">
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>美国西部（俄勒冈州）— us2-az1、us2-az3</p>
            </li><li class="listitem">
                <p>美国东部（弗吉尼亚州北部）、use1-az2、use1-az4</p>
            </li><li class="listitem">
                <p>欧洲（爱尔兰）— eu1-az1、u1-az3</p>
            </li></ul></div><p>子网和安全组的标识符在Amazon VPC控制面板中配置。要查看标识符，请按如下方式打开Amazon VPC控制台：</p><div class="procedure"><h6>查看子网标识符</h6><ol><li><p>登录到AWS Management Console并打开 Amazon VPC 控制台，网址：<a href="https://console.aws.amazon.com/vpc/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/vpc/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>。</p></li><li>
                <p>从导航窗格中，选择 <b>Subnet</b>。</p>
            </li><li>
                <p>从子网列表中，选择包含您的数据库服务器的子网。</p>
            </li><li>
                <p>在描述选项卡中，记下子<b>网 ID</b> 字段中的标识符。</p>
            </li></ol></div><div class="procedure"><h6>查看安全组标识符</h6><ol><li><p>登录到AWS Management Console并打开 Amazon VPC 控制台，网址：<a href="https://console.aws.amazon.com/vpc/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/vpc/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>。</p></li><li>
                <p>从导航窗格中，选择 <b>Security Groups (安全组)</b>。</p>
            </li><li>
                <p>从安全组列表中，选择要为其提供标识符的组。</p>
            </li><li>
                <p>在描述选项卡中，记下群<b>组 ID</b> 字段中的标识符。</p>
            </li></ol></div><p>如果Amazon Kendra必须在两个或多个子网之间路由连接，则可以提供多个子网。例如，如果包含数据库服务器的子网不足 IP 地址，则Amazon Kendra可以连接到具有空闲 IP 地址的子网并将连接路由到第一个子网。如果您列出多个子网，则子网必须能够相互通信。每个子网都必须关联一个路由表，该路由表使用网络地址转换器（NAT）设备提供出站互联网接入。</p><p>您也可以提供多个安全组。安全组的组合效果必须Amazon Kendra允许访问您在连接配置中指定的数据源或数据库服务器。</p>
            <h2 id="vpc-example">连接到 VPC 中的数据库</h2>
            <p>以下示例显示如何连接在 VPC 中运行的 MySQL el 数据库。该示例假设您从默认 VPC 开始，并且需要创建 MySQL 数据库。如果您已经有 VPC，请确保其配置如图所示。如果你有 MySQL 数据库，你可以使用它来代替创建一个新的数据库。</p>
            <div class="highlights" id="inline-topiclist"><h6>主题</h6><ul><li><a href="#vpc-create-vpc">步骤 1：配置 VPC</a></li><li><a href="#vpc-create-database">步骤 2：配置安全性</a></li><li><a href="#vpc-create-database">步骤 3：创建数据库</a></li><li><a href="#vpc-connect">步骤 4：创建数据库数据源连接器</a></li></ul></div>
             
                <h3 id="vpc-create-vpc">步骤 1：配置 VPC</h3>
                <p>配置您的 VPC，以便您拥有一个私有子网和一个安全组，用于Amazon Kendra访问在子网中运行的 MySQL 数据库。VPC 配置中提供的子网必须位于美国西部（俄勒冈州）、美国东部（爱尔兰）、美国东部（爱尔兰）。</p>
                <div class="procedure"><h6>配置 VPC</h6><ol><li><p>登录到AWS Management Console并打开 Amazon VPC 控制台，网址：<a href="https://console.aws.amazon.com/vpc/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/vpc/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>。</p></li><li>
                        <p>在导航窗格中，选择<b>路由表</b>，然后选择<b>创建路由表</b>。</p>
                    </li><li>
                        <p>在 “<b>名称标签</b>” 字段中，输入<code class="userinput">Private
                                subnet route table</code>。在 <b>VPC 字段</b>中，选择您的 VPC，然后选择<b>创建</b>。选择 <b>C</b> lose 返回到路由表的列表。</p>
                    </li><li>
                        <p>从导航窗格中选择 <b>NAT 网关</b>，然后选择<b>创建 NAT 网关</b>。</p>
                    </li><li>
                        <p>在<b>子网</b>字段中，选择作为公有子网的子网并记下子网 ID。</p>
                    </li><li>
                        <p>如果您没有弹性 IP 地址，请选择<b>创建新 EIP</b>，选择<b>创建 NAT 网关</b>，然后选择<b>关闭</b>。</p>
                    </li><li>
                        <p>从导航窗格中，选择 <b>Roots（路由表</b>）。</p>
                    </li><li>
                        <p>从路由表列表中，选择您在步骤 3 中创建的<b>私有子网路由表</b>。在<b>操作</b>中，选择<b>编辑路线</b>。</p>
                    </li><li>
                        <p>选择 <b>Add route</b>（添加路由）。添加目标 0.0.0.0./0，以允许所有出站流量进入互联网。对于<b>目标</b>，选择 <b>NAT 网关</b>，然后选择您在步骤 4 中创建的网关。选择 <b>Save routes (保存路由)</b>，然后选择 <b>Close (关闭)</b>。</p>
                    </li><li>
                        <p>从<b>操作</b>中，选择<b>编辑子网关联。</b></p>
                    </li><li>
                        <p>选择要设为私有子网。不要选择带有您之前提到的 NAT 网关的子网。</p>
                    </li></ol></div>
             
             
                <h3 id="vpc-create-database">步骤 2：配置安全性</h3>
                <p>接下来，为数据库配置安全组。</p>
                <div class="procedure"><h6>创建安全组</h6><ol><li><p>登录到AWS Management Console并打开 Amazon VPC 控制台，网址：<a href="https://console.aws.amazon.com/vpc/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/vpc/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>。</p></li><li>
                        <p>在您的 VPC 的描述中，记下 IPv4 CIDR。</p>
                    </li><li>
                        <p>从导航窗格中，选择 Secur <b>it</b> y Groups，然后选择<b>创建安全组</b>。</p>
                    </li><li>
                        <p>在<b>安全组名称</b>中输入<code class="userinput">DataSourceInboundSecurityGroup</code>。提供描述，然后从列表中选择您的 VPC。选择 “<b>创建</b>”，然后选择 “<b>关闭</b>”。</p>
                    </li><li>
                        <p>选择<b>入站</b>选项卡。</p>
                    </li><li>
                        <p>选择 <b>“编辑规则”</b>，然后选择 “<b>添加规则</b>”</p>
                    </li><li>
                        <p>对于数据库，输入端口<b>范围的端口</b>号。例如，对于 MySQL 来说是<code class="userinput">3306</code>，对于 HTTPS 来说是<code class="userinput">443</code>。对于<b>来源</b>，键入 VPC 的无类别域间路由（CIDR）。选择 “<b>保存规则</b>”，然后选择 “<b>关闭</b>”。</p>
                    </li></ol></div>
                <p>安全组允许 VPC 中的任何人连接到数据库，并允许出站连接到 Internet。</p>
             
             
                <h3 id="vpc-create-database">步骤 3：创建数据库</h3>
                <p>创建一个数据库来保存您的文档，或者您可以使用现有的数据库。有关Amazon Kendra支持<a href="https://docs.aws.amazon.com/kendra/latest/dg/data-source-database.html">的数据库列表，请参阅使用数据库数据源</a>。</p>
                <p>有关如何创建 MySQL 数据库的说明，请参阅<a href="https://docs.aws.amazon.com/kendra/latest/dg/getting-started-mysql.html">使用 MySQL 数据库数据源入门（控制台）Amazon RDS</a>。</p>
             
             
                <h3 id="vpc-connect">步骤 4：创建数据库数据源连接器</h3>
                <p>配置 VPC 并创建数据库后，您可以为数据库创建数据源连接器。请参阅<a href="https://docs.aws.amazon.com/kendra/latest/dg/data-source-database.html">使用数据库数据源</a>。</p>
                <p>确保配置您的 VPC、在 VPC 中创建的私有子网以及在 VPC 中为数据库创建的安全组。</p>
                <p>有关如何为 MySQL 数据库创建数据源的说明，请参阅<a href="https://docs.aws.amazon.com/kendra/latest/dg/getting-started-mysql.html">使用 MySQL 数据库数据源（控制台）入门Amazon RDS</a>。</p>
             
        <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="警告" /> <strong>Javascript 在您的浏览器中被禁用或不可用。</strong></p><p>要使用 Amazon Web Services 文档，必须启用 Javascript。请参阅浏览器的帮助页面以了解相关说明。</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">文档惯例</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./in-adding-languages.html">添加英语以外其他语言的文档</div><div id="next" class="next-link" accesskey="n" href="./delete-index.html">删除索引和数据源</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">此页面对您有帮助吗？- 是</div><div class="content"><p>感谢您对我们工作的肯定！</p><p>如果不耽误您的时间，请告诉我们做得好的地方，让我们做得更好。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="反馈" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Kendra&amp;topic_url=https://docs.aws.amazon.com/zh_cn/kendra/latest/dg/vpc-configuration.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">此页面对您有帮助吗？- 否</div><div class="content"><p>感谢您告诉我们本页内容还需要完善。很抱歉让您失望了。</p><p>如果不耽误您的时间，请告诉我们如何改进文档。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="反馈" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Kendra&amp;topic_url=https://docs.aws.amazon.com/zh_cn/kendra/latest/dg/vpc-configuration.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>