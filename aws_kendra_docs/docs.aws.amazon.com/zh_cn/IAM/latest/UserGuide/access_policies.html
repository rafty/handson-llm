<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>IAM 中的策略和权限。 - AWS Identity and Access Management</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="access_policies" /><meta name="default_state" content="access_policies" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/zh_cn/IAM/latest/UserGuide/access_policies.html" /><meta name="description" content="详细了解 AWS 策略及其工作方式。" /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS Identity and Access Management" /><meta name="guide" content="用户指南" /><meta name="abstract" content="通过用户身份（身份验证）定义特定权限的策略（授权）控制对您的 AWS 资源的访问。" /><meta name="guide-locale" content="zh_cn" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/zh_cn/IAM/latest/UserGuide/access_policies.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/access_policies.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/access_policies.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/access_policies.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/access_policies.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/access_policies.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/access_policies.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/access_policies.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/access_policies.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/access_policies.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/access_policies.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/access_policies.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/access_policies.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/access_policies.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/access_policies.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/access_policies.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/access_policies.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/IAM/latest/UserGuide/access_policies.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/access_policies.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html" hreflang="x-default" /><meta name="feedback-item" content="IAM" /><meta name="this_doc_product" content="AWS Identity and Access Management" /><meta name="this_doc_guide" content="用户指南" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'iam'}"></script><meta id="panorama-serviceSubSection" value="用户指南" /><meta id="panorama-serviceConsolePage" value="IAM 中的策略和权限。" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>IAM 中的策略和权限。 - AWS Identity and Access Management</title><meta name="pdf" content="iam-ug.pdf#access_policies" /><meta name="rss" content="aws-iam-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=76" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=http://docs.aws.amazon.com/zh_cn/IAM/latest/UserGuide/access_policies.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/zh_cn/IAM/latest/UserGuide/access_policies.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/zh_cn/IAM/latest/UserGuide/access_policies.html" /><meta name="keywords" content="IAM,AWS Identity and Access Management,IAM 用户,user,IAM 组,group,IAM 角色,role,权限策略,信任策略,策略,访问密钥,password" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS Identity and Access Management",
        "item" : "https://docs.aws.amazon.com/iam/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "用户指南",
        "item" : "https://docs.aws.amazon.com/zh_cn/IAM/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "适用于 AWS 资源的 Access Management",
        "item" : "https://docs.aws.amazon.com/zh_cn/IAM/latest/UserGuide/access.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "IAM 中的策略和权限。",
        "item" : "https://docs.aws.amazon.com/zh_cn/IAM/latest/UserGuide/access.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="iam-ug.pdf#access_policies" target="_blank" rel="noopener noreferrer" title="打开 PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">文档</a><a href="/iam/index.html">AWS Identity and Access Management</a><a href="introduction.html">用户指南</a></div><div id="page-toc-src"><a href="#access_policy-types">策略类型</a><a href="#access_policies-root">策略和根用户</a><a href="#access_policies-json">JSON 策略概述</a><a href="#grant-least-priv">授予最低权限</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="access_policies">IAM 中的策略和权限。</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>您在 AWS 中通过创建策略并将其附加到 IAM 身份（用户、用户组或角色）或 AWS 资源来管理访问权限。策略是 AWS 中的对象；在与身份或资源相关联时，策略定义它们的权限。在某个 IAM 主体（用户或角色）发出请求时，AWS 将评估这些策略。策略中的权限确定是允许还是拒绝请求。大多数策略作为 JSON 文档存储在 AWS 中。AWS 支持六种类型的策略：基于身份的策略、基于资源的策略、权限边界、Organizations SCP、ACL 和会话策略。</p><p>IAM policy 定义操作的权限，无关乎您使用哪种方法执行操作。例如，如果一个策略允许 <a href="https://docs.aws.amazon.com/IAM/latest/APIReference/API_GetUser.html">GetUser</a> 操作，则具有该策略的用户可以从 AWS Management Console、AWS CLI 或 AWS API 获取用户信息。在创建 IAM 用户时，您可以选择允许控制台或编程访问。如果允许控制台访问，则 IAM 用户可以使用其登录凭证登录到控制台。如果允许编程访问，则用户可以通过访问密钥来使用 CLI 或 API。</p>
    <h2 id="access_policy-types">策略类型</h2>
    <p>以下策略类型按从最常用到不常用的顺序列出，可在 AWS 中使用。有关更多详细信息，请参阅下面有关各种策略类型的各部分。</p>
    <div class="itemizedlist">
       
       
       
       
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p><b><a href="#policies_id-based">基于身份的策略</a></b> – 将<a href="#managedpolicy">托管</a>策略和<a href="#inline">内联</a>策略附加到 IAM 身份（用户、用户所属组或角色）。基于身份的策略向身份授予权限。</p>
      </li><li class="listitem">
        <p><b><a href="#policies_resource-based">基于资源的策略</a></b> - 将内联策略附加到资源。基于资源的策略的最常见示例是 Amazon S3 存储桶策略和 IAM 角色信任策略。基于资源的策略向在策略中指定的主体授予权限。主体可以与资源位于同一个账户中，也可以位于其他账户中。</p>
      </li><li class="listitem">
        <p><b><a href="#policies_bound">权限边界</a></b> - 使用托管策略作为 IAM 实体（用户或角色）的权限边界。该策略定义基于身份的策略可以授予实体的最大权限，但不授予权限。权限边界不定义基于资源的策略可以授予实体的最大权限。</p>
      </li><li class="listitem">
        <p><b><a href="#policies_scp">企业 SCP</a></b> - 使用 AWS Organizations 服务控制策略 (SCP) 为企业或企业单元 (OU) 的账户成员定义最大权限。SCP 限制基于身份的策略或基于资源的策略授予账户中实体（用户或角色）的权限，但不授予权限。</p>
      </li><li class="listitem">
        <p><b><a href="#policies_acl">访问控制列表 (ACL)</a></b> - 使用 ACL 来控制其他账户中的哪些主体可以访问 ACL 附加到的资源。ACL 类似于基于资源的策略，但它们是唯一不使用 JSON 策略文档结构的策略类型。ACL 是跨账户的权限策略，向指定的主体授予权限。ACL 不能向同一账户内的实体授予权限。</p>
      </li><li class="listitem">
        <p><b><a href="#policies_session">会话策略</a></b> - 在您使用 AWS CLI 或 AWS API 担任某个角色或联合身份用户时，传递高级会话策略。会话策略限制角色或用户的基于身份的策略授予会话的权限。会话策略限制所创建会话的权限，但不授予权限。有关更多信息，请参阅<a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html#policies_session">会话策略</a>。</p>
      </li></ul></div>
     
      <h3 id="policies_id-based">基于身份的策略</h3>
      <p>基于身份的策略是 JSON 权限的策略文档，用于控制身份（用户、用户组和角色）可在什么样的条件下对哪些资源执行哪些操作。基于身份的策略可以进一步分类：</p>
      <div class="itemizedlist">
         
         
      <ul class="itemizedlist"><li class="listitem">
          <p><a id="managedpolicy"></a><b>托管策略</b> – 基于身份的独立策略，可附加到您的 AWS 账户 中的多个用户、组和角色。有两种托管策略：</p>
          <div class="itemizedlist">
             
             
          <ul class="itemizedlist"><li class="listitem">
              <p><b>AWS 托管策略</b> - 由 AWS 创建和管理的托管策略。</p>
            </li><li class="listitem">
              <p><b>客户管理型策略</b> – 您在 AWS 账户 中创建和管理的管理型策略。与 AWS 托管策略相比，客户托管策略可以更精确地控制策略。</p>
            </li></ul></div>
        </li><li class="listitem">
          <p><a id="inline"></a><b>内联策略</b> — 直接添加到单个用户、组或角色的策略。内联策略维持策略与身份之间严格的一对一关系。当您删除身份时，它们将会被删除。</p>
        </li></ul></div>
      <p>要了解如何在托管策略或内联策略之间选择，请参阅 <a href="./access_policies-choosing-managed-or-inline.html">在托管策略与内联策略之间进行选择</a>。</p>
     
     
      <h3 id="policies_resource-based">基于资源的策略</h3>
      <p>基于资源的策略是附加到资源（如 Amazon S3 存储桶）的 JSON 策略文档。这些策略授予指定的主体对该资源执行特定操作的权限，并定义这在哪些条件下适用。基于资源的策略是内联策略。没有基于托管资源的策略。</p>
      <p>要启用跨账户存取，您可以将整个账户或其它账户中的 IAM 实体指定为基于资源的策略中的主体。将跨账户主体添加到基于资源的策略只是建立信任关系工作的一半而已。当主体和资源位于单独的 AWS 账户 中时，还必须使用基于身份的策略来授予对资源的主体访问权限。但是，如果基于资源的策略向同一个账户中的主体授予访问权限，则不需要额外的基于身份的策略。有关授予跨服务访问权限的分步说明，请参阅 <a href="./tutorial_cross-account-with-roles.html">IAM 教程：使用 IAM 角色委托跨 AWS 账户的访问权限</a>。</p>
      <p>IAM 服务仅支持一种类型的基于资源的策略（称为角色<em>信任策略</em>），这种策略附加到 IAM 角色。IAM 角色既是身份，又是支持基于资源的策略的资源。因此，您必须将信任策略和基于身份的策略同时附加到 IAM 角色。信任策略定义哪些主体实体（账户、用户、角色和联合身份用户）可以代入该角色。要了解 IAM 角色如何与其他基于资源的策略不同，请参阅 <a href="./id_roles_compare-resource-policies.html">IAM 角色与基于资源的策略有何不同</a>。</p>
      <p>要了解哪些其他服务支持基于资源的策略，请参阅<a href="./reference_aws-services-that-work-with-iam.html">使用 IAM 的AWS服务</a>。要了解基于资源的策略的更多信息，请参阅 <a href="./access_policies_identity-vs-resource.html">基于身份的策略和基于资源的策略</a>。要了解您信任区域之外的账户（受信任的企业或账户）中的主体是否有权承担您的角色，请参阅<a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/what-is-access-analyzer.html">什么是 IAM Access Analyzer？</a>。</p>
     
     
      <h3 id="policies_bound">IAM 权限边界</h3>
      <p>权限边界是一项高级功能，借助该功能，您可以设置基于身份的策略可以授予 IAM 实体的最大权限。当您设置实体的权限边界时，该实体只能执行其基于身份的策略和其权限边界同时允许的操作。指定用户或角色作为主体的基于资源的策略不受权限边界限制。任一项策略中的显式拒绝将覆盖允许。有关权限边界的更多信息，请参阅<a href="./access_policies_boundaries.html">IAM 实体的权限边界</a>。</p>
     
     
      <h3 id="policies_scp">服务控制策略 (SCP)</h3>
      <p>AWS Organizations 是用于分组和集中管理企业拥有的 AWS 账户 的服务。如果在组织内启用了所有功能，则可对任意或全部账户应用服务控制策略 (SCP)。SCP 是指定组织或组织单元 (OU) 的最大权限的 JSON 策略。SCP 限制成员账户中实体（包括每个 AWS 账户根用户）的权限。任一项策略中的显式拒绝将覆盖允许。</p>
      <p>有关 Organization 和 SCP 的更多信息，请参阅 <em>AWS Organizations 用户指南</em>中的 <a href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_about-scps.html">SCP 的工作原理</a>。</p>
     
     
      <h3 id="policies_acl">访问控制列表 (ACL)</h3>
      <p>访问控制列表 (ACL) 是一种服务策略，允许您控制另一个账户中的哪些主体可以访问资源。不能使用 ACL 控制同一账户中的主体的访问权限。ACL 类似于基于资源的策略，但它们是唯一不使用 JSON 策略文档格式的策略类型。Simple Storage Service（Amazon S3）、AWS WAF 和 Amazon VPC 是支持 ACL 的服务示例。要了解有关 ACL 的更多信息，请参阅 <em>Amazon Simple Storage Service 开发人员指南</em>中的<a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/acl-overview.html">访问控制列表 (ACL) 概述</a>。</p>
     
     
      <h3 id="policies_session">会话策略</h3>
      <p>会话策略是当您以编程方式为角色或联合身份用户创建临时会话时作为参数传递的高级策略。会话的权限是用于创建会话的 IAM 实体（用户或角色）的基于身份的策略与会话策略的交集。权限也可以来自基于资源的策略。任一项策略中的显式拒绝将覆盖允许。</p>
      <p>您可以使用 <code class="code">AssumeRole</code>、<code class="code">AssumeRoleWithSAML</code> 或 <code class="code">AssumeRoleWithWebIdentity</code> API 操作以编程方式创建角色会话和传递会话策略。您可以使用 <code class="code">Policy</code> 参数传递单个 JSON 内联会话策略文档。您可以使用 <code class="code">PolicyArns</code> 参数指定最多 10 个托管会话策略。有关创建角色会话的更多信息，请参阅 <a href="./id_credentials_temp_request.html">请求临时安全凭证</a>。</p>
      <p>当您创建联合用户会话时，您使用 IAM 用户的访问密钥以编程方式调用 <code class="code">GetFederationToken</code> API 操作。您还必须传递会话策略。生成的会话的权限是基于身份的策略与会话策略的交集。有关创建联合身份用户的更多信息，请参阅 <a href="./id_credentials_temp_request.html#api_getfederationtoken">GetFederationToken – 通过自定义身份凭证代理程序进行联合身份验证</a>。</p>
      <p>基于资源的策略可以将用户或角色的 ARN 指定为主体。在这种情况下，在创建会话之前，将在角色或用户的基于身份的策略中添加基于资源的策略中的权限。会话策略限制由基于资源的策略和基于身份的策略授予的总权限。生成的会话权限是会话策略与基于资源的策略的交集以及会话策略与基于身份的策略的交集。</p>
      <div class="mediaobject">
         
          <img src="images/EffectivePermissions-session-rbp-id.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;          评估会话策略以及指定实体 ARN 的基于资源的策略&#xA;        " />
         
         
      </div>
      <p>基于资源的策略可以将会话的 ARN 指定为主体。在这种情况下，在创建会话后，将添加基于资源的策略中的权限。基于资源的策略权限不受会话策略限制。生成的会话具有基于资源的策略中的所有权限<em>以及</em> 基于身份的策略与会话策略的交集。</p>
      <div class="mediaobject">
         
          <img src="images/EffectivePermissions-session-rbpsession-id.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;          评估会话策略以及指定会话 ARN 的基于资源的策略&#xA;        " />
         
         
      </div>
      <p>权限边界可以设置用于创建会话的用户或角色的最大权限。在这种情况下，生成的会话的权限是会话策略、权限边界和基于身份的策略的交集。不过，权限边界不会限制指定生成的会话 ARN 基于资源的策略授予权限。</p>
      <div class="mediaobject">
         
          <img src="images/EffectivePermissions-session-boundary-id.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;          评估会话策略以及权限边界&#xA;        " />
         
         
      </div>
     
   
    <h2 id="access_policies-root">策略和根用户</h2>
    <p>AWS 账户根用户 会受到一些策略类型的影响，但不会受其他策略类型的影响。您不能将基于身份的策略附加到根用户，也不能为根用户设置权限边界。不过，您可以在基于资源的策略或 ACL 中将根用户指定为主体。根用户仍然是账户的成员。如果该账户是 AWS Organizations 中的企业成员，则根用户受账户的任何 SCP 的影响。</p>
   
    <h2 id="access_policies-json">JSON 策略概述</h2>
    <p>大多数策略在 AWS 中存储为 JSON 文档。基于身份的策略和用于设置权限边界的策略是您附加到用户或角色的 JSON 策略文档。基于资源的策略是附加到资源的 JSON 策略文档。SCP 是附加到 AWS Organizations 组织单元 (OU) 的使用限制语法的 JSON 策略文档。ACL 也可附加到资源，但必须使用不同的语法。会话策略是您在创建角色或联合身份用户会话时提供的 JSON 策略。</p>
    <p>您无需了解 JSON 语法。您可以使用 AWS Management Console中的可视化编辑器创建和编辑客户托管策略，而无需使用 JSON。不过，如果在组中使用内联策略或复杂的策略，您还必须使用控制台在 JSON 编辑器中创建和编辑这些策略。有关使用可视化编辑器的更多信息，请参阅<a href="./access_policies_create.html">创建 IAM policy</a>和<a href="./access_policies_manage-edit.html">编辑 IAM policy </a>。</p>
    <p> 当您创建或编辑 JSON 策略时，IAM 可以执行策略验证以帮助您创建有效的策略。IAM 可识别 JSON 语法错误，而 IAM Access Analyzer 将提供额外的策略检查和建议，以帮助您进一步优化策略。要了解策略验证的更多信息，请参阅 <a href="./access_policies_policy-validator.html">验证 IAM policy</a>。要了解有关 IAM Access Analyzer 策略检查和可执行建议的更多信息，请参阅 <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access-analyzer-policy-validation.html">IAM Access Analyzer 策略验证</a>。</p>
     
      <h3 id="policies-introduction">JSON 策略文档结构</h3>
       
        <p>如下图所示，JSON 策略文档包含以下元素：</p>
       
      <div class="itemizedlist">
         
         
      <ul class="itemizedlist"><li class="listitem">
          <p>文档顶部的可选策略范围信息</p>
        </li><li class="listitem">
          <p>一个或多个单独语句<em></em></p>
        </li></ul></div>
      <p>每个语句都包含有关单个权限的信息。如果一个策略包含多个语句，则 AWS 会在评估它们时跨这些语句应用逻辑 <code class="code">OR</code>。如果有多个策略应用于请求，则 AWS 会在评估它们时跨所有这些策略应用逻辑 <code class="code">OR</code>。</p>
      <div class="mediaobject">
         
          <img src="images/AccessPolicyLanguage_General_Policy_Structure.diagram.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;          JSON 策略文档结构&#xA;        " />
         
         
      </div>
      <p>语句中的信息均含在一系列的元素内。</p>
      <div class="itemizedlist">
         
         
         
         
         
         
         
         
      <ul class="itemizedlist"><li class="listitem">
          <p><b>Version</b> - 指定要使用的策略语言版本。建议您使用最新的 <code class="code">2012-10-17</code> 版本。有关更多信息，请参阅<a href="./reference_policies_elements_version.html">IAM JSON 策略元素：Version</a>。</p>
        </li><li class="listitem">
          <p><b>Statement</b> - 将该主要策略元素作为以下元素的容器。可以在一个策略中包含多个语句。</p>
        </li><li class="listitem">
          <p><b>Sid</b>（可选） - 包括可选的语句 ID 以区分不同的语句。</p>
        </li><li class="listitem">
          <p><b>Effect</b> - 使用 <code class="code">Allow</code> 或 <code class="code">Deny</code> 指示策略是允许还是拒绝访问。</p>
        </li><li class="listitem">
          <p><b>Principal</b>（仅在某些情况下需要） - 如果创建基于资源的策略，您必须指示要允许或拒绝访问的账户、用户、角色或联合身份用户。如果要创建 IAM 权限策略以附加到用户或角色，则不能包含该元素。主体暗示为该用户或角色。</p>
        </li><li class="listitem">
          <p><b>Action</b> - 包括策略允许或拒绝的操作列表。</p>
        </li><li class="listitem">
          <p><b>Resource</b>（仅在某些情况下需要）- 如果创建 IAM 权限策略，您必须指定操作适用的资源列表。如果创建基于资源的策略，则该元素是可选的。如果不包含该元素，则该操作适用的资源是策略附加到的资源。</p>
        </li><li class="listitem">
          <p><b>Condition</b>（可选） - 指定策略在哪些情况下授予权限。</p>
        </li></ul></div>
      <p>要了解上述及其他更高级的策略元素，请参阅<a href="./reference_policies_elements.html">IAM JSON 策略元素参考</a>。</p>
     
     
      <h3 id="policies-syntax-multiples">多个声明和多个策略</h3>
       
        <p>如果要为实体（用户或角色）定义多个权限，您可以在单个策略中使用多个语句。您也可以附加多个策略。如果您尝试在单个语句中定义多个权限，则策略可能没有授予预期访问权限。建议您按资源类型分解策略。</p>
       
      <p>由于<a href="./reference_iam-quotas.html">策略的大小有限</a>，可能需要对更复杂的权限使用多个策略。在单独的客户托管策略中创建权限的功能分组也是个好主意。例如，为 IAM 用户管理创建一个策略，为自我管理创建一个策略，并为 S3 存储桶管理创建另一个策略。无论多个语句和多个策略如何组合，AWS 都会以相同方式<a href="./reference_policies_evaluation-logic.html">评估</a>您的策略。</p>
      <p>例如，以下策略具有三个语句，其中每个语句在单个账户中定义一组单独的权限。这些语句定义以下权限：</p>
      <div class="itemizedlist">
         
         
         
      <ul class="itemizedlist"><li class="listitem">
          <p><code class="code">Sid</code>（语句 ID）为 <code class="code">FirstStatement</code> 的第一个语句让具有附加策略的用户更改自己的密码。该语句中的 <code class="code">Resource</code> 元素是“<code class="code">*</code>”（这表示“所有资源”）。但实际上，<code class="code">ChangePassword</code> API 操作（或等效的 <code class="code">change-password</code> CLI 命令）仅影响发出请求的用户的密码。</p>
        </li><li class="listitem">
          <p>第二个语句使用户可以列出其 AWS 账户 中的所有 Amazon S3 存储桶。该语句中的 <code class="code">Resource</code> 元素是 <code class="code">"*"</code>（这表示“所有资源”）。但由于策略没有为其他账户中的资源授予访问权限，因此，用户只能列出自己的 AWS 账户 中的存储桶。</p>
        </li><li class="listitem">
          <p>第三个语句允许用户列出和检索名为 <code class="code">confidential-data</code> 的存储桶中的任何对象，但是仅当使用 Multi-Factor Authentication (MFA) 对用户进行了身份验证时才能如此。策略中的 <code class="code">Condition</code> 元素将强制实施 MFA 身份验证。</p>
          <p>如果策略语句包含 <code class="code">Condition</code> 元素，则仅当 <code class="code">Condition</code> 元素计算为 true 时，语句才有效。在此示例中，<code class="code">Condition</code> 在用户进行了 MFA 身份验证时计算为 true。如果用户没有进行 MFA 身份验证，则此 <code class="code">Condition</code> 计算为 false。在这种情况下，此策略中的第三个语句不会应用，因此用户将无法访问 <code class="code">confidential-data</code> 存储桶。</p>
        </li></ul></div>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="复制"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Sid": "FirstStatement",
      "Effect": "Allow",
      "Action": ["iam:ChangePassword"],
      "Resource": "*"
    },
    <span>{</span>
      "Sid": "SecondStatement",
      "Effect": "Allow",
      "Action": "s3:ListAllMyBuckets",
      "Resource": "*"
    },
    <span>{</span>
      "Sid": "ThirdStatement",
      "Effect": "Allow",
      "Action": [
        "s3:List*",
        "s3:Get*"
      ],
      "Resource": [
        "arn:aws:s3:::confidential-data",
        "arn:aws:s3:::confidential-data/*"
      ],
      "Condition": <span>{</span>"Bool": <span>{</span>"aws:MultiFactorAuthPresent": "true"}}
    }
  ]
}</code></pre>
     
     
      <h3 id="policies-syntax-examples">JSON 策略语法示例</h3>
      <p>以下基于身份的策略允许暗示的主体列出名为 <code class="code">example_bucket</code> 的单个 Amazon S3 存储桶：</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="复制"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": <span>{</span>
    "Effect": "Allow",
    "Action": "s3:ListBucket",
    "Resource": "arn:aws:s3:::example_bucket"
  }
}</code></pre>
      <p>以下基于资源的策略可附加到 Amazon S3 存储桶。此策略允许特定 AWS 账户 的成员在名为 <code class="code">mybucket</code> 的存储桶中执行任何 Amazon S3 操作。它允许可对存储桶或其中的对象执行的任何操作。(因为该策略仅向该账户授予信任，所以仍必须向该账户中的各个用户授予执行指定 Amazon S3 操作的权限。) </p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="复制"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [<span>{</span>
    "Sid": "1",
    "Effect": "Allow",
    "Principal": <span>{</span>"AWS": ["arn:aws:iam::<code class="replaceable">account-id</code>:root"]},
    "Action": "s3:*",
    "Resource": [
      "arn:aws:s3:::mybucket",
      "arn:aws:s3:::mybucket/*"
    ]
  }]
}</code></pre>
      <p>要查看常见方案的示例策略，请参阅<a href="./access_policies_examples.html">IAM 基于身份的策略示例</a>。</p>
     
   
    <h2 id="grant-least-priv">授予最低权限</h2>
    <p>创建 IAM policy 时，请遵循授予<em>最小权限</em>这一标准安全建议，或仅授予执行任务所需的权限。确定用户和角色需要执行的操作，然后制订允许他们<em>仅</em>执行这些任务的策略。</p>
    <p>最开始只授予最低权限，然后根据需要授予其它权限。这样做比起一开始就授予过于宽松的权限而后再尝试收紧权限来说更为安全。</p>
    <p>作为最低权限的替代方案，您可以使用 <a href="./access_policies_managed-vs-inline.html#aws-managed-policies">AWS 托管策略</a> 或带通配符 <code class="code">*</code> 权限的策略开始使用策略。考虑授予您的主体超出其完成工作所需的更多权限所带来的安全风险。监控这些主体以了解他们正在使用哪些权限。然后写入最低权限策略。</p>
    <p>IAM 提供了多个选项来帮助您优化授予的权限。</p>
    <div class="itemizedlist">
         
         
         
         
         
    <ul class="itemizedlist"><li class="listitem">
            <p><b>了解访问级别分组</b> - 您可以使用访问级别分组来了解策略授予的访问级别。<a href="./reference_policies_elements_action.html">策略操作</a>被归类为 <code class="code">List</code>、<code class="code">Read</code>、<code class="code">Write</code>、<code class="code">Permissions
                    management</code> 或 <code class="code">Tagging</code>。例如，您可以从 <code class="code">List</code> 和 <code class="code">Read</code> 访问级别中选择操作，以向您的用户授予只读访问权限。要了解如何使用策略摘要来了解访问级别权限，请参阅 <a href="./access_policies_understand-policy-summary-access-level-summaries.html">了解策略摘要内的访问级别摘要</a>。</p>
        </li><li class="listitem">
            <p><b>验证您的策略</b> — 您可以在创建和编辑 JSON 策略时使用 IAM Access Analyzer 执行策略验证。我们建议您查看和验证所有现有策略。IAM Access Analyzer 提供 100 多项策略检查来验证您的策略。当您策略中的语句允许我们认为过于宽容的访问时，它会生成安全警告。在授予最小权限时，您可以使用通过安全警告提供的可操作建议。要了解有关 IAM Access Analyzer 提供的策略检查的更多信息，请参阅 <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access-analyzer-policy-validation.html">IAM Access Analyzer 策略验证</a>。</p>
        </li><li class="listitem">
            <p><b>基于访问活动生成策略</b> — 为了帮助您优化授予的权限，您可以根据 IAM 实体（用户或角色）的访问活动生成 IAM policy。IAM 访问分析器会查看您的 AWS CloudTrail 日志并生成一个策略模板，其中包含实体在指定时间框架内使用的权限。您可以使用模板创建具有精细权限的托管策略，然后将其附加到 IAM 实体。这样，您仅需授予用户或角色与特定使用案例中的 AWS 资源进行交互所需的权限。要了解更多信息，请参阅 <a href="./access_policies_generate-policy.html">基于访问活动生成策略</a>。</p>
        </li><li class="listitem">
            <p><b>使用上次访问的信息</b> — 另一项可帮助提供最低权限的功能是<em>上次访问的信息</em>。可以在 IAM 控制台详细信息页面上的<b>访问顾问</b>选项卡中查看此信息，以了解 IAM 用户、组、角色或策略。上次访问的信息还包括有关上次访问某些服务（如 Amazon EC2、IAM、Lambda 和 Amazon S3）的操作的信息。如果您使用 AWS Organizations 管理账户凭证登录，则可以在 IAM 控制台的 <b>AWS Organizations</b> 部分查看上次访问的服务信息。也可以使用 AWS CLI 或 AWS API 为 IAM 或 Organizations 中的实体或策略检索上次访问的信息报告。您可以使用该信息确定不需要的权限，以便优化 IAM 或 Organizations 策略以更好地遵循最小权限原则。有关更多信息，请参阅<a href="./access_policies_access-advisor.html">使用上次访问的信息优化 AWS 中的权限</a>。</p>
        </li><li class="listitem">
            <p><b>查看 AWS CloudTrail 中的账户事件</b> — 要进一步减少权限，您可以在 AWS CloudTrail <b>Event history</b>（事件历史记录）中查看您的账户事件。CloudTrail 事件日志包含详细的事件信息，您可以用来减少策略的权限。这些日志仅包含 IAM 实体所需的操作和资源。有关更多信息，请参阅 <em>AWS CloudTrail 用户指南</em>中的<a href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/view-cloudtrail-events-console.html">在 CloudTrail 控制台中查看 CloudTrail 事件</a>。</p>
        </li></ul></div>
    <p></p>
    <p>有关更多信息，请参阅以下单个服务的策略主题，其中提供了如何针对特定产品的资源编写策略的示例。</p>
    <div class="itemizedlist">
         
         
         
    <ul class="itemizedlist"><li class="listitem">
            <p><em>Amazon DynamoDB 开发人员指南</em>中的 <a href="https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/UsingIAMWithDDB.html">Amazon DynamoDB 的身份验证和访问控制</a></p>
        </li><li class="listitem">
            <p><em>Amazon Simple Storage Service 用户指南</em>中的<a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/using-iam-policies.html">使用存储桶策略和用户策略</a></p>
        </li><li class="listitem">
            <p><em>Amazon Simple Storage Service 用户指南</em>中的<a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/acl-overview.html">访问控制列表 (ACL) 概述</a>。</p>
        </li></ul></div>
<awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="警告" /> <strong>Javascript 在您的浏览器中被禁用或不可用。</strong></p><p>要使用 Amazon Web Services 文档，必须启用 Javascript。请参阅浏览器的帮助页面以了解相关说明。</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">文档惯例</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./access.html">访问管理</div><div id="next" class="next-link" accesskey="n" href="./access_policies_managed-vs-inline.html">托管策略与内联策略</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">此页面对您有帮助吗？- 是</div><div class="content"><p>感谢您对我们工作的肯定！</p><p>如果不耽误您的时间，请告诉我们做得好的地方，让我们做得更好。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="反馈" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/zh_cn/IAM/latest/UserGuide/access_policies.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">此页面对您有帮助吗？- 否</div><div class="content"><p>感谢您告诉我们本页内容还需要完善。很抱歉让您失望了。</p><p>如果不耽误您的时间，请告诉我们如何改进文档。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="反馈" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/zh_cn/IAM/latest/UserGuide/access_policies.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>