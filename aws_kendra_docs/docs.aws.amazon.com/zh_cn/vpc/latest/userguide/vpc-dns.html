<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="zh-CN"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>VPC 中的 DNS 属性 - Amazon Virtual Private Cloud</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="vpc-dns" /><meta name="default_state" content="vpc-dns" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/zh_cn/vpc/latest/userguide/vpc-dns.html" /><meta name="description" content="控制您的 VPC 是否支持 DNS。" /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Virtual Private Cloud" /><meta name="guide" content="用户指南" /><meta name="abstract" content="使用 Amazon VPC 在属于 AWS 云中逻辑隔离部分的虚拟网络中启动 AWS 资源。" /><meta name="guide-locale" content="zh_cn" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/zh_cn/vpc/latest/userguide/vpc-dns.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/vpc/latest/userguide/vpc-dns.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/vpc/latest/userguide/vpc-dns.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/vpc/latest/userguide/vpc-dns.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/vpc/latest/userguide/vpc-dns.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/vpc/latest/userguide/vpc-dns.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/vpc/latest/userguide/vpc-dns.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/vpc/latest/userguide/vpc-dns.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/vpc/latest/userguide/vpc-dns.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/vpc/latest/userguide/vpc-dns.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/vpc/latest/userguide/vpc-dns.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/vpc/latest/userguide/vpc-dns.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/vpc/latest/userguide/vpc-dns.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/vpc/latest/userguide/vpc-dns.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/vpc/latest/userguide/vpc-dns.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/vpc/latest/userguide/vpc-dns.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/vpc/latest/userguide/vpc-dns.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/vpc/latest/userguide/vpc-dns.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/vpc/latest/userguide/vpc-dns.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/vpc/latest/userguide/vpc-dns.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/vpc/latest/userguide/vpc-dns.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/vpc/latest/userguide/vpc-dns.html" hreflang="x-default" /><meta name="feedback-item" content="VPC" /><meta name="this_doc_product" content="Amazon Virtual Private Cloud" /><meta name="this_doc_guide" content="用户指南" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'vpc'}"></script><meta id="panorama-serviceSubSection" value="用户指南" /><meta id="panorama-serviceConsolePage" value="VPC 中的 DNS 属性" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>VPC 中的 DNS 属性 - Amazon Virtual Private Cloud</title><meta name="pdf" content="vpc-ug.pdf#vpc-dns" /><meta name="rss" content="amazon-vpc-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=58" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=VPC&amp;topic_url=http://docs.aws.amazon.com/zh_cn/vpc/latest/userguide/vpc-dns.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/zh_cn/vpc/latest/userguide/vpc-dns.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/zh_cn/vpc/latest/userguide/vpc-dns.html" /><meta name="keywords" content="VPC,Amazon VPC,network,路由表,互联网网关,子网,NAT" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon VPC",
        "item" : "https://docs.aws.amazon.com/vpc/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "用户指南",
        "item" : "https://docs.aws.amazon.com/zh_cn/vpc/latest/userguide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Virtual Private Cloud (VPC)",
        "item" : "https://docs.aws.amazon.com/zh_cn/vpc/latest/userguide/configure-your-vpc.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "VPC 中的 DNS 属性",
        "item" : "https://docs.aws.amazon.com/zh_cn/vpc/latest/userguide/configure-your-vpc.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="vpc-ug.pdf#vpc-dns" target="_blank" rel="noopener noreferrer" title="打开 PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">文档</a><a href="/vpc/index.html">Amazon VPC</a><a href="what-is-amazon-vpc.html">用户指南</a></div><div id="page-toc-src"><a href="#AmazonDNS">Amazon DNS 服务器</a><a href="#vpc-dns-hostnames">DNS 主机名</a><a href="#vpc-dns-support">VPC 中的 DNS 属性</a><a href="#vpc-dns-limits">DNS 配额</a><a href="#vpc-dns-viewing">查看您的 EC2 实例的 DNS 主机名称</a><a href="#vpc-dns-updating">查看和更新 VPC 的 DNS 属性</a><a href="#vpc-private-hosted-zones">私有托管区域</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="vpc-dns">VPC 中的 DNS 属性</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>域名系统 (DNS) 是 Internet 中名称使用的标准，以将名称解析到各自相应的 IP 地址。DNS 主机名是可以唯一并绝对区分计算机的名称；它由主机名和域名组成。DNS 服务器会将 DNS 主机名称解析到其相应的 IP 地址。</p><p>公有 IPv4 地址可实现 Internet 间的通信，而私有 IPv4 地址可实现实例网络内的通信。有关更多信息，请参阅<a href="./vpc-ip-addressing.html">为 VPC 和子网分配 IP 地址</a>。</p><p>Amazon 为您的 VPC 提供 DNS 服务器（<a href="#AmazonDNS">Amazon Route 53 Resolver</a>）。要使用您自己的 DNS 服务器，请为您的 VPC 创建一组新的 DHCP 选项。有关更多信息，请参阅<a href="./VPC_DHCP_Options.html">Amazon VPC 中的 DHCP 选项集</a>。</p><div class="highlights" id="inline-topiclist"><h6>目录</h6><ul><li><a href="#AmazonDNS">Amazon DNS 服务器</a></li><li><a href="#vpc-dns-hostnames">DNS 主机名</a></li><li><a href="#vpc-dns-support">VPC 中的 DNS 属性</a></li><li><a href="#vpc-dns-limits">DNS 配额</a></li><li><a href="#vpc-dns-viewing">查看您的 EC2 实例的 DNS 主机名称</a></li><li><a href="#vpc-dns-updating">查看和更新 VPC 的 DNS 属性</a></li><li><a href="#vpc-private-hosted-zones">私有托管区域</a></li></ul></div>
    <h2 id="AmazonDNS">Amazon DNS 服务器</h2>
    <p>Route 53 Resolver（也称“Amazon DNS 服务器”或“AmazonProvidedDNS”）是一种 DNS 解析程序服务，内置于 AWS 区域内的每个可用区中。Route 53 Resolver 位于 <code class="code">169.254.169.253</code>（IPv4）、<code class="code">fd00:ec2::253</code>（IPv6）以及预置到“VPC+2”的主要私有 IPV4 CIDR 范围。例如，如果您 VPC 的 IPv4 CIDR 为 <code class="code">10.0.0.0/16</code>、IPv6 CIDR 为 <code class="code">fd00:ec2::253</code>，则可通过 <code class="code">169.254.169.253</code>（IPv4）、<code class="code">fd00:ec2::253</code>（IPv6）或 <code class="code">10.0.0.2</code>（IPv4）访问 Route 53 Resolver。</p>
    <p>当您将实例启动到 VPC 中时，我们会为该实例提供一个私有 DNS 主机名。如果该实例配置了一个公有 IPv4 地址并且启用了 VPC DNS 属性，我们还会提供一个公有 DNS 主机名。</p>
    <p>私有 DNS 主机名的格式取决于您在启动 EC2 实例时如何配置它。有关私有 DNS 主机名类型的更多信息，请参阅 <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-instance-naming.html">EC2 实例命名</a>。</p>
    <p>您的 VPC 中的 Amazon DNS 服务器用于解析您在 Route 53 中的私有托管区域中指定的 DNS 域名。有关私有托管区域的更多信息，请参阅 <em>Amazon Route 53 开发人员指南</em> 中的<a href="https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/hosted-zones-private.html">使用私有托管区域</a>。</p>
    
     
      <h3 id="amazon-dns-rules">规则和注意事项</h3>
      <p>使用 Amazon DNS 服务器时，适用以下规则和注意事项。</p>
      <div class="itemizedlist">
         
         
         
         
      <ul class="itemizedlist"><li class="listitem">
          <p>您无法使用网络 ACL 或安全组筛选进出 Amazon DNS 服务器的流量。</p>
        </li><li class="listitem">
          <p>使用 Hadoop 框架的服务（如 Amazon EMR）要求实例解析自己的完全限定域名 (FQDN)。这种情况下，如果 <code class="code">domain-name-servers</code> 选项设置为自定义值，则 DNS 解析可能会失败。要确保正确解析 DNS，请考虑在您的 DNS 服务器添加条件转发服务器，将针对域 <code class="code"><code class="replaceable">region-name</code>.compute.internal</code> 的查询转发到 Amazon DNS 服务器。有关更多信息，请参阅 <em>Amazon EMR 管理指南</em>中的<a href="https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-vpc-host-job-flows.html">设置 VPC 以托管集群</a>。</p>
        </li><li class="listitem">
          <p>Windows Server 2008 禁止使用位于链路本地地址范围（169.254.0.0/16）内的 DNS 服务器。</p>
        </li><li class="listitem">
          <p>Amazon Route 53 Resolver 只支持递归 DNS 查询。</p>
        </li></ul></div>
     
   
    <h2 id="vpc-dns-hostnames">DNS 主机名</h2>
    <p>当您启动实例时，实例始终会收到一个私有 IPv4 地址和一个与其私有 IPv4 地址对应的私有 DNS 主机名。如果您的实例具有公有 IPv4 地址，则该实例 VPC 的 DNS 属性决定实例是否接收与公有 IPv4 地址对应的公有 DNS 主机名。有关更多信息，请参阅<a href="#vpc-dns-support">VPC 中的 DNS 属性</a>。</p>
    <p>启用 Amazon 提供的 DNS 服务器后，DNS 主机名按如下方式分配和解析。</p>
       
        <h6>私有 IP DNS 名称（仅 IPv4）</h6>   
        <p>您可以使用私有 DNS 名称（仅限 IPv4）主机名在同一 VPC 中的实例之间进行通信。您可以解析其他 VPC 中其他实例的私有 IP DNS 名称（仅限 IPv4）主机名，只要这些实例位于同一 AWS 区域，并且其他实例的主机名位于 <a href="https://datatracker.ietf.org/doc/html/rfc1918" rel="noopener noreferrer" target="_blank"><span>RFC 1918</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>: <code class="code">10.0.0.0 - 10.255.255.255 (10/8 prefix)</code>、<code class="code">172.16.0.0 - 172.31.255.255 (172.16/12 prefix)</code> 和 <code class="code">192.168.0.0 - 192.168.255.255 (192.168/16 prefix)</code> 定义的私有地址空间范围内。</p>
     
     
      <h6>私有资源 DNS 名称</h6>
      <p>基于 RBN 的 DNS 名称，它可以解析为此实例选择的 A 和 AAAA DNS 记录。此 DNS 主机名在双堆栈和仅 IPv6 子网中的实例的实例详细信息中可见。有关 RBN 的更多信息，请参阅 <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-instance-naming.html">EC2 实例主机名类型</a>。</p>
     
       
        <h6>公有 IPv4 DNS</h6>
          <p>对于 <code class="code">us-east-1</code> 区域，公有（外部）IPv4 DNS 主机名采用 <code class="code">ec2-<code class="replaceable">public-ipv4-address</code>.compute-1.amazonaws.com</code> 形式，对于其他区域，则采用 <code class="code">ec2-<code class="replaceable">public-ipv4-address</code>.<code class="replaceable">region</code>.compute.amazonaws.com</code> 形式。Amazon DNS 服务器将公有 DNS 主机名解析为该实例在所在网络外的公有 IPv4 地址及其在所在网络内的私有 IPv4 地址。有关更多信息，请参阅<em>适用于 Linux 实例的 Amazon EC2 用户指南</em> 中的<a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-instance-addressing.html#concepts-public-addresses">公有 IPv4 地址和外部 DNS 主机名</a>。</p>
       
   
    <h2 id="vpc-dns-support">VPC 中的 DNS 属性</h2>
    
    <p>以下 VPC 属性决定了为您的 VPC 提供的 DNS 支持。如果两项属性均启用，则如果在创建时为启动到 VPC 内的实例分配了公有 IPv4 地址或弹性 IP 地址，则该实例会接收公有 DNS 主机名。如果您为之前未启用两项属性的 VPC 启用这两项属性，则已经启动至该 VPC 的实例将接收公有 DNS 主机名（如果它们具有公有 IPv4 地址或弹性 IP 地址）。</p>
     <p>要检查是否为 VPC 启用了这些属性，请参阅<a href="#vpc-dns-updating">查看和更新 VPC 的 DNS 属性</a>。</p>
      <div class="table-container"><div class="table-contents"><table id="w282aac13c19c15b7"><thead>
            <tr>
              <th>属性</th>
              <th>描述</th>
            </tr>
          </thead>
            <tr>
              <td><code class="code">enableDnsHostnames</code></td>
              <td>
                <p>确定 VPC 是否支持将公有 DNS 主机名分配给具有公有 IP 地址的实例。</p>
                <p>除非 VPC 是默认 VPC，否则此属性的默认值为 <code class="code">false</code>。</p>
                
              </td>
            </tr>
            <tr>
              <td><code class="code">enableDnsSupport</code></td>
              <td>
                <p>确定 VPC 是否支持通过 Amazon 提供的 DNS 服务器进行 DNS 解析。</p>
                <p>如果此属性是 <code class="code">true</code>，对 Amazon 提供的 DNS 服务器的查询成功。有关更多信息，请参阅<a href="#AmazonDNS">Amazon DNS 服务器</a>。</p>
                <p>此属性的默认值为 <code class="code">true</code>。</p>
              </td>
            </tr>
          </table></div></div>
    
    <div class="itemizedlist">
          <h6>规则和注意事项</h6>
           
             
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>如果两个属性都设置为 <code class="code">true</code>，则会发生以下情况：</p>
                <div class="itemizedlist">
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>具有公有 IP 地址的实例会收到对应的公有 DNS 主机名。</p>
                    </li><li class="listitem">
                        <p>Amazon Route 53 Resolver 服务器可以解析 Amazon 提供的私有 DNS 主机名。</p>
                    </li></ul></div>
            </li><li class="listitem">
                <p>如果至少将某个属性设置为 <code class="code">false</code>，将出现以下情况：</p>
                <div class="itemizedlist">
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>具有公有 IP 地址的实例不会收到对应的公有 DNS 主机名。</p>
                    </li><li class="listitem">
                        <p>Amazon Route 53 Resolver 无法解析 Amazon 提供的私有 DNS 主机名。</p>
                    </li><li class="listitem">
                        <p>如果 <a href="./VPC_DHCP_Options.html">DHCP 选项集</a>中存在自定义域名，则实例会收到自定义私有 DNS 主机名。如果您未使用 Amazon Route 53 Resolver 服务器，您的自定义域名服务器必须正确解析主机名。</p>
                    </li></ul></div>
            </li><li class="listitem">
                <p>如果您使用在 Amazon Route 53 中的私有托管区域中定义的自定义 DNS 域名，或者使用具有接口 VPC 终端节点的私有 DNS (AWS PrivateLink)，则必须将 <code class="code">enableDnsHostnames</code> 和 <code class="code">enableDnsSupport</code> 属性设置为 <code class="code">true</code>。</p>
            </li><li class="listitem">
                <p>Amazon Route 53 Resolver 可以将私有 DNS 主机名解析为全部地址空间内的私有 IPv4 地址，包括您的 VPC 的 IPv4 地址范围不在 <a href="https://tools.ietf.org/html/rfc1918" rel="noopener noreferrer" target="_blank"><span>RFC 1918</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> 指定的私有 IPv4 地址范围内的情况。但是，如果您在 2016 年 10 月之前创建了 VPC，并且您的 VPC 的 IPv4 地址范围不在这些地址范围内，则 Amazon Route 53 Resolver将无法解析私有 DNS 主机名。要支持这种情况，请联系 <a href="http://aws.amazon.com/contact-us/" rel="noopener noreferrer" target="_blank"><span>AWS Support</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>。</p>
            </li><li class="listitem">
              <p>如果您使用 VPC 对等，则必须为两个 VPC 都启用这两个属性，并且必须为对等连接启用 DNS 解析。有关更多信息，请参阅<a href="https://docs.aws.amazon.com/vpc/latest/peering/modify-peering-connections.html#vpc-peering-dns">实现对 VPC 对等连接的 DNS 解析</a>。</p>
            </li></ul></div>
   
        <h2 id="vpc-dns-limits">DNS 配额</h2>
         <p>每个 EC2 实例可以每秒为每个网络接口向 Route 53 Resolver（具体指 .2 地址，例如，10.0.0.2 和 169.254.169.253）发送 1024 个数据包。无法提高此配额。由 Route 53 Resolver 支持的每秒 DNS 查询数量因查询类型、响应大小和所用协议而异。有关可扩展 DNS 架构的更多信息和建议，请参阅<a href="https://d1.awsstatic.com/whitepapers/aws-hybrid-dns-with-active-directory.pdf" rel="noopener noreferrer" target="_blank"><span>具有 Active Directory 的 AWS 混合 DNS</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> 技术指南。</p> 
    <p>如果您达到配额，Route 53 Resolver 将拒绝流量。达到配额的部分原因可能是 DNS 限制问题，或者是使用 Route 53 Resolver 网络接口的实例元数据查询。有关如何解决 VPC DNS 限制问题的信息，请参阅<a href="http://aws.amazon.com/premiumsupport/knowledge-center/vpc-find-cause-of-failed-dns-queries/" rel="noopener noreferrer" target="_blank"><span>如何确定对 Amazon 提供的 DNS 服务器的 DNS 查询是否由于 VPC DNS 限制而失败</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>。有关实例元数据检索的更多信息，请参阅《适用于 Linux 实例的 Amazon EC2 用户指南》<em></em>中的<a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/instancedata-data-retrieval.html">检索实例元数据</a>。</p>
   
    <h2 id="vpc-dns-viewing">查看您的 EC2 实例的 DNS 主机名称</h2>
    
    <p>您可以使用 Amazon EC2 控制台或命令行查看运行实例或网络接口的 DNS 主机名。</p>
    <p>为与实例关联的 VPC 启用了 DNS 选项时，<b>公有 DNS (IPv4)</b> 和<b>私有 DNS 字段</b>可用。有关更多信息，请参阅<a href="#vpc-dns-support">VPC 中的 DNS 属性</a>。</p>

     
      <h3 id="instance-dns">实例</h3>
      
      <div class="procedure"><h6>使用控制台查看实例的 DNS 主机名称</h6><ol><li><p>通过以下网址打开 Amazon EC2 控制台：<a href="https://console.aws.amazon.com/ec2/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/ec2/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>。</p></li><li><p>在导航窗格中，选择<b>实例</b>。</p></li><li><p>从列表中选择您的 实例。</p></li><li>
          <p>在详细信息窗格中，<b>Public DNS (IPv4)</b> 和 <b>Private DNS</b> 字段显示 DNS 主机名 (如适用)。</p>
        </li></ol></div>
      
      <div class="itemizedlist">
        <h6>使用命令行查看实例的 DNS 主机名</h6>
        <p>您可以使用以下任一命令。有关这些命令行界面的更多信息，请参阅 <a href="./what-is-amazon-vpc.html#VPCInterfaces">使用 Amazon VPC</a>。</p>
         
         
      <ul class="itemizedlist"><li class="listitem"><p><a href="https://docs.aws.amazon.com/cli/latest/reference/ec2/describe-instances.html">describe-instances</a> (AWS CLI)</p></li><li class="listitem"><p><a href="https://docs.aws.amazon.com/powershell/latest/reference/items/Get-EC2Instance.html">Get-EC2Instance</a>AWS Tools for Windows PowerShell</p></li></ul></div>
     
    
     
      <h3 id="eni-dns">网络接口</h3>
      
      <div class="procedure"><h6>使用控制台查看网络接口的私有 DNS 主机名</h6><ol><li><p>通过以下网址打开 Amazon EC2 控制台：<a href="https://console.aws.amazon.com/ec2/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/ec2/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>。</p></li><li><p>在导航窗格中，选择 <b>Network Interfaces</b>。</p></li><li><p>从列表中选择网络接口。</p></li><li>
          <p>在详细信息窗格中，<b>私有 DNS (IPv4)</b> 字段显示私有 DNS 主机名。</p>
        </li></ol></div>
      
      <div class="itemizedlist">
        <h6>使用命令行查看网络接口的 DNS 主机名</h6>
        <p>您可以使用以下任一命令。有关这些命令行界面的更多信息，请参阅 <a href="./what-is-amazon-vpc.html#VPCInterfaces">使用 Amazon VPC</a>。</p>
         
         
      <ul class="itemizedlist"><li class="listitem"><p><a href="https://docs.aws.amazon.com/cli/latest/reference/ec2/describe-network-interfaces.html">describe-network-interfaces</a> (AWS CLI)</p></li><li class="listitem"><p><a href="https://docs.aws.amazon.com/powershell/latest/reference/items/Get-EC2NetworkInterface.html">Get-EC2NetworkInterface</a> (AWS Tools for Windows PowerShell)</p></li></ul></div>
     
            
   
    <h2 id="vpc-dns-updating">查看和更新 VPC 的 DNS 属性</h2>
    
    <p>您可以通过 Amazon VPC 控制台查看并更新您的 VPC 中的 DNS 支持属性。</p>
    
    <div class="procedure"><h6>使用控制台描述和更新 VPC 的 DNS 支持</h6><ol><li><p>通过以下网址打开 Amazon VPC 控制台：<a href="https://console.aws.amazon.com/vpc/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/vpc/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>。</p></li><li><p>在导航窗格中，选择 <b>Your VPCs</b>（您的 VPC）。</p></li><li><p>选中该 VPC 的复选框。</p></li><li>
        <p>查看 <b>Details (详细信息)</b> 中的信息。在此示例中，已同时启用 <b>DNS hostnames (DNS 主机名)</b> 和 <b>DNS resolution (DNS 解析)</b>。</p>
          <div class="mediaobject">
             
              <img src="images/dns-settings.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;              “DNS Settings (DNS 设置)”选项卡&#xA;            " />
             
             
          </div>
      </li><li>
    		<p>要更新这些设置，请选择 <b>Actions</b>（操作），然后选择 <b>Edit VPC settings</b>（编辑 VPC 设置）。在相应的 DNS 属性上选择或清除 <b>Enable</b>（启用），然后选择 <b>Save changes</b>（保存更改）。</p>
    	</li></ol></div>

    <div class="itemizedlist">
      <h6>使用命令行说明 VPC 的 DNS 支持</h6>
      <p>您可以使用以下任一命令。有关这些命令行界面的更多信息，请参阅 <a href="./what-is-amazon-vpc.html#VPCInterfaces">使用 Amazon VPC</a>。</p>
       
       
    <ul class="itemizedlist"><li class="listitem"><p><a href="https://docs.aws.amazon.com/cli/latest/reference/ec2/describe-vpc-attribute.html">describe-vpc-attribute</a> (AWS CLI)</p></li><li class="listitem"><p><a href="https://docs.aws.amazon.com/powershell/latest/reference/items/Get-EC2VpcAttribute.html">Get-EC2VpcAttribute</a> (AWS Tools for Windows PowerShell)</p></li></ul></div>
    
    <div class="itemizedlist">
      <h6>使用命令行更新 VPC 的 DNS 支持</h6>
      <p>您可以使用以下任一命令。有关这些命令行界面的更多信息，请参阅 <a href="./what-is-amazon-vpc.html#VPCInterfaces">使用 Amazon VPC</a>。</p>
       
       
    <ul class="itemizedlist"><li class="listitem"><p><a href="https://docs.aws.amazon.com/cli/latest/reference/ec2/modify-vpc-attribute.html">modify-vpc-attribute</a> (AWS CLI)</p></li><li class="listitem"><p><a href="https://docs.aws.amazon.com/powershell/latest/reference/items/Edit-EC2VpcAttribute.html">Edit-EC2VpcAttribute</a> (AWS Tools for Windows PowerShell)</p></li></ul></div>
        
   
	  <h2 id="vpc-private-hosted-zones">私有托管区域</h2>
		
		<p>要使用自定义 DNS 域名（如 <code>example.com</code>）而不是使用私有 IPv4 地址或AWS提供的私有 DNS 主机名来访问您的 VPC 中的资源，您可以在 Route 53 中创建一个私有托管区域。私有托管区域就是一个容器，其中包含的信息说明您希望如何在一个或多个 VPC 中为某个域及其子域路由流量而不将您的资源公开到 Internet。您可以创建 Route 53 资源记录集，用来确定 Route 53 将如何响应对您的域及其子域的查询。例如，如果您希望将对 example.com 的浏览器请求路由到您 VPC 中的某个 Web 服务器，可以在您的私有托管区域中创建一条 A 记录并指定该 Web 服务器的 IP 地址。有关创建私有托管区域的更多信息，请参阅 <em>Amazon Route 53 开发人员指南</em> 中的<a href="https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/hosted-zones-private.html">使用私有托管区域</a>。</p>
		<p>要使用自定义 DNS 域名访问资源，必须连接到您的 VPC 中的实例。在您的实例中，您可通过使用 <code class="code">ping</code> 命令来测试是否可从私有托管区域中的资源的自定义 DNS 名称访问该资源；例如，<code class="code">ping mywebserver.example.com</code>。(您必须确保您的实例的安全组规则允许入站 ICMP 流量才能使 <code class="code">ping</code> 命令正常运行。)</p>
    <p>私有托管区域不支持 VPC 外的传递关系；例如，您不能使用资源的自定义私有 DNS 名称从 VPN 连接的另一端访问资源。</p>
		<div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>重要</h6></div><div class="awsdocs-note-text"><p>如果您使用在 Amazon Route 53 中的私有托管区域中定义的自定义 DNS 域名，则必须将 <code class="code">enableDnsHostnames</code> 和 <code class="code">enableDnsSupport</code> 属性设置为 <code class="code">true</code>。</p></div></div>
	<awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="警告" /> <strong>Javascript 在您的浏览器中被禁用或不可用。</strong></p><p>要使用 Amazon Web Services 文档，必须启用 Javascript。请参阅浏览器的帮助页面以了解相关说明。</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">文档惯例</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./DHCPOptionSet.html">使用 DHCP 选项集</div><div id="next" class="next-link" accesskey="n" href="./network-address-usage.html">网络地址用量</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">此页面对您有帮助吗？- 是</div><div class="content"><p>感谢您对我们工作的肯定！</p><p>如果不耽误您的时间，请告诉我们做得好的地方，让我们做得更好。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="反馈" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=VPC&amp;topic_url=https://docs.aws.amazon.com/zh_cn/vpc/latest/userguide/vpc-dns.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">此页面对您有帮助吗？- 否</div><div class="content"><p>感谢您告诉我们本页内容还需要完善。很抱歉让您失望了。</p><p>如果不耽误您的时间，请告诉我们如何改进文档。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="反馈" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=VPC&amp;topic_url=https://docs.aws.amazon.com/zh_cn/vpc/latest/userguide/vpc-dns.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>