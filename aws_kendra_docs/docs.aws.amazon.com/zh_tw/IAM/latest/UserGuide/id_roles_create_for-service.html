<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="zh-TW"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>建立角色以將許可委派給 AWS 服務 - AWS Identity and Access Management</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="id_roles_create_for-service" /><meta name="default_state" content="id_roles_create_for-service" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/id_roles_create_for-service.html" /><meta name="description" content="建立 IAM 角色，其決定 AWS 服務可以使用 AWS 帳戶 資源執行哪些操作。" /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS Identity and Access Management" /><meta name="guide" content="使用者指南" /><meta name="abstract" content="透過使用者身分 (身分驗證) 和定義特定許可 (授權) 的政策，控制存取您的 AWS 資源。" /><meta name="guide-locale" content="zh_tw" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/id_roles_create_for-service.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/id_roles_create_for-service.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/id_roles_create_for-service.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/id_roles_create_for-service.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/id_roles_create_for-service.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-service.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-service.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/id_roles_create_for-service.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/id_roles_create_for-service.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/id_roles_create_for-service.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/id_roles_create_for-service.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/id_roles_create_for-service.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/id_roles_create_for-service.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/id_roles_create_for-service.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/id_roles_create_for-service.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/id_roles_create_for-service.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/id_roles_create_for-service.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/id_roles_create_for-service.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/id_roles_create_for-service.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/IAM/latest/UserGuide/id_roles_create_for-service.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/id_roles_create_for-service.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-service.html" hreflang="x-default" /><meta name="feedback-item" content="IAM" /><meta name="this_doc_product" content="AWS Identity and Access Management" /><meta name="this_doc_guide" content="使用者指南" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'iam'}"></script><meta id="panorama-serviceSubSection" value="使用者指南" /><meta id="panorama-serviceConsolePage" value="建立角色以將許可委派給 AWS 服務" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>建立角色以將許可委派給 AWS 服務 - AWS Identity and Access Management</title><meta name="pdf" content="iam-ug.pdf#id_roles_create_for-service" /><meta name="rss" content="aws-iam-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=76" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=http://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/id_roles_create_for-service.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/id_roles_create_for-service.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/id_roles_create_for-service.html" /><meta name="keywords" content="IAM,AWS Identity and Access Management,IAM 使用者,使用者,IAM 群組,群組,IAM 角色,角色,許可政策,信任政策,政策,存取金鑰,密碼" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS Identity and Access Management",
        "item" : "https://docs.aws.amazon.com/iam/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "使用者指南",
        "item" : "https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "IAM 身分 (使用者、使用者群組和角色)",
        "item" : "https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/id.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "IAM 角色",
        "item" : "https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/id_roles.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "建立 IAM 角色",
        "item" : "https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/id_roles_create.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "建立角色以將許可委派給 AWS 服務",
        "item" : "https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/id_roles_create.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="iam-ug.pdf#id_roles_create_for-service" target="_blank" rel="noopener noreferrer" title="開啟 PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">文件</a><a href="/iam/index.html">AWS Identity and Access Management</a><a href="introduction.html">使用者指南</a></div><div id="page-toc-src"><a href="#id_roles_create_service-permissions">服務角色許可</a><a href="#roles-creatingrole-service-console">為 AWS 服務建立角色 (主控台)</a><a href="#roles-creatingrole-service-cli">為服務建立角色 (AWS CLI)</a><a href="#roles-creatingrole-service-api">為服務建立角色 (AWS API)</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="id_roles_create_for-service">建立角色以將許可委派給 AWS 服務</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>許多 AWS 服務需要您使用角色，讓服務代表您存取其他服務的資源。服務會擔任代您執行動作的角色稱為<a href="./id_roles_terms-and-concepts.html#iam-term-service-role">服務角色</a>。當角色做為服務的專業用途時，它被歸類為 <a href="./id_roles_terms-and-concepts.html#iam-term-service-role-ec2">EC2 執行個體的服務角色</a> (舉例來說) 或<a href="./id_roles_terms-and-concepts.html#iam-term-service-linked-role">服務連結角色</a>。若要查看使用服務連結的角色支援哪些服務，或者服務是否支援任何形式的臨時憑證的詳細資訊，請參閱 <a href="./reference_aws-services-that-work-with-iam.html">可搭配 IAM 運作的 AWS 服務</a>。若要了解個別服務如何使用角色，請在表格中選擇服務名稱以查看該服務的文件。</p><p>如需有關角色如何協助您委派許可的詳細資訊，請參閱 <a href="./id_roles_terms-and-concepts.html">角色術語和概念</a>。</p>
    <h2 id="id_roles_create_service-permissions">服務角色許可</h2>
    <p>您必須設定許可，允許 IAM 實體 (使用者或角色) 建立或編輯服務角色。</p>
    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>注意</h6></div><div class="awsdocs-note-text"><p>服務連結角色的 ARN 包括服務主體，這在下列政策中以 <code class="code"><code class="replaceable">SERVICE-NAME</code>.amazonaws.com</code> 形式指出。不要嘗試猜測服務主體，因為它是區分大小寫，且格式可以因各 AWS 服務而異。若要檢視服務的服務主體，請參閱該服務連結的角色文件。</p></div></div>
    <p><b>允許 IAM 實體建立特定服務角色</b></p>
    <p>將下列政策新增至需要建立服務角色的 IAM 實體。此政策可讓您建立所指定服務且具有特定名稱的服務角色。然後，您可以將受管或內嵌政策連接至該角色。</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "iam:AttachRolePolicy",
                "iam:CreateRole",
                "iam:PutRolePolicy"
            ],
            "Resource": "arn:aws:iam::*:role/<code class="replaceable">SERVICE-ROLE-NAME</code>"
        }
    ]
}</code></pre>
    <p><b>允許 IAM 實體建立任何服務角色</b></p>
    <p>AWS 建議您只允許系統管理使用者建立任何服務角色。具有建立角色和連接任何政策之許可的人員可以提升自己的許可。反之，建立一個政策，讓他們只建立所需的角色，或讓系統管理員代表他們建立服務角色。</p>
    <p>若要連接允許管理員存取整個 AWS 帳戶 的政策，請使用 <a href="https://console.aws.amazon.com/iam/home#policies/arn:aws:iam::aws:policy/AdministratorAccess" rel="noopener noreferrer" target="_blank"><span>AdministratorAccess</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> AWS 受管政策。</p>

    <p><b>允許 IAM 實體編輯服務角色</b></p>
    <p>將下列政策新增至需要編輯服務角色的 IAM 實體。</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "EditSpecificServiceRole",
            "Effect": "Allow",
            "Action": [
                "iam:AttachRolePolicy",
                "iam:DeleteRolePolicy",
                "iam:DetachRolePolicy",
                "iam:GetRole",
                "iam:GetRolePolicy",
                "iam:ListAttachedRolePolicies",
                "iam:ListRolePolicies",
                "iam:PutRolePolicy",
                "iam:UpdateRole",
                "iam:UpdateRoleDescription"
            ],
            "Resource": "arn:aws:iam::*:role/<code class="replaceable">SERVICE-ROLE-NAME</code>"
        },
        <span>{</span>
            "Sid": "ViewRolesAndPolicies",
            "Effect": "Allow",
            "Action": [
                "iam:GetPolicy",
                "iam:ListRoles"
            ],
            "Resource": "*"
        }
    ]
}</code></pre>
    <p><b>允許 IAM 實體刪除特定服務角色</b></p>
    <p>將下列陳述式新增至需要刪除所指定服務角色之 IAM 實體的許可政策。</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
    "Effect": "Allow",
    "Action": "iam:DeleteRole",
    "Resource": "arn:aws:iam::*:role/<code class="replaceable">SERVICE-ROLE-NAME</code>"
}</code></pre>
    <p><b>允許 IAM 實體刪除任何服務角色</b></p>
    <p>AWS 建議您只允許系統管理使用者刪除任何服務角色。反之，建立一個政策，只允許他們刪除所需的角色，或讓系統管理員代表他們刪除服務角色。</p>
    <p>若要連接允許管理員存取整個 AWS 帳戶 的政策，請使用 <a href="https://console.aws.amazon.com/iam/home#policies/arn:aws:iam::aws:policy/AdministratorAccess" rel="noopener noreferrer" target="_blank"><span>AdministratorAccess</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> AWS 受管政策。</p>
   
    <h2 id="roles-creatingrole-service-console">為 AWS 服務建立角色 (主控台)</h2>
    <p>您可以使用 AWS Management Console 為服務建立角色。因為有些服務支援多個服務角色，所以請參閱服務的 <a href="https://docs.aws.amazon.com/">AWS 文件</a>，以查看要選擇的使用案例。您可以了解如何為角色指派必要的信任和許可政策，以便服務可以代表您擔任角色。您用來控制角色的許可的步驟可能有所不同，端視服務如何定義使用案例，以及是否建立服務連結的角色而定。</p>

    
    <div class="procedure"><h6>建立 AWS 服務的角色 (主控台)</h6><ol><li><p>登入 AWS Management Console，並開啟位於 <a href="https://console.aws.amazon.com/iam/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/iam/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> 的 IAM 主控台。</p></li><li>
        <p>在 IAM 主控台的導覽窗格中，選擇 <b>Roles</b> (角色)，然後選擇 <b>Create role</b> (建立角色)。</p>
      </li><li>
        <p>對於 <b>Select trusted entity</b> (選取信任的實體) 區段，選擇 <b>AWS service</b> (AWS 服務)。</p>
      </li><li>
        <p>選擇服務的使用案例。服務會定義使用案例，以包含服務所需的信任政策。然後選擇 <b>Next</b> (下一步)。</p>
      </li><li>
        <p>可以的話，請選取用於許可政策的政策，或者選擇 <b>Create policy (建立政策)</b> 以開啟新的瀏覽器標籤，並從頭建立新的政策。如需更多詳細資訊，請參閱 <a href="./access_policies_create-console.html#access_policies_create-start">建立 IAM 政策</a>。在您建立政策後，關閉該標籤並返回您的原始標籤。選取您要服務具有之許可政策旁的核取方塊。</p>
        <p>根據您選取的使用案例，服務可能可以允許您執行下列任何操作：</p>
        <div class="itemizedlist">
           
           
           
           
        <ul class="itemizedlist"><li class="listitem">
            <p>無，因為服務會定義角色的許可。</p>
          </li><li class="listitem">
            <p>從有限的一組許可中進行選擇。</p>
          </li><li class="listitem">
            <p>從任意許可中進行選擇。</p>
          </li><li class="listitem">
            <p>此時不選取政策，稍後建立政策，然後將它們連接至角色。</p>
          </li></ul></div>
      </li><li>
        <p>(選用) 設定<a href="./access_policies_boundaries.html">許可界限</a>。這是進階功能，可用於服務角色，而不是服務連結的角色。</p>
        <p>展開 <b>Permissions boundary</b> (許可界限) 區段，並選擇 <b>Use a permissions boundary to control the maximum role permissions</b> (使用許可界限來控制角色許可上限)。IAM 包含您帳戶中的 AWS 受管和客戶管理政策清單。選取用於許可界限的政策，或者選擇 <b>Create policy</b> (建立政策) 以開啟新的瀏覽器標籤，並從頭建立新的政策。如需更多詳細資訊，請參閱 <a href="./access_policies_create-console.html#access_policies_create-start">建立 IAM 政策</a>。在您建立政策後，關閉該標籤並返回您的原始標籤，以選取用於許可界限的政策。</p>
      </li><li>
        <p>選擇 <b>Next (下一步)</b>。</p>
      </li><li>
        <p>針對 <b>Role name (角色名稱)</b>，服務會定義角色名稱自訂程度。如果服務定義角色名稱，則無法編輯此選項。在其他情況下，服務可能會定義角色的字首，並且可允許您輸入選用後綴。有些服務可讓您指定角色的完整名稱。</p>
        <p>如果可能，請輸入角色名稱或角色名稱後綴，以協助您識別此角色的用途。角色名稱在您的 AWS 帳戶 內必須是獨一無二的。它們無法透過大小寫進行區分。例如，您無法建立名為 <code class="userinput">PRODROLE</code> 和 <code class="userinput">prodrole</code> 的角色。因為有其他 AWS 資源可能會參照角色，所以您無法在建立角色之後編輯角色名稱。</p>
      </li><li>
        <p>(選用) 在 <b>Description</b> (說明) 中，輸入新角色的說明。</p>
      </li><li>
        <p>在 <b>Step 1: Select trusted entities</b> (步驟 1：選取受信任的實體) 或者 <b>Step 2: Add permissions</b> (步驟 2：新增許可) 區段中選擇 <b>Edit</b> (編輯)，可編輯使用案例和角色許可。</p>
      </li><li>
        <p>(選用) 藉由連接標籤作為鍵值對，將中繼資料新增至角色。如需有關在 IAM 中使用標籤的詳細資訊，請參閱 <a href="./id_tags.html">標記 IAM 資源</a>。</p>
      </li><li>
        <p>檢閱角色，然後選擇 <b>Create role</b> (建立角色)。</p>
      </li></ol></div>
   
    <h2 id="roles-creatingrole-service-cli">為服務建立角色 (AWS CLI)</h2>
    <p>從 AWS CLI 建立角色包含多個步驟。當您使用主控台建立角色時，有許多步驟會自動為您完成，但是使用 AWS CLI 的話，您必須自行明確執行每個步驟。您必須建立角色，然後為該角色指派許可政策。如果您使用的服務是 Amazon EC2，則還必須建立執行個體描述檔並新增該角色。或者，您也可以設定角色的<a href="./access_policies_boundaries.html">許可界限</a>。</p>
    <div class="procedure"><h6>從 AWS 為 AWS CLI 服務建立角色</h6><ol><li>
        <p>以下 <code class="code"><a href="https://docs.aws.amazon.com/cli/latest/reference/iam/create-role.html">create-role</a></code> 命令會建立名為 <em>Test-Role</em> 的角色，並將信任政策連接至該角色：</p>
        <p><code class="prompt">aws iam create-role --role-name Test-Role --assume-role-policy-document
            file://Test-Role-Trust-Policy.json</code></p>

      </li><li>
        <p>將受管許可政策連接到角色：<a href="https://docs.aws.amazon.com/cli/latest/reference/iam/attach-role-policy.html">aws iam attach-role-policy</a></p>
        <p>例如，下列 <code class="code">attach-role-policy</code> 命令會將名為 <code class="code">ReadOnlyAccess</code> 的 AWS 受管政策連接至名為 <code class="code">ReadOnlyRole</code> 的 IAM 角色：</p>
        <p><code class="prompt">aws iam attach-role-policy --policy-arn arn:aws:iam::aws:policy/ReadOnlyAccess
            --role-name ReadOnlyRole</code></p>
        <p> 或</p>
        <p>為角色建立內嵌許可政策：<a href="https://docs.aws.amazon.com/cli/latest/reference/iam/put-role-policy.html">aws iam put-role-policy</a></p>
        <p>若要新增嵌許可政策，請參閱以下範例：</p>
        <p>
          <code class="prompt">aws iam put-role-policy --role-name Test-Role --policy-name ExamplePolicy
            --policy-document file://AdminPolicy.json</code></p>
      </li><li>
        <p>(選用) 透過連接標籤來將自訂屬性新增至該角色：<a href="https://docs.aws.amazon.com/cli/latest/reference/iam/tag-role.html">aws iam tag-role</a></p>
        <p>如需詳細資訊，請參閱 <a href="./id_tags_roles.html#id_tags_roles_procs-cli-api">管理 IAM 角色的標籤 (AWS CLI 或 AWS API)</a>。</p>
      </li><li>
        <p>(選用) 設定角色的<a href="./access_policies_boundaries.html">許可界限</a>：<a href="https://docs.aws.amazon.com/cli/latest/reference/iam/put-role-permissions-boundary.html">aws iam put-role-permissions-boundary</a></p>
        <p>許可界限控制角色可以擁有的許可上限。許可界限是進階 AWS 功能。</p>
      </li></ol></div>
    <p>如果要將角色與 Amazon EC2 或使用 Amazon EC2 的另一個 AWS 服務一起使用，則必須將該角色存放在執行個體描述檔中。執行個體描述檔是角色的容器，可以在啟動時連接到 Amazon EC2 執行個體。執行個體設定檔只能包含一個角色，並且無法增加該限制。如果使用 AWS Management Console 建立角色，則會為您建立與角色同名的執行個體設定檔。如需有關執行個體描述檔的詳細資訊，請參閱 <a href="./id_roles_use_switch-role-ec2_instance-profiles.html">使用執行個體設定檔</a>。如需有關如何使用角色啟動 EC2 執行個體的資訊，請參閱《Amazon EC2 Linux 執行個體使用者指南》中的<a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/UsingIAM.html#UsingIAMrolesWithAmazonEC2Instances">控制 Amazon EC2 資源的存取</a>。</p>
    <div class="procedure"><h6>建立執行個體設定檔並將角色存放在其中 (AWS CLI)</h6><ol><li>
        <p>建立執行個體設定檔：<a href="https://docs.aws.amazon.com/cli/latest/reference/iam/create-instance-profile.html">aws iam create-instance-profile</a></p>
      </li><li>
        <p>將角色新增至執行個體設定檔：<a href="https://docs.aws.amazon.com/cli/latest/reference/iam/add-role-to-instance-profile.html">aws iam add-role-to-instance-profile</a></p>
      </li></ol></div>
    <p>下方設定的 AWS CLI 範例命令會示範前兩個建立角色及連接許可的步驟。它還說明兩個建立執行個體設定檔和新增角色至描述檔的步驟。此範例信任允許 Amazon EC2 服務擔任角色並檢視 <code class="code">example_bucket</code> Amazon S3  儲存貯體的政策。此範例也假定您在執行 Windows 的用戶端電腦上執行，並且已使用您的帳戶憑證和區域設定您的命令列界面。如需詳細資訊，請參閱<a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-getting-started.html">設定 AWS Command Line Interface</a>。</p>
    <p>當您建立角色時，這個範例在第一個命令包含下列信任政策。此信任政策允許 Amazon EC2 服務擔任該角色。</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
  "Version": "2012-10-17",
  "Statement": <span>{</span>
    "Effect": "Allow",
    "Principal": <span>{</span>"Service": "ec2.amazonaws.com"},
    "Action": "sts:AssumeRole"
  }
}</code></pre>
    <p>當您使用第二個命令的政策，您必須將許可政策連接到角色。以下範例許可政策允許角色僅在 <code class="code">example_bucket</code> Amazon S3 儲存貯體上執行 <code class="code">ListBucket</code> 動作。</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
  "Version": "2012-10-17",
  "Statement": <span>{</span>
    "Effect": "Allow",
    "Action": "s3:ListBucket",
    "Resource": "arn:aws:s3:::example_bucket"
  }
}</code></pre>
    <p>若要建立此 <code class="code">Test-Role-for-EC2</code> 角色，您必須先將之前的信任政策以名稱 <code class="code">trustpolicyforec2.json</code> 和之前名為 <code class="code">permissionspolicyforec2.json</code> 的許可政策儲存到您本機 <code class="code">policies</code> 磁碟機的 <code class="code">C:</code> 目錄。然後，您可以使用以下命令來建立角色、連接政策、建立執行個體設定檔，並新增角色到執行個體設定檔。</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="code" copy="false"># Create the role and attach the trust policy that allows EC2 to assume this role.
$ </code><code class="userinput">aws iam create-role --role-name Test-Role-for-EC2 --assume-role-policy-document file://C:\policies\trustpolicyforec2.json</code>

<code class="code" copy="false"># Embed the permissions policy (in this example an inline policy) to the role to specify what it is allowed to do.
$ </code><code class="userinput">aws iam put-role-policy --role-name Test-Role-for-EC2 --policy-name Permissions-Policy-For-Ec2 --policy-document file://C:\policies\permissionspolicyforec2.json</code>

<code class="code" copy="false"># Create the instance profile required by EC2 to contain the role
$ </code><code class="userinput">aws iam create-instance-profile --instance-profile-name EC2-ListBucket-S3</code>

<code class="code" copy="false"># Finally, add the role to the instance profile
$ </code><code class="userinput">aws iam add-role-to-instance-profile --instance-profile-name EC2-ListBucket-S3 --role-name Test-Role-for-EC2</code></code></pre>
    <p>當您啟動 EC2 執行個體時，如果使用 AWS 主控台，則請在 <b>Configure Instance Details (設定執行個體詳細資訊)</b> 頁面中指定執行個體設定檔名稱。如果您使用 <code class="code">aws ec2 run-instances</code> CLI 命令，指定 <code class="code">--iam-instance-profile</code> 參數。</p>
   
    <h2 id="roles-creatingrole-service-api">為服務建立角色 (AWS API)</h2>
     
      <p>從 AWS API 建立角色包含多個步驟。當您使用主控台建立角色時，有許多步驟會自動為您完成，但是使用 API 的話，您必須自行明確執行每個步驟。您必須建立角色，然後為該角色指派許可政策。如果您使用的服務是 Amazon EC2，則還必須建立執行個體描述檔並新增該角色。或者，您也可以設定角色的<a href="./access_policies_boundaries.html">許可界限</a>。</p>
      <div class="procedure"><h6>為 AWS 服務建立角色 (AWS API)</h6><ol><li>
          <p>建立角色：<a href="https://docs.aws.amazon.com/IAM/latest/APIReference/API_CreateRole.html">CreateRole</a></p>
          <p>對於角色的信任政策，您可以指定一個檔案位置。</p>
        </li><li>
          <p>將受管許可政策連接到角色：<a href="https://docs.aws.amazon.com/IAM/latest/APIReference/API_AttachRolePolicy.html">AttachRolePolicy</a></p>
          <p> 或</p>
          <p>為角色建立內嵌許可政策：<a href="https://docs.aws.amazon.com/IAM/latest/APIReference/API_PutRolePolicy.html">PutRolePolicy</a></p>
        </li><li>
          <p>(選用) 藉由連接標籤將自訂屬性新增至使用者：<a href="https://docs.aws.amazon.com/IAM/latest/APIReference/API_TagRole.html">TagRole</a></p>
          <p>如需詳細資訊，請參閱 <a href="./id_tags_users.html#id_tags_users_procs-cli-api">管理 IAM 使用者的標籤 (AWS CLI 或 AWS API)</a>。</p>
        </li><li>
          <p>(選用) 設定角色的<a href="./access_policies_boundaries.html">許可界限</a>：<a href="https://docs.aws.amazon.com/IAM/latest/APIReference/API_PutRolePermissionsBoundary.html">PutRolePermissionsBoundary</a></p>
          <p>許可界限控制角色可以擁有的許可上限。許可界限是進階 AWS 功能。</p>
        </li></ol></div>
      <p>如果要將角色與 Amazon EC2 或使用 Amazon EC2 的另一個 AWS 服務一起使用，則必須將該角色存放在執行個體描述檔中。執行個體設定檔是角色的容器。每個執行個體設定檔只能包含一個角色，並且無法增加該限制。如果在 AWS Management Console 中建立角色，則會為您建立與角色同名的執行個體設定檔。如需有關執行個體設定檔的詳細資訊，請參閱 <a href="./id_roles_use_switch-role-ec2_instance-profiles.html">使用執行個體設定檔</a>。如需有關如何使用角色啟動 Amazon EC2 執行個體的資訊，請參閱《Amazon EC2 Linux 執行個體使用者指南》中的<a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/UsingIAM.html#UsingIAMrolesWithAmazonEC2Instances">控制 Amazon EC2 資源的存取</a>。</p>
      <div class="procedure"><h6>建立執行個體設定檔並將角色存放在其中 (AWS API)</h6><ol><li>
          <p>建立執行個體設定檔：<a href="https://docs.aws.amazon.com/IAM/latest/APIReference/API_CreateInstanceProfile.html">CreateInstanceProfile</a></p>
        </li><li>
          <p>將角色新增至執行個體描述檔：<a href="https://docs.aws.amazon.com/IAM/latest/APIReference/API_AddRoleToInstanceProfile.html">AddRoleToInstanceProfile</a></p>
        </li></ol></div>
     
  <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="警告" /> <strong>您的瀏覽器已停用或無法使用 Javascript。</strong></p><p>您必須啟用 Javascript，才能使用 AWS 文件。請參閱您的瀏覽器說明頁以取得說明。</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">文件慣用形式</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./id_roles_create_for-user.html">為 IAM 使用者建立角色</div><div id="next" class="next-link" accesskey="n" href="./id_roles_create_for-idp.html">為聯合身分建立角色</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">此頁面是否有幫助？ - 是</div><div class="content"><p>感謝您，讓我們知道我們做得很好！</p><p>若您有空，歡迎您告知我們值得讚許的地方，這樣才能保持良好服務。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="意見回饋" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/id_roles_create_for-service.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">此頁面是否有幫助？ - 否</div><div class="content"><p>感謝讓我們知道此頁面仍須改善。很抱歉，讓您失望。</p><p>若您有空，歡迎您提供改善文件的方式。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="意見回饋" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/id_roles_create_for-service.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>