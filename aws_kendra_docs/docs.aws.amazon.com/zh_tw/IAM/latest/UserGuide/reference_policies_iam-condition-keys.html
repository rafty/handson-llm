<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="zh-TW"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>IAM 與 AWS STS 條件內容索引鍵 - AWS Identity and Access Management</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="reference_policies_iam-condition-keys" /><meta name="default_state" content="reference_policies_iam-condition-keys" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" /><meta name="description" content="描述您可以在政策中使用的 IAM 和相關條件索引鍵。" /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS Identity and Access Management" /><meta name="guide" content="使用者指南" /><meta name="abstract" content="透過使用者身分 (身分驗證) 和定義特定許可 (授權) 的政策，控制存取您的 AWS 資源。" /><meta name="guide-locale" content="zh_tw" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="x-default" /><meta name="feedback-item" content="IAM" /><meta name="this_doc_product" content="AWS Identity and Access Management" /><meta name="this_doc_guide" content="使用者指南" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'iam'}"></script><meta id="panorama-serviceSubSection" value="使用者指南" /><meta id="panorama-serviceConsolePage" value="IAM 與 AWS STS 條件內容索引鍵" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>IAM 與 AWS STS 條件內容索引鍵 - AWS Identity and Access Management</title><meta name="pdf" content="iam-ug.pdf#reference_policies_iam-condition-keys" /><meta name="rss" content="aws-iam-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=76" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=http://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" /><meta name="keywords" content="IAM,AWS Identity and Access Management,IAM 使用者,使用者,IAM 群組,群組,IAM 角色,角色,許可政策,信任政策,政策,存取金鑰,密碼" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS Identity and Access Management",
        "item" : "https://docs.aws.amazon.com/iam/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "使用者指南",
        "item" : "https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "AWS Identity and Access Management 的參考資訊。",
        "item" : "https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/reference.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "IAM JSON 政策參考",
        "item" : "https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/reference_policies.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "IAM 與 AWS STS 條件內容索引鍵",
        "item" : "https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/reference_policies.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="iam-ug.pdf#reference_policies_iam-condition-keys" target="_blank" rel="noopener noreferrer" title="開啟 PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">文件</a><a href="/iam/index.html">AWS Identity and Access Management</a><a href="introduction.html">使用者指南</a></div><div id="page-toc-src"><a href="#available-keys-for-iam">IAM 的可用金鑰</a><a href="#condition-keys-wif">AWS Web 聯合身分的可用索引鍵</a><a href="#cross-condition-keys-wif">跨服務 AWS Web 聯合身分內容索引鍵</a><a href="#condition-keys-saml">SAML AWS STS 聯合身分的可用索引鍵</a><a href="#cross-condition-keys-saml">跨服務 SAML 型 AWS STS 聯合內容索引鍵</a><a href="#condition-keys-sts">AWS STS 的可用索引鍵</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="reference_policies_iam-condition-keys">IAM 與 AWS STS 條件內容索引鍵</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>您可以在 JSON 政策中使用 <code class="code">Condition</code> 元素來測試包含在所有 AWS 請求內容中的金鑰值。這些索引鍵提供有關請求本身或請求參考的資源的資訊。在允許使用者請求的動作之前，您可以檢查索引鍵是否有指定的值。這可讓您可以在 JSON 政策陳述式符合或不符合傳入請求時進行精細控制。如需有關如何 JSON 政策中使用 <code class="code">Condition</code> 元素的資訊，請參閱 <a href="./reference_policies_elements_condition.html">IAM JSON 政策元素：Condition</a>。</p><p>本主題說明由 IAM 服務 (含有 <code class="code">iam:</code> 字首) 及 AWS Security Token Service (AWS STS) 服務 (含有 <code class="code">sts:</code> 字首) 所定義和提供的索引鍵。其他幾種 AWS 服務還提供與該服務所定義的動作和資源相關的服務特定的索引鍵。如需詳細資訊，請參閱<a href="reference_policies_actions-resources-contextkeys.html" rel="noopener noreferrer" target="_blank">適用於 AWS 服務的動作、資源和條件索引鍵</a>。支援條件索引鍵的服務文件通常包含其他資訊。例如，如需可在 Amazon S3 資源政策中使用之金鑰的資訊，請參閱 <em>Amazon Simple Storage Service 使用者指南</em>中的 <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/amazon-s3-policy-keys.html#AvailableKeys-iamV2">Amazon S3 政策金鑰</a>。</p><div class="highlights" id="inline-topiclist"><h6>主題</h6><ul><li><a href="#available-keys-for-iam">IAM 的可用金鑰</a></li><li><a href="#condition-keys-wif">AWS Web 聯合身分的可用索引鍵</a></li><li><a href="#cross-condition-keys-wif">跨服務 AWS Web 聯合身分內容索引鍵</a></li><li><a href="#condition-keys-saml">SAML AWS STS 聯合身分的可用索引鍵</a></li><li><a href="#cross-condition-keys-saml">跨服務 SAML 型 AWS STS 聯合內容索引鍵</a></li><li><a href="#condition-keys-sts">AWS STS 的可用索引鍵</a></li></ul></div>
      <h2 id="available-keys-for-iam">IAM 的可用金鑰</h2>
      <p>您可以在控制存取 IAM 資源的政策中使用以下條件索引鍵：</p>
      <div class="variablelist">
          
          
          
          
          
          
          
      <dl>
            <dt><b><span class="term"><a id="ck_AssociatedResourceArn"></a>iam:AssociatedResourceArn</span></b></dt>
            <dd>
               <p>使用 <a href="./reference_policies_elements_condition_operators.html#Conditions_ARN">ARN 運算子</a>。</p>
               <p>指定將在目標服務與此角色建立關聯之資源的 ARN。資源通常屬於主體者傳遞角色的目標服務。有時候，資源也可能屬於第三個服務。例如，您可以將角色傳遞給他們在 Amazon EC2 執行個體上使用的 Amazon EC2 Auto Scaling。在這種情況下，條件可能會符合 Amazon EC2 執行個體的 ARN。</p>
               <p>此條件索引鍵僅適用於政策中的 <a href="./id_roles_use_passrole.html">PassRole</a> 動作。不能用來限制任何其他動作。</p>
               <p>在政策中使用此條件索引鍵以允許實體傳遞角色，但只有在該角色與指定的資源相關聯時才行。您可以使用萬用字元 (*)，允許對特定類型的資源執行操作，而不限制區域或資源 ID。例如，您可以允許 IAM 使用者或角色將任何角色傳遞給 Amazon EC2 服務，此服務會搭配區域 <code class="code">us-east-1</code> 或 <code class="code">us-west-1</code> 中的執行個體使用。不允許 IAM 使用者或角色將角色傳遞給其他服務。此外，它不允許 Amazon EC2 將該角色搭配其他區域中的執行個體使用。</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Effect": "Allow",
    "Action": "iam:PassRole",
    "Resource": "*",
    "Condition": <span>{</span>
        "StringEquals": <span>{</span>"iam:PassedToService": "ec2.amazonaws.com"},
        "ArnLike": <span>{</span>
            "iam:AssociatedResourceARN": [
                "arn:aws:ec2:us-east-1:111122223333:instance/*",
                "arn:aws:ec2:us-west-1:111122223333:instance/*"
            ]
        }
    }
}</code></pre>
               <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>注意</h6></div><div class="awsdocs-note-text"><p>支援 <a href="#ck_PassedToService">iam:PassedToService</a> 的 AWS 服務也支援此條件索引鍵。</p></div></div>
            </dd>
         
            <dt><b><span class="term"><a id="ck_AWSServiceName"></a>iam:AWSServiceName</span></b></dt>
            <dd>
               <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
               <p>指定此角色所連接的 AWS 服務。</p>
               <p>在此範例中，若服務名稱為 <em>access-analyzer.amazonaws.com</em>，您可允許實體建立服務連結角色。</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
   "Version": "2012-10-17",
   "Statement": [<span>{</span>
       "Effect": "Allow",
       "Action": "iam:CreateServiceLinkedRole",
       "Resource": "*",
       "Condition": <span>{</span>
         "StringLike": <span>{</span>
           "iam:AWSServiceName": "access-analyzer.amazonaws.com"
         }
       }
     }]
 }</code></pre>

            </dd>
         
            <dt><b><span class="term"><a id="ck_OrganizationsPolicyId"></a>iam:OrganizationsPolicyId</span></b></dt>
            <dd>
               <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
               <p>檢查含指定 AWS Organizations ID 的政策與請求中使用的政策是否相符。如要檢視使用此條件索引鍵的範例 IAM 政策，請參閱 <a href="./reference_policies_examples_iam_service-accessed-data-orgs.html">IAM：檢視 Organizations 政策上次存取的服務資訊</a>。</p>
            </dd>
         
            <dt><b><span class="term"><a id="ck_PassedToService"></a>iam:PassedToService</span></b></dt>
            <dd>
               <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
               <p>指定可以將角色傳遞到的服務的服務主體。此條件索引鍵僅適用於政策中的 <a href="./id_roles_use_passrole.html">PassRole</a> 動作。不能用來限制任何其他動作。</p>
               <p>當您在政策中使用此條件索引鍵時，請使用服務主體指定服務。服務主體是可以在政策的 <code class="code">Principal</code> 元素中指定的服務名稱。這是通常的格式：<code class="code">SERVICE_NAME_URL.amazonaws.com</code>。</p>
               <p>您可以使用 <code class="code">iam:PassedToService</code> 限制使用者，以便他們只能將角色傳遞給特定服務。例如，使用者可能會建立<a href="./id_roles_terms-and-concepts.html#iam-term-service-role">服務角色</a>，它信任 CloudWatch 代他們將日誌資料寫入 Amazon S3 儲存貯體。然後，使用者必須將許可政策和信任政策連接到新的服務角色。在這種情況下，信任政策必須在 <code class="code">cloudwatch.amazonaws.com</code> 元素中指定 <code class="code">Principal</code>。若要檢視允許使用者將該角色傳遞至 CloudWatch 的政策，請參閱 <a href="./reference_policies_examples_iam-passrole-service.html">IAM：將 IAM 角色傳遞到特定 AWS 服務</a>。</p>
               <p>透過使用此條件索引鍵，您可以確保使用者僅為您指定的服務建立服務角色。例如，如果具有上述政策的使用者嘗試為 Amazon EC2 建立服務角色，操作將會失敗。發生失敗的原因是使用者沒有將角色傳遞至 Amazon EC2 的許可。</p>
               <p>有時您會將角色傳遞給服務，然後將角色傳遞給不同服務。<code class="code">iam:PassedToService</code> 僅包含擔任角色的最終服務，而不是傳遞角色的中繼服務。</p>
               <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>注意</h6></div><div class="awsdocs-note-text"><p>有些服務不支援此條件索引鍵。</p></div></div>
            </dd>
         
            <dt><b><span class="term"><a id="ck_PermissionsBoundary"></a>iam:PermissionsBoundary</span></b></dt>
            <dd>
               <p>使用 <a href="./reference_policies_elements_condition_operators.html#Conditions_ARN">ARN 運算子</a>。</p>
               <p>檢查指定的政策連接為 IAM 主體資源上的許可界限。如需詳細資訊，請參閱<a href="./access_policies_boundaries.html">IAM 實體的許可界限</a></p>
            </dd>
         
            <dt><b><span class="term"><a id="ck_PolicyARN"></a>iam:PolicyARN</span></b></dt>
            <dd>
               <p>使用 <a href="./reference_policies_elements_condition_operators.html#Conditions_ARN">ARN 運算子</a>。</p>
               <p>在涉及受管政策的請求中檢查託管政策的 Amazon Resource Name (ARN) 。如需詳細資訊，請參閱 <a href="./access_controlling.html#access_controlling-policies">控制對政策的存取</a>。</p>
            </dd>
         
            <dt><b><span class="term"><a id="ck_ResourceTag"></a>iam:ResourceTag/<code class="replaceable">key-name</code></span></b></dt>
            <dd>
               <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
               <p>檢查連接至身分資源 (使用者或角色) 的標籤是否符合指定的索引鍵名稱和值。</p>
               <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>注意</h6></div><div class="awsdocs-note-text"><p>IAM 和 AWS STS 支援 <code class="code">iam:ResourceTag</code> IAM 條件索引鍵和 <code class="code">aws:ResourceTag</code> 全域條件索引鍵。</p></div></div>
               <p>您可以將自訂屬性以金鑰/值組的形式新增至 IAM 資源。如需有關 IAM 資源標籤的詳細資訊，請參閱 <a href="./id_tags.html">標記 IAM 資源</a>。您可以使用 <code class="code">ResourceTag</code> <a href="./access_tags.html#access_tags_control-resources">控制對 AWS 資源的存取</a>，包括 IAM 資源。但是，由於 IAM 不支援群組的標籤，因此您無法使用標籤來控制群組的存取。</p>
               <p>此範例會示範如何建立身分型政策，允許刪除具有 <code class="userinput">status=terminated</code> 標籤的使用者。若要使用此政策，請將範例政策中的<code class="replaceable">斜體預留位置文字</code>取代為您自己的資訊。然後，遵循<a href="./access_policies_create.html">建立政策</a>或<a href="./access_policies_manage-edit.html">編輯政策</a>中的指示進行操作。</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
    "Version": "2012-10-17",
    "Statement": [<span>{</span>
        "Effect": "Allow",
        "Action": "iam:DeleteUser",
        "Resource": "*",
        "Condition": <span>{</span>"StringEquals": <span>{</span>"iam:ResourceTag/<code class="replaceable">status</code>": "<code class="replaceable">terminated</code>"}}
    }]
}</code></pre>
            </dd>
         </dl></div>
    
      <h2 id="condition-keys-wif">AWS Web 聯合身分的可用索引鍵</h2>
      <p>您可以使用 Web 聯合身分，針對您 AWS 帳戶中的 IAM OpenID Connect (OIDC) 身分提供者，向已透過 OpenID Connect 合規 OpenID 提供者 (OP) 進行驗證的使用者提供暫時安全憑證。身分提供者包括 Login with Amazon、Amazon Cognito、Google、Facebook 等。可能會用到取自您自己的 OpenID OP 的身分識別字符 (id_token)，以及發行給 Amazon Elastic Kubernetes Service 叢集的服務帳戶的 id_token。在這種情況下，當使用臨時安全憑證發出請求時，可以使用其他條件索引鍵。您可以使用這些索引鍵編寫政策，將聯合身分使用者的存取限制在與特定提供者、應用程式或使用者建立關聯的資源。這些索引鍵通常用於角色的信任政策。使用 OIDC 提供者的名稱，宣告 (<code class="code">:aud</code>、<code class="code">:azp</code>、<code class="code">:amr</code>、<code class="code">sub</code>) 後面接著的 OIDC 提供者名稱來定義條件金鑰。對於 Amazon Cognito 使用的角色，金鑰的定義方式使用宣告後的 <code class="code">cognito-identity.amazonaws.com</code>。</p>
      <div class="variablelist">
          
          
          
          
          
          
      <dl>
            <dt><b><span class="term"><a id="ck_wif-amr"></a>amr</span></b></dt>
            <dd>
               <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
               <p><b>範例</b>：<code class="code">cognito-identity.amazonaws.com:amr</code></p>
               <p>如果您使用 Amazon Cognito 進行 Web 聯合身分驗證，則 <code class="code">cognito-identity.amazonaws.com:amr</code> 索引鍵 (身分驗證方法參考) 會包含有關該使用者的登入資訊。索引鍵是多值的，這表示您使用<a href="./reference_policies_multi-value-conditions.html">條件設定運算子</a>在政策中對其進行測試。索引鍵可以包含以下值：</p>
               <div class="itemizedlist">
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p>如果使用者未經身分驗證，則索引鍵只包含 <code class="code">unauthenticated</code>。</p>
                  </li><li class="listitem">
                     <p>如果使用者已通過身分驗證，則索引鍵包含值 <code class="code">authenticated</code> 和呼叫中所使用的登入提供者的名稱 (<code class="code">graph.facebook.com</code>、<code class="code">accounts.google.com</code> 或 <code class="code">www.amazon.com</code>)。</p>
                  </li></ul></div>
               <p>舉例來說，Amazon Cognito 角色的信任政策中的以下條件測試使用者是否未經身分驗證：</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">"Condition": <span>{</span>
  "StringEquals": 
    <span>{</span> "cognito-identity.amazonaws.com:aud": "us-east-2:<code class="replaceable">identity-pool-id</code>" },
  "ForAnyValue:StringLike": 
    <span>{</span> "cognito-identity.amazonaws.com:amr": "unauthenticated" }
}</code></pre>
            </dd>
         
            <dt><b><span class="term"><a id="ck_wif-aud"></a>aud</span></b></dt>
            <dd>
               <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
               <p>使用 <code class="code">aud</code> 條件索引鍵來驗證 Google 用戶端 ID 或 Amazon Cognito 身分集區 ID 是否符合您在政策中指定的 ID。您可以搭配相同身分提供者的 <code class="code">aud</code> 索引鍵來使用 <code class="code">sub</code> 索引鍵。</p>
               <p><b>範例：</b></p>
               <div class="itemizedlist">
                   
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p><code class="code">graph.facebook.com:app_id</code></p>
                  </li><li class="listitem">
                     <p><code class="code">accounts.google.com:aud</code></p>
                  </li><li class="listitem">
                     <p><code class="code">cognito-identity.amazonaws.com:aud</code></p>
                  </li></ul></div>
               <p>此 <code class="code">graph.facebook.com:app_id</code> 欄位會提供符合其他身分識別提供者所使用之 aud 欄位的對象內容。</p>
               <p><code class="code">accounts.google.com:aud</code> 條件索引鍵符合下列 Google ID 權杖欄位。</p>
               <div class="itemizedlist">
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p>未設定 <code class="code">aud</code> 欄位時，您應用程式的 OAuth 2.0 Google 用戶端 ID 的 <code class="code">azp</code>。設定 <code class="code">azp</code> 欄位時，<code class="code">aud</code> 欄位符合 <a href="#ck_oaud">accounts.google.com:oaud</a> 條件金鑰。</p>
                  </li><li class="listitem">
                     <p>設定 <code class="code">azp</code> 欄位時為 <code class="code">azp</code>。這可能發生於混合式應用程式，其中，Web 應用程式和 Android 應用程式具有不同的 OAuth 2.0 Google 用戶端 ID，但共用相同的 Google API 專案。</p>
                  </li></ul></div>
               <p>如需有關 Google <code class="code">aud</code> 和 <code class="code">azp</code> 欄位的詳細資訊，請參閱 <a href="https://developers.google.com/identity/protocols/OpenIDConnect" rel="noopener noreferrer" target="_blank"><span>Google Identity Platform OpenID Connect</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> 指南。</p>
               <p>當您使用 <code class="code">accounts.google.com:aud</code> 條件索引鍵撰寫政策時，您必須知道應用程式是否為設定 <code class="code">azp</code> 欄位的混合式應用程式。</p>
               <p><code class="code">azp</code> Field Not Set</p>
               <p>下列範例政策適用於未設定 <code class="code">azp</code> 欄位的非混合式應用程式。在這種情況下，Google ID 權杖 <code class="code">aud</code> 欄位值符合 <code class="code">accounts.google.com:aud</code> 和 <code class="code">accounts.google.com:oaud</code> 條件索引鍵值。</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Principal": <span>{</span>"Federated": "accounts.google.com"},
            "Action": "sts:AssumeRoleWithWebIdentity",
            "Condition": <span>{</span>
                "StringEquals": <span>{</span>
                    "accounts.google.com:aud": "aud-value",
                    "accounts.google.com:oaud": "aud-value",
                    "accounts.google.com:sub": "sub-value"
                }
            }
        }
    ]
}</code></pre>
               <p><code class="code">azp</code> Field Set</p>
               <p>下列範例政策適用於已設定 <code class="code">azp</code> 欄位的混合式應用程式。在這種情況下，Google ID 權杖 <code class="code">aud</code> 欄位值只符合 <code class="code">accounts.google.com:oaud</code> 條件索引鍵值。<code class="code">azp</code> 欄位值符合 <code class="code">accounts.google.com:aud</code> 條件索引鍵值。</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Principal": <span>{</span>"Federated": "accounts.google.com"},
            "Action": "sts:AssumeRoleWithWebIdentity",
            "Condition": <span>{</span>
                "StringEquals": <span>{</span>
                    "accounts.google.com:aud": "azp-value",
                    "accounts.google.com:oaud": "aud-value",
                    "accounts.google.com:sub": "sub-value"
                }
            }
        }
    ]
}</code></pre>
            </dd>
         
            <dt><b><span class="term"><a id="ck_wif-id"></a>id</span></b></dt>
            <dd>
               <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
               <p><b>範例：</b></p>
               <div class="itemizedlist">
                   
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p><code class="code">graph.facebook.com:id</code></p>
                  </li><li class="listitem">
                     <p><code class="code">www.amazon.com:app_id</code></p>
                  </li><li class="listitem">
                     <p><code class="code">www.amazon.com:user_id</code></p>
                  </li></ul></div>
               <p>使用這些索引鍵來驗證應用程式 (或網站) ID 或使用者 ID 是否符合您在政策中指定的 ID。這適用於 Facebook 或 Login with Amazon。您可以搭配相同身分提供者的 <code class="code">app_id</code> 索引鍵來使用 <code class="code">id</code> 索引鍵。</p>
            </dd>
         
            <dt><b><span class="term"><a id="ck_oaud"></a>oaud</span></b></dt>
            <dd>
               <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
               <p><b>範例</b>：<code class="code">accounts.google.com:oaud</code></p>
               <p>如果您使用 Google 進行 Web 聯合身分，此索引鍵指定此 ID 權杖適用的 Google 對象 (<code class="code">aud</code>)。必須是您應用程式的其中一個 OAuth 2.0 用戶端 ID。</p>
            </dd>
         
            <dt><b><span class="term"><a id="ck_wif-sub"></a>sub</span></b></dt>
            <dd>
               <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
               <p><b>範例：</b></p>
               <div class="itemizedlist">
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p><code class="code">accounts.google.com:sub</code></p>
                  </li><li class="listitem">
                     <p><code class="code">cognito-identity.amazonaws.com:sub</code></p>
                  </li></ul></div>
               <p>使用這些索引鍵來驗證使用者 ID 是否符合您在政策中指定的 ID。您可以搭配相同身分提供者的 <code class="code">sub</code> 索引鍵來使用 <code class="code">aud</code> 索引鍵。</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        "Condition": <span>{</span>
              "StringEquals": <span>{</span>
                  "oidc.eks.us-east-1.amazonaws.com/id/111122223333:aud": "sts.amazonaws.com",
                  "oidc.eks.us-east-1.amazonaws.com/id/111122223333:sub": "system:serviceaccount:default:assumer"
               }
            }
    ]
      }</code></pre>
            </dd>
         
            <dt><b><span class="term">Web 聯合身分的詳細資訊</span></b></dt>
            <dd>
               <p>如需有關 Web 聯合身分的詳細資訊，請參閱下列內容：</p>
               <div class="itemizedlist">
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p><a href="https://docs.aws.amazon.com/cognito/latest/developerguide/cognito-identity.html">Amazon Cognito 使用者指南</a>。</p>
                  </li><li class="listitem">
                     <p><a href="./id_roles_providers_oidc.html">關於 Web 聯合身分</a></p>
                  </li></ul></div>
            </dd>
         </dl></div>
    
      <h2 id="cross-condition-keys-wif">跨服務 AWS Web 聯合身分內容索引鍵</h2>
      <p>某些 Web 聯合身分條件金鑰可用於角色信任政策中，以定義允許使用者在其他 AWS 服務中存取的項目。聯合主體擔任其他角色時，可在角色信任政策中使用這些條件金鑰，也可以在來自其他 AWS 服務的資源政策中使用這些條件金錀，以授權聯合主體存取資源。如果您使用 Amazon Cognito 進行 Web 聯合身分驗證，則這些金鑰在使用者通過身分驗證後可用。</p>
      <p>選取條件金鑰以查看描述。</p>
      <div class="itemizedlist">
          
          
          
          
      <ul class="itemizedlist"><li class="listitem">
            <p><a href="#ck_wif-amr">amr</a></p>
         </li><li class="listitem">
            <p><a href="#ck_wif-aud">aud</a></p>
         </li><li class="listitem">
            <p><a href="#ck_wif-id">id</a></p>
         </li><li class="listitem">
            <p><a href="#ck_wif-sub">sub</a></p>
         </li></ul></div>
      <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>注意</h6></div><div class="awsdocs-note-text"><p>在外部身分提供者 (IdP) 驗證和對初始 AssumeRoleWithWebIdentity 作業的授權之後，沒有其他以 Web 身分識別為基礎的聯合條件金鑰可供使用。</p></div></div>
    
      <h2 id="condition-keys-saml">SAML AWS STS 聯合身分的可用索引鍵</h2>
      <p>如果您以 AWS Security Token Service (AWS STS) 使用<a href="https://docs.aws.amazon.com/STS/latest/UsingSTS/CreatingSAML.html">以 SAML 為基礎的聯合身分</a>，則可以在政策中包含其他條件索引鍵。</p>
       
         <h3 id="condition-keys-saml_trust-policy">SAML 角色信任政策</h3>
         <p>在角色的信任政策中，您可以包含以下索引鍵，這些索引鍵可幫助您確定是否允許呼叫者擔任該角色。除了 <code class="code">saml:doc</code> 外，所有值均來自 SAML 聲明。當您建立或編輯具有條件的政策時，在 IAM 主控台視覺化編輯器中可使用清單中的所有項目。標示為 <code class="code">[]</code> 的項目<em>可以</em>具有一個值，該值是指定類型的清單。</p>
         <div class="variablelist">
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
         <dl>
               <dt><b><span class="term"><a id="ck_aud"></a>saml:aud </span></b></dt>
               <dd>
                  <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
                  <p>顯示 SAML 聲明的端點 URL。此索引鍵值來自聲明中的 <code class="code">SAML Recipient</code> 欄位，<em>而不是</em> <code class="code">Audience</code> 欄位。</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_commonname"></a>saml:commonName[]</span></b></dt>
               <dd>
                  <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
                  <p>這是 <code class="code">commonName</code> 屬性。</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_cn"></a>saml:cn[]</span></b></dt>
               <dd>
                  <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
                  <p>這是 <code class="code">eduOrg</code> 屬性。</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_doc"></a>saml:doc</span></b></dt>
               <dd>
                  <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
                  <p>這代表用來擔任該角色的主體。格式為 <code class="replaceable">account-ID</code>/<code class="replaceable">provider-friendly-name</code>，例如 <code class="code">123456789012/SAMLProviderName</code>。<em>account-ID</em> 值是指擁有 <a href="./id_roles_providers_create_saml.html">SAML 提供者</a>的帳戶。</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_edupersonaffiliation"></a>saml:edupersonaffiliation[]</span></b></dt>
               <dd>
                  <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
                  <p>這是 <code class="code">eduPerson</code> 屬性。</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_edupersonassurance"></a>saml:edupersonassurance[]</span></b></dt>
               <dd>
                  <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
                  <p>這是 <code class="code">eduPerson</code> 屬性。</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_edupersonentitlement"></a>saml:edupersonentitlement[]</span></b></dt>
               <dd>
                  <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
                  <p>這是 <code class="code">eduPerson</code> 屬性。</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_edupersonnickname"></a>saml:edupersonnickname[]</span></b></dt>
               <dd>
                  <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
                  <p>這是 <code class="code">eduPerson</code> 屬性。</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_edupersonorgdn"></a>saml:edupersonorgdn</span></b></dt>
               <dd>
                  <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
                  <p>這是 <code class="code">eduPerson</code> 屬性。</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_edupersonorgunitdn"></a>saml:edupersonorgunitdn[]</span></b></dt>
               <dd>
                  <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
                  <p>這是 <code class="code">eduPerson</code> 屬性。</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_edupersonprimaryaffiliation"></a>saml:edupersonprimaryaffiliation</span></b></dt>
               <dd>
                  <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
                  <p>這是 <code class="code">eduPerson</code> 屬性。</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_edupersonprimaryorgunitdn"></a>saml:edupersonprimaryorgunitdn</span></b></dt>
               <dd>
                  <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
                  <p>這是 <code class="code">eduPerson</code> 屬性。</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_edupersonprincipalname"></a>saml:edupersonprincipalname</span></b></dt>
               <dd>
                  <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
                  <p>這是 <code class="code">eduPerson</code> 屬性。</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_edupersonscopedaffiliation"></a>saml:edupersonscopedaffiliation[]</span></b></dt>
               <dd>
                  <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
                  <p>這是 <code class="code">eduPerson</code> 屬性。</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_edupersontargetedid"></a>saml:edupersontargetedid[]</span></b></dt>
               <dd>
                  <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
                  <p>這是 <code class="code">eduPerson</code> 屬性。</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_eduorghomepageuri"></a>saml:eduorghomepageuri[]</span></b></dt>
               <dd>
                  <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
                  <p>這是 <code class="code">eduOrg</code> 屬性。</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_eduorgidentityauthnpolicyuri"></a>saml:eduorgidentityauthnpolicyuri[]</span></b></dt>
               <dd>
                  <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
                  <p>這是 <code class="code">eduOrg</code> 屬性。</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_eduorglegalname"></a>saml:eduorglegalname[]</span></b></dt>
               <dd>
                  <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
                  <p>這是 <code class="code">eduOrg</code> 屬性。</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_eduorgsuperioruri"></a>saml:eduorgsuperioruri[]</span></b></dt>
               <dd>
                  <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
                  <p>這是 <code class="code">eduOrg</code> 屬性。</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_eduorgwhitepagesuri"></a>saml:eduorgwhitepagesuri[]</span></b></dt>
               <dd>
                  <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
                  <p>這是 <code class="code">eduOrg</code> 屬性。</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_givenname"></a>saml:givenName[]</span></b></dt>
               <dd>
                  <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
                  <p>這是 <code class="code">givenName</code> 屬性。</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_iss"></a>saml:iss</span></b></dt>
               <dd>
                  <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
                  <p>發行者，由 URN 代表。</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_mail"></a>saml:mail[]</span></b></dt>
               <dd>
                  <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
                  <p>這是 <code class="code">mail</code> 屬性。</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_name"></a>saml:name[]</span></b></dt>
               <dd>
                  <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
                  <p>這是 <code class="code">name</code> 屬性。</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_saml-namequalifier"></a>saml:namequalifier</span></b></dt>
               <dd>
                  <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
                  <p>以 SAML 提供者易記名稱為基礎的雜湊值。該值是下列值的串連，依照順序且以 '/' 字元區隔：</p>
                  <div class="orderedlist">
                      
                      
                      
                  <ol><li>
                        <p><code class="code">Issuer</code> 回應值 (<code class="code">saml:iss</code>)</p>
                     </li><li>
                        <p><code class="code">AWS</code> 帳戶 ID</p>
                     </li><li>
                        <p> IAM 中 SAML 提供者的易記名稱 (ARN 的最後一個部分) </p>
                     </li></ol></div>
                  <p>帳戶 ID 與 SAML 提供者的易記名稱的串聯可作為索引鍵 <code class="code">saml:doc</code> 供 IAM 政策使用。如需詳細資訊，請參閱 <a href="./id_roles_providers_saml.html#CreatingSAML-userid">單獨辨識以 SAML 為基礎的聯合身分中的使用者</a>。</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_organizationstatus"></a>saml:organizationStatus[]</span></b></dt>
               <dd>
                  <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
                  <p>這是 <code class="code">organizationStatus</code> 屬性。</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_primarygroupsid"></a>saml:primaryGroupSID[]</span></b></dt>
               <dd>
                  <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
                  <p>這是 <code class="code">primaryGroupSID</code> 屬性。</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_saml-sub"></a>saml:sub</span></b></dt>
               <dd>
                  <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
                  <p>這是該陳述的主題，其中包含單獨辨識組織中某個使用者的值 (例如 <code class="code">_cbb88bf52c2510eabe00c1642d4643f41430fe25e3</code>)。</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_saml-subtype"></a>saml:sub_type</span></b></dt>
               <dd>
                  <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
                  <p>此索引鍵可以具有值 <code class="code">persistent</code>、<code class="code">transient</code> 或者由 SAML 聲明中使用的 <code class="code">Format</code> 與 <code class="code">Subject</code> 元素的完整 <code class="code">NameID</code> URI 組成。<code class="code">persistent</code> 的值表示 <code class="code">saml:sub</code> 中的值對於工作階段之間的使用者是相同的。如果值為 <code class="code">transient</code>，則使用者在每個工作階段中擁有不同的 <code class="code">saml:sub</code> 值。如需 <code class="code">NameID</code> 元素的 <code class="code">Format</code> 屬性的詳細資訊，請參閱 <a href="./id_roles_providers_create_saml_assertions.html">為身分驗證回應配置 SAML 聲明</a>。</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_surname"></a>saml:surname[]</span></b></dt>
               <dd>
                  <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
                  <p>這是 <code class="code">surnameuid</code> 屬性。</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_uid"></a>saml:uid[]</span></b></dt>
               <dd>
                  <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
                  <p>這是 <code class="code">uid</code> 屬性。</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_x500uniqueidentifier"></a>saml:x500UniqueIdentifier[]</span></b></dt>
               <dd>
                  <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
                  <p>這是 <code class="code">x500UniqueIdentifier</code> 屬性。</p>
               </dd>
            </dl></div>
         <p>如需 <code class="code">eduPerson</code> 和 <code class="code">eduOrg</code> 屬性的一般資訊，請參閱 <a href="https://wiki.refeds.org/display/STAN/eduPerson" rel="noopener noreferrer" target="_blank"><span>REFEDS Wiki 網站</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>。如需 <code class="code">eduPerson</code> 屬性的清單，請參閱 <a href="https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html" rel="noopener noreferrer" target="_blank"><span>eduPerson 物件類別規格 (201602)</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>。</p>
         <p>類型為清單的條件索引鍵可包括多個值。若要在清單值的政策中建立條件，可以使用<a href="./reference_policies_multi-value-conditions.html">設定運算子</a> (<code class="code">ForAllValues</code>、<code class="code">ForAnyValue</code>)。例如，若要允許關係為「教職員」或「員工」 (但不是「學生」) 的任何使用者，您可以使用如下條件：</p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="">"Condition": <span>{</span>
   "ForAllValues:StringLike": <span>{</span>
     "saml:edupersonaffiliation":[ "faculty", "staff"] 
   }
}</code></pre>
       
    
      <h2 id="cross-condition-keys-saml">跨服務 SAML 型 AWS STS 聯合內容索引鍵</h2>
      <p>某些 SAML 型聯合條件金鑰可用於後續要求中，以授權其他服務和 <code class="code">AssumeRole</code> 呼叫中的 AWS 操作。聯合主體擔任其他角色時，可在角色信任政策中使用這些條件金鑰，也可以在來自其他 AWS 服務的資源政策中使用這些條件金錀，以授權聯合主體存取資源。如需使用這些金鑰的詳細資訊，請參閱<a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_providers_saml.html#CreatingSAML-userid">關於以 SAML 2.0 為基礎的聯合</a>。</p>
      <p>選取條件金鑰以查看描述。</p>
      <div class="itemizedlist">
          
          
          
      <ul class="itemizedlist"><li class="listitem">
            <p><a href="#ck_saml-namequalifier">saml:namequalifier</a></p>
         </li><li class="listitem">
            <p><a href="#ck_saml-sub">saml:sub</a></p>
         </li><li class="listitem">
            <p><a href="#ck_saml-subtype">saml:sub_type</a></p>
         </li></ul></div>
      <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>注意</h6></div><div class="awsdocs-note-text"><p>在初始外部身分提供者 (IdP) 驗證回應之後，沒有其他以 SAML 為基礎的聯合條件金鑰可供使用。</p></div></div>
    
      <h2 id="condition-keys-sts">AWS STS 的可用索引鍵</h2>
      <p>您可以針對使用 AWS Security Token Service (AWS STS) 操作所擔任的角色，使用 IAM 角色信任政策中的以下條件索引鍵：</p>
      <div class="variablelist">
          
          
          
          
          
          
      <dl>
            <dt><b><span class="term"><a id="ck_awsservicename"></a>sts:AWSServiceName</span></b></dt>
            <dd>
               <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
               <p>使用此索引鍵來指定可以使用持有人權杖的服務。當您在政策中使用此條件索引鍵時，請使用服務主體指定服務。服務主體是可以在政策的 <code class="code">Principal</code> 元素中指定的服務名稱。例如，<code class="code">codeartifact.amazonaws.com</code> 是 AWS CodeArtifact 服務主體。</p>
               <p>某些 AWS 服務要求您具有取得 AWS STS 服務持有人權杖的許可，才能以程式設計方式存取其資源。例如，AWS CodeArtifact 需要主體使用持有人權杖來執行某些操作。<code class="code">aws codeartifact get-authorization-token</code> 命令會傳回一個持有人權杖。然後，您可以使用持有人權杖來執行 AWS CodeArtifact 操作。如需有關持有人權杖的詳細資訊，請參閱<a href="./id_credentials_bearer.html">使用持有人權杖</a>。</p>
               <p><b>可用性</b> – 此索引鍵會呈現在取得持有人權杖的請求中。你無法直接呼叫 AWS STS 來取得持有人權杖。當您在其他服務中執行某些操作時，服務會代表您請求持有人權杖。</p>
               <p>您可以使用此條件索引鍵來允許主體取得持有人權杖，以與特定服務搭配使用。</p>
            </dd>
         
            <dt><b><span class="term"><a id="ck_durationseconds"></a>sts:DurationSeconds</span></b></dt>
            <dd>
               <p>適用於<a href="./reference_policies_elements_condition_operators.html#Conditions_Numeric">數字運算子</a>。</p>
               <p>使用此索引鍵來指定主體在取得 AWS STS 持有人權杖時可以使用的持續時間 (以秒為單位)。</p>
               <p>某些 AWS 服務要求您具有取得 AWS STS 服務持有人權杖的許可，才能以程式設計方式存取其資源。例如，AWS CodeArtifact 需要主體使用持有人權杖來執行某些操作。<code class="code">aws codeartifact get-authorization-token</code> 命令會傳回一個持有人權杖。然後，您可以使用持有人權杖來執行 AWS CodeArtifact 操作。如需有關持有人權杖的詳細資訊，請參閱<a href="./id_credentials_bearer.html">使用持有人權杖</a>。</p>
               <p><b>可用性</b> – 此索引鍵會呈現在取得持有人權杖的請求中。你無法直接呼叫 AWS STS 來取得持有人權杖。當您在其他服務中執行某些操作時，服務會代表您請求持有人權杖。AWS STS assume-role 操作不會呈現索引鍵。</p>
               
            </dd>
         
            <dt><b><span class="term"><a id="ck_externalid"></a>sts:ExternalId</span></b></dt>
            <dd>
               <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
               <p>使用此索引鍵來請求主體在擔任 IAM 角色時提供特定的識別碼。</p>
               <p><b>可用性</b> – 當主體使用 AWS CLI 或 AWS API 擔任角色時，若提供外部 ID，則此索引鍵會呈現在請求中。</p>
               <p>當您在其他帳戶擔任角色時，可能需要此唯一識別符。若帳戶管理員 (該角色所屬的帳戶) 提供給您外部 ID，請將該數值填入 <code class="code">ExternalId</code> ​參數。該值可為任何字串，例如密碼短語或帳號。外部 ID 的主要功能是解決並防止「混淆代理人」問題。如需有關外部 ID 和混淆代理人問題的詳細資訊，請參閱 <a href="./id_roles_create_for-user_externalid.html">將 AWS 資源的存取權授予第三方時如何使用外部 ID。</a>。</p>
               <p><code class="code">ExternalId</code> 值必須最少為 2 個字元，最多為 1,224 個字元。該值必須為英數字元，且不包含空格。也可以包含下列符號：加號 (+)、等號 (=)、逗號 (,)、句號 (.)、小老鼠 (@)、冒號 (:)、正斜線 (/) 和連字號 (-)。</p>
            </dd>
         
            <dt><b><span class="term"><a id="ck_rolesessionname"></a>sts:RoleSessionName</span></b></dt>
            <dd>
               <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
               <p>使用此索引鍵，比較使用政策中指定的值擔任角色時，主體指定的工作階段名稱。</p>
               <p><b>可用性</b> – 當主體使用 AWS Management Console、任何 assume-role CLI 命令或任何 AWS STS <code class="code">AssumeRole</code> API 操作擔任角色時，此索引鍵會呈現在請求中。</p>
               <p>您可以在角色信任政策中使用此索引鍵，請求您的使用者在擔任角色時提供特定的工作階段名稱。例如，您可以請求 IAM 使用者將自己的使用者名稱指定為其工作階段名稱。在 IAM 使用者擔任角色之後，活動會出現在 <a href="./cloudtrail-integration.html#cloudtrail-integration_signin-tempcreds">AWS CloudTrail 日誌</a>中，其工作階段名稱與其使用者名稱相符。當不同的主體使用角色時，這可讓系統管理員更容易區分角色工作階段。</p>
               <p>下列角色信任政策會請求 <code class="code">111122223333</code> 帳戶中的 IAM 使用者在擔任角色時，提供其 IAM 使用者名稱作為工作階段名稱。使用條件索引鍵中的 <code class="code">aws:username</code> <a href="./reference_policies_variables.html">條件變數</a>強制執行此需求。此政策允許 IAM 使用者擔任政策所連接的角色。此政策不允許使用暫時憑證的任何人擔任該角色，因為 <code class="code">username</code> 變數僅供 IAM 使用者使用。</p>
               <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>重要</h6></div><div class="awsdocs-note-text"><p>您可以使用任何單一值條件金鑰作為<a href="./reference_policies_variables.html">變數</a>。您無法使用多重值條件金鑰做為變數。</p></div></div>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "RoleTrustPolicyRequireUsernameForSessionName",
            "Effect": "Allow",
            "Action": "sts:AssumeRole",
            "Principal": <span>{</span>"AWS": "arn:aws:iam::111122223333:root"},
            "Condition": <span>{</span>
                "StringLike": <span>{</span>"sts:RoleSessionName": "$<span>{</span>aws:username}"}
            }
        }
    ]
}</code></pre>
               <p>當系統管理員檢視動作的 AWS CloudTrail 日誌時，他們可以比較工作階段名稱與帳戶中的使用者名稱。在下列範例中，名為 <code class="code">matjac</code> 的使用者使用名為 <code class="code">MateoRole</code> 的角色執行作業。然後，管理員可以聯絡 Mateo Jackson，他擁有名為 <code class="code">matjac</code> 的使用者。</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">    "assumedRoleUser": <span>{</span>
        "assumedRoleId": "AROACQRSTUVWRAOEXAMPLE:<code class="replaceable">matjac</code>",
        "arn": "arn:aws:sts::111122223333:assumed-role/<code class="replaceable">MateoRole</code>/<code class="replaceable">matjac</code>"
    }</code></pre>
               <p>如果您允許<a href="./id_roles_common-scenarios_aws-accounts.html">使用角色進行跨帳戶存取</a>，則某個帳戶中的使用者可以在另一個帳戶中擔任角色。CloudTrail 中列出的假設角色使用者 ARN 包含<em>角色存在</em>的帳號。它不包括擔任角色的使用者帳戶。使用者僅在帳戶中是唯一的。因此，建議您只使用這個方法來檢查所管理帳戶中使用者假設之角色的 CloudTrail 日誌。您的使用者可能會在多個帳戶中使用相同的使用者名稱。</p>
            </dd>
         
            <dt><b><span class="term"><a id="ck_sourceidentity"></a>sts:SourceIdentity</span></b></dt>
            <dd>
               <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
               <p>使用此索引鍵，比較使用政策中指定的值擔任角色時，主體指定的來源身分。</p>
               <p><b>可用性</b> –當主體在使用任何 AWS STS 擔任角色 CLI 命令或 AWS STS <code class="code">AssumeRole</code> API 操作承擔角色時提供來源身分時，請求中即會出現此索引鍵。</p>
               <p>您可以在角色信任政策中使用此索引鍵，請求您的使用者在擔任角色時設定特定的來源身分。例如，您可以要求人力或聯合身分來指定來源身分的值。您可以將身分提供者 (IdP) 設定為使用與使用者相關聯的其中一個屬性，例如使用者名稱或電子郵件作為來源身分。IdP 接著會將來源身分作為其傳遞給 AWS 之聲明或宣告中的屬性。來源身分屬性的值可識別擔任該角色的使用者或應用程式。</p>
               <p>在使用者擔任該角色之後，活動會出現在具有已設定來源身分值的 <a href="./cloudtrail-integration.html#cloudtrail-integration_signin-tempcreds">AWS CloudTrail 日誌</a>中。這可讓系統管理員更容易判斷何者在 AWS 中執行具有角色的動作。您必須對 <code class="code">sts:SetSourceIdentity</code> 動作授予許可，允許身分以設定來源身分。</p>
               <p>與 <a href="#ck_rolesessionname">sts:RoleSessionName</a> 不同，在設定來源身分之後，就無法變更值。這會出現在由角色以來源身分所採取的所有動作的請求內容中。當您使用工作階段憑證來擔任另一個角色時，此值仍然存在於後續角色工作階段。從另一個角色取得及擔任角色稱為<a href="./id_roles_terms-and-concepts.html#iam-term-role-chaining">角色鏈結</a>。</p>
               <p>您可以使用 <a href="./reference_policies_condition-keys.html#condition-keys-sourceidentity">aws:SourceIdentity</a> 全域條件索引鍵，在後續請求中根據來源身分值進一步控制 AWS 資源的存取。</p>
               <p>下列角色信任政策允許 IAM 使用者 <code class="code">AdminUser</code> 擔任帳戶 <code class="code">111122223333</code> 中的角色。它也會對 <code class="code">AdminUser</code> 許可授予來設定來源身分，只要來源身分識別設定為 <code class="code">DiegoRamirez</code>。</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="複製"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "AllowAdminUserAssumeRole",
            "Effect": "Allow",
            "Principal": <span>{</span>"AWS": " arn:aws:iam::111122223333:user/AdminUser"},
            "Action": [
                "sts:AssumeRole",
                "sts:SetSourceIdentity"
            ],
            "Condition": <span>{</span>
                "StringEquals": <span>{</span>"sts:SourceIdentity": "DiegoRamirez"}
            }
        }
    ]
}
</code></pre>
               <p>若要進一步了解有關使用來源身分的詳細資訊，請參閱 <a href="./id_credentials_temp_control-access_monitor.html">監控並控制使用擔任角色所採取的動作</a>。</p>
            </dd>
         
            <dt><b><span class="term"><a id="ck_transitivetagkeys"></a>sts:TransitiveTagKeys</span></b></dt>
            <dd>
               <p>使用<a href="./reference_policies_elements_condition_operators.html#Conditions_String">字串運算子</a>。</p>
               <p>使用此金鑰來將請求中的可轉移工作階段標籤鍵與政策中指定的內容進行比較。</p>
               <p><b>可用性</b> – 當您使用臨時安全憑證提出請求時，此索引鍵會呈現在請求中。這些包括使用任何 assume-role 操作或 <code class="code">GetFederationToken</code> 操作所建立的憑證。</p>
               <p>當您使用暫時安全憑證提出請求時，<a href="./reference_policies_elements_condition.html#AccessPolicyLanguage_RequestContext">請求內容</a>會包含 <code class="code"><a href="./reference_policies_condition-keys.html#condition-keys-principaltag">aws:PrincipalTag</a></code> 內容金鑰。此金鑰包含<a href="./id_session-tags.html">工作階段標籤</a>的清單、<a href="./id_session-tags.html#id_session-tags_role-chaining">可轉移工作階段標籤</a>和角色標籤。可轉移工作階段標籤是在您使用工作階段憑證擔任另一個角色時，保存到所有後續工作階段的標籤。從另一個角色取得及擔任角色稱為<a href="./id_roles_terms-and-concepts.html#iam-term-role-chaining">角色鏈結</a>。</p>
               <p>您可以在政策中使用此條件索引鍵，要求在擔任角色或與使用者聯合身分時將特定工作階段標籤設為可轉移。</p>
            </dd>
         </dl></div>
   <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="警告" /> <strong>您的瀏覽器已停用或無法使用 Javascript。</strong></p><p>您必須啟用 Javascript，才能使用 AWS 文件。請參閱您的瀏覽器說明頁以取得說明。</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">文件慣用形式</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./reference_policies_condition-keys.html">全域條件金鑰</div><div id="next" class="next-link" accesskey="n" href="./reference_policies_actions-resources-contextkeys.html">動作、資源及條件金鑰</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">此頁面是否有幫助？ - 是</div><div class="content"><p>感謝您，讓我們知道我們做得很好！</p><p>若您有空，歡迎您告知我們值得讚許的地方，這樣才能保持良好服務。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="意見回饋" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">此頁面是否有幫助？ - 否</div><div class="content"><p>感謝讓我們知道此頁面仍須改善。很抱歉，讓您失望。</p><p>若您有空，歡迎您提供改善文件的方式。</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="意見回饋" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>