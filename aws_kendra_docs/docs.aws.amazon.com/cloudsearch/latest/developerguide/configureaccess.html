<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Configuring Access for Amazon CloudSearch - Amazon CloudSearch</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="configuring-access" /><meta name="default_state" content="configuring-access" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/cloudsearch/latest/developerguide/configuring-access.html" /><meta name="description" content="Authorize access to Amazon CloudSearch." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon CloudSearch" /><meta name="guide" content="Developer Guide" /><meta name="abstract" content="Set up, manage, and scale a search solution for your website with the Amazon CloudSearch web service." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/cloudsearch/latest/developerguide/configuring-access.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/cloudsearch/latest/developerguide/configuring-access.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/cloudsearch/latest/developerguide/configuring-access.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/cloudsearch/latest/developerguide/configuring-access.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/cloudsearch/latest/developerguide/configuring-access.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/cloudsearch/latest/developerguide/configuring-access.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/cloudsearch/latest/developerguide/configuring-access.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/cloudsearch/latest/developerguide/configuring-access.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/cloudsearch/latest/developerguide/configuring-access.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/cloudsearch/latest/developerguide/configuring-access.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/cloudsearch/latest/developerguide/configuring-access.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/cloudsearch/latest/developerguide/configuring-access.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/cloudsearch/latest/developerguide/configuring-access.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/cloudsearch/latest/developerguide/configuring-access.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/cloudsearch/latest/developerguide/configuring-access.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/cloudsearch/latest/developerguide/configuring-access.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/cloudsearch/latest/developerguide/configuring-access.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/cloudsearch/latest/developerguide/configuring-access.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/cloudsearch/latest/developerguide/configuring-access.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/cloudsearch/latest/developerguide/configuring-access.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/cloudsearch/latest/developerguide/configuring-access.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/cloudsearch/latest/developerguide/configuring-access.html" hreflang="x-default" /><meta name="feedback-item" content="CloudSearch" /><meta name="this_doc_product" content="Amazon CloudSearch" /><meta name="this_doc_guide" content="Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudsearch'}"></script><meta id="panorama-serviceSubSection" value="Developer Guide" /><meta id="panorama-serviceConsolePage" value="Configuring Access for Amazon CloudSearch" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Configuring Access for Amazon CloudSearch - Amazon CloudSearch</title><meta name="pdf" content="/pdfs/cloudsearch/latest/developerguide/cloudsearch-dg.pdf#configuring-access" /><meta name="github" content="https://github.com/awsdocs/amazon-cloudsearch-developer-guide/tree/master/doc_source/configuring-access.md" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=137" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudSearch&amp;topic_url=http://docs.aws.amazon.com/en_us/cloudsearch/latest/developerguide/configuring-access.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/cloudsearch/latest/developerguide/configuring-access.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/cloudsearch/latest/developerguide/configuring-access.html" /><meta name="keywords" content="Amazon CloudSearch,CloudSearch,domain,search domain,facet,index" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Cloud Search",
        "item" : "https://docs.aws.amazon.com/cloudsearch/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide",
        "item" : "https://docs.aws.amazon.com/cloudsearch/latest/developerguide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Creating and Managing Amazon CloudSearch Domains",
        "item" : "https://docs.aws.amazon.com/cloudsearch/latest/developerguide/creating-managing-domains.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Configuring Access for Amazon CloudSearch",
        "item" : "https://docs.aws.amazon.com/cloudsearch/latest/developerguide/creating-managing-domains.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/cloudsearch/latest/developerguide/cloudsearch-dg.pdf#configuring-access" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a href="https://github.com/awsdocs/amazon-cloudsearch-developer-guide/tree/master/doc_source/configuring-access.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/cloudsearch/index.html">Amazon Cloud Search</a><a href="what-is-cloudsearch.html">Developer Guide</a></div><div id="page-toc-src"><a href="#cloudsearch-access-policies">Writing Access Policies for
            Amazon CloudSearch</a><a href="#policy-examples">Amazon CloudSearch Policy Examples</a><a href="#configuring-access-console">Configuring Access for Amazon CloudSearch Using the
            Console</a><a href="#configuring-access-clt">Configuring Access for Amazon CloudSearch with the
            AWS CLI</a><a href="#configuring-access-sdk">Configuring Access to a Domain's Endpoints
            Using the AWS SDKs</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="configuring-access">Configuring Access for Amazon CloudSearch</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>You use AWS Identity and Access Management (IAM) access policies to control access to the Amazon CloudSearch configuration
        service and each search domain's document, search, and suggest services. An IAM access
        policy is a JSON document that explicitly lists permissions that define what actions people
        or processes are allowed to perform. For an introduction to IAM access policies, see
            <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/PoliciesOverview.html">Overview of AWS IAM Policies</a>. </p><p>You control access to the Amazon CloudSearch configuration service APIs and the domain services APIs
        independently. For example, you might choose to restrict who can modify the configuration of
        your production domain, but allow team members to create and manage their own domains for
        development and testing. Similarly, you might configure your development and test domains to
        accept anonymous requests to the upload, search, and suggest services, but lock down your
        production domain so that it accepts only authenticated requests from your application. </p><p>When AWS receives a request, it authenticates that the request is from a known AWS user,
        and then checks relevant policies to determine whether the user is authorized to perform the
        requested actions using the requested resources. If a user has not been explicitly granted
        permission to perform an action, the request is denied. During policy evaluation, if AWS
        encounters an explicit deny, the deny effect takes precedence over any explicit allow
        effects that are in force.</p><div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>To enable authentication, Amazon CloudSearch requests must be signed with an access key. The only
            exception is if you allow anonymous access to a domain's upload, search, or suggest
            services. For more information, see <a href="./what-is-cloudsearch.html#signing-requests">Signing Requests</a>. </p></div></div><div class="highlights" id="inline-topiclist"><h6>Topics</h6><ul><li><a href="#cloudsearch-access-policies">Writing Access Policies for Amazon CloudSearch</a></li><li><a href="#policy-examples">Amazon CloudSearch Policy Examples</a></li><li><a href="#configuring-access-console">Configuring Access for Amazon CloudSearch Using the AWS Management Console</a></li><li><a href="#configuring-access-clt">Configuring Access for Amazon CloudSearch with the AWS CLI</a></li><li><a href="#configuring-access-sdk">Configuring Access to a Domain's Endpoints Using the AWS SDKs</a></li></ul></div><h2 id="cloudsearch-access-policies">Writing Access Policies for Amazon CloudSearch</h2>
        
        
        <p>Amazon CloudSearch supports both <em>user-based policies</em> and
                <em>resource-based policies</em>:</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><strong>User-based policies</strong> are attached to a
                    particular IAM role, group, or user. A user-based policy specifies which of your
                    account's search domains a person or process can access and what actions they
                    can perform. To attach a user-based policy to a user, group, or role, you use
                    the IAM console, AWS CLI, or AWS SDKs. <b>You must define
                        user-based policies to control access to the Amazon CloudSearch configuration service
                        actions.</b> (The <em>user</em> in this context isn't
                    necessarily a person, it's just an identity with associated permissions. For
                    example, you might create a user to represent an application that needs to have
                    credentials to submit search requests to your domain.)</p>
            </li><li class="listitem">
                <p><strong>Resource-based policies</strong> for Amazon CloudSearch are
                    attached to a particular search domain. A resource-based policy specifies who
                    has access to the search domain and which domain services they can use.
                    Resource-based policies control access only to a particular domain's document,
                    search, and suggest services; they cannot be used to configure access to the
                    Amazon CloudSearch configuration service actions. To attach a resource-based policy to a
                    domain, you use the Amazon CloudSearch console, AWS CLI or AWS SDKs. </p>
            </li></ul></div>
        <p>In general, we recommend managing access to Amazon CloudSearch APIs by configuring user-based
            policies. This enables you to manage all of your permissions in one place and any
            changes you need to make take effect almost immediately. However, to allow public access
            to a domain's search service or restrict access based on IP addresses, you must
            configure a resource-based policy for the domain. (We recommend replacing your old IP
            based access policies with user-based policies at your earliest convenience.) You can
            also use resource-based policies to easily allow other accounts to access a domain. Keep
            in mind that processing changes to a domain's resource-based policies takes
            significantly longer than applying changes to user-based policies.</p>

        <p>The IAM console can help you write both user-based and resource-based policies for
            Amazon CloudSearch. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/ManagingPolicies.html">Managing IAM Policies</a>.</p>

        <h3 id="access-policy-contents">Contents of an Access Policy for Amazon CloudSearch</h3>
            
            
            <p>You specify the following information in your access policies for Amazon CloudSearch:</p>
            <div class="itemizedlist">
                 
                 
                 
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><code class="code">Version</code> specifies the policy language version that the
                        statement is compatible with. The version is always set to
                            <code class="code">2012-10-17</code>.</p>
                </li><li class="listitem">
                    <p><code class="code">Resource</code> is the ARN (Amazon Resource Name) for the domain to
                        which a user-based policy applies. <code class="code">Resource</code> is not specified in
                        resource-based policies configured through the Amazon CloudSearch configuration service,
                        because the policy is attached directly to the resource. For more
                        information about Amazon CloudSearch ARNs, see <a href="#cloudsearch-arns">Amazon CloudSearch ARNs</a>.</p>
                </li><li class="listitem">
                    <p><code class="code">Effect</code> specifies whether the statement authorizes or blocks
                        access to the specified action(s). It must be <code class="code">Allow</code> or
                            <code class="code">Deny</code></p>
                </li><li class="listitem">
                    <p><code class="code">Sid</code> is an optional string that you can use to provide a
                        descriptive name for the policy statement.</p>
                </li><li class="listitem">
                    <p><code class="code">Action</code> specifies which Amazon CloudSearch actions the statement applies to.
                        For the supported actions, see <a href="#cloudsearch-actions">Amazon CloudSearch Actions</a>. You can use a wildcard (*) as the
                        action to configure access for all actions when you need to grant
                        administrative access to select users. (In this case, you might also want to
                        enable multi-factor authorization for additional security. For more
                        information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/Using_ManagingMFA.html">Configuring MFA-Protected API Access</a>.) Wildcards are also
                        supported within action names. For example,
                            <code class="code">"Action":["cloudsearch:Describe*]</code> matches all of the
                        configuration service <code class="code">Describe</code> actions, such as
                            <code class="code">DescribeDomains</code> and
                            <code class="code">DescribeServiceAccessPolicies</code>.</p>
                </li><li class="listitem">
                    <p><code class="code">Condition</code> specifies conditions for when the policy is in
                        effect. When configuring anonymous, IP-based access, you would specify the
                        IP addresses that the access rule applies to, for example <code class="code">"IpAddress":
                            <span>{</span>"aws:SourceIp": ["192.0.2.0/32"]}</code>.</p>
                </li><li class="listitem">
                    <p><code class="code">Principal</code> specifies who is allowed access to the domain in a
                        resource-based policy. <code class="code">Principal</code> is not specified in user-based
                        policies configured through IAM. The <code class="code">Principal</code> value for a
                        resource-based policy can specify other AWS accounts or users in your own
                        account. For example, to grant access to the account
                        555555555555, you would specify
                            <code class="code">"Principal":<span>{</span>"AWS":["arn:aws:iam::555555555555:root"]}</code>.
                        Specifying a wildcard (*) enables anonymous access to the domain. Anonymous
                        access is not recommended. If you enable anonymous access, you should at
                        least specify a condition to restrict which IP addresses can submit requests
                        to the domain. For more information, see <a href="#ip-based-policy">Granting Access to a Domain from Selected IP
                Addresses</a>.</p>
                </li></ul></div>

            <p>For examples of access policies for Amazon CloudSearch, see <a href="#policy-examples">Amazon CloudSearch Policy Examples</a>.</p>

            

            <h4 id="cloudsearch-arns">Amazon CloudSearch ARNs</h4>
                
                
                <p>A policy's Amazon Resource Name (ARN) uniquely specifies the domain that the
                    policy applies to. The ARN is a standard format that AWS uses to identify
                    resources. The 12-digit number in the ARN is your AWS account ID. Amazon CloudSearch ARNs are
                    of the form
                            <code class="code">arn:aws:cloudsearch:<code class="userinput">REGION</code>:<code class="userinput">ACCOUNT-ID</code>:domain/<code class="userinput">DOMAIN-NAME</code></code>. </p>
                <p>The following list describes the variable elements in the ARN:</p>
                <div class="itemizedlist">
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p><code class="code">REGION</code> is the AWS region where the Amazon CloudSearch domain for which
                            you are configuring permissions resides. You can use a wildcard (*) for
                            the <code class="code">REGION</code> for all regions. </p>
                    </li><li class="listitem">
                        <p><code class="code">ACCOUNT-ID</code> is your AWS account ID with no hyphens; for
                            example, 111122223333. </p>
                    </li><li class="listitem">
                        <p><code class="code">DOMAIN-NAME</code> identifies a specific search domain. You can
                            use a wildcard (*) for the <code class="code">DOMAIN-NAME</code> for all of your
                            account's domains in the specified region. If you have multiple domains
                            whose names start with the same prefix, you can use a wildcard to match
                            all of those domains. For example, <code class="code">dev-*</code> matches
                                <code class="code">dev-test</code>, <code class="code">dev-movies</code>,
                                <code class="code">dev-sandbox</code>, and so on. Note that if you name new
                            domains with the same prefix, the policy also applies to those new
                            domains.</p>
                    </li></ul></div>
                <p>For example, the following ARN identifies the <code class="code">movies</code> domain in
                    the <code class="code">us-east-1</code> region owned by account
                    111122223333:</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">arn:aws:cloudsearch:us-east-1:111122223333:domain/movies</code></pre>

                <p>The following example shows how the ARN is used to specify the resource in a
                    user-based policy.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
  "Version":"2012-10-17",           
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Action": ["cloudsearch:search"],
      "Resource": "arn:aws:cloudsearch:us-east-1:<code class="userinput">111122223333</code>:domain/movies"
    }
  ]
}</code></pre>

                <p>A domain's ARN is displayed on the domain dashboard in the Amazon CloudSearch console and is
                    also available by calling <code class="code">DescribeDomains</code>.</p> 
<div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>When specifying an ARN for a domain created with the 2011-02-01 API, you must use the former Amazon CloudSearch service name, <code class="code">cs</code>. For example, <code class="code">arn:aws:cs:us-east-1:111122223333:domain/movies</code>. If you need to define
            policies that configure access for both 2011 and 2013 domains, make sure to specify the correct ARN format for each domain.
             For more information, see <a href="./troubleshooting.html#troubleshooting-configuration-access-policies">Configuration Service Access Policies Not Working</a>.</p></div></div>
  
            <h4 id="cloudsearch-actions">Amazon CloudSearch Actions</h4>
                
                
                <p>The actions you specify control which Amazon CloudSearch APIs the statement applies to. All
                    Amazon CloudSearch actions are prefixed with <code class="code">cloudsearch:</code>, such as
                        <code class="code">cloudsearch:search</code>. The following list shows the supported
                    actions: </p>
                <div class="itemizedlist">
                     
                     
                     
                     

                <ul class="itemizedlist"><li class="listitem">
                        <p><code class="code">cloudsearch:document</code> allows access to the document
                            service API. Permission to use the <code class="code">document</code> action is
                            required to upload documents to a search domain for indexing.</p>
                    </li><li class="listitem">
                        <p><code class="code">cloudsearch:search</code> allows access to the search API.
                            Permission to use the <code class="code">search</code> action is required to submit
                            search requests to a domain.</p>
                    </li><li class="listitem">
                        <p><code class="code">cloudsearch:suggest</code> allows access to the suggest API.
                            Permission to use the <code class="code">suggest</code> action is required to get
                            suggestions from a domain.</p>
                    </li><li class="listitem">
                        <p><code class="code">cloudsearch:<code class="userinput">CONFIGURATION-ACTION</code></code>
                            allows access to the specified configuration service action. Permission
                            to use the <code class="code">DescribeDomains</code> and <code class="code">ListDomainNames</code>
                            configuration actions is required to access the Amazon CloudSearch console.
                            Configuration actions can be specified only in user-based policies. For
                            the complete list of actions, see <a href="./API_Operations.html">Actions</a>. </p>
                    </li></ul></div>

             
         
    <h2 id="policy-examples">Amazon CloudSearch Policy Examples</h2>
        
        
        <p>This section presents a few examples of Amazon CloudSearch access policies. </p>
        <div class="highlights" id="inline-topiclist"><h6>Topics</h6><ul><li><a href="#read-only-configuration-policy">Granting Read-only Access to the Amazon CloudSearch Configuration Service</a></li><li><a href="#full-configuration-policy">Granting Access to All Amazon CloudSearch Configuration Service Actions</a></li><li><a href="#universal-policy">Granting Unrestricted Access to All Amazon CloudSearch Services</a></li><li><a href="#document-upload-policy">Granting Permission to Upload Documents to an Amazon CloudSearch Domain</a></li><li><a href="#cross-account-policy">Granting Amazon CloudSearch Access to Another AWS Account </a></li><li><a href="#ip-based-policy">Granting Access to an Amazon CloudSearch Domain from Selected IP Addresses</a></li><li><a href="#public-access-policy">Granting Public Access to an Amazon CloudSearch Domain's Search Service</a></li></ul></div>

        <h3 id="read-only-configuration-policy">Granting Read-only Access to the Amazon CloudSearch Configuration Service</h3>
            
            
            <p>You can grant read-only access to the configuration service by allowing only the
                following actions. This might be useful if you want to allow users to view the
                configuration of a production domain without being able to make changes.</p>
            <div class="itemizedlist">
                 
                 
                 
                 
                 
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><code class="code">cloudsearch:DescribeAnalysisSchemes</code></p>
                </li><li class="listitem">
                    <p><code class="code">cloudsearch:DescribeAvailabilityOptions</code></p>
                </li><li class="listitem">
                    <p><code class="code">cloudsearch:DescribeDomains</code></p>
                </li><li class="listitem">
                    <p><code class="code">cloudsearch:DescribeExpressions</code></p>
                </li><li class="listitem">
                    <p><code class="code">cloudsearch:DescribeIndexFields</code></p>
                </li><li class="listitem">
                    <p><code class="code">cloudsearch:DescribeScalingParameters</code></p>
                </li><li class="listitem">
                    <p><code class="code">cloudsearch:DescribeServiceAccessPolicies</code></p>
                </li><li class="listitem">
                    <p><code class="code">cloudsearch:DescribeSuggesters</code></p>
                </li><li class="listitem">
                    <p><code class="code">cloudsearch:ListDomainNames</code></p>
                </li></ul></div>

            <p>The following user-based policy grants read-only access to the configuration
                service for a <code class="code">movies</code> domain owned by the account
                555555555555. The policy uses wildcards for the actions, since it grants
                access to all actions that begin with <em>Describe</em> or
                    <em>List</em>. Note that this will also grant access to any describe
                or list actions that might be added to the API in the future.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
  "Version":"2012-10-17",           
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Action": ["cloudsearch:Describe*", 
                 "cloudsearch:List*"],
      "Resource": "arn:aws:cloudsearch:us-east-1:<code class="userinput">555555555555</code>:domain/movies"
    }
  ]
}</code></pre>

         

        <h3 id="full-configuration-policy">Granting Access to All Amazon CloudSearch Configuration Service Actions</h3>
            
            
            <p>You can grant access to all Amazon CloudSearch configuration service actions by including an
                    <code class="code">Allow</code> statement that grants access to all configuration service
                actions, but not the domain services actions. This enables you to grant
                administrative access without authorizing a user to upload or retrieve data from a
                domain. One way to do this is to use a wildcard to grant access to all Amazon CloudSearch actions,
                and then include a deny statement that blocks access to the domain services actions.
                The following user-based policy grants access to the configuration service for all
                domains owned by the 111122223333 account in the <code class="code">us-west-2</code>
                region. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
  "Version":"2012-10-17",           
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Action": ["cloudsearch:*"],
      "Resource": "arn:aws:cloudsearch:us-west-2:<code class="userinput">111122223333</code>:domain/*"
    },
    <span>{</span>
      "Effect": "Deny",
      "Action": ["cloudsearch:document", 
                 "cloudsearch:search", 
                 "cloudsearch:suggest"],
      "Resource": "arn:aws:cloudsearch:us-west-2:<code class="userinput">111122223333</code>:domain/*"
    }
  ]  
}</code></pre>
         

        <h3 id="universal-policy">Granting Unrestricted Access to All Amazon CloudSearch Services</h3>
            
            
            <p>You can grant unrestricted access to all Amazon CloudSearch services, including all
                configuration service actions and all domain services with a user-based policy. To
                do this, you specify wildcards for the actions, region, and domain name. The
                following policy enables the user to access all Amazon CloudSearch actions for any domain in any
                region that's owned by the 111122223333 account.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
  "Version":"2012-10-17",           
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Action": ["cloudsearch:*"],
      "Resource": "arn:aws:cloudsearch:*:<code class="userinput">111122223333</code>:domain/*"
    }
  ]
}</code></pre>


         
        <h3 id="document-upload-policy">Granting Permission to Upload Documents to an Amazon CloudSearch Domain</h3>
            
            
            <p>You can grant a user permission to upload documents to a search domain by
                specifying the <code class="code">cloudsearch:document</code> action. For example, the following
                user-based policy enables the user to upload documents to the <code class="code">movies</code>
                domain in <code class="code">us-east-1</code> owned by the 111122223333 account. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
  "Version":"2012-10-17",           
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Action": ["cloudsearch:document"],
      "Resource": "arn:aws:cloudsearch:us-east-1:<code class="userinput">111122223333</code>:domain/movies"
    }
  ]
}</code></pre>


         
        <h3 id="cross-account-policy">Granting Amazon CloudSearch Access to Another AWS Account </h3>
            
            
            <p>You have two options to configure cross-account access for a CloudSearch
                domain:</p>
            <div class="table-container"><div class="table-contents"><table id="w469aac11b9c15c14b4"><thead>
                        <tr>
                            <th>Option</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                        <tr>
                            <td>Configure an IAM role for cross-account access.</td>
                            <td>Increased security, but requires complex request signing. For
                                more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/cross-acct-access.html">Cross-Account API
                                    Access Using IAM Roles</a> in the IAM documentation.</td>
                        </tr>
                        <tr>
                            <td>Attach a resource-based policy to the CloudSearch domain and
                                attach a user-based managed policy to an IAM role.</td>
                            <td>Easier to implement. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-user.html">Creating a
                                    Role to Delegate Permissions to an IAM User</a> and <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/walkthru_cross-account-with-roles.html">Walkthrough: Delegating Access Across AWS Accounts For Accounts
                                    You Own Using IAM Roles</a> in the IAM
                                documentation.</td>
                        </tr>
                    </table></div></div>
            <p>This topic provides an example of the second option, adding a resource-based
                policy to the CloudSearch domain. Assume that account #1 is owned by account id
                    <code class="code">111111111111</code> and account #2 is owned by account id
                    <code class="code">999999999999</code>. Account #1 wants to grant access to account #2 to use
                the search service for the <code class="code">movies</code> domain, which requires two
                steps:</p>
            <div class="orderedlist">
                 
                 
            <ol><li>
                    <p>Account #1 attaches a resource-based policy to the domain using the Amazon CloudSearch
                        console that grants access to account #2.</p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
  "Version":"2012-10-17",
  "Statement":[
    <span>{</span>
      "Sid":"search_only",
      "Effect":"Allow",
      "Action":["cloudsearch:search"],
      "Principal":<span>{</span>"AWS":["arn:aws:iam::999999999999:root"]}
    }
  ]
}</code></pre>
                </li><li>
                    <p>Account #2 attaches a user-based managed policy to an IAM role owned by
                        that account using the IAM console.</p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
  "Version":"2012-10-17",           
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Action": ["cloudsearch:search"],
      "Resource": "arn:aws:cloudsearch:us-east-1:111111111111:domain/movies"
    }
  ]
}</code></pre>
                </li></ol></div>
            <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>To configure resource-based policies for Amazon CloudSearch, you must have
                    permission to use the <code class="code">cloudsearch:UpdateServiceAccessPolicies</code>
                    action.</p></div></div>
         


        <h3 id="ip-based-policy">Granting Access to an Amazon CloudSearch Domain from Selected IP Addresses</h3>
            
            

            <p> Resource-based access policies set through the Amazon CloudSearch configuration service support
                anonymous access, which enables you to submit unsigned requests to a search domain's
                services. To allow anonymous access from selected IP addresses, use a wildcard for
                the <code class="code">Principal</code> value and specify the allowed IP addresses as a
                    <code class="code">Condition</code> element in the policy.</p>

            <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>Allowing anonymous access from selected IP addresses is inherently less secure
                    than requiring user credentials to access your search domains. We recommend
                    against allowing anonymous access even if it is permitted only from select IP
                    addresses. If you currently allow anonymous access, you should upgrade your
                    applications to submit signed requests and control access by configuring
                    user-based or resource-based policies.</p></div></div>

            <p>If you are creating a resource-based policy that grants access to requests coming
                from an Amazon EC2 instance, you need to specify the instance's public IP address. </p>
            <p>IP addresses are specified in the standard Classless Inter-Domain Routing (CIDR)
                format. For example 10.24.34.0/24 specifies the range 10.24.34.0 - 10.24.34.255,
                while 10.24.34.0/32 specifies the single IP address 10.24.34.0. For more information
                about CIDR notation, see <a href="http://www.rfc-editor.org/rfc/rfc4632.txt" rel="noopener noreferrer" target="_blank"><span>RFC
                    4632</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. </p>

            <p>For example, the following policy grants access to the search action for the
                    <code class="code">movies</code> domain owned by AWS account 111122223333 from the
                IP address 192.0.2.0/32.</p>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
  "Version":"2012-10-17",
  "Statement":[
    <span>{</span>
      "Sid":"search_only",
      "Effect":"Allow",
      "Principal":"*",
      "Action":["cloudsearch:search"],
      "Condition":<span>{</span>"IpAddress":<span>{</span>"aws:SourceIp":"192.0.2.0/32"}}
    }
  ]
}</code></pre>

         
        <h3 id="public-access-policy">Granting Public Access to an Amazon CloudSearch Domain's Search Service</h3>
            
            

            <p> If you need to allow public access to your domain's search endpoint, you can
                configure a resource-based policy with no conditions. This enables unsigned requests
                to be sent from any IP address. </p>

            <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>Allowing public access to a search domain means you have no control over the
                    volume of requests submitted to the domain. Malicious users could flood the
                    domain with requests, impacting legitimate users as well as your operating
                    costs.</p></div></div>

            <p>For example, the following policy grants public access to the search action for
                the <code class="code">movies</code> domain owned by AWS account 111122223333.</p>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
  "Version":"2012-10-17",
  "Statement":[
    <span>{</span>
      "Sid":"public_search",
      "Effect":"Allow",
      "Principal":"*",
      "Action":["cloudsearch:search"]
    }
  ]
}</code></pre>

         
    <h2 id="configuring-access-console">Configuring Access for Amazon CloudSearch Using the AWS Management Console</h2>
        
        
        <div class="procedure"><h6>To configure user-based policies</h6><ol><li><p>Sign in to the AWS Management Console and open the IAM console at <a href="https://console.aws.amazon.com/iam/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/iam/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></li><li>
                <p>Configure Amazon CloudSearch permissions by attaching a policy to a user, group, or role.
                    For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/ManagingPolicies.html#AddingPermissions_Console">Managing
                        Policies (AWS Management Console)</a>. For more information about
                    user-based policies for Amazon CloudSearch see <a href="#cloudsearch-access-policies">Writing Access Policies for
            Amazon CloudSearch</a>.</p>
            </li></ol></div>
        <div class="procedure"><h6>To configure resource-based policies</h6><ol><li>
                <p>Sign in to the AWS Management Console and open the Amazon CloudSearch console at <a href="https://console.aws.amazon.com/cloudsearch/home" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/cloudsearch/home</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
            </li><li>
                <p>Choose the name of the domain you want to configure.</p>

            </li><li>
                <p>On the <b>Domain configuration</b> tab, choose
                        <b>Edit</b> next to <b>Access policy</b>.</p>
            </li><li>
                <p>When you're done making changes to the domain access policy, choose
                        <b>Submit</b>.</p>
            </li></ol></div>

        <p>Your domain remains in a <code class="code">Processing</code> state while Amazon CloudSearch updates the access
            policy.</p>

    <h2 id="configuring-access-clt">Configuring Access for Amazon CloudSearch with the AWS CLI</h2>
        
        
        <p>You can configure both user-based policies and resource-based policies for Amazon CloudSearch with
            the AWS CLI. 
For information about installing and setting up the AWS CLI, see the <a href="https://docs.aws.amazon.com/cli/latest/userguide/">AWS Command Line Interface User Guide</a>.
</p>
        <div class="procedure"><h6>To configure user-based policies</h6><ul><li>
                <p>Configure Amazon CloudSearch permissions by attaching a policy to a user, group, or role
                    with the <code class="code">aws put-user-policy</code>, <code class="code">aws put-group-policy</code>, or
                        <code class="code">aws put-role-policy</code> command. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/ManagingPolicies.html#AddingPermissions_Console">Managing
                        Policies (AWS Management Console)</a>. For more information about
                    user-based policies for Amazon CloudSearch see <a href="#cloudsearch-access-policies">Writing Access Policies for
            Amazon CloudSearch</a>.</p>
            </li></ul></div>
        <div class="procedure"><h6>To configure resource-based policies</h6><ul><li>
                <p>Run the <code class="code">aws cloudsearch update-service-access-policies</code> command
                    and specify an access policy with the <code class="code">--access-policies</code> option. The
                    access policy must be enclosed in quotes and all quotes within the access policy
                    must be escaped with a backslash. For more information about resource-based
                    policies for Amazon CloudSearch see <a href="#cloudsearch-access-policies">Writing Access Policies for
            Amazon CloudSearch</a>.</p>
                <p>The following example configures the <code class="code">movies</code> domain to accept
                    search requests from the IP address <code class="code">192.0.2.0</code>. </p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><strong>aws cloudsearch update-service-access-policies --domain-name movies 
--access-policies "<span>{</span>\"Version\":\"2012-10-17\",\"Statement\":[<span>{</span>
  \"Sid\":\"search_only\",
  \"Effect\":\"Allow\",
  \"Principal\": \"*\",
  \"Action\":\"cloudsearch:search\",
  \"Condition\":<span>{</span>\"IpAddress\":<span>{</span>\"aws:SourceIp\":\"192.0.2.0/32\"}}}
]}"</strong>
<span>{</span>
  "AccessPolicies": <span>{</span>
    "Status": <span>{</span>
      "PendingDeletion": false, 
      "State": "Processing", 
      "CreationDate": "2014-04-30T22:07:30Z", 
      "UpdateVersion": 9, 
      "UpdateDate": "2014-04-30T22:07:30Z"
    }, 
    "Options":  
      "<span>{</span>\"Version\":\"2012-10-17\",\"Statement\":[<span>{</span>\"Sid\":\"\",
        \"Effect\":\"Allow\",\"Principal\":\"*\",
        \"Action\":\"cloudsearch:search\",
        \"Condition\":<span>{</span>\"IpAddress\":<span>{</span>\"aws:SourceIp\":
        \"192.0.2.0/32\"}}}]}"
    }
}</code></pre>
            </li></ul></div>


        <p>Updating resource-based access policies takes some time to complete. You can check the
            state of the policy with the <code class="code">aws cloudsearch
                describe-service-access-policies</code> command. Once the policy has been applied,
            the state of the policy changes to <code class="code">Active</code>.</p>
        <p>You can retrieve your domain's policies using the <code class="code">aws cloudsearch
                describe-service-access-policies</code> command. </p>
    <h2 id="configuring-access-sdk">Configuring Access to a Domain's Endpoints Using the AWS SDKs</h2>
        
        
        <p>The AWS SDKs (except the Android and iOS SDKs) support all of the Amazon CloudSearch actions defined
            in the Amazon CloudSearch Configuration API, including <code class="code"><a href="./API_UpdateServiceAccessPolicies.html">UpdateServiceAccessPolicies</a></code>. For more information
            about installing and using the AWS SDKs, see <a href="http://aws.amazon.com/code" rel="noopener noreferrer" target="_blank"><span>AWS
                Software Development Kits</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./creating-domains.html">Creating a Search Domain</div><div id="next" class="next-link" accesskey="n" href="./configuring-scaling-options.html">Configuring Scaling Options</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudSearch&amp;topic_url=https://docs.aws.amazon.com/en_us/cloudsearch/latest/developerguide/configuring-access.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=CloudSearch&amp;topic_url=https://docs.aws.amazon.com/en_us/cloudsearch/latest/developerguide/configuring-access.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>