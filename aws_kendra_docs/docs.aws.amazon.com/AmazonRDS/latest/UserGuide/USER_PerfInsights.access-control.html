<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Configuring access policies for Performance Insights - Amazon Relational Database Service</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="USER_PerfInsights.access-control" /><meta name="default_state" content="USER_PerfInsights.access-control" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_PerfInsights.access-control.html" /><meta name="description" content="To access Performance Insights, a principal must have the appropriate permissions from AWS Identity and Access Management (IAM). You can grant access in the following ways:" /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Relational Database Service" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Amazon Web Services (AWS) documentation to help you set up, operate, and scale a relational database in the AWS Cloud using Amazon Relational Database Service (Amazon RDS). You can create DB instances that run Amazon Aurora, MariaDB, Microsoft SQL Server, MySQL, Oracle, and PostgreSQL." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_PerfInsights.access-control.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AmazonRDS/latest/UserGuide/USER_PerfInsights.access-control.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AmazonRDS/latest/UserGuide/USER_PerfInsights.access-control.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AmazonRDS/latest/UserGuide/USER_PerfInsights.access-control.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AmazonRDS/latest/UserGuide/USER_PerfInsights.access-control.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_PerfInsights.access-control.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_PerfInsights.access-control.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AmazonRDS/latest/UserGuide/USER_PerfInsights.access-control.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AmazonRDS/latest/UserGuide/USER_PerfInsights.access-control.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AmazonRDS/latest/UserGuide/USER_PerfInsights.access-control.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AmazonRDS/latest/UserGuide/USER_PerfInsights.access-control.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AmazonRDS/latest/UserGuide/USER_PerfInsights.access-control.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AmazonRDS/latest/UserGuide/USER_PerfInsights.access-control.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AmazonRDS/latest/UserGuide/USER_PerfInsights.access-control.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AmazonRDS/latest/UserGuide/USER_PerfInsights.access-control.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AmazonRDS/latest/UserGuide/USER_PerfInsights.access-control.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AmazonRDS/latest/UserGuide/USER_PerfInsights.access-control.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AmazonRDS/latest/UserGuide/USER_PerfInsights.access-control.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AmazonRDS/latest/UserGuide/USER_PerfInsights.access-control.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AmazonRDS/latest/UserGuide/USER_PerfInsights.access-control.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AmazonRDS/latest/UserGuide/USER_PerfInsights.access-control.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_PerfInsights.access-control.html" hreflang="x-default" /><meta name="feedback-item" content="RDS" /><meta name="this_doc_product" content="Amazon Relational Database Service" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'rds'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="Configuring access policies for Performance Insights" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Configuring access policies for Performance Insights - Amazon Relational Database Service</title><meta name="pdf" content="/pdfs/AmazonRDS/latest/UserGuide/rds-ug.pdf#USER_PerfInsights.access-control" /><meta name="github" content="https://github.com/awsdocs/amazon-rds-user-guide/tree/main/doc_source/USER_PerfInsights.access-control.md" /><meta name="rss" content="rdsupdates.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=60" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=RDS&amp;topic_url=http://docs.aws.amazon.com/en_us/AmazonRDS/latest/UserGuide/USER_PerfInsights.access-control.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/AmazonRDS/latest/UserGuide/USER_PerfInsights.access-control.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/AmazonRDS/latest/UserGuide/USER_PerfInsights.access-control.html" /><meta name="keywords" content="Amazon Relational Database Service,RDS,DB Instance" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon RDS",
        "item" : "https://docs.aws.amazon.com/rds/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Monitoring metrics in an Amazon RDS instance",
        "item" : "https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/CHAP_Monitoring.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Monitoring DB load with Performance Insights on Amazon RDS",
        "item" : "https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_PerfInsights.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Configuring access policies for Performance Insights",
        "item" : "https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_PerfInsights.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/AmazonRDS/latest/UserGuide/rds-ug.pdf#USER_PerfInsights.access-control" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a href="https://github.com/awsdocs/amazon-rds-user-guide/tree/main/doc_source/USER_PerfInsights.access-control.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/rds/index.html">Amazon RDS</a><a href="Welcome.html">User Guide</a></div><div id="page-toc-src"><a href="#USER_PerfInsights.access-control.managed-policy">Attaching the AmazonRDSPerformanceInsightsReadOnly
				policy to an IAM principal</a><a href="#USER_PerfInsights.access-control.custom-policy">Creating a custom IAM policy for Performance Insights</a><a href="#USER_PerfInsights.access-control.cmk-policy">Configuring an AWS KMS policy for
				Performance Insights</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="USER_PerfInsights.access-control">Configuring access policies for Performance Insights</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>To access Performance Insights, a principal must have the appropriate permissions from AWS Identity and Access Management (IAM). You can grant access in the following
		ways:</p><div class="itemizedlist">
		 
		 
	<ul class="itemizedlist"><li class="listitem">
			<p>Attach the <code class="code">AmazonRDSPerformanceInsightsReadOnly</code> managed policy to a permission set or role.</p>
		</li><li class="listitem">
			<p>Create a custom IAM policy and attach it to a permission set or role.</p>
		</li></ul></div><p>If you specified a customer managed key when you turned on Performance Insights, make sure that users in your account have the <code class="code">kms:Decrypt</code>
		and <code class="code">kms:GenerateDataKey</code> permissions on the KMS key.</p><p></p>
		<h2 id="USER_PerfInsights.access-control.managed-policy">Attaching the AmazonRDSPerformanceInsightsReadOnly
				policy to an IAM principal</h2>
		<p><code class="code">AmazonRDSPerformanceInsightsReadOnly</code> is an AWS-managed policy that grants access to all read-only
			operations of the Amazon RDS Performance Insights API. Currently, all operations in this API are read-only.</p><p>If you attach <code class="code">AmazonRDSPerformanceInsightsReadOnly</code> to a permission set or role, the recipient can use
			Performance Insights with other console features.</p>
	 
		<h2 id="USER_PerfInsights.access-control.custom-policy">Creating a custom IAM policy for Performance Insights</h2>
		<p>For users who don't have the <code class="code">AmazonRDSPerformanceInsightsReadOnly</code> policy, you can grant access to
			Performance Insights by creating or modifying a user-managed IAM policy. When you attach the policy to an IAM
			permission set or role, the recipient can use Performance Insights.</p>
		<div class="procedure"><h6>To create a custom policy</h6><ol><li><p>Open the IAM console at
         <a href="https://console.aws.amazon.com/iam/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/iam/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></li><li>
				<p>In the navigation pane, choose <b>Policies</b>.</p>
			</li><li>
				<p>Choose <b>Create policy</b>.</p>
			</li><li>
				<p>On the <b>Create Policy</b> page, choose the JSON tab.
				</p>
			</li><li>
				<p>Copy and paste the following text, replacing <code class="replaceable">us-east-1</code> with the name of your
					AWS Region and <code class="replaceable">111122223333</code> with your customer account number.</p>
				<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": "rds:DescribeDBInstances",
            "Resource": "*"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": "rds:DescribeDBClusters",
            "Resource": "*"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": "pi:DescribeDimensionKeys",
            "Resource": "arn:aws:pi:<code class="replaceable">us-east-1</code>:<code class="replaceable">111122223333</code>:metrics/rds/*"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": "pi:GetDimensionKeyDetails",
            "Resource": "arn:aws:pi:<code class="replaceable">us-east-1</code>:<code class="replaceable">111122223333</code>:metrics/rds/*"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": "pi:GetResourceMetadata",
            "Resource": "arn:aws:pi:<code class="replaceable">us-east-1</code>:<code class="replaceable">111122223333</code>:metrics/rds/*"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": "pi:GetResourceMetrics",
            "Resource": "arn:aws:pi:<code class="replaceable">us-east-1</code>:<code class="replaceable">111122223333</code>:metrics/rds/*"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": "pi:ListAvailableResourceDimensions",
            "Resource": "arn:aws:pi:<code class="replaceable">us-east-1</code>:<code class="replaceable">111122223333</code>:metrics/rds/*"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": "pi:ListAvailableResourceMetrics",
            "Resource": "arn:aws:pi:<code class="replaceable">us-east-1</code>:<code class="replaceable">111122223333</code>:metrics/rds/*"
        }
    ]
}</code></pre>
			</li><li>
				<p>Choose <b>Review policy</b>.</p>
			</li><li>
				<p>Provide a name for the policy and optionally a description, and then
					choose <b>Create policy</b>.</p>
			</li></ol></div>
		<p>You can now attach the policy to a permission set or role. The following procedure
			assumes that you already have a user available for this purpose.</p>
		<div class="procedure"><h6>To attach the policy to a user</h6><ol><li><p>Open the IAM console at
         <a href="https://console.aws.amazon.com/iam/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/iam/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></li><li>
				<p>In the navigation pane, choose <b>Users</b>.</p>
			</li><li>
				<p>Choose an existing user from the list.</p>
				<div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>To use Performance Insights, make sure that you have access to Amazon RDS in addition to the custom policy. For
						example, the <code class="code">AmazonRDSPerformanceInsightsReadOnly</code> predefined policy provides read-only
						access to Amazon RDS. For more information, see <a href="./UsingWithRDS.IAM.html#security_iam_access-manage">Managing access using policies</a>.</p></div></div>
			</li><li>
				<p>On the <b>Summary</b> page, choose <b>Add
					permissions</b>.</p>
			</li><li>
				<p>Choose <b>Attach existing policies directly</b>. For
					<b>Search</b>, type the first few characters of your
					policy name, as shown following.</p>
				<div class="mediaobject">
					 
						<img src="./images/perf_insights_attach_iam_policy.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;&#x9;Choose a Policy&#xA;&#x9;&#x9;&#x9;&#x9;&#x9;" style="max-width:100%" />
					 
					 
				</div>
			</li><li>
				<p>Choose your policy, and then choose <b>Next:
					Review</b>.</p>
			</li><li>
				<p>Choose <b>Add permissions</b>.</p>
			</li></ol></div>
	 
		<h2 id="USER_PerfInsights.access-control.cmk-policy">Configuring an AWS KMS policy for
				Performance Insights</h2>
		<p>Performance Insights uses an AWS KMS key to encrypt sensitive data. When you enable Performance Insights through
			the API or the console, you can do either of the following:</p>
		<div class="itemizedlist">
			 
			 
		<ul class="itemizedlist"><li class="listitem">
				<p>Choose the default AWS managed key.</p>
				<p>Amazon RDS uses the AWS managed key for your new DB instance. Amazon RDS creates an AWS managed key for your
					AWS account. Your AWS account has a different AWS managed key for Amazon RDS for each
					AWS Region.</p>
			</li><li class="listitem">
				<p>Choose a customer managed key.</p>
				<p>If you specify a customer managed key, users in your account that call the Performance Insights API need the
						<code class="code">kms:Decrypt</code> and <code class="code">kms:GenerateDataKey</code> permissions on the KMS key. You can
					configure these permissions through IAM policies. However, we recommend that you manage these permissions
					through your KMS key policy. For more information, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/key-policies.html"> Using key policies in AWS KMS</a>. </p>
			</li></ul></div>
		<div class="example"><div class="example-contents"><p>The following example shows how to add statements to your KMS key policy. These statements allow access to
				Performance Insights. Depending on how you use the KMS key, you might want to change some restrictions.
				Before adding statements to your policy, remove all comments.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
 "Version" : "2012-10-17",
 "Id" : "your-policy",
 "Statement" : [ <span>{</span>
    //This represents a statement that currently exists in your policy.
 }
 ....,
 //Starting here, add new statement to your policy for Performance Insights.
 //We recommend that you add one new statement for every RDS instance
<span>{</span>
    "Sid" : "Allow viewing RDS Performance Insights",
    "Effect": "Allow",
    "Principal": <span>{</span>
        "AWS": [
            //One or more principals allowed to access Performance Insights
            "arn:aws:iam::<code class="replaceable">444455556666</code>:role/<code class="replaceable">Role1</code>"
        ]
    },
    "Action": [
        "kms:Decrypt",
        "kms:GenerateDataKey"
    ],
    "Resource": "*",
    "Condition" : <span>{</span>
        "StringEquals" : <span>{</span>
            //Restrict access to only RDS APIs (including Performance Insights).
            //Replace <code class="replaceable">region</code> with your AWS Region. 
            //For example, specify us-west-2.
            "kms:ViaService" : "rds.<code class="replaceable">region</code>.amazonaws.com"
        },
        "ForAnyValue:StringEquals": <span>{</span>
            //Restrict access to only data encrypted by Performance Insights.
            "kms:EncryptionContext:aws:pi:service": "rds",
            "kms:EncryptionContext:service": "pi",
            
            //Restrict access to a specific RDS instance.
            //The value is a DbiResourceId.
           "kms:EncryptionContext:aws:rds:db-id": "<code class="replaceable">db-AAAAABBBBBCCCCDDDDDEEEEE</code>"
        }
    }
}</code></pre></div></div>
	<awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./USER_PerfInsights.EnableMySQL.html">Turning on the Performance Schema for MariaDB or
			MySQL</div><div id="next" class="next-link" accesskey="n" href="./USER_PerfInsights.UsingDashboard.html">Analyzing metrics with the Performance Insights dashboard</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=RDS&amp;topic_url=https://docs.aws.amazon.com/en_us/AmazonRDS/latest/UserGuide/USER_PerfInsights.access-control.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=RDS&amp;topic_url=https://docs.aws.amazon.com/en_us/AmazonRDS/latest/UserGuide/USER_PerfInsights.access-control.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>