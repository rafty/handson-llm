<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Getting started with an AWS IAM Identity Center (successor to AWS Single Sign-On) identity source (console) - Amazon Kendra</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="getting-started-aws-sso" /><meta name="default_state" content="getting-started-aws-sso" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/kendra/latest/dg/getting-started-aws-sso.html" /><meta name="description" content="Getting started with an IAM Identity Center identity source (Console) for Amazon Kendra." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Kendra" /><meta name="guide" content="Developer Guide" /><meta name="abstract" content="Provides a conceptual overview of Amazon Kendra. Learn about Amazon Kendra features and get started indexing your documents using the console, CLI, and API." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/kendra/latest/dg/getting-started-aws-sso.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/kendra/latest/dg/getting-started-aws-sso.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/kendra/latest/dg/getting-started-aws-sso.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/kendra/latest/dg/getting-started-aws-sso.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/kendra/latest/dg/getting-started-aws-sso.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/kendra/latest/dg/getting-started-aws-sso.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/kendra/latest/dg/getting-started-aws-sso.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/kendra/latest/dg/getting-started-aws-sso.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/kendra/latest/dg/getting-started-aws-sso.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/kendra/latest/dg/getting-started-aws-sso.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/kendra/latest/dg/getting-started-aws-sso.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/kendra/latest/dg/getting-started-aws-sso.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/kendra/latest/dg/getting-started-aws-sso.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/kendra/latest/dg/getting-started-aws-sso.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/kendra/latest/dg/getting-started-aws-sso.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/kendra/latest/dg/getting-started-aws-sso.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/kendra/latest/dg/getting-started-aws-sso.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/kendra/latest/dg/getting-started-aws-sso.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/kendra/latest/dg/getting-started-aws-sso.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/kendra/latest/dg/getting-started-aws-sso.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/kendra/latest/dg/getting-started-aws-sso.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/kendra/latest/dg/getting-started-aws-sso.html" hreflang="x-default" /><meta name="feedback-item" content="Kendra" /><meta name="this_doc_product" content="Amazon Kendra" /><meta name="this_doc_guide" content="Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'kendra'}"></script><meta id="panorama-serviceSubSection" value="Developer Guide" /><meta id="panorama-serviceConsolePage" value="Getting started with an AWS IAM Identity Center (successor to AWS Single Sign-On) identity source (console)" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Getting started with an AWS IAM Identity Center (successor to AWS Single Sign-On) identity source (console) - Amazon Kendra</title><meta name="pdf" content="/pdfs/kendra/latest/dg/kendra-dg.pdf#getting-started-aws-sso" /><meta name="github" content="https://github.com/awsdocs/amazon-kendra-developer-guide/tree/master/doc_source/getting-started-aws-sso.md" /><meta name="rss" content="amazon-kendra-release-notes.rss" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Kendra&amp;topic_url=http://docs.aws.amazon.com/en_us/kendra/latest/dg/getting-started-aws-sso.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/kendra/latest/dg/getting-started-aws-sso.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/kendra/latest/dg/getting-started-aws-sso.html" /><meta name="keywords" content="Kendra,Amazon Kendra,search,intelligent search,natural language,index,question,keyword,data source,connector,FAQ,frequently asked question" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Kendra",
        "item" : "https://docs.aws.amazon.com/kendra/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide",
        "item" : "https://docs.aws.amazon.com/kendra/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Getting started",
        "item" : "https://docs.aws.amazon.com/kendra/latest/dg/getting-started.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Getting started with an AWS IAM Identity Center (successor to AWS Single Sign-On) identity source (console)",
        "item" : "https://docs.aws.amazon.com/kendra/latest/dg/getting-started.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/kendra/latest/dg/kendra-dg.pdf#getting-started-aws-sso" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a href="https://github.com/awsdocs/amazon-kendra-developer-guide/tree/master/doc_source/getting-started-aws-sso.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/kendra/index.html">Amazon Kendra</a><a href="what-is-kendra.html">Developer Guide</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="getting-started-aws-sso">Getting started with an AWS IAM Identity Center (successor to AWS Single Sign-On) identity source
            (console)</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>An AWS IAM Identity Center (successor to AWS Single Sign-On) identity source contains information on your users and groups.
        This is useful for setting up user context filtering, where Amazon Kendra filters
        search results for different users based on the user or their group's access to
        documents.</p><p>To create an IAM Identity Center identity source, you must activate IAM Identity Center and create an organization in
        AWS Organizations. When you activate IAM Identity Center and create an organization for the first time, it
        automatically defaults to the Identity Center directory as the identity source. You can
        change to Active Directory (Amazon managed or self-managed) or an external identity provider
        as your identity source. You must follow the correct guidance for this — see <a href="https://docs.aws.amazon.com/kendra/latest/dg/changing-aws-sso-source.html">Changing your
            IAM Identity Center identity source</a>. You can have only one identity source per
        organization.</p><p>In order for your users and groups to be assigned different levels of access to documents,
        you need to include your users and groups in your Access Control List when you ingest documents into
        your index. This allows your users and groups to search for documents in Amazon Kendra in
        accordance with their level of access. When you issue a query, the user ID needs to be an
        exact match of the user name in IAM Identity Center.</p><p>You must also grant the required permissions to use IAM Identity Center with Amazon Kendra. For
        more information, see <a href="https://docs.aws.amazon.com/kendra/latest/dg/iam-roles.html#iam-roles-aws-sso">IAM roles for
            IAM Identity Center</a>.</p><div class="procedure"><h6>To set up an IAM Identity Center identity source</h6><ol><li>
            <p>Open the <a href="https://console.aws.amazon.com/singlesignon" rel="noopener noreferrer" target="_blank"><span>IAM Identity Center console</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
        </li><li>
            <p>Choose <b>Enable IAM Identity Center</b>, and then choose <b>Create AWS organization</b>.</p>
            <p>Identity Center directory is created by default, and an email is sent to you to
                verify the email address associated with the organization.</p>
        </li><li>
            <p>To add a group to your AWS organization, in the navigation pane,
                choose <b>Groups</b>.</p>
        </li><li>
            <p>On the <b>Groups page</b>, choose <b>Create group</b>
                and enter a group name and description in the dialog box. Choose
                    <b>Create</b>.</p>
        </li><li>
            <p>To add a user to your Organizations, in the navigation pane, choose
                    <b>Users</b>.</p>
        </li><li>
            <p>On the <b>Users</b> page, choose <b>Add user</b>.
                Under <b>User details</b>, specify all required fields. For
                    <b>Password</b>, choose <b>Send an email to the
                    user</b>. Choose <b>Next</b>.</p>
        </li><li>
            <p>To add a user to a group, choose <b>Groups</b> and select a
                group.</p>
        </li><li>
            <p>On the <b>Details</b> page, under <b>Group
                members</b>, choose <b>Add user</b>.</p>
        </li><li>
            <p>On the <b>Add users to group</b> page, select the user you want to
                add as a member of the group. You can select multiple users to add to a
                group.</p>
        </li><li>
            <p>To sync your list of users and groups with IAM Identity Center, change your identity source to
                Active Directory or External identity provider.</p>
            <p>Identity Center directory is the default identity source and requires you to
                manually add your users and groups using this source if you do not have your own
                list managed by a provider. To change your identity source, you must follow the
                correct guidance for this—see <a href="https://docs.aws.amazon.com/kendra/latest/dg/changing-aws-sso-source.html">Changing your IAM Identity Center identity
                    source</a>.</p>
        </li></ol></div><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>If using Active Directory or an external identity provider as your identity source,
            you must map the email addresses of your users to IAM Identity Center user names when you specify the
            System for Cross-domain Identity Management (SCIM) protocol. For more information, see
            the <a href="https://docs.aws.amazon.com/singlesignon/latest/userguide/scim-profile-saml.html">IAM Identity Center guide on SCIM for
                enabling IAM Identity Center</a>.</p></div></div><p>Once you have set up your IAM Identity Center identity source, you can activate this in the console when
        you create or edit your index. Go to <b>User access control</b> in your index
        settings and edit your settings to allow fetching user-group information from IAM Identity Center. You can
        also activate IAM Identity Center using the <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_UserGroupResolutionConfiguration.html">UserGroupResolutionConfiguration</a> object. You provide the
            <code class="code">UserGroupResolutionMode</code> as <code class="code">AWS_SSO</code> and create an IAM role that gives permission to call
        <code class="code">sso:ListDirectoryAssociations</code>, <code class="code">sso-directory:SearchUsers</code>,
            <code class="code">sso-directory:ListGroupsForUser</code>,
        <code class="code">sso-directory:DescribeGroups</code>.</p><div class="awsdocs-note awsdocs-warning"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Warning</h6></div><div class="awsdocs-note-text"><p>Amazon Kendra currently does not support using
                <code class="code">UserGroupResolutionConfiguration</code> with an AWS
            organization member account for your IAM Identity Center identity source. You must create your index
            in the management account for the organization in order to use
                <code class="code">UserGroupResolutionConfiguration</code>.</p></div></div><p>The following is an overview of how to set up a data source with
            <code class="code">UserGroupResolutionConfiguration</code> and user access control to filter search
        results on user context. This assumes you have already created an index and an IAM role for indexes. You create an index and provide the IAM role
        using the <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_CreateIndex.html">CreateIndex</a> API.</p><div class="procedure"><h6>Setting up a data source with <code class="code">UserGroupResolutionConfiguration</code> and user
            context filtering</h6><ol><li>
            <p>Create an <a href="https://docs.aws.amazon.com/kendra/latest/dg/iam-roles.html#iam-roles-aws-sso">IAM
                    role</a> that gives permission to access your IAM Identity Center identity source.</p>
        </li><li>
            <p>Configure <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_UserGroupResolutionConfiguration.html"><code class="code">UserGroupResolutionConfiguration</code></a> by setting the mode
                to <code class="code">AWS_SSO</code> and call <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_UpdateIndex.html">UpdateIndex</a> to update your
                index to use IAM Identity Center.</p>
        </li><li>
            <p>If you want to use token-based user access control to filter search results on
                user context, set <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_UpdateIndex.html#Kendra-UpdateIndex-request-UserContextPolicy">UserContextPolicy</a> to <code class="code">USER_TOKEN</code> when you call
                    <code class="code">UpdateIndex</code>. Otherwise, Amazon Kendra crawls the Access
                Control List for each of your documents for most data source connectors. You can
                also filter search results on user context in the <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_Query.html">Query</a> API by providing user and
                group information in <code class="code">UserContext</code>. You can also map users to their
                groups using <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_PutPrincipalMapping.html">PutPrincipalMapping</a>
                so that you only need to provide the user ID when you issue the query.</p>
        </li><li>
            <p>Create an <a href="https://docs.aws.amazon.com/kendra/latest/dg/iam-roles.html#iam-roles-ds">IAM
                    role</a> that gives permission to access your data source.</p>
        </li><li>
            <p><a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_DataSourceConfiguration.html">Configure</a> your
                data source. You must provide the required connection information to connect to your
                data source.</p>
        </li><li>
            <p>Create a data source using the <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_CreateDataSource.html">CreateDataSource</a> API.
                Provide the <code class="code">DataSourceConfiguration</code> object, the ID of your index, the
                    IAM role for your data source, the data source type, and give
                your data source a name. You can also update your data source.</p>
        </li></ol></div><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./getting-started-mysql.html">Getting started with MySQL (console)</div><div id="next" class="next-link" accesskey="n" href="./changing-aws-sso-source.html">Changing your IAM Identity Center identity source</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Kendra&amp;topic_url=https://docs.aws.amazon.com/en_us/kendra/latest/dg/getting-started-aws-sso.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Kendra&amp;topic_url=https://docs.aws.amazon.com/en_us/kendra/latest/dg/getting-started-aws-sso.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>