<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Amazon S3 - Amazon Kendra</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="data-source-s3" /><meta name="default_state" content="data-source-s3" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/kendra/latest/dg/data-source-s3.html" /><meta name="description" content="How to use an Amazon S3 data source connector in Amazon Kendra to index your documents." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Kendra" /><meta name="guide" content="Developer Guide" /><meta name="abstract" content="Provides a conceptual overview of Amazon Kendra. Learn about Amazon Kendra features and get started indexing your documents using the console, CLI, and API." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/kendra/latest/dg/data-source-s3.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/kendra/latest/dg/data-source-s3.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/kendra/latest/dg/data-source-s3.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/kendra/latest/dg/data-source-s3.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/kendra/latest/dg/data-source-s3.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/kendra/latest/dg/data-source-s3.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/kendra/latest/dg/data-source-s3.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/kendra/latest/dg/data-source-s3.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/kendra/latest/dg/data-source-s3.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/kendra/latest/dg/data-source-s3.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/kendra/latest/dg/data-source-s3.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/kendra/latest/dg/data-source-s3.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/kendra/latest/dg/data-source-s3.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/kendra/latest/dg/data-source-s3.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/kendra/latest/dg/data-source-s3.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/kendra/latest/dg/data-source-s3.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/kendra/latest/dg/data-source-s3.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/kendra/latest/dg/data-source-s3.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/kendra/latest/dg/data-source-s3.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/kendra/latest/dg/data-source-s3.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/kendra/latest/dg/data-source-s3.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/kendra/latest/dg/data-source-s3.html" hreflang="x-default" /><meta name="feedback-item" content="Kendra" /><meta name="this_doc_product" content="Amazon Kendra" /><meta name="this_doc_guide" content="Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'kendra'}"></script><meta id="panorama-serviceSubSection" value="Developer Guide" /><meta id="panorama-serviceConsolePage" value="Amazon S3" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Amazon S3 - Amazon Kendra</title><meta name="pdf" content="/pdfs/kendra/latest/dg/kendra-dg.pdf#data-source-s3" /><meta name="github" content="https://github.com/awsdocs/amazon-kendra-developer-guide/tree/master/doc_source/data-source-s3.md" /><meta name="rss" content="amazon-kendra-release-notes.rss" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Kendra&amp;topic_url=http://docs.aws.amazon.com/en_us/kendra/latest/dg/data-source-s3.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/kendra/latest/dg/data-source-s3.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/kendra/latest/dg/data-source-s3.html" /><meta name="keywords" content="Kendra,Amazon Kendra,search,intelligent search,natural language,index,question,keyword,data source,connector,FAQ,frequently asked question,Amazon S3" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Kendra",
        "item" : "https://docs.aws.amazon.com/kendra/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide",
        "item" : "https://docs.aws.amazon.com/kendra/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Creating a data source connector",
        "item" : "https://docs.aws.amazon.com/kendra/latest/dg/data-source.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Data source connectors",
        "item" : "https://docs.aws.amazon.com/kendra/latest/dg/data-sources.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Amazon S3",
        "item" : "https://docs.aws.amazon.com/kendra/latest/dg/data-sources.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/kendra/latest/dg/kendra-dg.pdf#data-source-s3" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a href="https://github.com/awsdocs/amazon-kendra-developer-guide/tree/master/doc_source/data-source-s3.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/kendra/index.html">Amazon Kendra</a><a href="what-is-kendra.html">Developer Guide</a></div><div id="page-toc-src"><a href="#supported-features-s3">Supported features</a><a href="#prerequisites-s3">Prerequisites</a><a href="#data-source-procedure-s3">Connection instructions</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="data-source-s3">Amazon S3</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Amazon S3 is an object storage service that stores data as objects within buckets.
        You can use Amazon Kendra to index your Amazon S3 bucket repository of
        documents.</p><div class="awsdocs-note awsdocs-warning"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Warning</h6></div><div class="awsdocs-note-text"><p>Amazon Kendra doesn't use a bucket policy that grants permissions to an Amazon Kendra principal to interact with an S3 bucket. Instead, it uses IAM roles. Make sure that Amazon Kendra isn't included as a trusted
            member in your bucket policy to avoid any data security issues in accidentally granting
            permissions to arbitrary principals. However, you can add a bucket policy to use an
                Amazon S3 bucket across different accounts. For more information, see <a href="https://docs.aws.amazon.com/kendra/latest/dg/iam-roles.html#iam-roles-ds-s3-cross-accounts">Policies to use
                    Amazon S3 across accounts</a> (within the S3 IAM
            roles tab, under <b>IAM roles for data sources</b>). For
            information about IAM roles for S3 data sources, see <a href="https://docs.aws.amazon.com/kendra/latest/dg/iam-roles.html#iam-roles-ds-s3">IAM roles</a>.</p></div></div><p>To connect to Amazon S3, you specify the connection and other information in the
        console, by using <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_S3DataSourceConfiguration.html">S3DataSourceConfiguration</a> or by using the <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_TemplateConfiguration.html">TemplateConfiguration</a>. If you use the TemplateConfiguration object, you can use
        a VPC to connect to your data source. You specify VpcConfiguration when you call
        CreateDataSource. For more information, see <a href="https://docs.aws.amazon.com/kendra/latest/dg/vpc-configuration.html">Configuring a VPC</a>.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>
            <code class="code">S3DataSourceConfiguration</code> API doesn't support configuring a VPC. Only
                <code class="code">TemplateConfiguration</code> API and the console support VPC
            configuration.</p></div></div><p>For troubleshooting your Amazon Kendra S3 data source connector, see <a href="./troubleshooting-data-sources.html">Troubleshooting data sources</a>.</p><div class="highlights"><h6>Topics</h6><ul><li><a href="#supported-features-s3">Supported features</a></li><li><a href="#prerequisites-s3">Prerequisites</a></li><li><a href="#data-source-procedure-s3">Connection instructions</a></li><li><a href="./create-ds-s3.html">Creating an Amazon S3 data source</a></li><li><a href="./s3-metadata.html">Amazon S3 document metadata</a></li><li><a href="./s3-acl.html">Access control for Amazon S3 data sources</a></li></ul></div>
        <h2 id="supported-features-s3">Supported features</h2>
        <p><b>S3Configuration API</b></p>
        <div class="itemizedlist">
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>Field mappings</p>
            </li><li class="listitem">
                <p>User context filtering</p>
            </li><li class="listitem">
                <p>Inclusion/exclusion patterns</p>
            </li></ul></div>

        <p><b>Console/TemplateConfiguration API</b></p>
        <div class="itemizedlist">
             
             
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>Field mappings</p>
            </li><li class="listitem">
                <p>User context filtering</p>
            </li><li class="listitem">
                <p>Inclusion/exclusion filters</p>
            </li><li class="listitem">
                <p>Virtual private cloud (VPC)</p>
            </li><li class="listitem">
                <p>Sync all documents/Sync only new, modified, or deleted documents</p>
            </li></ul></div>
     
        <h2 id="prerequisites-s3">Prerequisites</h2>
        <p>Before you can use Amazon Kendra to index your S3 data source,
            make these changes in your S3 and AWS accounts.</p>

        <p><b>In S3, make sure you have:</b></p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>Copied the name of your Amazon S3 bucket name.</p>
                <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Your bucket must be in the same region as your Amazon Kendra index
                        and your index must have permission to access the bucket that contains your
                        documents.</p></div></div>
            </li><li class="listitem"> 
    <p>Checked each document is unique in S3 and across other 
    data sources you plan to use for the same index. Each data source that you 
    want to use for an index must not contain the same document across the data 
    sources. Document IDs are global to an index and must be unique per index.</p>
 </li></ul></div>

        <p><b>In your AWS account, make sure you
                have:</b></p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><a href="https://docs.aws.amazon.com/kendra/latest/dg/create-index.html">Created
                        an Amazon Kendra index</a> and, if using the API, noted the index
                    ID.</p>
            </li><li class="listitem">
                <p><a href="https://docs.aws.amazon.com/kendra/latest/dg/iam-roles.html#iam-roles-ds">Created an IAM role</a> for your data source and, if
                    using the API, noted the ARN of the IAM role.</p>
            </li></ul></div>
        <p>If you don’t have an existing IAM role, you can use the console to
            create a new IAM role when you connect your S3 data
            source to Amazon Kendra. If you are using the API, you must provide the ARN of an
            existing IAM role and an index ID.</p>
     
        <h2 id="data-source-procedure-s3">Connection instructions</h2>
        
   <p>To connect Amazon Kendra to your S3 data source, you must provide
    the necessary details of your S3 data source so that Amazon Kendra can access
    your data. If you have not yet configured S3 for Amazon Kendra, 
    see <a href="#prerequisites-s3">Prerequisites</a>.</p>

   
 
         
            <awsdocs-tabs><dl style="display: none">
                <dt>Console</dt><dd tab-id="console">
                        <p><b>To connect Amazon Kendra to Amazon S3
                            </b>
                        </p>
                        <div class="procedure"><ol><li>
    <p>Sign in to the AWS Management Console and open the <a href="https://console.aws.amazon.com/kendra/" rel="noopener noreferrer" target="_blank"><span>Amazon Kendra console</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
    </li><li>
    <p>From the left navigation pane, choose <b>Indexes</b> and then choose the index you want to use from the list of indexes.</p>
    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>You can choose to configure or edit your <b>User access control</b> settings under <b>Index settings</b>.
    </p></div></div>
    </li><li>
    <p>On the <b>Getting started</b> page, choose <b>Add data source</b>.</p>
    </li><li>
    <p>On the <b>Add data source</b> page, choose <b>S3 connector</b>, and then choose <b>Add data source</b>.</p>
    </li><li> 
    <p>On the <b>Specify data source details</b> page, enter the following information:</p>
        <ol><li>
            <p>In <b>Name and description</b>, for <b>Data source name</b>—Enter a name for your data source. You can include hyphens but not spaces.</p>
            </li><li>
            <p>(Optional)<b> Description</b>—Enter an optional description for your data source.</p>
            </li><li>
            <p>In <b>Language</b>, for <b>Default language</b>—A language to filter your documents for the index. Unless you specify otherwise,
            the language defaults to English. Language specified in the document metadata overrides the selected language.</p>
            </li><li>
            <p>In <b>Tags</b>, for <b>Add new tag</b>—Tags to search and filter your resources or track your AWS costs.</p>
            </li><li>
            <p>Choose <b>Next</b>.</p>
            </li></ol>
      </li><li>
                                <p>On the <b>Define access and security</b> page,
                                    enter the following optional information:</p>
                                <ol><li>
    <p><b>IAM role</b>—Choose an existing IAM 
    role or create a new IAM role to access your repository credentials and index content.</p>
    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>IAM roles used for indexes cannot be used for data sources. If you are unsure 
       if an existing role is used for an index or FAQ, choose <b>Create a new role</b> to avoid 
       errors.</p></div></div>
   </li><li>
   <p><b>Virtual Private Cloud (VPC)</b>—You can choose to use a VPC. If
   so, you must add <b>Subnets</b> and <b>VPC security groups</b>.</p>
   
   
                                        <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><div class="itemizedlist">
                                                <p>Make sure you have:</p>
                                                 
                                                 
                                                 
                                            <ul class="itemizedlist"><li class="listitem">
                                                  <p>Configured your VPC according to the steps
                                                  in <a href="https://docs.aws.amazon.com/vpc/latest/privatelink/vpc-endpoints-s3.html">Gateway endpoints for Amazon S3</a>.</p>
                                                </li><li class="listitem">
                                                  <p>Chosen a private subnet in an Amazon Kendra supported availability zone. See <a href="https://docs.aws.amazon.com/kendra/latest/dg/vpc-configuration.html">Configuring Amazon Kendra to use an Amazon VPC</a> for more details.</p>
                                                </li><li class="listitem">
                                                  <p>Configured your security group to allow
                                                  Amazon Kendra to access the Amazon S3
                                                  endpoint.</p>
                                                </li></ul></div></div></div>
                                    </li><li>
                                        <p>Choose <b>Next</b>.</p>
                                    </li></ol>
                            </li><li>
                                <p>On the <b>Configure sync settings</b> page,
                                    enter the following information:</p>
                                <ol><li>
                                        <p>In <b>Sync scope</b>, for <b>Data
                                                source location</b>—The path to the
                                                Amazon S3 bucket where your data is stored.
                                            Select <b>Browse S3</b> to choose your
                                            bucket.</p>
                                    </li><li>
                                        <p>(Optional) <b>Metadata files prefix folder
                                                location</b>—The path to the folder in
                                            which your metadata is stored. Select <b>Browse
                                                S3</b> to locate your metadata folder.</p>
                                    </li><li>
                                        <p>(Optional) <b>Access control list configuration
                                                file location</b>—The path to the
                                            location of a file containing a JSON structure that
                                            specifies access settings for the files stored in your
                                            S3 data source. Select <b>Browse S3</b> to
                                            locate your ACL file.</p>
                                    </li><li>
                                        <p>(Optional) <b>Select decryption
                                            key</b>—Select to use a decryption key.
                                            You can choose to use an existing AWS KMS key
                                            or create a new one.</p>
                                    </li><li>
                                        <p>(Optional) In <b>Additional
                                                configuration</b>, for <b>Regex
                                                patterns</b>—Add regular expression
                                            patterns to include or exclude documents from your
                                            index. All paths are relative to the data source
                                            location S3 bucket. You can add up to 100 patterns.
                                        </p>
                                    </li><li>
                                        <p>In <b>Sync mode</b>, choose between
                                                <b>Full sync mode</b> and
                                                <b>New, modified, or deleted content
                                                sync</b> to determine how your index updates
                                            when your data source content changes. When you sync
                                            your data source with Amazon Kendra for the first time,
                                            all content is synced by default.</p>
                                    </li><li>
                                        <p>In <b>Sync run schedule</b>, for
                                                <b>Frequency</b>—Choose how
                                            often Amazon Kendra will sync with your data
                                            source.</p>
                                    </li><li>
                                        <p>Choose <b>Next</b>.</p>
                                    </li></ol>
                            </li><li>
                                <p>On the <b>Set field mappings</b> page, enter the
                                    following optional information:</p>
                                <ol><li>
                                        <p><b>S3 field mapping</b>—Select
                                            from the Amazon Kendra generated default data
                                            source fields you want to map to your index. </p>
                                    </li><li>
                                        <p>
                                            <b>Add field</b>—Choose to add
                                            custom data source fields to create an index field name
                                            to map to and the field data type.</p>
                                    </li><li>
                                        <p>Choose <b>Next</b>.</p>
                                    </li></ol>
                            </li><li>
   <p>On the <b>Review and create</b> page, check that
   the information you have entered is correct and then select
   <b>Add data source</b>. You can also choose to edit your information from this page. 
   Your data source will appear on the <b>Data sources</b> page after it’s added successfully.</p>
   
   </li></ol></div>
                    </dd>

                <dt>TemplateConfiguration API</dt><dd tab-id="templateconfiguration-api">
                        <p><b>To connect Amazon Kendra to Amazon S3</b></p>

                        <p>You must specify a JSON of the <a href="https://docs.aws.amazon.com/kendra/latest/dg/ds-schemas.html">data source schema</a>
                            using the <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_TemplateConfiguration.html">TemplateConfiguration</a> API. You must provide the following
                            information:</p>

                        <div class="itemizedlist">
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p><b>BucketName</b>—The name of
                                    the bucket that contains the documents.</p>
                            </li><li class="listitem"> 
    <p><b>IAM role</b>—Specify <code class="code">RoleArn</code>
     when you call <code class="code">CreateDataSource</code> to provide an IAM role with permissions to access
    your Secrets Manager secret and to call the required public
    APIs for the S3 connector and Amazon Kendra. 
    For more information, see <a href="https://docs.aws.amazon.com/kendra/latest/dg/iam-roles.html#iam-roles-ds">IAM roles for S3 
    data sources</a>.</p>
    
   </li></ul></div>

                        <p>You can also add the following optional features:</p>
                        <div class="itemizedlist">
                             
                             
                             
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p>
                                    <b>Inclusion and exclusion
                                    filters</b>—Specify whether to include or exclude
                                    certain file names, file types, file paths, and use glob
                                    patterns (patterns that can expand a wildcard pattern into a
                                    list of path names that match the given pattern). Examples of
                                    glob patterns include:</p>
                                <div class="itemizedlist">
                                     
                                     
                                     
                                     
                                     
                                <ul class="itemizedlist"><li class="listitem">
                                        <p><code class="code">/myapp/config/*</code>—All files inside
                                            config directory</p>
                                    </li><li class="listitem">
                                        <p><code class="code">/**/*.png</code>—All .png files in all
                                            directories</p>
                                    </li><li class="listitem">
                                        <p><code class="code">/**/*.<span>{</span>png,ico,md}</code>—All .png, .ico
                                            or .md files in all directories</p>
                                    </li><li class="listitem">
                                        <p><code class="code">/myapp/src/**/*.ts</code>—All .ts files
                                            inside src directory (and all its subdirectories)</p>
                                    </li><li class="listitem">
                                        <p><code class="code">**/!(*.module).ts</code>—All .ts files
                                            but not .module.ts</p>
                                    </li></ul></div>
                            </li><li class="listitem"> 
   <p>
   <b>Field mappings</b>—Choose to map your S3 
   data source fields to your
   Amazon Kendra index fields. For more information, see
   <a href="https://docs.aws.amazon.com/kendra/latest/dg/field-mapping.html">Mapping data
   source fields</a>.</p>
    
    </li><li class="listitem">
    <p>
    <b>Virtual Private Cloud
    (VPC)</b>—Specify
    <code class="code">VpcConfiguration</code> when you call <code class="code">CreateDataSource</code>. 
    For more information, see <a href="./vpc-configuration.html">Configuring Amazon Kendra to use an Amazon VPC</a>.</p>
    
   </li><li class="listitem">
                                <p><b>Document metadata
                                        configuration</b>—Add document metadata files
                                    that contain information such as the document access control
                                    information, source URI, document author, and custom attributes.
                                    Each metadata file contains metadata about a single
                                    document.</p>
                            </li><li class="listitem">
    <p>
    <b>User context filtering</b>—Amazon Kendra 
    crawls the access control list (ACL) for your data source by default. The ACL 
    information is used to filter search results based on the user or their
    group access to documents. For more information, see <a href="https://docs.aws.amazon.com/kendra/latest/dg/user-context-filter.html#datasource-context-filter">User context
    filtering for S3 data sources</a>.</p>
    
   </li></ul></div>
                        <p>For a list of other important JSON keys to configure, see <a href="./ds-schemas.html#ds-s3-schema">Amazon S3 template schema</a>.</p>
                    </dd>

                <dt>S3DataSourceConfiguration API</dt><dd tab-id="s3datasourceconfiguration-api">
                        <p><b>To connect Amazon Kendra to Amazon S3</b></p>

                        <p>You must specify the following using the <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_S3DataSourceConfiguration.html">S3DataSourceConfiguration</a> API:</p>

                        <div class="itemizedlist">
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p>
                                    <b>BucketName</b>—The name of
                                    the bucket that contains the documents.</p>
                            </li><li class="listitem"> 
    <p><b>IAM role</b>—Specify <code class="code">RoleArn</code>
     when you call <code class="code">CreateDataSource</code> to provide an IAM role with permissions to access
    your Secrets Manager secret and to call the required public
    APIs for the S3 connector and Amazon Kendra. 
    For more information, see <a href="https://docs.aws.amazon.com/kendra/latest/dg/iam-roles.html#iam-roles-ds">IAM roles for S3 
    data sources</a>.</p>
    
   </li></ul></div>
                        <p>You can also add the following optional features:</p>
                        <div class="itemizedlist">
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p>
                                    <b>Inclusion and exclusion
                                    filters</b>—Specify whether to include or exclude
                                    certain content using prefixes, file name, file type, file path,
                                    and glob patterns (patterns that can expand a wildcard pattern
                                    into a list of path names that match the given pattern).
                                    Examples of glob patterns include:</p>
                                <div class="itemizedlist">
                                     
                                     
                                     
                                     
                                     
                                <ul class="itemizedlist"><li class="listitem">
                                        <p><code class="code">/myapp/config/*</code>—All files inside
                                            config directory</p>
                                    </li><li class="listitem">
                                        <p><code class="code">/**/*.png</code>—All .png files in all
                                            directories</p>
                                    </li><li class="listitem">
                                        <p><code class="code">/**/*.<span>{</span>png,ico,md}</code>—All .png, .ico
                                            or .md files in all directories</p>
                                    </li><li class="listitem">
                                        <p><code class="code">/myapp/src/**/*.ts</code>—All .ts files
                                            inside src directory (and all its subdirectories)</p>
                                    </li><li class="listitem">
                                        <p><code class="code">**/!(*.module).ts</code>—All .ts files
                                            but not .module.ts</p>
                                    </li></ul></div>
                            </li><li class="listitem">
    <p>
    <b>User context filtering</b>—Amazon Kendra 
    crawls the access control list (ACL) for your data source by default. The ACL 
    information is used to filter search results based on the user or their
    group access to documents. For more information, see <a href="https://docs.aws.amazon.com/kendra/latest/dg/user-context-filter.html#datasource-context-filter">User context
    filtering for S3 data sources</a>.</p>
    
   </li></ul></div>
                    </dd>
            </dl></awsdocs-tabs>
         
         
            <h3 id="s3-learn-more">Learn more</h3>
            <p>To learn more about integrating Amazon Kendra with your S3
                data source, see:</p>
            <div class="itemizedlist">
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><a href="https://aws.amazon.com/blogs/machine-learning/search-for-answers-accurately-using-amazon-kendra-s3-connector-with-vpc-support/" rel="noopener noreferrer" target="_blank"><span>Search for answers accurately using Amazon KendraAmazon Kendra Connector with VPC support</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a></p>
                </li></ul></div>
         
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./data-source-alfresco.html">Alfresco</div><div id="next" class="next-link" accesskey="n" href="./create-ds-s3.html">Creating an Amazon S3 data source</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Kendra&amp;topic_url=https://docs.aws.amazon.com/en_us/kendra/latest/dg/data-source-s3.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Kendra&amp;topic_url=https://docs.aws.amazon.com/en_us/kendra/latest/dg/data-source-s3.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>