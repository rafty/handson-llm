<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Filtering on user context - Amazon Kendra</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="user-context-filter" /><meta name="default_state" content="user-context-filter" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/kendra/latest/dg/user-context-filter.html" /><meta name="description" content="How to filter search results in Amazon Kendra based on user or their group access to documents." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Kendra" /><meta name="guide" content="Developer Guide" /><meta name="abstract" content="Provides a conceptual overview of Amazon Kendra. Learn about Amazon Kendra features and get started indexing your documents using the console, CLI, and API." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/kendra/latest/dg/user-context-filter.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/kendra/latest/dg/user-context-filter.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/kendra/latest/dg/user-context-filter.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/kendra/latest/dg/user-context-filter.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/kendra/latest/dg/user-context-filter.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/kendra/latest/dg/user-context-filter.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/kendra/latest/dg/user-context-filter.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/kendra/latest/dg/user-context-filter.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/kendra/latest/dg/user-context-filter.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/kendra/latest/dg/user-context-filter.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/kendra/latest/dg/user-context-filter.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/kendra/latest/dg/user-context-filter.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/kendra/latest/dg/user-context-filter.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/kendra/latest/dg/user-context-filter.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/kendra/latest/dg/user-context-filter.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/kendra/latest/dg/user-context-filter.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/kendra/latest/dg/user-context-filter.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/kendra/latest/dg/user-context-filter.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/kendra/latest/dg/user-context-filter.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/kendra/latest/dg/user-context-filter.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/kendra/latest/dg/user-context-filter.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/kendra/latest/dg/user-context-filter.html" hreflang="x-default" /><meta name="feedback-item" content="Kendra" /><meta name="this_doc_product" content="Amazon Kendra" /><meta name="this_doc_guide" content="Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'kendra'}"></script><meta id="panorama-serviceSubSection" value="Developer Guide" /><meta id="panorama-serviceConsolePage" value="Filtering on user context" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Filtering on user context - Amazon Kendra</title><meta name="pdf" content="/pdfs/kendra/latest/dg/kendra-dg.pdf#user-context-filter" /><meta name="github" content="https://github.com/awsdocs/amazon-kendra-developer-guide/tree/master/doc_source/user-context-filter.md" /><meta name="rss" content="amazon-kendra-release-notes.rss" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Kendra&amp;topic_url=http://docs.aws.amazon.com/en_us/kendra/latest/dg/user-context-filter.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/kendra/latest/dg/user-context-filter.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/kendra/latest/dg/user-context-filter.html" /><meta name="keywords" content="Kendra,Amazon Kendra,search,intelligent search,natural language,index,question,keyword,data source,connector,FAQ,frequently asked question,query,context filtering,personalized search" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Kendra",
        "item" : "https://docs.aws.amazon.com/kendra/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide",
        "item" : "https://docs.aws.amazon.com/kendra/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Searching indexes",
        "item" : "https://docs.aws.amazon.com/kendra/latest/dg/searching.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Filtering on user context",
        "item" : "https://docs.aws.amazon.com/kendra/latest/dg/searching.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/kendra/latest/dg/kendra-dg.pdf#user-context-filter" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a href="https://github.com/awsdocs/amazon-kendra-developer-guide/tree/master/doc_source/user-context-filter.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/kendra/index.html">Amazon Kendra</a><a href="what-is-kendra.html">Developer Guide</a></div><div id="page-toc-src"><a href="#context-filter-token">Filtering by user token</a><a href="#context-filter-user-incl-datasources">Filtering by user ID and
                    group</a><a href="#context-filter-attribute">Filtering by user attribute</a><a href="#context-filter-batch">User context filtering for documents added
                    directly to an index</a><a href="#context-filter-faq">User context filtering for frequently asked
                    questions</a><a href="#datasource-context-filter">User context filtering for data
                    sources</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="user-context-filter">Filtering on user context</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>You can filter a user's search results based on the user or their group access to
            documents. You can use a user token, user ID, or user attribute to filter documents.
                Amazon Kendra can also map users to their groups. You can choose to use
            AWS IAM Identity Center (successor to AWS Single Sign-On) as your identity store/source.</p><p>User context filtering is a kind of personalized search with the benefit of
            controlling access to documents. For example, not all teams that search the company
            portal for information should access top-secret company documents, nor are these
            documents relevant to all users. Only specific users or groups of teams given access to
            top-secret documents should see these documents in their search results.</p><p>When a document is indexed into Amazon Kendra, a corresponding access control
            list (ACL) is ingested for most documents. The ACL specifies which user names and group
            names are allowed or denied access to the document. Documents without an ACL are public
            documents.</p><p>Amazon Kendra automatically extracts the user or group information associated
            with each document in most data sources. For example, a document in Quip can include a
            'share' list of select users or groups that are given access to the document. If you use
            an S3 bucket as a data source, you provide a <a href="https://docs.aws.amazon.com/kendra/latest/dg/s3-acl.html">JSON file</a> for your ACL and include the S3
            path to this file as part of the data source configuration. If you add documents
            directly to an index, you specify the ACL in the <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_Principal.html">Principal</a> object as part
            of the document object in the <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_BatchPutDocument.html">BatchPutDocument</a>
            API.</p><p>You can use the <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_CreateAccessControlConfiguration.html">CreateAccessControlConfiguration</a> API to re-configure your existing document
            level access control without indexing all of your documents again. For example, your
            index contains top-secret company documents that only certain employees or users should
            access. One of these users leaves the company or switches to a team that should be
            blocked from accessing top-secret documents. The user still has access to top-secret
            documents because the user had access when your documents were previously indexed. You
            can create a specific access control configuration for the user with deny access. You
            can later update the access control configuration to allow access in the case the user
            returns to the company and re-joins the 'top-secret' team. You can re-configure access
            control for your documents as circumstances change.</p><p>To apply your access control configuration to certain documents, you call the <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_BatchPutDocument.html">BatchPutDocument</a> API with the <code class="code">AccessControlConfigurationId</code>
            included in the <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_Document.html">Document</a> object. If you
            use an S3 bucket as a data source, you update the <code class="code">.metadata.json</code> with the
                <code class="code">AccessControlConfigurationId</code> and synchronize your data source. Amazon Kendra currently only supports access control configuration for S3 data sources
            and documents indexed using the <code class="code">BatchPutDocument</code> API.</p>
            <h2 id="context-filter-token">Filtering by user token</h2>
            <p>When you query an index, you can use a user token to filter search results based
                on the user or their group access to documents. When you issue a query, Amazon Kendra extracts and validates the token, pulls and checks the user and group
                information, and runs the query. All of the documents the user has access to,
                including public documents, are returned. For more information, see <a href="https://docs.aws.amazon.com/kendra/latest/dg/create-index-access-control.html">Token-based user access control</a>.</p>
            <p>You provide the user token in the <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_UserContext.html">UserContext</a> object
                and pass this in the <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_Query.html">Query</a> API.</p>
            <p>The following shows how to include a user token. </p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="python ">response = kendra.query(
    QueryText = query,
    IndexId = index,
    UserToken = <span>{</span>
        Token = "<code class="replaceable">token</code>"
    })</code></pre>
            <p>You can map users to groups. When you use user-context filtering, it is not
                required to include all of the groups that a user belongs to when you issue the
                query. With the <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_PutPrincipalMapping.html">PutPrincipalMapping</a> API, you can map users to their groups. If you do
                not want to use the <code class="code">PutPrincipalMapping</code> API, you must provide the user
                name and all the groups the user belongs to when you issue a query. You can also
                fetch access levels of groups and users in your IAM Identity Center identity source by using the
                    <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_UserGroupResolutionConfiguration.html">UserGroupResolutionConfiguration</a> object.</p>
         
            <h2 id="context-filter-user-incl-datasources">Filtering by user ID and
                    group</h2>
            <p>When you query an index, you can use the user ID and group to filter search
                results based on the user or their group access to documents. When you issue a
                query, Amazon Kendra checks the user and group information and runs the query.
                All of the documents relevant to the query that the user has access to, including
                public documents, are returned.</p>
            <p>You can also filter search results by data sources that users and groups have
                access to. Specifying a data source is useful if a group is tied to multiple data
                sources, but you only want the group to access documents of a certain data source.
                For example, the groups "Research", "Engineering", and "Sales and Marketing" are all
                tied to the company's documents stored in the data sources Confluence and
                Salesforce. However, "Sales and Marketing" team only needs access to
                customer-related documents stored in Salesforce. So when sales and marketing users
                search for customer-related documents, they can see documents from Salesforce in
                their results. Users who do not work in sales and marketing do not see Salesforce
                documents in their search results.</p>
            <p>You provide the user, groups and data sources information in the <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_UserContext.html">UserContext</a> object and pass this in the <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_Query.html">Query</a> API. The user ID,
                and the list of groups and data sources should match the name you specify in the
                    <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_Principal.html">Principal</a> object to identify the user, groups, and data sources. With
                the <code class="code">Principal</code> object, you can add a user, group, or data source to
                either an allow list or a deny list for accessing a document.</p>
            <p>You are required to provide one of the following:</p>
            <div class="itemizedlist">
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>User and groups information, and (optional) data sources
                        information.</p>
                </li><li class="listitem">
                    <p>Only the user information if you map your users to groups and data sources
                        using the <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_PutPrincipalMapping.html">PutPrincipalMapping</a> API. You can also fetch access levels of
                        groups and users in your IAM Identity Center identity source by using the <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_UserGroupResolutionConfiguration.html">UserGroupResolutionConfiguration</a> object.</p>
                </li></ul></div>
            <p>If this information is not included in the query, Amazon Kendra returns all
                documents. If you provide this information, only documents with matching user IDs,
                groups, and data sources are returned.</p>
            <p>The following shows how to include user ID, groups, and data sources.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="python ">response = kendra.query(
    QueryText = query,
    IndexId = index,
    UserId = <span>{</span>
        UserId = "<code class="replaceable">user1</code>"
    },
    Groups = <span>{</span>
        Groups = ["<code class="replaceable">Sales and Marketing</code>"]
    },
    DataSourceGroups = <span>{</span>
        DataSourceGroups = [<span>{</span>"DataSourceId" : "<code class="replaceable">SalesforceCustomerDocsGroup</code>", "GroupId": "<code class="replaceable">Sales and Marketing</code>"}]
    })</code></pre>
         
            <h2 id="context-filter-attribute">Filtering by user attribute</h2>
            <p>When you query an index, you can use built-in attributes <code class="code">_user_id</code> and
                    <code class="code">_group_id</code> to filter search results based on the user and their
                group access to documents. You can set up to 100 group identifiers. When you issue a
                query, Amazon Kendra checks the user and group information and runs the query.
                All documents relevant to the query that the user has access to, including public
                documents, are returned.</p>
            <p>You provide the user and group attributes in the <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_AttributeFilter.html">AttributeFilter</a> object and pass this in the <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_Query.html">Query</a> API.</p>
            <p>The following example shows a request that filters the query response based on the
                user ID and the groups "HR" and "IT", which the user belongs to. The query will
                return any document that has the user or the "HR" or "IT" groups in the allow list.
                If the user or either group is in the deny list for a document, the document is not
                returned.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="python ">response = kendra.query(
        QueryText = query,
        IndexId = index,
        AttributeFilter = <span>{</span>
            "OrAllFilters": [
                <span>{</span>
                    "EqualsTo": <span>{</span>
                        "Key": "_user_id",
                        "Value": <span>{</span>
                            "StringValue": "user1"
                        }
                     }
                },
                <span>{</span>
                    "EqualsTo": <span>{</span>
                        "Key": "_group_ids",
                        "Value": <span>{</span>
                            "StringListValue": ["HR", "IT"]
                        }
                    }
                }
            ]
        }
        )</code></pre>
            <p>You can also specify which data source a group can access in the
                    <code class="code">Principal</code> object.</p>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>User context filtering isn't an authentication or authorization control for
                    your content. It doesn't do user authentication on the user and groups sent to
                    the <code class="code">Query</code> API. It is up to your application to ensure that the user
                    and group information sent to <code class="code">Query</code> API is authenticated and
                    authorized.</p></div></div>
        <p>There is an implementation of user context filtering for each data source. The
            following section describes each implementation. </p><div class="highlights" id="inline-topiclist"><h6>Topics</h6><ul><li><a href="#context-filter-batch">User context filtering for documents added
                    directly to an index</a></li><li><a href="#context-filter-faq">User context filtering for frequently asked
                    questions</a></li><li><a href="#datasource-context-filter">User context filtering for data
                    sources</a></li></ul></div>
            <h2 id="context-filter-batch">User context filtering for documents added
                    directly to an index</h2>
            <p>When you add documents directly to an index using the <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_BatchPutDocument.html">BatchPutDocument</a> API, Amazon Kendra gets user and group
                information from the <code class="code">AccessControlList</code> field of the document. You
                provide an access control list (ACL) for your documents and the ACL is ingested with
                your documents.</p>
            <p>You specify the ACL in the <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_Principal.html">Principal</a> object as
                part of the <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_Document.html">Document</a> object in
                the <code class="code">BatchPutDocument</code> API. You provide the following information:</p>
            <div class="itemizedlist">
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>The access that the user or group should have. You can say
                            <code class="code">ALLOW</code> or <code class="code">DENY</code>.</p>
                </li><li class="listitem">
                    <p>The type of entity. You can say <code class="code">USER</code> or
                        <code class="code">GROUP</code>.</p>
                </li><li class="listitem">
                    <p>The name of the user or group.</p>
                </li></ul></div>
            <p>You can add up to 200 entries in the <code class="code">AccessControlList</code> field.</p>
         
            <h2 id="context-filter-faq">User context filtering for frequently asked
                    questions</h2>
            <p>When you <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_CreateFaq.html">add a FAQ</a> to an
                index, Amazon Kendra gets user and group information from the
                    <code class="code">AccessControlList</code> object/field of the FAQ JSON file. You can also
                use a FAQ CSV file with custom fields or attributes for access control.</p>
            <p>You provide the following information:</p>
            <div class="itemizedlist">
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>The access that the user or group should have. You can say
                            <code class="code">ALLOW</code> or <code class="code">DENY</code>.</p>
                </li><li class="listitem">
                    <p>The type of entity. You can say <code class="code">USER</code> or
                        <code class="code">GROUP</code>.</p>
                </li><li class="listitem">
                    <p>The name of the user or group.</p>
                </li></ul></div>
            <p>For more information, see <a href="https://docs.aws.amazon.com/kendra/latest/dg/in-creating-faq.html">FAQ files</a>.</p>
         
            <h2 id="datasource-context-filter">User context filtering for data
                    sources</h2>
            <p>Amazon Kendra also crawls user and group access control list (ACL) information 
                from supported data source connectors. This is useful for user context filtering, where 
                search results are filtered based on the user or their group access to documents.</p>

            <div class="highlights" id="inline-topiclist"><h6>Topics</h6><ul><li><a href="#context-filter-aem">User context filtering for Adobe Experience
                        Manager data sources</a></li><li><a href="#context-filter-alfresco">User context filtering for Alfresco
                        data sources</a></li><li><a href="#context-filter-s3">User context filtering for Amazon S3
                        data sources</a></li><li><a href="#context-filter-jdbc">User context filtering for database data
                        sources</a></li><li><a href="#context-filter-fsx">User context filtering for Amazon FSx data sources</a></li><li><a href="#context-filter-workdocs">User context filtering for Amazon WorkDocs data sources</a></li><li><a href="#context-filter-box">User context filtering for Box data
                        sources</a></li><li><a href="#context-filter-confluence">User context filtering for
                        Confluence data sources</a></li><li><a href="#context-filter-dropbox">User context filtering for Dropbox data
                        sources</a></li><li><a href="#context-filter-github">User context filtering for GitHub data
                        sources</a></li><li><a href="#context-filter-google">User context filtering for Google Drive
                        data sources</a></li><li><a href="#context-filter-gmail">User context filtering for Gmail data
                        sources</a></li><li><a href="#context-filter-jira">User context filtering for Jira data
                        sources</a></li><li><a href="#context-filter-exchange">User context filtering for Microsoft
                        Exchange data sources</a></li><li><a href="#context-filter-teams">User context filtering for Microsoft
                        Teams data sources</a></li><li><a href="#context-filter-onedrive">User context filtering for Microsoft
                        OneDrive data sources</a></li><li><a href="#context-filter-onedrivev2">User context filtering for Microsoft
                        OneDrive v2.0 data sources</a></li><li><a href="#context-filter-yammer">User context filtering for Microsoft
                        Yammer data sources</a></li><li><a href="#context-filter-sharepoint-online">User context filtering for
                        Microsoft SharePoint data sources</a></li><li><a href="#context-filter-quip">User context filtering for Quip data
                        sources</a></li><li><a href="#context-filter-salesforce">User context filtering for
                        Salesforce data sources</a></li><li><a href="#context-filter-servicenow">User context filtering for
                        ServiceNow data sources</a></li><li><a href="#context-filter-slack">User context filtering for Slack data
                        sources</a></li><li><a href="#context-filter-zendesk">User context filtering for Zendesk data
                        sources</a></li></ul></div>

            
             
                <h3 id="context-filter-aem">User context filtering for Adobe Experience
                        Manager data sources</h3>
                <p>When you use an Adobe Experience Manager data source, Amazon Kendra gets
                    the user and group information from the Adobe Experience Manager
                    instance.</p>
                <p>The group and user IDs are mapped as follows:</p>
                <div class="itemizedlist">
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p><code class="code">_group_ids</code>—Group IDs exist in Adobe Experience
                            Manager content where there are set access permissions. They are mapped
                            from the names of the groups in Adobe Experience Manager.</p>
                    </li><li class="listitem">
                        <p><code class="code">_user_id</code>—User IDs exist in Adobe Experience
                            Manager content where there are set access permissions. They are mapped
                            from the user emails as the IDs in Adobe Experience Manager.</p>
                    </li></ul></div>
                <p>You can add up to 200 entries in the <code class="code">AccessControlList</code>
                    field.</p>
             
            
             
                <h3 id="context-filter-alfresco">User context filtering for Alfresco
                        data sources</h3>
                <p>When you use an Alfresco data source, Amazon Kendra gets the user and
                    group information from the Alfresco instance.</p>
                <p>The group and user IDs are mapped as follows:</p>
                <div class="itemizedlist">
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p><code class="code">_group_ids</code>—Group IDs exist in Alfresco on files
                            where there are set access permissions. They are mapped from the system
                            names of the groups (not display names) in Alfresco.</p>
                    </li><li class="listitem">
                        <p><code class="code">_user_id</code>—User IDs exist in Alfresco on files where
                            there are set access permissions. They are mapped from the user emails
                            as the IDs in Alfresco.</p>
                    </li></ul></div>
                <p>You can add up to 200 entries in the <code class="code">AccessControlList</code>
                    field.</p>
             
            
             
                <h3 id="context-filter-s3">User context filtering for Amazon S3
                        data sources</h3>
                <p>You add user context filtering to a document in an Amazon S3 data
                    source using a metadata file associated with the document. You add the
                    information to the <code class="code">AccessControlList</code> field in the JSON document.
                    For more information about adding metadata to the documents indexed from an
                        Amazon S3 data source, see <a href="https://docs.aws.amazon.com/kendra/latest/dg/s3-metadata.html">S3 document metadata</a>.</p>
                <p>You provide three pieces of information:</p>
                <div class="itemizedlist">
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>The access that the entity should have. You can say <code class="code">ALLOW</code>
                            or <code class="code">DENY</code>.</p>
                    </li><li class="listitem">
                        <p>The type of entity. You can say <code class="code">USER</code> or
                                <code class="code">GROUP</code>.</p>
                    </li><li class="listitem">
                        <p>The name of the entity.</p>
                    </li></ul></div>
                <p>You can add up to 200 entries in the <code class="code">AccessControlList</code>
                    field.</p>
             
            
             
                <h3 id="context-filter-jdbc">User context filtering for database data
                        sources</h3>
                <p>When you use a database data source, such as Amazon Aurora PostgreSQL,
                        Amazon Kendra gets user and group information from a column in the
                    source table. You specify this column in the <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_AclConfiguration.html">AclConfiguration</a> object as part of the <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_DatabaseConfiguration.html">DatabaseConfiguration</a> object in the <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_CreateDataSource.html">CreateDataSource</a> API.</p>
                <p>A database data source has the following limitations:</p>
                <div class="itemizedlist">
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>You can only specify an allow list for a database data source. You
                            can't specify a deny list. </p>
                    </li><li class="listitem">
                        <p>You can only specify groups. You can't specify individual users for
                            the allow list.</p>
                    </li><li class="listitem">
                        <p>The database column should be a string containing a semicolon
                            delimited list of groups.</p>
                    </li></ul></div>
             
            
             
                <h3 id="context-filter-fsx">User context filtering for Amazon FSx data sources</h3>
                <p>When you use an Amazon FSx data source, Amazon Kendra gets user
                    and group information from the directory service of the Amazon FSx
                    instance.</p>
                <p>The Amazon FSx group and user IDs are mapped as follows:</p>
                <div class="itemizedlist">
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p><code class="code">_group_ids</code>—Group IDs exist in Amazon FSx
                            on files where there are set access permissions. They are mapped from
                            the system group names in the directory service of Amazon FSx.</p>
                    </li><li class="listitem">
                        <p><code class="code">_user_id</code>—User IDs exist in Amazon FSx on
                            files where there are set access permissions. They are mapped from the
                            system user names in the directory service of Amazon FSx.</p>
                    </li></ul></div>
                <p>You can add up to 200 entries in the <code class="code">AccessControlList</code>
                    field.</p>
             
            
             
                <h3 id="context-filter-workdocs">User context filtering for Amazon WorkDocs data sources</h3>
                <p>When you use an Amazon WorkDocs data source, Amazon Kendra gets user
                    and group information from the Amazon WorkDocs instance.</p>
                <p>The Amazon WorkDocs group and user IDs are mapped as follows:</p>
                <div class="itemizedlist">
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p><code class="code">_group_ids</code>—Group IDs exist in Amazon WorkDocs on
                            files where there are set access permissions. They are mapped from the
                            names of the groups in Amazon WorkDocs.</p>
                    </li><li class="listitem">
                        <p><code class="code">_user_id</code>—User IDs exist in Amazon WorkDocs on
                            files where there are set access permissions. They are mapped from the
                            user names in Amazon WorkDocs.</p>
                    </li></ul></div>
                <p>You can add up to 200 entries in the <code class="code">AccessControlList</code>
                    field.</p>
             
            
             
                <h3 id="context-filter-box">User context filtering for Box data
                        sources</h3>
                <p>When you use a Box data source, Amazon Kendra gets user and group
                    information from the Box instance.</p>
                <p>The Box group and user IDs are mapped as follows:</p>
                <div class="itemizedlist">
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p><code class="code">_group_ids</code>—Group IDs exist in Box on files where
                            there are set access permissions. They are mapped from the names of the
                            groups in Box.</p>
                    </li><li class="listitem">
                        <p><code class="code">_user_id</code>—User IDs exist in Box on files where
                            there are set access permissions. They are mapped from the user emails
                            as the user IDs in Box.</p>
                    </li></ul></div>
                <p>You can add up to 200 entries in the <code class="code">AccessControlList</code>
                    field.</p>
             
            
             
                <h3 id="context-filter-confluence">User context filtering for
                        Confluence data sources</h3>
                <p>When you use a Confluence data source, Amazon Kendra gets user and group
                    information from the Confluence instance.</p>
                <p>You configure user and group access to spaces using the space permissions
                    page. For pages and blogs, you use the restrictions page. For more information
                    about space permissions, see <a href="https://confluence.atlassian.com/doc/space-permissions-overview-139521.html" rel="noopener noreferrer" target="_blank"><span>Space Permissions Overview</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> on the Confluence Support website. For
                    more information about page and blog restrictions, see <a href="https://confluence.atlassian.com/doc/page-restrictions-139414.html" rel="noopener noreferrer" target="_blank"><span>
                        Page Restrictions </span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> on the Confluence Support website.</p>
                <p>The Confluence group and user names are mapped as follows:</p>
                <div class="itemizedlist">
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p><code class="code">_group_ids</code>—Group names are present on spaces,
                            pages, and blogs where there are restrictions. They are mapped from the
                            name of the group in Confluence. Group names are always lower
                            case.</p>
                    </li></ul></div>
                <div class="itemizedlist">
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p><code class="code">_user_id</code>—User names are present on the space,
                            page, or blog where there are restrictions. They are mapped depending on
                            the type of Confluence instance that you are using.</p>

                        <p><b>For Confluence connector v1.0</b></p>
                        <div class="itemizedlist">
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p>Server—The <code class="code">_user_id</code> is the user name. The
                                    username is always lower case.</p>
                            </li><li class="listitem">
                                <p>Cloud—The <code class="code">_user_id</code> is the account ID of
                                    the user.</p>
                            </li></ul></div>
                        <p><b>For Confluence connector v2.0</b></p>
                        <div class="itemizedlist">
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p>Server—The <code class="code">_user_id</code> is the user name. The
                                    username is always lower case.</p>
                            </li><li class="listitem">
                                <p>Cloud—The <code class="code">_user_id</code> is the email ID of the
                                    user.</p>
                            </li></ul></div>
                    </li></ul></div>
                <p>You can add up to 200 entries in the <code class="code">AccessControlList</code>
                    field.</p>
             
            
             
                <h3 id="context-filter-dropbox">User context filtering for Dropbox data
                        sources</h3>
                <p>When you use a Dropbox data source, Amazon Kendra gets the user and group
                    information from the Dropbox instance.</p>
                <p>The group and user IDs are mapped as follows:</p>
                <div class="itemizedlist">
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p><code class="code">_group_ids</code>—Group IDs exist in Dropbox on files
                            where there are set access permissions. They are mapped from the names
                            of the groups in Dropbox.</p>
                    </li><li class="listitem">
                        <p><code class="code">_user_id</code>—User IDs exist in Dropbox on files where
                            there are set access permissions. They are mapped from the user emails
                            as the IDs in Dropbox.</p>
                    </li></ul></div>
                <p>You can add up to 200 entries in the <code class="code">AccessControlList</code>
                    field.</p>
             
            
             
                <h3 id="context-filter-github">User context filtering for GitHub data
                        sources</h3>
                <p>When you use a GitHub data source, Amazon Kendra gets user information
                    from the GitHub instance.</p>
                <p>The GitHub user IDs are mapped as follows:</p>
                <div class="itemizedlist">
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p><code class="code">_user_id</code>—User IDs exist in GitHub on files where
                            there are set access permissions. They are mapped from the user emails
                            as the IDs in GitHub.</p>
                    </li></ul></div>
                <p>You can add up to 200 entries in the <code class="code">AccessControlList</code>
                    field.</p>
             
            
             
                <h3 id="context-filter-google">User context filtering for Google Drive
                        data sources</h3>
                <p>A Google Workspace Drive data source returns user and group information for
                    Google Drive users and groups. Group and domain membership are mapped to the
                        <code class="code">_group_ids</code> index field. The Google Drive user name is mapped to
                    the <code class="code">_user_id</code> field.</p>
                <p>When you provide one or more user email addresses in the <code class="code">Query</code>
                    API, only documents that have been shared with those email addresses are
                    returned. The following <code class="code">AttributeFilter</code> parameter only returns
                    documents shared with "martha@example.com".</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"AttributeFilter": <span>{</span>
                "EqualsTo":<span>{</span>
                   "Key": "_user_id", 
                   "Value": <span>{</span>
                       "StringValue": "martha@example.com"
                   }
               }
           }</code></pre>
                <p>If you provide one or more group email addresses in the query, only documents
                    shared with the groups are returned. The following <code class="code">AttributeFilter</code>
                    parameter only returns documents shared with the "hr@example.com" group.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"AttributeFilter": <span>{</span>
                "EqualsTo":<span>{</span>
                   "Key": "_group_ids", 
                   "Value": <span>{</span>
                       "StringListValue": ["hr@example.com"]
                   }
               }
           }</code></pre>
                <p>If you provide the domain in the query, all documents shared with the domain
                    are returned. The following <code class="code">AttributeFilter</code> parameter returns
                    documents shared with the "example.com" domain.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"AttributeFilter": <span>{</span>
                "EqualsTo":<span>{</span>
                   "Key": "_group_ids", 
                   "Value": <span>{</span>
                       "StringListValue": ["example.com"]
                   }
               }
           }</code></pre>
                <p>You can add up to 200 entries in the <code class="code">AccessControlList</code>
                    field.</p>
                <p></p>
             
            
             
                <h3 id="context-filter-gmail">User context filtering for Gmail data
                        sources</h3>
                <p>When you use a Gmail data source, Amazon Kendra gets the user information
                    from the Gmail instance.</p>
                <p>The user IDs are mapped as follows:</p>
                <div class="itemizedlist">
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p><code class="code">_user_id</code> – User IDs exist in Gmail on files where
                            there are set access permissions. They are mapped from the user emails
                            as the IDs in Gmail.</p>
                    </li></ul></div>
                <p>You can add up to 200 entries in the <code class="code">AccessControlList</code>
                    field.</p>
             
            
             
                <h3 id="context-filter-jira">User context filtering for Jira data
                        sources</h3>
                <p>When you use a Jira data source, Amazon Kendra gets user and group
                    information from the Jira instance.</p>
                <p>The Jira user IDs are mapped as follows:</p>
                <div class="itemizedlist">
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p><code class="code">_user_id</code>—User IDs exist in Jira on files where
                            there are set access permissions. They are mapped from the user emails
                            as the user IDs in Jira.</p>
                    </li></ul></div>
                <p>You can add up to 200 entries in the <code class="code">AccessControlList</code>
                    field.</p>
             
            
             
                <h3 id="context-filter-exchange">User context filtering for Microsoft
                        Exchange data sources</h3>
                <p>Amazon Kendra retrieves user information from Microsoft Exchange when it
                    indexes the documents on the site. The user information is taken from the
                    underlying Microsoft Exchange host site.</p>
                <p>When you use an Exchange user for user context filtering, Amazon Kendra
                    gets the user information from the Microsoft Exchange instance. The Exchange IDs
                    are mapped as follows: </p>
                <div class="itemizedlist">
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p><code class="code">_tenant_id</code>— Your Microsoft tenant ID is a globally
                            unique identifier that is necessary to configure each connector
                            instance. Your tenant ID is different from your organization name or
                            domain and can be found in the properties section of your Microsoft
                            account dashboard. </p>
                    </li></ul></div>
                <p>You can add up to 200 entries in the <code class="code">AccessControlList</code>
                    field.</p>
             
            
             
                <h3 id="context-filter-teams">User context filtering for Microsoft
                        Teams data sources</h3>
                <p>Amazon Kendra retrieves user information from Microsoft Teams when it
                    indexes the documents on the site. The user information is taken from the
                    underlying Microsoft Teams host site.</p>
                <p>When you use a Teams user for user context filtering, Amazon Kendra gets
                    the user information from the Microsoft Teams instance. The Teams tenant IDs are
                    mapped as follows: </p>
                <div class="itemizedlist">
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p><code class="code">_tenant_id</code>— Your Microsoft tenant ID is a globally
                            unique identifier that is necessary to configure each connector
                            instance. Your tenant ID is different from your organization name or
                            domain and can be found in the properties section of your Microsoft
                            account dashboard. </p>
                    </li></ul></div>
                <p>You can add up to 200 entries in the <code class="code">AccessControlList</code>
                    field.</p>
             

            
             
                <h3 id="context-filter-onedrive">User context filtering for Microsoft
                        OneDrive data sources</h3>
                <p>Amazon Kendra retrieves user and group information from Microsoft
                    OneDrive when it indexes the documents on the site. The user and group
                    information is taken from the underlying Microsoft SharePoint site that hosts
                    OneDrive.</p>
                <p>When you use a OneDrive user or group for user context filtering, calculate
                    the ID as follows:</p>
                <div class="orderedlist">
                     
                     
                     
                <ol><li>
                        <p>Get the site name. For example,
                                <code class="code">https://host.onmicrosoft.com/sites/siteName.</code></p>
                    </li><li>
                        <p>Take the MD5 hash of the site name. For example,
                                <code class="code">430a6b90503eef95c89295c8999c7981</code>.</p>
                    </li><li>
                        <p>Create the user email or group ID by concatenating the MD5 hash with a
                            vertical bar (|) and the ID. For example, if a group name is "site
                            owners", the group ID would be:</p>
                        <p><code class="code">"<code class="code">430a6b90503eef95c89295c8999c7981|site
                                owners</code>"</code></p>
                        <p>For the user name "someone@host.onmicrosoft.com," the user ID would be
                            the following:</p>
                        <p><code class="code">"<code class="code">430a6b90503eef95c89295c8999c7981|someone@host.onmicrosoft.com</code>"</code></p>
                    </li></ol></div>
                <p>Send the user or group ID to Amazon Kendra as the <code class="code">_user_id</code>
                    or <code class="code">_group_ids</code> attribute when you call the <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_Query.html">Query</a> API. For example, the AWS CLI command that uses a
                    group to filter the query response looks like this:</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws kendra  query \
                --index-id <code class="replaceable">index ID</code>  
                --query-text "<code class="replaceable">query text</code>" 
                --attribute-filter '<span>{</span>
                   "EqualsTo":<span>{</span>
                     "Key": "_group_ids", 
                     "Value": <span>{</span>"StringValue": "430a6b90503eef95c89295c8999c7981|site owners"}
                  }}'</code></pre>
                <p>You can add up to 200 entries in the <code class="code">AccessControlList</code>
                    field.</p>
             
            

             
                <h3 id="context-filter-onedrivev2">User context filtering for Microsoft
                        OneDrive v2.0 data sources</h3>
                <p>A Microsoft OneDrive v2.0 data source returns section and page information
                    from OneDrive access control list (ACL) entities. Amazon Kendra uses the
                    OneDrive tenant domain to connect to the OneDrive instance and can filter based
                    on section name, page type, file name, file type and file contents. </p>

                <p>For standard objects, the <code class="code">_user_id</code> and <code class="code">_group_id</code> are
                    used as follows:</p>
                <div class="itemizedlist">
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p><code class="code">_user_id</code>— Your Microsoft OneDrive user email ID is
                            mapped to the <code class="code">_user_id</code> field.</p>
                    </li><li class="listitem">
                        <p><code class="code">_group_id</code>— Your Microsoft OneDrive group email is
                            mapped to the <code class="code">_group_id</code> field.</p>
                    </li></ul></div>
                <p>You can add up to 200 entries in the <code class="code">AccessControlList</code>
                    field.</p>
             

            
             
                <h3 id="context-filter-yammer">User context filtering for Microsoft
                        Yammer data sources</h3>
                <p>Amazon Kendra retrieves user and group information from Microsoft Yammer
                    when it indexes the documents on the site. The user and group information is
                    taken from the underlying Microsoft Yammer host site.</p>
                <p>When you use a Yammer user for user context filtering, Amazon Kendra gets
                    the user information from the Microsoft Yammer instance. The Microsoft Yammer
                    user IDs are mapped as follows: </p>
                <div class="itemizedlist">
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p><code class="code">_email_id</code>— Your Microsoft email ID is an
                            identifier that is necessary to configure each connector instance. Your
                            email ID can be found in the properties section of your Microsoft
                            account dashboard. </p>
                    </li><li class="listitem">
                        <p>
                            <code class="code">_group_id</code>— Group IDs exist in Microsoft Yammer
                            Instances where there are set access permissions. They are mapped from
                            the names of the groups in Microsoft Yammer. </p>
                    </li></ul></div>
                <p>You can add up to 200 entries in the <code class="code">AccessControlList</code>
                    field.</p>
                <p></p>
             
            
             
                <h3 id="context-filter-sharepoint-online">User context filtering for
                        Microsoft SharePoint data sources</h3>
                <p>Amazon Kendra retrieves user and group information from Microsoft
                    SharePoint when it indexes the documents on the site. To filter your documents,
                    provide user and group information when you call the <code class="code">Query</code>
                    API.</p>
                <p>To filter using a user name, use the user's email address. For example,
                    johnstiles@example.com.</p>

                <p>When you use a SharePoint group for user context filtering, calculate the
                    group ID as follows:</p>

                <p><b>For local groups</b></p>
                <div class="orderedlist">
                     
                     
                     
                <ol><li>
                        <p>Get the site name. For example,
                                <code class="code">https://host.onmicrosoft.com/sites/siteName.</code></p>
                    </li><li>
                        <p>Take the SHA256 hash of the site name. For example,
                                <code class="code">430a6b90503eef95c89295c8999c7981</code>.</p>
                    </li><li>
                        <p>Create the group ID by concatenating the SHA256 hash with a vertical
                            bar (|) and the group name. For example, if the group name is "site
                            owners", the group ID would be:</p>
                        <p><code class="code">"<code class="code">430a6b90503eef95c89295c8999c7981|site
                                owners</code>"</code></p>
                    </li></ol></div>
                <p>Send the group ID to Amazon Kendra as the <code class="code">_group_ids</code>
                    attribute when you call the <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_Query.html">Query API</a>. For
                    example, the AWS CLI command looks like this:</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws kendra  query \
                --index-id <code class="replaceable">index ID</code>  
                --query-text "<code class="replaceable">query text</code>" 
                --attribute-filter '<span>{</span>
                   "EqualsTo":<span>{</span>
                     "Key": "_group_ids", 
                     "Value": <span>{</span>"StringValue": "430a6b90503eef95c89295c8999c7981|site owners"}
                  }}'</code></pre>

                <p><b>For AD groups</b></p>
                <div class="orderedlist">
                     
                <ol><li>
                        <p>Use the AD group ID for configuring user context.</p>
                    </li></ol></div>
                <p>Send the group ID to Amazon Kendra as the <code class="code">_group_ids</code>
                    attribute when you call the <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_Query.html">Query</a> API. For
                    example, the AWS CLI command looks like this:</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws kendra  query \
                --index-id <code class="replaceable">index ID</code>  
                --query-text "<code class="replaceable">query text</code>" 
                --attribute-filter '<span>{</span>
                   "EqualsTo":<span>{</span>
                     "Key": "_group_ids", 
                     "Value": <span>{</span>"StringValue": "AD group"}
                  }}'</code></pre>
                <p>You can add up to 200 entries in the <code class="code">AccessControlList</code>
                    field.</p>
             
            
             
                <h3 id="context-filter-quip">User context filtering for Quip data
                        sources</h3>
                <p>When you use a Quip data source, Amazon Kendra gets the user information
                    from the Quip instance.</p>
                <p>The Quip user IDs are mapped as follows:</p>
                <div class="itemizedlist">
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p><code class="code">_user_id</code>—User IDs exist in Quip on files where
                            there are set access permissions. They are mapped from the user emails
                            as the IDs in Quip.</p>
                    </li></ul></div>
                <p>You can add up to 200 entries in the <code class="code">AccessControlList</code>
                    field.</p>
             
            
             
                <h3 id="context-filter-salesforce">User context filtering for
                        Salesforce data sources</h3>
                <p>A Salesforce data source returns user and group information from Salesforce
                    access control list (ACL) entities. You can apply user context filtering to
                    Salesforce standard objects and chatter feeds. User context filtering is not
                    available for Salesforce knowledge articles.</p>
                <p>For standard objects, the <code class="code">_user_id</code> and <code class="code">_group_ids</code>
                    are used as follows:</p>
                <div class="itemizedlist">
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p><code class="code">_user_id</code>—The user name of the Salesforce
                            user.</p>
                    </li><li class="listitem">
                        <p><code class="code">_group_ids</code>—</p>
                        <div class="itemizedlist">
                             
                             
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p>Name of the Salesforce <code class="code">Profile</code></p>
                            </li><li class="listitem">
                                <p>Name of the Salesforce <code class="code">Group</code></p>
                            </li><li class="listitem">
                                <p>Name of the Salesforce <code class="code">UserRole</code></p>
                            </li><li class="listitem">
                                <p>Name of the Salesforce <code class="code">PermissionSet</code></p>
                            </li></ul></div>
                    </li></ul></div>
                <p>For chatter feeds, the <code class="code">_user_id</code> and <code class="code">_group_ids</code> are
                    used as follows:</p>
                <div class="itemizedlist">
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p><code class="code">_user_id</code>—The user name of the Salesforce user.
                            Only available if the item is posted in the user's feed.</p>
                    </li><li class="listitem">
                        <p><code class="code">_group_ids</code>—Group IDs are used as follows. Only
                            available if the feed item is posted in a chatter or collaboration
                            group.</p>
                        <div class="itemizedlist">
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p>The name of the chatter or collaboration group.</p>
                            </li><li class="listitem">
                                <p>If the group is public, <code class="code">PUBLIC:ALL</code>.</p>
                            </li></ul></div>
                    </li></ul></div>
                <p>You can add up to 200 entries in the <code class="code">AccessControlList</code>
                    field.</p>
                
             
            
             
                <h3 id="context-filter-servicenow">User context filtering for
                        ServiceNow data sources</h3>
                <p>User context filtering for ServiceNow is supported only for the
                    TemplateConfiguration API and ServiceNow Connector v2.0. ServiceNowConfiguration
                    API and ServiceNow Connector v1.0. do not support user context filtering.</p>
                <p>When you use a ServiceNow data source, Amazon Kendra gets the user and
                    group information from the ServiceNow instance.</p>
                <p>The group and user IDs are mapped as follows:</p>
                <div class="itemizedlist">
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p><code class="code">_group_ids</code>—Group IDs exist in ServiceNow on files
                            where there are set access permissions. They are mapped from the role
                            names of <code class="code">sys_ids</code> in ServiceNow.</p>
                    </li><li class="listitem">
                        <p><code class="code">_user_id</code>—User IDs exist in ServiceNow on files
                            where there are set access permissions. They are mapped from the user
                            emails as the IDs in ServiceNow.</p>
                    </li></ul></div>
                <p>You can add up to 200 entries in the <code class="code">AccessControlList</code>
                    field.</p>
             
            
             
                <h3 id="context-filter-slack">User context filtering for Slack data
                        sources</h3>
                <p>When you use a Slack data source, Amazon Kendra gets the user information
                    from the Slack instance.</p>
                <p>The Slack user IDs are mapped as follows:</p>
                <div class="itemizedlist">
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p><code class="code">_user_id</code>—User IDs exist in Slack on messages and
                            channels where there are set access permissions. They are mapped from
                            the user emails as the IDs in Slack.</p>
                    </li></ul></div>
                <p>You can add up to 200 entries in the <code class="code">AccessControlList</code>
                    field.</p>
             
            
             
                <h3 id="context-filter-zendesk">User context filtering for Zendesk data
                        sources</h3>
                <p>When you use a Zendesk data source, Amazon Kendra gets the user and group
                    information from the Zendesk instance.</p>
                <p>The group and user IDs are mapped as follows:</p>
                <div class="itemizedlist">
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p><code class="code">_group_ids</code>—Group IDs exist in Zendesk tickets and
                            articles where there are set access permissions. They are mapped from
                            the names of the groups in Zendesk.</p>
                    </li><li class="listitem">
                        <p><code class="code">_user_id</code>—Group IDs exist in Zendesk tickets and
                            articles where there are set access permissions. They are mapped from
                            the user emails as the IDs in Zendesk.</p>
                    </li></ul></div>
                <p>You can add up to 200 entries in the <code class="code">AccessControlList</code>
                    field.</p>
             
        <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./filtering.html">Filtering and facet search</div><div id="next" class="next-link" accesskey="n" href="./query-responses-types.html">Query responses and response types</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Kendra&amp;topic_url=https://docs.aws.amazon.com/en_us/kendra/latest/dg/user-context-filter.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Kendra&amp;topic_url=https://docs.aws.amazon.com/en_us/kendra/latest/dg/user-context-filter.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>