<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Google Drive connector V2.0 - Amazon Kendra</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="data-source-v2-google-drive" /><meta name="default_state" content="data-source-v2-google-drive" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/kendra/latest/dg/data-source-v2-google-drive.html" /><meta name="description" content="Google Drive is a cloud-based file storage service. You can use Amazon Kendra to index documents and comments stored in shared drives, My Drives, and Shared with me folders in your Google Drive data source. You can index Google Workspace documents, as well as documents listed in" /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Kendra" /><meta name="guide" content="Developer Guide" /><meta name="abstract" content="Provides a conceptual overview of Amazon Kendra. Learn about Amazon Kendra features and get started indexing your documents using the console, CLI, and API." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/kendra/latest/dg/data-source-v2-google-drive.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/kendra/latest/dg/data-source-v2-google-drive.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/kendra/latest/dg/data-source-v2-google-drive.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/kendra/latest/dg/data-source-v2-google-drive.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/kendra/latest/dg/data-source-v2-google-drive.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/kendra/latest/dg/data-source-v2-google-drive.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/kendra/latest/dg/data-source-v2-google-drive.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/kendra/latest/dg/data-source-v2-google-drive.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/kendra/latest/dg/data-source-v2-google-drive.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/kendra/latest/dg/data-source-v2-google-drive.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/kendra/latest/dg/data-source-v2-google-drive.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/kendra/latest/dg/data-source-v2-google-drive.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/kendra/latest/dg/data-source-v2-google-drive.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/kendra/latest/dg/data-source-v2-google-drive.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/kendra/latest/dg/data-source-v2-google-drive.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/kendra/latest/dg/data-source-v2-google-drive.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/kendra/latest/dg/data-source-v2-google-drive.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/kendra/latest/dg/data-source-v2-google-drive.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/kendra/latest/dg/data-source-v2-google-drive.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/kendra/latest/dg/data-source-v2-google-drive.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/kendra/latest/dg/data-source-v2-google-drive.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/kendra/latest/dg/data-source-v2-google-drive.html" hreflang="x-default" /><meta name="feedback-item" content="Kendra" /><meta name="this_doc_product" content="Amazon Kendra" /><meta name="this_doc_guide" content="Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'kendra'}"></script><meta id="panorama-serviceSubSection" value="Developer Guide" /><meta id="panorama-serviceConsolePage" value="Google Drive connector V2.0" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Google Drive connector V2.0 - Amazon Kendra</title><meta name="pdf" content="/pdfs/kendra/latest/dg/kendra-dg.pdf#data-source-v2-google-drive" /><meta name="github" content="https://github.com/awsdocs/amazon-kendra-developer-guide/tree/master/doc_source/data-source-v2-google-drive.md" /><meta name="rss" content="amazon-kendra-release-notes.rss" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Kendra&amp;topic_url=http://docs.aws.amazon.com/en_us/kendra/latest/dg/data-source-v2-google-drive.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/kendra/latest/dg/data-source-v2-google-drive.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/kendra/latest/dg/data-source-v2-google-drive.html" /><meta name="keywords" content="Kendra,Amazon Kendra,search,intelligent search,natural language,index,question,keyword,data source,connector,FAQ,frequently asked question,Google Drive" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Kendra",
        "item" : "https://docs.aws.amazon.com/kendra/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide",
        "item" : "https://docs.aws.amazon.com/kendra/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Creating a data source connector",
        "item" : "https://docs.aws.amazon.com/kendra/latest/dg/data-source.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Data source connectors",
        "item" : "https://docs.aws.amazon.com/kendra/latest/dg/data-sources.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Google Drive",
        "item" : "https://docs.aws.amazon.com/kendra/latest/dg/data-source-google-drive.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "Google Drive connector V2.0",
        "item" : "https://docs.aws.amazon.com/kendra/latest/dg/data-source-google-drive.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/kendra/latest/dg/kendra-dg.pdf#data-source-v2-google-drive" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a href="https://github.com/awsdocs/amazon-kendra-developer-guide/tree/master/doc_source/data-source-v2-google-drive.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/kendra/index.html">Amazon Kendra</a><a href="what-is-kendra.html">Developer Guide</a></div><div id="page-toc-src"><a href="#supported-features-v2-google-drive">Supported features</a><a href="#prerequisites-v2-google-drive">Prerequisites</a><a href="#data-source-procedure-v2-google-drive">Connection
                    instructions</a><a href="#google-drive-notes">Notes</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="data-source-v2-google-drive">Google Drive connector V2.0</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Google Drive is a cloud-based file storage service. You can use Amazon Kendra to index documents and comments stored in shared drives, My Drives, and Shared with
            me folders in your Google Drive data source. You can index Google Workspace
            documents, as well as documents listed in <a href="https://docs.aws.amazon.com/kendra/latest/dg/index-document-types.html">Types of documentation</a>. You
            can also use inclusion and exclusion filters to index content by file name, file type,
            and file path.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Support for Google Drive connector V1.0 / Google DriveConfiguration API is
   scheduled to end in 2023. We recommend migrating to or using Google Drive connector V2.0 /
   TemplateConfiguration API.</p></div></div><p>For troubleshooting your Amazon Kendra Google Drive data source connector, see <a href="./troubleshooting-data-sources.html">Troubleshooting data sources</a>.</p><div class="highlights" id="inline-topiclist"><h6>Topics</h6><ul><li><a href="#supported-features-v2-google-drive">Supported features</a></li><li><a href="#prerequisites-v2-google-drive">Prerequisites</a></li><li><a href="#data-source-procedure-v2-google-drive">Connection
                    instructions</a></li><li><a href="#google-drive-notes">Notes</a></li></ul></div>
            <h2 id="supported-features-v2-google-drive">Supported features</h2>
            <div class="itemizedlist">
                 
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>Field mappings</p>
                </li><li class="listitem">
                    <p>User context filtering</p>
                </li><li class="listitem">
                    <p>Virtual private cloud (VPC)</p>
                </li><li class="listitem">
                    <p>Sync all documents/ Sync only new, modified, or deleted documents</p>
                </li><li class="listitem">
                    <p>Inclusion/exclusion filters</p>
                </li></ul></div>
         
            <h2 id="prerequisites-v2-google-drive">Prerequisites</h2>
            <p>Before you can use Amazon Kendra to index your Google Drive data
                source, make these changes in your Google Drive and AWS
                accounts.</p>

            <p><b>In Google Drive, make sure you have:</b></p>
            <div class="itemizedlist">
                 
                 
                 
                 
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p><b>Either</b> been granted access by a super
                        admin role <b>or</b> are a user with
                        administrative privileges. You do not need a super admin role for yourself
                        if you have been granted access by a super admin role.</p>
                </li><li class="listitem">
                    <p>Created a service account with <b>Enable G Suite Domain-wide
                            Delegation</b> activated and generated a JSON private key using
                        the account.</p>
                </li><li class="listitem">
                    <p>Added Admin SDK API and Google Drive API in your user
                        account.</p>
                </li><li class="listitem">
                    <p>Configured Google Drive Service Account connection credentials
                        containing your admin account email, client email (service account email),
                        and private key. See <a href="https://cloud.google.com/iam/docs/keys-create-delete" rel="noopener noreferrer" target="_blank"><span>Google Cloud
                            documentation on creating and deleting service account
                        keys</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
                </li><li class="listitem">
                    <p><b>Optional:</b> Configured an OAuth 2.0
                        credential token that can identify Amazon Kendra and generate a OAuth
                        client id, a client secret, and a refresh token as connection credentials.
                        See <a href="https://developers.google.com/identity/protocols/oauth2" rel="noopener noreferrer" target="_blank"><span>Google documentation on using OAuth 2.0 to access APIs</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
                </li><li class="listitem">
                    <p>Added (or asked a user with a super admin role to add) the following OAuth
                        scopes to your service account using a super admin role:</p>
                    <div class="itemizedlist">
                         
                         
                         
                         
                         
                         
                         
                         
                         
                         
                         
                    <ul class="itemizedlist"><li class="listitem">
                            <p>https://www.googleapis.com/auth/drive</p>
                        </li><li class="listitem">
                            <p>https://www.googleapis.com/auth/drive.file</p>
                        </li><li class="listitem">
                            <p>https://www.googleapis.com/auth/drive.readonly</p>
                        </li><li class="listitem">
                            <p>https://www.googleapis.com/auth/cloud-platform</p>
                        </li><li class="listitem">
                            <p>https://www.googleapis.com/auth/forms.body.readonly</p>
                        </li><li class="listitem">
                            <p>https://www.googleapis.com/auth/drive.metadata.readonly</p>
                        </li><li class="listitem">
                            <p>https://www.googleapis.com/auth/admin.directory.user.readonly</p>
                        </li><li class="listitem">
                            <p>https://www.googleapis.com/auth/admin.directory.group.readonly</p>
                        </li><li class="listitem">
                            <p>https://www.googleapis.com/auth/admin.directory.user.alias.readonly</p>
                        </li><li class="listitem">
                            <p>https://www.googleapis.com/auth/admin.directory.userschema.readonly</p>
                        </li><li class="listitem">
                            <p>https://www.googleapis.com/auth/admin.directory.group.member.readonly</p>
                        </li></ul></div>
                </li><li class="listitem"> 
    <p>Checked each document is unique in Google Drive and across other 
    data sources you plan to use for the same index. Each data source that you 
    want to use for an index must not contain the same document across the data 
    sources. Document IDs are global to an index and must be unique per index.</p>
 </li></ul></div>
            

 <p><b>In your AWS account, make sure you
                have:</b></p>
        <div class="itemizedlist">
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><a href="https://docs.aws.amazon.com/kendra/latest/dg/create-index.html">Created
                        an Amazon Kendra index</a> and, if using the API, noted the index
                    ID.</p>
            </li><li class="listitem">
                <p><a href="https://docs.aws.amazon.com/kendra/latest/dg/iam-roles.html#iam-roles-ds">Created an IAM role</a> for your data source and, if
                    using the API, noted the ARN of the IAM role.</p>
                    

 <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>If you change your authentication type and credentials, you must 
 update your IAM role to access the correct AWS Secrets Manager secret ID.</p></div></div>


            </li><li class="listitem">
                <p>Stored your Google Drive authentication credentials in an AWS
                    Secrets Manager secret and, if using the API, noted the ARN of the
                    secret.</p>
                

 <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>It’s recommended that you regularly refresh or rotate your credentials 
  and secret. Provide only the necessary access level for your own security. 
  It’s <b>not</b> recommended to re-use
  credentials and secrets across data sources, and connector versions 1.0 and
  2.0 (where applicable).</p></div></div>


            </li></ul></div>
        <p>If you don’t have an existing IAM role or secret, you can use the
            console to create a new IAM role and Secrets Manager secret when you
            connect your Google Drive data source to Amazon Kendra. If you are using the
            API, you must provide the ARN of an existing IAM role and Secrets Manager secret, and an index ID.</p>


         
            <h2 id="data-source-procedure-v2-google-drive">Connection
                    instructions</h2>

            <p>To connect Amazon Kendra to your Google Drive data source, you must
                provide the necessary details of your Google Drive data source so that Amazon Kendra can access your data. If you have not yet configured
                Google Drive for Amazon Kendra see <a href="#prerequisites-v2-google-drive">Prerequisites</a>.</p>

            

             
                <awsdocs-tabs><dl style="display: none">
                    <dt>Console</dt><dd tab-id="console">
                            <p><b>To connect Amazon Kendra to
                                    Google Drive</b>
                            </p>
                            <div class="procedure"><ol><li>
                                    <p>Sign in to the AWS Management Console and
                                        open the <a href="https://console.aws.amazon.com/kendra/" rel="noopener noreferrer" target="_blank"><span>Amazon Kendra console</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
                                </li><li>
                                    <p>From the left navigation pane, choose
                                            <b>Indexes</b> and then choose the index
                                        you want to use from the list of indexes.</p>
                                    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>You can choose to configure or edit your
                                                <b>User access control</b> settings
                                            under <b>Index settings</b>. </p></div></div>
                                </li><li>
                                    <p>On the <b>Getting started</b> page, choose
                                            <b>Add data source</b>.</p>
                                </li><li>
                                    <p>On the <b>Add data source</b> page, choose
                                            <b>Google Drive connector V2.0</b>,
                                        and then choose <b>Add connector</b>.</p>
                                </li><li> 
    <p>On the <b>Specify data source details</b> page, enter the following information:</p>
        <ol><li>
            <p>In <b>Name and description</b>, for <b>Data source name</b>—Enter a name for your data source. You can include hyphens but not spaces.</p>
            </li><li>
            <p>(Optional)<b> Description</b>—Enter an optional description for your data source.</p>
            </li><li>
            <p>In <b>Language</b>, for <b>Default language</b>—A language to filter your documents for the index. Unless you specify otherwise,
            the language defaults to English. Language specified in the document metadata overrides the selected language.</p>
            </li><li>
            <p>In <b>Tags</b>, for <b>Add new tag</b>—Tags to search and filter your resources or track your AWS costs.</p>
            </li><li>
            <p>Choose <b>Next</b>.</p>
            </li></ol>
      </li><li>
                                    <p>On the <b>Define access and security</b>
                                        page, enter the following information:</p>
                                    <ol><li>
                                            <p>For
                                                <b>Authentication</b>—Choose
                                                between <b>Google service account</b>
                                                and <b>OAuth 2.0 authentication</b>
                                                based on your use case.</p>
                                        </li><li>
                                            <p><b>AWS
                                                  Secrets Manager secret</b>—Choose
                                                an existing secret or create a new Secrets Manager secret to store your Google Drive
                                                authentication credentials. If you choose to create
                                                a new secret an AWS
                                                Secrets Manager secret window opens.</p>
                                            <ol><li>
                                                  <p>If you chose <b>Google service
                                                  account</b>, enter the <b>Secret
                                                  Name</b>, <b>Admin account
                                                  email</b>, <b>Client
                                                  email</b>, and <b>Private
                                                  Key</b> that you created in your service
                                                  account and choose <b>Save and add
                                                  secret</b>.</p>
                                                </li><li>
                                                  <p>If you chose <b>OAuth 2.0
                                                  authentication</b>, enter the details of
                                                  <b>Secret Name</b>, <b>Client
                                                  ID</b>, <b>Client secret</b>
                                                  and <b>Refresh token</b> that you
                                                  created in your service account and choose
                                                  <b>Save and add secret</b>.</p>
                                                </li></ol>
                                        </li><li>
   <p><b>Virtual Private Cloud (VPC)</b>—You can choose to use a VPC. If
   so, you must add <b>Subnets</b> and <b>VPC security groups</b>.</p>
   
   </li><li>
                                            <p>(For Google service account authentication users
                                                only) <b>Identity
                                                crawler</b>—Choose to activate Amazon Kendra identity crawler to sync identity
                                                information. If you choose to turn identity crawler
                                                off, you must upload the principal information using
                                                the <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_PutPrincipalMapping.html">PutPrincipalMapping </a>API.</p>
                                        </li><li>
    <p><b>IAM role</b>—Choose an existing IAM 
    role or create a new IAM role to access your repository credentials and index content.</p>
    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>IAM roles used for indexes cannot be used for data sources. If you are unsure 
       if an existing role is used for an index or FAQ, choose <b>Create a new role</b> to avoid 
       errors.</p></div></div>
   </li><li>
                                            <p>Choose <b>Next</b>.</p>
                                        </li></ol>
                                </li><li>
                                    <p>On the <b>Configure sync settings</b> page,
                                        enter the following information:</p>
                                    <ol><li>
                                            <p><b>Sync contents</b>—Select
                                                from the following choices to index <b>My
                                                  Drive &amp; Shared with me</b>,
                                                  <b>Shared drives</b>, and
                                                  <b>Comments</b>. Files are crawled
                                                by default.</p>
                                        </li><li>
                                            <p>In <b>Additional configuration -
                                                  optional</b> enter the following optional
                                                information:</p>
                                            <ol><li>
                                                  <p><b>User email</b>—Add
                                                  user emails you want to include or exclude.</p>
                                                </li><li>
                                                  <p><b>Shared
                                                  drives</b>—Add the shared drive
                                                  names you want to include or exclude.</p>
                                                </li><li>
                                                  <p><b>Mime types</b>—Add
                                                  MIME types you want to include or exclude.</p>
                                                </li><li>
                                                  <p><b>Attachment regex
                                                  patterns</b>—Add regular expression
                                                  patterns to include or exclude certain attachments
                                                  for all supported entities. You can add up to 100
                                                  patterns.</p>
                                                </li></ol>
                                        </li><li>
                                            <p>For <b>Sync mode</b>, choose how you
                                                want to update your index when your data source
                                                content changes. When you sync your data source with
                                                  Amazon Kendra for the first time, all content
                                                is synced by default.</p>
                                            <div class="itemizedlist">
                                                 
                                                 
                                                 
                                            <ul class="itemizedlist"><li class="listitem">
                                                  <p><b>Full sync</b>—Sync
                                                  all content regardless of the previous sync
                                                  status.</p>
                                                </li><li class="listitem">
                                                  <p><b>New or modified documents
                                                  sync</b>—Sync only new and modified
                                                  documents.</p>
                                                </li><li class="listitem">
                                                  <p><b>New, modified, or deleted
                                                  documents sync</b>—Sync only new,
                                                  modified, and deleted documents.</p>
                                                </li></ul></div>
                                            <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>Google Drive API does not support retrieving
                                                  comments from a permanently deleted file. Comments
                                                  from trashed files are retrievable. When a file is
                                                  trashed, the connector will delete comments from
                                                  the Amazon Kendra index.</p></div></div>
                                        </li><li>
                                            <p>In <b>Sync run schedule</b>, for
                                                  <b>Frequency</b>—How often
                                                  Amazon Kendra will sync with your data
                                                source.</p>
                                        </li><li>
                                            <p>Choose <b>Next</b>.</p>
                                        </li></ol>
                                </li><li>
                                    <p>On the <b>Set field mappings</b> page, enter
                                        the following information:</p>
                                    <ol><li>
                                            <p>For <b>Files</b>—Select from
                                                the Amazon Kendra generated default data source
                                                fields you want to map to your index.</p>
                                        </li><li>
                                            <p>For <b>Comments</b>—Select
                                                from the Amazon Kendra generated default data
                                                source fields you want to map to your index.</p>
                                            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Google Drive API does not support creating
                                                  custom fields. Custom field mapping is not
                                                  available for the Google Drive connector.</p></div></div>
                                        </li><li>
                                            <p>Choose <b>Next</b>.</p>
                                        </li></ol>
                                </li><li>
   <p>On the <b>Review and create</b> page, check that
   the information you have entered is correct and then select
   <b>Add data source</b>. You can also choose to edit your information from this page. 
   Your data source will appear on the <b>Data sources</b> page after it’s added successfully.</p>
   
   </li></ol></div>
                        </dd>

                    

                    <dt>API</dt><dd tab-id="api">
                            <p><b>To connect Amazon Kendra to
                                    Google Drive</b></p>

                            

                            <p>You must specify a JSON of the <a href="https://docs.aws.amazon.com/kendra/latest/dg/ds-schemas.html">data source
                                    schema</a> using the <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_TemplateConfiguration.html">TemplateConfiguration</a> API. You must provide the
                                following information:</p>

                            <div class="itemizedlist">
                                 
                                 
                                 
                                 
                            <ul class="itemizedlist"><li class="listitem">
                                    <p><b>Data
                                        source</b>—Specify the data source as
                                            <code class="code">GOOGLEDRIVEV2</code>.</p>
                                </li><li class="listitem">
    <p><b>Type</b>—Specify
    <code class="code">TEMPLATE</code> as the Type when you call <code class="code">CreateDataSource</code>.</p>
    
   </li><li class="listitem">
                                    <p><b>Secret Amazon Resource Name
                                            (ARN)</b>—Provide the Amazon Resource Name
                                        (ARN) of a Secrets Manager secret that contains the
                                        authentication credentials you created in your
                                        Google Drive account. If you use Google service
                                        account authentication, the secret is stored in a JSON
                                        structure with the following keys: </p>
                                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "clientEmail": "service account email",
    "adminAccountEmail": "user account email",
    "privateKey": "private key"
}</code></pre>
                                    <p>If you use OAuth 2.0 authentication, the secret is stored
                                        in a JSON structure with the following keys:</p>
                                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "clientID": "OAuth Client ID",
    "clientSecret": "client secret",
    "refreshToken": "refresh token"
}</code></pre>
                                    

 <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>It’s recommended that you regularly refresh or rotate your credentials 
  and secret. Provide only the necessary access level for your own security. 
  It’s <b>not</b> recommended to re-use
  credentials and secrets across data sources, and connector versions 1.0 and
  2.0 (where applicable).</p></div></div>


                                </li><li class="listitem">
    <p><b>IAM role</b>—Specify <code class="code">RoleArn</code>
     when you call <code class="code">CreateDataSource</code> to provide an IAM role with permissions to access
    your Secrets Manager secret and to call the required public
    APIs for the Google Drive connector and Amazon Kendra. 
    For more information, see <a href="https://docs.aws.amazon.com/kendra/latest/dg/iam-roles.html#iam-roles-ds">IAM roles for Google Drive 
    data sources</a>.</p>
    
   </li></ul></div>

                            

                            <p>You can also add the following optional features:</p>
                            <div class="itemizedlist">
                                 
                                 
                                 
                                 
                                 
                                 
                            <ul class="itemizedlist"><li class="listitem">
    <p>
    <b>Virtual Private Cloud
    (VPC)</b>—Specify
    <code class="code">VpcConfiguration</code> when you call <code class="code">CreateDataSource</code>. 
    For more information, see <a href="./vpc-configuration.html">Configuring Amazon Kendra to use an Amazon VPC</a>.</p>
    
   </li><li class="listitem">
    <p><b>Sync mode</b>—Specify
                                        whether Amazon Kendra should update your index by
                                        syncing all documents or only new, modified, and deleted
                                        documents. You can choose between:</p>
                                    <div class="itemizedlist">
                                         
                                         
                                         
                                    <ul class="itemizedlist"><li class="listitem">
                                            <p><code class="code">FORCED_FULL_CRAWL</code> to freshly re-crawl
                                                all content and replace existing content each time
                                                your data source syncs with your index</p>
                                        </li><li class="listitem">
                                            <p><code class="code">FULL_CRAWL</code> to incrementally crawl
                                                only new, modified, and deleted content each time
                                                your data source syncs with your index</p>
                                        </li><li class="listitem">
                                            <p><code class="code">CHANGE_LOG</code> to incrementally crawl
                                                only new and modified content each time your data
                                                source syncs with your index</p>
                                        </li></ul></div>
   
   
                                    <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>Google Drive API does not support retrieving comments
                                            from a permanently deleted file. Comments from trashed
                                            files are retrievable. When a file is trashed, the
                                            connector will delete comments from the Amazon Kendra index.</p></div></div>
                                </li><li class="listitem"> 
     
      <p><b>Enable identity
      crawler</b>—Specify whether to activate
      identity crawler. If identity crawler is deactivated, you
      must upload the principal information using the <a href="https://docs.aws.amazon.com/kendra/latest/APIReference/API_PutPrincipalMapping.html">PutPrincipalMapping</a> API. Crawling identity
      information on users and groups with access to certain
      documents is useful for user context filtering. Search
      results are filtered based on the user or their group access
      to documents. For more information, see <a href="https://docs.aws.amazon.com/kendra/latest/dg/user-context-filter.html#context-filter-user-incl-datasources">Filtering on user context</a>.</p>
      </li><li class="listitem">
                                    <p>
                                        <b>Inclusion and exclusion
                                            filters</b>—You can specify whether to
                                        include or exclude certain user accounts, shared drives,
                                        MIME types, and files.</p>
                                    
     <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Most data sources use regular expression patterns, 
     which are inclusion or exclusion patterns referred to as filters. 
     If you specify an inclusion filter, only content that
     matches the inclusion filter is indexed. Any document that
     doesn’t match the inclusion filter isn’t indexed. If you
     specify an inclusion and exclusion filter, documents that
     match the exclusion filter are not indexed, even if they
     match the inclusion filter.</p></div></div>
    
   
                                </li><li class="listitem">
                                    <p>
                                        <b>Field mappings</b>—You
                                        can only built-in index fields for the Amazon Kendra
                                        Google Drive connector. Custom field mapping is not
                                        available for the Google Drive connector because of
                                        API limitations. For more information, see <a href="https://docs.aws.amazon.com/kendra/latest/dg/field-mapping.html">Mapping data
                                            source fields</a>.</p>
                                </li><li class="listitem">
    <p>
    <b>User context filtering</b>—Amazon Kendra 
    crawls the access control list (ACL) for your data source by default. The ACL 
    information is used to filter search results based on the user or their
    group access to documents. For more information, see <a href="https://docs.aws.amazon.com/kendra/latest/dg/user-context-filter.html#datasource-context-filter">User context
    filtering for Google Drive data sources</a>.</p>
    
   </li></ul></div>
                            <p>For a list of other important JSON keys to configure, see <a href="https://docs.aws.amazon.com/kendra/latest/dg/ds-schemas.html#ds-google-drive-schema">Google Drive template schema</a>.</p>
                        </dd>
                </dl></awsdocs-tabs>
             
         
            <h2 id="google-drive-notes">Notes</h2>
            <div class="itemizedlist">
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>Custom field mapping is not available for Google Drive connector as
                        the Google Drive UI does not support creating custom fields.</p>
                </li><li class="listitem">
                    <p>Google Drive API does not support retrieving comments from a
                        permamently deleted file. Comments are retrievable, however, for trashed
                        files. When a file is trashed, the Amazon Kendra connector will delete
                        comments from the Amazon Kendra index.</p>
                </li><li class="listitem">
                    <p>Google Drive API does not return comments present in a .docx
                        file.</p>
                </li></ul></div>
        <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./data-source-v1-google-drive.html">Google Drive connector
                V1.0</div><div id="next" class="next-link" accesskey="n" href="./data-source-jira.html">Jira</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Kendra&amp;topic_url=https://docs.aws.amazon.com/en_us/kendra/latest/dg/data-source-v2-google-drive.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Kendra&amp;topic_url=https://docs.aws.amazon.com/en_us/kendra/latest/dg/data-source-v2-google-drive.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>