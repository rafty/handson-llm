<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>AWS::Events::Rule - AWS CloudFormation</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="aws-resource-events-rule" /><meta name="default_state" content="aws-resource-events-rule" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-events-rule.html" /><meta name="description" content="When you create or update a rule, incoming events might not immediately start matching to new or updated rules. Allow a short period of time for changes to take effect." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudFormation" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Create and manage AWS infrastructure deployments predictably and repeatedly using AWS CloudFormation with this User Guide." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json;toc-AWS_Events.json" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-events-rule.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-resource-events-rule.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSCloudFormation/latest/UserGuide/aws-resource-events-rule.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-resource-events-rule.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSCloudFormation/latest/UserGuide/aws-resource-events-rule.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-events-rule.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-events-rule.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-resource-events-rule.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSCloudFormation/latest/UserGuide/aws-resource-events-rule.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-resource-events-rule.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSCloudFormation/latest/UserGuide/aws-resource-events-rule.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-resource-events-rule.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSCloudFormation/latest/UserGuide/aws-resource-events-rule.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-resource-events-rule.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSCloudFormation/latest/UserGuide/aws-resource-events-rule.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-resource-events-rule.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSCloudFormation/latest/UserGuide/aws-resource-events-rule.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-resource-events-rule.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSCloudFormation/latest/UserGuide/aws-resource-events-rule.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSCloudFormation/latest/UserGuide/aws-resource-events-rule.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSCloudFormation/latest/UserGuide/aws-resource-events-rule.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-events-rule.html" hreflang="x-default" /><meta name="feedback-item" content="EventBridge" /><meta name="this_doc_product" content="AWS CloudFormation" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudformation'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="AWS::Events::Rule" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>AWS::Events::Rule - AWS CloudFormation</title><meta name="github" content="https://github.com/awsdocs/aws-cloudformation-user-guide/tree/main/doc_source/aws-resource-events-rule.md" /><meta name="rss" content="aws-cloudformation-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=92" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=EventBridge&amp;topic_url=http://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-events-rule.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-events-rule.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-events-rule.html" /><meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation Designer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudFormation",
        "item" : "https://docs.aws.amazon.com/cloudformation/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Amazon EventBridge resource type reference",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/AWS_Events.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "AWS::Events::Rule",
        "item" : "https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/AWS_Events.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="https://github.com/awsdocs/aws-cloudformation-user-guide/tree/main/doc_source/aws-resource-events-rule.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/cloudformation/index.html">AWS CloudFormation</a><a href="AWS_Events.html">User Guide</a></div><div id="page-toc-src"><a href="#aws-resource-events-rule-syntax">Syntax</a><a href="#aws-resource-events-rule-properties">Properties</a><a href="#aws-resource-events-rule-return-values">Return values</a><a href="#aws-resource-events-rule--examples">Examples</a></div><div id="page-filters" style="display:none"><filter label="All" id="All"></filter><filter label="JSON" id="JSON"></filter><filter label="YAML" id="YAML"></filter></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="aws-resource-events-rule">AWS::Events::Rule</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Creates or updates the specified rule. Rules are enabled by default, or based on value of
      the state. You can disable a rule using <a href="https://docs.aws.amazon.com/eventbridge/latest/APIReference/API_DisableRule.html">DisableRule</a>.</p><p>A single rule watches for events from a single event bus. Events generated by AWS services
      go to your account's default event bus. Events generated by SaaS partner services or
      applications go to the matching partner event bus. If you have custom applications or
      services, you can specify whether their events go to your default event bus or a custom event
      bus that you have created. For more information, see <a href="https://docs.aws.amazon.com/eventbridge/latest/APIReference/API_CreateEventBus.html">CreateEventBus</a>.</p><p>If you are updating an existing rule, the rule is replaced with what you specify in this
        <code class="code">PutRule</code> command. If you omit arguments in <code class="code">PutRule</code>, the old values
      for those arguments are not kept. Instead, they are replaced with null values.</p><p>When you create or update a rule, incoming events might not immediately start matching to
      new or updated rules. Allow a short period of time for changes to take effect.</p><p>A rule must contain at least an EventPattern or ScheduleExpression. Rules with
      EventPatterns are triggered when a matching event is observed. Rules with ScheduleExpressions
      self-trigger based on the given schedule. A rule can have both an EventPattern and a
      ScheduleExpression, in which case the rule triggers on matching events as well as on a
      schedule.</p><p>Most services in AWS treat : or / as the same character in Amazon Resource Names (ARNs).
      However, EventBridge uses an exact match in event patterns and rules. Be sure to use the
      correct ARN characters when creating event patterns so that they match the ARN syntax in the
      event you want to match.</p><p>In EventBridge, it is possible to create rules that lead to infinite loops, where a rule
      is fired repeatedly. For example, a rule might detect that ACLs have changed on an S3 bucket,
      and trigger software to change them to the desired state. If the rule is not written
      carefully, the subsequent change to the ACLs fires the rule again, creating an infinite
      loop.</p><p>To prevent this, write the rules so that the triggered actions do not re-fire the same
      rule. For example, your rule could fire only if ACLs are found to be in a bad state, instead
      of after any change. </p><p>An infinite loop can quickly cause higher than expected charges. We recommend that you use
      budgeting, which alerts you when charges exceed your specified limit. For more information,
      see <a href="https://docs.aws.amazon.com/awsaccountbilling/latest/aboutv2/budgets-managing-costs.html">Managing Your Costs with
        Budgets</a>.</p><h2 id="aws-resource-events-rule-syntax">Syntax</h2><p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p><div id="JSON" name="JSON" class="section langfilter"><h3 id="aws-resource-events-rule-syntax.json">JSON</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Type" : "AWS::Events::Rule",
  "Properties" : <span>{</span>
      "<a href="#cfn-events-rule-description">Description</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-events-rule-eventbusname">EventBusName</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-events-rule-eventpattern">EventPattern</a>" : <code class="replaceable">Json</code>,
      "<a href="#cfn-events-rule-name">Name</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-events-rule-rolearn">RoleArn</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-events-rule-scheduleexpression">ScheduleExpression</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-events-rule-state">State</a>" : <code class="replaceable">String</code>,
      "<a href="#cfn-events-rule-targets">Targets</a>" : <code class="replaceable">[ <a href="./aws-properties-events-rule-target.html">Target</a>, ... ]</code>
    }
}
</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h3 id="aws-resource-events-rule-syntax.yaml">YAML</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Type: AWS::Events::Rule
Properties: 
  <a href="#cfn-events-rule-description">Description</a>: <code class="replaceable">String</code>
  <a href="#cfn-events-rule-eventbusname">EventBusName</a>: <code class="replaceable">String</code>
  <a href="#cfn-events-rule-eventpattern">EventPattern</a>: <code class="replaceable">Json</code>
  <a href="#cfn-events-rule-name">Name</a>: <code class="replaceable">String</code>
  <a href="#cfn-events-rule-rolearn">RoleArn</a>: <code class="replaceable">String</code>
  <a href="#cfn-events-rule-scheduleexpression">ScheduleExpression</a>: <code class="replaceable">String</code>
  <a href="#cfn-events-rule-state">State</a>: <code class="replaceable">String</code>
  <a href="#cfn-events-rule-targets">Targets</a>: <code class="replaceable">
    - <a href="./aws-properties-events-rule-target.html">Target</a></code>
</code></pre></div><h2 id="aws-resource-events-rule-properties">Properties</h2><div class="variablelist"><dl><dt><a id="cfn-events-rule-description"></a><span class="term"><code class="code">Description</code></span></dt><dd>
         <p>The description of the rule.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Maximum</em>: <code class="code">512</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt><a id="cfn-events-rule-eventbusname"></a><span class="term"><code class="code">EventBusName</code></span></dt><dd>
         <p>The name or ARN of the event bus associated with the rule. If you omit this, the default
      event bus is used.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Minimum</em>: <code class="code">1</code></p><p><em>Maximum</em>: <code class="code">256</code></p><p><em>Pattern</em>: <code class="code">[/\.\-_A-Za-z0-9]+</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt><a id="cfn-events-rule-eventpattern"></a><span class="term"><code class="code">EventPattern</code></span></dt><dd>
         <p>The event pattern of the rule. For more information, see <a href="https://docs.aws.amazon.com/eventbridge/latest/userguide/eventbridge-and-event-patterns.html">Events and Event
      Patterns</a> in the <em>Amazon EventBridge User Guide</em>.</p>
      <p><em>Required</em>: Conditional</p><p><em>Type</em>: Json</p><p><em>Maximum</em>: <code class="code">4096</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt><a id="cfn-events-rule-name"></a><span class="term"><code class="code">Name</code></span></dt><dd>
         <p>The name of the rule.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Minimum</em>: <code class="code">1</code></p><p><em>Maximum</em>: <code class="code">64</code></p><p><em>Pattern</em>: <code class="code">[\.\-_A-Za-z0-9]+</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p></dd><dt><a id="cfn-events-rule-rolearn"></a><span class="term"><code class="code">RoleArn</code></span></dt><dd>
         <p>The Amazon Resource Name (ARN) of the role that is used for target invocation.</p>
         <p>If you're setting an event bus in another account as the target and that account granted
      permission to your account through an organization instead of directly by the account ID, you
      must specify a <code class="code">RoleArn</code> with proper permissions in the <code class="code">Target</code>
      structure, instead of here in this parameter.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Minimum</em>: <code class="code">1</code></p><p><em>Maximum</em>: <code class="code">1600</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt><a id="cfn-events-rule-scheduleexpression"></a><span class="term"><code class="code">ScheduleExpression</code></span></dt><dd>
         <p>The scheduling expression. For example, "cron(0 20 * * ? *)", "rate(5 minutes)". For more information, see <a href="https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-create-rule-schedule.html">Creating an Amazon EventBridge rule that runs on a schedule</a>.</p>
      <p><em>Required</em>: Conditional</p><p><em>Type</em>: String</p><p><em>Maximum</em>: <code class="code">256</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt><a id="cfn-events-rule-state"></a><span class="term"><code class="code">State</code></span></dt><dd>
         <p>The state of the rule.</p>
      <p><em>Required</em>: No</p><p><em>Type</em>: String</p><p><em>Allowed values</em>: <code class="code">DISABLED | ENABLED</code></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd><dt><a id="cfn-events-rule-targets"></a><span class="term"><code class="code">Targets</code></span></dt><dd>
         <p>Adds the specified targets to the specified rule, or updates the targets if they are
      already associated with the rule.</p>
         <p>Targets are the resources that are invoked when a rule is triggered.</p>
         <p>The maximum number of entries per request is 10.</p>
         <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Each rule can have up to five (5) targets associated with it at one time.</p></div></div>
         <p>For a list of services you can configure as targets for events, see <a href="https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-targets.html">EventBridge targets</a>
      in the <em>Amazon EventBridge User Guide</em>.</p>
         <p>Creating rules with built-in targets is supported only in the AWS Management Console. The
      built-in targets are:</p>
         <div class="itemizedlist">
             
             
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>
                  <code class="code">Amazon EBS CreateSnapshot API call</code>
               </p>
            </li><li class="listitem">
               <p>
                  <code class="code">Amazon EC2 RebootInstances API call</code>
               </p>
            </li><li class="listitem">
               <p>
                  <code class="code">Amazon EC2 StopInstances API call</code>
               </p>
            </li><li class="listitem">
               <p>
                  <code class="code">Amazon EC2 TerminateInstances API
        call</code>
               </p>
            </li></ul></div>
         <p>For some target types, <code class="code">PutTargets</code> provides target-specific parameters. If the
      target is a Kinesis data stream, you can optionally specify which shard the event goes to by
      using the <code class="code">KinesisParameters</code> argument. To invoke a command on multiple EC2
      instances with one rule, you can use the <code class="code">RunCommandParameters</code> field.</p>
         <p>To be able to make API calls against the resources that you own, Amazon EventBridge
      needs the appropriate permissions:  
      </p>
         <div class="itemizedlist">
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>For AWS Lambda and Amazon SNS
        resources, EventBridge relies on resource-based policies.</p>
            </li><li class="listitem">
               <p>For EC2 instances, Kinesis Data Streams, 
        AWS Step Functions state machines and API Gateway APIs, EventBridge relies on
        IAM roles that you specify in the <code class="code">RoleARN</code> argument in <code class="code">PutTargets</code>.</p>
            </li></ul></div>
         <p>For more information, see <a href="https://docs.aws.amazon.com/eventbridge/latest/userguide/auth-and-access-control-eventbridge.html">Authentication
      and Access Control</a> in the <em>Amazon EventBridge User Guide</em>.</p>
         <p>If another AWS account is in the same region and has granted you permission (using
        <code class="code">PutPermission</code>), you can send events to that account. Set that account's event
      bus as a target of the rules in your account. To send the matched events to the other account,
      specify that account's event bus as the <code class="code">Arn</code> value when you run
        <code class="code">PutTargets</code>. If your account sends events to another account, your account is
      charged for each sent event. Each event sent to another account is charged as a custom event.
      The account receiving the event is not charged. For more information, see <a href="http://aws.amazon.com/eventbridge/pricing/" rel="noopener noreferrer" target="_blank"><span>Amazon EventBridge
        Pricing</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
         <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>
               <code class="code">Input</code>, <code class="code">InputPath</code>, and <code class="code">InputTransformer</code> are not
        available with <code class="code">PutTarget</code> if the target is an event bus of a different AWS 
        account.</p></div></div>
         <p>If you are setting the event bus of another account as the target, and that account
      granted permission to your account through an organization instead of directly by the account
      ID, then you must specify a <code class="code">RoleArn</code> with proper permissions in the
        <code class="code">Target</code> structure. For more information, see <a href="https://docs.aws.amazon.com/eventbridge/latest/userguide/eventbridge-cross-account-event-delivery.html">Sending and
          Receiving Events Between AWS Accounts</a> in the <em>Amazon EventBridge User
        Guide</em>.</p>
         <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>If you have an IAM role on a cross-account event bus target, 
      a <code class="code">PutTargets</code> call without a role on the same target (same <code class="code">Id</code> and <code class="code">Arn</code>) will not remove the role.</p></div></div>
         <p>For more information about enabling cross-account events, see <a href="https://docs.aws.amazon.com/eventbridge/latest/APIReference/API_PutPermission.html">PutPermission</a>.</p>
         <p>
            <b>Input</b>, <b>InputPath</b>, and
        <b>InputTransformer</b> are mutually exclusive and optional
      parameters of a target. When a rule is triggered due to a matched event:</p>
         <div class="itemizedlist">
             
             
             
             
         <ul class="itemizedlist"><li class="listitem">
               <p>If none of the following arguments are specified for a target, then the entire event
          is passed to the target in JSON format (unless the target is Amazon EC2 Run Command or
          Amazon ECS task, in which case nothing from the event is passed to the target).</p>
            </li><li class="listitem">
               <p>If <b>Input</b> is specified in the form of valid JSON, then
          the matched event is overridden with this constant.</p>
            </li><li class="listitem">
               <p>If <b>InputPath</b> is specified in the form of JSONPath
          (for example, <code class="code">$.detail</code>), then only the part of the event specified in the
          path is passed to the target (for example, only the detail part of the event is
          passed).</p>
            </li><li class="listitem">
               <p>If <b>InputTransformer</b> is specified, then one or more
          specified JSONPaths are extracted from the event and used as values in a template that you
          specify as the input to the target.</p>
            </li></ul></div>
         <p>When you specify <code class="code">InputPath</code> or <code class="code">InputTransformer</code>, you must use
      JSON dot notation, not bracket notation.</p>
         <p>When you add targets to a rule and the associated rule triggers soon after, new or updated
      targets might not be immediately invoked. Allow a short period of time for changes to take
      effect.</p>
         <p>This action can partially fail if too many requests are made at the same time. If that
      happens, <code class="code">FailedEntryCount</code> is non-zero in the response and each entry in
        <code class="code">FailedEntries</code> provides the ID of the failed target and the error code.</p>
         
      <p><em>Required</em>: No</p><p><em>Type</em>: List of <a href="./aws-properties-events-rule-target.html">Target</a></p><p><em>Update requires</em>: <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p></dd></dl></div><h2 id="aws-resource-events-rule-return-values">Return values</h2><h3 id="aws-resource-events-rule-return-values-ref">Ref</h3><p>
      When you pass the logical ID of this resource to the intrinsic <code class="code">Ref</code>function, <code class="code">Ref</code>returns event rule ID, such as
        <code class="code">mystack-ScheduledRule-ABCDEFGHIJK</code>. </p><p>For more information about using the <code class="code">Ref</code>function, see <a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-ref.html">Ref</a>.</p><h3 id="aws-resource-events-rule-return-values-fn--getatt">Fn::GetAtt</h3><h4 id="aws-resource-events-rule-return-values-fn--getatt-fn--getatt"></h4><div class="variablelist"><dl><dt><a id="Arn-fn::getatt"></a><span class="term"><code class="code">Arn</code></span></dt><dd>
    <p>The ARN of the rule, such as
        <code class="code">arn:aws:events:us-east-2:123456789012:rule/example</code>.</p>

  </dd></dl></div><h2 id="aws-resource-events-rule--examples">Examples</h2><p></p><h3 id="aws-resource-events-rule--examples--Create_a_cross-Region_rule">Create a cross-Region rule</h3><p>The following example demonstrates how to create a rule that routes events across Regions.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-events-rule--examples--Create_a_cross-Region_rule--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Resources": <span>{</span>
      "EventRuleRegion1": <span>{</span>
         "Type": "AWS::Events::Rule",
         "Properties": <span>{</span>
            "Description": "Routes to us-east-1 event bus",
            "EventBusName": "MyBusName",
            "State": "ENABLED",
            "EventPattern": <span>{</span>
               "source": [
                   "MyTestApp"
               ],
               "detail": [
                   "MyTestAppDetail"
               ]
            },
            "Targets": [
               <span>{</span>
                   "Arn": "arn:aws:events:us-east-1:123456789012:event-bus/CrossRegionDestinationBus",
                   "Id": " CrossRegionDestinationBus",
                   "RoleArn": <span>{</span>
                      "Fn::GetAtt": [
                         "EventBridgeIAMrole",
                         "Arn"
                      ]
                   }
               }
           ]
      }
   },
   "EventBridgeIAMrole": <span>{</span>
      "Type": "AWS::IAM::Role",
      "Properties": <span>{</span>
         "AssumeRolePolicyDocument": <span>{</span>
            "Version": "2012-10-17",
            "Statement": [
               <span>{</span>
                  "Effect": "Allow",
                  "Principal": <span>{</span>
                     "Service": <span>{</span>
                        "Fn::Sub": "events.amazonaws.com"
                     }
                  },
                  "Action": "sts:AssumeRole"
               }
            ]
      },
      "Path": "/",
      "Policies": [
         <span>{</span>
            "PolicyName": "PutEventsDestinationBus",
            "PolicyDocument": <span>{</span>
               "Version": "2012-10-17",
               "Statement": [
                  <span>{</span>
                     "Effect": "Allow",
                     "Action": [
                        "events:PutEvents"
                     ],
                     "Resource": [
                        "arn:aws:events:us-east-1:123456789012:event-bus/CrossRegionDestinationBus"
                     ]
                  }
               ]
            }
         }
      ]
   }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-events-rule--examples--Create_a_cross-Region_rule--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">Resources:
  EventRuleRegion1:
    Type: 'AWS::Events::Rule'
    Properties:
      Description: Routes to us-east-1 event bus
      EventBusName: MyBusName
      State: ENABLED
      EventPattern:
        source:
          - MyTestApp
        detail:
          - MyTestAppDetail
      Targets:
        - Arn: &gt;-
            arn:aws:events:us-east-1:123456789012:event-bus/CrossRegionDestinationBus
          Id: ' CrossRegionDestinationBus'
          RoleArn: !GetAtt 
            - EventBridgeIAMrole
            - Arn
  EventBridgeIAMrole:
    Type: 'AWS::IAM::Role'
    Properties:
      AssumeRolePolicyDocument:
        Version: 2012-10-17
        Statement:
          - Effect: Allow
            Principal:
              Service: !Sub events.amazonaws.com
            Action: 'sts:AssumeRole'
      Path: /
      Policies:
        - PolicyName: PutEventsDestinationBus
          PolicyDocument:
            Version: 2012-10-17
            Statement:
              - Effect: Allow
                Action:
                  - 'events:PutEvents'
                Resource:
                  - &gt;-
                    arn:aws:events:us-east-1:123456789012:event-bus/CrossRegionDestinationBus</code></pre></div><h3 id="aws-resource-events-rule--examples--Create_a_rule_that_includes_a_dead-letter_queue_for_a_target">Create a rule that includes a dead-letter queue for a target</h3><p>The following example demonstrates how to send all EC2 events to an SQS queue, and
          include a dead-letter queue and retry policy settings for the target of the rule.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-events-rule--examples--Create_a_rule_that_includes_a_dead-letter_queue_for_a_target--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "MyNewEventsRule": <span>{</span>
      "Type": "AWS::Events::Rule",
      "Properties": <span>{</span>
         "Description": "Test Events Rule",
         "Name": "mynewabc",
         "EventPattern": <span>{</span>
            "source": [
               "aws.ec2"
            ]
         },
         "State": "ENABLED",
         "Targets": [
            <span>{</span>
               "Arn": "arn:aws:sqs:us-west-2:081035103721:demoSQS",
               "Id": "Id1234",
               "RetryPolicy": <span>{</span>
                  "MaximumRetryAttempts": 4,
                  "MaximumEventAgeInSeconds": 400
               },
               "DeadLetterConfig": <span>{</span>
                  "Arn": "arn:aws:sqs:us-west-2:081035103721:demoDLQ"
               }
            }
         ]
      }
   }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-events-rule--examples--Create_a_rule_that_includes_a_dead-letter_queue_for_a_target--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">MyNewEventsRule:
  Type: 'AWS::Events::Rule'
  Properties:
    Description: Test Events Rule
    Name: mynewabc
    EventPattern:
      source:
        - aws.ec2
    State: ENABLED
    Targets:
      - Arn: 'arn:aws:sqs:us-west-2:081035103721:demoSQS'
        Id: Id1234
        RetryPolicy:
          MaximumRetryAttempts: 4
          MaximumEventAgeInSeconds: 400
        DeadLetterConfig:
          Arn: 'arn:aws:sqs:us-west-2:081035103721:demoDLQ'</code></pre></div><h3 id="aws-resource-events-rule--examples--Regularly_invoke_Lambda_function">Regularly invoke Lambda function</h3><p>The following example creates a rule that invokes the specified Lambda function every
          10 minutes. The <code class="code">PermissionForEventsToInvokeLambda</code> resource grants EventBridge
          permission to invoke the associated function. </p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-events-rule--examples--Regularly_invoke_Lambda_function--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"ScheduledRule": <span>{</span>
  "Type": "AWS::Events::Rule",
  "Properties": <span>{</span>
    "Description": "ScheduledRule",
    "ScheduleExpression": "rate(10 minutes)",
    "State": "ENABLED",
    "Targets": [<span>{</span>
      "Arn": <span>{</span> "Fn::GetAtt": ["LambdaFunction", "Arn"] },
      "Id": "TargetFunctionV1"
    }]
  }
},
"PermissionForEventsToInvokeLambda": <span>{</span>
  "Type": "AWS::Lambda::Permission",
  "Properties": <span>{</span>
    "FunctionName": <span>{</span> "Ref": "LambdaFunction" },
    "Action": "lambda:InvokeFunction",
    "Principal": "events.amazonaws.com",
    "SourceArn": <span>{</span> "Fn::GetAtt": ["ScheduledRule", "Arn"] }
  }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-events-rule--examples--Regularly_invoke_Lambda_function--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">ScheduledRule: 
  Type: AWS::Events::Rule
  Properties: 
    Description: "ScheduledRule"
    ScheduleExpression: "rate(10 minutes)"
    State: "ENABLED"
    Targets: 
      - 
        Arn: 
          Fn::GetAtt: 
            - "LambdaFunction"
            - "Arn"
        Id: "TargetFunctionV1"
PermissionForEventsToInvokeLambda: 
  Type: AWS::Lambda::Permission
  Properties: 
    FunctionName: !Ref "LambdaFunction"
    Action: "lambda:InvokeFunction"
    Principal: "events.amazonaws.com"
    SourceArn: 
      Fn::GetAtt: 
        - "ScheduledRule"
        - "Arn"</code></pre></div><h3 id="aws-resource-events-rule--examples--Invoke_Lambda_Function_in_Response_to_an_Event">Invoke Lambda Function in Response to an Event</h3><p>The following example creates a rule that invokes the specified Lambda function when
          any EC2 instance's state changes to stopping.</p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-events-rule--examples--Invoke_Lambda_Function_in_Response_to_an_Event--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"EventRule": <span>{</span>
  "Type": "AWS::Events::Rule",
  "Properties": <span>{</span>
    "Description": "EventRule",
    "EventPattern": <span>{</span>
      "source": [
        "aws.ec2"
      ],
      "detail-type": [
        "EC2 Instance State-change Notification"
      ],
      "detail": <span>{</span>
        "state": [
          "stopping"
        ]
      }
    },
    "State": "ENABLED",
    "Targets": [<span>{</span>
      "Arn": <span>{</span> "Fn::GetAtt": ["LambdaFunction", "Arn"] },
      "Id": "TargetFunctionV1"
    }]
  }
},
"PermissionForEventsToInvokeLambda": <span>{</span>
  "Type": "AWS::Lambda::Permission",
  "Properties": <span>{</span>
    "FunctionName": <span>{</span> "Ref": "LambdaFunction" },
    "Action": "lambda:InvokeFunction",
    "Principal": "events.amazonaws.com",
    "SourceArn": <span>{</span> "Fn::GetAtt": ["EventRule", "Arn"] }
  }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-events-rule--examples--Invoke_Lambda_Function_in_Response_to_an_Event--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">EventRule: 
  Type: AWS::Events::Rule
  Properties: 
    Description: "EventRule"
    EventPattern: 
      source: 
        - "aws.ec2"
      detail-type: 
        - "EC2 Instance State-change Notification"
      detail: 
        state: 
          - "stopping"
    State: "ENABLED"
    Targets: 
      - 
        Arn: 
          Fn::GetAtt: 
            - "LambdaFunction"
            - "Arn"
        Id: "TargetFunctionV1"
PermissionForEventsToInvokeLambda: 
  Type: AWS::Lambda::Permission
  Properties: 
    FunctionName: 
      Ref: "LambdaFunction"
    Action: "lambda:InvokeFunction"
    Principal: "events.amazonaws.com"
    SourceArn: 
      Fn::GetAtt: 
        - "EventRule"
        - "Arn"</code></pre></div><h3 id="aws-resource-events-rule--examples--Notify_a_Topic_in_Response_to_a_Log_Entry">Notify a Topic in Response to a Log Entry</h3><p>The following example creates a rule that notifies an Amazon Simple Notification Service 
          topic if an AWS CloudTrail log entry contains a call by the root user. The
          <code class="code">EventTopicPolicy </code> resource grants Amazon EventBridge permission to notify
          the associated Amazon SNS topic. </p><div id="JSON" name="JSON" class="section langfilter"><h4 id="aws-resource-events-rule--examples--Notify_a_Topic_in_Response_to_a_Log_Entry--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"OpsEventRule": <span>{</span>
  "Type": "AWS::Events::Rule",
  "Properties": <span>{</span>
    "Description": "EventRule",
    "EventPattern": <span>{</span>
      "detail-type": [ "AWS API Call via CloudTrail" ],
      "detail": <span>{</span> 
        "userIdentity": <span>{</span> 
          "type": [ "Root" ]
        }
      }
    },
    "State": "ENABLED",
    "Targets": [
      <span>{</span>
        "Arn": <span>{</span> "Ref": "MySNSTopic" },
        "Id": "OpsTopic"
      }
    ]
  }
}
"EventTopicPolicy": <span>{</span>
  "Type": "AWS::SNS::TopicPolicy",
  "Properties": <span>{</span>
    "PolicyDocument": <span>{</span>
      "Statement": [
        <span>{</span>
          "Effect": "Allow",
          "Principal": <span>{</span> "Service": "events.amazonaws.com" },
          "Action": "sns:Publish",
          "Resource": "*"
        }
      ]
    },
    "Topics": [ <span>{</span> "Ref": "MySNSTopic" } ]
  }
}</code></pre></div><div id="YAML" name="YAML" class="section langfilter"><h4 id="aws-resource-events-rule--examples--Notify_a_Topic_in_Response_to_a_Log_Entry--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="yaml ">OpsEventRule: 
  Type: AWS::Events::Rule
  Properties: 
    Description: "EventRule"
    EventPattern: 
      detail-type: 
        - "AWS API Call via CloudTrail"
      detail: 
        userIdentity: 
          type: 
            - "Root"
    State: "ENABLED"
    Targets: 
      - 
        Arn: 
          Ref: "MySNSTopic"
        Id: "OpsTopic"
EventTopicPolicy:
  Type: 'AWS::SNS::TopicPolicy'
  Properties:
    PolicyDocument:
      Statement:
        - Effect: Allow
          Principal:
            Service: events.amazonaws.com
          Action: 'sns:Publish'
          Resource: '*'
    Topics:
      - !Ref MySNSTopic</code></pre></div><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./aws-properties-events-eventbuspolicy-condition.html">Condition</div><div id="next" class="next-link" accesskey="n" href="./aws-properties-events-rule-awsvpcconfiguration.html">AwsVpcConfiguration</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=EventBridge&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-events-rule.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=EventBridge&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSCloudFormation/latest/UserGuide/aws-resource-events-rule.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>