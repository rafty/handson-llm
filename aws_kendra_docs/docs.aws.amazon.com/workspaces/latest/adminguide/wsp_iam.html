<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Identity and access management for WorkSpaces - Amazon WorkSpaces</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="workspaces-access-control" /><meta name="default_state" content="workspaces-access-control" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/workspaces/latest/adminguide/workspaces-access-control.html" /><meta name="description" content="Control which WorkSpaces resources can be viewed, created, and modified by IAM users." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon WorkSpaces" /><meta name="guide" content="Administration Guide" /><meta name="abstract" content="Use Amazon WorkSpaces to provision virtual, cloud-based Microsoft Windows or Amazon Linux desktops that users can access from multiple devices or web browsers." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/workspaces/latest/adminguide/workspaces-access-control.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/workspaces/latest/adminguide/workspaces-access-control.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/workspaces/latest/adminguide/workspaces-access-control.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/workspaces/latest/adminguide/workspaces-access-control.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/workspaces/latest/adminguide/workspaces-access-control.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/workspaces/latest/adminguide/workspaces-access-control.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/workspaces/latest/adminguide/workspaces-access-control.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/workspaces/latest/adminguide/workspaces-access-control.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/workspaces/latest/adminguide/workspaces-access-control.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/workspaces/latest/adminguide/workspaces-access-control.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/workspaces/latest/adminguide/workspaces-access-control.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/workspaces/latest/adminguide/workspaces-access-control.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/workspaces/latest/adminguide/workspaces-access-control.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/workspaces/latest/adminguide/workspaces-access-control.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/workspaces/latest/adminguide/workspaces-access-control.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/workspaces/latest/adminguide/workspaces-access-control.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/workspaces/latest/adminguide/workspaces-access-control.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/workspaces/latest/adminguide/workspaces-access-control.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/workspaces/latest/adminguide/workspaces-access-control.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/workspaces/latest/adminguide/workspaces-access-control.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/workspaces/latest/adminguide/workspaces-access-control.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/workspaces/latest/adminguide/workspaces-access-control.html" hreflang="x-default" /><meta name="feedback-item" content="WorkSpaces" /><meta name="this_doc_product" content="Amazon WorkSpaces" /><meta name="this_doc_guide" content="Administration Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'workspaces'}"></script><meta id="panorama-serviceSubSection" value="Administration Guide" /><meta id="panorama-serviceConsolePage" value="Identity and access management for WorkSpaces" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Identity and access management for WorkSpaces - Amazon WorkSpaces</title><meta name="pdf" content="/pdfs/workspaces/latest/adminguide/workspaces-ag.pdf#workspaces-access-control" /><meta name="github" content="https://github.com/awsdocs/amazon-workspaces-administration-guide/tree/master/doc_source/workspaces-access-control.md" /><meta name="rss" content="document-history.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=164" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=WorkSpaces&amp;topic_url=http://docs.aws.amazon.com/en_us/workspaces/latest/adminguide/workspaces-access-control.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/workspaces/latest/adminguide/workspaces-access-control.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/workspaces/latest/adminguide/workspaces-access-control.html" /><meta name="keywords" content="WorkSpaces,Amazon WorkSpaces,virtual desktops,Desktop-as-a-Service,DaaS,Virtual Desktop Infrastructure (VDI)" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon WorkSpaces",
        "item" : "https://docs.aws.amazon.com/workspaces/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Administration Guide",
        "item" : "https://docs.aws.amazon.com/workspaces/latest/adminguide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Security in Amazon WorkSpaces",
        "item" : "https://docs.aws.amazon.com/workspaces/latest/adminguide/security.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Identity and access management for WorkSpaces",
        "item" : "https://docs.aws.amazon.com/workspaces/latest/adminguide/security.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/workspaces/latest/adminguide/workspaces-ag.pdf#workspaces-access-control" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a href="https://github.com/awsdocs/amazon-workspaces-administration-guide/tree/master/doc_source/workspaces-access-control.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/workspaces/index.html">Amazon WorkSpaces</a><a href="amazon-workspaces.html">Administration Guide</a></div><div id="page-toc-src"><a href="#workspaces-example-iam-policies">Example policies</a><a href="#wsp_iam_resource">Specify WorkSpaces resources in an IAM policy</a><a href="#create-default-role">Create the workspaces_DefaultRole Role</a><a href="#create-pca-access-role">Create the AmazonWorkSpacesPCAAccess service
        role</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="workspaces-access-control">Identity and access management for WorkSpaces</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>By default, IAM users don't have permissions for WorkSpaces resources and operations. 
    To allow IAM users to manage WorkSpaces resources, you must create an IAM policy that explicitly 
    grants them permissions, and attach the policy to the IAM users or groups that require those permissions.</p><p>To provide access, add permissions to your users, groups, or roles:</p><div class="itemizedlist">
   
   
   
  <ul class="itemizedlist"><li class="listitem">
    <p>Users and groups in AWS IAM Identity Center (successor to AWS Single Sign-On):</p>
    <p>Create a permission set. Follow the instructions in <a href="https://docs.aws.amazon.com/singlesignon/latest/userguide/howtocreatepermissionset.html">Create a permission set</a> in the <em>AWS IAM Identity Center (successor to AWS Single Sign-On) User Guide</em>.</p>
  </li><li class="listitem">
    <p>Users managed in IAM through an identity provider:</p>
    <p>Create a role for identity federation. Follow the instructions in <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-idp.html">Creating a role
    for a third-party identity provider (federation)</a> in the <em>IAM User Guide</em>.</p>
  </li><li class="listitem">
    <p>IAM users:</p>
     <div class="itemizedlist">
        
        
     <ul class="itemizedlist"><li class="listitem">
         <p>Create a role that your user can assume. Follow the instructions in <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-user.html">Creating a role for an IAM user</a> in the <em>IAM User Guide</em>.</p>
       </li><li class="listitem">
         <p>(Not recommended) Attach a policy directly to a user or add a user to a user group. Follow the instructions in <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_users_change-permissions.html#users_change_permissions-add-console">Adding permissions to a user (console)</a> in the <em>IAM User Guide</em>.</p>
       </li></ul></div>
  </li></ul></div><p>For more information about IAM policies, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html">Policies and Permissions</a> in the <em>IAM User Guide</em> guide.</p><p>WorkSpaces also creates an IAM role, <code class="code">workspaces_DefaultRole</code>, which allows the WorkSpaces 
    service access to required resources.</p><p>For more information about IAM, see <a href="https://aws.amazon.com/iam" rel="noopener noreferrer" target="_blank"><span>Identity and Access
      Management (IAM)</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> and the <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/"><em>IAM User Guide</em></a>. You can find the WorkSpaces-specific resources,
    actions, and condition context keys for use in IAM permission policies at <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/list_amazonworkspaces.html">Actions, Resources, and Condition Keys for
      Amazon WorkSpaces</a> in the <em>IAM User Guide</em>.</p><p>For a tool that helps you create IAM policies, see the <a href="http://aws.amazon.com/blogs/aws/aws-policy-generator/" rel="noopener noreferrer" target="_blank"><span>AWS Policy Generator</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. You can also use the <a href="https://docs.aws.amazon.com/IAM/latest/UsingPolicySimulatorGuide/">IAM Policy Simulator</a> to test whether 
    a policy would allow or deny a specific request to AWS.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Amazon WorkSpaces doesn’t support the provisioning of IAM credentials into a WorkSpace (such as with an 
      instance profile).</p></div></div><div class="highlights"><h6>Contents</h6><ul><li><a href="#workspaces-example-iam-policies">Example policies</a></li><li><a href="#wsp_iam_resource">Specify WorkSpaces resources in an IAM policy</a></li><li><a href="#create-default-role">Create the workspaces_DefaultRole Role</a></li><li><a href="#create-pca-access-role">Create the AmazonWorkSpacesPCAAccess service
        role</a></li><li><a href="./managed-policies.html">AWS managed policies for WorkSpaces</a></li></ul></div>
    <h2 id="workspaces-example-iam-policies">Example policies</h2>
    <p>The following examples show policy statements that you could use to control the permissions
      that IAM users have to Amazon WorkSpaces.</p>
    <div class="example"><h6>Example 1: Perform all WorkSpaces tasks</h6><div class="example-contents"><p>The following policy statement grants an IAM user permission to perform all WorkSpaces tasks,
        including creating and managing directories. It also grants permission to run the quick setup
        procedure.</p><p>Although Amazon WorkSpaces fully supports the <code class="code">Action</code> and <code class="code">Resource</code>
        elements when using the API and command line tools, to use Amazon WorkSpaces from the AWS Management Console, 
        an IAM user must have permissions for the following actions and resources: </p><div class="itemizedlist">
         
         
      <ul class="itemizedlist"><li class="listitem">
          <p>Actions: "<code class="code">workspaces:*"</code> and <code class="code">"ds:*"</code></p>
        </li><li class="listitem">
          <p>Resources: <code class="code">"Resource": "*"</code></p>
        </li></ul></div><p>The following example policy shows how to allow an IAM user to use Amazon WorkSpaces from the AWS Management Console. </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "workspaces:*",
        "ds:*",
        "iam:GetRole",
        "iam:CreateRole",
        "iam:PutRolePolicy",
        "iam:CreatePolicy",
        "iam:AttachRolePolicy",
        "iam:ListRoles",
        "kms:ListAliases",
        "kms:ListKeys",
        "ec2:CreateVpc",
        "ec2:CreateSubnet",
        "ec2:CreateNetworkInterface",
        "ec2:CreateInternetGateway",
        "ec2:CreateRouteTable",
        "ec2:CreateRoute",
        "ec2:CreateTags",
        "ec2:CreateSecurityGroup",
        "ec2:DescribeInternetGateways",
        "ec2:DescribeSecurityGroups",
        "ec2:DescribeRouteTables",
        "ec2:DescribeVpcs",
        "ec2:DescribeSubnets",
        "ec2:DescribeNetworkInterfaces",
        "ec2:DescribeAvailabilityZones",
        "ec2:AttachInternetGateway",
        "ec2:AssociateRouteTable",
        "ec2:AuthorizeSecurityGroupEgress",
        "ec2:AuthorizeSecurityGroupIngress",
        "ec2:DeleteSecurityGroup",
        "ec2:DeleteNetworkInterface",
        "ec2:RevokeSecurityGroupEgress",
        "ec2:RevokeSecurityGroupIngress",
        "workdocs:RegisterDirectory",
        "workdocs:DeregisterDirectory",
        "workdocs:AddUserToGroup"
      ],
      "Resource": "*"
    },
    <span>{</span>
      "Sid": "iamPassRole",
      "Effect": "Allow",
      "Action": "iam:PassRole",
      "Resource": "*",
      "Condition": <span>{</span>
        "StringEquals": <span>{</span>
          "iam:PassedToService": "workspaces.amazonaws.com"
        }
      }
    }
  ]
}</code></pre></div></div>
    
    <div class="example"><h6>Example 2: Perform WorkSpace-specific tasks</h6><div class="example-contents"><p>The following policy statement grants an IAM user permission to perform
        WorkSpace-specific tasks, such as launching and removing WorkSpaces. In the policy statement, the
        <code class="code">ds:*</code> action grants broad permissions — full control over all Directory Services objects
        in the account.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "workspaces:*",
        "ds:*",
        "iam:PutRolePolicy"
      ],
      "Resource": "*"
    }
  ]
}</code></pre><p>To also grant the user the ability to enable Amazon WorkDocs for users within WorkSpaces, add the
        <code class="code">workdocs</code> operation shown in the following example.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "workspaces:*",
        "ds:*",
        "workdocs:AddUserToGroup"
      ],
      "Resource": "*"
    }
  ]
}</code></pre><p>To also grant the user the ability to use the Launch WorkSpaces wizard, add the
        <code class="code">kms</code> operations as shown in the following example.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "workspaces:*",
        "ds:*",
        "workdocs:AddUserToGroup",
        "kms:ListAliases",
        "kms:ListKeys"
      ],
      "Resource": "*"
    }
  ]
}</code></pre></div></div>
    
    <div class="example"><h6>Example 3: Perform all WorkSpaces tasks for BYOL WorkSpaces</h6><div class="example-contents"><p>The following policy statement grants an IAM user permission to perform all WorkSpaces tasks, including 
        those Amazon EC2 tasks necessary for creating Bring Your Own License (BYOL) WorkSpaces.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "workspaces:*",
        "ds:*",
        "iam:GetRole",
        "iam:CreateRole",
        "iam:PutRolePolicy",
        "kms:ListAliases",
        "kms:ListKeys",
        "ec2:CreateVpc",
        "ec2:CreateSubnet",
        "ec2:CreateNetworkInterface",
        "ec2:CreateInternetGateway",
        "ec2:CreateRouteTable",
        "ec2:CreateRoute",
        "ec2:CreateTags",
        "ec2:CreateSecurityGroup",
        "ec2:DescribeImages",
        "ec2:ModifyImageAttribute",
        "ec2:DescribeInternetGateways",
        "ec2:DescribeSecurityGroups",
        "ec2:DescribeRouteTables",
        "ec2:DescribeVpcs",
        "ec2:DescribeSubnets",
        "ec2:DescribeNetworkInterfaces",
        "ec2:DescribeAvailabilityZones",
        "ec2:AttachInternetGateway",
        "ec2:AssociateRouteTable",
        "ec2:AuthorizeSecurityGroupEgress",
        "ec2:AuthorizeSecurityGroupIngress",
        "ec2:DeleteSecurityGroup",
        "ec2:DeleteNetworkInterface",
        "ec2:RevokeSecurityGroupEgress",
        "ec2:RevokeSecurityGroupIngress",
        "workdocs:RegisterDirectory",
        "workdocs:DeregisterDirectory",
        "workdocs:AddUserToGroup"
      ],
      "Resource": "*"
    },
    <span>{</span>
      "Sid": "iamPassRole",
      "Effect": "Allow",
      "Action": "iam:PassRole",
      "Resource": "*",
      "Condition": <span>{</span>
        "StringEquals": <span>{</span>
          "iam:PassedToService": "workspaces.amazonaws.com"
        }
      }
    }
  ]
}</code></pre></div></div>
   
    <h2 id="wsp_iam_resource">Specify WorkSpaces resources in an IAM policy</h2>

    <p>To specify an WorkSpaces resource in the <code class="code">Resource</code> element of the policy statement,
      use the Amazon Resource Name (ARN) of the resource. You control access to your WorkSpaces resources
      by either allowing or denying permissions to use the API actions that are specified in the
        <code class="code">Action</code> element of your IAM policy statement. WorkSpaces defines ARNs for
      WorkSpaces, bundles, IP groups, and directories.</p>

     
      <h3 id="wsp_arn_syntax">WorkSpace ARN</h3>

      <p>A WorkSpace ARN has the syntax shown in the following example.</p>
      <pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight">arn:aws:workspaces:<code class="replaceable">region</code>:<code class="replaceable">account_id</code>:workspace/<code class="replaceable">workspace_identifier</code></code></pre>
      <div class="variablelist">
         
         
         
      <dl>
          <dt><i><span class="term">region</span></i></dt>
          <dd>
            <p>The Region that the WorkSpace is in (for example,
              <code class="code">us-east-1</code>).</p>
          </dd>
        
          <dt><i><span class="term">account_id</span></i></dt>
          <dd>
            <p>The ID of the AWS account, with no hyphens (for example,
                <code class="code">123456789012</code>).</p>
          </dd>
        
          <dt><i><span class="term">workspace_identifier</span></i></dt>
          <dd>
            <p>The ID of the WorkSpace (for example,
              <code class="code">ws-a1bcd2efg</code>).</p>
          </dd>
        </dl></div>

      <p>The following is the format of the <code class="code">Resource</code> element of a policy statement
        that identifies a specific WorkSpace.</p>
      <pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight">"Resource": "arn:aws:workspaces:<code class="replaceable">region</code>:<code class="replaceable">account_id</code>:workspace/<code class="replaceable">workspace_identifier</code>"</code></pre>
      <p>You can use the <code class="code">*</code> wildcard to specify all WorkSpaces that belong to a
        specific account in a specific Region.</p>
         
    
     
      <h3 id="image_arn_syntax">Image ARN</h3>
      
      <p>A WorkSpace image ARN has the syntax shown in the following example.</p>
      <pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight">arn:aws:workspaces:<code class="replaceable">region</code>:<code class="replaceable">account_id</code>:workspaceimage/<code class="replaceable">image_identifier</code></code></pre>
      <div class="variablelist">
         
         
         
      <dl>
          <dt><i><span class="term">region</span></i></dt>
          <dd>
            <p>The Region that the WorkSpace image is in (for example,
              <code class="code">us-east-1</code>).</p>
          </dd>
        
          <dt><i><span class="term">account_id</span></i></dt>
          <dd>
            <p>The ID of the AWS account, with no hyphens (for example,
              <code class="code">123456789012</code>).</p>
          </dd>
        
          <dt><i><span class="term">bundle_identifier</span></i></dt>
          <dd>
            <p>The ID of the WorkSpace image (for example,
              <code class="code">wsi-a1bcd2efg</code>).</p>
          </dd>
        </dl></div>
      <p>The following is the format of the <code class="code">Resource</code> element of a policy statement
        that identifies a specific image.</p>
      <pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight">"Resource": "arn:aws:workspaces:<code class="replaceable">region</code>:<code class="replaceable">account_id</code>:workspaceimage/<code class="replaceable">image_identifier</code>"</code></pre>
      <p>You can use the <code class="code">*</code> wildcard to specify all images that belong to a specific
        account in a specific Region.</p>
     

     
      <h3 id="bundle_arn_syntax">Bundle ARN</h3>

      <p>A bundle ARN has the syntax shown in the following example.</p>
      <pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight">arn:aws:workspaces:<code class="replaceable">region</code>:<code class="replaceable">account_id</code>:workspacebundle/<code class="replaceable">bundle_identifier</code></code></pre>
      <div class="variablelist">
         
         
         
      <dl>
          <dt><i><span class="term">region</span></i></dt>
          <dd>
            <p>The Region that the WorkSpace is in (for example,
              <code class="code">us-east-1</code>).</p>
          </dd>
        
          <dt><i><span class="term">account_id</span></i></dt>
          <dd>
            <p>The ID of the AWS account, with no hyphens (for example,
                <code class="code">123456789012</code>).</p>
          </dd>
        
          <dt><i><span class="term">bundle_identifier</span></i></dt>
          <dd>
            <p>The ID of the WorkSpace bundle (for example,
                <code class="code">wsb-a1bcd2efg</code>).</p>
          </dd>
        </dl></div>
      <p>The following is the format of the <code class="code">Resource</code> element of a policy statement
        that identifies a specific bundle.</p>
      <pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight">"Resource": "arn:aws:workspaces:<code class="replaceable">region</code>:<code class="replaceable">account_id</code>:workspacebundle/<code class="replaceable">bundle_identifier</code>"</code></pre>
      <p>You can use the <code class="code">*</code> wildcard to specify all bundles that belong to a specific
        account in a specific Region.</p>
     
    
     
      <h3 id="ipgroup_arn_syntax">IP Group ARN</h3>
      
      <p>An IP group ARN has the syntax shown in the following example.</p>
      <pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight">arn:aws:workspaces:<code class="replaceable">region</code>:<code class="replaceable">account_id</code>:workspaceipgroup/<code class="replaceable">ipgroup_identifier</code></code></pre>
      <div class="variablelist">
         
         
         
      <dl>
          <dt><i><span class="term">region</span></i></dt>
          <dd>
            <p>The Region that the WorkSpace is in (for example,
              <code class="code">us-east-1</code>).</p>
          </dd>
        
          <dt><i><span class="term">account_id</span></i></dt>
          <dd>
            <p>The ID of the AWS account, with no hyphens (for example,
              <code class="code">123456789012</code>).</p>
          </dd>
        
          <dt><i><span class="term">ipgroup_identifier</span></i></dt>
          <dd>
            <p>The ID of the IP group (for example,
              <code class="code">wsipg-a1bcd2efg</code>).</p>
          </dd>
        </dl></div>
      <p>The following is the format of the <code class="code">Resource</code> element of a policy statement
        that identifies a specific IP group.</p>
      <pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight">"Resource": "arn:aws:workspaces:<code class="replaceable">region</code>:<code class="replaceable">account_id</code>:workspaceipgroup/<code class="replaceable">ipgroup_identifier</code>"</code></pre>
      <p>You can use the <code class="code">*</code> wildcard to specify all IP groups that belong to a
        specific account in a specific Region.</p>
     
    
     
      <h3 id="directory_arn_syntax">Directory ARN</h3>
      
      <p>A directory ARN has the syntax shown in the following example.</p>
      <pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight">arn:aws:workspaces:<code class="replaceable">region</code>:<code class="replaceable">account_id</code>:directory/<code class="replaceable">directory_identifier</code></code></pre>
      <div class="variablelist">
         
         
         
      <dl>
          <dt><i><span class="term">region</span></i></dt>
          <dd>
            <p>The Region that the WorkSpace is in (for example,
              <code class="code">us-east-1</code>).</p>
          </dd>
        
          <dt><i><span class="term">account_id</span></i></dt>
          <dd>
            <p>The ID of the AWS account, with no hyphens (for example,
              <code class="code">123456789012</code>).</p>
          </dd>
        
          <dt><i><span class="term">directory_identifier</span></i></dt>
          <dd>
            <p>The ID of the directory (for example,
              <code class="code">d-12345a67b8</code>).</p>
          </dd>
        </dl></div>
      <p>The following is the format of the <code class="code">Resource</code> element of a policy statement
        that identifies a specific directory.</p>
      <pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight">"Resource": "arn:aws:workspaces:<code class="replaceable">region</code>:<code class="replaceable">account_id</code>:directory/<code class="replaceable">directory_identifier</code>"</code></pre>
      <p>You can use the <code class="code">*</code> wildcard to specify all directories that belong to a
        specific account in a specific Region.</p>
     
    
     
      <h3 id="connection_alias_arn_syntax">Connection alias ARN</h3>
      
      <p>A connection alias ARN has the syntax shown in the following example.</p>
      <pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight">arn:aws:workspaces:<code class="replaceable">region</code>:<code class="replaceable">account_id</code>:connectionalias/<code class="replaceable">connectionalias_identifier</code></code></pre>
      <div class="variablelist">
         
         
         
      <dl>
          <dt><i><span class="term">region</span></i></dt>
          <dd>
            <p>The Region that the connection alias is in (for example,
              <code class="code">us-east-1</code>).</p>
          </dd>
        
          <dt><i><span class="term">account_id</span></i></dt>
          <dd>
            <p>The ID of the AWS account, with no hyphens (for example,
              <code class="code">123456789012</code>).</p>
          </dd>
        
          <dt><i><span class="term">connectionalias_identifier</span></i></dt>
          <dd>
            <p>The ID of the connection alias (for example,
              <code class="code">wsca-12345a67b8</code>).</p>
          </dd>
        </dl></div>
      <p>The following is the format of the <code class="code">Resource</code> element of a policy statement
        that identifies a specific connection alias.</p>
      <pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight">"Resource": "arn:aws:workspaces:<code class="replaceable">region</code>:<code class="replaceable">account_id</code>:connectionalias/<code class="replaceable">connectionalias_identifier</code>"</code></pre>
      <p>You can use the <code class="code">*</code> wildcard to specify all connection aliases that belong to a
        specific account in a specific Region.</p>
     

     
      <h3 id="no-resource-level-permissions">API actions with no support for resource-level permissions</h3>
      <p>You can't specify a resource ARN with the following API actions:</p>
      <div class="itemizedlist">
         
         
         
         
         
         
         
         
         
         
         
         
         
         
         
         
         
      <ul class="itemizedlist"><li class="listitem"><p><code class="code">AssociateIpGroups</code></p></li><li class="listitem"><p><code class="code">CreateIpGroup</code></p></li><li class="listitem"><p><code class="code">CreateTags</code></p></li><li class="listitem"><p><code class="code">DeleteTags</code></p></li><li class="listitem"><p><code class="code">DeleteWorkspaceImage</code></p></li><li class="listitem"><p><code class="code">DescribeAccount</code></p></li><li class="listitem"><p><code class="code">DescribeAccountModifications</code></p></li><li class="listitem"><p><code class="code">DescribeIpGroups</code></p></li><li class="listitem"><p><code class="code">DescribeTags</code></p></li><li class="listitem"><p><code class="code">DescribeWorkspaceDirectories</code></p></li><li class="listitem"><p><code class="code">DescribeWorkspaceImages</code></p></li><li class="listitem"><p><code class="code">DescribeWorkspaces</code></p></li><li class="listitem"><p><code class="code">DescribeWorkspacesConnectionStatus</code></p></li><li class="listitem"><p><code class="code">DisassociateIpGroups</code></p></li><li class="listitem"><p><code class="code">ImportWorkspaceImage</code></p></li><li class="listitem"><p><code class="code">ListAvailableManagementCidrRanges</code></p></li><li class="listitem"><p><code class="code">ModifyAccount</code></p></li></ul></div>
      <p>For API actions that don't support resource-level permissions, you must specify the
        resource statement shown in the following example.</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">"Resource": "*"</code></pre>
     
    
     
      <h3 id="shared-resource-permissions">API actions that don't support account-level 
        restrictions on shared resources</h3>
      <p>For the following API actions, you can't specify an account ID in the resource ARN when the 
        resource isn't owned by the account:</p>
      <div class="itemizedlist">
         
         
         

      <ul class="itemizedlist"><li class="listitem"><p><code class="code">AssociateConnectionAlias</code></p></li><li class="listitem"><p><code class="code">CopyWorkspaceImage</code></p></li><li class="listitem"><p><code class="code">DisassociateConnectionAlias</code></p></li></ul></div>
      <p>For these API actions, you can specify an account ID in the resource ARN only when that account 
        owns the resources to be acted upon. When the account doesn't own the resources, you must specify  
        <code class="code">*</code> for the account ID, as shown in the following example.</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">"arn:aws:workspaces:<code class="replaceable">region</code>:*:<code class="replaceable">resource_type</code>/<code class="replaceable">resource_identifier</code>"</code></pre>
     

   
    <h2 id="create-default-role">Create the workspaces_DefaultRole Role</h2>
    <p>Before you can register a directory using the API, you must verify that a role named
      <code class="code">workspaces_DefaultRole</code> exists. This role is created by the Quick Setup or 
      if you launch a WorkSpace using the AWS Management Console, and it grants Amazon WorkSpaces permission to 
      access specific AWS resources on your behalf. If this role does not exist, you can 
      create it using the following procedure.</p>
    <div class="procedure"><h6>To create the workspaces_DefaultRole role</h6><ol><li>
        <p>Sign in to the AWS Management Console and open the IAM console at <a href="https://console.aws.amazon.com/iam/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/iam/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
      </li><li>
        <p>In the navigation pane on the left, choose <b>Roles</b>.</p>
      </li><li>
        <p>Choose <b>Create role</b>.</p>
      </li><li>
        <p>Under <b>Select type of trusted entity</b>, choose <b>Another AWS account</b>.</p>
      </li><li>
        <p>For <b>Account ID</b>, enter your account ID with no hyphens or spaces.</p>
      </li><li>
        <p>For <b>Options</b>, do not specify multi-factor authentication (MFA).</p>
      </li><li>
        <p>Choose <b>Next: Permissions</b>.</p>
      </li><li>
        <p>On the <b>Attach permissions policies</b> page, select the AWS managed policies <b>AmazonWorkSpacesServiceAccess</b> and 
          <b>AmazonWorkSpacesSelfServiceAccess</b>.</p>
      </li><li>
        <p>Under <b>Set permissions boundary</b>, we recommend that you not use a
          permissions boundary because of the potential for conflicts with the policies that are
          attached to this role. Such conflicts could block certain necessary
          permissions for the role.</p>
      </li><li>
        <p>Choose <b>Next: Tags</b>.</p>
      </li><li>
        <p>On the <b>Add tags (optional)</b> page, add tags if needed.</p>
      </li><li>
        <p>Choose <b>Next: Review</b>.</p>
      </li><li>
        <p>On the <b>Review</b> page, for <b>Role name</b>, enter <code class="userinput">workspaces_DefaultRole</code>.</p>
      </li><li>
        <p>(Optional) For <b>Role description</b>, enter a description.</p>
      </li><li>
        <p>Choose <b>Create Role</b>.</p>
      </li><li>
        <p>On the <b>Summary</b> page for the workspaces_DefaultRole role, choose the <b>Trust relationships</b> tab.</p>
      </li><li>
        <p>On the <b>Trust relationships</b> tab, choose <b>Edit trust relationship</b>.</p>
      </li><li>
        <p>On the <b>Edit Trust Relationship</b> page, replace the existing policy statement with the following statement.</p>
      
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Principal": <span>{</span>
        "Service": "workspaces.amazonaws.com"
      },
      "Action": "sts:AssumeRole"
    }
  ]
}      </code></pre>
     </li><li>
        <p>Choose <b>Update Trust Policy</b>.</p>
      </li></ol></div>
   
    <h2 id="create-pca-access-role">Create the AmazonWorkSpacesPCAAccess service
        role</h2>
    <p>Before users can login using certificate-based authentication, you must verify that a role
      named <code class="code">AmazonWorkSpacesPCAAccess</code> exists. This role is created when you enable
      certificate-based authentication on a Directory using the AWS Management Console, and it grants Amazon WorkSpaces
      permission to access AWS Private CA resources on your behalf. If this role does not exist because you
      are not using the console to manage certificate-based authentication, you can create it using
      the following procedure.</p>

    <div class="procedure"><h6>To create the AmazonWorkSpacesPCAAccess service role using the AWS CLI</h6><ol><li>
        <p>Create a JSON file named <code class="code">AmazonWorkSpacesPCAAccess.json</code> with the
          following text.</p>

        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Principal": <span>{</span>
                "Service": "prod.euc.ecm.amazonaws.com"
            },
            "Action": "sts:AssumeRole"
        }
    ]
}</code></pre>
      </li><li>
        <p>Adjust the <code class="code">AmazonWorkSpacesPCAAccess.json</code> path as needed and run the
          following AWS CLI commands to create the service role and attach the <a href="./managed-policies.html#workspaces-pca-access">AmazonWorkspacesPCAAccess</a> managed policy.</p>

        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws iam create-role --path /service-role/ --role-name AmazonWorkSpacesPCAAccess --assume-role-policy-document file://AmazonWorkSpacesPCAAccess.json</code></pre>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws iam attach-role-policy —role-name AmazonWorkSpacesPCAAccess —policy-arn arn:aws:iam::aws:policy/AmazonWorkspacesPCAAccess</code></pre>
      </li></ol></div>
  <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./data-protection.html">Data protection</div><div id="next" class="next-link" accesskey="n" href="./managed-policies.html">AWS managed policies for WorkSpaces</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=WorkSpaces&amp;topic_url=https://docs.aws.amazon.com/en_us/workspaces/latest/adminguide/workspaces-access-control.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=WorkSpaces&amp;topic_url=https://docs.aws.amazon.com/en_us/workspaces/latest/adminguide/workspaces-access-control.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>