<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Service-linked roles for AWS CloudHSM - AWS CloudHSM</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="service-linked-roles" /><meta name="default_state" content="service-linked-roles" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/cloudhsm/latest/userguide/service-linked-roles.html" /><meta name="description" content="The IAM policy that you created previously to includes the iam:CreateServiceLinkedRole action. AWS CloudHSM defines a service-linked role named AWSServiceRoleForCloudHSM . The role is predefined by AWS CloudHSM and includes permissions that AWS CloudHSM requires to call other AWS services on your behalf. The role makes setting up your service easier because you don’t need to manually add the role policy and trust policy permissions." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS CloudHSM" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Learn how to use AWS CloudHSM, a web service that provides cost effective hardware key management at cloud scale for sensitive and regulated workloads. AWS CloudHSM provides a managed hardware security module (HSM) that enables you to easily generate and use your own encryption keys on the AWS Cloud." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/cloudhsm/latest/userguide/service-linked-roles.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/cloudhsm/latest/userguide/service-linked-roles.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/cloudhsm/latest/userguide/service-linked-roles.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/cloudhsm/latest/userguide/service-linked-roles.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/cloudhsm/latest/userguide/service-linked-roles.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/cloudhsm/latest/userguide/service-linked-roles.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/cloudhsm/latest/userguide/service-linked-roles.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/cloudhsm/latest/userguide/service-linked-roles.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/cloudhsm/latest/userguide/service-linked-roles.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/cloudhsm/latest/userguide/service-linked-roles.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/cloudhsm/latest/userguide/service-linked-roles.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/cloudhsm/latest/userguide/service-linked-roles.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/cloudhsm/latest/userguide/service-linked-roles.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/cloudhsm/latest/userguide/service-linked-roles.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/cloudhsm/latest/userguide/service-linked-roles.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/cloudhsm/latest/userguide/service-linked-roles.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/cloudhsm/latest/userguide/service-linked-roles.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/cloudhsm/latest/userguide/service-linked-roles.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/cloudhsm/latest/userguide/service-linked-roles.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/cloudhsm/latest/userguide/service-linked-roles.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/cloudhsm/latest/userguide/service-linked-roles.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/cloudhsm/latest/userguide/service-linked-roles.html" hreflang="x-default" /><meta name="feedback-item" content="AWS CloudHSM" /><meta name="this_doc_product" content="AWS CloudHSM" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'cloudhsm'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="Service-linked roles for AWS CloudHSM" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Service-linked roles for AWS CloudHSM - AWS CloudHSM</title><meta name="pdf" content="/pdfs/cloudhsm/latest/userguide/cloudhsm-user-guide.pdf#service-linked-roles" /><meta name="github" content="https://github.com/awsdocs/aws-cloudhsm-user-guide/tree/master/doc_source/service-linked-roles.md" /><meta name="rss" content="amazon-cloudhsm-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=156" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=AWS%20CloudHSM&amp;topic_url=http://docs.aws.amazon.com/en_us/cloudhsm/latest/userguide/service-linked-roles.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/cloudhsm/latest/userguide/service-linked-roles.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/cloudhsm/latest/userguide/service-linked-roles.html" /><meta name="keywords" content="CloudHSM,HSM,hardware security module,HSM appliance,hardware security module appliance,cryptographic key storage,encryption key storage,cryptographic processing,cryptographic operations,cryptographic offload" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS CloudHSM",
        "item" : "https://docs.aws.amazon.com/cloudhsm/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/cloudhsm/latest/userguide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Security in AWS CloudHSM",
        "item" : "https://docs.aws.amazon.com/cloudhsm/latest/userguide/security.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Identity and access management for AWS CloudHSM",
        "item" : "https://docs.aws.amazon.com/cloudhsm/latest/userguide/identity-access-management.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Service-linked roles for AWS CloudHSM",
        "item" : "https://docs.aws.amazon.com/cloudhsm/latest/userguide/identity-access-management.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/cloudhsm/latest/userguide/cloudhsm-user-guide.pdf#service-linked-roles" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a href="https://github.com/awsdocs/aws-cloudhsm-user-guide/tree/master/doc_source/service-linked-roles.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/cloudhsm/index.html">AWS CloudHSM</a><a href="introduction.html">User Guide</a></div><div id="page-toc-src"><a href="#create-slr-auto">Creating a service-linked role (automatic)</a><a href="#create-slr-manual">Creating a service-linked role (manual)</a><a href="#edit-slr">Editing the service-linked role</a><a href="#delete-slr">Deleting the service-linked role</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="service-linked-roles">Service-linked roles for AWS CloudHSM</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>The IAM policy that you created previously to <a href="./identity-access-management.html#permissions-for-cloudhsm">Customer managed policies for AWS CloudHSM</a>
            includes the <code class="code">iam:CreateServiceLinkedRole</code> action. AWS CloudHSM defines a <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-linked-role">service-linked role</a> named <b>AWSServiceRoleForCloudHSM</b>. The role is predefined
            by AWS CloudHSM and includes permissions that AWS CloudHSM requires to call other AWS services on
            your behalf. The role makes setting up your service easier because you don’t need to
            manually add the role policy and trust policy permissions.</p><p>The role policy allows AWS CloudHSM to create Amazon CloudWatch Logs log groups and log streams and write
            log events on your behalf. You can view it below and in the IAM console. </p><pre class="programlisting"><div class="code-btn-container"></div><code class="json ">
<span>{</span>
    "Version": "2018-06-12",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "logs:CreateLogGroup",
                "logs:CreateLogStream",
                "logs:PutLogEvents",
                "logs:DescribeLogStreams"
            ],
            "Resource": [
                "arn:aws:logs:*:*:*"
            ]
        }
    ]
}
</code></pre><p>The trust policy for the <b>AWSServiceRoleForCloudHSM</b> role allows AWS CloudHSM to assume the
            role.</p><pre class="programlisting"><div class="code-btn-container"></div><code class="json ">
<span>{</span>
  "Version": "2018-06-12",
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Principal": <span>{</span>
        "Service": "cloudhsm.amazonaws.com"
      },
      "Action": "sts:AssumeRole"
    }
  ]
}
</code></pre>
            <h2 id="create-slr-auto">Creating a service-linked role (automatic)</h2>
            
            <p>AWS CloudHSM creates the <b>AWSServiceRoleForCloudHSM</b> role when you create a cluster if you
                include the <code class="code">iam:CreateServiceLinkedRole</code> action in the permissions that
                you defined when you created the AWS CloudHSM administrators group. See <a href="./identity-access-management.html#permissions-for-cloudhsm">Customer managed policies for AWS CloudHSM</a>. </p>
            
            <p>If you already have one or more clusters and just want to add the
                <b>AWSServiceRoleForCloudHSM</b> role, you can use the console, the <a href="https://docs.aws.amazon.com/cli/latest/reference/cloudhsmv2/create-cluster.html">create-cluster</a> command, or the <a href="https://docs.aws.amazon.com/cloudhsm/latest/APIReference/API_CreateCluster.html">CreateCluster</a> API operation
                to create a cluster. Then use the console, the <a href="https://docs.aws.amazon.com/cli/latest/reference/cloudhsmv2/delete-cluster.html">delete-cluster</a> command, or the <a href="https://docs.aws.amazon.com/cloudhsm/latest/APIReference/API_DeleteCluster.html">DeleteCluster</a> API operation
                to delete it. Creating the new cluster creates the service-linked role and applies
                it to all clusters in your account. Alternatively, you can create the role manually.
                See the following section for more information. </p>
            
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>You do not need to perform all of the steps outlined in <a href="./getting-started.html">Getting started with AWS CloudHSM</a> to create a
                    cluster if you are only creating it to add the <b>AWSServiceRoleForCloudHSM</b>
                    role.</p></div></div>
            
         
            <h2 id="create-slr-manual">Creating a service-linked role (manual)</h2>
            
            <p>You can use the IAM console, AWS CLI, or API to create the
                <b>AWSServiceRoleForCloudHSM</b> role. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/using-service-linked-roles.html#create-service-linked-role">Creating a Service-Linked Role</a> in the
                <em>IAM User Guide</em>. </p>
            
         
            <h2 id="edit-slr">Editing the service-linked role</h2>
            
            <p>AWS CloudHSM does not allow you to edit the <b>AWSServiceRoleForCloudHSM</b> 
                role. After the role is created, for example, you cannot change its name because
                various entities might reference the role by name. Also, you cannot change the role
                policy. You can, however, use IAM to edit the role description. For more
                information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/using-service-linked-roles.html#edit-service-linked-role">Editing a Service–Linked Role</a> in the
                <em>IAM User Guide</em>.</p>
            
         
            <h2 id="delete-slr">Deleting the service-linked role</h2>
            
            <p>You cannot delete a service-linked role as long as a cluster to which it has been
                applied still exists. To delete the role, you must first delete each HSM in your
                cluster and then delete the cluster. Every cluster in your account must be deleted.
                You can then use the IAM console, AWS CLI, or API to delete the role. For more
                information about deleting a cluster, see <a href="./delete-cluster.html">Deleting an AWS CloudHSM cluster</a>. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/using-service-linked-roles.html#delete-service-linked-role">Deleting a Service-Linked Role</a> in the
                <em>IAM User Guide</em>.</p>
        <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./identity-access-management.html">Identity and access management</div><div id="next" class="next-link" accesskey="n" href="./fips-validation.html">Compliance</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=AWS CloudHSM&amp;topic_url=https://docs.aws.amazon.com/en_us/cloudhsm/latest/userguide/service-linked-roles.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=AWS CloudHSM&amp;topic_url=https://docs.aws.amazon.com/en_us/cloudhsm/latest/userguide/service-linked-roles.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>