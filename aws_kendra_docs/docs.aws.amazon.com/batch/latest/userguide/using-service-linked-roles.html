<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Using service-linked roles for AWS Batch - AWS Batch</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="using-service-linked-roles" /><meta name="default_state" content="using-service-linked-roles" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/batch/latest/userguide/using-service-linked-roles.html" /><meta name="description" content="How to use service-linked roles to give AWS Batch access to resources in your AWS account." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS Batch" /><meta name="guide" content="User Guide" /><meta name="abstract" content="AWS Batch makes it easier than ever to run batch computing workloads on the AWS Cloud. Batch computing is a common way for developers, scientists and engineers to access large amounts of compute resources, and AWS Batch removes the undifferentiated heavy lifting of configuring and managing the required infrastructure." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/batch/latest/userguide/using-service-linked-roles.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/batch/latest/userguide/using-service-linked-roles.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/batch/latest/userguide/using-service-linked-roles.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/batch/latest/userguide/using-service-linked-roles.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/batch/latest/userguide/using-service-linked-roles.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/batch/latest/userguide/using-service-linked-roles.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/batch/latest/userguide/using-service-linked-roles.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/batch/latest/userguide/using-service-linked-roles.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/batch/latest/userguide/using-service-linked-roles.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/batch/latest/userguide/using-service-linked-roles.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/batch/latest/userguide/using-service-linked-roles.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/batch/latest/userguide/using-service-linked-roles.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/batch/latest/userguide/using-service-linked-roles.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/batch/latest/userguide/using-service-linked-roles.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/batch/latest/userguide/using-service-linked-roles.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/batch/latest/userguide/using-service-linked-roles.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/batch/latest/userguide/using-service-linked-roles.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/batch/latest/userguide/using-service-linked-roles.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/batch/latest/userguide/using-service-linked-roles.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/batch/latest/userguide/using-service-linked-roles.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/batch/latest/userguide/using-service-linked-roles.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/batch/latest/userguide/using-service-linked-roles.html" hreflang="x-default" /><meta name="feedback-item" content="AWSBatch" /><meta name="this_doc_product" content="AWS Batch" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'batch'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="Using service-linked roles for AWS Batch" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Using service-linked roles for AWS Batch - AWS Batch</title><meta name="pdf" content="/pdfs/batch/latest/userguide/batch_user.pdf#using-service-linked-roles" /><meta name="github" content="https://github.com/awsdocs/aws-batch-user-guide/tree/main/doc_source/using-service-linked-roles.md" /><meta name="rss" content="document_history.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=240" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=AWSBatch&amp;topic_url=http://docs.aws.amazon.com/en_us/batch/latest/userguide/using-service-linked-roles.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/batch/latest/userguide/using-service-linked-roles.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/batch/latest/userguide/using-service-linked-roles.html" /><meta name="keywords" content="AWS Batch,batch job,job queue,compute environment,array job,batch processing,container,GPU,AWSServiceRoleForBatch" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS Batch",
        "item" : "https://docs.aws.amazon.com/batch/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/batch/latest/userguide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Security in AWS Batch",
        "item" : "https://docs.aws.amazon.com/batch/latest/userguide/security.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Identity and Access Management for AWS Batch",
        "item" : "https://docs.aws.amazon.com/batch/latest/userguide/security-iam.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Using service-linked roles for AWS Batch",
        "item" : "https://docs.aws.amazon.com/batch/latest/userguide/security-iam.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/batch/latest/userguide/batch_user.pdf#using-service-linked-roles" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a href="https://github.com/awsdocs/aws-batch-user-guide/tree/main/doc_source/using-service-linked-roles.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/batch/index.html">AWS Batch</a><a href="what-is-batch.html">User Guide</a></div><div id="page-toc-src"><a href="#slr-permissions">Service-linked role permissions for AWS Batch</a><a href="#create-slr">Creating a service-linked role for AWS Batch</a><a href="#edit-slr">Editing a service-linked role for AWS Batch</a><a href="#delete-slr">Deleting a service-linked role for AWS Batch</a><a href="#slr-regions">Supported Regions for AWS Batch service-linked roles</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="using-service-linked-roles">Using service-linked roles for AWS Batch</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>AWS Batch uses AWS Identity and Access Management (IAM)<a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-linked-role"> service-linked
   roles</a>. A service-linked role is a unique type of IAM role that is linked directly to AWS Batch.
  Service-linked roles are predefined by AWS Batch and include all the permissions that the service requires to call
  other AWS services on your behalf. </p><p>A service-linked role makes setting up AWS Batch easier because you don’t have to manually add the necessary
  permissions. AWS Batch defines the permissions of its service-linked roles, and unless defined otherwise, only
  AWS Batch can assume its roles. The defined permissions include the trust policy and the permissions policy, and
  that permissions policy cannot be attached to any other IAM entity.</p><p>You can delete a service-linked role only after first deleting their related resources. This protects your
  AWS Batch resources because you can't inadvertently remove permission to access the resources.</p><p>For information about other services that support service-linked roles, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_aws-services-that-work-with-iam.html">AWS Services That Work with IAM</a> and
  look for the services that have <b>Yes </b>in the <b>Service-Linked
   Role</b> column. Choose a <b>Yes</b> with a link to view the service-linked role
  documentation for that service.</p>
  <h2 id="slr-permissions">Service-linked role permissions for AWS Batch</h2>
  <p>AWS Batch uses the service-linked role named <b>AWSServiceRoleForBatch</b> – Allows AWS Batch to create and manage AWS resources on your behalf..</p>
  <p>The AWSServiceRoleForBatch service-linked role trusts the <code class="code">batch.amazonaws.com</code> service principal to assume the
   role.</p>
  <p>The role permissions policy allows AWS Batch to complete the following actions on the specified resources.</p>
  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "ec2:DescribeAccountAttributes",
                "ec2:DescribeInstances",
                "ec2:DescribeInstanceStatus",
                "ec2:DescribeInstanceAttribute",
                "ec2:DescribeSubnets",
                "ec2:DescribeSecurityGroups",
                "ec2:DescribeKeyPairs",
                "ec2:DescribeImages",
                "ec2:DescribeImageAttribute",
                "ec2:DescribeSpotInstanceRequests",
                "ec2:DescribeSpotFleetInstances",
                "ec2:DescribeSpotFleetRequests",
                "ec2:DescribeSpotPriceHistory",
                "ec2:DescribeVpcClassicLink",
                "ec2:DescribeLaunchTemplateVersions",
                "ec2:RequestSpotFleet",
                "autoscaling:DescribeAccountLimits",
                "autoscaling:DescribeAutoScalingGroups",
                "autoscaling:DescribeLaunchConfigurations",
                "autoscaling:DescribeAutoScalingInstances",
                "eks:DescribeCluster",
                "ecs:DescribeClusters",
                "ecs:DescribeContainerInstances",
                "ecs:DescribeTaskDefinition",
                "ecs:DescribeTasks",
                "ecs:ListClusters",
                "ecs:ListContainerInstances",
                "ecs:ListTaskDefinitionFamilies",
                "ecs:ListTaskDefinitions",
                "ecs:ListTasks",
                "ecs:DeregisterTaskDefinition",
                "ecs:TagResource",
                "ecs:ListAccountSettings",
                "logs:DescribeLogGroups",
                "iam:GetInstanceProfile",
                "iam:GetRole"
            ],
            "Resource": "*"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "logs:CreateLogGroup",
                "logs:CreateLogStream"
            ],
            "Resource": "arn:aws:logs:*:*:log-group:/aws/batch/job*"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "logs:PutLogEvents"
            ],
            "Resource": "arn:aws:logs:*:*:log-group:/aws/batch/job*:log-stream:*"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "autoscaling:CreateOrUpdateTags"
            ],
            "Resource": "*",
            "Condition": <span>{</span>
                "Null": <span>{</span>
                    "aws:RequestTag/AWSBatchServiceTag": "false"
                }
            }
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": "iam:PassRole",
            "Resource": [
                "*"
            ],
            "Condition": <span>{</span>
                "StringEquals": <span>{</span>
                    "iam:PassedToService": [
                        "ec2.amazonaws.com",
                        "ec2.amazonaws.com.cn",
                        "ecs-tasks.amazonaws.com"
                    ]
                }
            }
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": "iam:CreateServiceLinkedRole",
            "Resource": "*",
            "Condition": <span>{</span>
                "StringEquals": <span>{</span>
                    "iam:AWSServiceName": [
                        "spot.amazonaws.com",
                        "spotfleet.amazonaws.com",
                        "autoscaling.amazonaws.com",
                        "ecs.amazonaws.com"
                    ]
                }
            }
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "ec2:CreateLaunchTemplate"
            ],
            "Resource": "*",
            "Condition": <span>{</span>
                "Null": <span>{</span>
                    "aws:RequestTag/AWSBatchServiceTag": "false"
                }
            }
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "ec2:TerminateInstances",
                "ec2:CancelSpotFleetRequests",
                "ec2:ModifySpotFleetRequest",
                "ec2:DeleteLaunchTemplate"
            ],
            "Resource": "*",
            "Condition": <span>{</span>
                "Null": <span>{</span>
                    "aws:ResourceTag/AWSBatchServiceTag": "false"
                }
            }
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "autoscaling:CreateLaunchConfiguration",
                "autoscaling:DeleteLaunchConfiguration"
            ],
            "Resource": "arn:aws:autoscaling:*:*:launchConfiguration:*:launchConfigurationName/AWSBatch*"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "autoscaling:CreateAutoScalingGroup",
                "autoscaling:UpdateAutoScalingGroup",
                "autoscaling:SetDesiredCapacity",
                "autoscaling:DeleteAutoScalingGroup",
                "autoscaling:SuspendProcesses",
                "autoscaling:PutNotificationConfiguration",
                "autoscaling:TerminateInstanceInAutoScalingGroup"
            ],
            "Resource": "arn:aws:autoscaling:*:*:autoScalingGroup:*:autoScalingGroupName/AWSBatch*"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "ecs:DeleteCluster",
                "ecs:DeregisterContainerInstance",
                "ecs:RunTask",
                "ecs:StartTask",
                "ecs:StopTask"
            ],
            "Resource": "arn:aws:ecs:*:*:cluster/AWSBatch*"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "ecs:RunTask",
                "ecs:StartTask",
                "ecs:StopTask"
            ],
            "Resource": "arn:aws:ecs:*:*:task-definition/*"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "ecs:StopTask"
            ],
            "Resource": "arn:aws:ecs:*:*:task/*/*"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "ecs:CreateCluster",
                "ecs:RegisterTaskDefinition"
            ],
            "Resource": "*",
            "Condition": <span>{</span>
                "Null": <span>{</span>
                    "aws:RequestTag/AWSBatchServiceTag": "false"
                }
            }
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": "ec2:RunInstances",
            "Resource": [
                "arn:aws:ec2:*::image/*",
                "arn:aws:ec2:*::snapshot/*",
                "arn:aws:ec2:*:*:subnet/*",
                "arn:aws:ec2:*:*:network-interface/*",
                "arn:aws:ec2:*:*:security-group/*",
                "arn:aws:ec2:*:*:volume/*",
                "arn:aws:ec2:*:*:key-pair/*",
                "arn:aws:ec2:*:*:launch-template/*",
                "arn:aws:ec2:*:*:placement-group/*",
                "arn:aws:ec2:*:*:capacity-reservation/*",
                "arn:aws:ec2:*:*:elastic-gpu/*",
                "arn:aws:elastic-inference:*:*:elastic-inference-accelerator/*",
                "arn:aws:resource-groups:*:*:group/*"
            ]
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": "ec2:RunInstances",
            "Resource": "arn:aws:ec2:*:*:instance/*",
            "Condition": <span>{</span>
                "Null": <span>{</span>
                    "aws:RequestTag/AWSBatchServiceTag": "false"
                }
            }
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "ec2:CreateTags"
            ],
            "Resource": [
                "*"
            ],
            "Condition": <span>{</span>
                "StringEquals": <span>{</span>
                    "ec2:CreateAction": [
                        "RunInstances",
                        "CreateLaunchTemplate",
                        "RequestSpotFleet"
                    ]
                }
            }
        }
    ]
}</code></pre>
  <p>You must configure permissions to allow an IAM entity (such as a user, group, or role) to create, edit, or
   delete a service-linked role. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/using-service-linked-roles.html#service-linked-role-permissions">Service-Linked Role
    Permissions</a> in the <em>IAM User Guide</em>.</p>
  
  <h2 id="create-slr">Creating a service-linked role for AWS Batch</h2>
  
  <p>You don't need to manually create a service-linked role. When you CreateComputeEnvironment in the AWS Management Console,
   the AWS CLI, or the AWS API, and don't specify a value for the <code class="code">serviceRole</code> parameter, AWS Batch creates
   the service-linked role for you.</p>
  
  <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>This service-linked role can appear in your account if you completed an action in another service that uses the
    features supported by this role. Also, if you were using the AWS Batch service before March 10, 2021, when it began
    supporting service-linked roles, then AWS Batch created the AWSServiceRoleForBatch role in your account. To learn more, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/troubleshoot_roles.html#troubleshoot_roles_new-role-appeared">A New
     Role Appeared in My IAM Account</a>.</p></div></div>
  <p>If you delete this service-linked role, and then need to create it again, you can use the same process to
   recreate the role in your account. When you CreateComputeEnvironment, AWS Batch creates the service-linked role for
   you again. </p>
  
  <h2 id="edit-slr">Editing a service-linked role for AWS Batch</h2>
  <p>With AWS Batch, you can't edit the AWSServiceRoleForBatch service-linked role. After you create a service-linked role, you
   can't change the name of the role because various entities might reference the role. However, you can edit the
   description of the role using IAM. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/using-service-linked-roles.html#edit-service-linked-role">Editing a Service-Linked
    Role</a> in the <em>IAM User Guide</em>.</p>
  <p><b>To allow an IAM entity to edit the description of the AWSServiceRoleForBatch service-linked
    role</b></p>
  <p>Add the following statement to the permissions policy. This allows the IAM entity to edit the description of a
   service-linked role.</p>
  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "><span>{</span>
    "Effect": "Allow",
    "Action": [
        "iam:UpdateRoleDescription"
    ],
    "Resource": "arn:aws:iam::*:role/aws-service-role/batch.amazonaws.com/AWSServiceRoleForBatch",
    "Condition": <span>{</span>"StringLike": <span>{</span>"iam:AWSServiceName": "batch.amazonaws.com"}}
}</code></pre>
  
  <h2 id="delete-slr">Deleting a service-linked role for AWS Batch</h2>
  
  <p>We recommend, if you no longer need to use a feature or service that requires a service-linked role, you delete
   that role. That way, you don’t have an unused entity that's not actively monitored or maintained. However, you must
   clean up the resources for your service-linked role before you can manually delete it.</p>
  <p><b>To allow an IAM entity to delete the AWSServiceRoleForBatch service-linked role</b></p>
  <p>Add the following statement to the permissions policy. This allows the IAM entity to delete a service-linked
   role.</p>
  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "><span>{</span>
    "Effect": "Allow",
    "Action": [
        "iam:DeleteServiceLinkedRole",
        "iam:GetServiceLinkedRoleDeletionStatus"
    ],
    "Resource": "arn:aws:iam::*:role/aws-service-role/batch.amazonaws.com/AWSServiceRoleForBatch",
    "Condition": <span>{</span>"StringLike": <span>{</span>"iam:AWSServiceName": "batch.amazonaws.com"}}
}</code></pre>
   
   <h3 id="service-linked-role-review-before-delete">Cleaning up a service-linked role</h3>
   <p>Before you can use IAM to delete a service-linked role, you must first confirm that the role has no active
    sessions and delete all of the AWS Batch compute environments that use the role in all AWS Regions in a single
    partition.</p>
   <div class="procedure"><h6>To check whether the service-linked role has an active session</h6><ol><li><p>Open the IAM console at
         <a href="https://console.aws.amazon.com/iam/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/iam/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></li><li>
     <p>In the navigation pane, choose <b>Roles</b> and then the AWSServiceRoleForBatch name (not the check
      box).</p>
    </li><li>
     <p>On the <b>Summary</b> page, choose <b>Access Advisor</b> and review recent
      activity for the service-linked role.</p>
     <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>If you don't know whether AWS Batch is using the AWSServiceRoleForBatch role, you can try to delete the role. If the
       service is using the role, then the role will fail to delete. You can view the Regions where the role is being
       used. If the role is being used, then you must wait for the session to end before you can delete the role. You
       can't revoke the session for a service-linked role.</p></div></div>
    </li></ol></div>
   <div class="procedure"><h6>To remove AWS Batch resources used by the AWSServiceRoleForBatch service-linked role</h6><p>You must delete all AWS Batch compute environments that use the AWSServiceRoleForBatch role in all AWS Regions before you
     can delete the AWSServiceRoleForBatch role.</p><ol><li>
     <p>Open the AWS Batch console at <a href="https://console.aws.amazon.com/batch/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/batch/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
    </li><li>
     <p>From the navigation bar, select the Region to use.</p>
    </li><li>
     <p>In the navigation pane, choose <b>Compute environments</b>.</p>
    </li><li>
     <p>Select the compute environment.</p>
    </li><li>
     <p>Choose <b>Disable</b>. Wait for the <b>State</b> to change to
       <b>DISABLED</b>.</p>
    </li><li>
     <p>Select the compute environment.</p>
    </li><li>
     <p>Choose <b>Delete</b>. Confirm that you want to delete the compute environment by choosing
       <b>Delete compute environment</b>.</p>
    </li><li>
     <p>Repeat steps 1–7 for all compute environments that use the service-linked role in all Regions.</p>
    </li></ol></div>
   
   
   <h3 id="delete-service-linked-role-iam-console">Deleting a service-linked role in IAM (Console)</h3>
   
  
 <p>You can use the IAM console to delete a service-linked role.</p>
       <div class="procedure"><h6>To delete a service-linked role (console)</h6><ol><li><p>Sign in to the AWS Management Console and open the IAM console at <a href="https://console.aws.amazon.com/iam/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/iam/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></li><li>
           <p>In the navigation pane of the IAM console, choose <b>Roles</b>. Then
             select the check box next to AWSServiceRoleForBatch, not the name or row itself. </p>
         </li><li>
           <p>Choose <b>Delete role</b>.</p>
         </li><li>
           <p>In the confirmation dialog box, review the service last accessed data, which shows
             when each of the selected roles last accessed an AWS service. This helps you to
             confirm whether the role is currently active. If you want to proceed, choose
               <b>Yes, Delete</b> to submit the service-linked role for
             deletion.</p>
         </li><li>
           <p>Watch the IAM console notifications to monitor the progress of the service-linked
             role deletion. Because the IAM service-linked role deletion is asynchronous, after you
             submit the role for deletion, the deletion task can succeed or fail. </p>
                 <div class="itemizedlist">
                    
                    
                    
                 <ul class="itemizedlist"><li class="listitem">
                     <p>If the task succeeds, then the role is removed from the list and a
                       notification of success appears at the top of the page.</p>
                   </li><li class="listitem">
                     <p>If the task fails, you can choose <b>View details</b> or
                   <b>View Resources</b> from the notifications to learn why the
                 deletion failed. If the deletion fails because the role is using the service's
                 resources, then the notification includes a list of resources, if the service
                 returns that information. You can then <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/using-service-linked-roles.html#service-linked-role-review-before-delete">clean up the resources</a>                 and submit the deletion again.</p>
                     <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>You might have to repeat this process several times, depending on the
                         information that the service returns. For example, your service-linked role
                         might use six resources and your service might return information about five
                         of them. If you clean up the five resources and submit the role for deletion
                         again, the deletion fails and the service reports the one remaining
                         resource. A service might return all of the resources, a few of them, or it
                         might not report any resources.</p></div></div>
                   </li><li class="listitem">
                     <p>If the task fails and the notification does not include a list of
                 resources, then the service might not return that information. To learn how to clean
                 up the resources for that service, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_aws-services-that-work-with-iam.html">AWS services that work with IAM</a>. Find your service in
                 the table, and choose the <b>Yes</b> link to view the
                 service-linked role documentation for that service.</p>
                   </li></ul></div>
         </li></ol></div>
 
   
   
   <h3 id="delete-service-linked-role-iam-cli">Deleting a service-linked role in IAM (AWS CLI)</h3>
   <p>You can use IAM commands from the AWS Command Line Interface to delete a service-linked role.</p>
   <div class="procedure"><h6>To delete a service-linked role (CLI)</h6><ol><li>
     <p>Because a service-linked role can't be deleted if it's being used or has associated resources, you must
      submit a deletion request. That request can be denied if these conditions aren't met. You must capture the
       <code class="code">deletion-task-id</code> from the response to check the status of the deletion task. Enter the following
      command to submit a service-linked role deletion request:</p>
     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="code" copy="false">$ </code><code class="userinput">aws iam delete-service-linked-role --role-name AWSServiceRoleForBatch</code></code></pre>
    </li><li>
     <p>Use the following command to check the status of the deletion task:</p>
     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="code" copy="false">$ </code><code class="userinput">aws iam get-service-linked-role-deletion-status --deletion-task-id <code class="replaceable">deletion-task-id</code></code></code></pre>
     <p>The status of the deletion task can be <code class="code">NOT_STARTED</code>, <code class="code">IN_PROGRESS</code>,
       <code class="code">SUCCEEDED</code>, or <code class="code">FAILED</code>. If the deletion fails, the call returns the reason that it failed
      so that you can troubleshoot. If the deletion fails because the role is using the service's resources, then
      the notification includes a list of resources, if the service returns that information. You can then <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/using-service-linked-roles.html#service-linked-role-review-before-delete">clean up the
       resources</a> and submit the deletion again.</p>
     <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>You might have to repeat this process several times, depending on the information that the service returns.
       For example, your service-linked role might use six resources and your service might return information about
       five of them. If you clean up the five resources and submit the role for deletion again, the deletion fails and
       the service reports the one remaining resource. A service might return all of the resources, a few of them. Or,
       it might not report any resources. To learn how to clean up the resources for a service that doesn't report any
       resources, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_aws-services-that-work-with-iam.html">AWS services that work
        with IAM</a>. Find your service in the table, and choose the <b>Yes</b> link to
       view the service-linked role documentation for that service.</p></div></div>
    </li></ol></div>
   
   
   <h3 id="delete-service-linked-role-iam-api">Deleting a service-linked role in IAM (AWSAPI)</h3>
   
  
 <p>You can use the IAM API to delete a service-linked role.</p>
       <div class="procedure"><h6>To delete a service-linked role (API)</h6><ol><li>
           <p>To submit a deletion request for a service-linked roll, call <a href="https://docs.aws.amazon.com/IAM/latest/APIReference/API_DeleteServiceLinkedRole.html">DeleteServiceLinkedRole</a>.
             In the request, specify the AWSServiceRoleForBatch role name.</p>
           <p>Because a service-linked role cannot be deleted if it is being used or has
             associated resources, you must submit a deletion request. That request can be denied if
             these conditions are not met. You must capture the <code class="code">DeletionTaskId</code> from the
             response to check the status of the deletion task.</p>
         </li><li>
           <p>To check the status of the deletion, call <a href="https://docs.aws.amazon.com/IAM/latest/APIReference/API_GetServiceLinkedRoleDeletionStatus.html">GetServiceLinkedRoleDeletionStatus</a>. In the request, specify the
               <code class="code">DeletionTaskId</code>.</p>
           <p>The status of the deletion task can be <code class="code">NOT_STARTED</code>,
               <code class="code">IN_PROGRESS</code>, <code class="code">SUCCEEDED</code>, or <code class="code">FAILED</code>. If the
             deletion fails, the call returns the reason that it failed so that you can troubleshoot.
             If the deletion fails because the role is using the service's resources, then the
             notification includes a list of resources, if the service returns that information. You
             can then <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/using-service-linked-roles.html#service-linked-role-review-before-delete">clean up the
               resources</a> and submit the deletion again.</p>
           <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>You might have to repeat this process several times, depending on the information
               that the service returns. For example, your service-linked role might use six
               resources and your service might return information about five of them. If you clean
               up the five resources and submit the role for deletion again, the deletion fails and
               the service reports the one remaining resource. A service might return all of the
               resources, a few of them, or it might not report any resources. To learn how to clean
               up the resources for a service that does not report any resources, see 
               <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_aws-services-that-work-with-iam.html">AWS services that work with IAM</a>. Find your service in
               the table, and choose the <b>Yes</b> link to view the
               service-linked role documentation for that service.</p></div></div>
         </li></ol></div>
 
   
  
  <h2 id="slr-regions">Supported Regions for AWS Batch service-linked roles</h2>
  <p>AWS Batch supports using service-linked roles in all of the Regions where the service is available. For more
   information, see <a href="https://docs.aws.amazon.com/general/latest/gr/batch.html#batch_region">AWS Batch endpoints</a>.</p>
 <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./security_iam_troubleshoot.html">Troubleshooting</div><div id="next" class="next-link" accesskey="n" href="./security-iam-awsmanpol.html">AWS managed policies</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=AWSBatch&amp;topic_url=https://docs.aws.amazon.com/en_us/batch/latest/userguide/using-service-linked-roles.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=AWSBatch&amp;topic_url=https://docs.aws.amazon.com/en_us/batch/latest/userguide/using-service-linked-roles.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>