<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Control access to VPC endpoints using endpoint policies - Amazon Virtual Private Cloud</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="vpc-endpoints-access" /><meta name="default_state" content="vpc-endpoints-access" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/vpc/latest/privatelink/vpc-endpoints-access.html" /><meta name="description" content="An endpoint policy is a resource-based policy that you attach to a VPC endpoint to control which AWS principals can use the endpoint to access an AWS service." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Virtual Private Cloud" /><meta name="guide" content="AWS PrivateLink" /><meta name="abstract" content="Use AWS PrivateLink to connect your VPC to supported AWS services, services hosted by other AWS accounts, and supported AWS Marketplace partner services." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/vpc/latest/privatelink/vpc-endpoints-access.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/vpc/latest/privatelink/vpc-endpoints-access.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/vpc/latest/privatelink/vpc-endpoints-access.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/vpc/latest/privatelink/vpc-endpoints-access.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/vpc/latest/privatelink/vpc-endpoints-access.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/vpc/latest/privatelink/vpc-endpoints-access.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/vpc/latest/privatelink/vpc-endpoints-access.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/vpc/latest/privatelink/vpc-endpoints-access.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/vpc/latest/privatelink/vpc-endpoints-access.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/vpc/latest/privatelink/vpc-endpoints-access.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/vpc/latest/privatelink/vpc-endpoints-access.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/vpc/latest/privatelink/vpc-endpoints-access.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/vpc/latest/privatelink/vpc-endpoints-access.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/vpc/latest/privatelink/vpc-endpoints-access.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/vpc/latest/privatelink/vpc-endpoints-access.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/vpc/latest/privatelink/vpc-endpoints-access.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/vpc/latest/privatelink/vpc-endpoints-access.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/vpc/latest/privatelink/vpc-endpoints-access.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/vpc/latest/privatelink/vpc-endpoints-access.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/vpc/latest/privatelink/vpc-endpoints-access.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/vpc/latest/privatelink/vpc-endpoints-access.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/vpc/latest/privatelink/vpc-endpoints-access.html" hreflang="x-default" /><meta name="feedback-item" content="PrivateLink" /><meta name="this_doc_product" content="Amazon Virtual Private Cloud" /><meta name="this_doc_guide" content="AWS PrivateLink" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'vpc'}"></script><meta id="panorama-serviceSubSection" value="AWS PrivateLink" /><meta id="panorama-serviceConsolePage" value="Control access to VPC endpoints using endpoint policies" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Control access to VPC endpoints using endpoint policies - Amazon Virtual Private Cloud</title><meta name="pdf" content="/pdfs/vpc/latest/privatelink/aws-privatelink.pdf#vpc-endpoints-access" /><meta name="rss" content="privatelink-updates.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=58" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=PrivateLink&amp;topic_url=http://docs.aws.amazon.com/en_us/vpc/latest/privatelink/vpc-endpoints-access.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/vpc/latest/privatelink/vpc-endpoints-access.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/vpc/latest/privatelink/vpc-endpoints-access.html" /><meta name="keywords" content="VPC,Amazon VPC,PrivateLink" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon VPC",
        "item" : "https://docs.aws.amazon.com/vpc/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "AWS PrivateLink",
        "item" : "https://docs.aws.amazon.com/vpc/latest/privatelink"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Identity and access management for AWS PrivateLink",
        "item" : "https://docs.aws.amazon.com/vpc/latest/privatelink/vpc-endpoints-iam.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Control access to VPC endpoints using endpoint policies",
        "item" : "https://docs.aws.amazon.com/vpc/latest/privatelink/vpc-endpoints-iam.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/vpc/latest/privatelink/aws-privatelink.pdf#vpc-endpoints-access" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/vpc/index.html">Amazon VPC</a><a href="what-is-privatelink.html">AWS PrivateLink</a></div><div id="page-toc-src"><a href="#vpc-endpoint-policy-considerations">Considerations</a><a href="#default-endpoint-policy">Default endpoint policy</a><a href="#vpc-endpoint-policies-interface">Policies for interface endpoints</a><a href="#vpc-endpoint-policies-gateway">Principals for gateway endpoints</a><a href="#update-vpc-endpoint-policy">Update a VPC endpoint policy</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="vpc-endpoints-access">Control access to VPC endpoints using endpoint
            policies</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>An endpoint policy is a resource-based policy that you attach to a VPC endpoint to control
        which AWS principals can use the endpoint to access an AWS service. </p><p>An endpoint policy does not override or replace identity-based policies or resource-based
        policies. For example, if you're using an interface endpoint to connect to Amazon S3, you can 
        also use Amazon S3 bucket policies to control access to buckets from specific endpoints or 
        specific VPCs.</p><div class="highlights" id="inline-topiclist"><h6>Contents</h6><ul><li><a href="#vpc-endpoint-policy-considerations">Considerations</a></li><li><a href="#default-endpoint-policy">Default endpoint policy</a></li><li><a href="#vpc-endpoint-policies-interface">Policies for interface endpoints</a></li><li><a href="#vpc-endpoint-policies-gateway">Principals for gateway endpoints</a></li><li><a href="#update-vpc-endpoint-policy">Update a VPC endpoint policy</a></li></ul></div>
        <h2 id="vpc-endpoint-policy-considerations">Considerations</h2>
        <div class="itemizedlist">
             
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>An endpoint policy is a JSON policy document that uses the IAM policy
                    language. It must contain a <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements_principal.html">Principal</a> element. The size of an endpoint policy cannot exceed
                    20,480 characters, including white space.</p>
            </li><li class="listitem">
                <p>When you create an interface or gateway endpoint for an AWS service, you can
                    attach a single endpoint policy to the endpoint. You can <a href="#update-vpc-endpoint-policy">update the endpoint policy</a> at
                    any time. If you don't attach an endpoint policy, we attach the <a href="#default-endpoint-policy">default endpoint policy</a>.</p>
            </li><li class="listitem">
                <p>Not all AWS services support endpoint policies. If an AWS service doesn't
                    support endpoint policies, we allow full access to any endpoint for the service.
                    For more information, see <a href="./aws-services-privatelink-support.html#vpce-endpoint-policy-support">View endpoint policy support</a>.</p>
            </li><li class="listitem">
                <p>When you create a VPC endpoint for an endpoint service other than an
                    AWS service, we allow full access to the endpoint.</p>
            </li></ul></div>
     
        <h2 id="default-endpoint-policy">Default endpoint policy</h2>
        <p>The default endpoint policy grants full access to the endpoint.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Principal": "*",
            "Action": "*",
            "Resource": "*"
        }
    ]
}</code></pre>
     
        <h2 id="vpc-endpoint-policies-interface">Policies for interface endpoints</h2>
        <p>For example endpoint policies for AWS services, see <a href="./aws-services-privatelink-support.html">AWS services that integrate with AWS PrivateLink</a>. 
            The first column in the table contains links to AWS PrivateLink documentation for each
            AWS service. If an AWS service supports endpoint policies, its documentation 
            includes example endpoint policies.</p>
     
        <h2 id="vpc-endpoint-policies-gateway">Principals for gateway endpoints</h2>
        
        
        <p>With gateway endpoints, you must use the <code class="code">aws:PrincipalArn</code> condition key
            to grant access to a principal.</p>
        <p>If you specify the principal in one of the following formats, access is granted to the
            AWS account root user only, not all users and roles for the account.</p>
        <pre class="programlisting"><div class="code-btn-container"></div><code class="json ">"AWS": "<code class="replaceable">account_id</code>"</code></pre>
        <pre class="programlisting"><div class="code-btn-container"></div><code class="json ">"AWS": "arn:aws:iam::<code class="replaceable">account_id</code>:root"</code></pre>

        <p>If you specify an Amazon Resource Name (ARN) for the principal, the ARN is transformed
            to a unique principal ID when the policy is saved.</p>

        
        <div class="itemizedlist">
            <p>For example endpoint policies for gateway endpoints, see the following:</p>
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><a href="./vpc-endpoints-s3.html#edit-vpc-endpoint-policy-s3">Endpoints for Amazon S3</a></p>
            </li><li class="listitem">
                <p><a href="./vpc-endpoints-ddb.html#iam-policies-ddb">Endpoints for DynamoDB</a></p>
            </li></ul></div>
     
        <h2 id="update-vpc-endpoint-policy">Update a VPC endpoint policy</h2>
        <p>Use the following procedure to update an endpoint policy for an AWS service. 
            After you update an endpoint policy, it can take a few minutes for the changes 
            to take effect.</p>
        <div class="procedure"><h6>To update an endpoint policy using the console</h6><ol><li><p>Open the Amazon VPC console at
         <a href="https://console.aws.amazon.com/vpc/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/vpc/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></li><li>
                <p>In the navigation pane, choose <b>Endpoints</b>.</p>
            </li><li>
                <p>Select the VPC endpoint.</p>
            </li><li>
                <p>Choose <b>Actions</b>, <b>Manage
                    policy</b>.</p>
            </li><li>
                <p>Choose <b>Full Access</b> to allow full access to the service,
                    or choose <b>Custom</b> and attach a custom policy.</p>
            </li><li>
                <p>Choose <b>Save</b>.</p>
            </li></ol></div>
        <div class="itemizedlist">
            <h6>To update an endpoint policy using the command line</h6>
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><a href="https://docs.aws.amazon.com/cli/latest/reference/ec2/modify-vpc-endpoint.html">modify-vpc-endpoint</a> (AWS CLI)</p>
            </li><li class="listitem">
                <p><a href="https://docs.aws.amazon.com/powershell/latest/reference/items/Edit-EC2VpcEndpoint.html">Edit-EC2VpcEndpoint</a> (Tools for Windows PowerShell)</p>
            </li></ul></div>
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./security_iam_id-based-policy-examples.html">Identity-based policy examples</div><div id="next" class="next-link" accesskey="n" href="./privatelink-cloudwatch-metrics.html">CloudWatch metrics</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=PrivateLink&amp;topic_url=https://docs.aws.amazon.com/en_us/vpc/latest/privatelink/vpc-endpoints-access.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=PrivateLink&amp;topic_url=https://docs.aws.amazon.com/en_us/vpc/latest/privatelink/vpc-endpoints-access.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>