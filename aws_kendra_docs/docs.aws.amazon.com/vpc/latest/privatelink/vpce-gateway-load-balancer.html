<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Access virtual appliances through AWS PrivateLink - Amazon Virtual Private Cloud</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="vpce-gateway-load-balancer" /><meta name="default_state" content="vpce-gateway-load-balancer" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/vpc/latest/privatelink/vpce-gateway-load-balancer.html" /><meta name="description" content="Learn how to create a Gateway Load Balancer endpoint to distribute traffic to a fleet of network virtual appliances." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Virtual Private Cloud" /><meta name="guide" content="AWS PrivateLink" /><meta name="abstract" content="Use AWS PrivateLink to connect your VPC to supported AWS services, services hosted by other AWS accounts, and supported AWS Marketplace partner services." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/vpc/latest/privatelink/vpce-gateway-load-balancer.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/vpc/latest/privatelink/vpce-gateway-load-balancer.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/vpc/latest/privatelink/vpce-gateway-load-balancer.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/vpc/latest/privatelink/vpce-gateway-load-balancer.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/vpc/latest/privatelink/vpce-gateway-load-balancer.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/vpc/latest/privatelink/vpce-gateway-load-balancer.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/vpc/latest/privatelink/vpce-gateway-load-balancer.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/vpc/latest/privatelink/vpce-gateway-load-balancer.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/vpc/latest/privatelink/vpce-gateway-load-balancer.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/vpc/latest/privatelink/vpce-gateway-load-balancer.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/vpc/latest/privatelink/vpce-gateway-load-balancer.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/vpc/latest/privatelink/vpce-gateway-load-balancer.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/vpc/latest/privatelink/vpce-gateway-load-balancer.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/vpc/latest/privatelink/vpce-gateway-load-balancer.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/vpc/latest/privatelink/vpce-gateway-load-balancer.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/vpc/latest/privatelink/vpce-gateway-load-balancer.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/vpc/latest/privatelink/vpce-gateway-load-balancer.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/vpc/latest/privatelink/vpce-gateway-load-balancer.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/vpc/latest/privatelink/vpce-gateway-load-balancer.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/vpc/latest/privatelink/vpce-gateway-load-balancer.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/vpc/latest/privatelink/vpce-gateway-load-balancer.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/vpc/latest/privatelink/vpce-gateway-load-balancer.html" hreflang="x-default" /><meta name="feedback-item" content="PrivateLink" /><meta name="this_doc_product" content="Amazon Virtual Private Cloud" /><meta name="this_doc_guide" content="AWS PrivateLink" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'vpc'}"></script><meta id="panorama-serviceSubSection" value="AWS PrivateLink" /><meta id="panorama-serviceConsolePage" value="Access virtual appliances through AWS PrivateLink" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Access virtual appliances through AWS PrivateLink - Amazon Virtual Private Cloud</title><meta name="pdf" content="/pdfs/vpc/latest/privatelink/aws-privatelink.pdf#vpce-gateway-load-balancer" /><meta name="rss" content="privatelink-updates.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=58" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=PrivateLink&amp;topic_url=http://docs.aws.amazon.com/en_us/vpc/latest/privatelink/vpce-gateway-load-balancer.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/vpc/latest/privatelink/vpce-gateway-load-balancer.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/vpc/latest/privatelink/vpce-gateway-load-balancer.html" /><meta name="keywords" content="VPC,Amazon VPC,PrivateLink" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon VPC",
        "item" : "https://docs.aws.amazon.com/vpc/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "AWS PrivateLink",
        "item" : "https://docs.aws.amazon.com/vpc/latest/privatelink"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Access virtual appliances through AWS PrivateLink",
        "item" : "https://docs.aws.amazon.com/vpc/latest/privatelink/vpce-gateway-load-balancer.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/vpc/latest/privatelink/aws-privatelink.pdf#vpce-gateway-load-balancer" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/vpc/index.html">Amazon VPC</a><a href="what-is-privatelink.html">AWS PrivateLink</a></div><div id="page-toc-src"><a href="#gwlbe-overview">Overview</a><a href="#gwlbe-ip-address-type">IP address types</a><a href="#gateway-load-balancer-endpoints-routing">Routing</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="vpce-gateway-load-balancer">Access virtual appliances through AWS PrivateLink</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>You can use a Gateway Load Balancer to distribute traffic to a fleet of network virtual appliances. The
    appliances can be used for security inspection, compliance, policy controls, and other
    networking services. You specify the Gateway Load Balancer when you create a VPC endpoint service. Other AWS
    principals access the endpoint service by creating a Gateway Load Balancer endpoint.</p><p>For more information, see <a href="https://docs.aws.amazon.com/elasticloadbalancing/latest/gateway/">Gateway Load Balancers</a>.</p><div class="highlights"><h6>Contents</h6><ul><li><a href="#gwlbe-overview">Overview</a></li><li><a href="#gwlbe-ip-address-type">IP address types</a></li><li><a href="#gateway-load-balancer-endpoints-routing">Routing</a></li><li><a href="./create-gateway-load-balancer-endpoint-service.html">Create a Gateway Load Balancer endpoint service</a></li><li><a href="./gateway-load-balancer-endpoints.html">Create a Gateway Load Balancer endpoint</a></li></ul></div>
    <h2 id="gwlbe-overview">Overview</h2>
    <p>The following diagram shows how application servers access security appliances through AWS PrivateLink.
      The application servers run in a subnet of the service consumer VPC. You create a Gateway Load Balancer endpoint in
      another subnet of the same VPC. All traffic entering the service consumer VPC through the internet
      gateway is first routed to the Gateway Load Balancer endpoint for inspection and then routed to the destination 
      subnet. Similarly, all traffic leaving the application servers is routed to the Gateway Load Balancer endpoint
      for inspection before it is routed back through the internet gateway.</p>
    <div class="mediaobject">
       
        <img src="/images/vpc/latest/privatelink/images/gateway-load-balancer-endpoint.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;        Using a Gateway Load Balancer endpoint to access security appliances.&#xA;      " />
       
       
    </div>

    <div class="orderedlist">
      <h6>Traffic from the internet to the application servers (blue arrows):</h6>
       
       
       
       
       
    <ol><li>
        <p>Traffic enters the service consumer VPC through the internet gateway.</p>
      </li><li>
        <p>Traffic is sent to the Gateway Load Balancer endpoint, based on route table configuration.</p>
      </li><li>
        <p>Traffic is sent to the Gateway Load Balancer for inspection through the security appliance.</p>
      </li><li>
        <p>Traffic is sent back to the Gateway Load Balancer endpoint after inspection.</p>
      </li><li>
        <p>Traffic is sent to the application servers, based on route table configuration.</p>
      </li></ol></div>
    
    <div class="orderedlist">
      <h6>Traffic from the application servers to the internet (orange arrows):</h6>
       
       
       
       
       
    <ol><li>
        <p>Traffic is sent to the Gateway Load Balancer endpoint, based on route table configuration.</p>
      </li><li>
        <p>Traffic is sent to the Gateway Load Balancer for inspection through the security appliance.</p>
      </li><li>
        <p>Traffic is sent back to the Gateway Load Balancer endpoint after inspection.</p>
      </li><li>
        <p>Traffic is sent to the internet gateway based on the route table configuration.</p>
      </li><li>
        <p>Traffic is routed back to the internet.</p>
      </li></ol></div>
   
    <h2 id="gwlbe-ip-address-type">IP address types</h2>
    <p>Service providers can make their service endpoints available to service consumers over
      IPv4, IPv6, or both IPv4 and IPv6, even if their security appliances support only IPv4. If 
      you enable dualstack support, existing consumers can continue to use IPv4 to access your 
      service and new consumers can choose to use IPv6 to access your service.</p>
    <p>If a Gateway Load Balancer endpoint supports IPv4, the endpoint network interfaces have IPv4 addresses. If a 
      Gateway Load Balancer endpoint supports IPv6, the endpoint network interfaces have IPv6 addresses. The IPv6 address 
      for an endpoint network interface is unreachable from the internet. If you describe an 
      endpoint network interface with an IPv6 address, notice that <code class="code">denyAllIgwTraffic</code> 
      is enabled.</p>
    
    <div class="itemizedlist">
      <h6>Requirements to enable IPv6 for an endpoint service</h6>
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p>The VPC and subnets for the endpoint service must have associated IPv6 CIDR
          blocks.</p>
      </li><li class="listitem">
        <p>The Gateway Load Balancer for the endpoint service must use the dualstack IP address type. The
          security appliances do not need to support IPv6 traffic.</p>
      </li></ul></div>
    
    <div class="itemizedlist">
      <h6>Requirements to enable IPv6 for a Gateway Load Balancer endpoint</h6>
       
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p>The endpoint service must have an IP address type that includes IPv6 support.</p>
      </li><li class="listitem">
        <p>The IP address type of a Gateway Load Balancer endpoint must be compatible with the subnet for
          the Gateway Load Balancer endpoint, as described here:</p>
        <div class="itemizedlist">
           
           
           
        <ul class="itemizedlist"><li class="listitem">
            <p><b>IPv4</b> – Assign IPv4 addresses to your endpoint
              network interfaces. This option is supported only if all selected subnets have
              IPv4 address ranges.</p>
          </li><li class="listitem">
            <p><b>IPv6</b> – Assign IPv6 addresses to your endpoint
              network interfaces. This option is supported only if all selected subnets are 
              IPv6 only subnets.</p>
          </li><li class="listitem">
            <p><b>Dualstack</b> – Assign both IPv4 and IPv6 addresses to
              your endpoint network interfaces. This option is supported only if all selected
              subnets have both IPv4 and IPv6 address ranges.</p>
          </li></ul></div>
      </li><li class="listitem">
        <p>The route tables for the subnets in the service consumer VPC must route IPv6 
          traffic and the network ACLs for these subnets must allow IPv6 traffic.</p>
      </li></ul></div>
    
   
    <h2 id="gateway-load-balancer-endpoints-routing">Routing</h2>
    <p>To route traffic to the endpoint service, specify the Gateway Load Balancer endpoint as a target in your route
      tables, using its ID. For the diagram above, add routes to the route tables as
      follows. Note that IPv6 routes are included for a dualstack configuration.</p>

     
      <h6>Route table for the internet gateway</h6>
      <p>This route table must have a route that sends traffic destined for the application
        servers to the Gateway Load Balancer endpoint.</p>
     
    <div class="table-container"><div class="table-contents"><table id="w227aac13c13b7"><thead>
          <tr>
            <th>Destination</th>
            <th>Target</th>
          </tr>
        </thead>
          <tr>
            <td><code class="replaceable">VPC IPv4 CIDR</code></td>
            <td>Local</td>
          </tr>
          <tr>
            <td><code class="replaceable">VPC IPv6 CIDR</code></td>
            <td>Local</td>
          </tr>
          <tr>
            <td><code class="replaceable">Application subnet IPv4 CIDR</code></td>
            <td><code class="replaceable">vpc-endpoint-id</code></td>
          </tr>
          <tr>
            <td><code class="replaceable">Application subnet IPv6 CIDR</code></td>
            <td><code class="replaceable">vpc-endpoint-id</code></td>
          </tr>
        </table></div></div>

     
      <h6>Route table for the subnet with the application servers</h6>
      <p>This route table must have a route that sends all traffic from the application servers
        to the Gateway Load Balancer endpoint.</p>
     
    <div class="table-container"><div class="table-contents"><table id="w227aac13c13c11"><thead>
          <tr>
            <th>Destination</th>
            <th>Target</th>
          </tr>
        </thead>
          <tr>
            <td><code class="replaceable">VPC IPv4 CIDR</code></td>
            <td>Local</td>
          </tr>
          <tr>
            <td><code class="replaceable">VPC IPv6 CIDR</code></td>
            <td>Local</td>
          </tr>
          <tr>
            <td>0.0.0.0/0</td>
            <td><code class="replaceable">vpc-endpoint-id</code></td>
          </tr>
          <tr>
            <td>::/0</td>
            <td><code class="replaceable">vpc-endpoint-id</code></td>
          </tr>
        </table></div></div>

     
      <h6>Route table for the subnet with the Gateway Load Balancer endpoint</h6>
      <p>This route table must send traffic that is returned from inspection to its final
        destination. For traffic that originated from the internet, the local route sends the
        traffic to the application servers. For traffic that originated from the application
        servers, add a route that sends all traffic to the internet gateway.</p>
     
    <div class="table-container"><div class="table-contents"><table id="w227aac13c13c15"><thead>
          <tr>
            <th>Destination</th>
            <th>Target</th>
          </tr>
        </thead>
          <tr>
            <td><code class="replaceable">VPC IPv4 CIDR</code></td>
            <td>Local</td>
          </tr>
          <tr>
            <td><code class="replaceable">VPC IPv6 CIDR</code></td>
            <td>Local</td>
          </tr>
          <tr>
            <td>0.0.0.0/0</td>
            <td><code class="replaceable">internet-gateway-id</code></td>
          </tr>
          <tr>
            <td>::/0</td>
            <td><code class="replaceable">internet-gateway-id</code></td>
          </tr>
        </table></div></div>
  <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./privatelink-access-saas.html">Access SaaS products</div><div id="next" class="next-link" accesskey="n" href="./create-gateway-load-balancer-endpoint-service.html">Create a Gateway Load Balancer endpoint service</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=PrivateLink&amp;topic_url=https://docs.aws.amazon.com/en_us/vpc/latest/privatelink/vpce-gateway-load-balancer.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=PrivateLink&amp;topic_url=https://docs.aws.amazon.com/en_us/vpc/latest/privatelink/vpce-gateway-load-balancer.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>