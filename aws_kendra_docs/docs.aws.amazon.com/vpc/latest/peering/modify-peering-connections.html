<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Modify VPC peering connection options - Amazon Virtual Private Cloud</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="modify-peering-connections" /><meta name="default_state" content="modify-peering-connections" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/vpc/latest/peering/modify-peering-connections.html" /><meta name="description" content="Modify the VPC peering connection options." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Virtual Private Cloud" /><meta name="guide" content="VPC Peering" /><meta name="abstract" content="Use Amazon VPC to launch AWS resources into a virtual network that is a logically isolated section of the AWS cloud." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/vpc/latest/peering/modify-peering-connections.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/vpc/latest/peering/modify-peering-connections.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/vpc/latest/peering/modify-peering-connections.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/vpc/latest/peering/modify-peering-connections.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/vpc/latest/peering/modify-peering-connections.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/vpc/latest/peering/modify-peering-connections.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/vpc/latest/peering/modify-peering-connections.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/vpc/latest/peering/modify-peering-connections.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/vpc/latest/peering/modify-peering-connections.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/vpc/latest/peering/modify-peering-connections.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/vpc/latest/peering/modify-peering-connections.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/vpc/latest/peering/modify-peering-connections.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/vpc/latest/peering/modify-peering-connections.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/vpc/latest/peering/modify-peering-connections.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/vpc/latest/peering/modify-peering-connections.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/vpc/latest/peering/modify-peering-connections.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/vpc/latest/peering/modify-peering-connections.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/vpc/latest/peering/modify-peering-connections.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/vpc/latest/peering/modify-peering-connections.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/vpc/latest/peering/modify-peering-connections.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/vpc/latest/peering/modify-peering-connections.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/vpc/latest/peering/modify-peering-connections.html" hreflang="x-default" /><meta name="feedback-item" content="VPC" /><meta name="this_doc_product" content="Amazon Virtual Private Cloud" /><meta name="this_doc_guide" content="VPC Peering" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'vpc'}"></script><meta id="panorama-serviceSubSection" value="VPC Peering" /><meta id="panorama-serviceConsolePage" value="Modify VPC peering connection options" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Modify VPC peering connection options - Amazon Virtual Private Cloud</title><meta name="pdf" content="/pdfs/vpc/latest/peering/vpc-pg.pdf#modify-peering-connections" /><meta name="github" content="https://github.com/awsdocs/amazon-vpc-peering-guide/tree/master/doc_source/modify-peering-connections.md" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=58" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=VPC&amp;topic_url=http://docs.aws.amazon.com/en_us/vpc/latest/peering/modify-peering-connections.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/vpc/latest/peering/modify-peering-connections.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/vpc/latest/peering/modify-peering-connections.html" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon VPC",
        "item" : "https://docs.aws.amazon.com/vpc/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "VPC Peering",
        "item" : "https://docs.aws.amazon.com/vpc/latest/peering"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Work with VPC peering connections",
        "item" : "https://docs.aws.amazon.com/vpc/latest/peering/working-with-vpc-peering.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Modify VPC peering connection options",
        "item" : "https://docs.aws.amazon.com/vpc/latest/peering/working-with-vpc-peering.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/vpc/latest/peering/vpc-pg.pdf#modify-peering-connections" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a href="https://github.com/awsdocs/amazon-vpc-peering-guide/tree/master/doc_source/modify-peering-connections.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/vpc/index.html">Amazon VPC</a><a href="what-is-vpc-peering.html">VPC Peering</a></div><div id="page-toc-src"><a href="#vpc-peering-dns">Enable DNS resolution for a VPC peering connection</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="modify-peering-connections">Modify VPC peering connection options</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>You can modify a VPC peering connection to do the following:</p><div class="itemizedlist">
         
      <ul class="itemizedlist"><li class="listitem">
          <p>Enable a VPC to resolve public IPv4 DNS hostnames to private IPv4 addresses when
            queried from instances in the peer VPC. For more information, see <a href="#vpc-peering-dns">Enable DNS resolution for a VPC peering connection</a>.</p>
        </li></ul></div>
			<h2 id="vpc-peering-dns">Enable DNS resolution for a VPC peering connection</h2>
			<p>To enable a VPC to resolve public IPv4 DNS hostnames to private IPv4 addresses when queried
                from instances in the peer VPC, you must modify your existing peering
                connection.</p>
			<p>Both VPCs must be enabled for DNS hostnames and DNS resolution.</p>
            <p>You cannot enable DNS resolution support when you create a new peering connection.
                You can enable DNS resolution support for an existing peering connection that's in
                the <code class="code">active</code> state.</p>

      	<div class="procedure"><h6>To enable DNS resolution for a peering connection</h6><ol><li><p>Open the Amazon VPC console at
         <a href="https://console.aws.amazon.com/vpc/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/vpc/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></li><li>
					<p>In the navigation pane, choose <b>Peering connections</b>.</p>
				</li><li>
					<p>Select the VPC peering connection, and choose
						<b>Actions</b>, <b>Edit DNS settings</b>.</p>
				</li><li>
					<p>To ensure that queries from the peer VPC resolve to private IP addresses in your local
                        VPC, choose the option to enable DNS resolution for queries from the peer
                        VPC. This option is <b>Requester DNS resolution</b> or
                            <b>Accepter DNS resolution</b>, depending on whether the
                        VPC is the requester or accepter VPC.</p>
				</li><li>
					<p>If the peer VPC is in the same AWS account, you can enable DNS resolution for both VPCs
                        in the peering connection.</p>
				</li><li>
					<p>Choose <b>Save changes</b>.</p>
				</li><li>
					<p>If the peer VPC is in a different AWS account or a different Region, the owner of the
						peer VPC must sign into the VPC console, perform steps 2 through 4, and
						choose <b>Save changes</b>.</p>
				</li></ol></div>
			<div class="itemizedlist">
				<h6>To enable DNS resolution using the command line or an API</h6>
				 
				 
				 
			<ul class="itemizedlist"><li class="listitem">
					<p><a href="https://docs.aws.amazon.com/cli/latest/reference/ec2/modify-vpc-peering-connection-options.html">modify-vpc-peering-connection-options</a> (AWS CLI)</p>
				</li><li class="listitem">
					<p><a href="https://docs.aws.amazon.com/powershell/latest/reference/items/Edit-EC2VpcPeeringConnectionOption.html">Edit-EC2VpcPeeringConnectionOption</a> (AWS Tools for Windows PowerShell)</p>
				</li><li class="listitem">
					<p><a href="https://docs.aws.amazon.com/AWSEC2/latest/APIReference/ApiReference-query-ModifyVpcPeeringConnectionOptions.html">ModifyVpcPeeringConnectionOptions</a> (Amazon EC2 Query API)</p>
				</li></ul></div>
			<p>You must modify the requester VPC peering options if you are the requester of the VPC
				peering connection, and you must modify the accepter VPC peering options if you are
				the accepter of the VPC peering connection. You can use the <a href="https://docs.aws.amazon.com/cli/latest/reference/ec2/describe-vpc-peering-connections.html">describe-vpc-peering-connections</a> or <a href="https://docs.aws.amazon.com/powershell/latest/reference/items/Get-EC2VpcPeeringConnections.html">Get-EC2VpcPeeringConnections</a> commands to verify which VPC is the
				accepter and the requester for a VPC peering connection. For inter-Region peering
				connections, you must use the Region for the requester VPC to modify the requester
				VPC peering options and the Region for the accepter VPC to modify the accepter VPC
				peering options.</p>
			<p>In this example, you are the requester of the VPC peering connection, therefore
				modify the peering connection options using the AWS CLI as follows:</p>
			<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="userinput">aws ec2 modify-vpc-peering-connection-options --vpc-peering-connection-id <code class="replaceable">pcx-aaaabbbb</code> --requester-peering-connection-options AllowDnsResolutionFromRemoteVpc=true</code></code></pre>
		<awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./vpc-peering-security-groups.html">Reference peer security groups</div><div id="next" class="next-link" accesskey="n" href="./delete-vpc-peering-connection.html">Delete</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=VPC&amp;topic_url=https://docs.aws.amazon.com/en_us/vpc/latest/peering/modify-peering-connections.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=VPC&amp;topic_url=https://docs.aws.amazon.com/en_us/vpc/latest/peering/modify-peering-connections.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>