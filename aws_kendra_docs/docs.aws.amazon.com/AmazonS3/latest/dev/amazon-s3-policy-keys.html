<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Amazon S3 condition key examples - Amazon Simple Storage Service</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="amazon-s3-policy-keys" /><meta name="default_state" content="amazon-s3-policy-keys" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/amazon-s3-policy-keys.html" /><meta name="description" content="You can use access policy language to specify conditions when you grant permissions. You can use the optional Condition element, or Condition block to specify conditions for when a policy is in effect." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Simple Storage Service" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Learn how to use Amazon Simple Storage Service (Amazon S3) to store and retrieve any amount of data from anywhere. This guide explains Amazon S3 concepts, such as buckets, objects, and related configurations, and includes code examples for common operations." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/amazon-s3-policy-keys.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AmazonS3/latest/userguide/amazon-s3-policy-keys.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AmazonS3/latest/userguide/amazon-s3-policy-keys.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AmazonS3/latest/userguide/amazon-s3-policy-keys.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AmazonS3/latest/userguide/amazon-s3-policy-keys.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/amazon-s3-policy-keys.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/amazon-s3-policy-keys.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AmazonS3/latest/userguide/amazon-s3-policy-keys.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AmazonS3/latest/userguide/amazon-s3-policy-keys.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AmazonS3/latest/userguide/amazon-s3-policy-keys.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AmazonS3/latest/userguide/amazon-s3-policy-keys.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AmazonS3/latest/userguide/amazon-s3-policy-keys.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AmazonS3/latest/userguide/amazon-s3-policy-keys.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/amazon-s3-policy-keys.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/amazon-s3-policy-keys.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AmazonS3/latest/userguide/amazon-s3-policy-keys.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AmazonS3/latest/userguide/amazon-s3-policy-keys.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AmazonS3/latest/userguide/amazon-s3-policy-keys.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AmazonS3/latest/userguide/amazon-s3-policy-keys.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AmazonS3/latest/userguide/amazon-s3-policy-keys.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AmazonS3/latest/userguide/amazon-s3-policy-keys.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/amazon-s3-policy-keys.html" hreflang="x-default" /><meta name="feedback-item" content="S3" /><meta name="this_doc_product" content="Amazon Simple Storage Service" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'s3'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="Amazon S3 condition key examples" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Amazon S3 condition key examples - Amazon Simple Storage Service</title><meta name="pdf" content="/pdfs/AmazonS3/latest/userguide/s3-userguide.pdf#amazon-s3-policy-keys" /><meta name="github" content="https://github.com/awsdocs/amazon-s3-userguide/tree/main/doc_source/amazon-s3-policy-keys.md" /><meta name="rss" content="s3-userguide-rss-updates.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=24" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=S3&amp;topic_url=http://docs.aws.amazon.com/en_us/AmazonS3/latest/userguide/amazon-s3-policy-keys.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/AmazonS3/latest/userguide/amazon-s3-policy-keys.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/AmazonS3/latest/userguide/amazon-s3-policy-keys.html" /><meta name="keywords" content="S3,Amazon S3,S3 User Guide,Amazon S3 User Guide,Amazon User Guide,s3 bucket,s3 object,cloud storage,data storage" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Simple Storage Service (S3)",
        "item" : "https://docs.aws.amazon.com/s3/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/AmazonS3/latest/userguide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Amazon S3 security",
        "item" : "https://docs.aws.amazon.com/AmazonS3/latest/userguide/security.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Identity and access management in Amazon S3",
        "item" : "https://docs.aws.amazon.com/AmazonS3/latest/userguide/s3-access-control.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Bucket policies and user policies",
        "item" : "https://docs.aws.amazon.com/AmazonS3/latest/userguide/using-iam-policies.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "Policies and Permissions in Amazon S3",
        "item" : "https://docs.aws.amazon.com/AmazonS3/latest/userguide/access-policy-language-overview.html"
      },
      {
        "@type" : "ListItem",
        "position" : 8,
        "name" : "Amazon S3 condition keys",
        "item" : "https://docs.aws.amazon.com/AmazonS3/latest/userguide/amazon-s3-condition-keys.html"
      },
      {
        "@type" : "ListItem",
        "position" : 9,
        "name" : "Amazon S3 condition key examples",
        "item" : "https://docs.aws.amazon.com/AmazonS3/latest/userguide/amazon-s3-condition-keys.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/AmazonS3/latest/userguide/s3-userguide.pdf#amazon-s3-policy-keys" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a href="https://github.com/awsdocs/amazon-s3-userguide/tree/main/doc_source/amazon-s3-policy-keys.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/s3/index.html">Amazon Simple Storage Service (S3)</a><a href="Welcome.html">User Guide</a></div><div id="page-toc-src"><a href="#object-keys-in-amazon-s3-policies">Object operation
						examples</a><a href="#bucket-keys-in-amazon-s3-policies">Bucket operation
						examples</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="amazon-s3-policy-keys">Amazon S3 condition key examples</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>You can use access policy language to specify conditions when you grant permissions. You
					can use the optional <code class="code">Condition</code> element, or <code class="code">Condition</code>
					block to specify conditions for when a policy is in effect. </p><p>For policies that use Amazon S3 condition keys for object and bucket operations, see the
					following examples. For more information about condition keys, see <a href="./amazon-s3-condition-keys.html">Amazon S3 condition keys</a>. For a complete list of Amazon S3 actions, condition keys, and resources that you
					can specify in policies, see <a href="./list_amazons3.html">Actions, resources, and condition keys for      Amazon S3</a>.</p>
				<h2 id="object-keys-in-amazon-s3-policies">Examples — Amazon S3 condition keys for
						object operations</h2>
				<p>This section provides examples that show you how you can use
					Amazon S3‐specific condition keys for object operations. For a complete list of
					Amazon S3 actions, condition keys, and resources that you can specify in policies,
					see <a href="./list_amazons3.html">Actions, resources, and condition keys for      Amazon S3</a>.</p>
				<p>Several of the example policies show how you can use conditions keys with
						<a href="https://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectPUT.html">PUT Object</a> operations.
					PUT Object operations allow access control list (ACL)–specific headers
					that you can use to grant ACL-based permissions. Using these keys, the bucket
					owner can set a condition to require specific access permissions when the user
					uploads an object. You can also grant ACL–based permissions with the
					PutObjectAcl operation. For more information, see <a href="https://docs.aws.amazon.com/AmazonS3/latest/API/API_PutObjectAcl.html">PutObjectAcl</a> in the
						<em>Amazon S3 Amazon Simple Storage Service API Reference</em>. For more information about ACLs,
					see <a href="./acl-overview.html">Access control list (ACL) overview</a>.</p>
					<div class="highlights" id="inline-topiclist"><h6>Topics</h6><ul><li><a href="#grant-putobject-conditionally-1">Example 1: Granting s3:PutObject permission
							with a condition requiring the bucket owner to get full control</a></li><li><a href="#putobject-require-sse-2">Example 2: Granting s3:PutObject permission
							requiring objects stored using server-side encryption</a></li><li><a href="#putobject-limit-copy-source-3">Example 3: Granting s3:PutObject permission to
							copy objects with a restriction on the copy source</a></li><li><a href="#getobjectversion-limit-access-to-specific-version-3">Example 4: Granting
							access to a specific version of an object</a></li><li><a href="#example-storage-class-condition-key">Example 5: Restricting object uploads to
							objects with a specific storage class</a></li><li><a href="#example-object-tagging-access-control">Example 6: Granting permissions based
								on object tags</a></li><li><a href="#example-object-resource-account">Example 7: Restricting
								access by the AWS account ID of the bucket owner</a></li><li><a href="#example-object-tls-version">Example 8: Requiring a minimum TLS
								version</a></li></ul></div>
				 
					<h3 id="grant-putobject-conditionally-1">Example 1: Granting s3:PutObject permission
							with a condition requiring the bucket owner to get full control</h3>
					<p>The <a href="https://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectPUT.html">PUT Object</a>
						operation allows access control list (ACL)–specific headers that you
						can use to grant ACL-based permissions. Using these keys, the bucket owner
						can set a condition to require specific access permissions when the user
						uploads an object. </p>
					<p>Suppose that Account A owns a bucket, and the account administrator wants
						to grant Dave, a user in Account B, permissions to upload objects. By
						default, objects that Dave uploads are owned by Account B, and Account A has
						no permissions on these objects. Because the bucket owner is paying the
						bills, it wants full permissions on the objects that Dave uploads. The
						Account A administrator can do this by granting the
							<code class="code">s3:PutObject</code> permission to Dave, with a condition that the
						request include ACL-specific headers that either grant full permission
						explicitly or use a canned ACL. For more information, see <a href="https://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectPUT.html">PUT Object</a>.</p>
					 
						<h4 id="require-x-amz-full-control">Require the x-amz-full-control header</h4>
						<p>You can require the <code class="code">x-amz-full-control</code> header in the
							request with full control permission to the bucket owner. The following
							bucket policy grants the <code class="code">s3:PutObject</code> permission to user
							Dave with a condition using the <code class="code">s3:x-amz-grant-full-control</code>
							condition key, which requires the request to include the
								<code class="code">x-amz-full-control</code> header.</p>
						<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Sid": "statement1",
      "Effect": "Allow",
      "Principal": <span>{</span>
        "AWS": "arn:aws:iam::<code class="replaceable">AccountB-ID</code>:user/Dave"
      },
      "Action": "s3:PutObject",
      "Resource": "arn:aws:s3:::<code class="replaceable">awsexamplebucket1</code>/*",
      "Condition": <span>{</span>
        "StringEquals": <span>{</span>
          "s3:x-amz-grant-full-control": "id=<code class="replaceable">AccountA-CanonicalUserID</code>"
        }
      }
    }
  ]
}</code></pre>
						<div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>This example is about cross-account permission. However, if Dave
								(who is getting the permission) belongs to the AWS account that
								owns the bucket, this conditional permission is not necessary. This
								is because the parent account to which Dave belongs owns objects
								that the user uploads.</p></div></div>
						 
							<h6>Add explicit deny</h6>
							<p>The preceding bucket policy grants conditional permission to user
								Dave in Account B. While this policy is in effect, it is possible
								for Dave to get the same permission without any condition via some
								other policy. For example, Dave can belong to a group, and you grant
								the group <code class="code">s3:PutObject</code> permission without any
								condition. To avoid such permission loopholes, you can write a
								stricter access policy by adding explicit deny. In this example, you
								explicitly deny the user Dave upload permission if he does not
								include the necessary headers in the request granting full
								permissions to the bucket owner. Explicit deny always supersedes any
								other permission granted. The following is the revised access policy
								example with explicit deny added.</p>
						 
						<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "statement1",
            "Effect": "Allow",
            "Principal": <span>{</span>
                "AWS": "arn:aws:iam::<code class="replaceable">AccountB-ID</code>:user/AccountBadmin"
            },
            "Action": "s3:PutObject",
            "Resource": "arn:aws:s3:::<code class="replaceable">awsexamplebucket1</code>/*",
            "Condition": <span>{</span>
                "StringEquals": <span>{</span>
                    "s3:x-amz-grant-full-control": "id=<code class="replaceable">AccountA-CanonicalUserID</code>"
                }
            }
        },
        <span>{</span>
            "Sid": "statement2",
            "Effect": "Deny",
            "Principal": <span>{</span>
                "AWS": "arn:aws:iam::<code class="replaceable">AccountB-ID</code>:user/AccountBadmin"
            },
            "Action": "s3:PutObject",
            "Resource": "arn:aws:s3:::<code class="replaceable">awsexamplebucket1</code>/*",
            "Condition": <span>{</span>
                "StringNotEquals": <span>{</span>
                    "s3:x-amz-grant-full-control": "id=<code class="replaceable">AccountA-CanonicalUserID</code>"
                }
            }
        }
    ]
}</code></pre>
						 
							<h6>Test the policy with the AWS CLI</h6>
							<p>If you have two AWS accounts, you can test the policy using the
								AWS Command Line Interface (AWS CLI). You attach the policy and use Dave's credentials
								to test the permission using the following AWS CLI
									<code class="code">put-object</code> command. You provide Dave's credentials
								by adding the <code class="code">--profile</code> parameter. You grant full
								control permission to the bucket owner by adding the
									<code class="code">--grant-full-control</code> parameter. For more
								information about setting up and using the AWS CLI, see <a href="./setup-aws-cli.html">Developing with Amazon S3 using the AWS CLI</a>.
							</p>
						 
						<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws s3api put-object --bucket <code class="replaceable">examplebucket</code> --key HappyFace.jpg --body c:\HappyFace.jpg --grant-full-control id="<code class="replaceable">AccountA-CanonicalUserID</code>" --profile AccountBUserProfile</code></pre>
					 
					 
						<h4 id="require-x-amz-acl-header">Require the x-amz-acl header</h4>
						<p>You can require the <code class="code">x-amz-acl</code> header with a canned ACL
							granting full control permission to the bucket owner. To require the
								<code class="code">x-amz-acl</code> header in the request, you can replace the
							key-value pair in the <code class="code">Condition</code> block and specify the
								<code class="code">s3:x-amz-acl</code> condition key, as shown in the following
							example.</p>
<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">"Condition": <span>{</span>
    "StringEquals": <span>{</span>
        "s3:x-amz-acl": "bucket-owner-full-control"
    }
}</code></pre>
						 
							<p>To test the permission using the AWS CLI, you specify the
									<code class="code">--acl</code> parameter. The AWS CLI then adds the
									<code class="code">x-amz-acl</code> header when it sends the request.</p>
						 
						<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws s3api put-object --bucket <code class="replaceable">examplebucket</code> --key HappyFace.jpg --body c:\HappyFace.jpg --acl "bucket-owner-full-control" --profile AccountBadmin</code></pre>
					 
				 
				 
					<h3 id="putobject-require-sse-2">Example 2: Granting s3:PutObject permission
							requiring objects stored using server-side encryption</h3>
					<p>Suppose that Account A owns a bucket. The account administrator wants to
						grant Jane, a user in Account A, permission to upload objects with a
						condition that Jane always request server-side encryption so that Amazon S3 saves
						objects encrypted. The Account A administrator can accomplish using the
							<code class="code">s3:x-amz-server-side-encryption</code> condition key as shown. The
						key-value pair in the <code class="code">Condition</code> block specifies the
							<code class="code">s3:x-amz-server-side-encryption</code> key.</p>
					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">"Condition": <span>{</span>
     "StringNotEquals": <span>{</span>
         "s3:x-amz-server-side-encryption": "AES256"
     }</code></pre>
					<p>When testing the permission using the AWS CLI, you must add the required
						parameter using the <code class="code">--server-side-encryption</code> parameter.</p>
					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">aws s3api put-object --bucket example1bucket --key HappyFace.jpg --body c:\HappyFace.jpg --server-side-encryption "AES256" --profile AccountBadmin</code></pre>
				 
				 
					<h3 id="putobject-limit-copy-source-3">Example 3: Granting s3:PutObject permission to
							copy objects with a restriction on the copy source</h3>
					<p>In the PUT Object request, when you specify a source object, it is a copy
						operation (see <a href="https://docs.aws.amazon.com/AmazonS3/latest/API/RESTObjectCOPY.html">PUT Object -
							Copy</a>). Accordingly, the bucket owner can grant a user permission
						to copy objects with restrictions on the source, for example:</p>
					<div class="itemizedlist">
						 
						 
						 
					<ul class="itemizedlist"><li class="listitem">
							<p>Allow copying objects only from the <code class="code">sourcebucket</code>
								bucket.</p>
						</li><li class="listitem">
							<p>Allow copying objects from the source bucket
								and only the objects whose key name prefix starts with
									public/ f (for example,
									sourcebucket/public/*).</p>
						</li><li class="listitem">
							<p>Allow copying only a specific object from the
									sourcebucket (for example,
									sourcebucket/example.jpg).</p>
						</li></ul></div>
					<p>The following bucket policy grants user (Dave) <code class="code">s3:PutObject</code>
						permission. It allows him to copy objects only with a condition that the
						request include the <code class="code">s3:x-amz-copy-source</code> header and the header
						value specify the <code class="code">/awsexamplebucket1/public/*</code> key name prefix. </p>
					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
       <span>{</span>
            "Sid": "cross-account permission to user in your own account",
            "Effect": "Allow",
            "Principal": <span>{</span>
                "AWS": "arn:aws:iam::<code class="replaceable">123456789012</code>:user/Dave"
            },
            "Action": "s3:PutObject",
            "Resource": "arn:aws:s3:::<code class="replaceable">awsexamplebucket1</code>/*"
        },
        <span>{</span>
            "Sid": "Deny your user permission to upload object if copy source is not /bucket/folder",
            "Effect": "Deny",
            "Principal": <span>{</span>
                "AWS": "arn:aws:iam::<code class="replaceable">123456789012</code>:user/Dave"
            },
            "Action": "s3:PutObject",
            "Resource": "arn:aws:s3:::<code class="replaceable">awsexamplebucket1</code>/*",
            "Condition": <span>{</span>
                "StringNotLike": <span>{</span>
                    "s3:x-amz-copy-source": "<code class="replaceable">awsexamplebucket1</code>/public/*"
                }
            }
        }
    ]
}</code></pre>
					 
						<h6>Test the policy with the AWS CLI</h6>
						<p>You can test the permission using the AWS CLI <code class="code">copy-object</code>
							command. You specify the source by adding the <code class="code">--copy-source</code>
							parameter; the key name prefix must match the prefix allowed in the
							policy. You need to provide the user Dave credentials using the
								<code class="code">--profile</code> parameter. For more information about setting
							up the AWS CLI, see <a href="./setup-aws-cli.html">Developing with Amazon S3 using the AWS CLI</a>.</p>
					 
					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws s3api copy-object --bucket <code class="replaceable">awsexamplebucket1</code> --key HappyFace.jpg 
--copy-source <code class="replaceable">examplebucket</code>/public/PublicHappyFace1.jpg --profile AccountADave</code></pre>
					 
						<h6>Give permission to copy only a specific object</h6>
						<p>The preceding policy uses the <code class="code">StringNotLike</code> condition. To
							grant permission to copy only a specific object, you must change the
							condition from <code class="code">StringNotLike</code> to
								<code class="code">StringNotEquals</code> and then specify the exact object key
							as shown. </p>
					 
					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">"Condition": <span>{</span>
       "StringNotEquals": <span>{</span>
           "s3:x-amz-copy-source": "<code class="replaceable">awsexamplebucket1</code>/public/PublicHappyFace1.jpg"
       }
}</code></pre>
				 
				 
					<h3 id="getobjectversion-limit-access-to-specific-version-3">Example 4: Granting
							access to a specific version of an object</h3>
					<p>Suppose that Account A owns a version-enabled bucket. The bucket has
						several versions of the <code>HappyFace.jpg</code> object. The
						account administrator now wants to grant its user Dave permission to get
						only a specific version of the object. The account administrator can
						accomplish this by granting Dave <code class="code">s3:GetObjectVersion</code> permission
						conditionally as shown below. The key-value pair in the
							<code class="code">Condition</code> block specifies the <code class="code">s3:VersionId</code>
						condition key. In this case, Dave needs to know the exact object version ID
						to retrieve the object. </p>
					<p>For more information, see <a href="https://docs.aws.amazon.com/AmazonS3/latest/API/API_GetObject.html">GetObject</a> in the
							<em>Amazon Simple Storage Service API Reference</em>.</p>
					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "statement1",
            "Effect": "Allow",
            "Principal": <span>{</span>
                "AWS": "arn:aws:iam::<code class="replaceable">123456789012</code>:user/Dave"
            },
            "Action": "s3:GetObjectVersion",
            "Resource": "arn:aws:s3:::<code class="replaceable">examplebucketversionenabled</code>/HappyFace.jpg"
        },
        <span>{</span>
            "Sid": "statement2",
            "Effect": "Deny",
            "Principal": <span>{</span>
                "AWS": "arn:aws:iam::<code class="replaceable">123456789012</code>:user/Dave"
            },
            "Action": "s3:GetObjectVersion",
            "Resource": "arn:aws:s3:::<code class="replaceable">examplebucketversionenabled</code>/HappyFace.jpg",
            "Condition": <span>{</span>
                "StringNotEquals": <span>{</span>
                    "s3:VersionId": "<code class="replaceable">AaaHbAQitwiL_h47_44lRO2DDfLlBO5e</code>"
                }
            }
        }
    ]
}</code></pre>
					 
						<h6>Test the policy with the AWS CLI</h6>
						<p>You can test the permissions using the AWS CLI <code class="code">get-object</code>
							command with the <code class="code">--version-id</code> parameter identifying the
							specific object version. The command retrieves the object and saves it
							to the <code>OutputFile.jpg</code> file.</p>
					 
					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws s3api get-object --bucket <code class="replaceable">examplebucketversionenabled</code> --key HappyFace.jpg OutputFile.jpg --version-id <code class="replaceable">AaaHbAQitwiL_h47_44lRO2DDfLlBO5e</code> --profile AccountADave</code></pre>
				 
				 
					<h3 id="example-storage-class-condition-key">Example 5: Restricting object uploads to
							objects with a specific storage class</h3>
					<p>Suppose that Account A, represented by account ID 123456789012, 
						owns a bucket. The account administrator wants to restrict Dave, a user in 
						Account A, to be able to only upload objects to the bucket that are stored 
						with the <code class="code">STANDARD_IA</code> storage class. To restrict object uploads to 
						a specific storage class, the Account A administrator can use the 
						<code class="code">s3:x-amz-storage-class</code> condition key,as shown in the following 
						example bucket policy. </p>
					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Sid": "statement1",
      "Effect": "Allow",
      "Principal": <span>{</span>
        "AWS": "arn:aws:iam::<code class="replaceable">123456789012</code>:user/Dave"
      },
      "Action": "s3:PutObject",
      "Resource": "arn:aws:s3:::<code class="replaceable">DOC-EXAMPLE-BUCKET1</code>/*",
      "Condition": <span>{</span>
        "StringEquals": <span>{</span>
          "s3:x-amz-storage-class": [
            "STANDARD_IA"
          ]
        }
      }
    }
  ]
}</code></pre>
				 
					 
						<h3 id="example-object-tagging-access-control">Example 6: Granting permissions based
								on object tags</h3>
						<p>For examples on how to use object tagging condition keys with Amazon S3
							operations, see <a href="./tagging-and-policies.html">Tagging and access control policies</a>.</p>
					 
					 
						<h3 id="example-object-resource-account">Example 7: Restricting
								access by the AWS account ID of the bucket owner</h3>
						<p>You can use either the <code class="code">aws:ResourceAccount</code> or
								<code class="code">s3:ResourceAccount</code> key to write IAM or virtual
							private cloud (VPC) endpoint policies that restrict user, role, or
							application access to the Amazon S3 buckets that are owned by a specific
							AWS account ID. You can use this condition key to restrict clients
							within your VPC from accessing buckets that you do not own.</p>
						<p>However, be aware that some AWS services rely on access to AWS managed buckets.
							Therefore, using the <code class="code">aws:ResourceAccount</code> or
								<code class="code">s3:ResourceAccount</code> key in your IAM policy might also
							affect access to these resources.</p>
						<p>For more information and examples, see the following resources:</p>
						<div class="itemizedlist">
							 
							 
							 
							 
						<ul class="itemizedlist"><li class="listitem">
								<p><a href="https://docs.aws.amazon.com/vpc/latest/privatelink/vpc-endpoints-s3.html#vpc-endpoints-policies-s3">Restrict access to buckets in a specified
										AWS account</a> in the <em>AWS PrivateLink
										Guide</em></p>
							</li><li class="listitem">
								<p><a href="https://docs.aws.amazon.com/AmazonECR/latest/userguide/vpc-endpoints.html#ecr-minimum-s3-perms">Restrict access to buckets that Amazon ECR uses</a> in the
										<em>Amazon ECR Guide</em></p>
							</li><li class="listitem">
								<p><a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/ssm-agent-minimum-s3-permissions.html">Provide required access to Systems Manager for AWS managed Amazon S3
									buckets</a> in the <em>AWS Systems Manager
										Guide</em></p>
							</li><li class="listitem">
								<p><a href="http://aws.amazon.com/blogs/storage/limit-access-to-amazon-s3-buckets-owned-by-specific-aws-accounts/" rel="noopener noreferrer" target="_blank"><span>Limit access to Amazon S3 buckets owned by specific
										AWS accounts</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> in the <em>AWS Storage
										Blog</em></p>
							</li></ul></div>
					 
					 
						<h3 id="example-object-tls-version">Example 8: Requiring a minimum TLS
								version</h3>
					 
					<p>You can use the s3:TlsVersion condition key to write IAM, Virtual Private Cloud
						Endpoint (VPCE), or bucket policies that restrict user or application access
						to Amazon S3 buckets based on the TLS version used by the client. You can use
						this condition key to write policies that require a minimum TLS version. </p>
					<div class="example"><div class="example-contents"><p>This example bucket policy <em>denies</em> PutObject requests by clients
							that have a TLS version lower than 1.2, for example, 1.1 or 1.0.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON ">
<span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Deny",
            "Principal": "*",
            "Action": "s3:PutObject",
            "Resource": [
                "arn:aws:s3:::<code class="replaceable"><code class="replaceable">DOC-EXAMPLE-BUCKET1</code></code>",
                "arn:aws:s3:::<code class="replaceable"><code class="replaceable">DOC-EXAMPLE-BUCKET1</code></code>/*"
            ],
            "Condition": <span>{</span>
                "NumericLessThan": <span>{</span>
                    "s3:TlsVersion": 1.2
                }
            }
        }
    ]
}
					</code></pre></div></div>
					<div class="example"><div class="example-contents"><p>This example bucket policy <em>allows</em> PutObject requests by clients that
							have a TLS version higher than 1.1, for example, 1.2, 1.3 or
							higher.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON ">
<span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Principal": "*",
            "Action": "s3:PutObject",
            "Resource": [
                "arn:aws:s3:::<code class="replaceable"><code class="replaceable">DOC-EXAMPLE-BUCKET1</code></code>",
                "arn:aws:s3:::<code class="replaceable"><code class="replaceable">DOC-EXAMPLE-BUCKET1</code></code>/*"
            ],
            "Condition": <span>{</span>
                "NumericGreaterThan": <span>{</span>
                    "s3:TlsVersion": 1.1
                }
            }
        }
    ]
}
					</code></pre></div></div>
			 
				<h2 id="bucket-keys-in-amazon-s3-policies">Examples — Amazon S3 condition keys for
						bucket operations</h2>
				<p>This section provides example policies that show you how you can use
					Amazon S3‐specific condition keys for bucket operations.</p>
<div class="highlights" id="inline-topiclist"><h6>Topics</h6><ul><li><a href="#condition-key-bucket-ops-1">Example 1: Granting a user permission to create a
							bucket only in a specific Region</a></li><li><a href="#condition-key-bucket-ops-2">Example 2: Getting a list of objects in a bucket
							with a specific prefix</a></li><li><a href="#example-numeric-condition-operators">Example 3: Setting the maximum number of
							keys </a></li></ul></div>
				 
					<h3 id="condition-key-bucket-ops-1">Example 1: Granting a user permission to create a
							bucket only in a specific Region</h3>
					<p>Suppose that an AWS account administrator wants to grant its user (Dave)
						permission to create a bucket in the South America (São Paulo) Region only. The
						account administrator can attach the following user policy granting the
							<code class="code">s3:CreateBucket</code> permission with a condition as shown. The
						key-value pair in the <code class="code">Condition</code> block specifies the
							<code class="code">s3:LocationConstraint</code> key and the <code class="code">sa-east-1</code>
						Region as its value.</p>
					<div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>In this example, the bucket owner is granting permission to one of its
							users, so either a bucket policy or a user policy can be used. This
							example shows a user policy.</p></div></div>
					<p>For a list of Amazon S3 Regions, see <a href="https://docs.aws.amazon.com/general/latest/gr/s3.html">Regions and Endpoints</a> in the
							<em>AWS General Reference</em>. </p>
					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Sid":"statement1",
         "Effect":"Allow",
         "Action": "s3:CreateBucket",
         "Resource": "arn:aws:s3:::*",
         "Condition": <span>{</span>
             "StringLike": <span>{</span>
                 "s3:LocationConstraint": "sa-east-1"
             }
         }
       }
    ]
}</code></pre>
					 
						<h6>Add explicit deny</h6>
						<p>The preceding policy restricts the user from creating a bucket in any
							other Region except <code class="code">sa-east-1</code>. However, some other policy
							might grant this user permission to create buckets in another Region.
							For example, if the user belongs to a group, the group might have a
							policy attached to it that allows all users in the group permission to
							create buckets in another Region. To ensure that the user does not get
							permission to create buckets in any other Region, you can add an
							explicit deny statement in the above policy. </p>
					 
					 
						<p>The <code class="code">Deny</code> statement uses the <code class="code">StringNotLike</code>
							condition. That is, a create bucket request is denied if the location
							constraint is not <code class="code">sa-east-1</code>. The explicit deny does not
							allow the user to create a bucket in any other Region, no matter what
							other permission the user gets. The below policy includes an explicit
							deny statement.</p>
					 
					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Sid":"statement1",
         "Effect":"Allow",
         "Action": "s3:CreateBucket",
         "Resource": "arn:aws:s3:::*",
         "Condition": <span>{</span>
             "StringLike": <span>{</span>
                 "s3:LocationConstraint": "sa-east-1"
             }
         }
       },
      <span>{</span>
         "Sid":"statement2",
         "Effect":"Deny",
         "Action": "s3:CreateBucket",
         "Resource": "arn:aws:s3:::*",
         "Condition": <span>{</span>
             "StringNotLike": <span>{</span>
                 "s3:LocationConstraint": "sa-east-1"
             }
         }
       }
    ]
}</code></pre>
					 
						<h6>Test the policy with the AWS CLI</h6>
						<p>You can test the policy using the following <code class="code">create-bucket</code>
							AWS CLI command. This example uses the
								<code>bucketconfig.txt</code> file to specify the location
							constraint. Note the Windows file path. You need to update the bucket
							name and path as appropriate. You must provide user credentials using
							the <code class="code">--profile</code> parameter. For more information about setting
							up and using the AWS CLI, see <a href="./setup-aws-cli.html">Developing with Amazon S3 using the AWS CLI</a>.</p>
					 
					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws s3api create-bucket --bucket <code class="replaceable">examplebucket</code> --profile AccountADave --create-bucket-configuration file://c:/Users/someUser/bucketconfig.txt</code></pre>
					<p>The <code>bucketconfig.txt</code> file specifies the configuration
						as follows.</p>
					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>"LocationConstraint": "sa-east-1"}</code></pre>
				 
				 
					<h3 id="condition-key-bucket-ops-2">Example 2: Getting a list of objects in a bucket
							with a specific prefix</h3>
					<p>You can use the <code class="code">s3:prefix</code> condition key to limit the response
						of the <a href="https://docs.aws.amazon.com/AmazonS3/latest/API/API_ListObjects.html">GET Bucket
							(ListObjects)</a> API to key names with a specific prefix. If you
						are the bucket owner, you can restrict a user to list the contents of a
						specific prefix in the bucket. This condition key is useful if objects in
						the bucket are organized by key name prefixes. The Amazon S3 console uses
						key name prefixes to show a folder concept. Only the console supports the
						concept of folders; the Amazon S3 API supports only buckets and objects. For more
						information about using prefixes and delimiters to filter access
						permissions, see <a href="./walkthrough1.html">Controlling access to a bucket with user policies</a>.</p>
					<p>For example, if you have two objects with key names
							<code>public/object1.jpg</code> and
							<code>public/object2.jpg</code>, the console shows the objects
						under the <code>public</code> folder. In the Amazon S3 API, these are
						objects with prefixes, not objects in folders. However, in the Amazon S3 API, if
						you organize your object keys using such prefixes, you can grant
							<code class="code">s3:ListBucket</code> permission with the <code class="code">s3:prefix</code>
						condition that will allow the user to get a list of key names with those
						specific prefixes. </p>
					<p>In this example, the bucket owner and the parent account to which the user
						belongs are the same. So the bucket owner can use either a bucket policy or
						a user policy. For more information about other condition keys that you can
						use with the GET Bucket (ListObjects) API, see <a href="https://docs.aws.amazon.com/AmazonS3/latest/API/API_ListObjects.html">
						ListObjects</a>.</p>
					 
						<h6>User policy</h6>
						<p>The following user policy grants the <code class="code">s3:ListBucket</code>
							permission (see <a href="https://docs.aws.amazon.com/AmazonS3/latest/API/RESTBucketGET.html">GET Bucket
								(List Objects)</a>) with a condition that requires the user to
							specify the <code class="code">prefix</code> in the request with the value
								<code class="code">projects</code>. </p>
					 
					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Sid":"statement1",
         "Effect":"Allow",
         "Action": "s3:ListBucket",
         "Resource":"arn:aws:s3:::<code class="replaceable">awsexamplebucket1</code>",
         "Condition" : <span>{</span>
             "StringEquals" : <span>{</span>
                 "s3:prefix": "projects" 
             }
          } 
       },
      <span>{</span>
         "Sid":"statement2",
         "Effect":"Deny",
         "Action": "s3:ListBucket",
         "Resource": "arn:aws:s3:::<code class="replaceable">awsexamplebucket1</code>",
         "Condition" : <span>{</span>
             "StringNotEquals" : <span>{</span>
                 "s3:prefix": "projects" 
             }
          } 
       }         
    ]
}</code></pre>
					<p>The condition restricts the user to listing object keys with the
							<code class="code">projects</code> prefix. The added explicit deny denies the user
						request for listing keys with any other prefix no matter what other
						permissions the user might have. For example, it is possible that the user
						gets permission to list object keys without any restriction, either by
						updates to the preceding user policy or via a bucket policy. Because
						explicit deny always supersedes, the user request to list keys other than
						the <code class="code">projects</code> prefix is denied. </p>
					 
						<h6>Bucket policy</h6>
						<p>If you add the <code class="code">Principal</code> element to the above user
							policy, identifying the user, you now have a bucket policy as
							shown.</p>
					 
					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Sid":"statement1",
         "Effect":"Allow",
         "Principal": <span>{</span>
            "AWS": "arn:aws:iam::<code class="replaceable">123456789012</code>:user/<code class="replaceable">bucket-owner</code>"
         },  
         "Action":  "s3:ListBucket",
         "Resource": "arn:aws:s3:::<code class="replaceable">awsexamplebucket1</code>",
         "Condition" : <span>{</span>
             "StringEquals" : <span>{</span>
                 "s3:prefix": "projects" 
             }
          } 
       },
      <span>{</span>
         "Sid":"statement2",
         "Effect":"Deny",
         "Principal": <span>{</span>
            "AWS": "arn:aws:iam::<code class="replaceable">123456789012</code>:user/<code class="replaceable">bucket-owner</code>"
         },  
         "Action": "s3:ListBucket",
         "Resource": "arn:aws:s3:::<code class="replaceable">awsexamplebucket1</code>",
         "Condition" : <span>{</span>
             "StringNotEquals" : <span>{</span>
                 "s3:prefix": "projects"  
             }
          } 
       }         
    ]
}</code></pre>
					 
						<h6>Test the policy with the AWS CLI</h6>
						<p>You can test the policy using the following <code class="code">list-object</code>
							AWS CLI command. In the command, you provide user credentials using the
								<code class="code">--profile</code> parameter. For more information about setting
							up and using the AWS CLI, see <a href="./setup-aws-cli.html">Developing with Amazon S3 using the AWS CLI</a>.</p>
					 
					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws s3api list-objects --bucket <code class="replaceable">awsexamplebucket1</code> --prefix examplefolder --profile AccountADave</code></pre>
					<p>If the bucket is version-enabled, to list the objects in the bucket, you
						must grant the <code class="code">s3:ListBucketVersions</code> permission in the
						preceding policy, instead of <code class="code">s3:ListBucket</code> permission. This
						permission also supports the <code class="code">s3:prefix</code> condition key. </p>
				 
				 
					<h3 id="example-numeric-condition-operators">Example 3: Setting the maximum number of
							keys </h3>
					<p>You can use the <code class="code">s3:max-keys</code> condition key to set the maximum
						number of keys that requester can return in a <a href="https://docs.aws.amazon.com/AmazonS3/latest/API/API_ListObjects.html">GET Bucket
							(ListObjects)</a> or <a href="https://docs.aws.amazon.com/AmazonS3/latest/API/API_ListObjectVersions.html">ListObjectVersions</a> request. By default, the API returns up to
						1,000 keys. For a list of numeric condition operators that you can use with
							<code class="code">s3:max-keys</code> and accompanying examples, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements_condition_operators.html#Conditions_Numeric">Numeric Condition Operators</a> in the
							<em>IAM User Guide</em>.</p>
				 
			<awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./amazon-s3-condition-keys.html">Conditions</div><div id="next" class="next-link" accesskey="n" href="./list_amazons3.html">Actions, resources, and condition keys</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=S3&amp;topic_url=https://docs.aws.amazon.com/en_us/AmazonS3/latest/userguide/amazon-s3-policy-keys.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=S3&amp;topic_url=https://docs.aws.amazon.com/en_us/AmazonS3/latest/userguide/amazon-s3-policy-keys.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>