<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Set up a VPC to host clusters - Amazon EMR</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="emr-vpc-host-job-flows" /><meta name="default_state" content="emr-vpc-host-job-flows" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-vpc-host-job-flows.html" /><meta name="description" content="Learn how to create an Amazon Virtual Private Cloud with subnets for your Amazon EMR cluster." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon EMR" /><meta name="guide" content="Management Guide" /><meta name="abstract" content="Learn to plan, configure, deploy, monitor, and secure big-data solutions in the cloud using Amazon EMR. Amazon EMR is the Amazon Web Services (AWS) managed framework for running Apache Hadoop, Spark, HBase, Presto, Flink and other big-data applications on dynamically scalable Amazon EC2 instances. Use this guide together with the Amazon EMR Release Guide, which covers application installation, configuration, and optimization." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-vpc-host-job-flows.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/emr/latest/ManagementGuide/emr-vpc-host-job-flows.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/emr/latest/ManagementGuide/emr-vpc-host-job-flows.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/emr/latest/ManagementGuide/emr-vpc-host-job-flows.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/emr/latest/ManagementGuide/emr-vpc-host-job-flows.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-vpc-host-job-flows.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-vpc-host-job-flows.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/emr/latest/ManagementGuide/emr-vpc-host-job-flows.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/emr/latest/ManagementGuide/emr-vpc-host-job-flows.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/emr/latest/ManagementGuide/emr-vpc-host-job-flows.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/emr/latest/ManagementGuide/emr-vpc-host-job-flows.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/emr/latest/ManagementGuide/emr-vpc-host-job-flows.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/emr/latest/ManagementGuide/emr-vpc-host-job-flows.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/emr/latest/ManagementGuide/emr-vpc-host-job-flows.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/emr/latest/ManagementGuide/emr-vpc-host-job-flows.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/emr/latest/ManagementGuide/emr-vpc-host-job-flows.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/emr/latest/ManagementGuide/emr-vpc-host-job-flows.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/emr/latest/ManagementGuide/emr-vpc-host-job-flows.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/emr/latest/ManagementGuide/emr-vpc-host-job-flows.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/emr/latest/ManagementGuide/emr-vpc-host-job-flows.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/emr/latest/ManagementGuide/emr-vpc-host-job-flows.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-vpc-host-job-flows.html" hreflang="x-default" /><meta name="feedback-item" content="EMR" /><meta name="this_doc_product" content="Amazon EMR" /><meta name="this_doc_guide" content="Management Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'emr'}"></script><meta id="panorama-serviceSubSection" value="Management Guide" /><meta id="panorama-serviceConsolePage" value="Set up a VPC to host clusters" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Set up a VPC to host clusters - Amazon EMR</title><meta name="pdf" content="/pdfs/emr/latest/ManagementGuide/emr-mgmt.pdf#emr-vpc-host-job-flows" /><meta name="github" content="https://github.com/awsdocs/amazon-emr-management-guide/tree/main/doc_source/emr-vpc-host-job-flows.md" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=52" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=EMR&amp;topic_url=http://docs.aws.amazon.com/en_us/emr/latest/ManagementGuide/emr-vpc-host-job-flows.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/emr/latest/ManagementGuide/emr-vpc-host-job-flows.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/emr/latest/ManagementGuide/emr-vpc-host-job-flows.html" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon EMR Documentation",
        "item" : "https://docs.aws.amazon.com/emr/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Management Guide",
        "item" : "https://docs.aws.amazon.com/emr/latest/ManagementGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Plan and configure clusters",
        "item" : "https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-plan.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Configure cluster hardware and networking",
        "item" : "https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-plan-instances.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Configure Amazon EC2 instances",
        "item" : "https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-plan-ec2-instances.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "Configure networking",
        "item" : "https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-plan-vpc-subnet.html"
      },
      {
        "@type" : "ListItem",
        "position" : 8,
        "name" : "Set up a VPC to host clusters",
        "item" : "https://docs.aws.amazon.com/emr/latest/ManagementGuide/emr-plan-vpc-subnet.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/emr/latest/ManagementGuide/emr-mgmt.pdf#emr-vpc-host-job-flows" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a href="https://github.com/awsdocs/amazon-emr-management-guide/tree/main/doc_source/emr-vpc-host-job-flows.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/emr/index.html">Amazon EMR Documentation</a><a href="emr-what-is-emr.html">Management Guide</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="emr-vpc-host-job-flows">Set up a VPC to host clusters</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Before you can launch clusters in a VPC, you must create a VPC and a subnet.
					For public subnets, you must create an internet gateway and attach it to the
					subnet. The following instructions describe how to create a VPC capable of
					hosting Amazon EMR clusters. </p><div class="procedure"><h6>To create a VPC with subnets for an Amazon EMR cluster</h6><ol><li><p>Open the Amazon VPC console at
         <a href="https://console.aws.amazon.com/vpc/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/vpc/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></li><li>
						<p>On the top-right of the page, choose the <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-regions-availability-zones.html">AWS Region</a> for your VPC.</p>
					</li><li>
						<p>Choose <b>Create VPC</b>.</p>
					</li><li>
						<p>On the <b>VPC settings</b> page, choose <b>VPC
								and more</b>.</p>
					</li><li>
						<p>Under <b>Name tag auto-generation</b>, enable
								<b>Auto-generate</b> and enter a name for your VPC.
							This helps you to identify the VPC and subnet in the Amazon VPC console after
							you've created them.</p>
					</li><li>
						<p>In the <b>IPv4 CIDR block</b> field, enter a private IP
							address space for your VPC to ensure proper DNS hostname resolution;
							otherwise, you may experience Amazon EMR cluster failures. This includes the
							following IP address ranges: </p>
						<div class="itemizedlist">
							 
							 
							 
						<ul class="itemizedlist"><li class="listitem">
								<p>10.0.0.0 - 10.255.255.255</p>
							</li><li class="listitem">
								<p>172.16.0.0 - 172.31.255.255</p>
							</li><li class="listitem">
								<p>192.168.0.0 - 192.168.255.255</p>
							</li></ul></div>
					</li><li>
						<p>Under <b>Number of Availability Zones (AZs)</b>, choose the
							number of Availability Zones you want to launch your subnets in.</p>
					</li><li>
						<p>Under <b>Number of public subnets</b>, choose a single
							public subnet to add to your VPC. If the data used by the cluster is
							available on the internet (for example, in Amazon S3 or Amazon RDS), you only need
							to use a public subnet and don't need to add a private subnet.</p>
					</li><li>
						<p>Under <b>Number of private subnets</b>, choose the
							number of private subnets you want to add to your VPC. Select one or
							more if the the data for your application is stored in your own network
							(for example, in an Oracle database). For a VPC in a private subnet, all
							Amazon EC2 instances must at minimum have a route to Amazon EMR through the
							elastic network interface. In the console, this is automatically
							configured for you.</p>
					</li><li>
						<p>Under <b>NAT gateways</b>, optionally choose to add NAT
							gateways. They are only necessary if you have private subnets that need
							to communicate with the internet.</p>
					</li><li>
						<p>Under <b>VPC endpoints</b>, optionally choose to add
							endpoints for Amazon S3 to your subnets.</p>
					</li><li>
						<p>Verify that <b>Enable DNS hostnames</b>
								and<b>Enable DNS resolution</b> are checked. For more
							information, see <a href="https://docs.aws.amazon.com/vpc/latest/userguide/vpc-dns.html">Using DNS with
								your VPC</a>.</p>
					</li><li>
						<p>Choose <b>Create VPC</b>.</p>
					</li><li>
						<p>A status window shows the work in progress. When the work completes,
							choose <b>View VPC</b> to navigate to the <b>Your
								VPCs</b> page, which displays your default VPC and the VPC
							that you just created. The VPC that you created is a nondefault VPC,
							therefore the <b>Default VPC</b> column displays
								<b>No</b>. </p>
					</li><li>
						<p>If you want to associate your VPC with a DNS entry that does not
							include a domain name, navigate to <b>DHCP option
							sets</b>, choose <b>Create DHCP options set</b>,
							and omit a domain name. After you create your option set, navigate to
							your new VPC, choose <b>Edit DHCP options set</b> under
							the <b>Actions</b> menu, and select the new option set.
							You cannot edit the domain name using the console after the DNS option
							set has been created. </p>
						<p>It is a best practice with Hadoop and related applications to ensure
							resolution of the fully qualified domain name (FQDN) for nodes. To
							ensure proper DNS resolution, configure a VPC that includes a DHCP
							options set whose parameters are set to the following values:</p>
						<div class="itemizedlist">
							 
							 
						<ul class="itemizedlist"><li class="listitem">
								<p><b>domain-name</b> =
										<code class="userinput">ec2.internal</code></p>
								<p>Use <code class="userinput">ec2.internal</code> if your Region is
									US East (N. Virginia). For other Regions, use
										<code class="replaceable">region-name</code><code class="userinput">.compute.internal</code>.
									For examples in <code class="code">us-west-2</code>, use
										<code class="userinput">us-west-2.compute.internal</code>. For the
									AWS GovCloud (US-West) Region, use
										<code class="userinput">us-gov-west-1.compute.internal</code>.</p>
							</li><li class="listitem">
								<p><b>domain-name-servers</b> =
										<code class="userinput">AmazonProvidedDNS</code></p>
							</li></ul></div>
						<p>For more information, see <a href="https://docs.aws.amazon.com/vpc/latest/userguide/VPC_DHCP_Options.html">DHCP options sets</a>
							in the <em>Amazon VPC User Guide</em>.</p>
					</li><li>
						<p>After the VPC is created, go to the <b>Subnets</b> page
							and note the <b>Subnet ID</b> of one of the subnets of
							your new VPC. You use this information when you launch the Amazon EMR cluster
							into the VPC.</p>
					</li></ol></div><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./emr-clusters-in-a-vpc.html">Amazon VPC options</div><div id="next" class="next-link" accesskey="n" href="./emr-vpc-launching-job-flows.html">Launch clusters into a VPC</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=EMR&amp;topic_url=https://docs.aws.amazon.com/en_us/emr/latest/ManagementGuide/emr-vpc-host-job-flows.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=EMR&amp;topic_url=https://docs.aws.amazon.com/en_us/emr/latest/ManagementGuide/emr-vpc-host-job-flows.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>