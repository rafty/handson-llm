<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>RecognizeUtterance - Amazon Lex API Reference</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="API_runtime_RecognizeUtterance" /><meta name="default_state" content="API_runtime_RecognizeUtterance" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/lexv2/latest/APIReference/API_runtime_RecognizeUtterance.html" /><meta name="description" content="Sends user input to Amazon Lex V2. You can send text or speech. Clients use this API to send text and audio requests to Amazon Lex V2 at runtime. Amazon Lex V2 interprets the user input using the machine learning model built for the bot." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Lex API Reference" /><meta name="guide" content="" /><meta name="abstract" content="Details about operations and parameters in the Amazon Lex API Reference" /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/lexv2/latest/APIReference/API_runtime_RecognizeUtterance.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/lexv2/latest/APIReference/API_runtime_RecognizeUtterance.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/lexv2/latest/APIReference/API_runtime_RecognizeUtterance.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/lexv2/latest/APIReference/API_runtime_RecognizeUtterance.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/lexv2/latest/APIReference/API_runtime_RecognizeUtterance.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/lexv2/latest/APIReference/API_runtime_RecognizeUtterance.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/lexv2/latest/APIReference/API_runtime_RecognizeUtterance.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/lexv2/latest/APIReference/API_runtime_RecognizeUtterance.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/lexv2/latest/APIReference/API_runtime_RecognizeUtterance.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/lexv2/latest/APIReference/API_runtime_RecognizeUtterance.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/lexv2/latest/APIReference/API_runtime_RecognizeUtterance.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/lexv2/latest/APIReference/API_runtime_RecognizeUtterance.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/lexv2/latest/APIReference/API_runtime_RecognizeUtterance.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/lexv2/latest/APIReference/API_runtime_RecognizeUtterance.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/lexv2/latest/APIReference/API_runtime_RecognizeUtterance.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/lexv2/latest/APIReference/API_runtime_RecognizeUtterance.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/lexv2/latest/APIReference/API_runtime_RecognizeUtterance.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/lexv2/latest/APIReference/API_runtime_RecognizeUtterance.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/lexv2/latest/APIReference/API_runtime_RecognizeUtterance.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/lexv2/latest/APIReference/API_runtime_RecognizeUtterance.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/lexv2/latest/APIReference/API_runtime_RecognizeUtterance.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/lexv2/latest/APIReference/API_runtime_RecognizeUtterance.html" hreflang="x-default" /><meta name="feedback-item" content="Lex" /><meta name="this_doc_product" content="Amazon Lex API Reference" /><meta name="this_doc_guide" content="" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'lex'}"></script><meta id="panorama-serviceSubSection" value="" /><meta id="panorama-serviceConsolePage" value="RecognizeUtterance" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>RecognizeUtterance - Amazon Lex API Reference</title><meta name="pdf" content="/pdfs/lexv2/latest/APIReference/lexv2-api.pdf#API_runtime_RecognizeUtterance" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=251" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lex&amp;topic_url=http://docs.aws.amazon.com/en_us/lexv2/latest/APIReference/API_runtime_RecognizeUtterance.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/lexv2/latest/APIReference/API_runtime_RecognizeUtterance.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/lexv2/latest/APIReference/API_runtime_RecognizeUtterance.html" /><meta name="keywords" content="API reference,API,requests,RecognizeUtterance" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Lex",
        "item" : "https://docs.aws.amazon.com/lex/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "",
        "item" : "https://docs.aws.amazon.com/lexv2/latest/APIReference"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Amazon Lex V2 API Reference",
        "item" : "https://docs.aws.amazon.com/lexv2/latest/APIReference/welcome.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Actions",
        "item" : "https://docs.aws.amazon.com/lexv2/latest/APIReference/API_Operations.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Amazon Lex Runtime V2",
        "item" : "https://docs.aws.amazon.com/lexv2/latest/APIReference/API_Operations_Amazon_Lex_Runtime_V2.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "RecognizeUtterance",
        "item" : "https://docs.aws.amazon.com/lexv2/latest/APIReference/API_Operations_Amazon_Lex_Runtime_V2.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/lexv2/latest/APIReference/lexv2-api.pdf#API_runtime_RecognizeUtterance" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/lex/index.html">Amazon Lex</a><a href="welcome.html"></a></div><div id="page-toc-src"><a href="#API_runtime_RecognizeUtterance_RequestSyntax">Request Syntax</a><a href="#API_runtime_RecognizeUtterance_RequestParameters">URI Request Parameters</a><a href="#API_runtime_RecognizeUtterance_RequestBody">Request Body</a><a href="#API_runtime_RecognizeUtterance_ResponseSyntax">Response Syntax</a><a href="#API_runtime_RecognizeUtterance_ResponseElements">Response Elements</a><a href="#API_runtime_RecognizeUtterance_Errors">Errors</a><a href="#API_runtime_RecognizeUtterance_Examples">Examples</a><a href="#API_runtime_RecognizeUtterance_SeeAlso">See Also</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="API_runtime_RecognizeUtterance">RecognizeUtterance</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Sends user input to Amazon Lex V2. You can send text or speech. Clients use
         this API to send text and audio requests to Amazon Lex V2 at runtime. Amazon Lex V2
         interprets the user input using the machine learning model built for
         the bot.</p><p>The following request fields must be compressed with gzip and then
         base64 encoded before you send them to Amazon Lex V2. </p><div class="itemizedlist">
       
       
   <ul class="itemizedlist"><li class="listitem">
         <p>requestAttributes</p>
      </li><li class="listitem">
         <p>sessionState</p>
      </li></ul></div><p>The following response fields are compressed using gzip and then
         base64 encoded by Amazon Lex V2. Before you can use these fields, you must
         decode and decompress them. </p><div class="itemizedlist">
       
       
       
       
       
   <ul class="itemizedlist"><li class="listitem">
         <p>inputTranscript</p>
      </li><li class="listitem">
         <p>interpretations</p>
      </li><li class="listitem">
         <p>messages</p>
      </li><li class="listitem">
         <p>requestAttributes</p>
      </li><li class="listitem">
         <p>sessionState</p>
      </li></ul></div><p>The example contains a Java application that compresses and encodes
         a Java object to send to Amazon Lex V2, and a second that decodes and
         decompresses a response from Amazon Lex V2.</p><p>If the optional post-fulfillment response is specified, the messages
         are returned as follows. For more information, see <a href="https://docs.aws.amazon.com/lexv2/latest/dg/API_PostFulfillmentStatusSpecification.html">PostFulfillmentStatusSpecification</a>.</p><div class="itemizedlist">
       
       
       
   <ul class="itemizedlist"><li class="listitem">
         <p>
            <b>Success message</b> - Returned if
               the Lambda function completes successfully and the intent state is
               fulfilled or ready fulfillment if the message is present.</p>
      </li><li class="listitem">
         <p>
            <b>Failed message</b> - The failed
               message is returned if the Lambda function throws an exception or
               if the Lambda function returns a failed intent state without a
               message.</p>
      </li><li class="listitem">
         <p>
            <b>Timeout message</b> - If you
               don't configure a timeout message and a timeout, and the Lambda
               function doesn't return within 30 seconds, the timeout message is
               returned. If you configure a timeout, the timeout message is
               returned when the period times out. </p>
      </li></ul></div><p>For more information, see <a href="https://docs.aws.amazon.com/lexv2/latest/dg/streaming-progress.html#progress-complete.html">Completion message</a>.</p>
      <h2 id="API_runtime_RecognizeUtterance_RequestSyntax">Request Syntax</h2>
      <pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight">POST /bots/<code class="replaceable">botId</code>/botAliases/<code class="replaceable">botAliasId</code>/botLocales/<code class="replaceable">localeId</code>/sessions/<code class="replaceable">sessionId</code>/utterance HTTP/1.1
x-amz-lex-session-state: <code class="replaceable">sessionState</code>
x-amz-lex-request-attributes: <code class="replaceable">requestAttributes</code>
Content-Type: <code class="replaceable">requestContentType</code>
Response-Content-Type: <code class="replaceable">responseContentType</code>

<code class="replaceable">inputStream</code></code></pre>
    
      <h2 id="API_runtime_RecognizeUtterance_RequestParameters">URI Request Parameters</h2>
      <p>The request uses the following URI parameters.</p>
      <div class="variablelist">
          
          
          
          
          
          
          
          
      <dl>
            <dt><a id="lexv2-runtime_RecognizeUtterance-request-botAliasId"></a><span class="term">
               <b>
                  <a href="#API_runtime_RecognizeUtterance_RequestSyntax">botAliasId</a>
               </b>
            </span></dt>
            <dd>
               <p>The alias identifier in use for the bot that should receive the
         request.</p>
               <p>Required: Yes</p>
            </dd>
          
            <dt><a id="lexv2-runtime_RecognizeUtterance-request-botId"></a><span class="term">
               <b>
                  <a href="#API_runtime_RecognizeUtterance_RequestSyntax">botId</a>
               </b>
            </span></dt>
            <dd>
               <p>The identifier of the bot that should receive the request.</p>
               <p>Length Constraints: Fixed length of 10.</p>
               <p>Pattern: <code class="code">^[0-9a-zA-Z]+$</code>
               </p>
               <p>Required: Yes</p>
            </dd>
          
            <dt><a id="lexv2-runtime_RecognizeUtterance-request-localeId"></a><span class="term">
               <b>
                  <a href="#API_runtime_RecognizeUtterance_RequestSyntax">localeId</a>
               </b>
            </span></dt>
            <dd>
               <p>The locale where the session is in use.</p>
               <p>Length Constraints: Minimum length of 1.</p>
               <p>Required: Yes</p>
            </dd>
          
            <dt><a id="lexv2-runtime_RecognizeUtterance-request-requestAttributes"></a><span class="term">
               <b>
                  <a href="#API_runtime_RecognizeUtterance_RequestSyntax">requestAttributes</a>
               </b>
            </span></dt>
            <dd>
               <p>Request-specific information passed between the client application
         and Amazon Lex V2 </p>
               <p>The namespace <code class="code">x-amz-lex:</code> is reserved for special
         attributes. Don't create any request attributes for prefix
            <code class="code">x-amz-lex:</code>.</p>
               <p>The <code class="code">requestAttributes</code> field must be compressed using
         gzip and then base64 encoded before sending to Amazon Lex V2.</p>
            </dd>
          
            <dt><a id="lexv2-runtime_RecognizeUtterance-request-requestContentType"></a><span class="term">
               <b>
                  <a href="#API_runtime_RecognizeUtterance_RequestSyntax">requestContentType</a>
               </b>
            </span></dt>
            <dd>
               <p>Indicates the format for audio input or that the content is text.
         The header must start with one of the following prefixes:</p>
               <div class="itemizedlist">
                   
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p>PCM format, audio data must be in little-endian byte
               order.</p>
                     <div class="itemizedlist">
                         
                         
                         
                     <ul class="itemizedlist"><li class="listitem">
                           <p>audio/l16; rate=16000; channels=1</p>
                        </li><li class="listitem">
                           <p>audio/x-l16; sample-rate=16000; channel-count=1</p>
                        </li><li class="listitem">
                           <p>audio/lpcm; sample-rate=8000; sample-size-bits=16;
                     channel-count=1; is-big-endian=false</p>
                        </li></ul></div>
                  </li><li class="listitem">
                     <p>Opus format</p>
                     <div class="itemizedlist">
                         
                     <ul class="itemizedlist"><li class="listitem">
                           <p>audio/x-cbr-opus-with-preamble;preamble-size=0;bit-rate=256000;frame-size-milliseconds=4</p>
                        </li></ul></div>
                  </li><li class="listitem">
                     <p>Text format</p>
                     <div class="itemizedlist">
                         
                     <ul class="itemizedlist"><li class="listitem">
                           <p>text/plain; charset=utf-8</p>
                        </li></ul></div>
                  </li></ul></div>
               <p>Length Constraints: Minimum length of 1.</p>
               <p>Required: Yes</p>
            </dd>
          
            <dt><a id="lexv2-runtime_RecognizeUtterance-request-responseContentType"></a><span class="term">
               <b>
                  <a href="#API_runtime_RecognizeUtterance_RequestSyntax">responseContentType</a>
               </b>
            </span></dt>
            <dd>
               <p>The message that Amazon Lex V2 returns in the response can be either text or
         speech based on the <code class="code">responseContentType</code> value.</p>
               <div class="itemizedlist">
                   
                   
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p>If the value is <code class="code">text/plain;charset=utf-8</code>, Amazon Lex V2
               returns text in the response.</p>
                  </li><li class="listitem">
                     <p>If the value begins with <code class="code">audio/</code>, Amazon Lex V2 returns
               speech in the response. Amazon Lex V2 uses Amazon Polly to generate the speech
               using the configuration that you specified in the
                  <code class="code">responseContentType</code> parameter. For example, if you
               specify <code class="code">audio/mpeg</code> as the value, Amazon Lex V2 returns
               speech in the MPEG format.</p>
                  </li><li class="listitem">
                     <p>If the value is <code class="code">audio/pcm</code>, the speech returned is
                  <code class="code">audio/pcm</code> at 16 KHz in 16-bit, little-endian
               format.</p>
                  </li><li class="listitem">
                     <p>The following are the accepted values:</p>
                     <div class="itemizedlist">
                         
                         
                         
                         
                         
                     <ul class="itemizedlist"><li class="listitem">
                           <p>audio/mpeg</p>
                        </li><li class="listitem">
                           <p>audio/ogg</p>
                        </li><li class="listitem">
                           <p>audio/pcm (16 KHz)</p>
                        </li><li class="listitem">
                           <p>audio/* (defaults to mpeg)</p>
                        </li><li class="listitem">
                           <p>text/plain; charset=utf-8</p>
                        </li></ul></div>
                  </li></ul></div>
               <p>Length Constraints: Minimum length of 1.</p>
            </dd>
          
            <dt><a id="lexv2-runtime_RecognizeUtterance-request-sessionId"></a><span class="term">
               <b>
                  <a href="#API_runtime_RecognizeUtterance_RequestSyntax">sessionId</a>
               </b>
            </span></dt>
            <dd>
               <p>The identifier of the session in use.</p>
               <p>Length Constraints: Minimum length of 2. Maximum length of 100.</p>
               <p>Pattern: <code class="code">[0-9a-zA-Z._:-]+</code>
               </p>
               <p>Required: Yes</p>
            </dd>
          
            <dt><a id="lexv2-runtime_RecognizeUtterance-request-sessionState"></a><span class="term">
               <b>
                  <a href="#API_runtime_RecognizeUtterance_RequestSyntax">sessionState</a>
               </b>
            </span></dt>
            <dd>
               <p>Sets the state of the session with the user. You can use this to set
         the current intent, attributes, context, and dialog action. Use the
         dialog action to determine the next step that Amazon Lex V2 should use in the
         conversation with the user.</p>
               <p>The <code class="code">sessionState</code> field must be compressed using gzip
         and then base64 encoded before sending to Amazon Lex V2.</p>
            </dd>
         </dl></div>
    
      <h2 id="API_runtime_RecognizeUtterance_RequestBody">Request Body</h2>
      <p>The request accepts the following binary data.</p>
      <div class="variablelist">
          
      <dl>
            <dt><a id="lexv2-runtime_RecognizeUtterance-request-inputStream"></a><span class="term">
               <b>
                  <a href="#API_runtime_RecognizeUtterance_RequestSyntax">inputStream</a>
               </b>
            </span></dt>
            <dd>
               <p>User input in PCM or Opus audio format or text format as described
         in the <code class="code">requestContentType</code> parameter.</p>
            </dd>
         </dl></div>
    
      <h2 id="API_runtime_RecognizeUtterance_ResponseSyntax">Response Syntax</h2>
      <pre class="programlisting"><div class="code-btn-container"></div><code class="nohighlight">HTTP/1.1 200
x-amz-lex-input-mode: <code class="replaceable">inputMode</code>
Content-Type: <code class="replaceable">contentType</code>
x-amz-lex-messages: <code class="replaceable">messages</code>
x-amz-lex-interpretations: <code class="replaceable">interpretations</code>
x-amz-lex-session-state: <code class="replaceable">sessionState</code>
x-amz-lex-request-attributes: <code class="replaceable">requestAttributes</code>
x-amz-lex-session-id: <code class="replaceable">sessionId</code>
x-amz-lex-input-transcript: <code class="replaceable">inputTranscript</code>
x-amz-lex-recognized-bot-member: <code class="replaceable">recognizedBotMember</code>

<code class="replaceable">audioStream</code></code></pre>
    
      <h2 id="API_runtime_RecognizeUtterance_ResponseElements">Response Elements</h2>
      <p>If the action is successful, the service sends back an HTTP 200 response.</p>
      <p>The response returns the following HTTP headers.</p>
      <div class="variablelist">
          
          
          
          
          
          
          
          
          
      <dl>
            <dt><a id="lexv2-runtime_RecognizeUtterance-response-contentType"></a><span class="term">
               <b>
                  <a href="#API_runtime_RecognizeUtterance_ResponseSyntax">contentType</a>
               </b>
            </span></dt>
            <dd>
               <p>Content type as specified in the <code class="code">responseContentType</code> in
         the request.</p>
               <p>Length Constraints: Minimum length of 1.</p>
            </dd>
          
            <dt><a id="lexv2-runtime_RecognizeUtterance-response-inputMode"></a><span class="term">
               <b>
                  <a href="#API_runtime_RecognizeUtterance_ResponseSyntax">inputMode</a>
               </b>
            </span></dt>
            <dd>
               <p>Indicates whether the input mode to the operation was text, speech, or from a touch-tone keypad.
      </p>
               <p>Length Constraints: Minimum length of 1.</p>
            </dd>
          
            <dt><a id="lexv2-runtime_RecognizeUtterance-response-inputTranscript"></a><span class="term">
               <b>
                  <a href="#API_runtime_RecognizeUtterance_ResponseSyntax">inputTranscript</a>
               </b>
            </span></dt>
            <dd>
               <p>The text used to process the request.</p>
               <p>If the input was an audio stream, the <code class="code">inputTranscript</code>
         field contains the text extracted from the audio stream. This is the
         text that is actually processed to recognize intents and slot values.
         You can use this information to determine if Amazon Lex V2 is correctly
         processing the audio that you send.</p>
               <p>The <code class="code">inputTranscript</code> field is compressed with gzip and
         then base64 encoded. Before you can use the contents of the field, you
         must decode and decompress the contents. See the example for a simple
         function to decode and decompress the contents.</p>
               <p>Length Constraints: Minimum length of 1.</p>
            </dd>
          
            <dt><a id="lexv2-runtime_RecognizeUtterance-response-interpretations"></a><span class="term">
               <b>
                  <a href="#API_runtime_RecognizeUtterance_ResponseSyntax">interpretations</a>
               </b>
            </span></dt>
            <dd>
               <p>A list of intents that Amazon Lex V2 determined might satisfy the user's
         utterance.</p>
               <p>Each interpretation includes the intent, a score that indicates how
         confident Amazon Lex V2 is that the interpretation is the correct one, and an
         optional sentiment response that indicates the sentiment expressed in
         the utterance.</p>
               <p>The <code class="code">interpretations</code> field is compressed with gzip and
         then base64 encoded. Before you can use the contents of the field, you
         must decode and decompress the contents. See the example for a simple
         function to decode and decompress the contents.</p>
               <p>Length Constraints: Minimum length of 1.</p>
            </dd>
          
            <dt><a id="lexv2-runtime_RecognizeUtterance-response-messages"></a><span class="term">
               <b>
                  <a href="#API_runtime_RecognizeUtterance_ResponseSyntax">messages</a>
               </b>
            </span></dt>
            <dd>
               <p>A list of messages that were last sent to the user. The messages are
         ordered based on the order that you returned the messages from your
         Lambda function or the order that the messages are defined in the
         bot.</p>
               <p>The <code class="code">messages</code> field is compressed with gzip and then
         base64 encoded. Before you can use the contents of the field, you must
         decode and decompress the contents. See the example for a simple
         function to decode and decompress the contents.</p>
               <p>Length Constraints: Minimum length of 1.</p>
            </dd>
          
            <dt><a id="lexv2-runtime_RecognizeUtterance-response-recognizedBotMember"></a><span class="term">
               <b>
                  <a href="#API_runtime_RecognizeUtterance_ResponseSyntax">recognizedBotMember</a>
               </b>
            </span></dt>
            <dd>
               <p>The bot member that recognized the utterance.</p>
               <p>Length Constraints: Minimum length of 1.</p>
            </dd>
          
            <dt><a id="lexv2-runtime_RecognizeUtterance-response-requestAttributes"></a><span class="term">
               <b>
                  <a href="#API_runtime_RecognizeUtterance_ResponseSyntax">requestAttributes</a>
               </b>
            </span></dt>
            <dd>
               <p>The attributes sent in the request.</p>
               <p>The <code class="code">requestAttributes</code> field is compressed with gzip and
         then base64 encoded. Before you can use the contents of the field, you
         must decode and decompress the contents.</p>
               <p>Length Constraints: Minimum length of 1.</p>
            </dd>
          
            <dt><a id="lexv2-runtime_RecognizeUtterance-response-sessionId"></a><span class="term">
               <b>
                  <a href="#API_runtime_RecognizeUtterance_ResponseSyntax">sessionId</a>
               </b>
            </span></dt>
            <dd>
               <p>The identifier of the session in use.</p>
               <p>Length Constraints: Minimum length of 2. Maximum length of 100.</p>
               <p>Pattern: <code class="code">[0-9a-zA-Z._:-]+</code>
               </p>
            </dd>
          
            <dt><a id="lexv2-runtime_RecognizeUtterance-response-sessionState"></a><span class="term">
               <b>
                  <a href="#API_runtime_RecognizeUtterance_ResponseSyntax">sessionState</a>
               </b>
            </span></dt>
            <dd>
               <p>Represents the current state of the dialog between the user and the
         bot.</p>
               <p>Use this to determine the progress of the conversation and what the
         next action might be.</p>
               <p>The <code class="code">sessionState</code> field is compressed with gzip and then
         base64 encoded. Before you can use the contents of the field, you must
         decode and decompress the contents. See the example for a simple
         function to decode and decompress the contents.</p>
               <p>Length Constraints: Minimum length of 1.</p>
            </dd>
         </dl></div>
      <p>The response returns the following as the HTTP body.</p>
      <div class="variablelist">
          
      <dl>
            <dt><a id="lexv2-runtime_RecognizeUtterance-response-audioStream"></a><span class="term">
               <b>
                  <a href="#API_runtime_RecognizeUtterance_ResponseSyntax">audioStream</a>
               </b>
            </span></dt>
            <dd>
               <p>The prompt or statement to send to the user. This is based on the
         bot configuration and context. For example, if Amazon Lex V2 did not understand
         the user intent, it sends the <code class="code">clarificationPrompt</code>
         configured for the bot. If the intent requires confirmation before
         taking the fulfillment action, it sends the
            <code class="code">confirmationPrompt</code>. Another example: Suppose that the
         Lambda function successfully fulfilled the intent, and sent a message
         to convey to the user. Then Amazon Lex V2 sends that message in the
         response.</p>
            </dd>
         </dl></div>
    
      <h2 id="API_runtime_RecognizeUtterance_Errors">Errors</h2>
      <p>For information about the errors that are common to all actions, see <a href="./CommonErrors.html">Common Errors</a>.</p>
      <div class="variablelist">
          
          
          
          
          
          
          
          
      <dl>
            <dt><span class="term">
               <b>
                  AccessDeniedException
               </b>
            </span></dt>
            <dd>
               <p></p>
               <p>HTTP Status Code: 403</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  BadGatewayException
               </b>
            </span></dt>
            <dd>
               <p></p>
               <p>HTTP Status Code: 502</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  ConflictException
               </b>
            </span></dt>
            <dd>
               <p></p>
               <p>HTTP Status Code: 409</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  DependencyFailedException
               </b>
            </span></dt>
            <dd>
               <p></p>
               <p>HTTP Status Code: 424</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  InternalServerException
               </b>
            </span></dt>
            <dd>
               <p></p>
               <p>HTTP Status Code: 500</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  ResourceNotFoundException
               </b>
            </span></dt>
            <dd>
               <p></p>
               <p>HTTP Status Code: 404</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  ThrottlingException
               </b>
            </span></dt>
            <dd>
               <p></p>
               <p>HTTP Status Code: 429</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  ValidationException
               </b>
            </span></dt>
            <dd>
               <p></p>
               <p>HTTP Status Code: 400</p>
            </dd>
         </dl></div>
    
      <h2 id="API_runtime_RecognizeUtterance_Examples">Examples</h2>
       
         <h3 id="API_runtime_RecognizeUtterance_Example_1">Encode and decode a field</h3>
         <p>The following example provides two functions, one to compress
               a string with gzip and then base64 encode it and one to decode
               and decompress a string.</p>
          
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="java ">package com.amazonaws.deepsense.util;

import com.amazonaws.deepsense.runtime.conversation.serialize.RuntimeSdkSerializer;
import com.fasterxml.jackson.annotation.JsonInclude;
import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.core.type.TypeReference;
import com.fasterxml.jackson.databind.DeserializationFeature;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.SerializationFeature;
import com.google.common.base.Preconditions;

import java.io.IOException;
import java.util.Base64;

public class CompressionAndEncoding <span>{</span>

    private CompressionAndEncoding() <span>{</span>

    }

    /**
     * Given a generic object
     * 1. Serialize the object using jackson
     * 2. Compress the serialized object
     * 3. Base64 encode the compressed data
     */
    public static String compressAndEncodeBase64(Object object) <span>{</span>
        if (object == null) <span>{</span>
            return null;
        }

        String objectAsString = GsonSerializer.serialize(object);
        byte[] compressedString = Compressions.compress(objectAsString);
        return Base64.getEncoder().encodeToString(compressedString);
    }

    /**
     * Given a base64 encoded, compressed, serialized object
     * 1. Base64 decodes the data
     * 2. Decompresses the base64 decoded data
     * 3. Converts the serialized object into a proper POJO
     */
    public static &lt;T&gt; T decodeBase64AndDecompress(String objectAsString, TypeReference&lt;T&gt; typeRef) <span>{</span>
        if (objectAsString == null) <span>{</span>
            return null;
        }

        Preconditions.checkNotNull(typeRef, "Serialization class can't be null.");
        byte[] decodedBytes = Base64.getDecoder().decode(objectAsString);
        String decompressedObjectAsString = Compressions.uncompress(decodedBytes);
        try <span>{</span>
            return RuntimeSdkSerializer.instance().readValue(decompressedObjectAsString, typeRef);
        } catch (IOException e) <span>{</span>
            throw new RuntimeException(String.format("Unable to deserialize string %s", decompressedObjectAsString), e);
        }
    }

}</code></pre>
          
       
    
      <h2 id="API_runtime_RecognizeUtterance_SeeAlso">See Also</h2>
      <p>For more information about using this API in one of the language-specific AWS SDKs, see the following:</p>
      <div class="itemizedlist">
          
          
          
          
          
          
          
          
          
      <ul class="itemizedlist"><li class="listitem">
            <p>
               <a href="https://docs.aws.amazon.com/goto/aws-cli/runtime.lex.v2-2020-08-07/RecognizeUtterance">AWS Command Line Interface</a>
            </p>
         </li><li class="listitem">
            <p>
               <a href="https://docs.aws.amazon.com/goto/DotNetSDKV3/runtime.lex.v2-2020-08-07/RecognizeUtterance">AWS SDK for .NET</a>
            </p>
         </li><li class="listitem">
            <p>
               <a href="https://docs.aws.amazon.com/goto/SdkForCpp/runtime.lex.v2-2020-08-07/RecognizeUtterance">AWS SDK for C++</a>
            </p>
         </li><li class="listitem">
            <p>
               <a href="https://docs.aws.amazon.com/goto/SdkForGoV1/runtime.lex.v2-2020-08-07/RecognizeUtterance">AWS SDK for Go</a>
            </p>
         </li><li class="listitem">
            <p>
               <a href="https://docs.aws.amazon.com/goto/SdkForJavaV2/runtime.lex.v2-2020-08-07/RecognizeUtterance">AWS SDK for Java V2</a>
            </p>
         </li><li class="listitem">
            <p>
               <a href="https://docs.aws.amazon.com/goto/AWSJavaScriptSDK/runtime.lex.v2-2020-08-07/RecognizeUtterance">AWS SDK for JavaScript</a>
            </p>
         </li><li class="listitem">
            <p>
               <a href="https://docs.aws.amazon.com/goto/SdkForPHPV3/runtime.lex.v2-2020-08-07/RecognizeUtterance">AWS SDK for PHP V3</a>
            </p>
         </li><li class="listitem">
            <p>
               <a href="https://docs.aws.amazon.com/goto/boto3/runtime.lex.v2-2020-08-07/RecognizeUtterance">AWS SDK for Python</a>
            </p>
         </li><li class="listitem">
            <p>
               <a href="https://docs.aws.amazon.com/goto/SdkForRubyV3/runtime.lex.v2-2020-08-07/RecognizeUtterance">AWS SDK for Ruby V3</a>
            </p>
         </li></ul></div>
   <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./API_runtime_RecognizeText.html">RecognizeText</div><div id="next" class="next-link" accesskey="n" href="./API_runtime_StartConversation.html">StartConversation</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lex&amp;topic_url=https://docs.aws.amazon.com/en_us/lexv2/latest/APIReference/API_runtime_RecognizeUtterance.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lex&amp;topic_url=https://docs.aws.amazon.com/en_us/lexv2/latest/APIReference/API_runtime_RecognizeUtterance.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>