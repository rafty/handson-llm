<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="ko-KR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>아마존. KendraSearchIntent - Amazon Lex</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="built-in-intent-kendra-search" /><meta name="default_state" content="built-in-intent-kendra-search" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/ko_kr/lexv2/latest/dg/built-in-intent-kendra-search.html" /><meta name="description" content="Amazon Kendra Kendra로 인덱싱한 문서를 검색하려면 AMAZON.KendraSearchIntent 인텐트를 사용하십시오. Amazon Lex V2가 사용자와의 대화에서 다음 작업을 결정할 수 없을 때 검색 인텐트를 트리거합니다." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Lex" /><meta name="guide" content="V2 개발자 안내서" /><meta name="abstract" content="Amazon Lex V2의 개념적 개요를 제공합니다. 스트리밍 대화와 같은 다양한 기능 사용에 대한 세부 지침을 포함하고 V2 API에 대한 전체 참조를 제공합니다." /><meta name="guide-locale" content="ko_kr" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/ko_kr/lexv2/latest/dg/built-in-intent-kendra-search.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="x-default" /><meta name="feedback-item" content="Lex" /><meta name="this_doc_product" content="Amazon Lex" /><meta name="this_doc_guide" content="V2 개발자 안내서" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'lex'}"></script><meta id="panorama-serviceSubSection" value="V2 개발자 안내서" /><meta id="panorama-serviceConsolePage" value="아마존. KendraSearchIntent" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>아마존. KendraSearchIntent - Amazon Lex</title><meta name="pdf" content="lex2.0.pdf#built-in-intent-kendra-search" /><meta name="rss" content="amazon-lex-v2-document-history.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=251" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lex&amp;topic_url=http://docs.aws.amazon.com/ko_kr/lexv2/latest/dg/built-in-intent-kendra-search.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/ko_kr/lexv2/latest/dg/built-in-intent-kendra-search.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/ko_kr/lexv2/latest/dg/built-in-intent-kendra-search.html" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Lex",
        "item" : "https://docs.aws.amazon.com/lex/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "V2 개발자 안내서",
        "item" : "https://docs.aws.amazon.com/ko_kr/lexv2/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "봇 만들기",
        "item" : "https://docs.aws.amazon.com/ko_kr/lexv2/latest/dg/building-bots.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "내장 인텐트 및 슬롯 유형",
        "item" : "https://docs.aws.amazon.com/ko_kr/lexv2/latest/dg/built-in.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "내장 의도",
        "item" : "https://docs.aws.amazon.com/ko_kr/lexv2/latest/dg/howitworks-builtins-intents.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "아마존. KendraSearchIntent",
        "item" : "https://docs.aws.amazon.com/ko_kr/lexv2/latest/dg/howitworks-builtins-intents.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="lex2.0.pdf#built-in-intent-kendra-search" target="_blank" rel="noopener noreferrer" title="pdf-tooltip"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">aws-documentation</a><a href="/lex/index.html">Amazon Lex</a><a href="what-is.html">V2 개발자 안내서</a></div><div id="page-toc-src"><a href="#kendra-search-iam">IAM</a><a href="#kendra-search-filter">요청 및 세션 속성을 필터로 사용</a><a href="#kendra-search-response">검색 응답 사용</a><a href="#kendra-search-lambda">Lambda 함수를 사용하여 요청 및 응답 관리</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>기계 번역으로 제공되는 번역입니다. 제공된 번역과 원본 영어의 내용이 상충하는 경우에는 영어 버전이 우선합니다.</p></awsui-alert><h1 class="topictitle" id="built-in-intent-kendra-search">아마존. KendraSearchIntent </h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Amazon Kendra Kendra로 인덱싱한 문서를 검색하려면<code class="code">AMAZON.KendraSearchIntent</code> 인텐트를 사용하십시오. Amazon Lex V2가 사용자와의 대화에서 다음 작업을 결정할 수 없을 때 검색 인텐트를 트리거합니다.</p><p>영어 (미국) (en-US) 로케일과 미국 동부 (버지니아 북부), 미국 동부 (버지니아 북부), 미국 서부 (오레곤) 및 유럽 (아일랜드) 리전만 출시되었습니다.<code class="code">AMAZON.KendraSearchIntent</code></p><p>Amazon Kendra Kendra는 PDF 문서 또는 Microsoft Word 파일과 같은 자연어 문서를 인덱싱하는 machine-learning-based  검색 서비스입니다. 인덱싱된 문서를 검색하고 질문에 대해 다음 유형의 응답을 반환할 수 있습니다.</p><div class="itemizedlist">
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>대답 </p>
                </li><li class="listitem">
                    <p>질문에 대한 답이 될 수 있는 FAQ 항목</p>
                </li><li class="listitem">
                    <p>질문과 관련된 문서</p>
                </li></ul></div><p><code class="code">AMAZON.KendraSearchIntent</code> 사용 예는 <a href="./faq-bot-kendra-search.html">예: Amazon Kendra 인덱스용 FAQ 봇 생성</a> 단원을 참조하십시오.</p><p>봇에 대한<code class="code">AMAZON.KendraSearchIntent</code> 인텐트를 구성하면 Amazon Lex V2는 인텐트에 대한 사용자 발언을 확인할 수 없을 때마다 인텐트를 호출합니다. Amazon Kendra Kendra에서 응답이 없는 경우 봇에 구성된 대로 대화가 계속됩니다.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>참고</h6></div><div class="awsdocs-note-text"><p> Amazon Lex V2는 현재 슬롯 추출<code class="code">AMAZON.KendraSearchIntent</code> 중 기능을 지원하지 않습니다. Amazon Lex V2에서 슬롯에 대한 사용자 발언을 확인할 수 없는 경우 를<code class="code">AMAZON.FallbackIntent</code> 호출합니다.</p></div></div><p>동일한<code class="code">AMAZON.FallbackIntent</code> 봇에서 를<code class="code">AMAZON.KendraSearchIntent</code> 함께 사용하는 경우 Amazon Lex V2는 다음과 같이 인텐트를 사용합니다.</p><div class="orderedlist">
                 
                 
                 
                 
            <ol><li>
                    <p>Amazon Lex V2에서 호출합니다<code class="code">AMAZON.KendraSearchIntent</code>. 인텐트는 Amazon Kendra 오퍼레이션을<code class="code">Query</code> 호출합니다.</p>
                </li><li>
                    <p>Amazon Kendra 응답을 반환하면 Amazon Lex V2에서 사용자에게 결과를 표시합니다.</p>
                </li><li>
                    <p>Amazon Kendra Kendra에서 응답이 없는 경우 Amazon Lex V2에서 사용자에게 다시 메시지를 표시합니다. 다음 작업은 사용자의 응답에 따라 달라집니다.</p>
                    <div class="itemizedlist">
                         
                         
                    <ul class="itemizedlist"><li class="listitem">
                            <p>사용자의 응답에 슬롯 값을 채우거나 인텐트를 확인하는 등 Amazon Lex V2에서 인식하는 발언이 포함된 경우 봇에 구성된 대로 사용자와의 대화가 진행됩니다.</p>
                        </li><li class="listitem">
                            <p>사용자의 응답에 Amazon Lex V2가 인식하는 발언이 포함되어 있지 않은 경우 Amazon Lex V2는<code class="code">Query</code> 작업을 다시 호출합니다.</p>
                        </li></ul></div>
                </li><li>
                    <p>구성된 재시도 횟수 이후에도 응답이 없으면 Amazon Lex V2에서<code class="code">AMAZON.FallbackIntent</code> 전화를 걸어 사용자와의 대화를 종료합니다.</p>
                </li></ol></div><p>를 사용하여 Amazon<code class="code">AMAZON.KendraSearchIntent</code> Kendra에 요청하는 세 가지 방법이 있습니다.</p><div class="itemizedlist">
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>검색 인텐트가 대신 요청하도록 하세요. Amazon Lex V2는 사용자의 말을 검색 문자열로 사용하여 Amazon Kendra Kendra를 호출합니다. 인텐트를 생성할 때 Amazon Kendra Kendra가 반환하는 응답 수를 제한하는 쿼리 필터 문자열을 정의할 수 있습니다. Amazon Lex V2는 쿼리 요청에서 필터를 사용합니다.</p>
                </li><li class="listitem">
                    <p>요청에 쿼리 파라미터를 추가하여 Lambda 함수를 사용하여 검색 결과를 좁힐 수 있습니다. Amazon Kendra 쿼리 파라미터가 포함된<code class="code">kendraQueryFilterString</code> 필드를<code class="code">delegate</code> 대화 작업에 추가합니다. Lambda 함수를 사용하여 요청에 쿼리 파라미터를 추가하면 인텐트를 생성할 때 정의한 쿼리 필터보다 우선합니다.</p>
                </li><li class="listitem">
                    <p>Lambda 함수를 사용하여 새 쿼리를 생성합니다. Amazon Lex V2에서 전송하는 전체 Amazon Kendra 쿼리 요청을 생성할 수 있습니다. <code class="code">delegate</code> 대화 작업의 <code class="code">kendraQueryRequestPayload</code> 필드에 쿼리를 지정합니다. <code class="code">kendraQueryRequestPayload</code> 필드가 <code class="code">kendraQueryFilterString</code> 필드보다 우선 적용됩니다.</p>
                </li></ul></div><p>봇을 생성할 때<code class="code">queryFilterString</code> 파라미터를 지정하거나 대화상자 Lambda 함수에서<code class="code">delegate</code> 작업을 호출할 때<code class="code">kendraQueryFilterString</code> 필드를 지정하려면 Amazon Kendra 쿼리의 속성 필터로 사용되는 문자열을 지정합니다. 문자열이 유효한 속성 필터가 아닌 경우 실행 시간에 <code class="code">InvalidBotConfigException</code> 예외가 발생합니다. 속성 필터에 대한 자세한 내용은 <em>Amazon Kendra 개발자 안내서의</em> <a href="https://docs.aws.amazon.com/kendra/latest/dg/filtering.html#search-filtering">문서 속성을 사용하여 쿼리를 필터링하기를</a> 참조하십시오.</p><p>Amazon Lex V2가 Amazon Kendra Kendra로 보내는 쿼리를 제어하려면 Lambda 함수의<code class="code">kendraQueryRequestPayload</code> 필드에 쿼리를 지정하면 됩니다. 쿼리가 유효하지 않은 경우 Amazon Lex V2는<code class="code">InvalidLambdaResponseException</code> 예외를 반환합니다. 자세한 내용은 <em>Amazon Kendra 개발자 안내서의</em> <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_Query.html">쿼리 작업을</a> 참조하십시오.</p><p><code class="code">AMAZON.KendraSearchIntent</code> 사용 방법의 예는 <a href="./faq-bot-kendra-search.html">예: Amazon Kendra 인덱스용 FAQ 봇 생성</a> 단원을 참조하십시오.</p>
                <h2 id="kendra-search-iam">Amazon Kendra 검색에 대한 IAM 정책</h2>
                <p><code class="code">AMAZON.KendraSearchIntent</code>인텐트를 사용하려면 Amazon Lex V2가 Amazon Kendra<code class="code">Query</code> 인텐트를 호출할 권한이 있는 런타임 역할을 맡을 수 있도록 하는 역할을 제공하는AWS Identity and Access Management (IAM) 정책을 사용해야 합니다. 사용하는 IAM 설정은 Amazon Lex V2<code class="code">AMAZON.KendraSearchIntent</code> 콘솔을 사용하여 생성하는지, AWS SDK 또는AWS Command Line Interface (AWS CLI) 를 사용하여 생성하는지에 따라 달라집니다. 콘솔을 사용할 때 Amazon Lex V2 서비스 연결 역할에 Amazon Kendra를 호출할 권한을 추가할지 아니면 Amazon Kendra<code class="code">Query</code> 작업을 호출하기 위한 전용 역할을 사용할지 선택할 수 있습니다. AWS CLI 또는 SDK를 사용하여 의도를 생성하는 경우 <code class="code">Query</code> 작업 호출을 위한 전용 역할을 사용해야 합니다.</p>
                 
                    <h3 id="kendra-iam-attach">권한 연결 </h3>
                    <p>콘솔을 사용하여 Amazon Kendra<code class="code">Query</code> 작업에 액세스할 수 있는 권한을 기본 Amazon Lex V2 서비스 연결 역할에 연결할 수 있습니다. 서비스 연결 역할에 권한을 연결하면 Amazon Kendra 인덱스에 연결하기 위해 특별히 런타임 역할을 생성하고 관리할 필요가 없습니다.</p>
                    <p>Amazon Lex V2 콘솔에 액세스하는 데 사용하는 사용자, 역할 또는 그룹에는 역할 정책을 관리할 권한이 있어야 합니다. 다음 IAM 역할을 콘솔 액세스 역할에 연결합니다. 이러한 권한을 부여하면 해당 역할이 기존 서비스 연결 역할 정책을 변경할 수 있는 권한을 갖게 됩니다.</p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "iam:AttachRolePolicy",
                "iam:PutRolePolicy",
                "iam:GetRolePolicy"
            ],
            "Resource": "arn:aws:iam::*:role/aws-service-role/lexv2.amazonaws.com/AWSServiceRoleForLexBots*"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": "iam:ListRoles",
            "Resource": "*"
        }
    ]
}</code></pre>
                 
                 
                    <h3 id="kendra-iam-role">역할 지정 </h3>
                    <p>콘솔AWS CLI, 또는 API를 사용하여 Amazon Kendra<code class="code">Query</code> 작업을 호출할 때 사용할 런타임 역할을 지정할 수 있습니다.</p>
                    <p>런타임 역할을 지정하는 데 사용하는 사용자, 역할 또는 그룹에는<code class="code">iam:PassRole</code> 권한이 있어야 합니다. 다음 정책은 권한을 정의합니다. <code class="code">iam:AssociatedResourceArn</code> 및 <code class="code">iam:PassedToService</code> 조건 컨텍스트 키를 사용해 권한 범위를 추가로 제한할 수 있습니다. 자세한 내용은 <em>AWS Identity and Access Management사용 설명서의 <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html">IAM 및AWS STS 조건 컨텍스트 키를</a> 참조하십시오</em>.</p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": "iam:PassRole",
            "Resource": "arn:aws:iam::<code class="replaceable">account</code>:role/<code class="replaceable">role</code>"
        }
    ]
}</code></pre>
                    <p>Amazon Lex V2에서 Amazon Kendra Kendra를 호출하는 데 사용해야 하는 런타임 역할에는<code class="code">kendra:Query</code> 권한이 있어야 합니다. Amazon Kendra<code class="code">Query</code> 작업을 호출할 권한을 얻기 위해 기존 IAM 역할을 사용하는 경우 역할에 다음 정책이 첨부되어 있어야 합니다.</p>
                    <p>IAM 콘솔, IAM API 또는 를 사용하여 정책을 생성한 후 역할에 연결할 수 있습니다.AWS CLI 여기에 나온 지침에서는 AWS CLI를 사용하여 역할과 정책을 생성합니다.</p>
                    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>참고</h6></div><div class="awsdocs-note-text"><p>다음 코드는 Linux 및 MacOS용으로 형식이 지정됩니다. Windows의 경우 Linux 줄 연속 문자(\)를 캐럿(^)으로 바꿉니다.</p></div></div>
                    <div class="procedure"><h6>역할에 쿼리 작업 권한을 추가하려면</h6><ol><li>
                            <p>현재 디렉터리에 <code class="userinput">KendraQueryPolicy.json</code>이라는 문서를 만들고 다음 코드를 추가한 다음 저장합니다.</p>
                            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "kendra:Query"
            ],
            "Resource": [
                "arn:aws:kendra:<code class="replaceable">region</code>:<code class="replaceable">account</code>:index/<code class="replaceable">index ID</code>"
            ]
        }
    ]
}</code></pre>
                        </li><li>
                            <p>에서 다음AWS CLI 명령을 실행하여 Amazon Kendra<code class="code">Query</code> 작업을 실행하기 위한 IAM 정책을 생성합니다.</p>
                            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws iam create-policy \
    --policy-name <code class="replaceable">query-policy-name</code> \
    --policy-document file://KendraQueryPolicy.json</code></pre>
                        </li><li>
                            <p><code class="code">Query</code>작업을 호출하는 데 사용하는 IAM 역할에 정책을 연결합니다.</p>
                            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws iam attach-role-policy \
    --policy-arn arn:aws:iam::<code class="replaceable">account-id</code>:policy/<code class="replaceable">query-policy-name</code>
    --role-name <code class="replaceable">role-name</code></code></pre>
                        </li></ol></div>
                    <p>Amazon Lex V2 서비스 연결 역할을 업데이트하거나 봇을 생성할 때 생성한 역할을 사용하도록 선택할 수 있습니다.<code class="code">AMAZON.KendraSearchIntent</code> 다음 절차에서는 사용할 IAM 역할을 선택하는 방법을 보여줍니다.</p>
                    <div class="procedure"><h6>AMAZON의 런타임 역할을 지정하려면 KendraSearchIntent</h6><ol><li>
                            <p>에AWS Management Console 로그인하고 <a href="https://console.aws.amazon.com/lex/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/lex/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> Amazon Lex 콘솔을 엽니다.</p>
                        </li><li>
                            <p><code class="code">AMAZON.KendraSearchIntent</code>를 추가할 봇을 선택합니다.</p>
                        </li><li>
                            <p><b>의도</b> 옆에 있는 더하기(+) 기호를 선택합니다.</p>
                        </li><li>
                            <p><b>의도 추가</b>에서 <b>기존 의도 검색</b>을 선택합니다.</p>
                        </li><li>
                            <p><b>검색 의도</b>에 <code class="userinput">AMAZON.KendraSearchIntent</code>를 입력한 다음 <b>추가</b>를 선택합니다.</p>
                        </li><li>
                            <p><b>내장 의도 복사</b>에서 의도의 이름(예: <code class="userinput">KendraSearchIntent</code>)을 입력한 다음 <b>추가</b>를 선택합니다.</p>
                        </li><li>
                            <p><b>Amazon Kendra 쿼리</b> 섹션을 엽니다.</p>
                        </li><li>
                            <p><b>IAM 역할</b>에서 다음 옵션 중 하나를 선택합니다.</p>
                            <div class="itemizedlist">
                                 
                                 
                            <ul class="itemizedlist"><li class="listitem">
                                    <p>봇이 Amazon Kendra 인덱스를 쿼리할 수 있도록 Amazon Lex V2 서비스 연결 역할을 업데이트하려면 <b>Amazon Kendra 권한 추가를</b> 선택합니다.</p>
                                </li><li class="listitem">
                                    <p>Amazon Kendra<code class="code">Query</code> 작업을 호출할 권한이 있는 역할을 <b>사용하려면 기존 역할 사용을</b> 선택합니다.</p>
                                </li></ul></div>
                        </li></ol></div>
                 
             
                <h2 id="kendra-search-filter">요청 및 세션 속성을 필터로 사용</h2>
                <p>현재 대화와 관련된 항목에 대한 Amazon Kendra Kendra의 응답을 필터링하려면 봇을 만들 때<code class="code">queryFilterString</code> 파라미터를 추가하여 세션 및 요청 속성을 필터로 사용하십시오. 인텐트를 생성할 때 속성의 자리 표시자를 지정하면 Amazon Lex V2가 Amazon Kendra Kendra를 호출하기 전에 값을 대체합니다. 요청 속성에 대한 자세한 내용은 <a href="./context-mgmt-request-attribs.html">요청 속성 설정</a> 단원을 참조하십시오. 세션 속성에 대한 자세한 내용은 <a href="./context-mgmt-session-attribs.html">세션 속성 설정</a> 단원을 참조하십시오.</p>
                <p>다음은 문자열을 사용하여 Amazon Kendra 쿼리를 필터링하는<code class="code">queryFilterString</code> 파라미터의 예입니다.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"<span>{</span>"equalsTo": <span>{</span>"key": "City", "value": <span>{</span>"stringValue": "Seattle"}}}"</code></pre>
                <p>다음은 Amazon Kendra 쿼리를<code class="code">"SourceURI"</code> 필터링하기 위해 호출된 세션 속성을 사용하는<code class="code">queryFilterString</code> 파라미터의 예입니다.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"<span>{</span>"equalsTo": <span>{</span>"key": "SourceURI","value": <span>{</span>"stringValue": "[FileURL]"}}}"</code></pre>
                <p>다음은 Amazon Kendra 쿼리를<code class="code">"DepartmentName"</code> 필터링하기 위해 호출된 요청 속성을 사용하는<code class="code">queryFilterString</code> 파라미터의 예입니다.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"<span>{</span>"equalsTo": <span>{</span>"key": "Department","value": <span>{</span>"stringValue": "((DepartmentName))"}}}"</code></pre>
                <p><code class="code">AMAZON.KendraSearchInteng</code>필터는 Amazon Kendra 검색 필터와 동일한 형식을 사용합니다. 자세한 내용은 <em>Amazon Kendra 개발자 안내서의</em> <a href="https://docs.aws.amazon.com/kendra/latest/dg/filtering.html#search-filtering">문서 속성을 사용한 검색 결과 필터링을</a> 참조하십시오.</p>
                <p>와 함께 사용되는 쿼리 필터 문자열은 각 필터의 첫 글자에 소문자를<code class="code">AMAZON.KendraSearchIntent</code> 사용해야 합니다. 예를 들어, 다음은 에 유효한 쿼리<code class="code">AMAZON.KendraSearchIntent</code> 필터입니다.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "andAllFilters": [
        <span>{</span>
            "equalsTo": <span>{</span>
                "key": "City",
                "value": <span>{</span>
                    "stringValue": "Seattle"
                }
            }
        },
        <span>{</span>
            "equalsTo": <span>{</span>
                "key": "State",
                "value": <span>{</span>
                    "stringValue": "Washington"
                }
            }
        }
    ]
}</code></pre>
             
                <h2 id="kendra-search-response">검색 응답 사용</h2>
                <p>Amazon Kendra Kendra는 검색에 대한 응답을 인텐트<code class="code">IntentClosingSetting</code> 설명의 응답으로 반환합니다. Lambda 함수가 종료 응답 메시지를 생성하지 않는 한 인텐트에는<code class="code">closingResponse</code> 명령문이 있어야 합니다.</p>
                <p>Amazon Kendra 켄드라에는 다섯 가지 유형의 응답이 있습니다.</p>
                <div class="itemizedlist">
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>다음 두 개의 응답에는 Amazon Kendra 인덱스에 대한 FAQ를 설정해야 합니다. 자세한 내용은 <a href="https://docs.aws.amazon.com/kendra/latest/dg/in-creating-faq.html">색인에 직접 질문 및 답변 추가하기를</a> 참조하십시오.</p>
                        <div class="itemizedlist">
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p> <code class="code">x-amz-lex:kendra-search-response-question_answer-question-&lt;N&gt;</code>— 검색과 일치하는 FAQ의 질문입니다.</p>
                            </li><li class="listitem">
                                <p> <code class="code">x-amz-lex:kendra-search-response-question_answer-answer-&lt;N&gt;</code>— 검색과 일치하는 FAQ의 답변입니다.</p>
                            </li></ul></div>                        
                    </li><li class="listitem">
                        <p>다음 세 가지 응답에는 Amazon Kendra 인덱스에 대한 데이터 소스를 설정해야 합니다. 자세한 내용은 <a href="https://docs.aws.amazon.com/kendra/latest/dg/data-source.html">데이터 원본 만들기를</a> 참조하십시오.</p>
                        <div class="itemizedlist">
                             
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p><code class="code">x-amz-lex:kendra-search-response-document-&lt;N&gt;</code>— 발화 텍스트와 관련된 색인의 문서에서 발췌한 내용입니다.</p>
                            </li><li class="listitem">
                                <p><code class="code">x-amz-lex:kendra-search-response-document-link-&lt;N&gt;</code>— 발화 텍스트와 관련된 색인에 있는 문서의 URL입니다.</p>
                            </li><li class="listitem">
                                <p><code class="code">x-amz-lex:kendra-search-response-answer-&lt;N&gt;</code>— 질문에 답하는 색인의 문서에서 발췌한 내용입니다.</p>
                            </li></ul></div>
                    </li></ul></div>
                <p>응답은 <code class="code">request</code> 속성에서 반환됩니다. 각 속성에 1부터 5까지 번호가 매겨진 최대 5개의 응답이 있을 수 있습니다. 응답에 대한 자세한 내용은 <em>Amazon Kendra 개발자 안내서의</em> <a href="https://docs.aws.amazon.com/kendra/latest/dg/response-types.html">응답 유형을</a> 참조하십시오.</p>
                <p><code class="code">closingResponse</code> 문에는 하나 이상의 메시지 그룹이 있어야 합니다. 각 메시지 그룹에는 하나 이상의 메시지가 포함됩니다. 각 메시지에는 Amazon Kendra Kendra의 응답에서 요청 속성으로 대체되는 하나 이상의 자리 표시자 변수가 포함될 수 있습니다. 메시지 그룹에는 해당 메시지의 모든 변수가 실행 시간 응답에서 요청 속성 값으로 대체되는 메시지가 하나 이상 있어야 합니다. 그렇지 않은 경우 자리 표시자 변수가 없는 메시지 하나가 그룹에 있어야 합니다. 요청 속성은 이중 괄호(“(” “)”)로 묶입니다. 다음 메시지 그룹 메시지는 Amazon Kendra Kendra의 모든 응답과 일치합니다.</p>
                <div class="itemizedlist">
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>“귀하를 위한 FAQ 질문을 찾았습니다: (x-amz-lex:kendra-search-response-question _답변-질문-1)), 답변은 (x-amz-lex:kendra-search-response-question _답변-답변-1) 입니다.”</p>
                    </li><li class="listitem">
                        <p>“유용한 문서에서 발췌한 내용을 찾았습니다: (x-amz-lex:kendra-search-response-document -1))”</p>
                    </li><li class="listitem">
                        <p>“귀하의 질문에 대한 답은 ((x-amz-lex:kendra-search-response-answer -1)) 인 것 같습니다.”</p>
                    </li></ul></div>
             
                <h2 id="kendra-search-lambda">Lambda 함수를 사용하여 요청 및 응답 관리</h2>
                <p><code class="code">AMAZON.KendraSearchIntent</code>인텐트는 대화 코드 후크와 주문 처리 코드 후크를 사용하여 Amazon Kendra Kendra에 대한 요청과 응답을 관리할 수 있습니다. Amazon Kendra Kendra로 보내는 쿼리를 수정하려면 대화 코드 후크 Lambda 함수를 사용하고, 응답을 수정하려면 주문 처리 코드 후크 Lambda 함수를 사용하십시오.</p>
                 
                    <h3 id="kendra-search-lambda-dialog">대화 코드 후크를 사용하여 쿼리 생성</h3>
                    <p>대화 코드 후크를 사용하여 Amazon Kendra Kendra로 전송할 쿼리를 생성할 수 있습니다. 대화 코드 후크 사용은 선택 사항입니다. 대화 코드 후크를 지정하지 않는 경우 Amazon Lex V2에서는 사용자 발언을 기반으로 쿼리를 구성하고 인텐트를 구성할 때 제공한 내용을 사용합니다 (제공된 경우).<code class="code">queryFilterString</code></p>
                    <p>대화 코드 후크 응답의 두 필드를 사용하여 Amazon Kendra Kendra에 대한 요청을 수정할 수 있습니다.</p>
                    <div class="itemizedlist">
                         
                         
                    <ul class="itemizedlist"><li class="listitem">
                            <p><code class="code">kendraQueryFilterString</code>— 이 문자열을 사용하여 Amazon Kendra 요청에 대한 속성 필터를 지정합니다. 인덱스에 정의된 인덱스 필드 중 하나를 사용하여 쿼리를 필터링할 수 있습니다. 필터 문자열의 구조는 <em>Amazon Kendra 개발자 안내서의</em> <a href="https://docs.aws.amazon.com/kendra/latest/dg/filtering.html#search-filtering">문서 속성을 사용하여 쿼리를 필터링하기를</a> 참조하십시오. 지정된 필터 문자열이 유효하지 않으면 <code class="code">InvalidLambdaResponseException</code> 예외가 발생합니다. <code class="code">kendraQueryFilterString</code> 문자열은 해당 의도에 구성된 <code class="code">queryFilterString</code>에 지정되어 있는 모든 쿼리 문자열을 재정의합니다.</p>
                        </li><li class="listitem">
                            <p><code class="code">kendraQueryRequestPayload</code>— 이 문자열을 사용하여 Amazon Kendra 쿼리를 지정합니다. 쿼리에서는 Amazon Kendra의 모든 기능을 사용할 수 있습니다. 유효한 쿼리를 지정하지 않으면 <code class="code">InvalidLambdaResponseException</code> 예외가 발생합니다. 자세한 내용은 <em>Amazon Kendra 개발자 안내서의</em> <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_Query.html">쿼리를</a> 참조하십시오.</p>
                        </li></ul></div>
                    <p>필터 또는 쿼리 문자열을 생성한 후에는 응답<code class="code">dialogAction</code> 필드를 로 설정하여 Amazon Lex V2에 응답을 보냅니다<code class="code">delegate</code>. Amazon Lex V2는 쿼리를 Amazon Kendra 전송한 다음 주문 처리 코드 후크에 쿼리 응답을 반환합니다.</p>
                 
                 
                    <h3 id="kendra-search-lambda-fulfillment">응답에 이행 코드 후크 사용</h3>
                    <p>Amazon Lex V2에서 Amazon Kendra Kendra로 쿼리를 전송하면 쿼리 응답이<code class="code">AMAZON.KendraSearchIntent</code> 주문 처리 Lambda 함수로 반환됩니다. 코드 후크에 대한 입력 이벤트에는 Amazon Kendra Kendra의 전체 응답이 포함됩니다. 쿼리 데이터는 Amazon Kendra<code class="code">Query</code> 작업에서 반환된 것과 동일한 구조로 되어 있습니다. 자세한 내용은 <em>Amazon Kendra 개발자 안내서의</em> <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_Query.html#API_Query_ResponseSyntax">쿼리 응답 구문을</a> 참조하십시오.</p>
                    <p>이행 코드 후크는 선택 사항입니다. 코드가 없거나 코드 후크가 응답에 메시지를 반환하지 않는 경우 Amazon Lex V2는 해당<code class="code">closingResponse</code> 명령문을 사용하여 응답합니다.</p>
                 
            <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="주의" /> <strong>javascript가 브라우저에서 비활성화되거나 사용이 불가합니다.</strong></p><p>AWS 설명서를 사용하려면 Javascript가 활성화되어야 합니다. 지침을 보려면 브라우저의 도움말 페이지를 참조하십시오.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">문서 규칙</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./built-in-intent-help.html">아마존. HelpIntent </div><div id="next" class="next-link" accesskey="n" href="./faq-bot-kendra-search.html">예: Amazon Kendra 인덱스용 FAQ 봇 생성</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">이 페이지의 내용이 도움이 되었습니까? - 예</div><div class="content"><p>칭찬해 주셔서 감사합니다!</p><p>잠깐 시간을 내어 좋았던 부분을 알려 주시면 더 열심히 만들어 보겠습니다.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="feedback-tell-us" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lex&amp;topic_url=https://docs.aws.amazon.com/ko_kr/lexv2/latest/dg/built-in-intent-kendra-search.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">이 페이지의 내용이 도움이 되었습니까? - 아니요</div><div class="content"><p>이 페이지에 작업이 필요하다는 점을 알려 주셔서 감사합니다. 실망시켜 드려 죄송합니다.</p><p>잠깐 시간을 내어 설명서를 향상시킬 수 있는 방법에 대해 말씀해 주십시오.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="feedback-tell-us" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lex&amp;topic_url=https://docs.aws.amazon.com/ko_kr/lexv2/latest/dg/built-in-intent-kendra-search.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>