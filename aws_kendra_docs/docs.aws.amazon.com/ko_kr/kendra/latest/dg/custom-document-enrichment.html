<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="ko-KR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>처리 중 문서 보강 - Amazon Kendra</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="custom-document-enrichment" /><meta name="default_state" content="custom-document-enrichment" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/ko_kr/kendra/latest/dg/custom-document-enrichment.html" /><meta name="description" content="의 문서 수집 프로세스 중 문서 속성 및 콘텐츠를 생성, 수정 또는 삭제하는Amazon Kendra 방법" /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Kendra" /><meta name="guide" content="개발자 안내서" /><meta name="abstract" content="Amazon Kendra에 대한 개념적 개요를 제공합니다. Amazon Kendra기능에 대해 알아보고 콘솔, CLI 및 API를 사용하여 문서 인덱싱을 시작하세요." /><meta name="guide-locale" content="ko_kr" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/ko_kr/kendra/latest/dg/custom-document-enrichment.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/kendra/latest/dg/custom-document-enrichment.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/kendra/latest/dg/custom-document-enrichment.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/kendra/latest/dg/custom-document-enrichment.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/kendra/latest/dg/custom-document-enrichment.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/kendra/latest/dg/custom-document-enrichment.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/kendra/latest/dg/custom-document-enrichment.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/kendra/latest/dg/custom-document-enrichment.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/kendra/latest/dg/custom-document-enrichment.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/kendra/latest/dg/custom-document-enrichment.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/kendra/latest/dg/custom-document-enrichment.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/kendra/latest/dg/custom-document-enrichment.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/kendra/latest/dg/custom-document-enrichment.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/kendra/latest/dg/custom-document-enrichment.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/kendra/latest/dg/custom-document-enrichment.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/kendra/latest/dg/custom-document-enrichment.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/kendra/latest/dg/custom-document-enrichment.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/kendra/latest/dg/custom-document-enrichment.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/kendra/latest/dg/custom-document-enrichment.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/kendra/latest/dg/custom-document-enrichment.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/kendra/latest/dg/custom-document-enrichment.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/kendra/latest/dg/custom-document-enrichment.html" hreflang="x-default" /><meta name="feedback-item" content="Kendra" /><meta name="this_doc_product" content="Amazon Kendra" /><meta name="this_doc_guide" content="개발자 안내서" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'kendra'}"></script><meta id="panorama-serviceSubSection" value="개발자 안내서" /><meta id="panorama-serviceConsolePage" value="처리 중 문서 보강" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>처리 중 문서 보강 - Amazon Kendra</title><meta name="pdf" content="kendra-dg.pdf#custom-document-enrichment" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Kendra&amp;topic_url=http://docs.aws.amazon.com/ko_kr/kendra/latest/dg/custom-document-enrichment.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/ko_kr/kendra/latest/dg/custom-document-enrichment.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/ko_kr/kendra/latest/dg/custom-document-enrichment.html" /><meta name="keywords" content="Kendra,Amazon Kendra,검색,인텔리전트 검색,자연 언어,인덱스를 구축하고 배포할 것입니다,질문,핵심어,데이터 원본,커넥터,FAQ" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Kendra",
        "item" : "https://docs.aws.amazon.com/kendra/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "개발자 안내서",
        "item" : "https://docs.aws.amazon.com/ko_kr/kendra/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "처리 중 문서 보강",
        "item" : "https://docs.aws.amazon.com/ko_kr/kendra/latest/dg/custom-document-enrichment.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="kendra-dg.pdf#custom-document-enrichment" target="_blank" rel="noopener noreferrer" title="pdf-tooltip"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">aws-documentation</a><a href="/kendra/index.html">Amazon Kendra</a><a href="what-is-kendra.html">개발자 안내서</a></div><div id="page-toc-src"><a href="#how-custom-document-enrichment-works">사용자 지정 문서 보강 작동 방식</a><a href="#basic-data-maniplation">메타데이터 변경을 위한 기본 작업</a><a href="#advanced-data-manipulation">Lambda 함수: 메타데이터 또는 콘텐츠 추출 및 변경</a><a href="#cde-data-contracts-lambda">Lambda 함수에 대한 데이터 계약</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>기계 번역으로 제공되는 번역입니다. 제공된 번역과 원본 영어의 내용이 상충하는 경우에는 영어 버전이 우선합니다.</p></awsui-alert><h1 class="topictitle" id="custom-document-enrichment">처리 중 문서 보강</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>문서 수집 프로세스 중 콘텐츠 및 문서 메타데이터 데이터, 콘텐츠 및 문서 수집 프로세스 중 콘텐츠 및 문서 메타데이터 수집 프로세스 중 변경할 수 있습니다. Amazon Kendra의 <em>사용자 지정 문서 보강 기능을 사용하면 문서를 로 인제스트할</em> 때 문서 속성 및 컨텐츠를 생성, 수정 또는 삭제할 수Amazon Kendra 있습니다. 즉, 필요에 따라 데이터를 조작하고 수집할 수 있습니다.</p><p>이 기능을 사용하면 문서를 처리하고 처리하는 방법을 제어할 수Amazon Kendra 있습니다. 예를 들어, 문서를 로 인제스트하는 동안 문서 메타데이터에서 개인 식별 정보를 스크럽할 수Amazon Kendra 있습니다.</p><p>이 기능을 사용할 수 있는 또 다른 방법은 에서 Lambda 함수를AWS Lambda 호출하여 이미지에서 OCR (광학 문자 인식) 을 실행하고, 텍스트에서 변환하고, 검색 또는 분석할 데이터를 준비하는 기타 작업을 실행하는 것입니다. 예를 들어, 함수를 호출하여 이미지에서 OCR을 실행할 수 있습니다. 함수는 이미지에서 텍스트를 해석하고 각 이미지를 텍스트 문서로 취급할 수 있습니다. 우편으로 발송된 고객 설문조사를 받고 이러한 설문조사를 이미지로 저장하는 회사는 이러한 이미지를 텍스트 문서로 수집할 수Amazon Kendra 있습니다. 그러면 회사는 에서 중요한 고객 설문조사 정보를 검색할 수Amazon Kendra 있습니다.</p><p>기본 작업을 사용하여 데이터의 첫 번째 구문 분석으로 적용한 다음 Lambda 함수를 사용하여 데이터에 더 복잡한 작업을 적용할 수 있습니다. 예를 들어 기본 작업을 사용하여 문서 메타데이터 필드 'Customer_ID'에서 모든 값을 간단히 제거한 다음 Lambda 함수를 적용하여 문서의 텍스트 이미지에서 텍스트를 추출할 수 있습니다.</p>
        <h2 id="how-custom-document-enrichment-works">사용자 지정 문서 보강 작동 방식</h2>
        <p>사용자 지정 문서 보강의 전체 프로세스는 다음과 같습니다.</p>
        <div class="orderedlist">
             
             
             
             
        <ol><li>
                <p>데이터 원본을 만들거나 업데이트하거나 문서를 직접 색인화할 때 사용자 지정 문서 보강을 구성합니다Amazon Kendra.</p>
            </li><li>
                <p>Amazon Kendra인라인 구성 또는 기본 로직을 적용하여 데이터를 변경합니다. 자세한 정보는 <a href="#basic-data-maniplation">메타데이터 변경을 위한 기본 작업</a>을 참조하세요.</p>
            </li><li>
                <p>고급 데이터 조작을 구성하기로 선택한 경우 이를 원본 원시 문서 또는 구조화되고 파싱된 문서에 적용할Amazon Kendra 수 있습니다. 자세한 정보는 <a href="#advanced-data-manipulation">Lambda 함수: 메타데이터 또는 콘텐츠 추출 및 변경</a>을 참조하세요.</p>
            </li><li>
                <p>변경된 문서는 에 통합됩니다Amazon Kendra.</p>
            </li></ol></div>
        <p>이 프로세스의 어느 시점에서든 구성이 유효하지 않으면Amazon Kendra 오류가 발생합니다.</p>
        <p>또는 <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_BatchPutDocument.html">BatchPutDocument</a>API를 <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_CreateDataSource.html">CreateDataSource</a>호출할 때 사용자 지정 문서 강화 구성을 제공합니다. <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_UpdateDataSource.html">UpdateDataSource</a> 전화를 거는<code class="code">BatchPutDocument</code> 경우 각 요청마다 사용자 지정 문서 보강을 구성해야 합니다. 콘솔을 사용하는 경우 색인을 선택한 다음 <b>문서</b> 보강을 선택하여 사용자 지정 문서 강화를 구성합니다.</p>
        <p>콘솔에서 <b>문서 강화를</b> 사용하는 경우 API를 사용하는 것처럼 기본 작업만 구성하거나 Lambda 함수만 구성하거나 둘 다 구성하도록 선택할 수 있습니다. 콘솔 단계에서 <b>다음을</b> 선택하여 기본 작업을 구성하지 않고 원본 (추출 전) 또는 구조화된 (추출 후) 데이터에 적용할지 여부를 포함하여 Lambda 함수만 구성하도록 선택할 수 있습니다. 콘솔에서 모든 단계를 완료해야 컨피그레이션을 저장할 수 있습니다. 모든 단계를 완료하지 않으면 문서 구성이 저장되지 않습니다.</p>
     
        <h2 id="basic-data-maniplation">메타데이터 변경을 위한 기본 작업</h2>
        <p>기본 로직을 사용하여 문서 필드와 콘텐츠를 조작할 수 있습니다. 여기에는 필드의 값 제거, 조건을 사용하여 필드의 값 수정 또는 필드 생성이 포함됩니다. 기본 로직을 사용하여 조작할 수 있는 것 이상의 고급 조작을 수행하려면 Lambda 함수를 호출하십시오. 자세한 정보는 <a href="#advanced-data-manipulation">Lambda 함수: 메타데이터 또는 콘텐츠 추출 및 변경</a>을 참조하세요.</p>
        <p>기본 로직을 적용하려면 <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_DocumentAttributeTarget.html">DocumentAttributeTarget</a>객체를 사용하여 조작하려는 대상 필드를 지정합니다. 속성 키를 제공합니다. 예를 들어, 'Dement'는 문서와 연결된 모든 부서 이름을 포함시키는 필드나 속성입니다. 특정 조건이 충족되는 경우 대상 필드에 사용할 값을 지정할 수도 있습니다. <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_DocumentAttributeCondition.html">DocumentAttributeCondition</a>객체를 사용하여 조건을 설정합니다. 예를 들어, 'Source_URI' 필드의 URI 값에 'financial'이 포함된 경우 대상 필드인 'Dement'를 문서의 대상 값 'Finance'로 미리 채우는 것을 예로 들어 보겠습니다. 대상 문서 속성 값을 삭제할 수도 있습니다.</p>
        <p>콘솔을 사용하여 기본 로직을 적용하려면 색인을 선택한 다음 탐색 메뉴에서 <b>문서 강화를</b> 선택합니다. <b>기본 작업 구성으로</b> 이동하여 문서 필드 및 콘텐츠에 기본 조작을 적용하세요.</p>
        <p>다음은 기본 로직을 사용하여 'Customeromaneroerererererererererererererererererererererererererererererererererererererererero</p>
        <p><b>예 1: 문서와 관련된 고객 식별 번호 제거</b></p>
        <p>기본 조작이 적용되기 전의 데이터입니다.</p>
        <div class="table-container"><div class="table-contents"><table id="w1460aac27c13c15"><thead>
                    <tr>
                        <th><b>문서_ID</b></th>
                        <th><b>본문_텍스트</b></th>
                        <th><b>고객_ID</b></th>
                    </tr>
                </thead>
                    <tr>
                        <td>1</td>
                        <td>로렘 입섬.</td>
                        <td>CID1234</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>로렘 입섬.</td>
                        <td>CID1235</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>로렘 입섬.</td>
                        <td>CID1236</td>
                    </tr>
                </table></div></div>
        <p>기본 조작이 적용된 후의 데이터.</p>
        <div class="table-container"><div class="table-contents"><table id="w1460aac27c13c19"><thead>
                    <tr>
                        <th><b>문서_ID</b></th>
                        <th><b>본문_텍스트</b></th>
                        <th><b>고객_ID</b></th>
                    </tr>
                </thead>
                    <tr>
                        <td>1</td>
                        <td>로렘 입섬.</td>
                        <td> </td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>로렘 입섬.</td>
                        <td> </td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>로렘 입섬.</td>
                        <td> </td>
                    </tr>
                </table></div></div>
        <p>다음은 기본 논리를 사용하여 'Department'라는 필드를 만들고 'Source_URI' 필드의 정보를 기반으로 이 필드를 부서 이름으로 미리 채우는 예제입니다. 'Source_URI' 필드의 URI 값에 'financial'이 포함된 경우 대상 필드인 'Dement'를 문서의 대상 값 'Finance'로 미리 채우는 조건을 사용합니다.</p>
        <p><b>예 2: '부서' 필드를 만들고 조건을 사용하여 문서와 관련된 부서 이름으로 미리 채웁니다.</b></p>
        <p>기본 조작이 적용되기 전의 데이터입니다.</p>
        <div class="table-container"><div class="table-contents"><table id="w1460aac27c13c27"><thead>
                    <tr>
                        <th><b>문서_ID</b></th>
                        <th><b>본문_텍스트</b></th>
                        <th><b>소스_URI</b></th>
                    </tr>
                </thead>
                    <tr>
                        <td>1</td>
                        <td>로렘 입섬.</td>
                        <td>financial/1</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>로렘 입섬.</td>
                        <td>financial/2</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>로렘 입섬.</td>
                        <td>financial/3</td>
                    </tr>
                </table></div></div>
        <p>기본 조작이 적용된 후의 데이터.</p>
        <div class="table-container"><div class="table-contents"><table id="w1460aac27c13c31"><thead>
                    <tr>
                        <th><b>문서_ID</b></th>
                        <th><b>본문_텍스트</b></th>
                        <th><b>소스_URI</b></th>
                        <th><b>부서</b></th>
                    </tr>
                </thead>
                    <tr>
                        <td>1</td>
                        <td>로렘 입섬.</td>
                        <td>financial/1</td>
                        <td>재무</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>로렘 입섬.</td>
                        <td>financial/2</td>
                        <td>재무</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>로렘 입섬.</td>
                        <td>financial/3</td>
                        <td>재무</td>
                    </tr>
                </table></div></div>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>참고</h6></div><div class="awsdocs-note-text"><p>Amazon Kendra아직 인덱스 필드로 생성되지 않은 대상 문서 Avilable able able able able able able able able able able able able able able able able able able able able able able able able 인덱스 필드를 만든 후 를 사용하여 문서 필드를 생성할 수<code class="code">DocumentAttributeTarget</code> 있습니다. Amazon Kendra그런 다음 새로 생성된 문서 메타데이터 데이터를 인덱스 필드에 매핑합니다.</p></div></div>
        <p>다음 코드는 문서와 관련된 고객 식별 번호를 제거하도록 기본 데이터 조작을 구성하는 예제입니다.</p>
        <awsdocs-tabs><dl style="display: none">
            <dt>Console</dt><dd tab-id="console">
                    
                    <div class="procedure"><h6>기본 데이터 조작을 구성하여 고객 식별 번호를 제거하려면</h6><ol><li>
                            <p>왼쪽 탐색 창의 <b>색인에서</b> <b>문서 보강을 선택한 다음 문서</b> <b>보강 추가를</b> 선택합니다.</p>
                        </li><li>
                            <p><b>기본 작업 구성</b> 페이지의 드롭다운에서 문서 필드 및 콘텐츠를 변경하려는 데이터 원본을 선택합니다. 그런 다음 드롭다운에서 문서 필드 이름 'Customer_ID'를 선택하고 드롭다운에서 인덱스 필드 이름 'Customer_ID'를 선택한 다음 드롭다운에서 대상 작업 <b>삭제를</b> 선택합니다. 그런 다음 <b>기본 작업 추가를</b> 선택합니다.</p>
                        </li></ol></div>
                </dd>
            <dt>CLI</dt><dd tab-id="cli">
                    <p><b>기본 데이터 조작을 구성하여 고객 식별 번호를 제거하려면</b></p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws kendra create-data-source \
 --name <code class="replaceable">data-source-name</code> \
 --index-id <code class="replaceable">index-id</code> \
 --role-arn <code class="replaceable">arn:aws:iam::account-id:role/role-name</code> \
 --type S3 \
 --configuration '<span>{</span>"S3Configuration":<span>{</span>"BucketName":"<code class="replaceable">S3-bucket-name</code>"}}' \
 --custom-document-enrichment-configuration '<span>{</span>"InlineConfigurations":[<span>{</span>"Target":<span>{</span>"TargetDocumentAttributeKey":"Customer_ID", "TargetDocumentAttributeValueDeletion": true}}]}' 
</code></pre>
                </dd>
            <dt>Python</dt><dd tab-id="python">
                    <p><b>기본 데이터 조작을 구성하여 고객 식별 번호를 제거하려면</b></p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="python ">import boto3&#xD;
from botocore.exceptions import ClientError&#xD;
import pprint&#xD;
import time&#xD;
&#xD;
kendra = boto3.client("kendra")&#xD;
&#xD;
print("Create a data source with customizations")&#xD;
&#xD;
# Provide the name of the data source&#xD;
name = "data-source-name"&#xD;
# Provide the index ID for the data source&#xD;
index_id = "index-id"&#xD;
# Provide the IAM role ARN required for data sources&#xD;
role_arn = "arn:aws:iam::$<span>{</span>account-id}:role/$<span>{</span>role-name}"&#xD;
# Provide the data source connection information&#xD;
data_source_type = "S3"&#xD;
S3_bucket_name = "S3-bucket-name"&#xD;
# Configure the data source with Custom Document Enrichment&#xD;
configuration = <span>{</span>"S3Configuration":&#xD;
        <span>{</span>&#xD;
            "BucketName": S3_bucket_name&#xD;
        }&#xD;
    }&#xD;
custom_document_enrichment_configuration = <span>{</span>"InlineConfigurations":[&#xD;
        <span>{</span>&#xD;
            "Target":<span>{</span>"TargetDocumentAttributeKey":"Customer_ID",&#xD;
                       "TargetDocumentAttributeValueDeletion": True}&#xD;
        }]&#xD;
    }&#xD;
&#xD;
try:&#xD;
    data_source_response = kendra.create_data_source(&#xD;
        Name = name,&#xD;
        IndexId = index_id,&#xD;
        RoleArn = role_arn,&#xD;
        Type = data_source_type&#xD;
        Configuration = configuration&#xD;
        CustomDocumentEnrichmentConfiguration = custom_document_enrichment_configuration&#xD;
    )&#xD;
&#xD;
    pprint.pprint(data_source_response)&#xD;
&#xD;
    data_source_id = data_source_response["Id"]&#xD;
&#xD;
    print("Wait for Amazon Kendra to create the data source with your customizations.")&#xD;
&#xD;
    while True:&#xD;
        # Get the details of the data source, such as the status&#xD;
        data_source_description = kendra.describe_data_source(&#xD;
            Id = data_source_id,&#xD;
            IndexId = index_id&#xD;
        )&#xD;
        status = data_source_description["Status"]&#xD;
        print(" Creating data source. Status: "+status)&#xD;
        time.sleep(60)&#xD;
        if status != "CREATING":&#xD;
            break&#xD;
&#xD;
    print("Synchronize the data source.")&#xD;
&#xD;
    sync_response = kendra.start_data_source_sync_job(&#xD;
        Id = data_source_id,&#xD;
        IndexId = index_id&#xD;
    )&#xD;
&#xD;
    pprint.pprint(sync_response)&#xD;
&#xD;
    print("Wait for the data source to sync with the index.")&#xD;
&#xD;
    while True:&#xD;
&#xD;
        jobs = kendra.list_data_source_sync_jobs(&#xD;
            Id= data_source_id,&#xD;
            IndexId= index_id&#xD;
        )&#xD;
&#xD;
        # For this example, there should be one job&#xD;
        status = jobs["History"][0]["Status"]&#xD;
&#xD;
        print(" Syncing data source. Status: "+status)&#xD;
        time.sleep(60)&#xD;
        if status != "SYNCING":&#xD;
            break&#xD;
&#xD;
except  ClientError as e:&#xD;
        print("%s" % e)&#xD;
&#xD;
print("Program ends.")</code></pre>
                </dd>
            <dt>Java</dt><dd tab-id="java">
                    <p><b>기본 데이터 조작을 구성하여 고객 식별 번호를 제거하려면</b></p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="java ">package com.amazonaws.kendra;

import java.util.concurrent.TimeUnit;
import software.amazon.awssdk.services.kendra.KendraClient;
import software.amazon.awssdk.services.kendra.model.CreateDataSourceRequest;
import software.amazon.awssdk.services.kendra.model.CreateDataSourceResponse;
import software.amazon.awssdk.services.kendra.model.CreateIndexRequest;
import software.amazon.awssdk.services.kendra.model.CreateIndexResponse;
import software.amazon.awssdk.services.kendra.model.DataSourceConfiguration;
import software.amazon.awssdk.services.kendra.model.DataSourceStatus;
import software.amazon.awssdk.services.kendra.model.DataSourceSyncJob;
import software.amazon.awssdk.services.kendra.model.DataSourceSyncJobStatus;
import software.amazon.awssdk.services.kendra.model.DataSourceType;
import software.amazon.awssdk.services.kendra.model.DescribeDataSourceRequest;
import software.amazon.awssdk.services.kendra.model.DescribeDataSourceResponse;
import software.amazon.awssdk.services.kendra.model.DescribeIndexRequest;
import software.amazon.awssdk.services.kendra.model.DescribeIndexResponse;
import software.amazon.awssdk.services.kendra.model.IndexStatus;
import software.amazon.awssdk.services.kendra.model.ListDataSourceSyncJobsRequest;
import software.amazon.awssdk.services.kendra.model.ListDataSourceSyncJobsResponse;
import software.amazon.awssdk.services.kendra.model.S3DataSourceConfiguration;
import software.amazon.awssdk.services.kendra.model.StartDataSourceSyncJobRequest;
import software.amazon.awssdk.services.kendra.model.StartDataSourceSyncJobResponse;

public class CreateDataSourceWithCustomizationsExample <span>{</span>

    public static void main(String[] args) throws InterruptedException <span>{</span>
        System.out.println("Create a data source with customizations");
        
        String dataSourceName = "data-source-name";
        String indexId = "index-id";
        String dataSourceRoleArn = "arn:aws:iam::account-id:role/role-name";
        String s3BucketName = "S3-bucket-name"

        KendraClient kendra = KendraClient.builder().build();
        
        CreateDataSourceRequest createDataSourceRequest = CreateDataSourceRequest
            .builder()
            .name(dataSourceName)
            .description(experienceDescription)
            .roleArn(experienceRoleArn)
            .type(DataSourceType.S3)
            .configuration(
                DataSourceConfiguration
                    .builder()
                    .s3Configuration(
                        S3DataSourceConfiguration
                            .builder()
                            .bucketName(s3BucketName)
                            .build()
                    ).build()
            )
            .customDocumentEnrichmentConfiguration(
                CustomDocumentEnrichmentConfiguration
                    .builder()
                    .inlineConfigurations(Arrays.asList(
                        InlineCustomDocumentEnrichmentConfiguration
                            .builder()
                            .target(
                                DocumentAttributeTarget
                                    .builder()
                                    .targetDocumentAttributeKey("Customer_ID")
                                    .targetDocumentAttributeValueDeletion(true)
                                    .build())
                            .build()
                    )).build();
        
        CreateDataSourceResponse createDataSourceResponse = kendra.createDataSource(createDataSourceRequest);
        System.out.println(String.format("Response of creating data source: %s", createDataSourceResponse));

        String dataSourceId = createDataSourceResponse.id();
        System.out.println(String.format("Waiting for Kendra to create the data source %s", dataSourceId));
        DescribeDataSourceRequest describeDataSourceRequest = DescribeDataSourceRequest
            .builder()
            .indexId(indexId)
            .id(dataSourceId)
            .build();

        while (true) <span>{</span>
            DescribeDataSourceResponse describeDataSourceResponse = kendra.describeDataSource(describeDataSourceRequest);

            DataSourceStatus status = describeDataSourceResponse.status();
            System.out.println(String.format("Creating data source. Status: %s", status));
            TimeUnit.SECONDS.sleep(60);
            if (status != DataSourceStatus.CREATING) <span>{</span>
                break;
            }
        }

        System.out.println(String.format("Synchronize the data source %s", dataSourceId));
        StartDataSourceSyncJobRequest startDataSourceSyncJobRequest = StartDataSourceSyncJobRequest
            .builder()
            .indexId(indexId)
            .id(dataSourceId)
            .build();
        StartDataSourceSyncJobResponse startDataSourceSyncJobResponse = kendra.startDataSourceSyncJob(startDataSourceSyncJobRequest);
        System.out.println(String.format("Waiting for the data source to sync with the index %s for execution ID %s", indexId, startDataSourceSyncJobResponse.executionId()));

        // For this example, there should be one job
        ListDataSourceSyncJobsRequest listDataSourceSyncJobsRequest = ListDataSourceSyncJobsRequest
            .builder()
            .indexId(indexId)
            .id(dataSourceId)
            .build();

        while (true) <span>{</span>
            ListDataSourceSyncJobsResponse listDataSourceSyncJobsResponse = kendra.listDataSourceSyncJobs(listDataSourceSyncJobsRequest);
            DataSourceSyncJob job = listDataSourceSyncJobsResponse.history().get(0);
            System.out.println(String.format("Syncing data source. Status: %s", job.status()));

            TimeUnit.SECONDS.sleep(60);
            if (job.status() != DataSourceSyncJobStatus.SYNCING) <span>{</span>
                break;
            }

        }

        System.out.println("Data source creation with customizations is complete");
    }
}</code></pre>
                </dd>
        </dl></awsdocs-tabs>
     
        <h2 id="advanced-data-manipulation">Lambda 함수: 메타데이터 또는 콘텐츠 추출 및 변경</h2>
        <p>Lambda 함수를 사용하여 문서 필드와 콘텐츠를 조작할 수 있습니다. 이는 기본 로직을 넘어서서 고급 데이터 조작을 적용하려는 경우에 유용합니다. 예를 들어, 이미지에서 텍스트를 해석하고 각 이미지를 텍스트 문서로 취급하는 광학 문자 인식 (OCR) 을 사용할 수 있습니다. 또는 특정 시간대의 현재 날짜-시간을 검색하고 날짜 필드의 빈 값이 있는 곳에 날짜-시간을 삽입할 수도 있습니다.</p>
        <p>기본 로직을 먼저 적용한 다음 Lambda 함수를 사용하여 데이터를 추가로 조작하거나 그 반대의 경우도 마찬가지입니다. Lambbbbbbbbbda da valbbbbda Lambda</p>
        <p>Amazon KendraLambda 함수를 호출하여 처리 프로세스 중에 고급 데이터 조작을 의 일부로 적용할 수 <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_CustomDocumentEnrichmentConfiguration.html">CustomDocumentEnrichmentConfiguration</a>있습니다. Lambda 함수를 실행하고Amazon S3 버킷에 액세스하여 데이터 조작 결과를 저장할 권한이 포함된 역할을 지정합니다. <a href="https://docs.aws.amazon.com/kendra/latest/dg/iam-roles.html">IAM액세스 역할을</a> 참조하십시오.</p>
        <p>Amazon Kendra원본, 원시 문서 또는 구문 분석된 정형 문서 또는 구문 분석된 정형 문서 또는 구문 분석된 정형 문서 또는 구문 분석된 정형 문서 또는 구문 분석된 정형 문서 를 사용하여 원본 또는 원시 데이터를 가져와 데이터 조작을 적용하는 Lambda 함수를 구성할 수 <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_CustomDocumentEnrichmentConfiguration.html">PreExtractionHookConfiguration</a>있습니다. 또한 를 사용하여 구조화된 문서를 가져와 데이터 조작을 적용하는 Lambda 함수를 구성할 수 <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_CustomDocumentEnrichmentConfiguration.html">PostExtractionHookConfiguration</a>있습니다. Amazon Kendra문서 메타데이터와 텍스트를 추출하여 문서를 구조화합니다. Lambda 함수는 필수 요청 및 응답 구조를 따라야 합니다. 자세한 정보는 <a href="#cde-data-contracts-lambda">Lambda 함수에 대한 데이터 계약</a>을 참조하세요.</p>
        <p>콘솔에서 Lambda 함수를 구성하려면 인덱스를 선택한 다음 탐색 메뉴에서 <b>문서 강화를</b> 선택합니다. <b>Lambda 함수</b> 구성으로 이동하여 Lambda 함수를 구성합니다.</p>
        <p><code class="code">PreExtractionHookConfiguration</code>및 에는 Lambda 함수를 하나만 구성하고 에 대해서는 Lambda 함수를 하나만 구성할 수<code class="code">PostExtractionHookConfiguration</code> 있습니다. 그러나 Lambda val'이 필요한 다른 Lambbbbbbbbbda alval 둘 다<code class="code">PostExtractionHookConfiguration</code> 구성하거나 둘<code class="code">PreExtractionHookConfiguration</code> 중 하나를 구성할 수 있습니다. 의 Lambda 함수는 실행 시간 5분을 초과할 수 없으며 에 대한 Lambda 함수는 실행 시간 1분을<code class="code">PostExtractionHookConfiguration</code> 초과해서는 안 됩니다.<code class="code">PreExtractionHookConfiguration</code> 사용자 지정 문서 보강을 구성하면 구성하지 않을Amazon Kendra 때보다 당연히 문서를 인제스트하는 데 시간이 더 오래 걸립니다.</p>
        <p>조건이 충족되는 경우에만 Lambda 함수를Amazon Kendra 호출하도록 구성할 수 있습니다. 예를 들어, 빈 날짜/시간 값이 있는 경우 현재 날짜/시간 값을 삽입하는 함수를Amazon Kendra 호출해야 한다는 조건을 지정할 수 있습니다.</p>
        <p>다음은 Lambda 함수를 사용하여 OCR을 실행하여 이미지에서 텍스트를 해석하고 이 텍스트를 'Document_Image_Text'라는 필드에 저장하는 예제입니다.</p>
        <p><b>예 1: 이미지에서 텍스트를 추출하여 텍스트 문서 만들기</b></p>
        <p>고급 조작이 적용되기 전의 데이터입니다.</p>
        <div class="table-container"><div class="table-contents"><table id="w1460aac27c15c23"><thead>
                    <tr>
                        <th><b>문서_ID</b></th>
                        <th><b>문서_이미지</b></th>
                    </tr>
                </thead>
                    <tr>
                        <td>1</td>
                        <td>image_1.png</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>image_2.png</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>image_3.png</td>
                    </tr>
                </table></div></div>
        <p>고급 조작이 적용된 후의 데이터.</p>
        <div class="table-container"><div class="table-contents"><table id="w1460aac27c15c27"><thead>
                    <tr>
                        <th><b>문서_ID</b></th>
                        <th><b>문서_이미지</b></th>
                        <th><b>문서_이미지_텍스트</b></th>
                    </tr>
                </thead>
                    <tr>
                        <td>1</td>
                        <td>image_1.png</td>
                        <td>우편으로 발송된 설문조사 응답</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>image_2.png</td>
                        <td>우편으로 발송된 설문조사 응답</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>image_3.png</td>
                        <td>우편으로 발송된 설문조사 응답</td>
                    </tr>
                </table></div></div>
        <p>다음은 Lambda 함수를 사용하여 빈 날짜 값에 현재 날짜-시간을 삽입하는 예제입니다. 날짜 필드 값이 'null'인 경우 이를 현재 날짜-시간으로 대체하는 조건을 사용합니다.</p>
        <p><b>예 2: Last_Updated 필드의 빈 값을 현재 날짜-시간으로 바꾸기</b></p>
        <p>고급 조작이 적용되기 전의 데이터입니다.</p>
        <div class="table-container"><div class="table-contents"><table id="w1460aac27c15c35"><thead>
                    <tr>
                        <th><b>문서_ID</b></th>
                        <th><b>본문_텍스트</b></th>
                        <th><b>최근_업데이트</b></th>
                    </tr>
                </thead>
                    <tr>
                        <td>1</td>
                        <td>로렘 입섬.</td>
                        <td>2020년 1월 1일</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>로렘 입섬.</td>
                        <td> </td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>로렘 입섬.</td>
                        <td>2020년 7월 1일</td>
                    </tr>
                </table></div></div>
        <p>고급 조작이 적용된 후의 데이터.</p>
        <div class="table-container"><div class="table-contents"><table id="w1460aac27c15c39"><thead>
                    <tr>
                        <th><b>문서_ID</b></th>
                        <th><b>본문_텍스트</b></th>
                        <th><b>최근_업데이트</b></th>
                    </tr>
                </thead>
                    <tr>
                        <td>1</td>
                        <td>로렘 입섬.</td>
                        <td>2020년 1월 1일</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>로렘 입섬.</td>
                        <td>2021년 12월 1일</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>로렘 입섬.</td>
                        <td>2020년 7월 1일</td>
                    </tr>
                </table></div></div>
        <p>다음 코드는 원본 원시 데이터에 대한 고급 데이터 조작을 위해 Lambda 함수를 구성하는 예제입니다.</p>
        <awsdocs-tabs><dl style="display: none">
            <dt>Console</dt><dd tab-id="console">
                    
                    <div class="procedure"><h6>원본 원시 데이터에 대한 고급 데이터 조작을 위한 Lambda 함수를 구성하려면</h6><ol><li>
                            <p>왼쪽 탐색 창의 <b>색인에서</b> <b>문서 보강을 선택한 다음 문서</b> <b>보강 추가를</b> 선택합니다.</p>
                        </li><li>
                            <p><b>Lambda 함수 구성</b> 페이지의 <b>사전 추출을 위한 Lambda</b> 섹션의 드롭다운 목록에서 Lambda 함수 ARN과Amazon S3 버킷을 선택합니다. 드롭다운에서 새 역할을 생성하는 옵션을 선택하여IAM 액세스 역할을 추가합니다. 이렇게 하면 문서 보강을 만드는 데 필요한Amazon Kendra 권한이 생성됩니다.</p>
                        </li></ol></div>
                </dd>
            <dt>CLI</dt><dd tab-id="cli">
                    <p><b>원본 원시 데이터에 대한 고급 데이터 조작을 위한 Lambda 함수를 구성하려면</b></p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws kendra create-data-source \
 --name <code class="replaceable">data-source-name</code> \
 --index-id <code class="replaceable">index-id</code> \
 --role-arn <code class="replaceable">arn:aws:iam::account-id:role/role-name</code> \
 --type S3 \
 --configuration '<span>{</span>"S3Configuration":<span>{</span>"BucketName":"<code class="replaceable">S3-bucket-name</code>"}}' \
 --custom-document-enrichment-configuration '<span>{</span>"PreExtractionHookConfiguration":<span>{</span>"LambdaArn":"<code class="replaceable">arn:aws:iam::account-id:function/function-name</code>", "S3Bucket":"<code class="replaceable">S3-bucket-name</code>"}, "RoleArn": "<code class="replaceable">arn:aws:iam:account-id:role/cde-role-name</code>"}'
</code></pre>
                </dd>
            <dt>Python</dt><dd tab-id="python">
                    <p><b>원본 원시 데이터에 대한 고급 데이터 조작을 위한 Lambda 함수를 구성하려면</b></p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="python ">import boto3&#xD;
from botocore.exceptions import ClientError&#xD;
import pprint&#xD;
import time&#xD;
&#xD;
kendra = boto3.client("kendra")&#xD;
&#xD;
print("Create a data source with customizations.")&#xD;
&#xD;
# Provide the name of the data source&#xD;
name = "data-source-name"&#xD;
# Provide the index ID for the data source&#xD;
index_id = "index-id"&#xD;
# Provide the IAM role ARN required for data sources&#xD;
role_arn = "arn:aws:iam::$<span>{</span>account-id}:role/$<span>{</span>role-name}"&#xD;
# Provide the data source connection information&#xD;
data_source_type = "S3"&#xD;
S3_bucket_name = "S3-bucket-name"&#xD;
# Configure the data source with Custom Document Enrichment&#xD;
configuration = <span>{</span>"S3Configuration":&#xD;
        <span>{</span>&#xD;
            "BucketName": S3_bucket_name&#xD;
        }&#xD;
    }&#xD;
custom_document_enrichment_configuration = <span>{</span>"PreExtractionHookConfiguration":&#xD;
        <span>{</span>&#xD;
            "LambdaArn":"arn:aws:iam::account-id:function/function-name",&#xD;
            "S3Bucket":"S3-bucket-name"&#xD;
        }&#xD;
    "RoleArn":"arn:aws:iam::account-id:role/cde-role-name"&#xD;
    }&#xD;
&#xD;
try:&#xD;
    data_source_response = kendra.create_data_source(&#xD;
        Name = name,&#xD;
        IndexId = index_id,&#xD;
        RoleArn = role_arn,&#xD;
        Type = data_source_type&#xD;
        Configuration = configuration&#xD;
        CustomDocumentEnrichmentConfiguration = custom_document_enrichment_configuration&#xD;
    )&#xD;
&#xD;
    pprint.pprint(data_source_response)&#xD;
&#xD;
    data_source_id = data_source_response["Id"]&#xD;
&#xD;
    print("Wait for Amazon Kendra to create the data source with your customizations.")&#xD;
&#xD;
    while True:&#xD;
        # Get the details of the data source, such as the status&#xD;
        data_source_description = kendra.describe_data_source(&#xD;
            Id = data_source_id,&#xD;
            IndexId = index_id&#xD;
        )&#xD;
        status = data_source_description["Status"]&#xD;
        print(" Creating data source. Status: "+status)&#xD;
        time.sleep(60)&#xD;
        if status != "CREATING":&#xD;
            break&#xD;
&#xD;
    print("Synchronize the data source.")&#xD;
&#xD;
    sync_response = kendra.start_data_source_sync_job(&#xD;
        Id = data_source_id,&#xD;
        IndexId = index_id&#xD;
    )&#xD;
&#xD;
    pprint.pprint(sync_response)&#xD;
&#xD;
    print("Wait for the data source to sync with the index.")&#xD;
&#xD;
    while True:&#xD;
&#xD;
        jobs = kendra.list_data_source_sync_jobs(&#xD;
            Id = data_source_id,&#xD;
            IndexId = index_id&#xD;
        )&#xD;
&#xD;
        # For this example, there should be one job&#xD;
        status = jobs["History"][0]["Status"]&#xD;
&#xD;
        print(" Syncing data source. Status: "+status)&#xD;
        time.sleep(60)&#xD;
        if status != "SYNCING":&#xD;
            break&#xD;
&#xD;
except  ClientError as e:&#xD;
        print("%s" % e)&#xD;
&#xD;
print("Program ends.")&#xD;
</code></pre>
                </dd>
            <dt>Java</dt><dd tab-id="java">
                    <p><b>원본 원시 데이터에 대한 고급 데이터 조작을 위한 Lambda 함수를 구성하려면</b></p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="java ">package com.amazonaws.kendra;

import java.util.concurrent.TimeUnit;
import software.amazon.awssdk.services.kendra.KendraClient;
import software.amazon.awssdk.services.kendra.model.CreateDataSourceRequest;
import software.amazon.awssdk.services.kendra.model.CreateDataSourceResponse;
import software.amazon.awssdk.services.kendra.model.CreateIndexRequest;
import software.amazon.awssdk.services.kendra.model.CreateIndexResponse;
import software.amazon.awssdk.services.kendra.model.DataSourceConfiguration;
import software.amazon.awssdk.services.kendra.model.DataSourceStatus;
import software.amazon.awssdk.services.kendra.model.DataSourceSyncJob;
import software.amazon.awssdk.services.kendra.model.DataSourceSyncJobStatus;
import software.amazon.awssdk.services.kendra.model.DataSourceType;
import software.amazon.awssdk.services.kendra.model.DescribeDataSourceRequest;
import software.amazon.awssdk.services.kendra.model.DescribeDataSourceResponse;
import software.amazon.awssdk.services.kendra.model.DescribeIndexRequest;
import software.amazon.awssdk.services.kendra.model.DescribeIndexResponse;
import software.amazon.awssdk.services.kendra.model.IndexStatus;
import software.amazon.awssdk.services.kendra.model.ListDataSourceSyncJobsRequest;
import software.amazon.awssdk.services.kendra.model.ListDataSourceSyncJobsResponse;
import software.amazon.awssdk.services.kendra.model.S3DataSourceConfiguration;
import software.amazon.awssdk.services.kendra.model.StartDataSourceSyncJobRequest;
import software.amazon.awssdk.services.kendra.model.StartDataSourceSyncJobResponse;


public class CreateDataSourceWithCustomizationsExample <span>{</span>

    public static void main(String[] args) throws InterruptedException <span>{</span>
        System.out.println("Create a data source with customizations");
        
        String dataSourceName = "data-source-name";
        String indexId = "index-id";
        String dataSourceRoleArn = "arn:aws:iam::account-id:role/role-name";
        String s3BucketName = "S3-bucket-name"

        KendraClient kendra = KendraClient.builder().build();
        
        CreateDataSourceRequest createDataSourceRequest = CreateDataSourceRequest
            .builder()
            .name(dataSourceName)
            .description(experienceDescription)
            .roleArn(experienceRoleArn)
            .type(DataSourceType.S3)
            .configuration(
                DataSourceConfiguration
                    .builder()
                    .s3Configuration(
                        S3DataSourceConfiguration
                            .builder()
                            .bucketName(s3BucketName)
                            .build()
                    ).build()
            )
            .customDocumentEnrichmentConfiguration(
                CustomDocumentEnrichmentConfiguration
                    .builder()
                    .preExtractionHookConfiguration(
                        HookConfiguration
                            .builder()
                            .lambdaArn("arn:aws:iam::account-id:function/function-name")
                            .s3Bucket("S3-bucket-name")
                            .build())
                    .roleArn("arn:aws:iam::account-id:role/cde-role-name")
                    .build();
        
        CreateDataSourceResponse createDataSourceResponse = kendra.createDataSource(createDataSourceRequest);
        System.out.println(String.format("Response of creating data source: %s", createDataSourceResponse));

        String dataSourceId = createDataSourceResponse.id();
        System.out.println(String.format("Waiting for Kendra to create the data source %s", dataSourceId));
        DescribeDataSourceRequest describeDataSourceRequest = DescribeDataSourceRequest
            .builder()
            .indexId(indexId)
            .id(dataSourceId)
            .build();

        while (true) <span>{</span>
            DescribeDataSourceResponse describeDataSourceResponse = kendra.describeDataSource(describeDataSourceRequest);

            DataSourceStatus status = describeDataSourceResponse.status();
            System.out.println(String.format("Creating data source. Status: %s", status));
            TimeUnit.SECONDS.sleep(60);
            if (status != DataSourceStatus.CREATING) <span>{</span>
                break;
            }
        }

        System.out.println(String.format("Synchronize the data source %s", dataSourceId));
        StartDataSourceSyncJobRequest startDataSourceSyncJobRequest = StartDataSourceSyncJobRequest
            .builder()
            .indexId(indexId)
            .id(dataSourceId)
            .build();
        StartDataSourceSyncJobResponse startDataSourceSyncJobResponse = kendra.startDataSourceSyncJob(startDataSourceSyncJobRequest);
        System.out.println(String.format("Waiting for the data source to sync with the index %s for execution ID %s", indexId, startDataSourceSyncJobResponse.executionId()));

        // For this example, there should be one job
        ListDataSourceSyncJobsRequest listDataSourceSyncJobsRequest = ListDataSourceSyncJobsRequest
            .builder()
            .indexId(indexId)
            .id(dataSourceId)
            .build();

        while (true) <span>{</span>
            ListDataSourceSyncJobsResponse listDataSourceSyncJobsResponse = kendra.listDataSourceSyncJobs(listDataSourceSyncJobsRequest);
            DataSourceSyncJob job = listDataSourceSyncJobsResponse.history().get(0);
            System.out.println(String.format("Syncing data source. Status: %s", job.status()));

            TimeUnit.SECONDS.sleep(60);
            if (job.status() != DataSourceSyncJobStatus.SYNCING) <span>{</span>
                break;
            }

        }

        System.out.println("Data source creation with customizations is complete");
    }
}</code></pre>
                </dd>
        </dl></awsdocs-tabs>
     
        <h2 id="cde-data-contracts-lambda">Lambda 함수에 대한 데이터 계약</h2>
        <p>고급 데이터 조작을 위한 Lambda 함수는Amazon Kendra 데이터 계약과 상호 작용합니다. 계약은 Lambda 함수의 필수 요청 및 응답 구조입니다. Lambda 함수가 이러한 구조를 따르지 않는 경우Amazon Kendra 오류가 발생합니다.</p>
        <p>의 Lambda 함수에는<code class="code">PreExtractionHookConfiguration</code> 다음과 같은 요청 구조가 필요합니다.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "version": &lt;str&gt;,
    "dataBlobStringEncodedInBase64": &lt;str&gt;, //In the case of a data blob
    "s3Bucket": &lt;str&gt;, //In the case of an S3 bucket
    "s3ObjectKey": &lt;str&gt;, //In the case of an S3 bucket
    "metadata": &lt;Metadata&gt;
}</code></pre>
        <p><code class="code">metadata</code>구조를 포함하는<code class="code">CustomerDocumentAttribute</code> 구조는 다음과 같습니다.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "attributes": [&lt;CustomerDocumentAttribute&lt;]
}

CustomerDocumentAttribute
<span>{</span>
    "name": &lt;str&gt;,
    "value": &lt;CustomerDocumentAttributeValue&gt;
}

CustomerDocumentAttributeValue
<span>{</span>
    "stringValue": &lt;str&gt;,
    "integerValue": &lt;int&gt;,
    "longValue": &lt;long&gt;,
    "stringListValue": list&lt;str&gt;,
    "dateValue": &lt;str&gt;
}</code></pre>
        <p>의 Lambda 함수는 다음 응답 구조를<code class="code">PreExtractionHookConfiguration</code> 준수해야 합니다.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "version": &lt;str&gt;,
    "dataBlobStringEncodedInBase64": &lt;str&gt;, //In the case of a data blob
    "s3ObjectKey": &lt;str&gt;, //In the case of an S3 bucket
    "metadataUpdates": [&lt;CustomDocumentAttribute&gt;]
}</code></pre>
        <p>의 Lambda 함수에는<code class="code">PostExtractionHookConfiguration</code> 다음과 같은 요청 구조가 필요합니다.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "version": &lt;str&gt;,
    "s3Bucket": &lt;str&gt;,
    "s3ObjectKey": &lt;str&gt;,
    "metadata": &lt;Metadata&gt;
}</code></pre>
        <p>의 Lambda 함수는 다음 응답 구조를<code class="code">PostExtractionHookConfiguration</code> 준수해야 합니다.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">PostExtractionHookConfiguration Lambda Response
<span>{</span>
    "version": &lt;str&gt;,
    "s3ObjectKey": &lt;str&gt;,
    "metadataUpdates": [&lt;CustomDocumentAttribute&gt;]
}</code></pre>
        <p>변경된 문서가Amazon S3 버킷에 업로드됩니다. 변경된 문서는 에 표시된 형식을 따라야<a href="#structured-document-format">구조화된 문서 형식</a> 합니다.</p>
         
            <h3 id="structured-document-format">구조화된 문서 형식</h3>
            <p>Amazon Kendra구조화된 문서를 지정된Amazon S3 버킷에 업로드합니다. 구조화된 문서는 다음 형식을 따릅니다.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">Kendra document

<span>{</span>
   "textContent": &lt;TextContent&gt;
}

TextContent
<span>{</span>
  "documentBodyText": &lt;str&gt;
}</code></pre>
         
         
            <h3 id="example-lambda-function-advanced-manipulation">데이터 계약을 준수하는 Lambda 함수의 예</h3>
            <p>다음 Python 코드는 원시 문서나 원본 문서의 메타데이터 필드<code class="code">_authors</code> 및 본문 콘텐츠에 대한 고급 조작을 적용하는 Lambda 함수의 예입니다.<code class="code">_document_title</code></p>
            <p><b>본문 내용물이Amazon S3 버킷에 있는 경우</b></p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="python ">import json&#xD;
import boto3&#xD;
     &#xD;
s3 = boto3.client("s3")&#xD;
&#xD;
# Lambda function for advanced data manipulation    &#xD;
def lambda_handler(event, context):&#xD;
    # Get the value of "S3Bucket" key name or item from the given event input&#xD;
    s3_bucket = event.get("s3Bucket")&#xD;
    # Get the value of "S3ObjectKey" key name or item from the given event input&#xD;
    s3_object_key = event.get("s3ObjectKey")&#xD;
    &#xD;
    content_object_before_CDE = s3.get_object(Bucket = s3_bucket, Key = s3_object_key)&#xD;
    content_before_CDE = content_object_before_CDE["Body"].read().decode("utf-8");&#xD;
    content_after_CDE = "CDEInvolved " + content_before_CDE&#xD;
    &#xD;
    # Get the value of "metadata" key name or item from the given event input&#xD;
    metadata = event.get("metadata")&#xD;
    # Get the document "attributes" from the metadata &#xD;
    document_attributes = metadata.get("attributes")&#xD;
    &#xD;
    s3.put_object(Bucket = s3_bucket, Key = "dummy_updated_kendra_document", Body=json.dumps(content_after_CDE))&#xD;
    return <span>{</span>&#xD;
        "version": "v0",&#xD;
        "s3ObjectKey": "dummy_updated_kendra_document",&#xD;
        "metadataUpdates": [&#xD;
            <span>{</span>"name":"_document_title", "value":<span>{</span>"stringValue":"title_from_pre_extraction_lambda"}},&#xD;
            <span>{</span>"name":"_authors", "value":<span>{</span>"stringListValue":["author1", "author2"]}}&#xD;
        ]&#xD;
    }</code></pre>
            <p><b>데이터 블롭에 있는 본문 콘텐츠의 경우</b></p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="python ">import json&#xD;
import boto3&#xD;
import base64&#xD;
&#xD;
# Lambda function for advanced data manipulation&#xD;
def lambda_handler(event, context):&#xD;
    &#xD;
    # Get the value of "dataBlobStringEncodedInBase64" key name or item from the given event input &#xD;
    data_blob_string_encoded_in_base64 = event.get("dataBlobStringEncodedInBase64")&#xD;
    # Decode the data blob string in UTF-8&#xD;
    data_blob_string = base64.b64decode(data_blob_string_encoded_in_base64).decode("utf-8")&#xD;
    # Get the value of "metadata" key name or item from the given event input    &#xD;
    metadata = event.get("metadata")&#xD;
    # Get the document "attributes" from the metadata&#xD;
    document_attributes = metadata.get("attributes")&#xD;
    &#xD;
    new_data_blob = "This should be the modified data in the document by pre processing lambda ".encode("utf-8")&#xD;
    return <span>{</span>&#xD;
        "version": "v0",&#xD;
        "dataBlobStringEncodedInBase64": base64.b64encode(new_data_blob).decode("utf-8"),&#xD;
        "metadataUpdates": [&#xD;
            <span>{</span>"name":"_document_title", "value":<span>{</span>"stringValue":"title_from_pre_extraction_lambda"}},&#xD;
            <span>{</span>"name":"_authors", "value":<span>{</span>"stringListValue":["author1", "author2"]}}&#xD;
        ]&#xD;
    }</code></pre>
            <p>다음 Python 코드는 구조화되거나 파싱된 문서의 메타데이터 필드<code class="code">_authors</code> 및 본문 콘텐츠에 대한 고급 조작을 적용하는 Lambda 함수의 예입니다.<code class="code">_document_title</code></p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="python ">import json&#xD;
import boto3&#xD;
import time&#xD;
&#xD;
s3 = boto3.client("s3")&#xD;
&#xD;
# Lambda function for advanced data manipulation&#xD;
def lambda_handler(event, context):&#xD;
    &#xD;
    # Get the value of "S3Bucket" key name or item from the given event input&#xD;
    s3_bucket = event.get("s3Bucket")&#xD;
    # Get the value of "S3ObjectKey" key name or item from the given event input&#xD;
    s3_key = event.get("s3ObjectKey")&#xD;
    # Get the value of "metadata" key name or item from the given event input&#xD;
    metadata = event.get("metadata")&#xD;
    # Get the document "attributes" from the metadata &#xD;
    document_attributes = metadata.get("attributes")&#xD;
    &#xD;
    kendra_document_object = s3.get_object(Bucket = s3_bucket, Key = s3_key)&#xD;
    kendra_document_string = kendra_document_object['Body'].read().decode('utf-8')&#xD;
    kendra_document = json.loads(kendra_document_string)&#xD;
    kendra_document["textContent"]["documentBodyText"] = "Changing document body to a short sentence."&#xD;
    &#xD;
    s3.put_object(Bucket = s3_bucket, Key = "dummy_updated_kendra_document", Body=json.dumps(kendra_document))&#xD;
&#xD;
    return <span>{</span>&#xD;
        "version" : "v0",&#xD;
        "s3ObjectKey": "dummy_updated_kendra_document",&#xD;
        "metadataUpdates": [&#xD;
            <span>{</span>"name": "_document_title", "value":<span>{</span>"stringValue": "title_from_post_extraction_lambda"}},&#xD;
            <span>{</span>"name": "_authors", "value":<span>{</span>"stringListValue":["author1", "author2"]}}&#xD;
        ]&#xD;
    }</code></pre>
         
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="주의" /> <strong>javascript가 브라우저에서 비활성화되거나 사용이 불가합니다.</strong></p><p>AWS 설명서를 사용하려면 Javascript가 활성화되어야 합니다. 지침을 보려면 브라우저의 도움말 페이지를 참조하십시오.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">문서 규칙</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./delete-data-source.html">데이터 원본 삭제</div><div id="next" class="next-link" accesskey="n" href="./searching.html">색인 검색</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">이 페이지의 내용이 도움이 되었습니까? - 예</div><div class="content"><p>칭찬해 주셔서 감사합니다!</p><p>잠깐 시간을 내어 좋았던 부분을 알려 주시면 더 열심히 만들어 보겠습니다.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="feedback-tell-us" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Kendra&amp;topic_url=https://docs.aws.amazon.com/ko_kr/kendra/latest/dg/custom-document-enrichment.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">이 페이지의 내용이 도움이 되었습니까? - 아니요</div><div class="content"><p>이 페이지에 작업이 필요하다는 점을 알려 주셔서 감사합니다. 실망시켜 드려 죄송합니다.</p><p>잠깐 시간을 내어 설명서를 향상시킬 수 있는 방법에 대해 말씀해 주십시오.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="feedback-tell-us" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Kendra&amp;topic_url=https://docs.aws.amazon.com/ko_kr/kendra/latest/dg/custom-document-enrichment.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>