<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Using Service-Linked Roles for AWS Compute Optimizer - AWS Compute Optimizer</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="using-service-linked-roles" /><meta name="default_state" content="using-service-linked-roles" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/compute-optimizer/latest/ug/using-service-linked-roles.html" /><meta name="description" content="Learn how to use service-linked roles to give AWS Compute Optimizer access to resources in your AWS account." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS Compute Optimizer" /><meta name="guide" content="User Guide" /><meta name="abstract" content="This is Amazon Web Services (AWS) documentation for AWS Compute Optimizer. This User Guide describes Compute Optimizer concepts, and provides instructions on using the various features with both the console and the command line interface." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/compute-optimizer/latest/ug/using-service-linked-roles.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/compute-optimizer/latest/ug/using-service-linked-roles.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/compute-optimizer/latest/ug/using-service-linked-roles.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/compute-optimizer/latest/ug/using-service-linked-roles.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/compute-optimizer/latest/ug/using-service-linked-roles.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/compute-optimizer/latest/ug/using-service-linked-roles.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/compute-optimizer/latest/ug/using-service-linked-roles.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/compute-optimizer/latest/ug/using-service-linked-roles.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/compute-optimizer/latest/ug/using-service-linked-roles.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/compute-optimizer/latest/ug/using-service-linked-roles.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/compute-optimizer/latest/ug/using-service-linked-roles.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/compute-optimizer/latest/ug/using-service-linked-roles.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/compute-optimizer/latest/ug/using-service-linked-roles.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/compute-optimizer/latest/ug/using-service-linked-roles.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/compute-optimizer/latest/ug/using-service-linked-roles.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/compute-optimizer/latest/ug/using-service-linked-roles.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/compute-optimizer/latest/ug/using-service-linked-roles.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/compute-optimizer/latest/ug/using-service-linked-roles.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/compute-optimizer/latest/ug/using-service-linked-roles.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/compute-optimizer/latest/ug/using-service-linked-roles.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/compute-optimizer/latest/ug/using-service-linked-roles.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/compute-optimizer/latest/ug/using-service-linked-roles.html" hreflang="x-default" /><meta name="feedback-item" content="Compute Optimizer" /><meta name="this_doc_product" content="AWS Compute Optimizer" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'compute-optimizer'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="Using Service-Linked Roles for AWS Compute Optimizer" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Using Service-Linked Roles for AWS Compute Optimizer - AWS Compute Optimizer</title><meta name="pdf" content="/pdfs/compute-optimizer/latest/ug/compute-optimizer.pdf#using-service-linked-roles" /><meta name="rss" content="compute-optimizer.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=30" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Compute%20Optimizer&amp;topic_url=http://docs.aws.amazon.com/en_us/compute-optimizer/latest/ug/using-service-linked-roles.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/compute-optimizer/latest/ug/using-service-linked-roles.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/compute-optimizer/latest/ug/using-service-linked-roles.html" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS Compute Optimizer",
        "item" : "https://docs.aws.amazon.com/compute-optimizer/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/compute-optimizer/latest/ug"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Getting started with AWS Compute Optimizer",
        "item" : "https://docs.aws.amazon.com/compute-optimizer/latest/ug/getting-started.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Using Service-Linked Roles for AWS Compute Optimizer",
        "item" : "https://docs.aws.amazon.com/compute-optimizer/latest/ug/getting-started.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/compute-optimizer/latest/ug/compute-optimizer.pdf#using-service-linked-roles" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/compute-optimizer/index.html">AWS Compute Optimizer</a><a href="what-is-compute-optimizer.html">User Guide</a></div><div id="page-toc-src"><a href="#slr-permissions">Service-Linked Role permissions for Compute Optimizer</a><a href="#service-linked-role-permissions">Service-Linked Role permissions</a><a href="#create-slr">Creating a Service-Linked Role for Compute Optimizer</a><a href="#edit-slr">Editing a Service-Linked Role for Compute Optimizer</a><a href="#delete-slr">Deleting a Service-Linked Role for Compute Optimizer</a><a href="#slr-regions">Supported Regions for Compute Optimizer Service-Linked Roles</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="using-service-linked-roles">Using Service-Linked Roles for AWS Compute Optimizer</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>AWS Compute Optimizer uses AWS Identity and Access Management (IAM)<a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-linked-role">service-linked roles</a>. 
    A service-linked role is a unique type of IAM role
    that's
    linked directly to Compute Optimizer. Service-linked roles are predefined by Compute Optimizer and
    include all of the permissions that the service requires to call other
    on your behalf. </p><p>With a service-linked role,setting
    up Compute Optimizer
    doesn't
    require manually
    adding
    the necessary permissions. Compute Optimizer defines the permissions of its service-linked roles,
    and unless defined otherwise, only Compute Optimizer can assume its roles. The defined permissions
    include the trust policy and the permissions policy, and that permissions policy cannot be
    attached to any other IAM entity.</p><p>For information about other services that support service-linked roles, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_aws-services-that-work-with-iam.html">AWS Services That Work with IAM</a> and look for the services that have <b>Yes </b> in the <b>Service-Linked Role</b> column. Choose a
      <b>Yes</b> with a link to view the service-linked role documentation
    for that service.</p>
    <h2 id="slr-permissions">Service-Linked Role permissions for Compute Optimizer</h2>
    <p>Compute Optimizer uses the service-linked role that's named <b>AWSServiceRoleForComputeOptimizer</b> to
      access Amazon CloudWatch metrics for AWS resources in the account.</p>
    <p>The AWSServiceRoleForComputeOptimizer service-linked role trusts the following services to assume the
      role:</p>
    <div class="itemizedlist">
       
    <ul class="itemizedlist"><li class="listitem">
        <p><code class="code">compute-optimizer.amazonaws.com</code></p>
      </li></ul></div>
    <p>The role permissions policy allows Compute Optimizer to complete the following actions on the
      specified resources:</p>
    <div class="itemizedlist">
       
       
       
       
       
    <ul class="itemizedlist"><li class="listitem">
        <p>Action: <code class="code">cloudwatch:GetMetricData</code> on all AWS resources.</p>
      </li><li class="listitem">
        <p>Action: <code class="code">organizations:DescribeOrganization</code> on all AWS resources.</p>
      </li><li class="listitem">
        <p>Action: <code class="code">organizations:ListAccounts</code> on all AWS resources.</p>
      </li><li class="listitem">
        <p>Action: <code class="code">organizations:ListAWSServiceAccessForOrganization</code> on all AWS
          resources.</p>
      </li><li class="listitem">
          <p>Action: <code class="code">organizations:ListDelegatedAdministrators</code> on all AWS
            resources.</p>
      </li></ul></div>
   
    <h2 id="service-linked-role-permissions">Service-Linked Role permissions</h2>
    <p>To create a service-linked role for Compute Optimizer, configure permissions to allow an IAM
      entity (such as a user, group, or role) to create the service-linked role. For more
      information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/using-service-linked-roles.html#service-linked-role-permissions">Service-Linked Role Permissions</a> in the
      <em>IAM User Guide</em>.</p>
    <p><b>To allow an IAM entity to create a specific service-linked role for
        Compute Optimizer</b></p>
    <p>Add the following policy to the IAM entity that needs to create the service-linked
      role.</p>
    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": "iam:CreateServiceLinkedRole",
            "Resource": "arn:aws:iam::*:role/aws-service-role/compute-optimizer.amazonaws.com/AWSServiceRoleForComputeOptimizer*",
            "Condition": <span>{</span>"StringLike": <span>{</span>"iam:AWSServiceName": "compute-optimizer.amazonaws.com"}}
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": "iam:PutRolePolicy",
            "Resource": "arn:aws:iam::*:role/aws-service-role/compute-optimizer.amazonaws.com/AWSServiceRoleForComputeOptimizer"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": "compute-optimizer:UpdateEnrollmentStatus",
            "Resource": "*"
        }
    ]
}</code></pre>
    
    <p><b>To allow an IAM entity to create any service-linked
        role</b></p>
    <p>Add the following statement to the permissions policy for the IAM entity that needs to
      create a service-linked role, or any service role that includes the needed policies. This
      policy attaches a policy to the role.</p>


    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Effect": "Allow",
    "Action": "iam:CreateServiceLinkedRole",
    "Resource": "arn:aws:iam::*:role/aws-service-role/*"
}</code></pre>
    
   
    <h2 id="create-slr">Creating a Service-Linked Role for Compute Optimizer</h2>
    <p>You don't need to manually create a service-linked role. When you
      opt in to the Compute Optimizer service in the AWS Management Console, the AWS CLI, or the AWS API, Compute Optimizer creates
      the service-linked role for you. </p>
    <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>If you completed an action in another service that uses the features supported by the service-linked
        role, the role can appear in your
        account. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/troubleshoot_roles.html#troubleshoot_roles_new-role-appeared">A
          New Role Appeared in My IAM Account</a>.</p></div></div>
    <p>If you
      delete this service-linked role, and then need to create it again,
      you can use the same process to recreate the role in your account. When you
      opt in to the Compute Optimizer service, Compute Optimizer creates the service-linked role for you again.
    </p>
   
    <h2 id="edit-slr">Editing a Service-Linked Role for Compute Optimizer</h2>
    
    <p>Compute Optimizer
      doesn't
      allow you to edit the AWSServiceRoleForComputeOptimizer service-linked role. After you create a service-linked role,
      you
      can't
      change the name of the role because various entities might reference the role. However, you
      can edit the description of the role using IAM. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/using-service-linked-roles.html#edit-service-linked-role">Editing
        a Service-Linked Role</a> in the <em>IAM User Guide</em>.</p>
   
    <h2 id="delete-slr">Deleting a Service-Linked Role for Compute Optimizer</h2>
    
    <p>We recommend that,
      if
      you no longer need to use Compute Optimizer, you delete the AWSServiceRoleForComputeOptimizer service-linked
      role.
      That
      way
      you donâ€™t have an unused entity
      that's
      not actively monitored or maintained. However,
      before you can manually
      delete the service-linked role, you must opt out of
      Compute Optimizer.</p>
    

    <p><b>To opt out of Compute Optimizer</b></p>
    <p>For information about opting out of Compute Optimizer, see <a href="./getting-started.html#account-opt-out">Opting out your account</a>.</p>
    <p><b>To manually delete the service-linked role using
      IAM</b></p>
    <p>Use the IAM console, the AWS CLI, or the AWS API to delete the AWSServiceRoleForComputeOptimizer service-linked
      role. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/using-service-linked-roles.html#delete-service-linked-role">Deleting a Service-Linked Role</a> in the <em>IAM User Guide</em>.</p>
   
    <h2 id="slr-regions">Supported Regions for Compute Optimizer Service-Linked Roles</h2>
    
    <p>Compute Optimizer supports using service-linked roles in all of the Regions where the service
      is available. To view the currently supported
      AWS Regions
      and endpoints for Compute Optimizer, see <a href="https://docs.aws.amazon.com/general/latest/gr/compute-optimizer.html">Compute Optimizer Endpoints and
        Quotas</a> in the <em>AWS General Reference</em>.</p>
  <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./security-iam.html">Controlling access</div><div id="next" class="next-link" accesskey="n" href="./managed-policies.html">AWS managed policies</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Compute Optimizer&amp;topic_url=https://docs.aws.amazon.com/en_us/compute-optimizer/latest/ug/using-service-linked-roles.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Compute Optimizer&amp;topic_url=https://docs.aws.amazon.com/en_us/compute-optimizer/latest/ug/using-service-linked-roles.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>