<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="pt-BR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>IAMfunções de acesso paraAmazon Kendra - Amazon Kendra</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="iam-roles" /><meta name="default_state" content="iam-roles" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/kendra/latest/dg/iam-roles.html" /><meta name="description" content="As permissões de acesso necessárias paraAmazon Kendra." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Kendra" /><meta name="guide" content="Guia do desenvolvedor" /><meta name="abstract" content="Fornece uma visão geral conceitual do Amazon Kendra. Saiba mais sobre osAmazon Kendra recursos e comece a indexar seus documentos usando o console, a CLI e a API." /><meta name="guide-locale" content="pt_br" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/kendra/latest/dg/iam-roles.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/kendra/latest/dg/iam-roles.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/kendra/latest/dg/iam-roles.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/kendra/latest/dg/iam-roles.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/kendra/latest/dg/iam-roles.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/kendra/latest/dg/iam-roles.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/kendra/latest/dg/iam-roles.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/kendra/latest/dg/iam-roles.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/kendra/latest/dg/iam-roles.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/kendra/latest/dg/iam-roles.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/kendra/latest/dg/iam-roles.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/kendra/latest/dg/iam-roles.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/kendra/latest/dg/iam-roles.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/kendra/latest/dg/iam-roles.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/kendra/latest/dg/iam-roles.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/kendra/latest/dg/iam-roles.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/kendra/latest/dg/iam-roles.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/kendra/latest/dg/iam-roles.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/kendra/latest/dg/iam-roles.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/kendra/latest/dg/iam-roles.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/kendra/latest/dg/iam-roles.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/kendra/latest/dg/iam-roles.html" hreflang="x-default" /><meta name="feedback-item" content="Kendra" /><meta name="this_doc_product" content="Amazon Kendra" /><meta name="this_doc_guide" content="Guia do desenvolvedor" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'kendra'}"></script><meta id="panorama-serviceSubSection" value="Guia do desenvolvedor" /><meta id="panorama-serviceConsolePage" value="IAMfunções de acesso paraAmazon Kendra" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>IAMfunções de acesso paraAmazon Kendra - Amazon Kendra</title><meta name="pdf" content="kendra-dg.pdf#iam-roles" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Kendra&amp;topic_url=http://docs.aws.amazon.com/pt_br/kendra/latest/dg/iam-roles.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/pt_br/kendra/latest/dg/iam-roles.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/pt_br/kendra/latest/dg/iam-roles.html" /><meta name="keywords" content="Kendra,Amazon Kendra,pesquisa,pesquisa inteligente,linguagem natural,índice,question,palavra-chave,fonte de dados,conectora,Perguntas frequentes,pergunta frequente" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Kendra",
        "item" : "https://docs.aws.amazon.com/kendra/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guia do desenvolvedor",
        "item" : "https://docs.aws.amazon.com/pt_br/kendra/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "IAMfunções de acesso paraAmazon Kendra",
        "item" : "https://docs.aws.amazon.com/pt_br/kendra/latest/dg/iam-roles.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="kendra-dg.pdf#iam-roles" target="_blank" rel="noopener noreferrer" title="Abrir em PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentação</a><a href="/kendra/index.html">Amazon Kendra</a><a href="what-is-kendra.html">Guia do desenvolvedor</a></div><div id="page-toc-src"><a href="#iam-roles-index">IAMfunções para índices</a><a href="#iam-roles-batch">IAMfunções para a BatchPutDocument API</a><a href="#iam-roles-ds">IAMfunções para fontes de dados</a><a href="#iam-roles-ds-faq">IAMfunções para perguntas frequentes (FAQs)</a><a href="#iam-roles-query-suggestions">IAMfunções para sugestões de consultas</a><a href="#iam-roles-principal-mapping">IAMfunções para mapeamento principal de usuários e grupos</a><a href="#iam-roles-aws-sso">Funções do IAM para AWS IAM Identity Center (successor to AWS Single Sign-On)</a><a href="#iam-roles-amazon-kendra-experiences">IAMpapéis paraAmazon Kendra experiências</a><a href="#iam-roles-custom-document-enrichment">IAMfunções para enriquecimento de documentos personalizados</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>As traduções são geradas por tradução automática. Em caso de conflito entre o conteúdo da tradução e da versão original em inglês, a versão em inglês prevalecerá.</p></awsui-alert><h1 class="topictitle" id="iam-roles">IAMfunções de acesso paraAmazon Kendra</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Quando você cria um índice, fonte de dados ou uma FAQ,Amazon Kendra precisa acessar osAWS recursos necessários para criar oAmazon Kendra recurso. Você deve criar uma políticaAWS Identity and Access Management (IAM) antes de criar oAmazon Kendra recurso. Ao chamar a operação, você fornece o nome de recurso da Amazon (ARN) da função com a política anexada. Por exemplo, se você estiver chamando a <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_BatchPutDocument.html">BatchPutDocument</a>API para adicionar documentos de umAmazon S3 bucket, você forneceAmazon Kendra uma função com uma política que tem acesso ao bucket.</p><p>Você pode criar uma novaIAM função noAmazon Kendra console ou escolher uma funçãoIAM existente para usar. O console exibe funções que têm a string “kendra” ou “Kendra” no nome da função. </p><p>Os tópicos a seguir fornecem detalhes sobre as políticas necessárias. Se você criarIAM funções usando oAmazon Kendra console, essas políticas serão criadas para você.</p><div class="highlights" id="inline-topiclist"><h6>Tópicos</h6><ul><li><a href="#iam-roles-index">IAMfunções para índices</a></li><li><a href="#iam-roles-batch">IAMfunções para a BatchPutDocument API</a></li><li><a href="#iam-roles-ds">IAMfunções para fontes de dados</a></li><li><a href="#iam-roles-ds-faq">IAMfunções para perguntas frequentes (FAQs)</a></li><li><a href="#iam-roles-query-suggestions">IAMfunções para sugestões de consultas</a></li><li><a href="#iam-roles-principal-mapping">IAMfunções para mapeamento principal de usuários e grupos</a></li><li><a href="#iam-roles-aws-sso">Funções do IAM para AWS IAM Identity Center (successor to AWS Single Sign-On)</a></li><li><a href="#iam-roles-amazon-kendra-experiences">IAMpapéis paraAmazon Kendra experiências</a></li><li><a href="#iam-roles-custom-document-enrichment">IAMfunções para enriquecimento de documentos personalizados</a></li></ul></div>
        <h2 id="iam-roles-index">IAMfunções para índices</h2>
        <p>Ao criar um índice, você deve fornecer umaIAM função com permissão para gravar em umAmazon CloudWatch. Você também deve fornecer uma política de confiança que permitaAmazon Kendra ao assumir a função. A seguir estão as políticas que devem ser fornecidas.</p>
        <div class="collapsible" data-expand-section="_collapse_all_"><awsui-expandable-section variant="container" header="IAMfunções para índices" id="permissions-policy" expanded="false"><p>Uma política de função paraAmazon Kendra permitir o acesso a umCloudWatch registro.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": "cloudwatch:PutMetricData",
            "Resource": "*",
            "Condition": <span>{</span>
                "StringEquals": <span>{</span>
                    "cloudwatch:namespace": "AWS/Kendra"
                }
            }
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": "logs:DescribeLogGroups",
            "Resource": "*"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": "logs:CreateLogGroup",
            "Resource": "arn:aws:logs:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:log-group:/aws/kendra/*"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "logs:DescribeLogStreams",
                "logs:CreateLogStream",
                "logs:PutLogEvents"
            ],
            "Resource": "arn:aws:logs:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:log-group:/aws/kendra/*:log-stream:*"
        }
    ]
}</code></pre><p>Uma política de função paraAmazon Kendra permitir o acessoAWS Secrets Manager. se você estiver usando o contexto do usuárioSecrets Manager como um local de chave, você pode usar a modelo de política a seguir. </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Effect":"Allow",
         "Action":"cloudwatch:PutMetricData",
         "Resource":"*",
         "Condition":<span>{</span>
            "StringEquals":<span>{</span>
               "cloudwatch:namespace":"AWS/Kendra"
            }
         }
      },
      <span>{</span>
         "Effect":"Allow",
         "Action":"logs:DescribeLogGroups",
         "Resource":"*"
      },
      <span>{</span>
         "Effect":"Allow",
         "Action":"logs:CreateLogGroup",
         "Resource":"arn:aws:logs:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:log-group:/aws/kendra/*"
      },
      <span>{</span>
         "Effect":"Allow",
         "Action":[
            "logs:DescribeLogStreams",
            "logs:CreateLogStream",
            "logs:PutLogEvents"
         ],
         "Resource":"arn:aws:logs:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:log-group:/aws/kendra/*:log-stream:*"
      },
      <span>{</span>
         "Effect":"Allow",
         "Action":[
            "secretsmanager:GetSecretValue"
         ],
         "Resource":[
            "arn:aws:secretsmanager:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:secret:<code class="replaceable">secret_id</code>"
         ]
      },
      <span>{</span>
         "Effect":"Allow",
         "Action":[
            "kms:Decrypt"
         ],
         "Resource":[
            "arn:aws:kms:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:key/<code class="replaceable">key_id</code>"
         ],
         "Condition":<span>{</span>
            "StringLike":<span>{</span>
               "kms:ViaService":[
                  "secretsmanager.*.amazonaws.com"
               ]
            }
         }
      }
   ]
}</code></pre>
   <p>Uma política de confiança paraAmazon Kendra permitir assumir um papel.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Effect":"Allow",
         "Principal":<span>{</span>
            "Service":"kendra.amazonaws.com"
         },
         "Action":"sts:AssumeRole"
      }
   ]
}</code></pre>
</awsui-expandable-section></div>
     
        <h2 id="iam-roles-batch">IAMfunções para a BatchPutDocument API</h2>
        <div class="awsdocs-note awsdocs-warning"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Atenção</h6></div><div class="awsdocs-note-text"><p>Amazon Kendranão usa uma política de bucket que concede permissões a umAmazon Kendra diretor para interagir com um bucket do S3. Em vez disso, ele usaIAM funções. Certifique-se de que eleAmazon Kendra não esteja incluído como membro confiável em sua política de bucket para evitar problemas de segurança de dados ao conceder acidentalmente permissões a diretores arbitrários. No entanto, você pode adicionar uma política de bucket para usar umAmazon S3 bucket em contas diferentes. Para obter mais informações, consulte <a href="https://docs.aws.amazon.com/kendra/latest/dg/iam-roles.html#iam-roles-ds-s3-cross-accounts">Políticas para usarAmazon S3 em todas as contas</a>. Para obter informações sobreIAM funções para fontes de dados do S3, consulte <a href="https://docs.aws.amazon.com/kendra/latest/dg/iam-roles.html#iam-roles-ds-s3">IAMfunções</a>.</p></div></div>
        <p>Ao usar a <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_BatchPutDocument.html">BatchPutDocument</a>API para indexar documentos em umAmazon S3 bucket, você deve fornecerAmazon Kendra umaIAM função com acesso ao bucket. Você também deve fornecer uma política de confiança que permitaAmazon Kendra ao assumir a função. Se os documentos no bucket estiverem criptografados, você deverá fornecer permissão para usar a chave mestra doAWS KMS cliente (CMK) para descriptografar os documentos.</p>
        <div class="collapsible" data-expand-section="_collapse_all_"><awsui-expandable-section variant="container" header="IAMfunções para a BatchPutDocument  API" id="iam-roles-batch-json" expanded="false"><p>Uma política de função necessária paraAmazon Kendra permitir o acesso a umAmazon S3 bucket.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "s3:GetObject"
            ],
            "Resource": [
                "arn:aws:s3:::<code class="replaceable">bucket name</code>/*"
            ]
        }
    ]
}</code></pre>
   <p>Uma política de confiança paraAmazon Kendra permitir assumir um papel.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Effect":"Allow",
         "Principal":<span>{</span>
            "Service":"kendra.amazonaws.com"
         },
         "Action":"sts:AssumeRole"
      }
   ]
}</code></pre>
<p>É recomendável que você inclua<code class="code">aws:sourceAccount</code> e<code class="code">aws:sourceArn</code> na política de confiança. Isso limita as permissões e verifica com segurança se<code class="code">aws:sourceAccount</code> elas<code class="code">aws:sourceArn</code> são as mesmas fornecidas na política deIAM função da<code class="code">sts:AssumeRole</code> ação. Isso impede que entidades não autorizadas acessem suasIAM funções e suas permissões. Para obter mais informações, consulte oAWS Identity and Access Management guia sobre o <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/confused-deputy.html">problema do substituto</a>.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Principal": <span>{</span>
                "Service": [
                    "kendra.*.amazonaws.com"
                ]
            },
            "Action": "sts:AssumeRole",
            "Condition": <span>{</span>
                "StringEquals": <span>{</span>
                    "aws:SourceAccount": "account ID"
                },
                "StringLike": <span>{</span>
                    "aws:SourceArn": "arn:aws:kendra:region:accountId:index/*"
                }
            }
        }
    ]
}</code></pre><p>Uma política de função opcionalAmazon Kendra para permitir o uso de uma chave mestraAWS KMS do cliente (CMK) para descriptografar documentos em umAmazon S3 bucket.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "kms:Decrypt"
            ],
            "Resource": [
                "arn:aws:kms:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:key/<code class="replaceable">key ID</code>"
            ]
        }
    ]
}</code></pre></awsui-expandable-section></div>
     
        <h2 id="iam-roles-ds">IAMfunções para fontes de dados</h2>
        <p>Ao usar a <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_CreateDataSource.html">CreateDataSource</a>API, você deve atribuirAmazon Kendra umaIAM função que tenha permissão para acessar os recursos do banco de dados. As permissões específicas necessárias dependem da origem dos dados.</p>

        

        <div class="collapsible" data-expand-section="_collapse_all_"><awsui-expandable-section variant="container" header="IAMfunções das fontes de dados do Alfresco" id="iam-roles-ds-alfresco" expanded="false"><p>Ao usar o Alfresco, você fornece uma função com as seguintes políticas.</p><div class="itemizedlist">
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>Permissão para acessar seuAWS Secrets Manager segredo para autenticar seu Alfresco.</p>
                    </li><li class="listitem">
                        <p>Permissão para chamar as APIs públicas necessárias para o conector Alfresco.</p>
                    </li><li class="listitem">
                        <p>Permissão para chamar as<code class="code">ListGroupsOlderThanOrderingId</code> APIs<code class="code">BatchPutDocument</code><code class="code">BatchDeleteDocument</code><code class="code">PutPrincipalMapping</code><code class="code">DeletePrincipalMapping</code>,<code class="code">DescribePrincipalMapping</code>,,, e.</p>
                    </li></ul></div><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "secretsmanager:GetSecretValue"
    ],
    "Resource": [
      "arn:aws:secretsmanager:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:secret:[[secret_id]]"
    ]
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "kms:Decrypt"
    ],
    "Resource": [
      "arn:aws:kms:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:key/[[key_id]]"
    ],
    "Condition": <span>{</span>
      "StringLike": <span>{</span>
        "kms:ViaService": [
          "secretsmanager.*.amazonaws.com"
        ]
      }
    }
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
        "kendra:PutPrincipalMapping",
        "kendra:DeletePrincipalMapping",
        "kendra:ListGroupsOlderThanOrderingId",
        "kendra:DescribePrincipalMapping"
    ],
    "Resource": ["arn:aws:kendra:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:index/<span>{</span><span>{</span>index_id}}", "arn:aws:kendra:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:index/<span>{</span><span>{</span>index_id}}/data-source/*"]
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "kendra:BatchPutDocument",
      "kendra:BatchDeleteDocument"
    ],
    "Resource": "arn:aws:kendra:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:index/<span>{</span><span>{</span>index_id}}"
  }]
}</code></pre>
   <p>Uma política de confiança paraAmazon Kendra permitir assumir um papel.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Effect":"Allow",
         "Principal":<span>{</span>
            "Service":"kendra.amazonaws.com"
         },
         "Action":"sts:AssumeRole"
      }
   ]
}</code></pre>
</awsui-expandable-section></div>

        

        <div class="collapsible" data-expand-section="_collapse_all_"><awsui-expandable-section variant="container" header="IAMfunções para fontesAmazon S3 de dados" id="iam-roles-ds-s3" expanded="false"><div class="awsdocs-note awsdocs-warning"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Atenção</h6></div><div class="awsdocs-note-text"><p>Amazon Kendranão usa uma política de bucket que concede permissões a umAmazon Kendra diretor para interagir com um bucket do S3. Em vez disso, ele usaIAM funções. Certifique-se de que eleAmazon Kendra não esteja incluído como membro confiável em sua política de bucket para evitar problemas de segurança de dados ao conceder acidentalmente permissões a diretores arbitrários. No entanto, você pode adicionar uma política de bucket para usar umAmazon S3 bucket em contas diferentes. Para obter mais informações, consulte<a href="#iam-roles-ds-s3-cross-accounts">Políticas para usarAmazon S3 em todas as contas</a> (role para baixo).</p></div></div><p>Ao usar umAmazon S3 bucket como fonte de dados, você fornece uma função que tem permissão para acessar o bucket e usar as<code class="code">BatchPutDocument</code><code class="code">BatchDeleteDocument</code> operações e. Se os documentos noAmazon S3 bucket estiverem criptografados, você deverá fornecer permissão para usar a chave mestra doAWS KMS cliente (CMK) para descriptografar os documentos.</p><p>Uma política de função necessária paraAmazon Kendra permitir o usoAmazon S3 de um bucket como fonte de dados.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
         <span>{</span>
            "Action": [
                "s3:GetObject"
            ],
            "Resource": [
                "arn:aws:s3:::<code class="replaceable">bucket name</code>/*"
            ],
            "Effect": "Allow"
        },
        <span>{</span>
            "Action": [
                "s3:ListBucket"
            ],
            "Resource": [
                "arn:aws:s3:::<code class="replaceable">bucket name</code>"
            ],
            "Effect": "Allow"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "kendra:BatchPutDocument",
                "kendra:BatchDeleteDocument"
            ],
            "Resource": [
                "arn:aws:kendra:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:index/<code class="replaceable">index ID</code>"
            ]
        }
    ]
}</code></pre><p>Uma política de função opcionalAmazon Kendra para permitir o uso de uma chave mestraAWS KMS do cliente (CMK) para descriptografar documentos em umAmazon S3 bucket.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "kms:Decrypt"
            ],
            "Resource": [
                "arn:aws:kms:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:key/<code class="replaceable">key ID</code>"
            ]
        }
    ]
}</code></pre><p>Uma política de função opcionalAmazon Kendra para permitir o acesso a umAmazon S3 bucket, usando umAmazon VPC e sem ativarAWS KMS ou compartilharAWS KMS permissões.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Action": [
        "s3:GetObject"
      ],
      "Resource": [
        "arn:aws:s3:::<span>{</span><span>{</span>input_bucket_name}}/*"
      ],
      "Effect": "Allow"
    },
    <span>{</span>
      "Action": [
        "s3:ListBucket"
      ],
      "Resource": [
        "arn:aws:s3:::<span>{</span><span>{</span>input_bucket_name}}"
      ],
      "Effect": "Allow"
    },
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "ec2:CreateNetworkInterface"
      ],
      "Resource": [
        "arn:aws:ec2:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:subnet/[[subnet_ids]]",
        "arn:aws:ec2:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:security-group/[[security_group]]"
      ]
    },
    <span>{</span>
        "Effect": "Allow",
        "Action": [
            "ec2:CreateNetworkInterface"
        ],
        "Resource": "arn:aws:ec2:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:network-interface/*",
        "Condition": <span>{</span>
            "StringLike": <span>{</span>
                "aws:RequestTag/AWS_KENDRA": "kendra_<span>{</span><span>{</span>account_id}}_<span>{</span><span>{</span>index_id}}_<span>{</span>datasource_id}}_*"
            }
        }
    },
    <span>{</span>
        "Effect": "Allow",
        "Action": [
            "ec2:CreateTags"
        ],
        "Resource": "arn:aws:ec2:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:network-interface/*",
        "Condition": <span>{</span>
            "StringEquals": <span>{</span>
                "ec2:CreateAction": "CreateNetworkInterface"
            }
        }
    },
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "ec2:DescribeSubnets"
      ],
      "Resource": ["arn:aws:ec2:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:subnet/[[subnet_ids]]"]
    },
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "ec2:DescribeNetworkInterfaces"
      ],
      "Resource": "*"
    },
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "ec2:CreateNetworkInterfacePermission"
      ],
      "Resource": "arn:aws:ec2:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:network-interface/*",
      "Condition": <span>{</span>
        "StringEquals": <span>{</span>
          "ec2:AuthorizedService": "kendra.amazonaws.com"
        },
        "ArnEquals": <span>{</span>
          "ec2:Subnet": [
            "arn:aws:ec2:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:subnet/[[subnet_ids]]"
          ]
        }
      }
    },
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "kendra:PutPrincipalMapping",
        "kendra:DeletePrincipalMapping",
        "kendra:ListGroupsOlderThanOrderingId",
        "kendra:DescribePrincipalMapping"
      ],
      "Resource": [
        "arn:aws:kendra:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:index/<span>{</span><span>{</span>index_id}}",
        "arn:aws:kendra:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:index/<span>{</span><span>{</span>index_id}}/data-source/*"
      ]
    },
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "kendra:BatchPutDocument",
        "kendra:BatchDeleteDocument"
      ],
      "Resource": "arn:aws:kendra:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:index/<span>{</span><span>{</span>index_id}}"
    }
  ]
}
<span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Principal": <span>{</span>
        "Service": "kendra.amazonaws.com"
      },
      "Action": "sts:AssumeRole"
    }
  ]
}</code></pre><p>Uma política de função opcionalAmazon Kendra para permitir o acesso a umAmazon S3 bucket enquanto usa umAmazon VPC e comAWS KMS as permissões ativadas.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Action": [
        "s3:GetObject"
      ],
      "Resource": [
        "arn:aws:s3:::<span>{</span><span>{</span>input_bucket_name}}/*"
      ],
      "Effect": "Allow"
    },
    <span>{</span>
      "Action": [
        "s3:ListBucket"
      ],
      "Resource": [
        "arn:aws:s3:::<span>{</span><span>{</span>input_bucket_name}}"
      ],
      "Effect": "Allow"
    },
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "kms:Decrypt"
      ],
      "Resource": [
        "arn:aws:kms:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:key/<span>{</span><span>{</span>key_id}}"
      ],
      "Condition": <span>{</span>
        "StringLike": <span>{</span>
          "kms:ViaService": [
            "s3.*.amazonaws.com"
          ]
        }
      }
    },
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "ec2:CreateNetworkInterface"
      ],
      "Resource": [
        "arn:aws:ec2:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:subnet/[[subnet_ids]]",
        "arn:aws:ec2:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:security-group/[[security_group]]"
      ]
    },
    <span>{</span>
        "Effect": "Allow",
        "Action": [
            "ec2:CreateNetworkInterface"
        ],
        "Resource": "arn:aws:ec2:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:network-interface/*",
        "Condition": <span>{</span>
            "StringLike": <span>{</span>
                "aws:RequestTag/AWS_KENDRA": "kendra_<span>{</span><span>{</span>account_id}}_<span>{</span><span>{</span>index_id}}_<span>{</span>datasource_id}}_*"
            }
        }
    },
    <span>{</span>
        "Effect": "Allow",
        "Action": [
            "ec2:CreateTags"
        ],
        "Resource": "arn:aws:ec2:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:network-interface/*",
        "Condition": <span>{</span>
            "StringEquals": <span>{</span>
                "ec2:CreateAction": "CreateNetworkInterface"
            }
        }
    },
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "ec2:DescribeSubnets"
      ],
      "Resource": ["arn:aws:ec2:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:subnet/[[subnet_ids]]"]
    },
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "ec2:DescribeNetworkInterfaces"
      ],
      "Resource": "*"
    },
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "ec2:CreateNetworkInterfacePermission"
      ],
      "Resource": "arn:aws:ec2:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:network-interface/*",
      "Condition": <span>{</span>
        "StringEquals": <span>{</span>
          "ec2:AuthorizedService": "kendra.amazonaws.com"
        },
        "ArnEquals": <span>{</span>
          "ec2:Subnet": [
            "arn:aws:ec2:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:subnet/[[subnet_ids]]"
          ]
        }
      }
    },
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "kendra:PutPrincipalMapping",
        "kendra:DeletePrincipalMapping",
        "kendra:ListGroupsOlderThanOrderingId",
        "kendra:DescribePrincipalMapping"
      ],
      "Resource": [
        "arn:aws:kendra:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:index/<span>{</span><span>{</span>index_id}}",
        "arn:aws:kendra:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:index/<span>{</span><span>{</span>index_id}}/data-source/*"
      ]
    },
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "kendra:BatchPutDocument",
        "kendra:BatchDeleteDocument"
      ],
      "Resource": "arn:aws:kendra:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:index/<span>{</span><span>{</span>index_id}}"
    }
  ]
}

<span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Principal": <span>{</span>
        "Service": "kendra.amazonaws.com"
      },
      "Action": "sts:AssumeRole"
    }
  ]
}</code></pre>
   <p>Uma política de confiança paraAmazon Kendra permitir assumir um papel.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Effect":"Allow",
         "Principal":<span>{</span>
            "Service":"kendra.amazonaws.com"
         },
         "Action":"sts:AssumeRole"
      }
   ]
}</code></pre>
 
                    <h4 id="iam-roles-ds-s3-cross-accounts">Políticas para usarAmazon S3 em todas as contas</h4>
                    <p>Se seuAmazon S3 bucket estiver em uma conta diferente da conta que você usa para seuAmazon Kendra índice, você pode criar políticas para usá-lo em todas as contas.</p>
                    <p>Uma política de função para usar seuAmazon S3 bucket como fonte de dados quando o bucket está em uma conta diferente do seuAmazon Kendra índice.</p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
         <span>{</span>
            "Action": [
                "s3:GetObject"
            ],
            "Resource": [
                "arn:aws:s3:::$BUCKET_IN_OTHER_ACCOUNT/*"
            ],
            "Effect": "Allow"
        },
        <span>{</span>
            "Action": [
                "s3:ListBucket"
            ],
            "Resource": [
                "arn:aws:s3:::$BUCKET_IN_OTHER_ACCOUNT/*"
            ],
            "Effect": "Allow"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "kendra:BatchPutDocument",
                "kendra:BatchDeleteDocument"
            ],
            "Resource": [
                "arn:aws:kendra:$KENDRA_REGION:$KENDRA_ACCOUNT_ID:index/$KENDRA_INDEX_ID"
            ]
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "s3:GetObject",
                "s3:PutObject",
                "s3:PutObjectAcl"
            ],
            "Resource": "arn:aws:s3:::$BUCKET_IN_OTHER_ACCOUNT/*"
        }
    ]
}</code></pre>
                    <p>Uma política de bucket para permitir que a funçãoAmazon S3 de fonte de dados acesse oAmazon S3 bucket em todas as contas.</p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Principal": <span>{</span>
                "AWS": "$KENDRA_S3_CONNECTOR_ROLE_ARN"
            },
            "Action": [
                "s3:GetObject",
                "s3:PutObject",
                "s3:PutObjectAcl"
            ],
            "Resource": [
                "arn:aws:s3:::$BUCKET_IN_OTHER_ACCOUNT/*"
            ]
        },
        <span>{</span>
            "Effect": "Allow",
            "Principal": <span>{</span>
                "AWS": "$KENDRA_S3_CONNECTOR_ROLE_ARN"
            },
            "Action": "s3:ListBucket",
            "Resource": "arn:aws:s3:::$BUCKET_IN_OTHER_ACCOUNT"
        }
    ]
}</code></pre>
                     
   <p>Uma política de confiança paraAmazon Kendra permitir assumir um papel.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Effect":"Allow",
         "Principal":<span>{</span>
            "Service":"kendra.amazonaws.com"
         },
         "Action":"sts:AssumeRole"
      }
   ]
}</code></pre>
 
                </awsui-expandable-section></div>

        

        <div class="collapsible" data-expand-section="_collapse_all_"><awsui-expandable-section variant="container" header="IAMfunções para fontes de dados de banco de dados" id="iam-roles-ds-jdbc" expanded="false"><p>Ao usar um banco de dados como fonte de dados, vocêAmazon Kendra fornece uma função que tem as permissões necessárias para se conectar ao banco de dados. Dentre elas estão:</p><div class="itemizedlist">
                     
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>Permissão para acessar oAWS Secrets Manager segredo que contém o nome de usuário e a senha do site do banco de dados. Para obter mais informações sobre o conteúdo do segredo, consulte<a href="./data-source-database.html">Amazon RDS/Aurora</a>.</p>
                    </li><li class="listitem">
                        <p>Permissão para usar a chave mestra doAWS KMS cliente (CMK) para descriptografar o nome do usuário e a senha do armazenada porSecrets Manager.</p>
                    </li><li class="listitem">
                        <p>Permissão para usar as<code class="code">BatchDeleteDocument</code> operações<code class="code">BatchPutDocument</code> e para atualizar o índice.</p>
                    </li><li class="listitem">
                        <p>Permissão para acessar oAmazon S3 bucket que contém o certificado SSL usado para se comunicar com o site do banco de dados.</p>
                    </li></ul></div><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "secretsmanager:GetSecretValue"
            ],
            "Resource": [
                "arn:aws:secretsmanager:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:secret:<code class="replaceable">secret ID</code>"
            ]
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "kms:Decrypt"
            ],
            "Resource": [
                "arn:aws:kms:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:key/<code class="replaceable">key ID</code>"
            ]
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "kendra:BatchPutDocument",
                "kendra:BatchDeleteDocument"
            ],
            "Resource": [
                "arn:aws:kendra:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:index/<code class="replaceable">index ID</code>"
            "Condition": <span>{</span>
                "StringLike": <span>{</span>
                    "kms:ViaService": [
                        "kendra.*.amazonaws.com"
                    ]
                }
            }
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "s3:GetObject"
            ],
            "Resource": [
                "arn:aws:s3:::<code class="replaceable">bucket name</code>/*"
            ]
        }
    ]
}</code></pre><p>Há duas políticas opcionais que você pode usar com uma fonte de dados de banco de dados.</p><p>Se você criptografou oAmazon S3 bucket que contém o certificado SSL usado para se comunicar com o banco de dados, forneça uma política para darAmazon Kendra acesso à chave. </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "kms:Decrypt"
            ],
            "Resource": [
                "arn:aws:kms:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:key/<code class="replaceable">key ID</code>"
            ]
        }
    ]
}</code></pre><p>Se você estiver usando uma VPC, forneça uma política que dêAmazon Kendra acesso aos recursos necessários. Consulte<a href="#iam-roles-vpc">IAMFunção de nuvem privada virtual (VPC)</a> a política necessária.</p>
   <p>Uma política de confiança paraAmazon Kendra permitir assumir um papel.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Effect":"Allow",
         "Principal":<span>{</span>
            "Service":"kendra.amazonaws.com"
         },
         "Action":"sts:AssumeRole"
      }
   ]
}</code></pre>
</awsui-expandable-section></div>

        

        <div class="collapsible" data-expand-section="_collapse_all_"><awsui-expandable-section variant="container" header="IAMfunções para fontesAmazon FSx de dados" id="iam-roles-ds-fsx" expanded="false"><p>Ao usarAmazon FSx, você fornece uma função com as seguintes políticas.</p><div class="itemizedlist">
                     
                     
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>Permissão para acessar seuAWS Secrets Manager segredo para autenticar seuAmazon FSx.</p>
                    </li><li class="listitem">
                        <p>Permissão de acessoAmazon Virtual Private Cloud (VPC) onde vocêAmazon FSx reside.</p>
                    </li><li class="listitem">
                        <p>Permissão para obter o nome de domínio do Active Directory para o sistema de arquivos doAmazon FSx Windows.</p>
                    </li><li class="listitem">
                        <p>Permissão para chamar as APIs públicas necessárias para oAmazon FSx conector.</p>
                    </li><li class="listitem">
                        <p>Permissão para chamar as<code class="code">BatchDeleteDocument</code> APIs<code class="code">BatchPutDocument</code> e para atualizar o índice.</p>
                    </li></ul></div><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
        "Statement": [
        <span>{</span>
          "Effect": "Allow",
          "Action": [
            "secretsmanager:GetSecretValue"
          ],
          "Resource": [
            "arn:aws:secretsmanager:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:secret:<span>{</span><span>{</span>secret_id}}"
          ]
        },
        <span>{</span>
          "Effect": "Allow",
          "Action": [
            "kms:Decrypt"
          ],
          "Resource": [
            "arn:aws:kms:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:key/<span>{</span><span>{</span>key_id}}"
          ],
          "Condition": <span>{</span>
            "StringLike": <span>{</span>
              "kms:ViaService": [
                "secretsmanager.<span>{</span><span>{</span>region}}.amazonaws.com"
              ]
            }
          }
        },
        <span>{</span>
          "Effect": "Allow",
          "Action":[
            "ec2:CreateNetworkInterface",
            "ec2:DeleteNetworkInterface"
          ],
          "Resource": [
                "arn:aws:ec2:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:network-interface/*",
                "arn:aws:ec2:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:subnet/[[subnet_ids]]"
          ]   
        },
        <span>{</span>
          "Effect": "Allow",
          "Action": [
            "ec2:DescribeSubnets",
            "ec2:DescribeNetworkInterfaces"
          ],
          "Resource": "*"
        },
        <span>{</span>
          "Effect": "Allow",
          "Action": [
            "ec2:CreateNetworkInterfacePermission"
          ],
          "Resource": "arn:aws:ec2:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:network-interface/*",
          "Condition": <span>{</span>
            "StringEquals": <span>{</span>
              "ec2:AuthorizedService": "kendra.*.amazonaws.com"
            },
            "ArnEquals": <span>{</span>
              "ec2:Subnet": [
                "arn:aws:ec2:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:subnet/[[subnet_ids]]"
              ]
            }
          }
        },
        <span>{</span>
          "Sid": "AllowsKendraToGetDomainNameOfActiveDirectory",
          "Effect": "Allow",
          "Action": "ds:DescribeDirectories",
          "Resource": "*"
        },
        <span>{</span>
          "Sid": "AllowsKendraToCallRequiredFsxAPIs",
          "Effect": "Allow",
          "Action": [
              "fsx:DescribeFileSystems"
          ],
          "Resource": "*"
        },
        <span>{</span>
          "Sid": "iamPassRole",
          "Effect": "Allow",
          "Action": "iam:PassRole",
          "Resource": "*",
          "Condition": <span>{</span>
            "StringEquals": <span>{</span>
              "iam:PassedToService": [
                "kendra.*.amazonaws.com"
              ]
            }
          }
        },
        <span>{</span>
          "Effect": "Allow",
          "Action": [
            "kendra:BatchPutDocument",
            "kendra:BatchDeleteDocument"
          ],
          "Resource": "arn:aws:kendra:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:index/<span>{</span><span>{</span>index_id}}"
        }
        ]
}</code></pre>
   <p>Uma política de confiança paraAmazon Kendra permitir assumir um papel.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Effect":"Allow",
         "Principal":<span>{</span>
            "Service":"kendra.amazonaws.com"
         },
         "Action":"sts:AssumeRole"
      }
   ]
}</code></pre>
</awsui-expandable-section></div>

        

        <div class="collapsible" data-expand-section="_collapse_all_"><awsui-expandable-section variant="container" header="IAMfunções para fontes de dados de rastreadores da web" id="iam-roles-ds-webcrawler" expanded="false"><p>Ao usar oAmazon Kendra Web Crawler, você fornece uma função com as seguintes políticas:</p><div class="itemizedlist">
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>Permissão para acessar oAWS Secrets Manager segredo que contém o nome do usuário e a senha para se conectar a sites ou a um servidor proxy da Web com suporte de autenticação básica. Para obter mais informações sobre o conteúdo do segredo, consulte Como <a href="https://docs.aws.amazon.com/kendra/latest/dg/data-source-web-crawler.html">usar uma fonte de dados de rastreador da Web</a>.</p>
                    </li><li class="listitem">
                        <p>Permissão para usar a chave mestra doAWS KMS cliente (CMK) para descriptografar o nome do usuário e a senha do armazenada porSecrets Manager.</p>
                    </li><li class="listitem">
                        <p>Permissão para usar as<code class="code">BatchDeleteDocument</code> operações<code class="code">BatchPutDocument</code> e para atualizar o índice.</p>
                    </li></ul></div><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "secretsmanager:GetSecretValue"
    ],
    "Resource": [
      "arn:aws:secretsmanager:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:secret:<code class="replaceable">secret ID</code>"
    ]
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "kms:Decrypt"
    ],
    "Resource": [
      "arn:aws:kms:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:key/<code class="replaceable">key ID</code>"
    ],
    "Condition": <span>{</span>
      "StringLike": <span>{</span>
        "kms:ViaService": [
          "secretsmanager.*.amazonaws.com"
        ]
      }
    }
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "kendra:BatchPutDocument",
      "kendra:BatchDeleteDocument"
    ],
    "Resource": "arn:aws:kendra:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:index/<code class="replaceable">index ID</code>"
  }]
}
</code></pre>
   <p>Uma política de confiança paraAmazon Kendra permitir assumir um papel.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Effect":"Allow",
         "Principal":<span>{</span>
            "Service":"kendra.amazonaws.com"
         },
         "Action":"sts:AssumeRole"
      }
   ]
}</code></pre>
</awsui-expandable-section></div>

        

        <div class="collapsible" data-expand-section="_collapse_all_"><awsui-expandable-section variant="container" header="IAMfunções para fontesAmazon WorkDocs de dados" id="iam-roles-workdocs" expanded="false"><p>Quando você usaAmazon WorkDocs, você fornece uma função com as seguintes políticas</p><div class="itemizedlist">
                     
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>Permissão para verificar o ID do diretório (ID da organização) que corresponde ao repositórioAmazon WorkDocs do seu site.</p>
                    </li><li class="listitem">
                        <p>Permissão para obter o nome de domínio do seu Active Directory que contém o diretórioAmazon WorkDocs do seu site.</p>
                    </li><li class="listitem">
                        <p>Permissão para chamar as APIs públicas necessárias para oAmazon WorkDocs conector.</p>
                    </li><li class="listitem">
                        <p>Permissão para chamar as<code class="code">BatchDeleteDocument</code> APIs<code class="code">BatchPutDocument</code> e para atualizar o índice.</p>
                    </li></ul></div><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Sid": "AllowsKendraToGetDomainNameOfActiveDirectory",
      "Effect": "Allow",
      "Action": "ds:DescribeDirectories",
      "Resource": "*"
    },
    <span>{</span>
      "Sid": "AllowsKendraToCallRequiredWorkDocsAPIs",
      "Effect": "Allow",
      "Action": [
        "workdocs:GetDocumentPath",
        "workdocs:GetGroup",
        "workdocs:GetDocument",
        "workdocs:DownloadDocumentVersions",
        "workdocs:DescribeUsers",
        "workdocs:DescribeFolderContents",
        "workdocs:DescribeActivities",
        "workdocs:DescribeComments",
        "workdocs:GetFolder",
        "workdocs:DescribeResourcePermissions",
        "workdocs:GetFolderPath",
        "workdocs:DescribeInstances"
      ],
      "Resource": "*"
    },
    <span>{</span>
      "Sid": "iamPassRole",
      "Effect": "Allow",
      "Action": "iam:PassRole",
      "Resource": "*",
      "Condition": <span>{</span>
        "StringEquals": <span>{</span>
          "iam:PassedToService": [
            "kendra.*.amazonaws.com"
          ]
        }
      }
    },
    <span>{</span>
      "Sid": "AllowsKendraToCallBatchPutDeleteAPIs",
      "Effect": "Allow",
      "Action": [
        "kendra:BatchPutDocument",
        "kendra:BatchDeleteDocument"
      ],
      "Resource": [
        "arn:aws:kendra:<span>{</span><span>{</span><code class="replaceable">region</code>}}:<span>{</span><span>{</span><code class="replaceable">account_id</code>}}:index/$<span>{</span><code class="replaceable">IndexId</code>}"
      ]
    }
  ]
}</code></pre>
   <p>Uma política de confiança paraAmazon Kendra permitir assumir um papel.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Effect":"Allow",
         "Principal":<span>{</span>
            "Service":"kendra.amazonaws.com"
         },
         "Action":"sts:AssumeRole"
      }
   ]
}</code></pre>
</awsui-expandable-section></div>

        

        <div class="collapsible" data-expand-section="_collapse_all_"><awsui-expandable-section variant="container" header="IAMfunções para fontes de dados do Box" id="iam-roles-ds-box" expanded="false"><p>Ao usar o Box, você fornece uma função com as seguintes políticas.</p><div class="itemizedlist">
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>Permissão para acessar seuAWS Secrets Manager segredo para autenticar seu Slack.</p>
                    </li><li class="listitem">
                        <p>Permissão para chamar as APIs públicas necessárias para o conector Box.</p>
                    </li><li class="listitem">
                        <p>Permissão para chamar as<code class="code">ListGroupsOlderThanOrderingId</code> APIs<code class="code">BatchPutDocument</code><code class="code">BatchDeleteDocument</code><code class="code">PutPrincipalMapping</code><code class="code">DeletePrincipalMapping</code>,<code class="code">DescribePrincipalMapping</code>,,, e.</p>
                    </li></ul></div><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "secretsmanager:GetSecretValue"
    ],
    "Resource": [
      "arn:aws:secretsmanager:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:secret:[[secret_id]]"
    ]
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "kms:Decrypt"
    ],
    "Resource": [
      "arn:aws:kms:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:key/[[key_id]]"
    ],
    "Condition": <span>{</span>
      "StringLike": <span>{</span>
        "kms:ViaService": [
          "secretsmanager.*.amazonaws.com"
        ]
      }
    }
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
        "kendra:PutPrincipalMapping",
        "kendra:DeletePrincipalMapping",
        "kendra:ListGroupsOlderThanOrderingId",
        "kendra:DescribePrincipalMapping"
    ],
    "Resource": ["arn:aws:kendra:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:index/<span>{</span><span>{</span>index_id}}", "arn:aws:kendra:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:index/<span>{</span><span>{</span>index_id}}/data-source/*"]
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "kendra:BatchPutDocument",
      "kendra:BatchDeleteDocument"
    ],
    "Resource": "arn:aws:kendra:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:index/<span>{</span><span>{</span>index_id}}"
  }]
}</code></pre>
   <p>Uma política de confiança paraAmazon Kendra permitir assumir um papel.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Effect":"Allow",
         "Principal":<span>{</span>
            "Service":"kendra.amazonaws.com"
         },
         "Action":"sts:AssumeRole"
      }
   ]
}</code></pre>
</awsui-expandable-section></div>

        

        <div class="collapsible" data-expand-section="_collapse_all_"><awsui-expandable-section variant="container" header="IAMfunções das fontes de dados do Confluence" id="iam-roles-ds-cnf" expanded="false"><div class="collapsible" data-expand-section="_collapse_all_"><awsui-expandable-section variant="container" header="IAMfunções do Confluence Connector v1.0" id="iam-roles-confluence-v1" expanded="false"><p>Ao usar um servidor Confluence como fonte de dados, você fornece uma função com as seguintes políticas:</p><div class="itemizedlist">
                             
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p>Permissão para acessar oAWS Secrets Manager segredo que contém as credenciais necessárias para se conectar ao Confluence. Para obter mais informações sobre o conteúdo do segredo, consulte<a href="./data-source-confluence.html">Confluence</a>.</p>
                            </li><li class="listitem">
                                <p>Permissão para usar a chave mestra doAWS KMS cliente (CMK) para descriptografar o nome do usuário e a senha do armazenada porSecrets Manager.</p>
                            </li><li class="listitem">
                                <p>Permissão para usar as<code class="code">BatchDeleteDocument</code> operações<code class="code">BatchPutDocument</code> e para atualizar o índice.</p>
                            </li></ul></div><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "secretsmanager:GetSecretValue"
    ],
    "Resource": [
      "arn:aws:secretsmanager:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:secret:<code class="replaceable">secret ID</code>"
    ]
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "kms:Decrypt"
    ],
    "Resource": [
      "arn:aws:kms:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:key/<code class="replaceable">key ID</code>"
    ],
    "Condition": <span>{</span>
      "StringLike": <span>{</span>
        "kms:ViaService": [
          "secretsmanager.*.amazonaws.com"
        ]
      }
    }
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "kendra:BatchPutDocument",
      "kendra:BatchDeleteDocument"
    ],
    "Resource": "arn:aws:kendra:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:index/<code class="replaceable">index ID</code>"
  }]
}</code></pre><p>Se você estiver usando uma VPC, forneça uma política que dêAmazon Kendra acesso aos recursos necessários. Consulte<a href="#iam-roles-vpc">IAMFunção de nuvem privada virtual (VPC)</a> a política necessária.</p>
   <p>Uma política de confiança paraAmazon Kendra permitir assumir um papel.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Effect":"Allow",
         "Principal":<span>{</span>
            "Service":"kendra.amazonaws.com"
         },
         "Action":"sts:AssumeRole"
      }
   ]
}</code></pre>
</awsui-expandable-section></div><div class="collapsible" data-expand-section="_collapse_all_"><awsui-expandable-section variant="container" header="IAMfunções do Confluence Connector v2.0" id="iam-roles-confluence-v2" expanded="false"><p>Para uma fonte de dados do conector Confluence v2.0, você fornece uma função com as seguintes políticas.</p><div class="itemizedlist">
                             
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p>Permissão para acessar oAWS Secrets Manager segredo que contém as credenciais de autenticação do Confluence. Para obter mais informações sobre o conteúdo do segredo, consulte<a href="./data-source-confluence.html">Confluence</a>.</p>
                            </li><li class="listitem">
                                <p>Permissão para usar a chave mestra doAWS KMS cliente (CMK) para descriptografar o nome do usuário e a senha do armazenada porAWS Secrets Manager.</p>
                            </li><li class="listitem">
                                <p>Permissão para usar as<code class="code">BatchDeleteDocument</code> operações<code class="code">BatchPutDocument</code> e para atualizar o índice.</p>
                            </li></ul></div><p>Você também deve anexar uma política de confiança que permitaAmazon Kendra ao assumir a função.</p><p>Uma política de função para permitirAmazon Kendra a conexão com o Confluence.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "secretsmanager:GetSecretValue"
      ],
      "Resource": [
        "arn:aws:secretsmanager:region:account_id:secret:secret_id"
      ]
    },
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "kms:Decrypt"
      ],
      "Resource": [
        "arn:aws:kms:region:account_id:key/key_id"
      ],
      "Condition": <span>{</span>
        "StringLike": <span>{</span>
          "kms:ViaService": [
            "secretsmanager.*.amazonaws.com"
          ]
        }
      }
    },
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "kendra:PutPrincipalMapping",
        "kendra:DeletePrincipalMapping",
        "kendra:ListGroupsOlderThanOrderingId",
        "kendra:DescribePrincipalMapping"
      ],
      "Resource": [
        "arn:aws:kendra:region:account_id:index/index_id",
        "arn:aws:kendra:region:account_id:index/index_id/data-source/*"
      ]
    }
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "kendra:BatchPutDocument",
        "kendra:BatchDeleteDocument"
      ],
      "Resource": "arn:aws:kendra:region:account_id:index/index_id"
    }
  ]
}</code></pre><p>Uma política de função que permiteAmazon Kendra a conexão com o Confluence com a configuração VPC.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "secretsmanager:GetSecretValue"
      ],
      "Resource": [
        "arn:aws:secretsmanager:region:account_id:secret:secret_id"
      ]
    },
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "kms:Decrypt"
      ],
      "Resource": [
        "arn:aws:kms:region:account_id:key/key_id"
      ],
      "Condition": <span>{</span>
        "StringLike": <span>{</span>
          "kms:ViaService": [
            "secretsmanager.*.amazonaws.com"
          ]
        }
      }
    },
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "kendra:PutPrincipalMapping",
        "kendra:DeletePrincipalMapping",
        "kendra:ListGroupsOlderThanOrderingId",
        "kendra:DescribePrincipalMapping"
      ],
      "Resource": [
        "arn:aws:kendra:region:account_id:index/index_id",
        "arn:aws:kendra:region:account_id:index/index_id/data-source/*"
      ]
    }
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "kendra:BatchPutDocument",
        "kendra:BatchDeleteDocument"
      ],
      "Resource": "arn:aws:kendra:region:account_id:index/index_id"
    },
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "ec2:CreateNetworkInterface"
      ],
      "Resource": [
        "arn:aws:ec2:region:account_id:subnet/subnet_ids",
        "arn:aws:ec2:region:account_id:security-group/security_group"
      ]
    },
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "ec2:CreateNetworkInterface"
      ],
      "Resource": "arn:aws:ec2:region:account_id:network-interface/*",
      "Condition": <span>{</span>
        "StringLike": <span>{</span>
          "aws:RequestTag/AWS_KENDRA": "kendra_account_id_index_id_*"
        }
      }
    },
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "ec2:CreateTags"
      ],
      "Resource": "arn:aws:ec2:region:account_id:network-interface/*",
      "Condition": <span>{</span>
        "StringEquals": <span>{</span>
          "ec2:CreateAction": "CreateNetworkInterface"
        }
      }
    },
    
<span>{</span>
      "Effect": "Allow",
      "Action": [
        "ec2:CreateNetworkInterfacePermission"
      ],
      "Resource": "arn:aws:ec2:region:account_id:network-interface/*",
      "Condition": <span>{</span>
        "StringLike": <span>{</span>
          "aws:ResourceTag/AWS_KENDRA": "kendra_account_id_index_id_*"
        }
      }
    },
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "ec2:DescribeNetworkInterfaces",
        "ec2:DescribeAvailabilityZones",
        "ec2:DescribeNetworkInterfaceAttribute",
        "ec2:DescribeVpcs",
        "ec2:DescribeRegions",
        "ec2:DescribeNetworkInterfacePermissions",
        "ec2:DescribeSubnets"
      ],
      "Resource": "*"
    }
  ]
}</code></pre>
   <p>Uma política de confiança paraAmazon Kendra permitir assumir um papel.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Effect":"Allow",
         "Principal":<span>{</span>
            "Service":"kendra.amazonaws.com"
         },
         "Action":"sts:AssumeRole"
      }
   ]
}</code></pre>
</awsui-expandable-section></div></awsui-expandable-section></div>

        

        <div class="collapsible" data-expand-section="_collapse_all_"><awsui-expandable-section variant="container" header="IAMfunções para fontes de dados do Dropbox" id="iam-roles-ds-dropbox" expanded="false"><p>Ao usar o Dropbox, você fornece uma função com as seguintes políticas.</p><div class="itemizedlist">
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>Permissão para acessar seuAWS Secrets Manager segredo para autenticar seu Dropbox.</p>
                    </li><li class="listitem">
                        <p>Permissão para chamar as APIs públicas necessárias para o conector do Dropbox.</p>
                    </li><li class="listitem">
                        <p>Permissão para chamar as<code class="code">ListGroupsOlderThanOrderingId</code> APIs<code class="code">BatchPutDocument</code><code class="code">BatchDeleteDocument</code><code class="code">PutPrincipalMapping</code><code class="code">DeletePrincipalMapping</code>,<code class="code">DescribePrincipalMapping</code>,,, e.</p>
                    </li></ul></div><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
"Version": "2012-10-17",
  "Statement": [
  <span>{</span>"Effect": "Allow",
    "Action": [
      "secretsmanager:GetSecretValue"
    ],
    "Resource": [
      "arn:aws:secretsmanager:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:secret:[[secret_id]]"
    ]
  },
  <span>{</span>"Effect": "Allow",
    "Action": [
      "kms:Decrypt"
    ],
    "Resource": [
      "arn:aws:kms:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:key/[[key_id]]"
    ],
    "Condition": <span>{</span>"StringLike": <span>{</span>"kms:ViaService": [
          "secretsmanager.*.amazonaws.com"
        ]
      }
    }
  },
  <span>{</span>"Effect": "Allow",
    "Action": [
        "kendra:PutPrincipalMapping",
        "kendra:DeletePrincipalMapping",
        "kendra:ListGroupsOlderThanOrderingId",
        "kendra:DescribePrincipalMapping"
    ],
    "Resource": ["arn:aws:kendra:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:index/<span>{</span><span>{</span>index_id}}", "arn:aws:kendra:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:index/<span>{</span><span>{</span>index_id}}/data-source/*"]
  },
  <span>{</span>"Effect": "Allow",
    "Action": [
      "kendra:BatchPutDocument",
      "kendra:BatchDeleteDocument"
    ],
    "Resource": "arn:aws:kendra:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:index/<span>{</span><span>{</span>index_id}}"
  }]
}</code></pre>
   <p>Uma política de confiança paraAmazon Kendra permitir assumir um papel.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Effect":"Allow",
         "Principal":<span>{</span>
            "Service":"kendra.amazonaws.com"
         },
         "Action":"sts:AssumeRole"
      }
   ]
}</code></pre>
</awsui-expandable-section></div>

        

        <div class="collapsible" data-expand-section="_collapse_all_"><awsui-expandable-section variant="container" header="IAMfunções para fontes GitHub  de dados" id="iam-roles-ds-github" expanded="false"><p>Ao usar GitHub, você fornece uma função com as seguintes políticas.</p><div class="itemizedlist">
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>Permissão para acessar seuAWS Secrets Manager segredo para autenticar seu GitHub.</p>
                    </li><li class="listitem">
                        <p>Permissão para chamar as APIs públicas necessárias para o GitHub conector.</p>
                    </li><li class="listitem">
                        <p>Permissão para chamar as<code class="code">ListGroupsOlderThanOrderingId</code> APIs<code class="code">BatchPutDocument</code><code class="code">BatchDeleteDocument</code><code class="code">PutPrincipalMapping</code><code class="code">DeletePrincipalMapping</code>,<code class="code">DescribePrincipalMapping</code>,,, e.</p>
                    </li></ul></div><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "secretsmanager:GetSecretValue"
    ],
    "Resource": [
      "arn:aws:secretsmanager:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:secret:[[secret_id]]"
    ]
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "kms:Decrypt"
    ],
    "Resource": [
      "arn:aws:kms:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:key/[[key_id]]"
    ],
    "Condition": <span>{</span>
      "StringLike": <span>{</span>
        "kms:ViaService": [
          "secretsmanager.*.amazonaws.com"
        ]
      }
    }
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
        "kendra:PutPrincipalMapping",
        "kendra:DeletePrincipalMapping",
        "kendra:ListGroupsOlderThanOrderingId",
        "kendra:DescribePrincipalMapping"
    ],
    "Resource": ["arn:aws:kendra:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:index/<span>{</span><span>{</span>index_id}}", "arn:aws:kendra:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:index/<span>{</span><span>{</span>index_id}}/data-source/*"]
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "kendra:BatchPutDocument",
      "kendra:BatchDeleteDocument"
    ],
    "Resource": "arn:aws:kendra:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:index/<span>{</span><span>{</span>index_id}}"
  }]
}</code></pre>
   <p>Uma política de confiança paraAmazon Kendra permitir assumir um papel.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Effect":"Allow",
         "Principal":<span>{</span>
            "Service":"kendra.amazonaws.com"
         },
         "Action":"sts:AssumeRole"
      }
   ]
}</code></pre>
</awsui-expandable-section></div>


        
        <div class="collapsible" data-expand-section="_collapse_all_"><awsui-expandable-section variant="container" header="IAMfunções para fontes de dados do Gmail" id="iam-roles-ds-gmail" expanded="false"><p>Ao usar o Gmail, você fornece uma função com as seguintes políticas.</p><div class="itemizedlist">
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>Permissão para acessar seuAWS Secrets Manager segredo para autenticar seu Gmail.</p>
                    </li><li class="listitem">
                        <p>Permissão para chamar as APIs públicas necessárias para o conector do Gmail.</p>
                    </li><li class="listitem">
                        <p>Permissão para chamar as<code class="code">ListGroupsOlderThanOrderingId</code> APIs<code class="code">BatchPutDocument</code><code class="code">BatchDeleteDocument</code><code class="code">PutPrincipalMapping</code><code class="code">DeletePrincipalMapping</code>,<code class="code">DescribePrincipalMapping</code>,,, e.</p>
                    </li></ul></div><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
"Version": "2012-10-17",
  "Statement": [
  <span>{</span>"Effect": "Allow",
    "Action": [
      "secretsmanager:GetSecretValue"
    ],
    "Resource": [
      "arn:aws:secretsmanager:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:secret:[[secret_id]]"
    ]
  },
  <span>{</span>"Effect": "Allow",
    "Action": [
      "kms:Decrypt"
    ],
    "Resource": [
      "arn:aws:kms:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:key/[[key_id]]"
    ],
    "Condition": <span>{</span>"StringLike": <span>{</span>"kms:ViaService": [
          "secretsmanager.*.amazonaws.com"
        ]
      }
    }
  },
  <span>{</span>"Effect": "Allow",
    "Action": [
        "kendra:PutPrincipalMapping",
        "kendra:DeletePrincipalMapping",
        "kendra:ListGroupsOlderThanOrderingId",
        "kendra:DescribePrincipalMapping"
    ],
    "Resource": ["arn:aws:kendra:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:index/<span>{</span><span>{</span>index_id}}", "arn:aws:kendra:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:index/<span>{</span><span>{</span>index_id}}/data-source/*"]
  },
  <span>{</span>"Effect": "Allow",
    "Action": [
      "kendra:BatchPutDocument",
      "kendra:BatchDeleteDocument"
    ],
    "Resource": "arn:aws:kendra:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:index/<span>{</span><span>{</span>index_id}}"
  }]
}</code></pre>
   <p>Uma política de confiança paraAmazon Kendra permitir assumir um papel.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Effect":"Allow",
         "Principal":<span>{</span>
            "Service":"kendra.amazonaws.com"
         },
         "Action":"sts:AssumeRole"
      }
   ]
}</code></pre>
</awsui-expandable-section></div>

        

        <div class="collapsible" data-expand-section="_collapse_all_"><awsui-expandable-section variant="container" header="IAMfunções para fontes de dados do Google Drive" id="iam-roles-ds-gd" expanded="false"><p>Ao usar uma fonte de dados do Google Workspace Drive, vocêAmazon Kendra fornece uma função que tem as permissões necessárias para se conectar ao site. Dentre elas estão: </p><div class="itemizedlist">
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>Permissão para obter e decifrar oAWS Secrets Manager segredo que contém o e-mail da conta do cliente, o e-mail da conta do administrador e a chave privada necessários para se conectar ao site do Google Drive. Para obter mais informações sobre o conteúdo do segredo, consulte<a href="./data-source-google-drive.html">Google Drive</a>.</p>
                    </li><li class="listitem">
                        <p>Permissão para usar <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_BatchPutDocument.html">BatchPutDocument</a>as <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_BatchDeleteDocument.html">BatchDeleteDocument</a>APIs e.</p>
                    </li></ul></div><p>O modeloIAM de política a seguir fornece as permissões necessárias:</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "secretsmanager:GetSecretValue"
    ],
    "Resource": [
      "arn:aws:secretsmanager:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:secret:<code class="replaceable">secret ID</code>"
    ]
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "kms:Decrypt"
    ],
    "Resource": [
      "arn:aws:kms:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:key/<code class="replaceable">key ID</code>"
    ],
    "Condition": <span>{</span>
      "StringLike": <span>{</span>
        "kms:ViaService": [
          "secretsmanager.*.amazonaws.com"
        ]
      }
    }
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "kendra:BatchPutDocument",
      "kendra:BatchDeleteDocument"
    ],
    "Resource": "arn:aws:kendra:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:index/<code class="replaceable">index ID</code>"
  }]
}
</code></pre>
   <p>Uma política de confiança paraAmazon Kendra permitir assumir um papel.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Effect":"Allow",
         "Principal":<span>{</span>
            "Service":"kendra.amazonaws.com"
         },
         "Action":"sts:AssumeRole"
      }
   ]
}</code></pre>
</awsui-expandable-section></div>

        

        <div class="collapsible" data-expand-section="_collapse_all_"><awsui-expandable-section variant="container" header="IAMfunções para fontes de dados do Jira" id="iam-roles-ds-jira" expanded="false"><p>Ao usar o Jira, você fornece uma função com as seguintes políticas.</p><div class="itemizedlist">
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>Permissão para acessar seuAWS Secrets Manager segredo para autenticar seu Jira.</p>
                    </li><li class="listitem">
                        <p>Permissão para chamar as APIs públicas necessárias para o conector Jira.</p>
                    </li><li class="listitem">
                        <p>Permissão para chamar as<code class="code">ListGroupsOlderThanOrderingId</code> APIs<code class="code">BatchPutDocument</code><code class="code">BatchDeleteDocument</code><code class="code">PutPrincipalMapping</code><code class="code">DeletePrincipalMapping</code>,<code class="code">DescribePrincipalMapping</code>,,, e.</p>
                    </li></ul></div><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "secretsmanager:GetSecretValue"
    ],
    "Resource": [
      "arn:aws:secretsmanager:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:secret:[[secret_id]]"
    ]
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "kms:Decrypt"
    ],
    "Resource": [
      "arn:aws:kms:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:key/[[key_id]]"
    ],
    "Condition": <span>{</span>
      "StringLike": <span>{</span>
        "kms:ViaService": [
          "secretsmanager.*.amazonaws.com"
        ]
      }
    }
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
        "kendra:PutPrincipalMapping",
        "kendra:DeletePrincipalMapping",
        "kendra:ListGroupsOlderThanOrderingId",
        "kendra:DescribePrincipalMapping"
    ],
    "Resource": ["arn:aws:kendra:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:index/<span>{</span><span>{</span>index_id}}", "arn:aws:kendra:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:index/<span>{</span><span>{</span>index_id}}/data-source/*"]
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "kendra:BatchPutDocument",
      "kendra:BatchDeleteDocument"
    ],
    "Resource": "arn:aws:kendra:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:index/<span>{</span><span>{</span>index_id}}"
  }]
}</code></pre>
   <p>Uma política de confiança paraAmazon Kendra permitir assumir um papel.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Effect":"Allow",
         "Principal":<span>{</span>
            "Service":"kendra.amazonaws.com"
         },
         "Action":"sts:AssumeRole"
      }
   ]
}</code></pre>
</awsui-expandable-section></div>

        

        <div class="collapsible" data-expand-section="_collapse_all_"><awsui-expandable-section variant="container" header="IAMfunções para fontes de dados do Microsoft Exchange" id="iam-roles-ds-exchange" expanded="false"><p>Ao usar uma fonte de dados do Microsoft Exchange, vocêAmazon Kendra fornece uma função que tem as permissões necessárias para se conectar ao site. Dentre elas estão: </p><div class="itemizedlist">
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>Permissão para obter e descriptografar oAWS Secrets Manager segredo que contém o ID do aplicativo e a chave secreta necessários para se conectar ao site do Microsoft Exchange. Para obter mais informações sobre o conteúdo do segredo, consulte<a href="./data-source-yammer.html">Microsoft Yammer</a>.</p>
                    </li><li class="listitem">
                        <p>Permissão para usar <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_BatchPutDocument.html">BatchPutDocument</a>as <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_BatchDeleteDocument.html">BatchDeleteDocument</a>APIs e.</p>
                    </li></ul></div><p>O modeloIAM de política a seguir fornece as permissões necessárias:</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "secretsmanager:GetSecretValue"
    ],
    "Resource": [
      "arn:aws:secretsmanager:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:secret:<code class="replaceable">secret ID</code>"
    ]
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "kms:Decrypt"
    ],
    "Resource": [
      "arn:aws:kms:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:key/<code class="replaceable">key ID</code>"
    ],
    "Condition": <span>{</span>
      "StringLike": <span>{</span>
        "kms:ViaService": [
          "secretsmanager.*.amazonaws.com"
        ]
      }
    }
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "kendra:BatchPutDocument",
      "kendra:BatchDeleteDocument"
    ],
    "Resource": "arn:aws:kendra:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:index/<code class="replaceable">index ID</code>"
  }]
}
</code></pre><p>Se você estiver armazenando a lista de usuários a serem indexados em umAmazon S3 bucket, também deverá fornecer permissão para usar a<code class="code">GetObject</code> operação S3. O modeloIAM de política a seguir fornece as permissões necessárias:</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "secretsmanager:GetSecretValue"
    ],
    "Resource": [
      "arn:aws:secretsmanager:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:secret:<code class="replaceable">secret ID</code>"
    ]
  },
  <span>{</span>
    "Action": [
      "s3:GetObject"
    ],
    "Resource": [
      "arn:aws:s3:::<code class="replaceable">input_bucket_name</code>/*"
    ],
    "Effect": "Allow"
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "kms:Decrypt"
    ],
    "Resource": [
      "arn:aws:kms:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:key/[[key IDs]]"
    ],
    "Condition": <span>{</span>
      "StringLike": <span>{</span>
        "kms:ViaService": [
          "secretsmanager.*.amazonaws.com",
          "s3.*.amazonaws.com"
        ]
      }
    }
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "kendra:BatchPutDocument",
      "kendra:BatchDeleteDocument"
    ],
    "Resource": "arn:aws:kendra:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:index/<code class="replaceable">index ID</code>"
  }]
}
</code></pre>
   <p>Uma política de confiança paraAmazon Kendra permitir assumir um papel.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Effect":"Allow",
         "Principal":<span>{</span>
            "Service":"kendra.amazonaws.com"
         },
         "Action":"sts:AssumeRole"
      }
   ]
}</code></pre>
</awsui-expandable-section></div>

        

        <div class="collapsible" data-expand-section="_collapse_all_"><awsui-expandable-section variant="container" header="IAMfunções para fontes de OneDrive  dados da Microsoft" id="iam-roles-ds-on" expanded="false"><p>Ao usar uma fonte de OneDrive  dados da Microsoft, vocêAmazon Kendra fornece uma função que tem as permissões necessárias para se conectar ao site. Dentre elas estão: </p><div class="itemizedlist">
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>Permissão para obter e decifrar oAWS Secrets Manager segredo que contém o ID do aplicativo e a chave secreta necessários para se conectar ao OneDrive  site. Para obter mais informações sobre o conteúdo do segredo, consulte<a href="./data-source-onedrive.html">Microsoft OneDrive</a>.</p>
                    </li><li class="listitem">
                        <p>Permissão para usar <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_BatchPutDocument.html">BatchPutDocument</a>as <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_BatchDeleteDocument.html">BatchDeleteDocument</a>APIs e.</p>
                    </li></ul></div><p>O modeloIAM de política a seguir fornece as permissões necessárias:</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "secretsmanager:GetSecretValue"
    ],
    "Resource": [
      "arn:aws:secretsmanager:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:secret:<code class="replaceable">secret ID</code>"
    ]
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "kms:Decrypt"
    ],
    "Resource": [
      "arn:aws:kms:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:key/<code class="replaceable">key ID</code>"
    ],
    "Condition": <span>{</span>
      "StringLike": <span>{</span>
        "kms:ViaService": [
          "secretsmanager.*.amazonaws.com"
        ]
      }
    }
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "kendra:BatchPutDocument",
      "kendra:BatchDeleteDocument"
    ],
    "Resource": "arn:aws:kendra:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:index/<code class="replaceable">index ID</code>"
  }]
}
</code></pre><p>Se você estiver armazenando a lista de usuários a serem indexados em umAmazon S3 bucket, também deverá fornecer permissão para usar a<code class="code">GetObject</code> operação S3. O modeloIAM de política a seguir fornece as permissões necessárias:</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "secretsmanager:GetSecretValue"
    ],
    "Resource": [
      "arn:aws:secretsmanager:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:secret:<code class="replaceable">secret ID</code>"
    ]
  },
  <span>{</span>
    "Action": [
      "s3:GetObject"
    ],
    "Resource": [
      "arn:aws:s3:::<code class="replaceable">input_bucket_name</code>/*"
    ],
    "Effect": "Allow"
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "kms:Decrypt"
    ],
    "Resource": [
      "arn:aws:kms:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:key/[[key IDs]]"
    ],
    "Condition": <span>{</span>
      "StringLike": <span>{</span>
        "kms:ViaService": [
          "secretsmanager.*.amazonaws.com",
          "s3.*.amazonaws.com"
        ]
      }
    }
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "kendra:BatchPutDocument",
      "kendra:BatchDeleteDocument"
    ],
    "Resource": "arn:aws:kendra:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:index/<code class="replaceable">index ID</code>"
  }]
}
</code></pre>
   <p>Uma política de confiança paraAmazon Kendra permitir assumir um papel.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Effect":"Allow",
         "Principal":<span>{</span>
            "Service":"kendra.amazonaws.com"
         },
         "Action":"sts:AssumeRole"
      }
   ]
}</code></pre>
</awsui-expandable-section></div>

        

        <div class="collapsible" data-expand-section="_collapse_all_"><awsui-expandable-section variant="container" header="IAMfunções para fontes de SharePoint  dados da Microsoft" id="iam-roles-ds-spo" expanded="false"><div class="collapsible" data-expand-section="_collapse_all_"><awsui-expandable-section variant="container" header="IAMfunções do SharePoint  Conector v1.0" id="iam-roles-sharepoint-v1" expanded="false"><p>Para uma fonte de dados do SharePoint  conector Microsoft v1.0, você fornece uma função com as seguintes políticas.</p><div class="itemizedlist">
                             
                             
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p>Permissão para acessar oAWS Secrets Manager segredo que contém o nome de usuário e a senha do SharePoint  site. Para obter mais informações sobre o conteúdo do segredo, consulte<a href="./data-source-sharepoint.html">Microsoft SharePoint</a>.</p>
                            </li><li class="listitem">
                                <p>Permissão para usar a chave mestra doAWS KMS cliente (CMK) para descriptografar o nome do usuário e a senha do armazenada porAWS Secrets Manager.</p>
                            </li><li class="listitem">
                                <p>Permissão para usar as<code class="code">BatchDeleteDocument</code> operações<code class="code">BatchPutDocument</code> e para atualizar o índice.</p>
                            </li><li class="listitem">
                                <p>Permissão para acessar oAmazon S3 bucket que contém o certificado SSL usado para se comunicar com o SharePoint  site.</p>
                            </li></ul></div><p>Você também deve anexar uma política de confiança que permitaAmazon Kendra ao assumir a função.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "secretsmanager:GetSecretValue"
            ],
            "Resource": [
                "arn:aws:secretsmanager:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:secret:<code class="replaceable">secret ID</code>"
            ]
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "kms:Decrypt"
            ],
            "Resource": [
                "arn:aws:kms:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:key/<code class="replaceable">key ID</code>"
            ]
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "kendra:BatchPutDocument",
                "kendra:BatchDeleteDocument"
            ],
            "Resource": [
                "arn:aws:kendra:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:index/<code class="replaceable">index ID</code>"
            ],
            "Condition": <span>{</span>
                "StringLike": <span>{</span>
                    "kms:ViaService": [
                        "kendra.*.amazonaws.com"
                    ]
                }
            }
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "s3:GetObject"
            ],
            "Resource": [
                "arn:aws:s3:::<code class="replaceable">bucket name</code>/*"
            ]
        }
    ]
}</code></pre><p>Se você criptografou oAmazon S3 bucket que contém o certificado SSL usado para se comunicar com o SharePoint  site, forneça uma política para darAmazon Kendra acesso à chave. </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "kms:Decrypt"
            ],
            "Resource": [
                "arn:aws:kms:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:key/<code class="replaceable">key ID</code>"
            ]
        }
    ]
}</code></pre>
   <p>Uma política de confiança paraAmazon Kendra permitir assumir um papel.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Effect":"Allow",
         "Principal":<span>{</span>
            "Service":"kendra.amazonaws.com"
         },
         "Action":"sts:AssumeRole"
      }
   ]
}</code></pre>
</awsui-expandable-section></div><div class="collapsible" data-expand-section="_collapse_all_"><awsui-expandable-section variant="container" header="IAMfunções para o SharePoint  Connector v2.0" id="iam-roles-sharepoint-v2" expanded="false"><p>Para uma fonte de dados do SharePoint  conector Microsoft v2.0, você fornece uma função com as seguintes políticas.</p><div class="itemizedlist">
                             
                             
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p>Permissão para acessar oAWS Secrets Manager segredo que contém as credenciais de autenticação do SharePoint  site. Para obter mais informações sobre o conteúdo do segredo, consulte<a href="./data-source-sharepoint.html">Microsoft SharePoint</a>.</p>
                            </li><li class="listitem">
                                <p>Permissão para usar a chave mestra doAWS KMS cliente (CMK) para descriptografar o nome do usuário e a senha do armazenada porAWS Secrets Manager.</p>
                            </li><li class="listitem">
                                <p>Permissão para usar as<code class="code">BatchDeleteDocument</code> operações<code class="code">BatchPutDocument</code> e para atualizar o índice.</p>
                            </li><li class="listitem">
                                <p>Permissão para acessar oAmazon S3 bucket que contém o certificado SSL usado para se comunicar com o SharePoint  site.</p>
                            </li></ul></div><p>Você também deve anexar uma política de confiança que permitaAmazon Kendra ao assumir a função.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "secretsmanager:GetSecretValue"
      ],
      "Resource": [
        "arn:aws:secretsmanager:<code class="replaceable">region</code>:<code class="replaceable">account_id</code>:secret:<code class="replaceable">secret_id</code>"
      ]
    },
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "kms:Decrypt"
      ],
      "Resource": [
        "arn:aws:kms:<code class="replaceable">region</code>:<code class="replaceable">account_id</code>:key/<code class="replaceable">key_id</code>"
      ],
      "Condition": <span>{</span>
        "StringLike": <span>{</span>
          "kms:ViaService": [
            "secretsmanager.*.amazonaws.com"
          ]
        }
      }
    },
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "kendra:PutPrincipalMapping",
        "kendra:DeletePrincipalMapping",
        "kendra:ListGroupsOlderThanOrderingId",
        "kendra:DescribePrincipalMapping"
      ],
      "Resource": [
        "arn:aws:kendra:<code class="replaceable">region</code>:<code class="replaceable">account_id</code>:index/<code class="replaceable">index_id</code>",
        "arn:aws:kendra:<code class="replaceable">region</code>:<code class="replaceable">account_id</code>:index/<code class="replaceable">index_id</code>/data-source/*"
      ]
    },
    <span>{</span>
      "Action": [
        "s3:GetObject"
      ],
      "Resource": [
        "arn:aws:s3:::<code class="replaceable">input_bucket_name</code>/<code class="replaceable">input_key_name</code>"
      ],
      "Effect": "Allow"
    },
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "kendra:BatchPutDocument",
        "kendra:BatchDeleteDocument"
      ],
      "Resource": "arn:aws:kendra:<code class="replaceable">region</code>:<code class="replaceable">account_id</code>:index/<code class="replaceable">index_id</code>"
    },
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "ec2:CreateNetworkInterface"
      ],
      "Resource": [
        "arn:aws:ec2:<code class="replaceable">region</code>:<code class="replaceable">account_id</code>:subnet/<code class="replaceable">subnet_ids</code>",
        "arn:aws:ec2:<code class="replaceable">region</code>:<code class="replaceable">account_id</code>:security-group/<code class="replaceable">security_group</code>"
      ]
    },
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "ec2:CreateNetworkInterface"
      ],
      "Resource": "arn:aws:ec2:<code class="replaceable">region</code>:<code class="replaceable">account_id</code>:network-interface/*",
      "Condition": <span>{</span>
        "StringLike": <span>{</span>
          "aws:RequestTag/AWS_KENDRA": "kendra_<code class="replaceable">account_id</code>_<code class="replaceable">index_id</code>_*"
        }
      }
    },
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "ec2:CreateTags"
      ],
      "Resource": "arn:aws:ec2:<code class="replaceable">region</code>:<code class="replaceable">account_id</code>:network-interface/*",
      "Condition": <span>{</span>
        "StringEquals": <span>{</span>
          "ec2:CreateAction": "CreateNetworkInterface"
        }
      }
    },
    
<span>{</span>
      "Effect": "Allow",
      "Action": [
        "ec2:CreateNetworkInterfacePermission"
      ],
      "Resource": "arn:aws:ec2:<code class="replaceable">region</code>:<code class="replaceable">account_id</code>:network-interface/*",
      "Condition": <span>{</span>
        "StringLike": <span>{</span>
          "aws:ResourceTag/AWS_KENDRA": "kendra_<code class="replaceable">account_id</code>_<code class="replaceable">index_id</code>_*"
        }
      }
    },
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "ec2:DescribeNetworkInterfaces",
        "ec2:DescribeAvailabilityZones",
        "ec2:DescribeNetworkInterfaceAttribute",
        "ec2:DescribeVpcs",
        "ec2:DescribeRegions",
        "ec2:DescribeNetworkInterfacePermissions",
        "ec2:DescribeSubnets"
      ],
      "Resource": "*"
    }
  ]
}</code></pre><p>Se você criptografou oAmazon S3 bucket que contém o certificado SSL usado para se comunicar com o SharePoint  site, forneça uma política para darAmazon Kendra acesso à chave. </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "kms:Decrypt"
            ],
            "Resource": [
                "arn:aws:kms:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:key/<code class="replaceable">key ID</code>"
            ]
        }
    ]
}</code></pre>
   <p>Uma política de confiança paraAmazon Kendra permitir assumir um papel.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Effect":"Allow",
         "Principal":<span>{</span>
            "Service":"kendra.amazonaws.com"
         },
         "Action":"sts:AssumeRole"
      }
   ]
}</code></pre>
</awsui-expandable-section></div></awsui-expandable-section></div>

        

        

        <div class="collapsible" data-expand-section="_collapse_all_"><awsui-expandable-section variant="container" header="IAMfunções para fontes de dados do Microsoft Teams" id="iam-roles-ds-teams" expanded="false"><p>Ao usar uma fonte de dados do Microsoft Teams, vocêAmazon Kendra fornece uma função que tem as permissões necessárias para se conectar ao site. Dentre elas estão: </p><div class="itemizedlist">
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>Permissão para obter e decifrar oAWS Secrets Manager segredo que contém o ID do cliente e o segredo do cliente necessários para se conectar ao Microsoft Teams. Para obter mais informações sobre o conteúdo do segredo, consulte<a href="./data-source-teams.html">Microsoft Teams</a>.</p>
                    </li><li class="listitem">
                         
   <p>Uma política de confiança paraAmazon Kendra permitir assumir um papel.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Effect":"Allow",
         "Principal":<span>{</span>
            "Service":"kendra.amazonaws.com"
         },
         "Action":"sts:AssumeRole"
      }
   ]
}</code></pre>
 
                    </li></ul></div><p>O modeloIAM de política a seguir fornece as permissões necessárias:</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "secretsmanager:GetSecretValue"
    ],
    "Resource": [
      "arn:aws:secretsmanager:<code class="replaceable">region</code>:<code class="replaceable">client ID</code>:secret:<code class="replaceable">secret ID</code>"
    ]
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "kms:Decrypt"
    ],
    "Resource": [
      "arn:aws:kms:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:key/<code class="replaceable">key ID</code>"
    ],
    "Condition": <span>{</span>
      "StringLike": <span>{</span>
        "kms:ViaService": [
          "secretsmanager.*.amazonaws.com"
        ]
      }
    }
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "kendra:BatchPutDocument",
      "kendra:BatchDeleteDocument"
    ],
    "Resource": "arn:aws:kendra:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:index/<code class="replaceable">index ID</code>"
  }]
}
        </code></pre></awsui-expandable-section></div>

        

        <div class="collapsible" data-expand-section="_collapse_all_"><awsui-expandable-section variant="container" header="IAMfunções para fontes de dados do Microsoft Yammer" id="iam-roles-ds-yammer" expanded="false"><p>Ao usar uma fonte de dados do Microsoft Yammer, vocêAmazon Kendra fornece uma função que tem as permissões necessárias para se conectar ao site. Dentre elas estão: </p><div class="itemizedlist">
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>Permissão para obter e decifrar oAWS Secrets Manager segredo que contém o ID do aplicativo e a chave secreta necessários para se conectar ao site do Microsoft Yammer. Para obter mais informações sobre o conteúdo do segredo, consulte<a href="./data-source-yammer.html">Microsoft Yammer</a>.</p>
                    </li><li class="listitem">
                        <p>Permissão para usar <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_BatchPutDocument.html">BatchPutDocument</a>as <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_BatchDeleteDocument.html">BatchDeleteDocument</a>APIs e.</p>
                    </li></ul></div><p>O modeloIAM de política a seguir fornece as permissões necessárias:</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "secretsmanager:GetSecretValue"
    ],
    "Resource": [
      "arn:aws:secretsmanager:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:secret:<code class="replaceable">secret ID</code>"
    ]
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "kms:Decrypt"
    ],
    "Resource": [
      "arn:aws:kms:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:key/<code class="replaceable">key ID</code>"
    ],
    "Condition": <span>{</span>
      "StringLike": <span>{</span>
        "kms:ViaService": [
          "secretsmanager.*.amazonaws.com"
        ]
      }
    }
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "kendra:BatchPutDocument",
      "kendra:BatchDeleteDocument"
    ],
    "Resource": "arn:aws:kendra:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:index/<code class="replaceable">index ID</code>"
  }]
}
</code></pre><p>Se você estiver armazenando a lista de usuários a serem indexados em umAmazon S3 bucket, também deverá fornecer permissão para usar a<code class="code">GetObject</code> operação S3. O modeloIAM de política a seguir fornece as permissões necessárias:</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "secretsmanager:GetSecretValue"
    ],
    "Resource": [
      "arn:aws:secretsmanager:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:secret:<code class="replaceable">secret ID</code>"
    ]
  },
  <span>{</span>
    "Action": [
      "s3:GetObject"
    ],
    "Resource": [
      "arn:aws:s3:::<code class="replaceable">input_bucket_name</code>/*"
    ],
    "Effect": "Allow"
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "kms:Decrypt"
    ],
    "Resource": [
      "arn:aws:kms:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:key/[[key IDs]]"
    ],
    "Condition": <span>{</span>
      "StringLike": <span>{</span>
        "kms:ViaService": [
          "secretsmanager.*.amazonaws.com",
          "s3.*.amazonaws.com"
        ]
      }
    }
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "kendra:BatchPutDocument",
      "kendra:BatchDeleteDocument"
    ],
    "Resource": "arn:aws:kendra:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:index/<code class="replaceable">index ID</code>"
  }]
}
</code></pre>
   <p>Uma política de confiança paraAmazon Kendra permitir assumir um papel.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Effect":"Allow",
         "Principal":<span>{</span>
            "Service":"kendra.amazonaws.com"
         },
         "Action":"sts:AssumeRole"
      }
   ]
}</code></pre>
</awsui-expandable-section></div>

        

        <div class="collapsible" data-expand-section="_collapse_all_"><awsui-expandable-section variant="container" header="IAMfunções para fontes de dados do Quip" id="iam-roles-ds-quip" expanded="false"><p>Ao usar o Quip, você fornece uma função com as seguintes políticas.</p><div class="itemizedlist">
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>Permissão para acessar seuAWS Secrets Manager segredo para autenticar seu Quip.</p>
                    </li><li class="listitem">
                        <p>Permissão para chamar as APIs públicas necessárias para o conector Quip.</p>
                    </li><li class="listitem">
                        <p>Permissão para chamar as<code class="code">ListGroupsOlderThanOrderingId</code> APIs<code class="code">BatchPutDocument</code><code class="code">BatchDeleteDocument</code><code class="code">PutPrincipalMapping</code><code class="code">DeletePrincipalMapping</code>,<code class="code">DescribePrincipalMapping</code>,,, e.</p>
                    </li></ul></div><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "secretsmanager:GetSecretValue"
    ],
    "Resource": [
      "arn:aws:secretsmanager:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:secret:[[secret_id]]"
    ]
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "kms:Decrypt"
    ],
    "Resource": [
      "arn:aws:kms:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:key/[[key_id]]"
    ],
    "Condition": <span>{</span>
      "StringLike": <span>{</span>
        "kms:ViaService": [
          "secretsmanager.*.amazonaws.com"
        ]
      }
    }
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
        "kendra:PutPrincipalMapping",
        "kendra:DeletePrincipalMapping",
        "kendra:ListGroupsOlderThanOrderingId",
        "kendra:DescribePrincipalMapping"
    ],
    "Resource": ["arn:aws:kendra:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:index/<span>{</span><span>{</span>index_id}}", "arn:aws:kendra:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:index/<span>{</span><span>{</span>index_id}}/data-source/*"]
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "kendra:BatchPutDocument",
      "kendra:BatchDeleteDocument"
    ],
    "Resource": "arn:aws:kendra:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:index/<span>{</span><span>{</span>index_id}}"
  }]
}</code></pre>
   <p>Uma política de confiança paraAmazon Kendra permitir assumir um papel.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Effect":"Allow",
         "Principal":<span>{</span>
            "Service":"kendra.amazonaws.com"
         },
         "Action":"sts:AssumeRole"
      }
   ]
}</code></pre>
</awsui-expandable-section></div>

        

        <div class="collapsible" data-expand-section="_collapse_all_"><awsui-expandable-section variant="container" header="IAMfunções para fontes de dados do Salesforce" id="iam-roles-ds-sf" expanded="false"><p>Quando você usa um Salesforce como fonte de dados, você fornece uma função com as seguintes políticas:</p><div class="itemizedlist">
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>Permissão para acessar oAWS Secrets Manager segredo que contém o nome de usuário e a senha do site da Salesforce. Para obter mais informações sobre o conteúdo do segredo, consulte<a href="./data-source-salesforce.html">Salesforce</a>.</p>
                    </li><li class="listitem">
                        <p>Permissão para usar a chave mestra doAWS KMS cliente (CMK) para descriptografar o nome do usuário e a senha do armazenada porSecrets Manager.</p>
                    </li><li class="listitem">
                        <p>Permissão para usar as<code class="code">BatchDeleteDocument</code> operações<code class="code">BatchPutDocument</code> e para atualizar o índice.</p>
                    </li></ul></div><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "secretsmanager:GetSecretValue"
    ],
    "Resource": [
      "arn:aws:secretsmanager:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:secret:<code class="replaceable">secret ID</code>"
    ]
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "kms:Decrypt"
    ],
    "Resource": [
      "arn:aws:kms:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:key/<code class="replaceable">key ID</code>"
    ],
    "Condition": <span>{</span>
      "StringLike": <span>{</span>
        "kms:ViaService": [
          "secretsmanager.*.amazonaws.com"
        ]
      }
    }
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "kendra:BatchPutDocument",
      "kendra:BatchDeleteDocument"
    ],
    "Resource": "arn:aws:kendra:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:index/<code class="replaceable">index ID</code>"
  }]
}</code></pre>
   <p>Uma política de confiança paraAmazon Kendra permitir assumir um papel.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Effect":"Allow",
         "Principal":<span>{</span>
            "Service":"kendra.amazonaws.com"
         },
         "Action":"sts:AssumeRole"
      }
   ]
}</code></pre>
</awsui-expandable-section></div>


        

        <div class="collapsible" data-expand-section="_collapse_all_"><awsui-expandable-section variant="container" header="IAMfunções para fontes ServiceNow  de dados" id="iam-roles-ds-sn" expanded="false"><p>Ao usar um ServiceNow  como fonte de dados, você fornece uma função com as seguintes políticas:</p><div class="itemizedlist">
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>Permissão para acessar oSecrets Manager segredo que contém o nome de usuário e a senha do ServiceNow  site. Para obter mais informações sobre o conteúdo do segredo, consulte<a href="./data-source-servicenow.html">ServiceNow</a>.</p>
                    </li><li class="listitem">
                        <p>Permissão para usar a chave mestra doAWS KMS cliente (CMK) para descriptografar o nome do usuário e a senha do armazenada porSecrets Manager.</p>
                    </li><li class="listitem">
                        <p>Permissão para usar as<code class="code">BatchDeleteDocument</code> operações<code class="code">BatchPutDocument</code> e para atualizar o índice.</p>
                    </li></ul></div><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "secretsmanager:GetSecretValue"
    ],
    "Resource": [
      "arn:aws:secretsmanager:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:secret:<code class="replaceable">secret ID</code>"
    ]
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "kms:Decrypt"
    ],
    "Resource": [
      "arn:aws:kms:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:key/<code class="replaceable">key ID</code>"
    ],
    "Condition": <span>{</span>
      "StringLike": <span>{</span>
        "kms:ViaService": [
          "secretsmanager.*.amazonaws.com"
        ]
      }
    }
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "kendra:BatchPutDocument",
      "kendra:BatchDeleteDocument"
    ],
    "Resource": "arn:aws:kendra:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:index/<code class="replaceable">index ID</code>"
  }]
}</code></pre>
   <p>Uma política de confiança paraAmazon Kendra permitir assumir um papel.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Effect":"Allow",
         "Principal":<span>{</span>
            "Service":"kendra.amazonaws.com"
         },
         "Action":"sts:AssumeRole"
      }
   ]
}</code></pre>
</awsui-expandable-section></div>

        

        <div class="collapsible" data-expand-section="_collapse_all_"><awsui-expandable-section variant="container" header="IAMfunções para fontes de dados do Slack" id="iam-roles-ds-slack" expanded="false"><p>Ao usar o Slack, você fornece uma função com as políticas a seguir.</p><div class="itemizedlist">
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>Permissão para acessar seuAWS Secrets Manager segredo para autenticar seu Slack.</p>
                    </li><li class="listitem">
                        <p>Permissão para chamar as APIs públicas necessárias para o conector Slack.</p>
                    </li><li class="listitem">
                        <p>Permissão para chamar as<code class="code">ListGroupsOlderThanOrderingId</code> APIs<code class="code">BatchPutDocument</code><code class="code">BatchDeleteDocument</code><code class="code">PutPrincipalMapping</code><code class="code">DeletePrincipalMapping</code>,<code class="code">DescribePrincipalMapping</code>,,, e.</p>
                    </li></ul></div><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "secretsmanager:GetSecretValue"
    ],
    "Resource": [
      "arn:aws:secretsmanager:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:secret:[[secret_id]]"
    ]
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "kms:Decrypt"
    ],
    "Resource": [
      "arn:aws:kms:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:key/[[key_id]]"
    ],
    "Condition": <span>{</span>
      "StringLike": <span>{</span>
        "kms:ViaService": [
          "secretsmanager.*.amazonaws.com"
        ]
      }
    }
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
        "kendra:PutPrincipalMapping",
        "kendra:DeletePrincipalMapping",
        "kendra:ListGroupsOlderThanOrderingId",
        "kendra:DescribePrincipalMapping"
    ],
    "Resource": ["arn:aws:kendra:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:index/<span>{</span><span>{</span>index_id}}", "arn:aws:kendra:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:index/<span>{</span><span>{</span>index_id}}/data-source/*"]
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "kendra:BatchPutDocument",
      "kendra:BatchDeleteDocument"
    ],
    "Resource": "arn:aws:kendra:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:index/<span>{</span><span>{</span>index_id}}"
  }]
}</code></pre>
   <p>Uma política de confiança paraAmazon Kendra permitir assumir um papel.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Effect":"Allow",
         "Principal":<span>{</span>
            "Service":"kendra.amazonaws.com"
         },
         "Action":"sts:AssumeRole"
      }
   ]
}</code></pre>
</awsui-expandable-section></div>

        

        <div class="collapsible" data-expand-section="_collapse_all_"><awsui-expandable-section variant="container" header="IAMfunções para fontes de dados do Zendesk" id="iam-roles-ds-zendesk" expanded="false"><p>Ao usar o Zendesk, você fornece uma função com as seguintes políticas.</p><div class="itemizedlist">
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>Permissão para acessar seuAWS Secrets Manager segredo para autenticar sua Zendesk Suite.</p>
                    </li><li class="listitem">
                        <p>Permissão para chamar as APIs públicas necessárias para o conector do Zendesk.</p>
                    </li><li class="listitem">
                        <p>Permissão para chamar as<code class="code">ListGroupsOlderThanOrderingId</code> APIs<code class="code">BatchPutDocument</code><code class="code">BatchDeleteDocument</code><code class="code">PutPrincipalMapping</code><code class="code">DeletePrincipalMapping</code>,<code class="code">DescribePrincipalMapping</code>,,, e.</p>
                    </li></ul></div><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "secretsmanager:GetSecretValue"
    ],
    "Resource": [
      "arn:aws:secretsmanager:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:secret:[[secret_id]]"
    ]
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "kms:Decrypt"
    ],
    "Resource": [
      "arn:aws:kms:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:key/[[key_id]]"
    ],
    "Condition": <span>{</span>
      "StringLike": <span>{</span>
        "kms:ViaService": [
          "secretsmanager.*.amazonaws.com"
        ]
      }
    }
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
        "kendra:PutPrincipalMapping",
        "kendra:DeletePrincipalMapping",
        "kendra:ListGroupsOlderThanOrderingId",
        "kendra:DescribePrincipalMapping"
    ],
    "Resource": ["arn:aws:kendra:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:index/<span>{</span><span>{</span>index_id}}", "arn:aws:kendra:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:index/<span>{</span><span>{</span>index_id}}/data-source/*"]
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "kendra:BatchPutDocument",
      "kendra:BatchDeleteDocument"
    ],
    "Resource": "arn:aws:kendra:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:index/<span>{</span><span>{</span>index_id}}"
  }]
}</code></pre>
   <p>Uma política de confiança paraAmazon Kendra permitir assumir um papel.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Effect":"Allow",
         "Principal":<span>{</span>
            "Service":"kendra.amazonaws.com"
         },
         "Action":"sts:AssumeRole"
      }
   ]
}</code></pre>
</awsui-expandable-section></div>

        

        <div class="collapsible" data-expand-section="_collapse_all_"><awsui-expandable-section variant="container" header="IAMFunção de nuvem privada virtual (VPC)" id="iam-roles-vpc" expanded="false"><p>se você usar uma nuvem privada virtual (VPC) para se conectar à sua origem de dados, você deve fornecer as permissões a seguir.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "ec2:CreateNetworkInterface",
        "ec2:DescribeNetworkInterfaces",
        "ec2:DeleteNetworkInterface"
      ],
      "Resource": "*"
    },
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "ec2:CreateNetworkInterfacePermission"
      ],
      "Resource": "*",
      "Condition": <span>{</span>
        "StringEquals": <span>{</span>
          "ec2:AuthorizedService": "kendra.*.amazonaws.com"
        },
        "ArnEquals": <span>{</span>
          "ec2:Subnet": [
            "arn:aws:ec2:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:subnet/<code class="replaceable">subnet IDs</code>"
          ]
        }
      }
    },
    <span>{</span>
      "Effect": "Allow",
      "Action": [
        "ec2:DescribeSubnets"
      ],
      "Resource": "*"
    },
    <span>{</span>
      "Sid": "iamPassRole",
      "Effect": "Allow",
      "Action": "iam:PassRole",
      "Resource": "*",
      "Condition": <span>{</span>
        "StringEquals": <span>{</span>
          "iam:PassedToService": [
            "kendra.*.amazonaws.com"
          ]
        }
      }
    }
  ]
}</code></pre>
   <p>Uma política de confiança paraAmazon Kendra permitir assumir um papel.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Effect":"Allow",
         "Principal":<span>{</span>
            "Service":"kendra.amazonaws.com"
         },
         "Action":"sts:AssumeRole"
      }
   ]
}</code></pre>
</awsui-expandable-section></div>
     
        <h2 id="iam-roles-ds-faq">IAMfunções para perguntas frequentes (FAQs)</h2>
        <p>Ao usar a <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_CreateFaq.html">CreateFaq</a>API para carregar perguntas e respostas em um índice, você deve fornecerAmazon Kendra umaIAM função com acesso aoAmazon S3 bucket que contém os arquivos de origem. se os arquivos de origem estiverem criptografados, você deverá fornecer permissão para usar a chave mestra doAWS KMS cliente (CMK) do para descriptografar os arquivos.</p>

        <div class="collapsible" data-expand-section="_collapse_all_"><awsui-expandable-section variant="container" header="IAMfunções para perguntas frequentes" id="iam-roles-faq" expanded="false"><p>Uma política de função necessária paraAmazon Kendra permitir o acesso a umAmazon S3 bucket.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "s3:GetObject"
            ],
            "Resource": [
                "arn:aws:s3:::<code class="replaceable">bucket name</code>/*"
            ]
        }
    ]
}</code></pre><p>Uma política de função opcionalAmazon Kendra para permitir o uso de uma chave mestraAWS KMS do cliente (CMK) para descriptografar arquivos em umAmazon S3 bucket.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "kms:Decrypt"
            ],
            "Resource": [
                "arn:aws:kms:<code class="replaceable">region</code>:<code class="replaceable">account ID</code>:key/<code class="replaceable">key ID</code>"
            ],
            "Condition": <span>{</span>
                "StringLike": <span>{</span>
                    "kms:ViaService": [
                        "kendra.*.amazonaws.com"
                    ]
                }
            }
        }
    ]
}</code></pre>
   <p>Uma política de confiança paraAmazon Kendra permitir assumir um papel.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Effect":"Allow",
         "Principal":<span>{</span>
            "Service":"kendra.amazonaws.com"
         },
         "Action":"sts:AssumeRole"
      }
   ]
}</code></pre>
</awsui-expandable-section></div>
     
        <h2 id="iam-roles-query-suggestions">IAMfunções para sugestões de consultas</h2>
        <p>Ao usar umAmazon S3 arquivo como uma lista de bloqueio de sugestões de consulta, você fornece uma função que tem permissão para acessar oAmazon S3 arquivo e oAmazon S3 bucket. Se o arquivo de texto da lista de bloqueio (oAmazon S3 arquivo) noAmazon S3 bucket estiver criptografado, você deverá fornecer permissão para usar a chave mestra doAWS KMS cliente (CMK) para descriptografar os documentos.</p>
        <div class="collapsible" data-expand-section="_collapse_all_"><awsui-expandable-section variant="container" header="IAMfunções para sugestões de consultas" id="iam-roles-query-sugestions-json" expanded="false"><p>Uma política de função necessária paraAmazon Kendra permitir o uso doAmazon S3 arquivo como sua lista de bloqueio de sugestões de consulta.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>"Effect": "Allow",
            "Action": [
                "s3:GetObject"
            ],
            "Resource": [
                "arn:aws:s3:::bucket name/*"
            ]
        }
    ]
}
</code></pre><p>Uma política de função opcionalAmazon Kendra para permitir o uso de uma chave mestraAWS KMS do cliente (CMK) para descriptografar documentos em umAmazon S3 bucket.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>"Effect": "Allow",
            "Action": [
                "kms:Decrypt"
            ],
            "Resource": [
                "arn:aws:kms:region:account ID:key/key ID"
            ]
        }
    ]
}
</code></pre>
   <p>Uma política de confiança paraAmazon Kendra permitir assumir um papel.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Effect":"Allow",
         "Principal":<span>{</span>
            "Service":"kendra.amazonaws.com"
         },
         "Action":"sts:AssumeRole"
      }
   ]
}</code></pre>
</awsui-expandable-section></div>
     
        <h2 id="iam-roles-principal-mapping">IAMfunções para mapeamento principal de usuários e grupos</h2>
        <p>Ao usar a <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_PutPrincipalMapping.html">PutPrincipalMapping</a>API para mapear usuários para seus grupos para filtrar os resultados da pesquisa por contexto de usuário, você precisa fornecer uma lista de usuários ou subgrupos que pertencem a um grupo. Se sua lista tiver mais de 1000 usuários ou subgrupos de um grupo, você precisará fornecer uma função que tenha permissão para acessar oAmazon S3 arquivo da sua lista e doAmazon S3 bucket. Se o arquivo de texto (oAmazon S3 arquivo) da lista noAmazon S3 bucket estiver criptografado, você deverá fornecer permissão para usar a chave mestra doAWS KMS cliente (CMK) para descriptografar os documentos.</p>

        <div class="collapsible" data-expand-section="_collapse_all_"><awsui-expandable-section variant="container" header="IAMfunções para mapeamento principal" id="iam-roles-principal-mapping-json" expanded="false"><p>Uma política de função necessáriaAmazon Kendra para permitir o uso doAmazon S3 arquivo como sua lista de usuários e subgrupos que pertencem a um grupo.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>"Effect": "Allow",
            "Action": [
                "s3:GetObject"
            ],
            "Resource": [
                "arn:aws:s3:::bucket name/*"
            ]
        }
    ]
}
</code></pre><p>Uma política de função opcionalAmazon Kendra para permitir o uso de uma chave mestraAWS KMS do cliente (CMK) para descriptografar documentos em umAmazon S3 bucket.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>"Effect": "Allow",
            "Action": [
                "kms:Decrypt"
            ],
            "Resource": [
                "arn:aws:kms:region:account ID:key/key ID"
            ]
        }
    ]
}
</code></pre>
   <p>Uma política de confiança paraAmazon Kendra permitir assumir um papel.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Effect":"Allow",
         "Principal":<span>{</span>
            "Service":"kendra.amazonaws.com"
         },
         "Action":"sts:AssumeRole"
      }
   ]
}</code></pre>
<p>É recomendável que você inclua<code class="code">aws:sourceAccount</code> e<code class="code">aws:sourceArn</code> na política de confiança. Isso limita as permissões e verifica com segurança se<code class="code">aws:sourceAccount</code> elas<code class="code">aws:sourceArn</code> são as mesmas fornecidas na política deIAM função da<code class="code">sts:AssumeRole</code> ação. Isso impede que entidades não autorizadas acessem suasIAM funções e suas permissões. Para obter mais informações, consulte oAWS Identity and Access Management guia sobre o <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/confused-deputy.html">problema do substituto</a>.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Principal": <span>{</span>
                "Service": [
                    "kendra.*.amazonaws.com"
                ]
            },
            "Action": "sts:AssumeRole",
            "Condition": <span>{</span>
                "StringEquals": <span>{</span>
                    "aws:SourceAccount": "account ID"
                },
                "StringLike": <span>{</span>
                    "aws:SourceArn": "arn:aws:kendra:region:accountId:index/*"
                }
            }
        }
    ]
}</code></pre></awsui-expandable-section></div>
     
        <h2 id="iam-roles-aws-sso">Funções do IAM para AWS IAM Identity Center (successor to AWS Single Sign-On)</h2>
        <p>Ao usar o <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_UserGroupResolutionConfiguration.html">UserGroupResolutionConfiguration</a>objeto para buscar níveis de acesso de grupos e usuários de uma fonte deAWS IAM Identity Center (successor to AWS Single Sign-On) identidade, você precisa fornecer uma função que tenha permissão de acessoIAM Identity Center.</p>
        <div class="collapsible" data-expand-section="_collapse_all_"><awsui-expandable-section variant="container" header="Funções do IAM para AWS IAM Identity Center (successor to AWS Single Sign-On)" id="iam-roles-aws-sso-json" expanded="false"><p>Uma política de função necessária paraAmazon Kendra permitir o acessoIAM Identity Center.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "sso-directory:SearchUsers",
                "sso-directory:ListGroupsForUser",
                "sso-directory:DescribeGroups",
                "sso:ListDirectoryAssociations"
            ],
            "Resource": [
                 "*"
            ]
        },
        <span>{</span>
          "Sid": "iamPassRole",
          "Effect": "Allow",
          "Action": "iam:PassRole",
          "Resource": "*",
          "Condition": <span>{</span>
            "StringEquals": <span>{</span>
              "iam:PassedToService": [
                "kendra.*.amazonaws.com"
              ]
            }
          }
        }
     ]
}</code></pre>
   <p>Uma política de confiança paraAmazon Kendra permitir assumir um papel.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Effect":"Allow",
         "Principal":<span>{</span>
            "Service":"kendra.amazonaws.com"
         },
         "Action":"sts:AssumeRole"
      }
   ]
}</code></pre>
</awsui-expandable-section></div>
     
        <h2 id="iam-roles-amazon-kendra-experiences">IAMpapéis paraAmazon Kendra experiências</h2>
        <p>Ao usar as <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_UpdateExperience.html">UpdateExperience</a>APIs <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_CreateExperience.html">CreateExperience</a>ou para criar ou atualizar um aplicativo de pesquisa, você deve fornecer uma função que tenha permissão para acessar as operações necessárias e o IAM Identity Center.</p>
        <div class="collapsible" data-expand-section="_collapse_all_"><awsui-expandable-section variant="container" header="IAMfunções para experiênciaAmazon Kendra de pesquisa" id="iam-roles-search-app-experience" expanded="false"><p>Uma política de função necessária para permitirAmazon Kendra o acesso às<code class="code">Query</code> operações,<code class="code">QuerySuggestions</code> operações,<code class="code">SubmitFeedback</code> operações e ao IAM Identity Center que armazena suas informações de usuário e grupo.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Sid": "AllowsKendraSearchAppToCallKendraApi",
      "Effect": "Allow",
      "Action": [
        "kendra:GetQuerySuggestions",
        "kendra:Query",
        "kendra:DescribeIndex",
        "kendra:ListFaqs",
        "kendra:DescribeDataSource",
        "kendra:ListDataSources",
        "kendra:DescribeFaq",
        "kendra:SubmitFeedback"
      ],
      "Resource": [
        "arn:aws:kendra:<span>{</span><span>{</span>region}}:<span>{</span><span>{</span>account_id}}:index/<span>{</span><span>{</span>IndexId}}"
      ]
    },
    <span>{</span>
      "Sid": "AllowKendraSearchAppToDescribeDataSourcesAndFaq",
      "Effect": "Allow",
      "Action": [
        "kendra:DescribeDataSource",
        "kendra:DescribeFaq"
      ],
      "Resource": [
        "arn:aws:kendra:<span>{</span><span>{</span><code class="replaceable">region</code>}}:<span>{</span><span>{</span><code class="replaceable">account_id</code>}}:index/<span>{</span><span>{</span><code class="replaceable">IndexId</code>}}/data-source/<span>{</span><span>{</span><code class="replaceable">DataSourceId</code>}}",
        "arn:aws:kendra:<span>{</span><span>{</span><code class="replaceable">region</code>}}:<span>{</span><span>{</span><code class="replaceable">account_id</code>}}:index/<span>{</span><span>{</span><code class="replaceable">IndexId</code>}}/faq/<span>{</span><span>{</span><code class="replaceable">FaqId</code>}}"
      ]
    },
    <span>{</span>
      "Sid": "AllowKendraSearchAppToCallSSODescribeUsersAndGroups",
      "Effect": "Allow",
      "Action": [
        "sso-directory:ListGroupsForUser",
        "sso-directory:SearchGroups",
        "sso-directory:SearchUsers",
        "sso-directory:DescribeUser",
        "sso-directory:DescribeGroup",
        "sso-directory:DescribeGroups",
        "sso-directory:DescribeUsers"
      ],
      "Resource": [
        "*"
      ],
      "Condition": <span>{</span>
        "StringLike": <span>{</span>
          "kms:ViaService": [
            "kendra.*.amazonaws.com"
          ]
        }
      }
    }
  ]
}</code></pre>
   <p>Uma política de confiança paraAmazon Kendra permitir assumir um papel.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Effect":"Allow",
         "Principal":<span>{</span>
            "Service":"kendra.amazonaws.com"
         },
         "Action":"sts:AssumeRole"
      }
   ]
}</code></pre>
<p>É recomendável que você inclua<code class="code">aws:sourceAccount</code> e<code class="code">aws:sourceArn</code> na política de confiança. Isso limita as permissões e verifica com segurança se<code class="code">aws:sourceAccount</code> elas<code class="code">aws:sourceArn</code> são as mesmas fornecidas na política deIAM função da<code class="code">sts:AssumeRole</code> ação. Isso impede que entidades não autorizadas acessem suasIAM funções e suas permissões. Para obter mais informações, consulte oAWS Identity and Access Management guia sobre o <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/confused-deputy.html">problema do substituto</a>.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Principal": <span>{</span>
                "Service": [
                    "kendra.*.amazonaws.com"
                ]
            },
            "Action": "sts:AssumeRole",
            "Condition": <span>{</span>
                "StringEquals": <span>{</span>
                    "aws:SourceAccount": "account ID"
                },
                "StringLike": <span>{</span>
                    "aws:SourceArn": "arn:aws:kendra:region:accountId:index/*"
                }
            }
        }
    ]
}</code></pre></awsui-expandable-section></div>
     
        <h2 id="iam-roles-custom-document-enrichment">IAMfunções para enriquecimento de documentos personalizados</h2>
        <p>Ao usar o <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_CustomDocumentEnrichmentConfiguration.html">CustomDocumentEnrichmentConfiguration</a>objeto para aplicar alterações avançadas nos metadados e no conteúdo do documento, você deve fornecer uma função que tenha as permissões necessárias para executar<code class="code">PreExtractionHookConfiguration</code> e/ou<code class="code">PostExtractionHookConfiguration</code>. Você configura uma função Lambda para<code class="code">PreExtractionHookConfiguration</code> e/ou<code class="code">PostExtractionHookConfiguration</code> para aplicar alterações avançadas dos metadados e do conteúdo do seu documento durante o processo de ingestão. Se você optar por ativar a criptografia do lado do servidor para seuAmazon S3 bucket, deverá fornecer permissão para usar a chave mestra doAWS KMS cliente (CMK) para criptografar e descriptografar os objetos armazenados em seuAmazon S3 bucket.</p>
        <div class="collapsible" data-expand-section="_collapse_all_"><awsui-expandable-section variant="container" header="IAMfunções para enriquecimento de documentos personalizados" id="iam-roles-custom-document-enrichment-json" expanded="false"><p>Uma política de função necessária paraAmazon Kendra permitir a execução<code class="code">PreExtractionHookConfiguration</code> e<code class="code">PostExtractionHookConfiguration</code> a criptografia de seuAmazon S3 bucket.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [<span>{</span>
    "Action": [
      "s3:GetObject",
      "s3:PutObject"
    ],
    "Resource": [
      "arn:aws:s3:::<span>{</span><span>{</span><code class="replaceable">input_bucket_name</code>}}/*"
    ],
    "Effect": "Allow"
  },
  <span>{</span>
    "Action": [
      "s3:ListBucket"
    ],
    "Resource": [
      "arn:aws:s3:::<span>{</span><span>{</span><code class="replaceable">input_bucket_name</code>}}"
    ],
    "Effect": "Allow"
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "kms:Decrypt",
      "kms:GenerateDataKey"
    ],
    "Resource": [
      "arn:aws:kms:<span>{</span><span>{</span><code class="replaceable">region</code>}}:<span>{</span><span>{</span><code class="replaceable">account_id</code>}}:key/<span>{</span><span>{</span><code class="replaceable">key_id</code>}}"
    ]
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "lambda:InvokeFunction"
    ],
    "Resource": "arn:aws:lambda:<span>{</span><span>{</span><code class="replaceable">region</code>}}:<span>{</span><span>{</span><code class="replaceable">account_id</code>}}:function:<span>{</span><span>{</span><code class="replaceable">lambda_function</code>}}"
  }]
}</code></pre><p>Uma política de função opcional paraAmazon Kendra permitir a execução<code class="code">PreExtractionHookConfiguration</code> e<code class="code">PostExtractionHookConfiguration</code> sem criptografia para seuAmazon S3 bucket.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [<span>{</span>
    "Action": [
      "s3:GetObject",
      "s3:PutObject"
    ],
    "Resource": [
      "arn:aws:s3:::<span>{</span><span>{</span><code class="replaceable">input_bucket_name</code>}}/*"
    ],
    "Effect": "Allow"
  },
  <span>{</span>
    "Action": [
      "s3:ListBucket"
    ],
    "Resource": [
      "arn:aws:s3:::<span>{</span><span>{</span><code class="replaceable">input_bucket_name</code>}}"
    ],
    "Effect": "Allow"
  },
  <span>{</span>
    "Effect": "Allow",
    "Action": [
      "lambda:InvokeFunction"
    ],
    "Resource": "arn:aws:lambda:<span>{</span><span>{</span><code class="replaceable">region</code>}}:<span>{</span><span>{</span><code class="replaceable">account_id</code>}}:function:<span>{</span><span>{</span><code class="replaceable">lambda_function</code>}}"
  }]
}</code></pre>
   <p>Uma política de confiança paraAmazon Kendra permitir assumir um papel.</p>
   <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "Version":"2012-10-17",
   "Statement":[
      <span>{</span>
         "Effect":"Allow",
         "Principal":<span>{</span>
            "Service":"kendra.amazonaws.com"
         },
         "Action":"sts:AssumeRole"
      }
   ]
}</code></pre>
<p>É recomendável que você inclua<code class="code">aws:sourceAccount</code> e<code class="code">aws:sourceArn</code> na política de confiança. Isso limita as permissões e verifica com segurança se<code class="code">aws:sourceAccount</code> elas<code class="code">aws:sourceArn</code> são as mesmas fornecidas na política deIAM função da<code class="code">sts:AssumeRole</code> ação. Isso impede que entidades não autorizadas acessem suasIAM funções e suas permissões. Para obter mais informações, consulte oAWS Identity and Access Management guia sobre o <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/confused-deputy.html">problema do substituto</a>.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Principal": <span>{</span>
                "Service": [
                    "kendra.*.amazonaws.com"
                ]
            },
            "Action": "sts:AssumeRole",
            "Condition": <span>{</span>
                "StringEquals": <span>{</span>
                    "aws:SourceAccount": "account ID"
                },
                "StringLike": <span>{</span>
                    "aws:SourceArn": "arn:aws:kendra:region:accountId:index/*"
                }
            }
        }
    ]
}</code></pre></awsui-expandable-section></div>
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Atenção" /> <strong>O Javascript está desativado ou não está disponível no seu navegador.</strong></p><p>Para usar a documentação da AWS, o Javascript deve estar ativado. Consulte as páginas de Ajuda do navegador para obter instruções.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenções do documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./aws-kendra-set-up-sdks.html">Configurando osAWS SDKs</div><div id="next" class="next-link" accesskey="n" href="./deploying.html">Implantação de Amazon Kendra</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Essa página foi útil? - Sim</div><div class="content"><p>Obrigado por nos informar que estamos fazendo um bom trabalho!</p><p>Se tiver tempo, conte-nos sobre o que você gostou para que possamos melhorar ainda mais.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Kendra&amp;topic_url=https://docs.aws.amazon.com/pt_br/kendra/latest/dg/iam-roles.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Essa página foi útil? - Não</div><div class="content"><p>Obrigado por nos informar que precisamos melhorar a página. Lamentamos ter decepcionado você.</p><p>Se tiver tempo, conte-nos como podemos melhorar a documentação.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Kendra&amp;topic_url=https://docs.aws.amazon.com/pt_br/kendra/latest/dg/iam-roles.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>