<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="pt-BR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Chaves de contexto de condição globais da AWS - AWS Identity and Access Management</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="reference_policies_condition-keys" /><meta name="default_state" content="reference_policies_condition-keys" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/reference_policies_condition-keys.html" /><meta name="description" content="Descreve cada uma das chaves de condição globais da AWS disponíveis para uso em políticas do IAM." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS Identity and Access Management" /><meta name="guide" content="Guia do usuário" /><meta name="abstract" content="Controle o acesso aos recursos da AWS com identidade de usuário (autenticação) e com políticas que definem permissões específicas (autorização)." /><meta name="guide-locale" content="pt_br" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/reference_policies_condition-keys.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="x-default" /><meta name="feedback-item" content="IAM" /><meta name="this_doc_product" content="AWS Identity and Access Management" /><meta name="this_doc_guide" content="Guia do usuário" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'iam'}"></script><meta id="panorama-serviceSubSection" value="Guia do usuário" /><meta id="panorama-serviceConsolePage" value="Chaves de contexto de condição globais da AWS" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Chaves de contexto de condição globais da AWS - AWS Identity and Access Management</title><meta name="pdf" content="iam-ug.pdf#reference_policies_condition-keys" /><meta name="rss" content="aws-iam-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=76" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=http://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/reference_policies_condition-keys.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/reference_policies_condition-keys.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/reference_policies_condition-keys.html" /><meta name="keywords" content="IAM,AWS Identity and Access Management,Usuário do IAM,user,Grupo do IAM,grupo,Perfil do IAM,função,política de permissão,política de confiança,política,chave de acesso,password,ID de UO do recurso" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS Identity and Access Management",
        "item" : "https://docs.aws.amazon.com/iam/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guia do usuário",
        "item" : "https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Informações de referência do AWS Identity and Access Management",
        "item" : "https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/reference.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Referência de política JSON do IAM",
        "item" : "https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/reference_policies.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Chaves de contexto de condição globais da AWS",
        "item" : "https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/reference_policies.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="iam-ug.pdf#reference_policies_condition-keys" target="_blank" rel="noopener noreferrer" title="Abrir em PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentação</a><a href="/iam/index.html">AWS Identity and Access Management</a><a href="introduction.html">Guia do usuário</a></div><div id="page-toc-src"><a href="#condition-keys-calledvia">CalledVia</a><a href="#condition-keys-calledviafirst">CalledViaFirst</a><a href="#condition-keys-calledvialast">CalledViaLast</a><a href="#condition-keys-currenttime">CurrentTime</a><a href="#condition-keys-ec2instancesourcevpc">Ec2InstanceSourceVpc</a><a href="#condition-keys-ec2instancesourceprivateip4">Ec2InstanceSourcePrivateIPv4</a><a href="#condition-keys-epochtime">EpochTime</a><a href="#condition-keys-federatedprovider">FederatedProvider</a><a href="#condition-keys-multifactorauthage">MultiFactorAuthAge</a><a href="#condition-keys-multifactorauthpresent">MultiFactorAuthPresent</a><a href="#condition-keys-principalaccount">PrincipalAccount</a><a href="#condition-keys-principalarn">PrincipalArn</a><a href="#condition-keys-principalisawsservice">PrincipalIsAWSService</a><a href="#condition-keys-principalorgid">PrincipalOrgID</a><a href="#condition-keys-principalorgpaths">PrincipalOrgPaths</a><a href="#condition-keys-principalservicename">PrincipalServiceName</a><a href="#condition-keys-principalservicenameslist">PrincipalServiceNamesList</a><a href="#condition-keys-principaltag">PrincipalTag</a><a href="#condition-keys-principaltype">PrincipalType</a><a href="#condition-keys-referer">Referer</a><a href="#condition-keys-requestedregion">RequestedRegion</a><a href="#condition-keys-requesttag">RequestTag</a><a href="#condition-keys-resourceaccount">ResourceAccount</a><a href="#condition-keys-resourceorgid">ResourceOrgID</a><a href="#condition-keys-resourceorgpaths">ResourceOrgPaths</a><a href="#condition-keys-resourcetag">ResourceTag</a><a href="#condition-keys-securetransport">SecureTransport</a><a href="#condition-keys-sourceaccount">SourceAccount</a><a href="#condition-keys-sourcearn">SourceArn</a><a href="#condition-keys-sourceidentity">SourceIdentity</a><a href="#condition-keys-sourceip">SourceIp</a><a href="#condition-keys-sourcevpc">SourceVpc</a><a href="#condition-keys-sourcevpce">SourceVpce</a><a href="#condition-keys-tagkeys">TagKeys</a><a href="#condition-keys-tokenissuetime">TokenIssueTime</a><a href="#condition-keys-useragent">UserAgent</a><a href="#condition-keys-userid">Userid</a><a href="#condition-keys-username">Nome de usuário</a><a href="#condition-keys-viaawsservice">ViaAWSService</a><a href="#condition-keys-vpcsourceip">VpcSourceIp</a><a href="#condition-keys-other">Outras chaves de serviços</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="reference_policies_condition-keys">Chaves de contexto de condição globais da AWS</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Quando um <a href="./intro-structure.html#intro-structure-principal">principal</a> faz uma <a href="./intro-structure.html#intro-structure-request">solicitação</a> à AWS, a AWS reúne as informações da solicitação em um <a href="./intro-structure.html#intro-structure-request">contexto de solicitação</a>. É possível usar o elemento <code class="code">Condition</code> de uma política JSON para comparar chaves no contexto da solicitação com os valores de chave especificados em sua política. Para saber mais sobre as circunstâncias em que uma chave global é incluída no contexto da solicitação, consulte as informações da <b>Disponibilidade</b> de cada chave de condição global. Para obter informações sobre como usar o elemento <code class="code">Condition</code> em uma política JSON, consulte <a href="./reference_policies_elements_condition.html">Elementos de política JSON do IAM: Condition</a>.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Se você usar chaves de condição disponíveis apenas em algumas circunstâncias, será possível usar as versões <a href="./reference_policies_elements_condition_operators.html#Conditions_IfExists">IfExists</a> dos operadores de condição. Se as chaves de condição estiverem ausentes no contexto de uma solicitação, poderá ocorrer falha na avaliação da política. Por exemplo, use o seguinte bloqueio de condição com operadores <code class="code">...IfExists</code> para saber quando uma solicitação é proveniente de um determinado intervalo de IP ou de uma determinada VPC. Se uma ou ambas as chaves não estiverem incluídas no contexto da solicitação, a condição ainda retornará <code class="code">true</code>. Os valores serão verificados somente se a chave especificada estiver incluída no contexto da solicitação. </p><pre class="programlisting"><div class="code-btn-container"></div><code class="json ">"Condition": <span>{</span>
    "IpAddressIfExists": <span>{</span>"aws:SourceIp" : ["xxx"] },
    "StringEqualsIfExists" : <span>{</span>"aws:SourceVpc" : ["yyy"]} 
}</code></pre></div></div><p>As chaves de condição globais são chaves de condição com um prefixo <code class="code">aws:</code>. Os serviços da AWS podem oferecer suporte a chaves de condição globais ou fornecer chaves específicas do serviço que incluem seu prefixo de serviço. Por exemplo, as chaves de condição do IAM incluem o prefixo <code class="code">iam:</code>. Para obter mais informações, consulte <a href="reference_policies_actions-resources-contextkeys.html" rel="noopener noreferrer" target="_blank">Ações, recursos e chaves de condição de serviços da AWS</a> e escolha o serviço cujas chaves você deseja visualizar.</p><div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Importante</h6></div><div class="awsdocs-note-text"><p>Para comparar sua condição com um contexto de solicitação com vários valores de chave, você deve usar os operadores de conjunto <code class="code">ForAllValues</code> ou <code class="code">ForAnyValue</code>. Use operadores de conjunto somente com chaves de condições de vários valores. Não use operadores de conjuntos com chaves de condição de valor único. Para obter mais informações, consulte <a href="./reference_policies_multi-value-conditions.html">Criar uma condição com várias chaves ou valores</a>.</p></div></div>
        <h2 id="condition-keys-calledvia">aws:CalledVia</h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
        <p>Use essa chave para comparar os serviços na política com os serviços que fizeram solicitações em nome da entidade de segurança do IAM (usuário ou função). Quando um principal faz uma solicitação a um serviço da AWS, esse serviço pode usar as credenciais do principal para fazer solicitações subsequentes a outros serviços. A chave <code class="code">aws:CalledVia</code> contém uma lista ordenada de cada serviço na cadeia que fez solicitações em nome do principal.</p>
        <p>Por exemplo, é possível usar o AWS CloudFormation para ler e gravar de uma tabela do Amazon DynamoDB. O DynamoDB então usa a criptografia fornecida peloAWS Key Management Service (AWS KMS).</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Disponibilidade</b>: essa chave está presente na solicitação quando um serviço que oferece suporte a <code class="code">aws:CalledVia</code> usa as credenciais de uma entidade de segurança do IAM para fazer uma solicitação a outro serviço. Esta chave não está presente se o serviço usa uma <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-role">função de serviço</a> ou <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-linked-role">função vinculada ao serviço</a> para fazer uma chamada em nome do principal. Esta chave também não está presente quando o principal faz a chamada diretamente.</p>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valores múltiplos</p>
            </li></ul></div>
        <a id="calledvia-services"></a>
        <p>Para usar a chave de condição <code class="code">aws:CalledVia</code> em uma política, você deve fornecer as entidades principais de serviço para conceder ou negar solicitações de serviço da AWS. A AWS oferece suporte ao uso das seguintes entidades principais de serviço com <code class="code">aws:CalledVia</code>.</p>
        <div class="table-container"><div class="table-contents"><table id="w339aac25c19c19c13c15"><thead>
                    <tr>
                        <th>Principal do serviço</th>
                    </tr>
                </thead>
                    <tr>
                        <td>athena.amazonaws.com</td>
                    </tr>
                    <tr>
                        <td>cloud9.amazonaws.com</td>
                    </tr>
                    <tr>
                        <td>cloudformation.amazonaws.com</td>
                    </tr>
                    <tr>
                        <td>databrew.amazonaws.com</td>
                    </tr>
                    <tr>
                        <td>dataexchange.amazonaws.com</td>
                    </tr>
                    <tr>
                        <td>dynamodb.amazonaws.com</td>
                    </tr>
                    <tr>
                        <td>kms.amazonaws.com</td>
                    </tr>
                    <tr>
                        <td>servicecatalog-appregistry.amazonaws.com</td>
                    </tr>
                    <tr>
                        <td>sqlworkbench.amazonaws.com</td>
                    </tr>
                </table></div></div>
        <p>Para conceder ou negar acesso quando <em>qualquer</em> serviço fizer uma solicitação usando as credenciais do principal, use a chave de condição <code class="code"><a href="#condition-keys-viaawsservice">aws:ViaAWSService</a></code>. Essa chave de condição oferece suporte a todos os serviços AWS.</p>
        <p>A chave <code class="code">aws:CalledVia</code> é uma <a href="./reference_policies_multi-value-conditions.html">chave de vários valores</a>. No entanto, você não pode aplicar uma ordem usando essa chave em uma condição. Ao usar o exemplo acima, o <b>User 1</b> (Usuário 1) faz uma solicitação ao AWS CloudFormation, que chama o DynamoDB, que chama o AWS KMS. São três solicitações distintas. A chamada final para o AWS KMS é realizada pelo Usuário 1 <em>via</em> AWS CloudFormation e, depois, via DynamoDB. </p>
        <div class="mediaobject">
             
                <img src="images/condition-key-calledvia-example-diagram.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                Exemplo de uso do aws:CalledVia&#xA;            " style="max-width:100%" />
             
             
        </div>
        <p>Nesse caso, a chave <code class="code">aws:CalledVia</code> no contexto de solicitação inclui <code class="code">cloudformation.amazonaws.com</code> e <code class="code">dynamodb.amazonaws.com</code>, nessa ordem. Se a sua única preocupação é que a chamada foi feita por meio do DynamoDB em algum lugar da cadeia de solicitações, você pode usar essa chave de condição em sua política. </p>
        <p>Por exemplo, a política a seguir permite gerenciar a chave do AWS KMS chamada <code class="code">my-example-key</code>, mas apenas se DynamoDB for um dos serviços solicitantes. O operador de condição <code class="code"><a href="./reference_policies_multi-value-conditions.html#reference_policies_multi-key-or-value-conditions">ForAnyValue:StringEquals</a></code> garante que o DynamoDB seja um dos serviços de chamada. Se o principal fizer a chamada diretamente para o AWS KMS, a condição retornará <code class="code">false</code> e a solicitação não será permitida por esta política.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "KmsActionsIfCalledViaDynamodb",
            "Effect": "Allow",
            "Action": [
                "kms:Encrypt",
                "kms:Decrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey",
                "kms:DescribeKey"
            ],
            "Resource": "arn:aws:kms:<code class="replaceable">region</code>:<code class="replaceable">111122223333</code>:key/<code class="replaceable">my-example-key</code>",
            "Condition": <span>{</span>
                "ForAnyValue:StringEquals": <span>{</span>
                    "aws:CalledVia": ["dynamodb.amazonaws.com"]
                }
            }
        }
    ]
}</code></pre>
        <p>Se você quiser definir qual serviço fará a primeira ou última chamada na cadeia, use as chaves <code class="code"><a href="#condition-keys-calledviafirst">aws:CalledViaLast</a></code> e <code class="code"><a href="#condition-keys-calledviafirst">aws:CalledViaFirst</a></code>. Por exemplo, a política a seguir permite gerenciar a chave nomeada <code class="code">my-example-key</code> no AWS KMS. Essas operações do AWS KMS são permitidas somente se várias solicitações tiverem sido incluídas na cadeia. A primeira solicitação deve ser feita por meio do AWS CloudFormation e a última pelo DynamoDB. Se outros serviços fizerem solicitações no meio da cadeia, a operação ainda será permitida.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "KmsActionsIfCalledViaChain",
            "Effect": "Allow",
            "Action": [
                "kms:Encrypt",
                "kms:Decrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey",
                "kms:DescribeKey"
            ],
            "Resource": "arn:aws:kms:<code class="replaceable">region</code>:<code class="replaceable">111122223333</code>:key/<code class="replaceable">my-example-key</code>",
            "Condition": <span>{</span>
                "StringEquals": <span>{</span>
                    "aws:CalledViaFirst": "cloudformation.amazonaws.com",
                    "aws:CalledViaLast": "dynamodb.amazonaws.com"
                }
            }
        }
    ]
}</code></pre>
        <p>As chaves <code class="code"><a href="#condition-keys-calledviafirst">aws:CalledViaFirst</a></code> e <code class="code"><a href="#condition-keys-calledviafirst">aws:CalledViaLast</a></code> estão presentes na solicitação quando um serviço usa as credenciais de uma entidade de segurança do IAM para chamar outro serviço. Elas indicam o primeiro e último serviços que fizeram chamadas na cadeia de solicitações. Por exemplo, vamos supor que o AWS CloudFormation chame outro serviço chamado <code class="code">X
                Service</code>, que chama o DynamoDB que, por sua vez, chama o AWS KMS. A chamada final para o AWS KMS é realizada pelo <code class="code">User 1</code> <em>via</em> AWS CloudFormation, depois, <code class="code">X Service</code> e depois DynamoDB. Ele foi chamado pela primeira vez por meio do AWS CloudFormation e a última chamada foi feita por meio do DynamoDB. </p>
        <div class="mediaobject">
             
                <img src="images/condition-key-calledviafirstlast-example-diagram.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                Exemplo de uso de aws:CalledViaFirst e aws:CalledViaLast&#xA;            " style="max-width:100%" />
             
             
        </div>
        
     
        <h2 id="condition-keys-calledviafirst">aws:CalledViaFirst</h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
        <p>Use esta chave para comparar os serviços na política com o <em><b>primeiro serviço</b></em> que fez uma solicitação em nome da entidade de segurança do IAM (usuário ou função). Para obter mais informações, consulte <code class="code"><a href="#condition-keys-calledvia">aws:CalledVia</a></code>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Disponibilidade</b>: essa chave está presente na solicitação quando um serviço usa as credenciais de uma entidade de segurança do IAM para fazer pelo menos uma outra solicitação a um serviço diferente. Esta chave não está presente se o serviço usa uma <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-role">função de serviço</a> ou <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-linked-role">função vinculada ao serviço</a> para fazer uma chamada em nome do principal. Esta chave também não está presente quando o principal faz a chamada diretamente.</p>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valor único</p>
            </li></ul></div>
     
        <h2 id="condition-keys-calledvialast">aws:CalledViaLast</h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
        <p>Use esta chave para comparar os serviços na política com o <em>último serviço</em> que fez uma solicitação em nome da entidade de segurança do IAM (usuário ou função). Para obter mais informações, consulte <code class="code"><a href="#condition-keys-calledvia">aws:CalledVia</a></code>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Disponibilidade</b>: essa chave está presente na solicitação quando um serviço usa as credenciais de uma entidade de segurança do IAM para fazer pelo menos uma outra solicitação a um serviço diferente. Esta chave não está presente se o serviço usa uma <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-role">função de serviço</a> ou <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-linked-role">função vinculada ao serviço</a> para fazer uma chamada em nome do principal. Esta chave também não está presente quando o principal faz a chamada diretamente.</p>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valor único</p>
            </li></ul></div>
     
        <h2 id="condition-keys-currenttime">aws:CurrentTime</h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_Date">operadores de data</a>.</p>
        <p>Use essa chave para comparar a data e a hora da solicitação com a data e a hora especificadas na política. Para visualizar um exemplo de política que usa essa chave de condição, consulte <a href="./reference_policies_examples_aws-dates.html">AWS: Permite o acesso com base na data e hora</a>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Disponibilidade</b>: essa chave é sempre incluída no contexto da solicitação.</p>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valor único</p>
            </li></ul></div>
     
        <h2 id="condition-keys-ec2instancesourcevpc">aws:Ec2InstanceSourceVpc</h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
        <p>Essa chave identifica a VPC para a qual as credenciais de perfil do IAM do Amazon EC2 foram entregues. Você pode usar essa chave em uma política com a chave global <a href="#condition-keys-sourcevpc">aws:SourceVPC</a> para verificar se uma chamada é feita por uma VPC (<code class="code">aws:SourceVPC</code>) que corresponde à VPC para a qual a credencial foi entregue (<code class="code">aws:Ec2InstanceSourceVpc</code>).</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Disponibilidade</b>: esta chave será incluída no contexto da solicitação sempre que o solicitante assinar solicitações com uma credencial de perfil do Amazon EC2. Pode ser usada em políticas do IAM, políticas de controle de serviços, políticas de endpoint da VPC e políticas de recursos.</p>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valor único</p>
            </li></ul></div>
        <p>Essa chave pode ser usada com valores de identificador de VPC, porém é mais útil quando usada como uma variável combinada com a chave de contexto <code class="code">aws:SourceVpc</code>. A chave de contexto <code class="code">aws:SourceVpc</code> será incluída no contexto da solicitação somente se o solicitante usar um endpoint da VPC para fazer a solicitação. Usar <code class="code">aws:Ec2InstanceSourceVpc</code> com <code class="code">aws:SourceVpc</code> permite que você utilize <code class="code">aws:Ec2InstanceSourceVpc</code> de forma mais ampla, pois compara valores que normalmente são alterados juntos.</p>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Essa chave de condição não está disponível no EC2-Classic.</p></div></div>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Sid": "RequireSameVPC",
      "Effect": "Deny",
      "Action": "*",
      "Resource": "*",
      "Condition": <span>{</span>
        "StringNotEquals": <span>{</span>
            "aws:SourceVpc": "$<span>{</span>aws:Ec2InstanceSourceVpc}"
        },
        "Null": <span>{</span>
          "ec2:SourceInstanceARN": "false"
        },
        "BoolIfExists": <span>{</span>
          "aws:ViaAWSService": "false"
        }
      }
    }
  ]
}</code></pre>
        <p>No exemplo acima, o acesso será negado se o valor de <code class="code">aws:SourceVpc</code> não for igual ao valor de <code class="code">aws:Ec2InstanceSourceVpc</code>. A instrução de política é limitada somente aos perfis usados como perfis de instância do Amazon EC2, testando a existência da chave de condição <code class="code">ec2:SourceInstanceARN</code>.</p>
        <p>A política usa <code class="code">aws:ViaAWSService</code> para permitir que a AWS autorize solicitações quando as solicitações são feitas em nome de seus perfis de instância do Amazon EC2. Por exemplo, quando você faz uma solicitação de uma instância do Amazon EC2 para um bucket criptografado do Amazon S3, o Amazon S3 faz uma chamada para o AWS KMS por você. Algumas das chaves não estão presentes quando a solicitação é feita ao AWS KMS.</p>
     
        <h2 id="condition-keys-ec2instancesourceprivateip4">aws:Ec2InstanceSourcePrivateIPv4</h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_IPAddress">operadores de endereço IP</a>.</p>
        <p>Esta chave identifica o endereço IPv4 privado da interface de rede elástica primária ao qual as credenciais de perfil do IAM do Amazon EC2 foram entregues. É necessário usar essa chave de condição com sua chave complementar <code class="code">aws:Ec2InstanceSourceVpc</code> para garantir que você tenha uma combinação global exclusiva de ID da VPC e IP privado de origem. Use essa chave com <code class="code">aws:Ec2InstanceSourceVpc</code> para garantir que uma solicitação tenha sido feita com base no mesmo endereço IP privado para o qual as credenciais foram entregues.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Disponibilidade</b>: esta chave será incluída no contexto da solicitação sempre que o solicitante assinar solicitações com uma credencial de perfil do Amazon EC2. Pode ser usada em políticas do IAM, políticas de controle de serviços, políticas de endpoint da VPC e políticas de recursos.</p>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valor único</p>
            </li></ul></div>
        <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Importante</h6></div><div class="awsdocs-note-text"><p>Essa chave não deve ser usada sozinha em uma instrução <code class="code">Allow</code>. Por definição, os endereços IP privados não são globalmente exclusivos. É necessário usar a chave <code class="code">aws:Ec2InstanceSourceVpc</code> toda vez que usar a chave <code class="code">aws:Ec2InstanceSourcePrivateIPv4</code> para especificar a VPC de onde suas credenciais de instância do Amazon EC2 podem ser usadas.</p></div></div>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Essa chave de condição não está disponível no EC2-Classic.</p></div></div>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Deny",
            "Action":  "*",
            "Resource": "*",
            "Condition": <span>{</span>
                "StringNotEquals": <span>{</span>
                    "aws:Ec2InstanceSourceVpc": "$<span>{</span>aws:SourceVpc}"
                },                
                "Null": <span>{</span>
                    "ec2:SourceInstanceARN": "false"
                },
                "BoolIfExists": <span>{</span>
                    "aws:ViaAWSService": "false"
                }
            }
        },
        <span>{</span>
            "Effect": "Deny",
            "Action":  "*",
            "Resource": "*",
            "Condition": <span>{</span>
                "StringNotEquals": <span>{</span>
                    "aws:Ec2InstanceSourcePrivateIPv4": "$<span>{</span>aws:VpcSourceIp}"
                },                               
                "Null": <span>{</span>
                    "ec2:SourceInstanceARN": "false"
                },
                "BoolIfExists": <span>{</span>
                    "aws:ViaAWSService": "false"
                }
            }
        }
    ]
}</code></pre>
     
        <h2 id="condition-keys-epochtime">aws:EpochTime</h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_Date">operadores de data</a> ou <a href="./reference_policies_elements_condition_operators.html#Conditions_Numeric">operadores numéricos</a>.</p>
        <p>Use essa chave para comparar a data e a hora da solicitação em horário Unix ou epoch com o valor especificado na política. Essa chave também aceita o número de segundos desde 1º de janeiro de 1970. </p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Disponibilidade</b>: essa chave é sempre incluída no contexto da solicitação.</p>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valor único</p>
            </li></ul></div>
     
        <h2 id="condition-keys-federatedprovider">aws:FederatedProvider</h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
        <p>Use essa chave para comparar o provedor de identidade (IdP) emissor da entidade principal com o IdP especificado na política. Isso significa que uma função do IAM foi assumida usando as operações <code class="code">AssumeRoleWithWebIdentity</code> ou <code class="code">AssumeRoleWithSAML</code> do AWS STS. Quando as credenciais temporárias da sessão de função resultante são usadas para fazer uma solicitação, o contexto da solicitação identifica o IdP que autenticou a identidade federada original.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Disponibilidade</b>: essa chave está presente quando a entidade principal é uma entidade principal da sessão de função e essa sessão foi emitida usando um provedor de identidade terceiro. </p>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valor único</p>
            </li></ul></div>
        <p>Por exemplo, se o usuário foi autenticado por meio do Amazon Cognito, o contexto da solicitação incluirá o valor <code class="code">cognito-identity.amazonaws.com</code>. Da mesma forma, se o usuário foi autenticado por meio do Login with Amazon, o contexto da solicitação incluirá o valor <code class="code">www.amazon.com</code>.</p>
        <p>É possível usar qualquer chave de condição de valor único disponível como uma <a href="./reference_policies_variables.html">variável</a>. O seguinte exemplo de política com base em recursos usa a chave <code class="code">aws:FederatedProvider</code> como uma variável de política no ARN de um recurso. Essa política permite que qualquer entidade principal que fez autenticação usando um IdP obtenha objetos de um bucket do Amazon S3 com um caminho que é específico para o provedor de identidade emissor.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": <span>{</span>
    "Effect": "Allow",
    "Principal": "*",
    "Action": "s3:GetObject",
    "Resource": "arn:aws:s3:::<code class="replaceable"><code class="replaceable">DOC-EXAMPLE-BUCKET</code></code>/$<span>{</span>aws:FederatedProvider}/*"
  }
}</code></pre>
     
        <h2 id="condition-keys-multifactorauthage">aws:MultiFactorAuthAge</h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_Numeric">operadores numéricos</a>.</p>
        <p>Use essa chave para comparar o número de segundos desde que o principal solicitante foi autorizado usando MFA com o número especificado na política. Para obter mais informações sobre MFA, consulte <a href="./id_credentials_mfa.html">Uso de autenticação multifator (MFA) na AWS</a>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Disponibilidade</b>: essa chave será incluída no contexto da solicitação somente se a entidade de segurança que faz a chamada for autenticada usando MFA. Se a MFA não foi usada, essa chave não estará presente.</p>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valor único</p>
            </li></ul></div>
     
        <h2 id="condition-keys-multifactorauthpresent">aws:MultiFactorAuthPresent</h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_Boolean">Operadores boolianos</a>.</p>
        <p>Use essa chave para verificar se a autenticação multifator (MFA) foi usada para validar as credenciais de segurança temporárias que fizeram a solicitação.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Disponibilidade</b>: esta chave é incluída no contexto da solicitação somente quando a entidade de segurança usa credenciais temporárias para fazer a solicitação. A chave não está presente nas solicitações da CLI da AWS, da API da AWS ou do AWS SDK que são feitas usando credenciais de longo prazo. </p>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valor único</p>
            </li></ul></div>
        <p>As credenciais temporárias são usadas para autenticar funções do IAM, usuários federados, usuários do IAM com tokens temporários de <code class="code">sts:GetSessionToken</code> e usuários do AWS Management Console. As chaves de acesso do usuário do IAM são credenciais de longo prazo, mas, em alguns casos, a AWS cria credenciais temporárias em nome dos usuários do IAM para realizar operações. Nesses casos, a chave <code class="code">aws:MultiFactorAuthPresent</code> está presente na solicitação e definida como um valor de <code class="code">false</code>. Há dois casos comuns em que isso pode acontecer:</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>Os usuários do IAM no AWS Management Console inconscientemente usam credenciais temporárias. Os usuários fazem login no console do usando seu nome de usuário e senha, que são credenciais de longo prazo. No entanto, em segundo plano, o console gera credenciais temporárias em nome do usuário. </p>
            </li><li class="listitem">
                <p>Se um usuário do IAM faz uma chamada para um produto da AWS, o produto reutiliza as credenciais do usuário para fazer outra solicitação a outro serviço. Por exemplo, ao chamar o Athena para acessar um bucket do Amazon S3 ou ao usar o AWS CloudFormation para criar uma instância do Amazon EC2. Para a solicitação subsequente, a AWS usa credenciais temporárias.</p>
            </li></ul></div>
        <p>Para saber quais serviços oferecem suporte a credenciais de segurança temporárias, consulte <a href="./reference_aws-services-that-work-with-iam.html">Serviços da AWS que funcionam com o IAM</a>.</p>
        <p>A chave <code class="code">aws:MultiFactorAuthPresent</code> nunca está presente quando uma API ou um comando da CLI é chamado com credenciais de longo prazo, como pares de chave de acesso. Portanto, recomendamos que, ao verificar essa chave, você use as versões <code class="code"><a href="./reference_policies_elements_condition_operators.html#Conditions_IfExists">...IfExists</a></code> dos operadores de condição.</p>
        <p>É importante compreender que o seguinte elemento <code class="code">Condition</code> <em><b>não</b></em> é uma maneira confiável de verificar se uma solicitação é autenticada usando MFA.</p>
        <pre class="programlisting"><div class="code-btn-container"></div><code class="json ">#####   WARNING: NOT RECOMMENDED   #####
"Effect" : "Deny",
"Condition" : <span>{</span> "Bool" : <span>{</span> "aws:MultiFactorAuthPresent" : "false" } }</code></pre>
        <p>Essa combinação do efeito <code class="code">Deny</code>, do elemento <code class="code">Bool</code> e do valor <code class="code">false</code> nega as solicitações que podem ser autenticadas usando MFA, mas que não foram. Isso se aplica apenas a credenciais temporárias que oferecem suporte usando MFA. Essa declaração não nega o acesso a solicitações que são feitas usando credenciais de longo prazo ou a solicitações que são autenticadas usando MFA. Use este exemplo com cuidado, pois a lógica é complicada e não testa se a autenticação por MFA foi realmente utilizada. </p>
        <p>Além disso, não use a combinação do efeito <code class="code">Deny</code>, do elemento <code class="code">Null</code> e <code class="code">true</code> porque ela se comporta da mesma forma e a lógica é ainda mais complicada.</p>
         
            <h6>Combinação recomendada</h6>
            <p>Recomendamos usar o operador <a href="./reference_policies_elements_condition_operators.html#Conditions_IfExists">BoolIfExists</a> para verificar se um solicitação foi autenticada usando MFA.</p>
         
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Effect" : "Deny",
"Condition" : <span>{</span> "BoolIfExists" : <span>{</span> "aws:MultiFactorAuthPresent" : "false" } }</code></pre>
        <p>Essa combinação de <code class="code">Deny</code>, <code class="code">BoolIfExists</code> e <code class="code">false</code> nega solicitações que não são autenticados usando MFA. Especificamente, ela nega solicitações de credenciais temporárias que não incluem MFA. Ele também nega solicitações que são feitas usando credenciais de longo prazo, como operações da AWS CLI ou da API da AWS feitas usando chaves de acesso. O operador <code class="code">*IfExists</code> verificará a presença da chave <code class="code">aws:MultiFactorAuthPresent</code> e se ela poderia ou não estar presente, conforme indicado pela sua existência. Use essa opção quando quiser recusar qualquer solicitação que não tenha sido autenticada usando MFA. Isso é mais seguro, mas pode danificar um código ou script que use chaves de acesso para acessar a AWS CLI ou a API da AWS. </p>
         
            <h6>Combinações alternativas</h6>
            <p>Também é possível usar o operador <a href="./reference_policies_elements_condition_operators.html#Conditions_IfExists">BoolIfExists</a> para permitir solicitações autenticadas por MFA e solicitações da AWS CLI ou da API da AWS que são feitas usando credenciais de longo prazo.</p>
         
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Effect" : "Allow",
"Condition" : <span>{</span> "BoolIfExists" : <span>{</span> "aws:MultiFactorAuthPresent" : "true" } }</code></pre>
        <p>Essa condição corresponde à condição se a chave existe e está presente <b>ou</b> se a chave não existe. Essa combinação de <code class="code">Allow</code>, <code class="code">BoolIfExists</code>, e <code class="code">true</code> permite as solicitações autenticadas usando MFA ou as solicitações que não podem ser autenticadas usando MFA. Isso significa que as operações da AWS CLI, da API da AWS e do AWS SDK são permitidas quando o solicitante usa as chaves de acesso de longo prazo dele. Essa combinação não permite solicitações de credenciais temporárias que poderiam, mas não incluem MFA. </p>
        <p>Quando você cria uma política usando o editor visual do console do IAM e seleciona <b>MFA required</b> (MFA obrigatória), essa combinação é aplicada. Essa configuração requer MFA para acesso ao console, mas permite acesso programático sem MFA. </p>
        <p>Como alternativa, você pode usar o operador <code class="code">Bool</code> para permitir solicitações programáticas e de console somente quando a autenticação for feita usando MFA.</p>
        <pre class="programlisting"><div class="code-btn-container"></div><code class="json ">"Effect" : "Allow",
"Condition" : <span>{</span> "Bool" : <span>{</span> "aws:MultiFactorAuthPresent" : "true" } }</code></pre>
        <p>Essa combinação de <code class="code">Allow</code>, <code class="code">Bool</code> e <code class="code">true</code> permite apenas solicitações autenticadas por MFA. Isso se aplica apenas a credenciais temporárias que oferecem suporte usando MFA. Essa declaração não permite o acesso a solicitações que são feitas usando chaves de acesso de longo prazo ou a solicitações feitas usando credenciais temporárias sem MFA. </p>
        <p><b><em>Não</em></b> use um elemento de política seguinte ao seguinte para verificar se a chave de MFA está presente:</p>
        <pre class="programlisting"><div class="code-btn-container"></div><code class="json ">#####   WARNING: USE WITH CAUTION   #####

"Effect" : "Allow",
"Condition" : <span>{</span> "Null" : <span>{</span> "aws:MultiFactorAuthPresent" : "false" } }</code></pre>
        <p>Essa combinação do efeito <code class="code">Allow</code>, do elemento <code class="code">Null</code> e do valor <code class="code">false</code> permite apenas solicitações que podem ser autenticadas usando MFA, independentemente de a solicitação ser realmente autenticada. Isso permite todas as solicitações que são feitas usando credenciais temporárias e nega o acesso para credenciais de longo prazo. Use este exemplo com cuidado porque ele não testa se a autenticação por MFA foi realmente utilizada. </p>
     
        <h2 id="condition-keys-principalaccount">aws:PrincipalAccount</h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
        <p>Use essa chave para comparar a conta à qual o principal solicitante pertence com o identificador de conta especificado na política. Para solicitações anônimas, o contexto da solicitação retorna <code class="code">anonymous</code>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> (Disponibilidade): essa chave é incluída no contexto da solicitação para todas as solicitações, incluindo as anônimas.</p>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valor único</p>
            </li></ul></div>
        <p>No exemplo a seguir, o acesso é negado, exceto para entidades principais com o número de conta<code class="code">123456789012</code>.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Sid": "DenyAccessFromPrincipalNotInSpecificAccount",
      "Action": "<code class="replaceable">service</code>:*",
      "Effect": "Deny",
      "Resource": [
        "arn:aws:<code class="replaceable">service:region:accountID:resource</code>"
      ],
      "Condition": <span>{</span>
        "StringNotEquals": <span>{</span>
          "aws:PrincipalAccount": [
            "123456789012"
          ]
        }
      }
    }
  ]
}
        </code></pre>

     
        <h2 id="condition-keys-principalarn">aws:PrincipalArn</h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_ARN">operadores de ARN</a> e <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
        <p>Use essa chave para comparar o <a href="./reference_identifiers.html#identifiers-arns">nome de recurso da Amazon</a> (ARN) do principal que fez a solicitação com o ARN especificado na política. Para funções do IAM, o contexto da solicitação retorna o ARN da função, não o ARN do usuário que assumiu a função. </p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Disponibilidade</b>: essa chave será incluída no contexto da solicitação para todas as solicitações assinadas. As solicitações anônimas não incluem essa chave. Você pode especificar os seguintes tipos de entidades principais nesta chave de condição: </p>
                <div class="itemizedlist">
                     
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>Perfil do IAM</p>
                    </li><li class="listitem">
                        <p>Usuário do IAM</p>
                    </li><li class="listitem">
                        <p>Sessão de usuário federado do AWS STS</p>
                    </li><li class="listitem">
                        <p>Usuário root da Conta da AWS</p>
                    </li></ul></div>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valor único</p>
            </li></ul></div>
        <p>A lista a seguir mostra o valor do contexto de solicitação retornado para diferentes tipos de entidades principais que você pode especificar na chave de condição <code class="code">aws:PrincipalArn</code>:</p>
        <div class="itemizedlist">
             
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Perfil do IAM</b>: o contexto da solicitação contém o seguinte valor para a chave de condição <code class="code">aws:PrincipalArn</code>. Não especifique o ARN da sessão de perfil assumida como um valor para essa chave de condição. Para obter mais informações sobre a entidade principal da sessão de perfil assumida, consulte <a href="./reference_policies_elements_principal.html#principal-role-session">Entidades principais da sessão de função</a>.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="code" copy="true">arn:aws:iam::123456789012:role/role-name</code></code></pre>
            </li><li class="listitem">
                <p><b>Usuário do IAM</b>: o contexto da solicitação contém o seguinte valor para a chave de condição <code class="code">aws:PrincipalArn</code>.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="code" copy="true">arn:aws:iam::123456789012:user/<code class="replaceable">user-name</code></code></code></pre>
            </li><li class="listitem">
                <p><b>Sessões de usuário federado do AWS STS</b>: o contexto da solicitação contém o seguinte valor para a chave de condição <code class="code">aws:PrincipalArn</code>.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="code" copy="true">arn:aws:sts::123456789012:federated-user/<code class="replaceable">user-name</code></code></code></pre>
            </li><li class="listitem">
                <p><b>Usuário raiz da Conta da AWS</b>: o contexto da solicitação contém o seguinte valor para a chave de condição <code class="code">aws:PrincipalArn</code>. Quando você especifica o ARN do usuário raiz como o valor da chave de condição <code class="code">aws:PrincipalArn</code>, ele limita as permissões apenas para o usuário raiz da Conta da AWS. Isso é diferente de especificar o ARN do usuário raiz no elemento principal de uma política baseada em recursos, o qual delega autoridade à Conta da AWS. Para obter mais informações sobre como especificar o ARN do usuário raiz no elemento principal de uma política baseada em recursos, consulte <a href="./reference_policies_elements_principal.html#principal-accounts">Entidades principais da Conta da AWS</a>. </p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="code" copy="true">arn:aws:iam::123456789012:root</code></code></pre>
                <p>Você pode especificar o ARN do usuário raiz como um valor para o <code class="code">aws:PrincipalArn</code> da chave de condição nas políticas de controle de serviço (SCPs) do AWS Organizations. As SCPs são um tipo de política da organização usada para gerenciar permissões em sua organização e afetam apenas contas-membro na organização. Uma SCP restringe as permissões para usuários e funções do IAM em contas-membro, incluindo o usuário-raiz da conta-membro. Para obter mais informações sobre o efeito das SCPs nas permissões, consulte <a href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_scps.html#scp-effects-on-permissions">SCP effects on permissions</a> (Efeitos das SCPs nas permissões) no <em>Guia do usuário do Organizations</em>.</p>
            </li></ul></div>
        
     
        <h2 id="condition-keys-principalisawsservice">aws:PrincipalIsAWSService</h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_Boolean">Operadores boolianos</a>.</p>
        <p>Use esta chave para verificar se a chamada para o seu recurso está sendo feita diretamente por uma <a href="./reference_policies_elements_principal.html#principal-services">entidade de segurança do produto</a> da AWS. Por exemplo, o AWS CloudTrail usa a entidade de segurança <code class="code">cloudtrail.amazonaws.com</code> do serviço para gravar logs no bucket do Amazon S3. A chave de contexto de solicitação é definida como verdadeira quando um serviço usa uma entidade de segurança do serviço para executar uma ação direta em seus recursos. A chave de contexto é definida como false (falsa) se o serviço usar as credenciais de uma entidade de segurança do IAM para fazer uma solicitação em nome da entidade de segurança. Também é definida como false se o serviço usar uma <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-role">função de serviço</a> ou <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-linked-role">função vinculada ao serviço</a> para fazer uma chamada em nome da entidade de segurança.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Disponibilidade do</b>: essa chave está presente no contexto da solicitação para todas as solicitações de API assinadas que usam credenciais da AWS. As solicitações anônimas não incluem essa chave.</p>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valor único</p>
            </li></ul></div>
        <p>Você pode usar essa chave de condição para limitar o acesso às suas identidades confiáveis e locais de rede esperados, ao mesmo tempo que concede acesso com segurança aos produtos da AWS.</p>
        <p>No exemplo de política de bucket do Amazon S3 a seguir, o acesso ao bucket é restrito, a menos que a solicitação seja originada de <code class="code">vpc-111bbb22</code> ou seja de uma entidade de segurança de serviço, como o CloudTrail.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Sid": "Expected-network+service-principal",
      "Effect": "Deny",
      "Principal": "*",
      "Action": "s3:PutObject",
      "Resource": "arn:aws:s3:::<code class="replaceable"><code class="replaceable">DOC-EXAMPLE-BUCKET1</code></code>/AWSLogs/<code class="replaceable">AccountNumber</code>/*",
      "Condition": <span>{</span>
        "StringNotEqualsIfExists": <span>{</span>
          "aws:SourceVpc": "vpc-111bbb22"
        },
        "BoolIfExists": <span>{</span>
          "aws:PrincipalIsAWSService": "false"
        }
      }
    }
  ]
}</code></pre>
        
        <p>No vídeo a seguir, saiba mais sobre como você pode usar a chave de condição <code class="code">aws:PrincipalIsAWSService</code> em uma política.</p>
        <div class="mediaobject">
             
                <iframe width="720" height="330" frameborder="0" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" sandbox="allow-scripts allow-same-origin allow-popups" src="https://www.youtube-nocookie.com/embed/gv-_H8a42G4"></iframe>
             
             
        </div>
        
        
        
     
        <h2 id="condition-keys-principalorgid">aws:PrincipalOrgID</h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
        <p>Use essa chave para comparar o identificador da organização no AWS Organizations ao qual o principal solicitante pertence com o identificador especificado na política.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Disponibilidade</b>: essa chave é incluída no contexto da solicitação somente se a entidade de segurança for membro de uma organização. As solicitações anônimas não incluem essa chave.</p>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valor único</p>
            </li></ul></div>
        <p>Essa chave global fornece uma alternativa para listar todos os IDs de conta para todas as contas da AWS em uma organização. Você pode usar essa chave de condição para simplificar a especificação do elemento <code class="code">Principal</code> em uma <a href="./access_policies_identity-vs-resource.html">política baseada no recurso</a>. É possível especificar o <a href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_org_details.html">ID da organização</a> no elemento de condição. Ao adicionar e remover contas, as políticas que incluem a chave <code class="code">aws:PrincipalOrgID</code> incluem automaticamente as contas corretas e não exigem a atualização manual.</p>
        <p>Por exemplo, a política de bucket do Amazon S3 a seguir permite que membros de qualquer conta na organização <code class="code">o-xxxxxxxxxxx</code> adicionem um objeto ao bucket <code class="code">policy-ninja-dev</code>. </p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "> <span>{</span>
  "Version": "2012-10-17",
  "Statement": <span>{</span>
    "Sid": "AllowPutObject",
    "Effect": "Allow",
    "Principal": "*",
    "Action": "s3:PutObject",
    "Resource": "arn:aws:s3:::policy-ninja-dev/*",
    "Condition": <span>{</span>"StringEquals":
      <span>{</span>"aws:PrincipalOrgID":"o-xxxxxxxxxxx"}
    }
  }
}</code></pre>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Essa condição global também se aplica a conta de gerenciamento de uma organização da AWS. Essa política impede que todas as entidades principais fora da organização especificada acessem o bucket do Amazon S3. Isso inclui quaisquer serviços da AWS que interagem com seus recursos internos, como o AWS CloudTrail enviando dados de log para seus buckets do Amazon S3. Para saber mais sobre como conceder acesso a serviços da AWS com segurança, consulte <a href="#condition-keys-principalisawsservice">aws:PrincipalIsAWSService</a>.</p></div></div>
        <p>Para obter informações sobre o AWS Organizations, consulte <a href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_introduction.html">O que é AWS Organizations?</a> no <em>Guia do usuário do AWS Organizations</em>.</p>
     
        <h2 id="condition-keys-principalorgpaths">aws:PrincipalOrgPaths</h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
        <p>Use esta chave para comparar o caminho AWS Organizations para o principal que está fazendo a solicitação para o caminho na política. Essa entidade principal pode ser um usuário do IAM, um perfil do IAM, um usuário federado ou um Usuário raiz da conta da AWS. Em uma política, essa chave de condição garante que o solicitante seja um membro da conta na raiz da organização especificada ou unidades organizacionais (OUs) em AWS Organizations. Um caminho do AWS Organizations é uma representação de texto da estrutura de uma entidade do Organizations. Para obter mais informações sobre como usar e entender os caminhos, consulte <a href="./access_policies_access-advisor-view-data-orgs.html#access_policies_access-advisor-viewing-orgs-entity-path">Compreender o caminho da entidade do AWS Organizations</a>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Disponibilidade</b>: essa chave é incluída no contexto da solicitação somente se a entidade de segurança for membro de uma organização. As solicitações anônimas não incluem essa chave.</p>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valores múltiplos</p>
            </li></ul></div>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Os IDs de organização são globalmente exclusivos, mas os IDs da UO e da raiz são exclusivos somente dentro de uma organização. Isso significa que duas organizações não compartilham o mesmo ID de organização. No entanto, outra organização pode ter uma UO ou raiz com o mesmo ID que o seu. Recomendamos sempre incluir o ID da organização ao especificar uma UO ou raiz.</p></div></div>
        
        <p>Por exemplo, a condição a seguir retorna <code class="code">true</code> para entidades de segurança em contas anexadas diretamente à UO <code class="code">ou-ab12-22222222</code>, mas não em suas UOs filhas.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">"Condition" : <span>{</span> "ForAnyValue:StringEquals" : <span>{</span>
     "aws:PrincipalOrgPaths":["o-a1b2c3d4e5/r-ab12/ou-ab12-11111111/ou-ab12-22222222/"]
}}</code></pre>
        
        <p>A condição a seguir retorna <code class="code">true</code> para entidades de segurança em uma conta que está anexada diretamente à UO ou a qualquer uma de suas UOs filhas. Ao incluir um caractere curinga, é necessário usar o operador de condição <code class="code">StringLike</code>.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">"Condition" : <span>{</span> "ForAnyValue:StringLike" : <span>{</span>
     "aws:PrincipalOrgPaths":["o-a1b2c3d4e5/r-ab12/ou-ab12-11111111/ou-ab12-22222222/*"]
}}</code></pre>
        <p>A condição a seguir retorna <code class="code">true</code> para entidades de segurança em uma conta que está anexada diretamente a qualquer uma das UOs filhas, mas não diretamente à UO mãe. A condição anterior é para a UO ou para as crianças. A condição a seguir é apenas para filhos (e quaisquer filhos desses filhos).</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">"Condition" : <span>{</span> "ForAnyValue:StringLike" : <span>{</span>
     "aws:PrincipalOrgPaths":["o-a1b2c3d4e5/r-ab12/ou-ab12-11111111/ou-ab12-22222222/ou-*"]
}}</code></pre>
        <p>A condição a seguir permite acesso a todos os principais da organização <code class="code">o-a1b2c3d4e5</code>, independentemente de sua UO pai.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">"Condition" : <span>{</span> "ForAnyValue:StringLike" : <span>{</span>
     "aws:PrincipalOrgPaths":["o-a1b2c3d4e5/*"]
}}</code></pre>
        <p><code class="code">aws:PrincipalOrgPaths</code> é uma chave de condição de vários valores. Chaves de valores múltiplos podem ter vários valores no contexto da solicitação. Quando você usa vários valores com o operador de condição <code class="code">ForAnyValue</code>, o caminho do principal deve corresponder a um dos caminhos listados na política. Para obter mais informações sobre chaves de condição de vários valores, consulte <a href="./reference_policies_multi-value-conditions.html#reference_policies_multi-key-or-value-conditions">Usar várias chaves e valores</a>.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">    "Condition": <span>{</span>
        "ForAnyValue:StringLike": <span>{</span>
            "aws:PrincipalOrgPaths": [
                "o-a1b2c3d4e5/r-ab12/ou-ab12-33333333/*",
                "o-a1b2c3d4e5/r-ab12/ou-ab12-22222222/*"
            ]
        }
    }</code></pre>
     
        <h2 id="condition-keys-principalservicename">aws:PrincipalServiceName</h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
        <p>Use esta chave para comparar o nome da <a href="./reference_policies_elements_principal.html#principal-services">entidade de segurança de serviço</a> na política com a entidade de segurança de serviço que está fazendo solicitações aos seus recursos. Você pode usar essa chave para verificar se essa chamada é feita por uma entidade de segurança de serviço específica. Quando uma entidade de segurança do serviço faz uma solicitação direta ao seu recurso, a chave <code class="code">aws:PrincipalServiceName</code> contém o nome da entidade de segurança do serviço. Por exemplo, o nome da entidade de segurança do serviço AWS CloudTrail é <code class="code">cloudtrail.amazonaws.com</code>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Disponibilidade</b>: essa chave está presente na solicitação quando a chamada é feita por uma entidade de segurança de produto da AWS. Esta chave não está presente em nenhuma outra situação, incluindo a seguinte:</p>
                <div class="itemizedlist">
                     
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>se o serviço usa uma <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-role">função de serviço</a> ou uma <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-linked-role">função vinculada ao serviço</a> para fazer uma chamada em nome da entidade de segurança.</p>
                    </li><li class="listitem">
                        <p>Se o serviço usar as credenciais de uma entidade de segurança do IAM para fazer uma solicitação em nome da entidade de segurança.</p>
                    </li><li class="listitem">
                        <p>Se a chamada for feita diretamente por uma entidade de segurança do IAM.</p>
                    </li><li class="listitem">
                        <p>Se a chamada for feita por um solicitante anônimo.</p>
                    </li></ul></div>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valor único</p>
            </li></ul></div>
        <p>Você pode usar essa chave de condição para limitar o acesso às suas identidades confiáveis e locais de rede esperados, ao mesmo tempo que concede acesso com segurança a um produto da AWS.</p>
        <p>No exemplo de política de bucket do Amazon S3 a seguir, o acesso ao bucket é restrito, a menos que a solicitação seja originada de <code class="code">vpc-111bbb22</code> ou seja de uma entidade de segurança de serviço, como o CloudTrail.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Sid": "expected-network+service-principal",
      "Effect": "Deny",
      "Principal": "*",
      "Action": "s3:PutObject",
      "Resource": "arn:aws:s3:::<code class="replaceable"><code class="replaceable">DOC-EXAMPLE-BUCKET1</code></code>/AWSLogs/<code class="replaceable">AccountNumber</code>/*",
      "Condition": <span>{</span>
        "StringNotEqualsIfExists": <span>{</span>
          "aws:SourceVpc": "vpc-111bbb22",
          "aws:PrincipalServiceName": "cloudtrail.amazonaws.com"
        }
      }
    }
  ]
}
        </code></pre>
     
        <h2 id="condition-keys-principalservicenameslist">aws:PrincipalServiceNamesList</h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
        <p>Essa chave fornece uma lista de todos os nomes de <a href="./reference_policies_elements_principal.html#principal-services">entidade de segurança de serviço</a> que pertencem ao serviço. Esta é uma chave de condição avançada. Você pode usá-la para restringir o acesso do serviço ao seu recurso somente de uma região específica. Alguns serviços podem criar entidades de serviço regionais para indicar uma instância específica do serviço dentro de uma região específica. Você pode limitar o acesso a um recurso para uma instância específica do serviço. Quando uma entidade de segurança do serviço faz uma solicitação direta ao seu recurso, a chave <code class="code">aws:PrincipalServiceNamesList</code> contém uma lista não ordenada de todos os nomes das entidades de segurança do serviço associadas à instância regional do serviço.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Disponibilidade</b>: essa chave está presente na solicitação quando a chamada é feita por uma entidade de segurança de produto da AWS. Esta chave não está presente em nenhuma outra situação, incluindo a seguinte:</p>
                <div class="itemizedlist">
                     
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>se o serviço usa uma <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-role">função de serviço</a> ou uma <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-linked-role">função vinculada ao serviço</a> para fazer uma chamada em nome da entidade de segurança.</p>
                    </li><li class="listitem">
                        <p>Se o serviço usar as credenciais de uma entidade de segurança do IAM para fazer uma solicitação em nome da entidade de segurança.</p>
                    </li><li class="listitem">
                        <p>Se a chamada for feita diretamente por uma entidade de segurança do IAM.</p>
                    </li><li class="listitem">
                        <p>Se a chamada for feita por um solicitante anônimo.</p>
                    </li></ul></div>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valores múltiplos</p>
            </li></ul></div>
        <p><code class="code">aws:PrincipalServiceNamesList</code> é uma chave de condição de vários valores. Chaves de valores múltiplos podem ter vários valores no contexto da solicitação. Você deve usar os operadores de conjunto <code class="code">ForAnyValue</code> ou <code class="code">ForAllValues</code> com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de condição de string</a> para essa chave. Para obter mais informações sobre chaves de condição de vários valores, consulte <a href="./reference_policies_multi-value-conditions.html#reference_policies_multi-key-or-value-conditions">Usar várias chaves e valores</a>.</p>
     
        <h2 id="condition-keys-principaltag">aws:PrincipalTag/<em>tag-key</em></h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
        <p>Use essa chave para comparar a tag anexada ao principal que está fazendo a solicitação com a tag especificada na política. Se o principal tiver mais de uma tag anexada, o contexto da solicitação incluirá uma chave <code class="code">aws:PrincipalTag</code> para cada chave de tag anexada.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Disponibilidade</b>: essa chave será incluída no contexto da solicitação se a entidade de segurança estiver usando um usuário do IAM com etiquetas anexadas. Ela será incluída para uma entidade de segurança usando uma função do IAM com etiquetas anexadas ou <a href="./id_session-tags.html">etiquetas de sessão</a>. As solicitações anônimas não incluem essa chave.</p>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valor único</p>
            </li></ul></div>
        <p>É possível adicionar atributos personalizados a um usuário ou uma função na forma de um par de chave/valor. Para obter mais informações sobre etiquetas do IAM, consulte <a href="./id_tags.html">Recursos de etiquetas do IAM</a>. Você pode usar <code class="code">aws:PrincipalTag</code> para <a href="./access_iam-tags.html#access_iam-tags_control-principals">controlar acesso</a> de principais da AWS.</p>
        <p>Este exemplo mostra como você pode criar uma política baseada em identidade que permita que usuários com a tag <code class="userinput">department=hr</code> gerenciem usuários, grupos ou perfis do IAM. Para usar esta política, substitua o <code class="replaceable">texto do espaço reservado em itálico</code> na política de exemplo por suas próprias informações. Em seguida, siga as instruções em <a href="./access_policies_create.html">criar uma política</a> ou <a href="./access_policies_manage-edit.html">editar uma política</a>.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Action": "iam:*",
      "Resource": "*",
      "Condition": <span>{</span>
        "StringEquals": <span>{</span>
          "aws:PrincipalTag/<code class="replaceable">department</code>": "<code class="replaceable">hr</code>"
        }
      }
    }
  ]
}</code></pre>
        <p>Este exemplo mostra como criar uma política baseada em recursos com a chave <code class="code">aws:PrincipalTag</code> no ARN do recurso. A política permitirá a ação <code class="code">s3:GetObject</code> somente se o nome do bucket terminar com o nome da equipe da etiqueta <code class="code"><code class="replaceable">team</code></code> da entidade principal. Para usar esta política, substitua o <code class="replaceable">texto do espaço reservado em itálico</code> na política de exemplo por suas próprias informações. Em seguida, siga as instruções em <a href="./access_policies_create.html">criar uma política</a> ou <a href="./access_policies_manage-edit.html">editar uma política</a>.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": <span>{</span>
    "Effect": "Allow",
    "Principal": "*",
    "Action": "s3:GetObject",
    "Resource": "arn:aws:s3:::<code class="replaceable">DOC-EXAMPLE-BUCKET</code>-$<span>{</span>aws:PrincipalTag/<code class="replaceable">team</code>}/"
  }
}</code></pre>
     
        <h2 id="condition-keys-principaltype">aws:PrincipalType</h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
        <p>Use essa chave para comparar o tipo de principal que está fazendo a solicitação com o tipo de principal especificado na política. Para obter mais informações, consulte <a href="./reference_policies_elements_principal.html#Principal_specifying">Especificar um principal</a>. Para exemplos específicos de valores de chave de <code class="code">principal</code>, consulte <a href="./reference_policies_variables.html#principaltable">Valores de chave de principal</a>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> (Disponibilidade): essa chave é incluída no contexto da solicitação para todas as solicitações, incluindo as anônimas.</p>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valor único</p>
            </li></ul></div>
     
        <h2 id="condition-keys-referer">aws:referer</h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
        <p>Use essa chave para comparar quem indicou a solicitação no navegador cliente com o indicador especificado na política. O valor de contexto da solicitação <code class="code">aws:referer</code> é fornecido pelo chamador em um cabeçalho HTTP. O cabeçalho <code class="code">Referer</code> é incluído em uma solicitação de navegador da Web quando você seleciona um link em uma página da Web. O cabeçalho <code class="code">Referer</code> contém o URL da página da Web onde o link foi selecionado.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Disponibilidade</b>: essa chave será incluída no contexto da solicitação apenas se a solicitação para o recurso da AWS for invocada vinculando um URL de página da Web no navegador. Essa chave não está incluída para solicitações programáticas porque não usa um link do navegador para acessar o recurso AWS.</p>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valor único</p>
            </li></ul></div>
        <p>Por exemplo, você pode acessar um objeto do Amazon S3 diretamente, usando um URL ou a invocação direta da API. Para obter mais informações, consulte <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/example-bucket-policies.html#example-bucket-policies-use-case-4">Operações de API do Amazon S3 diretamente usando um navegador da Web</a>. Quando você acessa um objeto do Amazon S3 de um URL que existe em uma página da Web, o URL da página da Web de origem é usado em <code class="code">aws:referer</code>. Quando você acessa um objeto do Amazon S3 digitando o URL no seu navegador, o <code class="code">aws:referer</code> não está presente. Quando você invoca a API diretamente, <code class="code">aws:referer</code> também não está presente. Você pode usar a chave da condição <code class="code">aws:referer</code> em uma política para permitir solicitações feitas de um referencial específico, como um link em uma página da Web no domínio da sua empresa. </p>
        <div class="awsdocs-note awsdocs-warning"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Atenção</h6></div><div class="awsdocs-note-text"><p>Essa chave deve ser usada com cuidado. É perigoso incluir um valor de cabeçalho do indicador conhecido publicamente. Partes não autorizadas podem usar navegadores personalizados ou modificados para fornecer qualquer valor de <code class="code">aws:referer</code> que escolherem. Como resultado, <code class="code">aws:referer</code> não deve ser usado para impedir que terceiros não autorizados façam solicitações diretas da AWS. Ele é oferecido apenas para permitir que os clientes impeçam que seu conteúdo digital, como o conteúdo armazenado no Amazon S3, seja indicado em sites de terceiros não autorizados.</p></div></div>
     
        <h2 id="condition-keys-requestedregion">aws:RequestedRegion</h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
        <p>Use essa chave para comparar a região da AWS que foi chamada na solicitação com a região especificada na política. É possível usar essa chave de condição global para controlar quais regiões podem ser solicitadas. Para visualizar as regiões da AWS de cada serviço, consulte <a href="https://docs.aws.amazon.com/general/latest/gr/aws-service-information.html">Cotas e endpoints de serviço</a> na <em>Referência geral da Amazon Web Services</em>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Disponibilidade</b>: essa chave é sempre incluída no contexto da solicitação.</p>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valor único</p>
            </li></ul></div>
        <p>Alguns serviços globais, como o IAM, têm um único endpoint. Como esse endpoint está fisicamente localizado na região Leste dos EUA (Norte da Virgínia), as chamadas do IAM sempre são feitas para a região us-east-1. Por exemplo, se você criar uma política que negue acesso a todos os serviços se a região solicitada não for us-west-2, as chamadas do IAM sempre falharão. Para ver um exemplo de como resolver isso, consulte <a href="./reference_policies_elements_notaction.html">NotAction com Deny</a>. </p>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>A chave de condição <code class="code">aws:RequestedRegion</code> permite que você controle qual endpoint de um serviço é invocado, mas não abrange o impacto da operação. Alguns serviços têm impactos entre regiões. Por exemplo, o Amazon S3 tem operações de API que controlam a replicação entre regiões. É possível invocar <code class="code">s3:PutBucketReplication</code> em uma região (que é afetada pela chave de condição <code class="code">aws:RequestedRegion</code>), mas outras regiões são afetadas com base nas definições da configuração das replicações. </p></div></div>
        <p>É possível usar essa chave de contexto para limitar o acesso aos serviços da AWS em um determinado conjunto de regiões. Por exemplo, a política a seguir permite que um usuário visualize todas as instâncias do Amazon EC2 no AWS Management Console. No entanto, eles só podem realizar alterações às instâncias na Irlanda (eu-west-1), Londres (eu-west-2) ou Paris (eu-west-3).</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "InstanceConsoleReadOnly",
            "Effect": "Allow",
            "Action": [
                "ec2:Describe*",
                "ec2:Export*",
                "ec2:Get*",
                "ec2:Search*"
            ],
            "Resource": "*"
        },
        <span>{</span>
            "Sid": "InstanceWriteRegionRestricted",
            "Effect": "Allow",
            "Action": [
                "ec2:Associate*",
                "ec2:Import*",
                "ec2:Modify*",
                "ec2:Monitor*",
                "ec2:Reset*",
                "ec2:Run*",
                "ec2:Start*",
                "ec2:Stop*",
                "ec2:Terminate*"
            ],
            "Resource": "*",
            "Condition": <span>{</span>
                "StringEquals": <span>{</span>
                    "aws:RequestedRegion": [
                        "eu-west-1",
                        "eu-west-2",
                        "eu-west-3"
                    ]
                }
            }
        }
    ]
}       </code></pre>
     
        <h2 id="condition-keys-requesttag">aws:RequestTag/<em>tag-key</em></h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
        <p>Use essa chave para comparar o par de chave/valor da tag que foi passado na solicitação com o par de tags especificado na política. Por exemplo, é possível verificar se a solicitação inclui a chave de tag <code class="code">"Dept"</code> e se ela tem o valor <code class="code">"Accounting"</code>. Para obter mais informações, consulte <a href="./access_tags.html#access_tags_control-requests">Controlar o acesso durante solicitações do AWS</a>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> (Disponibilidade): essa chave é incluída no contexto da solicitação quando os pares de chave-valor são passadas na solicitação. Quando várias tags forem passadas na solicitação, haverá uma chave de contexto para cada par de chave/valor de tag.</p>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valor único</p>
            </li></ul></div>
        <p>Essa chave de contexto é formatada <code class="code">"aws:RequestTag/<code class="replaceable">tag-key</code>":"<code class="replaceable">tag-value</code>"</code> em que <code class="replaceable">tag-key</code> e <code class="replaceable">tag-value</code> são uma chave de tag e um par de valores. As chaves e os valores de etiquetas não diferenciam maiúsculas de minúsculas. Isso significa que, se você especificar <code class="code">"aws:RequestTag/TagKey1": "Value1"</code> no elemento de condição da sua política, a condição corresponderá a uma chave de etiqueta de solicitação chamada <code class="code">TagKey1</code> ou <code class="code">tagkey1</code>, mas não ambas.</p>
        <p>Este exemplo mostra que, embora a chave tenha um único valor, você ainda poderá usar vários pares de chave-valor em uma solicitação se as chaves forem diferentes.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": <span>{</span>
    "Effect": "Allow",
    "Action": "ec2:CreateTags",
    "Resource": "arn:aws:ec2:::instance/*",
    "Condition": <span>{</span>
      "StringEquals": <span>{</span>
        "aws:RequestTag/environment": [
          "preprod",
          "production"
        ],
        "aws:RequestTag/team": [
          "engineering"
        ]
      }
    }
  }
}
</code></pre>
     
        <h2 id="condition-keys-resourceaccount">aws:ResourceAccount</h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
        <p>Use essa chave para comparar o <a href="https://docs.aws.amazon.com/general/latest/gr/acct-identifiers.html">Conta da AWSID</a> do proprietário do recurso solicitado com a conta do recurso na política. Então, você pode permitir ou negar o acesso a esse recurso com base na conta proprietária do recurso.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> (Disponibilidade): essa chave sempre é incluída no contexto da solicitação para a maioria das ações do serviço. As ações a seguir não são compatíveis com essa chave de condição:</p>
                <div class="itemizedlist">
                     
                     
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>Amazon Elastic Block Store: todas as ações</p>
                    </li><li class="listitem">
                        <p>Amazon EC2</p>
                        <div class="itemizedlist">
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p><code class="code">ec2:AcceptTransitGatewayPeeringAttachment</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:AcceptVpcEndpointConnections</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:AcceptVpcPeeringConnection</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:CopySnapshot</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:CreateVolume</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:CreateVpcEndpoint</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:CreateVpcPeeringConnection</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:DeleteTransitGatewayPeeringAttachment</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:DeleteVpcPeeringConnection</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:RejectTransitGatewayPeeringAttachment</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:RejectVpcEndpointConnections</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:RejectVpcPeeringConnection</code></p>
                            </li></ul></div>
                    </li><li class="listitem">
                        <p>Amazon EventBridge: todas as ações</p>
                    </li><li class="listitem">
                        <p>Amazon Route 53</p>
                        <div class="itemizedlist">
                             
                             
                             
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p><code class="code">route53:AssociateVpcWithHostedZone</code></p>
                            </li><li class="listitem">
                                <p><code class="code">route53:CreateVPCAssociationAuthorization</code></p>
                            </li><li class="listitem">
                                <p><code class="code">route53:DeleteVPCAssociationAuthorization</code></p>
                            </li><li class="listitem">
                                <p><code class="code">route53:DisassociateVPCFromHostedZone</code></p>
                            </li><li class="listitem">
                                <p><code class="code">route53:ListHostedZonesByVPC</code></p>
                            </li></ul></div>
                    </li><li class="listitem">
                        <p>Amazon WorkSpaces</p>
                        <div class="itemizedlist">
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p><code class="code">workspaces:DescribeWorkspaceImages</code></p>
                            </li></ul></div>
                    </li></ul></div>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valor único</p>
            </li></ul></div>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Para considerações adicionais sobre as ações sem suporte acima, consulte o repositório <a href="https://github.com/aws-samples/data-perimeter-policy-examples" rel="noopener noreferrer" target="_blank"><span>Exemplos de políticas de perímetro de dados</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></div></div>
        <p>Essa chave é igual ao ID da Conta da AWS para a conta com os recursos avaliados na solicitação.</p>
        <p>Para a maioria dos recursos da sua conta, o <a href="./reference_policies_elements_condition_operators.html#Conditions_ARN">ARN</a> contém o ID da conta do proprietário desse recurso. Para determinados recursos, como buckets do Amazon S3, o ARN do recurso não inclui o ID da conta. Os dois exemplos a seguir mostram a diferença entre um recurso com um ID de conta no ARN e um ARN do Amazon S3 sem um ID de conta:</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><code class="code">arn:aws:iam::123456789012:role/AWSExampleRole</code>: perfil do IAM criado e pertencente à conta 123456789012. </p>
            </li><li class="listitem">
                <p><code class="code">arn:aws:s3:::<code class="replaceable">DOC-EXAMPLE-BUCKET2</code></code>: bucket do Amazon S3 criado e controlado dentro da conta da <code class="code">111122223333</code>, não exibido no ARN.</p>
            </li></ul></div>
        <p>Use o console, API ou CLI da AWS para encontrar todos os seus recursos e ARNs correspondentes.</p>
        <p>Você redige uma política que nega permissões a recursos com base no ID da conta do proprietário do recurso. Por exemplo, a política baseada em identidade a seguir negará acesso ao <em>recurso especificado</em> se o recurso não pertencer à <em>conta especificada</em>.</p>
        <p>Para usar esta política, substitua o <em>texto do espaço reservado em itálico</em> pelas informações da conta. </p>
        <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Importante</h6></div><div class="awsdocs-note-text"><p>Esta política não permite qualquer ação. Em vez disso, ela usa o efeito <code class="code">Deny</code> que nega explicitamente o acesso a todas as ações não listadas na instrução que não pertencerem à conta listada. Use essa política em combinação com outras políticas que permitem acesso a recursos específicos.</p></div></div>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Sid": "DenyInteractionWithResourcesNotInSpecificAccount",
      "Action": "<code class="replaceable">service</code>:*",
      "Effect": "Deny",
      "Resource": [
        "arn:aws:<code class="replaceable">service</code>:<code class="replaceable">region</code>:<code class="replaceable">account</code>:<code class="replaceable">*</code>"
      ],
      "Condition": <span>{</span>
        "StringNotEquals": <span>{</span>
          "aws:ResourceAccount": [
            "<code class="replaceable">account</code>"
          ]
        }
      }
    }
  ]
}</code></pre>
        <p>Essa política nega acesso a todos os recursos para um serviço da AWS específico, a menos que a Conta da AWS especificada seja proprietária do recurso. </p>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Alguns Serviços da AWS exigem acesso aos recursos pertencentes à AWS que estão hospedados em outra Conta da AWS. O uso de <code class="code">aws:ResourceAccount</code> em suas políticas baseadas em identidade podem afetar a capacidade da sua identidade de acessar esses recursos.</p></div></div>
        <p>Certos serviços da AWS, como o AWS Data Exchange, dependem de acesso a recursos fora das suas Contas da AWS para operações normais. Se você usar o elemento <code class="code">aws:ResourceAccount</code> em suas políticas, inclua instruções adicionais para criar isenções para esses serviços. O exemplo de política <a href="./reference_policies_examples_resource_account_data_exch.html">AWS: negar acesso aos recursos do Amazon S3 fora da sua conta, exceto o AWS Data Exchange</a> demonstra como negar acesso com base na conta do recurso ao definir exceções para recursos de propriedade do serviço.</p>
        <p>Use esse exemplo de política como modelo para criar suas próprias políticas personalizadas. Para obter mais informações, consulte a <a href="https://docs.aws.amazon.com/index.html">documentação</a> do serviço.</p>
     
        <h2 id="condition-keys-resourceorgid">aws:ResourceOrgID</h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
        <p>Use essa chave para comparar o identificador da organização no AWS Organizations ao qual o solicitante pertence com o identificador especificado na política.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> (Disponibilidade): essa chave só é incluída no contexto da solicitação se a entidade de segurança for membro de uma organização. Essa chave de condição global não é compatível com as seguintes ações:</p>
                <div class="itemizedlist">
                     
                     
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>Amazon Elastic Block Store: todas as ações</p>
                    </li><li class="listitem">
                        <p>Amazon EC2</p>
                        <div class="itemizedlist">
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p><code class="code">ec2:AcceptTransitGatewayPeeringAttachment</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:AcceptVpcEndpointConnections</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:AcceptVpcPeeringConnection</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:CopySnapshot</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:CreateVolume</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:CreateVpcEndpoint</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:CreateVpcPeeringConnection</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:DeleteTransitGatewayPeeringAttachment</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:DeleteVpcPeeringConnection</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:RejectTransitGatewayPeeringAttachment</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:RejectVpcEndpointConnections</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:RejectVpcPeeringConnection</code></p>
                            </li></ul></div>
                    </li><li class="listitem">
                        <p>Amazon EventBridge: todas as ações</p>
                    </li><li class="listitem">
                        <p>Amazon Route 53</p>
                        <div class="itemizedlist">
                             
                             
                             
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p><code class="code">route53:AssociateVpcWithHostedZone</code></p>
                            </li><li class="listitem">
                                <p><code class="code">route53:CreateVPCAssociationAuthorization</code></p>
                            </li><li class="listitem">
                                <p><code class="code">route53:DeleteVPCAssociationAuthorization</code></p>
                            </li><li class="listitem">
                                <p><code class="code">route53:DisassociateVPCFromHostedZone</code></p>
                            </li><li class="listitem">
                                <p><code class="code">route53:ListHostedZonesByVPC</code></p>
                            </li></ul></div>
                    </li><li class="listitem">
                        <p>Amazon WorkSpaces</p>
                        <div class="itemizedlist">
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p><code class="code">workspaces:DescribeWorkspaceImages</code></p>
                            </li></ul></div>
                    </li></ul></div>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valor único</p>
            </li></ul></div>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Para considerações adicionais sobre as ações sem suporte acima, consulte o repositório <a href="https://github.com/aws-samples/data-perimeter-policy-examples" rel="noopener noreferrer" target="_blank"><span>Exemplos de políticas de perímetro de dados</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></div></div>
        <p>Essa chave global retorna o ID da organização do recurso para uma determinada solicitação. Ele permite que você crie regras que se aplicam a todos os recursos em uma organização que são especificados no elemento <code class="code">Resource</code> de uma <a href="./access_policies_identity-vs-resource.html">política baseada em identidade</a>. É possível especificar o <a href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_org_details.html">ID da organização</a> no elemento de condição. Ao adicionar e remover contas, as políticas que incluem a chave <code class="code">aws:ResourceOrgID</code> incluem automaticamente as contas corretas e não exigem atualização manual.</p>
        <p>Por exemplo, a política a seguir impede que a entidade principal adicione objetos ao recurso <code class="code">policy-genius-dev</code>, a menos que o recurso do Amazon S3 pertença à mesma organização que a entidade principal que faz a solicitação.</p>
        <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Importante</h6></div><div class="awsdocs-note-text"><p>Esta política não permite qualquer ação. Em vez disso, ela usa o efeito <code class="code">Deny</code> que nega explicitamente o acesso a todas as ações não listadas na instrução que não pertencerem à conta listada. Use essa política em combinação com outras políticas que permitem acesso a recursos específicos.</p></div></div>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": <span>{</span>
    "Sid": "DenyPutObjectToS3ResourcesOutsideMyOrganization",
    "Effect": "Deny",
    "Action": "s3:PutObject",
    "Resource": "arn:<code class="replaceable">partition</code>:s3:::policy-genius-dev/*",
    "Condition": <span>{</span>
      "StringNotEquals": <span>{</span>
        "aws:ResourceOrgID": "$<span>{</span>aws:PrincipalOrgID}"
      }
    }
  }
}</code></pre>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Alguns Serviços da AWS exigem acesso aos recursos pertencentes à AWS que estão hospedados em outra Conta da AWS. O uso de <code class="code">aws:ResourceOrgID</code> em suas políticas baseadas em identidade podem afetar a capacidade da sua identidade de acessar esses recursos.</p></div></div>
        
        <p>Certos serviços da AWS, como o AWS Data Exchange, dependem de acesso a recursos fora das suas Contas da AWS para operações normais. Se você usar a chave <code class="code">aws:ResourceOrgID</code> em suas políticas, inclua instruções adicionais para criar isenções para esses serviços. O exemplo de política <a href="./reference_policies_examples_resource_account_data_exch.html">AWS: negar acesso aos recursos do Amazon S3 fora da sua conta, exceto o AWS Data Exchange</a> demonstra como negar acesso com base na conta do recurso ao definir exceções para recursos de propriedade do serviço. Você pode criar uma política semelhante para restringir o acesso aos recursos dentro da organização usando a chave <code class="code">aws:ResourceOrgID</code>, levando em conta os recursos pertencentes ao serviço.</p>
        <p>Use esse exemplo de política como modelo para criar suas próprias políticas personalizadas. Para obter mais informações, consulte a <a href="https://docs.aws.amazon.com/index.html">documentação</a> do serviço.</p>
        
        <p>No vídeo a seguir, saiba mais sobre como você pode usar a chave de condição <code class="code">aws:ResourceOrgID</code> em uma política.</p>
        <div class="mediaobject">
             
                <iframe width="720" height="330" frameborder="0" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" sandbox="allow-scripts allow-same-origin allow-popups" src="https://www.youtube-nocookie.com/embed/cWVW0xAiWwc"></iframe>
             
             
        </div>
        
        
        
     
        <h2 id="condition-keys-resourceorgpaths">aws:ResourceOrgPaths</h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
        <p>Use essa chave para comparar o caminho do AWS Organizations para o recurso acessado com o caminho na política. Em uma política, essa chave de condição garante que o solicitante pertença a um membro da conta na raiz da organização ou unidades organizacionais  (OUs) especificadas no AWS Organizations. Um caminho do AWS Organizations é uma representação de texto da estrutura de uma entidade do Organizations. Para obter mais informações sobre como usar e entender caminhos, consulte <a href="./access_policies_access-advisor-view-data-orgs.html#access_policies_access-advisor-viewing-orgs-entity-path">Compreender o caminho da entidade do AWS Organizations</a> </p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> (Disponibilidade): essa chave só é incluída no contexto da solicitação se a entidade de segurança for membro de uma organização. Essa chave de condição global não é compatível com as seguintes ações:</p>
                <div class="itemizedlist">
                     
                     
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>Amazon Elastic Block Store: todas as ações</p>
                    </li><li class="listitem">
                        <p>Amazon EC2</p>
                        <div class="itemizedlist">
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p><code class="code">ec2:AcceptTransitGatewayPeeringAttachment</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:AcceptVpcEndpointConnections</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:AcceptVpcPeeringConnection</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:CopySnapshot</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:CreateVolume</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:CreateVpcEndpoint</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:CreateVpcPeeringConnection</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:DeleteTransitGatewayPeeringAttachment</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:DeleteVpcPeeringConnection</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:RejectTransitGatewayPeeringAttachment</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:RejectVpcEndpointConnections</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:RejectVpcPeeringConnection</code></p>
                            </li></ul></div>
                    </li><li class="listitem">
                        <p>Amazon EventBridge: todas as ações</p>
                    </li><li class="listitem">
                        <p>Amazon Route 53</p>
                        <div class="itemizedlist">
                             
                             
                             
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p><code class="code">route53:AssociateVpcWithHostedZone</code></p>
                            </li><li class="listitem">
                                <p><code class="code">route53:CreateVPCAssociationAuthorization</code></p>
                            </li><li class="listitem">
                                <p><code class="code">route53:DeleteVPCAssociationAuthorization</code></p>
                            </li><li class="listitem">
                                <p><code class="code">route53:DisassociateVPCFromHostedZone</code></p>
                            </li><li class="listitem">
                                <p><code class="code">route53:ListHostedZonesByVPC</code></p>
                            </li></ul></div>
                    </li><li class="listitem">
                        <p>Amazon WorkSpaces</p>
                        <div class="itemizedlist">
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p><code class="code">workspaces:DescribeWorkspaceImages</code></p>
                            </li></ul></div>
                    </li></ul></div>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valores múltiplos</p>
            </li></ul></div>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Para considerações adicionais sobre as ações sem suporte acima, consulte o repositório <a href="https://github.com/aws-samples/data-perimeter-policy-examples" rel="noopener noreferrer" target="_blank"><span>Exemplos de políticas de perímetro de dados</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></div></div>
        <p><code class="code">aws:ResourceOrgPaths</code> é uma chave de condição de vários valores. Chaves de valores múltiplos podem ter vários valores no contexto da solicitação. Você deve usar os operadores de conjunto <code class="code">ForAnyValue</code> ou <code class="code">ForAllValues</code> com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de condição de string</a> para essa chave. Para obter mais informações sobre chaves de condição de vários valores, consulte <a href="./reference_policies_multi-value-conditions.html#reference_policies_multi-key-or-value-conditions">Usar várias chaves e valores</a>.</p>
        <p>Por exemplo, a condição a seguir retorna <code class="code">True</code> para recursos que pertencem à organização <code class="code">o-a1b2c3d4e5</code>. Quando você inclui um caractere curinga, deve usar o operador de condição <a href="./reference_policies_elements_condition_operators.html">StringLike</a>.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">"Condition": <span>{</span> 
      "ForAnyValue:StringLike": <span>{</span>
             "aws:ResourceOrgPaths":["o-a1b2c3d4e5/*"]
   }
}</code></pre>
        <p>A condição a seguir retorna <code class="code">True</code> para recursos com o ID de UO <code class="code">ou-ab12-11111111</code>. Ele corresponderá recursos pertencentes a contas anexadas à UO ou-ab12-11111111 ou a qualquer uma das UOs secundárias.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">"Condition": <span>{</span> "ForAnyValue:StringLike" : <span>{</span>
     "aws:ResourceOrgPaths":["o-a1b2c3d4e5/r-ab12/ou-ab12-11111111/*"]
}}</code></pre>
        <p>A condição a seguir retorna <code class="code">True</code> para recursos pertencentes a contas anexadas diretamente à ID <code class="code">ou-ab12-22222222</code> da UO, mas não às UOs secundárias. O exemplo a seguir usa o operador de condição <a href="./reference_policies_elements_condition_operators.html">StringEquals</a> para especificar o requisito de correspondência exata para o ID da UO e não uma correspondência com curinga.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">"Condition": <span>{</span> "ForAnyValue:StringEquals" : <span>{</span>
     "aws:ResourceOrgPaths":["o-a1b2c3d4e5/r-ab12/ou-ab12-11111111/ou-ab12-22222222/"]
}}</code></pre>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Alguns Serviços da AWS exigem acesso aos recursos pertencentes à AWS que estão hospedados em outra Conta da AWS. O uso de <code class="code">aws:ResourceOrgPaths</code> em suas políticas baseadas em identidade podem afetar a capacidade da sua identidade de acessar esses recursos.</p></div></div>
        
        <p>Certos serviços da AWS, como o AWS Data Exchange, dependem de acesso a recursos fora das suas Contas da AWS para operações normais. Se você usar a chave <code class="code">aws:ResourceOrgPaths</code> em suas políticas, inclua instruções adicionais para criar isenções para esses serviços. O exemplo de política <a href="./reference_policies_examples_resource_account_data_exch.html">AWS: negar acesso aos recursos do Amazon S3 fora da sua conta, exceto o AWS Data Exchange</a> demonstra como negar acesso com base na conta do recurso ao definir exceções para recursos de propriedade do serviço. Você pode criar uma política semelhante para restringir o acesso aos recursos dentro de uma unidade organizacional (UO) usando a chave <code class="code">aws:ResourceOrgPaths</code>, levando em conta os recursos pertencentes ao serviço.</p>
        <p>Use esse exemplo de política como modelo para criar suas próprias políticas personalizadas. Para obter mais informações, consulte a <a href="https://docs.aws.amazon.com/index.html">documentação</a> do serviço.</p>
     
        <h2 id="condition-keys-resourcetag">aws:ResourceTag/<em>tag-key</em></h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
        <p>Use essa chave para comparar o par chave-valor da etiqueta especificado na política com o par chave-valor anexado ao recurso. Por exemplo, é possível exigir que o acesso a um recurso seja permitido somente se o recurso tiver a chave de tag <code class="code">"Dept"</code> anexada com o valor <code class="code">"Marketing"</code>. Para obter mais informações, consulte <a href="./access_tags.html#access_tags_control-resources">Controlar o acesso aos recursos do AWS</a>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> (Disponibilidade): essa chave é incluída no contexto da solicitação quando o recurso solicitado já tem tags anexadas que criam um recurso com uma tag anexada. Esta chave é devolvida apenas para recursos que <a href="./reference_aws-services-that-work-with-iam.html">oferecem suporte à autorização com base em tags</a>. Há uma chave de contexto para cada par de chave/valor de tag.</p>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valor único</p>
            </li></ul></div>
        <p>Essa chave de contexto é formatada <code class="code">"aws:ResourceTag/<code class="replaceable">tag-key</code>":"<code class="replaceable">tag-value</code>"</code> em que <code class="replaceable">tag-key</code> e <code class="replaceable">tag-value</code> são uma chave de tag e um par de valores. As chaves e os valores de etiquetas não diferenciam maiúsculas de minúsculas. Isso significa que, se você especificar <code class="code">"aws:ResourceTag/TagKey1": "Value1"</code> no elemento de condição da política, a condição corresponderá a uma chave de tag de recurso chamada <code class="code">TagKey1</code> ou <code class="code">tagkey1</code>, mas não ambas.</p>
        <p>Para obter exemplos de como usar a chave <code class="code">aws:ResourceTag</code> para controlar o acesso aos recursos do IAM, consulte <a href="./access_tags.html#access_tags_control-resources">Controlar o acesso aos recursos do AWS</a>.</p>
        <p>Para obter exemplos de uso da chave <code class="code">aws:ResourceTag</code> para controlar o acesso a outros recursos AWS, consulte <a href="./access_tags.html">Controlar o acesso a recursos da AWS usando tags</a>.</p>
        <p>Para obter um tutorial sobre como usar a chave de condição <code class="code">aws:ResourceTag</code> para o controle de acesso baseado em atributos (ABAC), consulte <a href="./tutorial_attribute-based-access-control.html">Tutorial do IAM: Definir permissões para acessar recursos da AWS com base em etiquetas</a>.</p>
     
        <h2 id="condition-keys-securetransport">aws:SecureTransport</h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_Boolean">Operadores boolianos</a>.</p>
        <p>Use essa chave para verificar se a solicitação foi enviada usando SSL. O contexto da solicitação retorna <code class="code">true</code> ou <code class="code">false</code>. Em uma política, será possível permitir ações específicas somente se a solicitação for enviada usando SSL.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Disponibilidade</b>: essa chave é sempre incluída no contexto da solicitação.</p>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valor único</p>
            </li></ul></div>
     
        <h2 id="condition-keys-sourceaccount">aws:SourceAccount</h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
        <p>Use essa chave para comparar o ID da conta do recurso que faz uma solicitação de serviço a serviço com o ID de conta especificado na política. </p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Disponibilidade</b>: essa chave é incluída no contexto da solicitação somente se o acesso a um recurso acionar um produto da AWS para chamar outro serviço em nome do proprietário do recurso. O serviço de chamada deve passar o ID da conta do recurso da fonte para o serviço chamado. Este ID de conta inclui o ID da conta-fonte.</p>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valor único</p>
            </li></ul></div>
        <p>Você pode usar essa chave de condição para impedir que um produto da AWS seja usado como um <a href="./confused-deputy.html">confused deputy</a> durante transações entre os serviços. Defina o valor dessa chave de condição para a conta do recurso na solicitação. Por exemplo, quando uma atualização de bucket do Amazon S3 acionar uma publicação de tópico do Amazon SNS, o serviço do Amazon S3 invocará a operação da API <code class="code">sns:Publish</code>. Na política que permite a operação <code class="code">sns:Publish</code>, defina o valor da chave de condição para o ID da conta do bucket do Amazon S3. Para obter informações sobre como e quando essas chaves de condição são recomendadas, consulte a documentação dos produtos da AWS que você está usando.</p>
     
        <h2 id="condition-keys-sourcearn">aws:SourceArn</h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_ARN">operadores de ARN</a> e <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>. A AWS recomenda que você use operadores de ARN em vez de operadores de string ao comparar ARNs.</p>
        <p>Use essa chave para comparar o <a href="./reference_identifiers.html#identifiers-arns">nome de recurso da Amazon (ARN)</a> do recurso que faz uma solicitação de serviço a serviço com o ARN especificado na política. </p>
        <p>Essa chave não funciona com o ARN do principal que está fazendo a solicitação. Em seu lugar, use a <a href="#condition-keys-principalarn">aws:PrincipalArn</a>. O ARN da fonte inclui o ID da conta, portanto, não é necessário usar <code class="code">aws:SourceAccount</code> com <code class="code">aws:SourceArn</code>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Disponibilidade</b>: essa chave é incluída no contexto da solicitação somente se o acesso a um recurso acionar um produto da AWS para chamar outro serviço em nome do proprietário do recurso. O serviço de chamada deve passar o ARN do recurso original para o serviço chamado.</p>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valor único</p>
            </li></ul></div>
        <p>Você pode usar essa chave de condição para impedir que um produto da AWS seja usado como um <a href="./confused-deputy.html">confused deputy</a> durante transações entre os serviços. Defina o valor desta chave de condição para o ARN do recurso na solicitação. Por exemplo, quando uma atualização de bucket do Amazon S3 acionar uma publicação de tópico do Amazon SNS, o serviço do Amazon S3 invocará a operação da API <code class="code">sns:Publish</code>. Na política que permite a operação <code class="code">sns:Publish</code>, defina o valor da chave de condição para o ARN do bucket do Amazon S3. Para obter informações sobre como e quando essas chaves de condição são recomendadas, consulte a documentação dos produtos da AWS que você está usando.</p>
     
        <h2 id="condition-keys-sourceidentity">aws:SourceIdentity</h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
        <p>Use essa chave para comparar a identidade-fonte definida pela entidade de segurança com a identidade-fonte especificada na política. </p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Disponibilidade</b>: essa chave é incluída no contexto da solicitação depois que uma identidade-fonte é definida quando uma função é assumida usando qualquer comando de assumir função da CLI do AWS STS ou a operação <code class="code">AssumeRole</code> da API do AWS STS.</p>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valor único</p>
            </li></ul></div>
        <p>Você pode usar essa chave em uma política para permitir ações na AWS executadas por entidades de segurança que definiram uma identidade-fonte ao assumir uma função. A atividade para a identidade-fonte especificada da função aparece no <a href="./cloudtrail-integration.html#cloudtrail-integration_signin-tempcreds">AWS CloudTrail</a>. Isso torna mais fácil para os administradores determinar quem ou o que executou ações com uma função na AWS.</p>
        <p>Ao contrário de <a href="./reference_policies_iam-condition-keys.html#ck_rolesessionname">sts:RoleSessionName</a>, após a definição da identidade-fonte, o valor não pode ser alterado. Ele estará presente no contexto da solicitação para todas as ações executadas pela função. O valor persiste nas sessões de função subsequentes quando você usa as credenciais da sessão para assumir outra função. Assumir uma função de outra é chamado de <a href="./id_roles_terms-and-concepts.html#iam-term-role-chaining">encadeamento de funções</a>. </p>
        <p>A chave <a href="./reference_policies_iam-condition-keys.html#ck_sourceidentity">sts:SourceIdentity</a> está presente na solicitação quando a entidade de segurança inicialmente define uma identidade-fonte enquanto assume uma função usando qualquer comando de assumir função da CLI do AWS STS ou operação da API <code class="code">AssumeRole</code> do AWS STS. A chave <code class="code">aws:SourceIdentity</code> está presente na solicitação para todas as ações executadas com uma sessão de função que possui um conjunto de identidade-fonte.</p>
        <p>A política de confiança de função a seguir para <code class="code">CriticalRole</code> na conta <code class="code">111122223333</code> contém uma condição para <code class="code">aws:SourceIdentity</code> que impede que uma entidade de segurança sem uma identidade-fonte definida como Saanvi ou Diego assuma a função.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "AssumeRoleIfSourceIdentity",
            "Effect": "Allow",
            "Principal": <span>{</span>"AWS": "arn:aws:iam::123456789012:role/CriticalRole"},
            "Action": [
                "sts:AssumeRole",
                "sts:SetSourceIdentity"
            ],
            "Condition": <span>{</span>
                "StringLike": <span>{</span>
                    "aws:SourceIdentity": ["Saanvi","Diego"]
                }
            }
        }
    ]
}
</code></pre>
        <p>Para saber mais sobre como usar informações de identidade-fonte, consulte <a href="./id_credentials_temp_control-access_monitor.html">Monitorar e controlar ações realizadas com funções assumidas</a>.</p>
     
        <h2 id="condition-keys-sourceip">aws:SourceIp</h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_IPAddress">operadores de endereço IP</a>.</p>
        <p>Use essa chave para comparar o endereço IP do solicitante com o endereço IP especificado na política. A chave de condição <code class="code">aws:SourceIp</code> só pode ser usada para intervalos de endereços IP públicos.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Disponibilidade</b>: essa chave será incluída no contexto da solicitação, exceto quando o solicitante usar um endpoint da VPC para fazer a solicitação.</p>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valor único</p>
            </li></ul></div>
        <p>A chave de condição <code class="code">aws:SourceIp</code> pode ser usada em uma política para permitir que os principais façam solicitações somente em um intervalo de IP especificado. No entanto, esta política negará o acesso se um serviço da AWS fizer chamadas em nome do principal. Nesse caso, você pode usar <code class="code">aws:SourceIp</code> com a chave <code class="code"><a href="#condition-keys-viaawsservice">aws:ViaAWSService</a></code> para garantir que a restrição de IP-fonte se aplique somente a solicitações feitas diretamente por um principal. </p>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p> O <code class="code">aws:SourceIp</code> oferece suporte a endereços IP para IPv4 e IPv6 ou a um intervalo de endereços IP. Para obter detalhes, consulte <a href="https://docs.aws.amazon.com/marketplace/latest/buyerguide/buyer-security-ipv6-upgrade.html">Fazer upgrade das políticas do IAM para IPv6</a>.</p></div></div>
        <p>Por exemplo, você pode anexar a política a seguir a um usuário do IAM. Essa política permite que o usuário coloque um objeto diretamente no bucket <code class="code"><code class="replaceable">DOC-EXAMPLE-BUCKET3</code></code> do Amazon S3 se fizer a chamada do endereço IP especificado. No entanto, se o usuário fizer outra solicitação que faça com que um serviço chame o Amazon S3, a restrição do endereço IP não se aplicará. A instrução <code class="code">PrincipalPutObjectIfIpAddress</code> restringirá o endereço IP somente se a solicitação não for feita por um serviço. A instrução <code class="code">ServicePutObject</code> permitirá a operação sem restrição de endereço IP se a solicitação for feita por um serviço.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "PrincipalPutObjectIfIpAddress",
            "Effect": "Allow",
            "Action": "s3:PutObject",
            "Resource": "arn:aws:s3:::<code class="replaceable">DOC-EXAMPLE-BUCKET3</code>/*",
            "Condition": <span>{</span>
                "Bool": <span>{</span>"aws:ViaAWSService": "false"},
                "IpAddress": <span>{</span>"aws:SourceIp": "<code class="replaceable">203.0.113.0</code>"}
            }
        },
        <span>{</span>
            "Sid": "ServicePutObject",
            "Effect": "Allow",
            "Action": "s3:PutObject",
            "Resource": "arn:aws:s3:::<code class="replaceable">DOC-EXAMPLE-BUCKET</code>/*",
            "Condition": <span>{</span>
                "Bool": <span>{</span>"aws:ViaAWSService": "true"}
            }
        }
    ]
}</code></pre>
        <p>Se a solicitação vier de um host que use um endpoint do Amazon VPC, a chave <code class="code">aws:SourceIp</code> não estará disponível. Em vez disso, use uma chave específica da VPC, como aws:VpcSourceIp. Para obter mais informações sobre o uso de endpoints da VPC, consulte <a href="https://docs.aws.amazon.com/vpc/latest/privatelink/vpc-endpoints-iam.html">Gerenciamento de identidades e acesso para endpoints da VPC e serviços de endpoint da VPC</a> no <em>Guia do AWS PrivateLink</em>.</p>
     
        <h2 id="condition-keys-sourcevpc">aws:SourceVpc</h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
        <p>Use essa chave para verificar se a solicitação é proveniente da VPC especificada na política. Em uma política, é possível usar essa chave para permitir acesso apenas a uma VPC específica. Para mais informações, consulte <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/example-bucket-policies-vpc-endpoint.html#example-bucket-policies-restrict-access-vpc">Restringir acesso a uma VPC específica</a> no <em>Guia do usuário do Amazon Simple Storage Service</em>. </p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Disponibilidade</b>: essa chave é incluída no contexto da solicitação somente se o solicitante usar um endpoint da VPC para fazer a solicitação.</p>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valor único</p>
            </li></ul></div>
     
        <h2 id="condition-keys-sourcevpce">aws:SourceVpce</h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
        <p>Use essa chave para comparar o identificador do VPC endpoint da solicitação com o ID do endpoint especificado na política. Em uma política, é possível usar essa chave para restringir o acesso a um VPC endpoint específico. Para mais informações, consulte <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/example-bucket-policies-vpc-endpoint.html#example-bucket-policies-restrict-access-vpc-endpoint">Restringir o acesso a um endpoint da VPC específico</a> no <em>Guia do usuário do Amazon Simple Storage Service</em>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Disponibilidade</b>: essa chave é incluída no contexto da solicitação somente se o solicitante usar um endpoint da VPC para fazer a solicitação.</p>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valor único</p>
            </li></ul></div>
     
        <h2 id="condition-keys-tagkeys">aws:TagKeys</h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
        <p>Use essa chave para comparar as chaves de tag em uma solicitação com as chaves especificadas na política. Ao usar políticas para controlar o acesso usando etiquetas, recomendamos o uso da chave de condição <code class="code">aws:TagKeys</code> para definir quais chaves de etiquetas serão permitidas. Para obter mais informações e políticas de exemplo, consulte <a href="./access_tags.html#access_tags_control-tag-keys">Controlar o acesso com base em chaves de tag</a>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> (Disponibilidade): essa chave será incluída no contexto da solicitação se a operação for compatível com a passagem de tags no recurso.</p>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valores múltiplos</p>
            </li></ul></div>
        <p>Essa chave de contexto é formatada como <code class="code">"aws:TagKeys":"<code class="replaceable">tag-key</code>"</code> em que <code class="replaceable">tag-key</code> é uma lista de chaves de tags sem valores (por exemplo, <code class="code">["Dept","Cost-Center"]</code>).</p>
        <p>Como é possível incluir vários pares de chave/valor de tag em uma solicitação, o conteúdo da solicitação pode ser uma solicitação <a href="./reference_policies_multi-value-conditions.html">de vários valores</a>. Nesse caso, você deve usar os operadores de conjunto <code class="code">ForAllValues</code> ou <code class="code">ForAnyValue</code>. Para obter mais informações, consulte <a href="./reference_policies_multi-value-conditions.html#reference_policies_multi-key-or-value-conditions">Usar várias chaves e valores</a>.</p>
        <p>Alguns serviços são compatíveis com o uso de tags com operações de recurso, como criar, modificar ou excluir um recurso. Para permitir o uso de tags e operações como uma única chamada, você deve criar uma política que inclui as ações de uso de tags e de modificação de recursos. Em seguida, você pode usar a chave de condição <code class="code">aws:TagKeys</code> para impor o uso de chaves de tags específicas na solicitação. Por exemplo, para limitar as etiquetas quando alguém cria um snapshot do Amazon EC2, você deve incluir a ação de criação <code class="code">ec2:CreateSnapshot</code> <em><b>e</b></em> a ação de etiquetamento <code class="code">ec2:CreateTags</code> na política. Para visualizar uma política para este cenário que use <code class="code">aws:TagKeys</code>, consulte <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ExamplePolicies_EC2.html#iam-creating-snapshot-with-tags">Criar um snapshot com etiquetas</a> no <em>Guia do usuário do Amazon EC2 para instâncias do Linux</em>. </p>
     
        <h2 id="condition-keys-tokenissuetime">aws:TokenIssueTime</h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_Date">operadores de data</a>.</p>
        <p>Use essa chave para comparar a data e a hora em que as credenciais de segurança temporárias foram emitidas com a data e a hora especificadas na política. </p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Disponibilidade</b>: esta chave é incluída no contexto da solicitação somente quando a entidade de segurança usa credenciais temporárias para fazer a solicitação. A chave não está presente em solicitações da AWS CLI, da API da AWS ou do AWS SDK que são feitas usando chaves de acesso.</p>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valor único</p>
            </li></ul></div>
        <p>Para saber quais serviços oferecem suporte a credenciais de segurança temporárias, consulte <a href="./reference_aws-services-that-work-with-iam.html">Serviços da AWS que funcionam com o IAM</a>.</p>
     
        <h2 id="condition-keys-useragent">aws:UserAgent</h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
        <p>Use essa chave para comparar o aplicativo cliente do solicitante com o aplicativo especificado na política.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Disponibilidade</b>: essa chave é sempre incluída no contexto da solicitação.</p>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valor único</p>
            </li></ul></div>
        <div class="awsdocs-note awsdocs-warning"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Atenção</h6></div><div class="awsdocs-note-text"><p>Essa chave deve ser usada com cuidado. Como o valor <code class="code">aws:UserAgent</code> é fornecido pelo chamador em um cabeçalho HTTP, partes não autorizadas podem usar navegadores personalizados ou modificados para fornecer qualquer valor <code class="code">aws:UserAgent</code> que escolherem. Como resultado, <code class="code">aws:UserAgent</code> não deve ser usado para impedir que terceiros não autorizados façam solicitações diretas da AWS. Você pode usá-lo para permitir apenas aplicações cliente específicas, e somente depois de testar sua política.</p></div></div>
     
        <h2 id="condition-keys-userid">aws:userid</h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
        <p>Use essa chave para comparar o identificador do principal do solicitante com o ID especificado na política. Para usuários do IAM, o valor de contexto da solicitação é o ID de usuário. Para funções do IAM, esse formato de valor pode variar. Para obter detalhes sobre como as informações são exibidas para diferentes principais, consulte <a href="./reference_policies_elements_principal.html#Principal_specifying">Especificar um principal</a>. Para exemplos específicos de valores de chave de <code class="code">principal</code>, consulte <a href="./reference_policies_variables.html#principaltable">Valores de chave de principal</a>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> (Disponibilidade): essa chave é incluída no contexto da solicitação para todas as solicitações, incluindo as anônimas.</p>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valor único</p>
            </li></ul></div>
     
        <h2 id="condition-keys-username">aws:username</h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
        <p>Use essa chave para comparar o nome de usuário do solicitante com o nome de usuário especificado na política. Para obter detalhes sobre como as informações são exibidas para diferentes principais, consulte <a href="./reference_policies_elements_principal.html#Principal_specifying">Especificar um principal</a>. Para exemplos específicos de valores de chave de <code class="code">principal</code>, consulte <a href="./reference_policies_variables.html#principaltable">Valores de chave de principal</a>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Disponibilidade</b>: essa chave será sempre incluída no contexto da solicitação para os usuários do IAM. Solicitações anônimas e solicitações feitas usando o Usuário raiz da conta da AWS ou perfis do IAM não incluem essa chave. As solicitações feitas usando credenciais do IAM Identity Center não incluem essa chave no contexto. Para saber como controlar o acesso a usuários no Centro de Identidade do IAM, consulte <code class="code">identitystore:UserId</code> em <a href="https://docs.aws.amazon.com/singlesignon/latest/userguide/using-predefined-attributes.html">Usar atributos predefinidos do armazenamento de identidades do Centro de Identidade do IAM para controle de acesso na AWS</a>. Os usuários do Centro de Identidade do IAM são as pessoas em sua força de trabalho que precisam acessar suas Contas da AWS ou suas aplicações na nuvem.</p>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valor único</p>
            </li></ul></div>
     
        <h2 id="condition-keys-viaawsservice">aws:ViaAWSService</h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_Boolean">Operadores boolianos</a>.</p>
        <p>Use esta chave para verificar se um serviço da AWS faz uma solicitação para outro serviço em seu nome.</p>
        <p>A chave de contexto da solicitação retorna <code class="code">true</code> quando um serviço usa as credenciais de uma entidade de segurança do IAM para fazer uma solicitação em nome da entidade de segurança. Esta chave retorna <code class="code">false</code> se o serviço usa uma <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-role">função de serviço</a> ou <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-linked-role">função vinculada ao serviço</a> para fazer uma chamada em nome do principal. A chave de contexto da solicitação também retorna <code class="code">false</code> quando o principal faz a chamada diretamente.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Disponibilidade</b>: essa chave é sempre incluída no contexto da solicitação.</p>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valor único</p>
            </li></ul></div>
        <p>Você pode usar essa chave de condição para conceder ou negar acesso baseado no fato de uma solicitação ter sido feita por um serviço. Para ver um exemplo de política, consulte <a href="./reference_policies_examples_aws_deny-ip.html">AWS: nega acesso à AWS com base no IP da fonte</a>.</p>
     
        <h2 id="condition-keys-vpcsourceip">aws:VpcSourceIp</h2>
        <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_IPAddress">operadores de endereço IP</a>.</p>
        <p>Use essa chave para comparar o endereço IP do qual uma solicitação foi feita com o endereço IP especificado na política. Em uma política, a chave será correspondente somente se a solicitação for proveniente do endereço IP especificado e passar por um VPC endpoint.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Disponibilidade</b>: essa chave será incluída no contexto da solicitação somente se a solicitação for feita usando um endpoint da VPC.</p>
            </li><li class="listitem">
                <p><b>Tipo de valor</b>: valor único</p>
            </li></ul></div>
        <p>Para obter mais informações, consulte <a href="https://docs.aws.amazon.com/vpc/latest/userguide/vpc-endpoints-access.html">Controlar o acesso a serviços com VPC endpoints</a> no <em>Manual do usuário da Amazon VPC</em>.</p>
     
        <h2 id="condition-keys-other">Outras chaves de condição nos serviços</h2>
        <p>As chaves de condição globais são chaves de condição com um prefixo <code class="code">aws:</code>. Serviços individuais podem criar suas próprias chaves de condição. Essas chaves de condição específicas do serviço incluem um prefixo que corresponda ao nome do serviço, como <code class="code">iam:</code> ou <code class="code">sts:</code>.</p>
        <p>Os serviços podem criar chaves específicas do serviço que estão disponíveis no contexto de solicitação para outros serviços. Essas chaves estão disponíveis em vários serviços, mas não são chaves de condição globais. Por exemplo, a AWS STS suporta <a href="./reference_policies_iam-condition-keys.html#condition-keys-saml">chaves de condição de federação baseadas em SAML</a>. Essas chaves estão disponíveis quando um usuário que foi federado usando SAML executa AWS operações em outros serviços. Outros exemplos incluem <code class="code"><a href="https://docs.aws.amazon.com/singlesignon/latest/userguide/using-predefined-attributes.html">identitystore:UserId</a></code> e <code class="code"><a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-policy-structure.html#amazon-ec2-keys">ec2:SourceInstanceArn</a></code>.</p>
        <p>Para exibir as chaves de condição específicas de serviços para um serviço, consulte <a href="https://docs.aws.amazon.com/service-authorization/latest/reference/reference_policies_actions-resources-contextkeys.html">Ações, recursos e chaves de condição dos serviçosAWS e </a>escolha o serviço cujas chaves você deseja exibir.</p>
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Atenção" /> <strong>O Javascript está desativado ou não está disponível no seu navegador.</strong></p><p>Para usar a documentação da AWS, o Javascript deve estar ativado. Consulte as páginas de Ajuda do navegador para obter instruções.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenções do documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./access_policies_job-functions_create-policies.html">Criar funções e anexar políticas (console)</div><div id="next" class="next-link" accesskey="n" href="./reference_policies_iam-condition-keys.html">Chaves de condição do IAM</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Essa página foi útil? - Sim</div><div class="content"><p>Obrigado por nos informar que estamos fazendo um bom trabalho!</p><p>Se tiver tempo, conte-nos sobre o que você gostou para que possamos melhorar ainda mais.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/reference_policies_condition-keys.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Essa página foi útil? - Não</div><div class="content"><p>Obrigado por nos informar que precisamos melhorar a página. Lamentamos ter decepcionado você.</p><p>Se tiver tempo, conte-nos como podemos melhorar a documentação.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/reference_policies_condition-keys.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>