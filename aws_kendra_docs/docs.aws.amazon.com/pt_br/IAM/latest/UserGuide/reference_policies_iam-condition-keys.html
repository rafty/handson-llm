<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="pt-BR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Chaves de contexto de condição do IAM e do AWS STS - AWS Identity and Access Management</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="reference_policies_iam-condition-keys" /><meta name="default_state" content="reference_policies_iam-condition-keys" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" /><meta name="description" content="Descreve o IAM e chaves de condição relacionadas que você pode usar em uma política." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS Identity and Access Management" /><meta name="guide" content="Guia do usuário" /><meta name="abstract" content="Controle o acesso aos recursos da AWS com identidade de usuário (autenticação) e com políticas que definem permissões específicas (autorização)." /><meta name="guide-locale" content="pt_br" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" hreflang="x-default" /><meta name="feedback-item" content="IAM" /><meta name="this_doc_product" content="AWS Identity and Access Management" /><meta name="this_doc_guide" content="Guia do usuário" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'iam'}"></script><meta id="panorama-serviceSubSection" value="Guia do usuário" /><meta id="panorama-serviceConsolePage" value="Chaves de contexto de condição do IAM e do AWS STS" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Chaves de contexto de condição do IAM e do AWS STS - AWS Identity and Access Management</title><meta name="pdf" content="iam-ug.pdf#reference_policies_iam-condition-keys" /><meta name="rss" content="aws-iam-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=76" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=http://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html" /><meta name="keywords" content="IAM,AWS Identity and Access Management,Usuário do IAM,user,Grupo do IAM,grupo,Perfil do IAM,função,política de permissão,política de confiança,política,chave de acesso,password" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS Identity and Access Management",
        "item" : "https://docs.aws.amazon.com/iam/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guia do usuário",
        "item" : "https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Informações de referência do AWS Identity and Access Management",
        "item" : "https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/reference.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Referência de política JSON do IAM",
        "item" : "https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/reference_policies.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Chaves de contexto de condição do IAM e do AWS STS",
        "item" : "https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/reference_policies.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="iam-ug.pdf#reference_policies_iam-condition-keys" target="_blank" rel="noopener noreferrer" title="Abrir em PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentação</a><a href="/iam/index.html">AWS Identity and Access Management</a><a href="introduction.html">Guia do usuário</a></div><div id="page-toc-src"><a href="#available-keys-for-iam">Teclas disponíveis para o IAM</a><a href="#condition-keys-wif">Chaves disponíveis para federação de identidades da web da AWS</a><a href="#cross-condition-keys-wif">Chaves de contexto de federação de identidades da web da AWS entre serviços</a><a href="#condition-keys-saml">Chaves disponíveis para federação do AWS STS com base em SAML</a><a href="#cross-condition-keys-saml">Chaves de contexto de federação do AWS STS baseadas em SAML entre serviços</a><a href="#condition-keys-sts">Chaves disponíveis do AWS STS</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="reference_policies_iam-condition-keys">Chaves de contexto de condição do IAM e do AWS STS</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Você pode usar o elemento <code class="code">Condition</code> em uma política JSON para testar o valor das chaves que estão incluídas no contexto de solicitação de todas as solicitações da AWS. Essas chaves fornecem informações sobre a solicitação em si, ou os recursos referenciados pela solicitação. Você pode verificar que as chaves foram especificadas antes de permitir a ação solicitada pelo usuário. Isso oferece a você controle granular sobre quando as instruções de sua política JSON correspondem ou não a uma solicitação recebida. Para obter informações sobre como usar o elemento <code class="code">Condition</code> em uma política JSON, consulte <a href="./reference_policies_elements_condition.html">Elementos de política JSON do IAM: Condition</a>.</p><p>Este tópico descreve as chaves definidas e fornecidas pelo serviço IAM (com um prefixo <code class="code">iam:</code>) e o serviço AWS Security Token Service (AWS STS) (com um prefixo <code class="code">sts:</code>). Vários outros serviços da AWS também fornecem chaves específicas de serviços que são relevantes para as ações e os recursos definidos por esse serviço. Para obter mais informações, consulte <a href="reference_policies_actions-resources-contextkeys.html" rel="noopener noreferrer" target="_blank">Ações, recursos e chaves de condição de serviços da AWS</a>. A documentação de um serviço que dá suporte a chaves de condição, muitas vezes, tem informações adicionais. Por exemplo, para informações sobre chaves que você pode usar em políticas para recursos do Amazon S3, consulte <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/amazon-s3-policy-keys.html#AvailableKeys-iamV2">Chaves de política do Amazon S3</a> no <em>Guia do usuário do Amazon Simple Storage Service</em>.</p><div class="highlights" id="inline-topiclist"><h6>Tópicos</h6><ul><li><a href="#available-keys-for-iam">Teclas disponíveis para o IAM</a></li><li><a href="#condition-keys-wif">Chaves disponíveis para federação de identidades da web da AWS</a></li><li><a href="#cross-condition-keys-wif">Chaves de contexto de federação de identidades da web da AWS entre serviços</a></li><li><a href="#condition-keys-saml">Chaves disponíveis para federação do AWS STS com base em SAML</a></li><li><a href="#cross-condition-keys-saml">Chaves de contexto de federação do AWS STS baseadas em SAML entre serviços</a></li><li><a href="#condition-keys-sts">Chaves disponíveis do AWS STS</a></li></ul></div>
      <h2 id="available-keys-for-iam">Teclas disponíveis para o IAM</h2>
      <p>Você pode usar as seguintes chaves de condição em políticas que controlam o acesso aos recursos do IAM: </p>
      <div class="variablelist">
          
          
          
          
          
          
          
      <dl>
            <dt><b><span class="term"><a id="ck_AssociatedResourceArn"></a>iam:AssociatedResourceArn</span></b></dt>
            <dd>
               <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_ARN">operadores de nome de recurso da Amazon (ARN)</a>.</p>
               <p>Especifica o ARN do recurso ao qual essa função será associada no serviço de destino. O recurso geralmente pertence ao serviço ao qual o principal está transmitindo a função. Às vezes, o recurso pode pertencer a um terceiro serviço. Por exemplo, você pode passar uma função para o Amazon EC2 Auto Scaling que seja usada em uma instância do Amazon EC2. Nesse caso, a condição corresponderia ao ARN da instância do Amazon EC2. </p>
               <p>Essa chave de condição se aplica somente à ação <a href="./id_roles_use_passrole.html">PassRole</a> em uma política. Ela não pode ser usada para limitar nenhuma outra ação. </p>
               <p>Use essa chave de condição em uma política para permitir que uma entidade transmita uma função, mas somente se essa função estiver associada ao recurso especificado. Você pode usar curingas (*) para permitir operações executadas em um tipo específico de recurso sem restringir a região ou o ID do recurso. Por exemplo, você pode permitir que um usuário ou uma função do IAM passe qualquer função para o serviço Amazon EC2 para ser usado com instâncias na região <code class="code">us-east-1</code> ou <code class="code">us-west-1</code>. O usuário ou a função do IAM não terá permissão para passar funções para outros serviços. Além disso, ele não permite que o Amazon EC2 use a função com instâncias em outras regiões. </p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Effect": "Allow",
    "Action": "iam:PassRole",
    "Resource": "*",
    "Condition": <span>{</span>
        "StringEquals": <span>{</span>"iam:PassedToService": "ec2.amazonaws.com"},
        "ArnLike": <span>{</span>
            "iam:AssociatedResourceARN": [
                "arn:aws:ec2:us-east-1:111122223333:instance/*",
                "arn:aws:ec2:us-west-1:111122223333:instance/*"
            ]
        }
    }
}</code></pre>
               <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Os serviços da AWS que oferecem suporte ao <a href="#ck_PassedToService">IAM:PassedToService</a> também oferecem suporte a esta chave de condição.</p></div></div>
            </dd>
         
            <dt><b><span class="term"><a id="ck_AWSServiceName"></a>iam:AWSServiceName</span></b></dt>
            <dd>
               <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
               <p>Especifica o serviço da AWS para o qual essa função é anexada.</p>
               <p>Neste exemplo, você permite que uma entidade do crie uma função vinculada ao serviço se o nome de serviço for <em>access-analyzer.amazonaws.com.</em></p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
   "Version": "2012-10-17",
   "Statement": [<span>{</span>
       "Effect": "Allow",
       "Action": "iam:CreateServiceLinkedRole",
       "Resource": "*",
       "Condition": <span>{</span>
         "StringLike": <span>{</span>
           "iam:AWSServiceName": "access-analyzer.amazonaws.com"
         }
       }
     }]
 }</code></pre>

            </dd>
         
            <dt><b><span class="term"><a id="ck_OrganizationsPolicyId"></a>iam:OrganizationsPolicyId</span></b></dt>
            <dd>
               <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
               <p>Verifica se a política com o ID do AWS Organizations especificado corresponde à política usada na solicitação. Para ver um exemplo de política do IAM que use essa chave de condição, consulte <a href="./reference_policies_examples_iam_service-accessed-data-orgs.html">IAM: visualizar as informações do último acesso ao serviço para uma política do Organizations</a>.</p>
            </dd>
         
            <dt><b><span class="term"><a id="ck_PassedToService"></a>iam:PassedToService</span></b></dt>
            <dd>
               <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
               <p>Especifica o serviço principal do serviço para o qual uma função pode ser transmitida. Essa chave de condição se aplica somente à ação <a href="./id_roles_use_passrole.html">PassRole</a> em uma política. Ela não pode ser usada para limitar nenhuma outra ação. </p>
               <p>Ao usar essa chave de condição em uma política, especifique o serviço usando um principal de serviço. Um serviço principal é o nome de um serviço que pode ser especificado no elemento <code class="code">Principal</code> de uma política. Este é o formato normal: <code class="code">SERVICE_NAME_URL.amazonaws.com</code>. </p>
               <p>Você pode usar <code class="code">iam:PassedToService</code> para restringir os usuários, para que eles possam passar funções apenas para serviços específicos. Por exemplo, um usuário pode criar uma <a href="./id_roles_terms-and-concepts.html#iam-term-service-role">função de serviço</a> que confia no CloudWatch para gravar dados de log em um bucket do Amazon S3 em seu nome. Em seguida, o usuário deve anexar uma política de permissões e uma política de confiança para a nova função de serviço. Nesse caso, a política de confiança deve especificar <code class="code">cloudwatch.amazonaws.com</code> no elemento <code class="code">Principal</code>. Para visualizar uma política que permite ao usuário passar a função para o CloudWatch, consulte <a href="./reference_policies_examples_iam-passrole-service.html">IAM: Passar uma função do IAM para um produto da AWS específico</a>.</p>
               <p>Ao usar essa chave de condição, você pode garantir que os usuários criem funções de serviço apenas pelos serviços que você especificar. Por exemplo, se um usuário com a política anterior tentar criar uma função de serviço para o Amazon EC2, a operação falhará. A falha ocorre porque o usuário não tem permissão para passar a função para o Amazon EC2. </p>
               <p>Às vezes, você passa uma função para um serviço que, em seguida, passa a função para outro serviço. <code class="code">iam:PassedToService</code> inclui apenas o serviço final que assume a função, não o serviço intermediário que passa a função.</p>
               <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Alguns serviços não são compatíveis com essa chave de condição.</p></div></div>
            </dd>
         
            <dt><b><span class="term"><a id="ck_PermissionsBoundary"></a>iam:PermissionsBoundary</span></b></dt>
            <dd>
               <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_ARN">operadores de nome de recurso da Amazon (ARN)</a>.</p>
               <p>Verifica se a política especificada está anexada como limite de permissões no recurso da entidade de segurança do IAM. Para obter mais informações, consulte <a href="./access_policies_boundaries.html">Limites de permissões para entidades do IAM</a></p>
            </dd>
         
            <dt><b><span class="term"><a id="ck_PolicyARN"></a>iam:PolicyARN</span></b></dt>
            <dd>
               <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_ARN">operadores de nome de recurso da Amazon (ARN)</a>.</p>
               <p>Verifica o nome de recurso da Amazon (ARN) de uma política gerenciada em solicitações que envolvem uma política gerenciada. Para obter mais informações, consulte <a href="./access_controlling.html#access_controlling-policies">Controle de acesso a políticas</a>. </p>
            </dd>
         
            <dt><b><span class="term"><a id="ck_ResourceTag"></a>iam:ResourceTag/<code class="replaceable">key-name</code></span></b></dt>
            <dd>
               <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
               <p>Verifica se a tag anexada ao recurso de identidade (usuário ou função) corresponde ao nome e ao valor da chave especificada.</p>
               <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>O IAM e o AWS STS são compatíveis com a chave de condição do IAM <code class="code">iam:ResourceTag</code> e a chave de condição global <code class="code">aws:ResourceTag</code>.</p></div></div>
               <p>Você pode adicionar atributos personalizados aos recursos do IAM na forma de um par de chave-valor. Para obter mais informações sobre etiquetas de recursos do IAM, consulte <a href="./id_tags.html">Recursos de etiquetas do IAM</a>. Você pode usar <code class="code">ResourceTag</code> para <a href="./access_tags.html#access_tags_control-resources">controlar o acesso</a> aos recursos da AWS, incluindo recursos do IAM. No entanto, como o IAM não oferece suporte a etiquetas para grupos, você não pode usar etiquetas para controlar o acesso a grupos.</p>
               <p>Este exemplo mostra como você pode criar uma política baseada em identidade que permite excluir usuários com a tag <code class="userinput">status=terminated</code>. Para usar esta política, substitua o <code class="replaceable">texto do espaço reservado em itálico</code> na política de exemplo por suas próprias informações. Em seguida, siga as instruções em <a href="./access_policies_create.html">criar uma política</a> ou <a href="./access_policies_manage-edit.html">editar uma política</a>.</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><span>{</span>
    "Version": "2012-10-17",
    "Statement": [<span>{</span>
        "Effect": "Allow",
        "Action": "iam:DeleteUser",
        "Resource": "*",
        "Condition": <span>{</span>"StringEquals": <span>{</span>"iam:ResourceTag/<code class="replaceable">status</code>": "<code class="replaceable">terminated</code>"}}
    }]
}</code></pre>
            </dd>
         </dl></div>
    
      <h2 id="condition-keys-wif">Chaves disponíveis para federação de identidades da web da AWS</h2>
      <p>Você pode usar a federação de identidades da Web para fornecer credenciais de segurança temporárias a usuários que foram autenticados por meio de um provedor OpenID (OP) compatível com OpenID Connect em um provedor de identidade OpenID Connect (OIDC) do IAM na sua conta da AWS. Exemplos desses provedores incluem Login with Amazon, Amazon Cognito, Google ou Facebook. É possível usar tokens de identidade (id_tokens) do seu próprio OP OpenID, bem como id_tokens emitidos para contas de serviço de clusters do Amazon Elastic Kubernetes Service. Nesse caso, chaves de condição adicionais estarão disponíveis quando as credenciais de segurança temporárias forem usadas para fazer uma solicitação. Você pode usar essas chaves para criar políticas que limitam o acesso de usuários federados a recursos associados a um provedor, aplicativo ou usuário específico. Essas chaves são normalmente usadas na política de confiança de uma função. Defina as chaves de condição usando o nome do provedor do OIDC seguido pela declaração (<code class="code">:aud</code>, <code class="code">:azp</code>, <code class="code">:amr</code>, <code class="code">sub</code>). Para perfis usados pelo Amazon Cognito, as chaves são definidas usando <code class="code">cognito-identity.amazonaws.com</code> seguido pela declaração.</p>
      <div class="variablelist">
          
          
          
          
          
          
      <dl>
            <dt><b><span class="term"><a id="ck_wif-amr"></a>amr</span></b></dt>
            <dd>
               <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
               <p><b>Exemplo</b>: <code class="code">cognito-identity.amazonaws.com:amr</code></p>
               <p>Se você estiver usando o Amazon Cognito para a federação de identidades da web, a chave <code class="code">cognito-identity.amazonaws.com:amr</code> (Referência de métodos de autenticação) incluirá informações de login sobre o usuário. A chave tem vários valores, o que significa que você a testa em uma política usando <a href="./reference_policies_multi-value-conditions.html">operadores do conjunto de condições</a>. A chave pode conter os seguintes valores: </p>
               <div class="itemizedlist">
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p>Se o usuário não estiver autenticado, a chave conterá apenas <code class="code">unauthenticated</code>.</p>
                  </li><li class="listitem">
                     <p>Se o usuário estiver autenticado, a chave conterá o valor <code class="code">authenticated</code> e o nome do provedor de login usado na chamada (<code class="code">graph.facebook.com</code>, <code class="code">accounts.google.com</code> ou <code class="code">www.amazon.com</code>). </p>
                  </li></ul></div>
               <p>Por exemplo, a seguinte condição na política de confiança para uma função do Amazon Cognito testa se o usuário não está autenticado:</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">"Condition": <span>{</span>
  "StringEquals": 
    <span>{</span> "cognito-identity.amazonaws.com:aud": "us-east-2:<code class="replaceable">identity-pool-id</code>" },
  "ForAnyValue:StringLike": 
    <span>{</span> "cognito-identity.amazonaws.com:amr": "unauthenticated" }
}</code></pre>
            </dd>
         
            <dt><b><span class="term"><a id="ck_wif-aud"></a>aud</span></b></dt>
            <dd>
               <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
               <p>Use a chave de condição <code class="code">aud</code> para verificar se o ID do cliente do Google ou o ID do grupo de identidades do Amazon Cognito corresponde ao especificado na política. É possível usar a chave <code class="code">aud</code> com a chave <code class="code">sub</code> para o mesmo provedor de identidade.</p>
               <p><b>Exemplos:</b></p>
               <div class="itemizedlist">
                   
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p><code class="code">graph.facebook.com:app_id</code></p>
                  </li><li class="listitem">
                     <p><code class="code">accounts.google.com:aud</code></p>
                  </li><li class="listitem">
                     <p><code class="code">cognito-identity.amazonaws.com:aud</code></p>
                  </li></ul></div>
               <p>O campo <code class="code">graph.facebook.com:app_id</code> fornece o contexto do público que corresponde ao campo aud usado por outros provedores de identidade.</p>
               <p>A chave de condição <code class="code">accounts.google.com:aud</code> corresponde aos campos de token de ID do Google a seguir. </p>
               <div class="itemizedlist">
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p><code class="code">aud</code> para IDs de cliente do Google do OAuth 2.0 do aplicativo, quando o campo <code class="code">azp</code> não estiver definido. Quando o campo <code class="code">azp</code> estiver definido, o campo <code class="code">aud</code> corresponderá à chave de condição <a href="#ck_oaud">accounts.google.com:oaud</a>.</p>
                  </li><li class="listitem">
                     <p><code class="code">azp</code> quando o campo <code class="code">azp</code> estiver definido. Isso pode acontecer com aplicativos híbridos nos quais um aplicativo web e um aplicativo Android têm um ID de cliente do Google do OAuth 2.0 diferente, mas compartilham o mesmo projeto de APIs do Google. </p>
                  </li></ul></div>
               <p>Para obter mais informações sobre o Google e sobre os campos <code class="code">aud</code> e <code class="code">azp</code>, consulte o guia <a href="https://developers.google.com/identity/protocols/OpenIDConnect" rel="noopener noreferrer" target="_blank"><span>Google Identity Platform OpenID Connect</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
               <p>Quando você escreve uma política usando a chave de condição <code class="code">accounts.google.com:aud</code>, é necessário saber se o aplicativo é um aplicativo híbrido que define o campo <code class="code">azp</code>. </p>
               <p>Campo <code class="code">azp</code> não definido</p>
               <p>O exemplo de política a seguir funciona para aplicativos não híbridos que não definem o campo <code class="code">azp</code>. Nesse caso, o valor do campo <code class="code">aud</code> do token de ID do Google corresponde aos valores da chave de condição <code class="code">accounts.google.com:aud</code> e <code class="code">accounts.google.com:oaud</code>.</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Principal": <span>{</span>"Federated": "accounts.google.com"},
            "Action": "sts:AssumeRoleWithWebIdentity",
            "Condition": <span>{</span>
                "StringEquals": <span>{</span>
                    "accounts.google.com:aud": "aud-value",
                    "accounts.google.com:oaud": "aud-value",
                    "accounts.google.com:sub": "sub-value"
                }
            }
        }
    ]
}</code></pre>
               <p>Campo <code class="code">azp</code> definido</p>
               <p>O exemplo de política a seguir funciona para aplicativos híbridos que definem o campo <code class="code">azp</code>. Nesse caso, o valor do campo <code class="code">aud</code> do token de ID do Google corresponde apenas ao valor da chave de condição <code class="code">accounts.google.com:oaud</code>. O valor do campo <code class="code">azp</code> corresponde ao valor da chave de condição <code class="code">accounts.google.com:aud</code>.</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Principal": <span>{</span>"Federated": "accounts.google.com"},
            "Action": "sts:AssumeRoleWithWebIdentity",
            "Condition": <span>{</span>
                "StringEquals": <span>{</span>
                    "accounts.google.com:aud": "azp-value",
                    "accounts.google.com:oaud": "aud-value",
                    "accounts.google.com:sub": "sub-value"
                }
            }
        }
    ]
}</code></pre>
            </dd>
         
            <dt><b><span class="term"><a id="ck_wif-id"></a>id</span></b></dt>
            <dd>
               <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
               <p><b>Exemplos:</b></p>
               <div class="itemizedlist">
                   
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p><code class="code">graph.facebook.com:id</code></p>
                  </li><li class="listitem">
                     <p><code class="code">www.amazon.com:app_id</code></p>
                  </li><li class="listitem">
                     <p><code class="code">www.amazon.com:user_id</code></p>
                  </li></ul></div>
               <p>Use essas chaves para verificar se o ID do aplicativo (ou site) ou o ID do usuário corresponde àquele especificado na política. Isso funciona para o Facebook ou o Login with Amazon. É possível usar a chave <code class="code">app_id</code> com a chave <code class="code">id</code> para o mesmo provedor de identidade.</p>
            </dd>
         
            <dt><b><span class="term"><a id="ck_oaud"></a>oaud</span></b></dt>
            <dd>
               <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
               <p><b>Exemplo</b>: <code class="code">accounts.google.com:oaud</code></p>
               <p>Se você usar o Google para a federação de identidades da web, essa chave especificará o público do Google (<code class="code">aud</code>) ao qual esse token de ID se destina. Ela deve ser um dos IDs de cliente do OAuth 2.0 do aplicativo.</p>
            </dd>
         
            <dt><b><span class="term"><a id="ck_wif-sub"></a>sub</span></b></dt>
            <dd>
               <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
               <p><b>Exemplos:</b> </p>
               <div class="itemizedlist">
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p><code class="code">accounts.google.com:sub</code></p>
                  </li><li class="listitem">
                     <p><code class="code">cognito-identity.amazonaws.com:sub</code></p>
                  </li></ul></div>
               <p>Use essas chaves para verificar se o ID de usuário corresponde àquele especificado na política. É possível usar a chave <code class="code">sub</code> com a chave <code class="code">aud</code> para o mesmo provedor de identidade.</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        "Condition": <span>{</span>
              "StringEquals": <span>{</span>
                  "oidc.eks.us-east-1.amazonaws.com/id/111122223333:aud": "sts.amazonaws.com",
                  "oidc.eks.us-east-1.amazonaws.com/id/111122223333:sub": "system:serviceaccount:default:assumer"
               }
            }
    ]
      }</code></pre>
            </dd>
         
            <dt><b><span class="term">Mais informações sobre a federação de identidades da Web</span></b></dt>
            <dd>
               <p>Para obter mais informações sobre a federação de identidades da web, consulte o seguinte:</p>
               <div class="itemizedlist">
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p><a href="https://docs.aws.amazon.com/cognito/latest/developerguide/cognito-identity.html">Guia do usuário do Amazon Cognito</a>.</p>
                  </li><li class="listitem">
                     <p><a href="./id_roles_providers_oidc.html">Sobre a federação de identidades da Web</a></p>
                  </li></ul></div>
            </dd>
         </dl></div>
    
      <h2 id="cross-condition-keys-wif">Chaves de contexto de federação de identidades da web da AWS entre serviços</h2>
      <p>Algumas chaves de condição de federação de identidades da web podem ser usadas em políticas de confiança de perfil para definir o que os usuários podem acessar em outros serviços da AWS. Essas são as chaves de condição que podem ser usadas em políticas de confiança de perfil quando as entidades principais federadas assumem outro perfil, e em políticas de recursos de outros serviços da AWS para autorizar o acesso das entidades principais federadas aos recursos. Se você estiver usando o Amazon Cognito para a federação de identidades da web, essas chaves estarão disponíveis quando o usuário for autenticado.</p>
      <p>Selecione uma chave de condição para ver a descrição.</p>
      <div class="itemizedlist">
          
          
          
          
      <ul class="itemizedlist"><li class="listitem">
            <p><a href="#ck_wif-amr">amr</a></p>
         </li><li class="listitem">
            <p><a href="#ck_wif-aud">aud</a></p>
         </li><li class="listitem">
            <p><a href="#ck_wif-id">id</a></p>
         </li><li class="listitem">
            <p><a href="#ck_wif-sub">sub</a></p>
         </li></ul></div>
      <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Nenhuma outra chave de condição de federação baseada em identidade da web está disponível para uso após a autenticação e autorização do provedor de identidades (IdP) externo para a operação inicial AssumeRoleWithWebIdentity.</p></div></div>
    
      <h2 id="condition-keys-saml">Chaves disponíveis para federação do AWS STS com base em SAML</h2>
      <p>Se você estiver trabalhando com <a href="https://docs.aws.amazon.com/STS/latest/UsingSTS/CreatingSAML.html">federação baseada em SAML</a> usando o AWS Security Token Service (AWS STS), poderá incluir chaves de condição adicionais na política. </p>
       
         <h3 id="condition-keys-saml_trust-policy">Políticas de confiança da função do SAML</h3>
         <p>Na política de confiança de uma função, você pode incluir as seguintes chaves, que ajudam você a estabelecer se o chamador tem permissão para assumir a função. Exceto no caso de <code class="code">saml:doc</code>, todos os valores são derivados da declaração de SAML. Todos os itens da lista estão disponíveis no editor visual do console do IAM quando você cria ou edita uma política com condições. Os itens marcados com <code class="code">[]</code> <em>podem</em> ter um valor que seja uma lista do tipo especificado.</p>
         <div class="variablelist">
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
             
         <dl>
               <dt><b><span class="term"><a id="ck_aud"></a>saml:aud </span></b></dt>
               <dd>
                  <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
                  <p>Um URL de endpoint para a qual as declarações de SAML são apresentadas. O valor dessa chave vem do campo <code class="code">SAML Recipient</code> na declaração, <em>não</em>do campo <code class="code">Audience</code>.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_commonname"></a>saml:commonName[]</span></b></dt>
               <dd>
                  <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
                  <p>Esse é um atributo <code class="code">commonName</code>.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_cn"></a>saml:cn[]</span></b></dt>
               <dd>
                  <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
                  <p>Esse é um atributo <code class="code">eduOrg</code>.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_doc"></a>saml:doc</span></b></dt>
               <dd>
                  <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
                  <p>Isso representa a entidade principal que foi usada para assumir a função. O formato é <code class="replaceable">account-ID</code>/<code class="replaceable">provider-friendly-name</code>, como <code class="code">123456789012/SAMLProviderName</code>. O valor <em>account-ID</em> se refere à conta que possui o <a href="./id_roles_providers_create_saml.html">provedor SAML</a>. </p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_edupersonaffiliation"></a>saml:edupersonaffiliation[]</span></b></dt>
               <dd>
                  <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
                  <p>Esse é um atributo <code class="code">eduPerson</code>.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_edupersonassurance"></a>saml:edupersonassurance[]</span></b></dt>
               <dd>
                  <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
                  <p>Esse é um atributo <code class="code">eduPerson</code>.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_edupersonentitlement"></a>saml:edupersonentitlement[]</span></b></dt>
               <dd>
                  <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
                  <p>Esse é um atributo <code class="code">eduPerson</code>.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_edupersonnickname"></a>saml:edupersonnickname[]</span></b></dt>
               <dd>
                  <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
                  <p>Esse é um atributo <code class="code">eduPerson</code>.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_edupersonorgdn"></a>saml:edupersonorgdn</span></b></dt>
               <dd>
                  <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
                  <p>Esse é um atributo <code class="code">eduPerson</code>.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_edupersonorgunitdn"></a>saml:edupersonorgunitdn[]</span></b></dt>
               <dd>
                  <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
                  <p>Esse é um atributo <code class="code">eduPerson</code>.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_edupersonprimaryaffiliation"></a>saml:edupersonprimaryaffiliation</span></b></dt>
               <dd>
                  <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
                  <p>Esse é um atributo <code class="code">eduPerson</code>.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_edupersonprimaryorgunitdn"></a>saml:edupersonprimaryorgunitdn</span></b></dt>
               <dd>
                  <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
                  <p>Esse é um atributo <code class="code">eduPerson</code>.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_edupersonprincipalname"></a>saml:edupersonprincipalname</span></b></dt>
               <dd>
                  <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
                  <p>Esse é um atributo <code class="code">eduPerson</code>.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_edupersonscopedaffiliation"></a>saml:edupersonscopedaffiliation[]</span></b></dt>
               <dd>
                  <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
                  <p>Esse é um atributo <code class="code">eduPerson</code>.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_edupersontargetedid"></a>saml:edupersontargetedid[]</span></b></dt>
               <dd>
                  <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
                  <p>Esse é um atributo <code class="code">eduPerson</code>.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_eduorghomepageuri"></a>saml:eduorghomepageuri[]</span></b></dt>
               <dd>
                  <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
                  <p>Esse é um atributo <code class="code">eduOrg</code>.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_eduorgidentityauthnpolicyuri"></a>saml:eduorgidentityauthnpolicyuri[]</span></b></dt>
               <dd>
                  <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
                  <p>Esse é um atributo <code class="code">eduOrg</code>.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_eduorglegalname"></a>saml:eduorglegalname[]</span></b></dt>
               <dd>
                  <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
                  <p>Esse é um atributo <code class="code">eduOrg</code>.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_eduorgsuperioruri"></a>saml:eduorgsuperioruri[]</span></b></dt>
               <dd>
                  <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
                  <p>Esse é um atributo <code class="code">eduOrg</code>.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_eduorgwhitepagesuri"></a>saml:eduorgwhitepagesuri[]</span></b></dt>
               <dd>
                  <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
                  <p>Esse é um atributo <code class="code">eduOrg</code>.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_givenname"></a>saml:givenName[]</span></b></dt>
               <dd>
                  <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
                  <p>Esse é um atributo <code class="code">givenName</code>.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_iss"></a>saml:iss</span></b></dt>
               <dd>
                  <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
                  <p>O emissor, que é representado por um URN. </p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_mail"></a>saml:mail[]</span></b></dt>
               <dd>
                  <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
                  <p>Esse é um atributo <code class="code">mail</code>.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_name"></a>saml:name[]</span></b></dt>
               <dd>
                  <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
                  <p>Esse é um atributo <code class="code">name</code>.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_saml-namequalifier"></a>saml:namequalifier</span></b></dt>
               <dd>
                  <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
                  <p>Um valor de hash baseado no nome amigável do provedor SAML. O valor é a concatenação dos seguintes valores, em ordem e separados por um caractere '/':</p>
                  <div class="orderedlist">
                      
                      
                      
                  <ol><li>
                        <p>O valor da resposta <code class="code">Issuer</code> (<code class="code">saml:iss</code>)</p>
                     </li><li>
                        <p>O ID da conta da <code class="code">AWS</code>.</p>
                     </li><li>
                        <p> O nome amigável (a última parte do ARN) do provedor SAML no IAM </p>
                     </li></ol></div>
                  <p>A concatenação do ID da conta e do nome amigável do provedor SAML está disponível para as políticas do IAM como a chave <code class="code">saml:doc</code>. Para obter mais informações, consulte <a href="./id_roles_providers_saml.html#CreatingSAML-userid">Identificar exclusivamente os usuários na federação baseada em SAML</a>.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_organizationstatus"></a>saml:organizationStatus[]</span></b></dt>
               <dd>
                  <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
                  <p>Esse é um atributo <code class="code">organizationStatus</code>.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_primarygroupsid"></a>saml:primaryGroupSID[]</span></b></dt>
               <dd>
                  <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
                  <p>Esse é um atributo <code class="code">primaryGroupSID</code>.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_saml-sub"></a>saml:sub</span></b></dt>
               <dd>
                  <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
                  <p>Trata-se do assunto da solicitação, que inclui um valor que identifica de forma exclusiva um usuário individual em uma organização (por exemplo, <code class="code">_cbb88bf52c2510eabe00c1642d4643f41430fe25e3</code>). </p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_saml-subtype"></a>saml:sub_type</span></b></dt>
               <dd>
                  <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
                  <p>Essa chave pode ter o valor <code class="code">persistent</code>, <code class="code">transient</code> ou consistir no URI <code class="code">Format</code> completo dos elementos <code class="code">Subject</code> e <code class="code">NameID</code> usados em sua declaração SAML. O valor <code class="code">persistent</code> indica que o valor em <code class="code">saml:sub</code> é o mesmo para um usuário entre as sessões. Se o valor for <code class="code">transient</code>, o usuário terá um valor <code class="code">saml:sub</code> diferente para cada sessão. Para obter mais informações sobre o atributo <code class="code">NameID</code> do elemento <code class="code">Format</code>, consulte <a href="./id_roles_providers_create_saml_assertions.html">Configuração de declarações SAML para a resposta de autenticação</a>.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_surname"></a>saml:surname[]</span></b></dt>
               <dd>
                  <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
                  <p>Esse é um atributo <code class="code">surnameuid</code>.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_uid"></a>saml:uid[]</span></b></dt>
               <dd>
                  <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
                  <p>Esse é um atributo <code class="code">uid</code>.</p>
               </dd>
            
               <dt><b><span class="term"><a id="ck_x500uniqueidentifier"></a>saml:x500UniqueIdentifier[]</span></b></dt>
               <dd>
                  <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
                  <p>Esse é um atributo <code class="code">x500UniqueIdentifier</code>.</p>
               </dd>
            </dl></div>
         <p>Para obter informações gerais sobre os atributos do <code class="code">eduPerson</code> e <code class="code">eduOrg</code>, consulte o <a href="https://wiki.refeds.org/display/STAN/eduPerson" rel="noopener noreferrer" target="_blank"><span>REFEDS Wiki website</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> (site Wiki do REFEDS). Para obter uma lista de atributos do <code class="code">eduPerson</code>, consulte a <a href="https://software.internet2.edu/eduperson/internet2-mace-dir-eduperson-201602.html" rel="noopener noreferrer" target="_blank"><span>eduPerson Object Class Specification (201602)</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> (Especificação da classe de objeto eduPerson (201602)). </p>
         <p>As chaves de condição cujo tipo é uma lista pode incluir vários valores. Para criar condições na política para listar os valores, você pode usar <a href="./reference_policies_multi-value-conditions.html">operadores definidos</a> (<code class="code">ForAllValues</code>, <code class="code">ForAnyValue</code>). Por exemplo, para permitir qualquer usuário cuja afiliação seja "corpo docente" ou "equipe" (mas não "aluno"), você pode usar uma condição como a seguinte: </p>
         <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="">"Condition": <span>{</span>
   "ForAllValues:StringLike": <span>{</span>
     "saml:edupersonaffiliation":[ "faculty", "staff"] 
   }
}</code></pre>
       
    
      <h2 id="cross-condition-keys-saml">Chaves de contexto de federação do AWS STS baseadas em SAML entre serviços</h2>
      <p>Algumas chaves de condição de federação baseadas em SAML podem ser usadas em solicitações subsequentes para autorizar operações da AWS em outros serviços e chamadas <code class="code">AssumeRole</code>. Essas são as chaves de condição que podem ser usadas em políticas de confiança de perfil quando as entidades principais federadas assumem outro perfil, e em políticas de recursos de outros serviços da AWS para autorizar o acesso das entidades principais federadas aos recursos. Para obter mais informações sobre o uso dessas chaves, consulte <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_providers_saml.html#CreatingSAML-userid">Sobre federação baseada em SAML 2.0</a>. </p>
      <p>Selecione uma chave de condição para ver a descrição.</p>
      <div class="itemizedlist">
          
          
          
      <ul class="itemizedlist"><li class="listitem">
            <p><a href="#ck_saml-namequalifier">saml:namequalifier</a></p>
         </li><li class="listitem">
            <p><a href="#ck_saml-sub">saml:sub</a></p>
         </li><li class="listitem">
            <p><a href="#ck_saml-subtype">saml:sub_type</a></p>
         </li></ul></div>
      <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>Nenhuma outra chave de condição de federação baseada em SAML está disponível para uso após a resposta inicial de autenticação do provedor de identidades (IdP) externo.</p></div></div>
    
      <h2 id="condition-keys-sts">Chaves disponíveis do AWS STS</h2>
      <p>É possível usar as chaves de condição a seguir nas políticas de confiança de função do IAM para funções que são assumidas usando operações do AWS Security Token Service (AWS STS). </p>
      <div class="variablelist">
          
          
          
          
          
          
      <dl>
            <dt><b><span class="term"><a id="ck_awsservicename"></a>sts:AWSServiceName</span></b></dt>
            <dd>
               <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
               <p>Use essa chave para especificar um serviço onde um token de portador pode ser usado. Ao usar essa chave de condição em uma política, especifique o serviço usando um principal de serviço. Um serviço principal é o nome de um serviço que pode ser especificado no elemento <code class="code">Principal</code> de uma política. Por exemplo, <code class="code">codeartifact.amazonaws.com</code> é o principal do serviço AWS CodeArtifact.</p>
               <p>Alguns serviços da AWS exigem que você tenha permissão para obter um token de portador do serviço AWS STS para poder acessar seus recursos de forma programática. Por exemplo, o AWS CodeArtifact requer que os principais usem tokens de portador para executar algumas operações. O comando <code class="code">aws codeartifact get-authorization-token</code> retorna um token de portador. Depois, é possível usar o token de portador para executar operações do AWS CodeArtifact. Para obter mais informações sobre tokens de portador, consulte <a href="./id_credentials_bearer.html">Usar tokens de portador</a>. </p>
               <p><b>Disponibilidade</b>: essa chave está presente em solicitações que recebem um token de portador. Não é possível fazer uma chamada direta ao AWS STS para obter um token de portador. Quando você executa algumas operações em outros serviços, o serviço solicita o token de portador em seu nome.</p>
               <p>É possível usar essa chave de condição para permitir que os principais obtenham um token de portador para uso com um serviço específico.</p>
            </dd>
         
            <dt><b><span class="term"><a id="ck_durationseconds"></a>sts:DurationSeconds</span></b></dt>
            <dd>
               <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_Numeric">operadores numéricos</a>.</p>
               <p>Use essa chave para especificar a duração (em segundos) que um principal pode usar ao obter um token de portador do AWS STS.</p>
               <p>Alguns serviços da AWS exigem que você tenha permissão para obter um token de portador do serviço AWS STS para poder acessar seus recursos de forma programática. Por exemplo, o AWS CodeArtifact requer que os principais usem tokens de portador para executar algumas operações. O comando <code class="code">aws codeartifact get-authorization-token</code> retorna um token de portador. Depois, é possível usar o token de portador para executar operações do AWS CodeArtifact. Para obter mais informações sobre tokens de portador, consulte <a href="./id_credentials_bearer.html">Usar tokens de portador</a>. </p>
               <p><b>Disponibilidade</b>: essa chave está presente em solicitações que recebem um token de portador. Não é possível fazer uma chamada direta ao AWS STS para obter um token de portador. Quando você executa algumas operações em outros serviços, o serviço solicita o token de portador em seu nome. A chave não está presente para operações assume-role do AWS STS.</p>
               
            </dd>
         
            <dt><b><span class="term"><a id="ck_externalid"></a>sts:ExternalId</span></b></dt>
            <dd>
               <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
               <p>Use essa chave para exigir que uma entidade de segurança forneça um identificador específico ao assumir uma função do IAM.</p>
               <p><b>Disponibilidade</b>: essa chave está presente na solicitação quando a entidade de segurança fornece um ID externo enquanto assume uma função usando a AWS CLI ou a API da AWS. </p>
               <p>Um identificador exclusivo que pode ser necessário ao assumir uma função em outra conta. Se o administrador da conta à qual a função pertence forneceu um ID externo para você, forneça esse valor no parâmetro <code class="code">ExternalId</code>. Esse valor pode ser qualquer string, como uma frase secreta ou o número de uma conta. A função principal do ID externo é abordar e impedir o problema "confused deputy". Para obter mais informações sobre o ID externo e o problema confused deputy, consulte <a href="./id_roles_create_for-user_externalid.html">Como usar um ID externo ao conceder acesso aos seus recursos da AWS a terceiros</a>.</p>
               <p>O valor <code class="code">ExternalId</code> deve ter no mínimo 2 e no máximo 1.224 caracteres. O valor deve ser alfanumérico sem espaço em branco. Ele também pode incluir os seguintes símbolos: mais (+), igual (=), vírgula (,), ponto (.), arroba (@), dois pontos (:), barra (/) e hífen (-).</p>
            </dd>
         
            <dt><b><span class="term"><a id="ck_rolesessionname"></a>sts:RoleSessionName</span></b></dt>
            <dd>
               <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
               <p>Utilize essa chave para comparar o nome da sessão que um principal especifica ao assumir uma função com o valor especificado na política.</p>
               <p><b>Disponibilidade</b>: essa chave está presente na solicitação quando a entidade de segurança assume a função usando o AWS Management Console, qualquer comando de assumir função da CLI ou qualquer operação de API <code class="code">AssumeRole</code> do AWS STS.</p>
               <p>Você pode usar essa chave em uma política de confiança de função para exigir que os usuários forneçam um nome de sessão específico quando assumirem uma função. Por exemplo, você pode exigir que os usuários do IAM especifiquem o próprio nome de usuário como nome de sessão. Depois que o usuário do IAM assume a função, a atividade aparece nos <a href="./cloudtrail-integration.html#cloudtrail-integration_signin-tempcreds">logs do AWS CloudTrail</a> com o nome da sessão que corresponde ao seu nome de usuário. Isso torna mais fácil para os administradores diferenciar entre sessões de função quando uma função é usada por diferentes entidades de segurança.</p>
               <p>A política de confiança de função a seguir exige que os usuários do IAM na conta <code class="code">111122223333</code> forneçam o nome de usuário do IAM como o nome da sessão quando assumem a função. Esse requisito é imposto usando a <a href="./reference_policies_variables.html">variável de condição</a> <code class="code">aws:username</code> na chave de condição. Essa política permite que os usuários do IAM assumam a função à qual a política está anexada. Essa política não permite que ninguém que utilize credenciais temporárias assuma a função, porque a variável <code class="code">username</code> está presente apenas para usuários do IAM.</p>
               <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Importante</h6></div><div class="awsdocs-note-text"><p>É possível usar qualquer chave de condição de valor único disponível como uma <a href="./reference_policies_variables.html">variável</a>. Você não pode usar uma chave de condição de valores múltiplos como uma variável.</p></div></div>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "RoleTrustPolicyRequireUsernameForSessionName",
            "Effect": "Allow",
            "Action": "sts:AssumeRole",
            "Principal": <span>{</span>"AWS": "arn:aws:iam::111122223333:root"},
            "Condition": <span>{</span>
                "StringLike": <span>{</span>"sts:RoleSessionName": "$<span>{</span>aws:username}"}
            }
        }
    ]
}</code></pre>
               <p>Quando um administrador exibe o log do AWS CloudTrail de uma ação, ele pode comparar o nome da sessão com os nomes de usuário em sua conta. No exemplo a seguir, o usuário chamado <code class="code">matjac</code> executou a operação usando a função chamada <code class="code">MateoRole</code>. O administrador pode entrar em contato com Mateo Jackson, que tem o nome de usuário <code class="code">matjac</code>.</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">    "assumedRoleUser": <span>{</span>
        "assumedRoleId": "AROACQRSTUVWRAOEXAMPLE:<code class="replaceable">matjac</code>",
        "arn": "arn:aws:sts::111122223333:assumed-role/<code class="replaceable">MateoRole</code>/<code class="replaceable">matjac</code>"
    }</code></pre>
               <p>Se você permitir <a href="./id_roles_common-scenarios_aws-accounts.html">acesso entre contas usando funções</a>, os usuários em uma conta poderão assumir uma função em outra conta. O ARN do usuário da função assumida listado no CloudTrail inclui a conta <em>onde a função existe</em>. Ele não inclui a conta do usuário que assumiu a função. Os usuários são exclusivos apenas dentro de uma conta. Portanto, recomendamos que você use esse método para verificar logs do CloudTrail somente para funções que são assumidas pelos usuários em contas que você administra. Seus usuários podem usar o mesmo nome de usuário em várias contas.</p>
            </dd>
         
            <dt><b><span class="term"><a id="ck_sourceidentity"></a>sts:SourceIdentity</span></b></dt>
            <dd>
               <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
               <p>Use esta chave para comparar a identidade-fonte que uma entidade de segurança especifica ao assumir uma função com o valor que é especificado na política.</p>
               <p><b>Disponibilidade</b>:essa chave está presente na solicitação quando a entidade de segurança fornece uma identidade-fonte enquanto assume uma função usando qualquer comando de assumir função da CLI do AWS STS ou operação da API <code class="code">AssumeRole</code> do AWS STS.</p>
               <p>Você pode usar essa chave em uma política de confiança de função para exigir que seus usuários definam uma identidade-fonte específica ao assumir uma função. Por exemplo, você pode exigir que seu quadro de funcionários ou suas identidades federadas especifiquem um valor para a identidade-fonte. Você pode configurar seu provedor de identidade (IdP) para usar um dos atributos associados aos usuários, como um nome de usuário ou e-mail como a identidade-fonte. O IdP então passa a identidade-fonte como um atributo nas declarações ou reivindicações que envia para a AWS. O valor do atributo de identidade-fonte identifica o usuário ou a aplicação que está assumindo a função.</p>
               <p>Depois que o usuário assume a função, a atividade aparece nos <a href="./cloudtrail-integration.html#cloudtrail-integration_signin-tempcreds">logs do AWS CloudTrail</a> com o valor de identidade-fonte que foi definido. Isso torna mais fácil para os administradores determinar quem ou o que executou ações com uma função na AWS. Você deve conceder permissões para a ação <code class="code">sts:SetSourceIdentity</code> para permitir que uma identidade defina uma identidade-fonte. </p>
               <p>Ao contrário de <a href="#ck_rolesessionname">sts:RoleSessionName</a>, após a definição da identidade-fonte, o valor não pode ser alterado. Ele está presente no contexto de solicitação para todas as ações executadas com a função pela identidade-fonte. O valor persiste nas sessões de função subsequentes quando você usa as credenciais da sessão para assumir outra função. Assumir uma função de outra é chamado de <a href="./id_roles_terms-and-concepts.html#iam-term-role-chaining">encadeamento de funções</a>. </p>
               <p>Você pode usar a chave de condição global <a href="./reference_policies_condition-keys.html#condition-keys-sourceidentity">aws:SourceIdentity</a> para controlar ainda mais o acesso a recursos da AWS com base no valor da identidade-fonte em solicitações subsequentes. </p>
               <p>A política de confiança de função a seguir permite que o usuário do IAM<code class="code">AdminUser</code> assuma uma função na conta <code class="code">111122223333</code>. Ela também concede permissão para o <code class="code">AdminUser</code> definir uma identidade-fonte, desde que o conjunto de identidades de origem seja <code class="code">DiegoRamirez</code>.</p>
               <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "AllowAdminUserAssumeRole",
            "Effect": "Allow",
            "Principal": <span>{</span>"AWS": " arn:aws:iam::111122223333:user/AdminUser"},
            "Action": [
                "sts:AssumeRole",
                "sts:SetSourceIdentity"
            ],
            "Condition": <span>{</span>
                "StringEquals": <span>{</span>"sts:SourceIdentity": "DiegoRamirez"}
            }
        }
    ]
}
</code></pre>
               <p>Para saber mais sobre como usar informações de identidade-fonte, consulte <a href="./id_credentials_temp_control-access_monitor.html">Monitorar e controlar ações realizadas com funções assumidas</a>.</p>
            </dd>
         
            <dt><b><span class="term"><a id="ck_transitivetagkeys"></a>sts:TransitiveTagKeys</span></b></dt>
            <dd>
               <p>Funciona com <a href="./reference_policies_elements_condition_operators.html#Conditions_String">operadores de string</a>.</p>
               <p>Use esta chave para comparar as chaves de tag de sessão transitiva na solicitação com as especificadas na política. </p>
               <p><b>Disponibilidade</b>: essa chave está presente na solicitação quando você faz uma solicitação usando credenciais de segurança temporárias. Elas incluem credenciais criadas usando qualquer operação assume-role, ou a operação <code class="code">GetFederationToken</code>.</p>
               <p>Ao fazer uma solicitação usando credenciais de segurança temporárias, o <a href="./reference_policies_elements_condition.html#AccessPolicyLanguage_RequestContext">contexto da solicitação</a> inclui a chave de contexto <code class="code"><a href="./reference_policies_condition-keys.html#condition-keys-principaltag">aws:PrincipalTag</a></code>. Essa chave inclui uma lista de <a href="./id_session-tags.html">tags de sessão</a>, <a href="./id_session-tags.html#id_session-tags_role-chaining">tags de sessão transitivas</a> e tags de função. As tags de sessão transitivas são tags que persistem em todas as sessões subsequentes quando você usa as credenciais da sessão para assumir outra função. Assumir uma função de outra é chamado de <a href="./id_roles_terms-and-concepts.html#iam-term-role-chaining">encadeamento de funções</a>. </p>
               <p>Você pode usar essa chave de condição em uma política para exigir a configuração de tags de sessão específicas como transitivas ao assumir uma função ou federar um usuário.</p>
            </dd>
         </dl></div>
   <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Atenção" /> <strong>O Javascript está desativado ou não está disponível no seu navegador.</strong></p><p>Para usar a documentação da AWS, o Javascript deve estar ativado. Consulte as páginas de Ajuda do navegador para obter instruções.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenções do documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./reference_policies_condition-keys.html">Chaves de condições globais</div><div id="next" class="next-link" accesskey="n" href="./reference_policies_actions-resources-contextkeys.html">Ações, recursos e chaves de condição</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Essa página foi útil? - Sim</div><div class="content"><p>Obrigado por nos informar que estamos fazendo um bom trabalho!</p><p>Se tiver tempo, conte-nos sobre o que você gostou para que possamos melhorar ainda mais.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Essa página foi útil? - Não</div><div class="content"><p>Obrigado por nos informar que precisamos melhorar a página. Lamentamos ter decepcionado você.</p><p>Se tiver tempo, conte-nos como podemos melhorar a documentação.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>