<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>License Manager – User-based subscription role - AWS License Manager</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="user-based-subscription-role" /><meta name="default_state" content="user-based-subscription-role" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/license-manager/latest/userguide/user-based-subscription-role.html" /><meta name="description" content="How to use the user-based subscription service-linked role to allow License Manager to perform actions required to utilize user-based subscriptions." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS License Manager" /><meta name="guide" content="User Guide" /><meta name="abstract" content="AWS License Manager streamlines the process of bringing software vendor licenses to the cloud. As you build out cloud infrastructure on AWS you can save costs by using Bring Your Own License model (BYOL) opportunities. That is, you can repurpose your existing license inventory for use with cloud resources. License Manager reduces the risk of licensing overages and penalties with inventory tracking that is tied directly into AWS services." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/license-manager/latest/userguide/user-based-subscription-role.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/license-manager/latest/userguide/user-based-subscription-role.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/license-manager/latest/userguide/user-based-subscription-role.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/license-manager/latest/userguide/user-based-subscription-role.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/license-manager/latest/userguide/user-based-subscription-role.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/license-manager/latest/userguide/user-based-subscription-role.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/license-manager/latest/userguide/user-based-subscription-role.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/license-manager/latest/userguide/user-based-subscription-role.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/license-manager/latest/userguide/user-based-subscription-role.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/license-manager/latest/userguide/user-based-subscription-role.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/license-manager/latest/userguide/user-based-subscription-role.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/license-manager/latest/userguide/user-based-subscription-role.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/license-manager/latest/userguide/user-based-subscription-role.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/license-manager/latest/userguide/user-based-subscription-role.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/license-manager/latest/userguide/user-based-subscription-role.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/license-manager/latest/userguide/user-based-subscription-role.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/license-manager/latest/userguide/user-based-subscription-role.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/license-manager/latest/userguide/user-based-subscription-role.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/license-manager/latest/userguide/user-based-subscription-role.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/license-manager/latest/userguide/user-based-subscription-role.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/license-manager/latest/userguide/user-based-subscription-role.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/license-manager/latest/userguide/user-based-subscription-role.html" hreflang="x-default" /><meta name="feedback-item" content="License Manager" /><meta name="this_doc_product" content="AWS License Manager" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'license-manager'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="License Manager – User-based subscription role" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>License Manager – User-based subscription role - AWS License Manager</title><meta name="pdf" content="/pdfs/license-manager/latest/userguide/license-manager.pdf#user-based-subscription-role" /><meta name="github" content="https://github.com/awsdocs/aws-license-manager-user-guide/tree/main/doc_source/user-based-subscription-role.md" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=License%20Manager&amp;topic_url=http://docs.aws.amazon.com/en_us/license-manager/latest/userguide/user-based-subscription-role.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/license-manager/latest/userguide/user-based-subscription-role.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/license-manager/latest/userguide/user-based-subscription-role.html" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS License Manager",
        "item" : "https://docs.aws.amazon.com/license-manager/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/license-manager/latest/userguide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Security in AWS License Manager",
        "item" : "https://docs.aws.amazon.com/license-manager/latest/userguide/security.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Using service-linked roles for AWS License Manager",
        "item" : "https://docs.aws.amazon.com/license-manager/latest/userguide/using-service-linked-roles.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "License Manager – User-based subscription role",
        "item" : "https://docs.aws.amazon.com/license-manager/latest/userguide/using-service-linked-roles.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/license-manager/latest/userguide/license-manager.pdf#user-based-subscription-role" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a href="https://github.com/awsdocs/aws-license-manager-user-guide/tree/main/doc_source/user-based-subscription-role.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/license-manager/index.html">AWS License Manager</a><a href="license-manager.html">User Guide</a></div><div id="page-toc-src"><a href="#service-linked-role-permissions-member">Permissions for the user-based subscription role</a><a href="#create-service-linked-role-member">Create the service-linked role for License Manager</a><a href="#edit-service-linked-role-member">Edit a service-linked role for License Manager</a><a href="#delete-service-linked-role-member">Delete a service-linked role for License Manager</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="user-based-subscription-role">License Manager – User-based subscription
        role</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>License Manager requires a service-linked role for managing AWS resources that will provide user-based subscriptions.</p>
    <h2 id="service-linked-role-permissions-member">Permissions for the user-based subscription role</h2>
      <p>The service-linked role named
          <code class="code">AWSServiceRoleForAWSLicenseManagerUserSubscriptionsService</code> allows License Manager to
        utilize AWS Systems Manager and manage Amazon EC2 resources providing user-based subscriptions, as well as
        describe AWS Directory Service resources.</p>
    <p>The role permissions policy allows License Manager to complete the following actions on the
      specified resources.</p>
    <div class="table-container"><div class="table-contents"><table id="w219aac15c17c25b5b7"><thead>
          <tr>
            <th>Action</th>
            <th>Resource ARN</th>
          </tr>
        </thead>
            <tr>
              <td><code class="code">ds:DescribeDirectories</code></td>
              <td><code class="code">*</code></td>
            </tr>
            <tr>
              <td><code class="code">ds:GetAuthorizedApplicationDetails</code></td>
              <td><code class="code">*</code></td>
            </tr>
            <tr>
              <td><code class="code">ec2:CreateTags</code></td>
              <td>arn:aws:ec2:*:*:instance/* ¹</td>
            </tr>
            <tr>
              <td><code class="code">ec2:DescribeInstances</code></td>
              <td><code class="code">*</code></td>
            </tr>
            <tr>
              <td><code class="code">ec2:DescribeVpcPeeringConnections</code></td>
              <td><code class="code">*</code></td>
            </tr>
            <tr>
              <td><code class="code">ec2:TerminateInstances</code></td>
              <td>arn:aws:ec2:*:*:instance/* ¹</td>
            </tr>
            <tr>
              <td><code class="code">ssm:DescribeInstanceInformation</code></td>
              <td><code class="code">*</code></td>
            </tr>
            <tr>
              <td><code class="code">ssm:GetCommandInvocation</code></td>
              <td><code class="code">*</code></td>
            </tr>
            <tr>
              <td><code class="code">ssm:GetInventory</code></td>
              <td><code class="code">*</code></td>
            </tr>
            
            <tr>
              <td><code class="code">ssm:ListCommandInvocations</code></td>
              <td><code class="code">*</code></td>
            </tr>           
            <tr>
              <td><code class="code">ssm:SendCommand</code></td>
              <td>arn:aws:ssm:*::document/AWS-RunPowerShellScript
                  ²<p>arn:aws:ec2:*:*:instance/* ²</p></td>
            </tr>
          </table></div></div>
      <p>¹ License Manager can only create tags on and terminate instances which have the product
        codes <a href="http://aws.amazon.com/marketplace/pp/prodview-dzstlnjdl3izg" rel="noopener noreferrer" target="_blank"><span>bz0vcy31ooqlzk5tsash4r1ik</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>, <a href="http://aws.amazon.com/marketplace/pp/prodview-bh46d5p2hapns" rel="noopener noreferrer" target="_blank"><span>77yzkpa7kvee1y1tt7wnsdwoc</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>, or <a href="http://aws.amazon.com/marketplace/pp/prodview-zo3zltrbpgr5i" rel="noopener noreferrer" target="_blank"><span>d44g89hc0gp9jdzm99rznthpw</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
      <p>² License Manager can only execute an SSM Run Command with the
          <code class="code">AWS-RunPowerShellScript</code> document on instances with the tag name of
          <code class="code">AWSLicenseManager</code> and a value of <code class="code">UserSubscriptions</code>.</p>
    
      <p>You must configure permissions to allow an IAM entity (such as a user, group, or role)
        to create, edit, or delete a service-linked role. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/using-service-linked-roles.html#service-linked-role-permissions">Service-Linked Role Permissions</a> in the
        <em>IAM User Guide</em>.</p>
   
    <h2 id="create-service-linked-role-member">Create the service-linked role for License Manager</h2>
    <p>You don't need to manually create the service-linked role as you will be prompted on the
        License Manager console <b>User-based subscriptions</b> pages to create the role.</p>
    <p>If you delete this service-linked role and then need to create it again, you can use the
      same process to recreate the role in your account.</p>
    <p>You can also use the IAM console, AWS CLI, or IAM API to create a service-linked role
        manually. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/using-service-linked-roles.html#create-service-linked-role">Creating a
          Service-Linked Role</a> in the <em>IAM User Guide</em>.</p>
    <p>You can use the License Manager console to create a service-linked role.</p>
    <div class="procedure"><h6>To create the service-linked role</h6><ol><li><p>Open the License Manager console at
<a href="https://console.aws.amazon.com/license-manager/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/license-manager/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></li><li>
        <p>In the left navigation pane, choose <b>User Association</b> or
              <b>Products</b>.</p>
      </li><li>
        <p>Agree to the terms for License Manager to create the user-based subscription role.</p>
      </li><li>
        <p>Choose <b>Create</b>. This creates the  role.</p>
      </li></ol></div>
    <p>You can also use the IAM console to create a service-linked role with the <code class="code">License Manager -
          User-based subscriptions</code> use case. Alternatively, in the AWS CLI or AWS API, create
        a service-linked role with the <code class="code">license-manager-user-subscriptions.amazonaws.com</code>
        service name. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/using-service-linked-roles.html#create-service-linked-role">Creating a
          Service-Linked Role</a> in the <em>IAM User Guide</em>. </p>
    <p>If you delete this service-linked role, you can use the same IAM process to create the
      role again.</p>
   
    <h2 id="edit-service-linked-role-member">Edit a service-linked role for License Manager</h2>
    <p>License Manager does not allow you to edit the
          <code class="code">AWSServiceRoleForAWSLicenseManagerUserSubscriptionsService</code> service-linked
        role. After you create a service-linked role, you cannot change the name of the role because
        various entities might reference the role. However, you can edit the description of the role
        using IAM. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/using-service-linked-roles.html#edit-service-linked-role">Editing a
          Service-Linked Role</a> in the <em>IAM User Guide</em>.</p>
   
    <h2 id="delete-service-linked-role-member">Delete a service-linked role for License Manager</h2>
    
<p>If you no longer need to use a feature or service that requires a service-linked 
role, we recommend that you delete that role. That way, you only have entities that are 
actively monitored or maintained. However, you must clean up your service-linked role 
before you can manually delete it.</p>       
     
      <h3 id="slr-manual-delete-member">Manually delete the service-linked role</h3>
      <p>Use the IAM console, AWS CLI, or AWS API to delete the
            <code class="code">AWSServiceRoleForAWSLicenseManagerUserSubscriptionsService</code> service-linked
          role. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/using-service-linked-roles.html#delete-service-linked-role">Deleting
            a Service-Linked Role</a> in the <em>IAM User Guide</em>.</p>
     
  <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./member-role.html">Member account role</div><div id="next" class="next-link" accesskey="n" href="./linux-subscriptions-role.html">Linux subscriptions role</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=License Manager&amp;topic_url=https://docs.aws.amazon.com/en_us/license-manager/latest/userguide/user-based-subscription-role.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=License Manager&amp;topic_url=https://docs.aws.amazon.com/en_us/license-manager/latest/userguide/user-based-subscription-role.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>