<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>AWS region selection - AWS SDK for Java 2.x</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="region-selection" /><meta name="default_state" content="region-selection" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/region-selection.html" /><meta name="description" content="How to check service availability and choose an AWS Region and specific endpoints." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS SDK for Java 2.x" /><meta name="guide" content="Developer Guide for version 2.x" /><meta name="abstract" content="Describes the new features in version 2.x of the AWS SDK for Java." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/region-selection.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sdk-for-java/latest/developer-guide/region-selection.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/sdk-for-java/latest/developer-guide/region-selection.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sdk-for-java/latest/developer-guide/region-selection.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/sdk-for-java/latest/developer-guide/region-selection.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/region-selection.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/region-selection.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sdk-for-java/latest/developer-guide/region-selection.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/sdk-for-java/latest/developer-guide/region-selection.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sdk-for-java/latest/developer-guide/region-selection.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/sdk-for-java/latest/developer-guide/region-selection.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sdk-for-java/latest/developer-guide/region-selection.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/sdk-for-java/latest/developer-guide/region-selection.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sdk-for-java/latest/developer-guide/region-selection.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/sdk-for-java/latest/developer-guide/region-selection.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sdk-for-java/latest/developer-guide/region-selection.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/sdk-for-java/latest/developer-guide/region-selection.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sdk-for-java/latest/developer-guide/region-selection.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/sdk-for-java/latest/developer-guide/region-selection.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/sdk-for-java/latest/developer-guide/region-selection.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/sdk-for-java/latest/developer-guide/region-selection.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/region-selection.html" hreflang="x-default" /><meta name="feedback-item" content="AWS SDK for Java" /><meta name="this_doc_product" content="AWS SDK for Java 2.x" /><meta name="this_doc_guide" content="Developer Guide for version 2.x " /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'sdk-for-java'}"></script><meta id="panorama-serviceSubSection" value="Developer Guide for version 2.x " /><meta id="panorama-serviceConsolePage" value="AWS region selection" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>AWS region selection - AWS SDK for Java 2.x</title><meta name="pdf" content="/pdfs/sdk-for-java/latest/developer-guide/aws-sdk-java-dg-v2.pdf#region-selection" /><meta name="github" content="https://github.com/awsdocs/aws-java-developer-guide-v2/tree/base/doc_source/region-selection.md" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=70" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=AWS%20SDK%20for%20Java&amp;topic_url=http://docs.aws.amazon.com/en_us/sdk-for-java/latest/developer-guide/region-selection.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/sdk-for-java/latest/developer-guide/region-selection.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/sdk-for-java/latest/developer-guide/region-selection.html" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS SDK for Java",
        "item" : "https://docs.aws.amazon.com/sdk-for-java/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide for version 2.x ",
        "item" : "https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Use the AWS SDK for Java 2.x",
        "item" : "https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/using.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "AWS region selection",
        "item" : "https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/using.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/sdk-for-java/latest/developer-guide/aws-sdk-java-dg-v2.pdf#region-selection" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a href="https://github.com/awsdocs/aws-java-developer-guide-v2/tree/base/doc_source/region-selection.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/sdk-for-java/index.html">AWS SDK for Java</a><a href="home.html">Developer Guide for version 2.x </a></div><div id="page-toc-src"><a href="#region-selection-choose-region">Choosing a region</a><a href="#choosing-a-specific-endpoint">Choosing a specific endpoint</a><a href="#automatically-determine-the-aws-region-from-the-environment">Automatically determine the Region from the environment</a><a href="#region-selection-query-service">Checking for service availability in a Region</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="region-selection">AWS region selection</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Regions enable you to access AWS services that physically reside in a specific geographic area. This can be useful both for redundancy and to keep your data and applications running close to where you and your users will access them.</p><p>In AWS SDK for Java 2.x, all the different region related classes from version 1.x have been collapsed into one Region class. You can use this class for all region-related actions such as retrieving metadata about a region or checking whether a service is available in a region.</p>
      <h2 id="region-selection-choose-region">Choosing a region</h2>
      <p>You can specify a region name and the SDK will automatically choose an appropriate endpoint for you.</p>
      <p>To explicitly set a region, we recommend that you use the constants defined in the <a href="http://docs.aws.amazon.com/sdk-for-java/latest/reference/software/amazon/awssdk/regions/Region.html">Region</a> class. This is an enumeration of all publicly available regions. To create a client with a region from the class, use the following code.</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="java ">Ec2Client ec2 = Ec2Client.builder()
          .region(Region.US_WEST_2)
          .build();</code></pre>
      <p>If the region you are attempting to use isn’t one of the constants in the <code class="code">Region</code> class, you can create a new region using the <code class="code">of</code> method. This feature allows you access to new Regions without upgrading the SDK.</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="java ">Region newRegion = Region.of("us-east-42");
Ec2Client ec2 = Ec2Client.builder()
          .region(newRegion)
          .build();</code></pre>
      <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>After you build a client with the builder, it’s <em>immutable</em> and the region <em>cannot be changed</em>. If you are working with multiple AWS Regions for the same service, you should create multiple clients—​one per region.</p></div></div>
    
      <h2 id="choosing-a-specific-endpoint">Choosing a specific endpoint</h2>
      <p>Each AWS client can be configured to use a <em>specific endpoint</em> within a region by calling the <code class="code">endpointOverride</code> method.</p>
      <p>For example, to configure the Amazon EC2 client to use the Europe (Ireland) Region, use the following code.</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="java ">Ec2Client ec2 = Ec2Client.builder()
               .region(Region.EU_WEST_1)
               .endpointOverride(URI.create("https://ec2.eu-west-1.amazonaws.com"))
               .build();</code></pre>
      <p>See <a href="https://docs.aws.amazon.com/general/latest/gr/rande.html">Regions and Endpoints</a> for the current list of regions and their corresponding endpoints for all AWS services.</p>
    
      <h2 id="automatically-determine-the-aws-region-from-the-environment">Automatically determine the Region from the environment</h2>
      <p>When running on Amazon EC2 or AWS Lambda, you might want to configure clients to use the same region that your code is running on. This decouples your code from the environment it’s running in and makes it easier to deploy your application to multiple regions for lower latency or redundancy.</p>
      <p>To use the default credential/region provider chain to determine the region from the environment, use the client builder’s <code class="code">create</code> method.</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="java ">Ec2Client ec2 = Ec2Client.create();</code></pre>
      <p>If you don’t explicitly set a region using the <code class="code">region</code> method, the SDK consults the default region provider chain to try and determine the region to use.</p>
       
         <h3 id="default-region-provider-chain">Default region provider chain</h3>
         <p>
            <strong>The following is the region lookup process:</strong>
         </p>
         <div class="orderedlist">
             
             
             
             
             
         <ol style="list-style-type:arabic ! important;"><li>
               <p>Any explicit region set by using <code class="code">region</code> on the builder itself takes precedence over anything else.</p>
            </li><li>
               <p>The <code class="code">AWS_REGION</code> environment variable is checked. If it’s set, that region is used to configure the client.</p>
               <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>This environment variable is set by the Lambda container.</p></div></div>
            </li><li>
               <p>The SDK checks the AWS shared configuration file (usually located at <code class="code">~/.aws/config</code>). If the <em>region</em> property is present, the SDK uses it.</p>
               <div class="itemizedlist">
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p>The <code class="code">AWS_CONFIG_FILE</code> environment variable can be used to customize the location of the shared config file.</p>
                  </li><li class="listitem">
                     <p>The <code class="code">AWS_PROFILE</code> environment variable or the <code class="code">aws.profile</code> system property can be used to customize the profile that the SDK loads.</p>
                  </li></ul></div>
            </li><li>
               <p>The SDK attempts to use the Amazon EC2 instance metadata service to determine the region of the currently running Amazon EC2 instance.</p>
            </li><li>
               <p>If the SDK still hasn’t found a region by this point, client creation fails with an exception.</p>
            </li></ol></div>
         <p>When developing AWS applications, a common approach is to use the <em>shared configuration file</em> (described in <a href="./credentials-chain.html#credentials-default">Credential retrieval order</a>) to set the region for local development, and rely on the default region provider chain to determine the region when running on AWS infrastructure. This greatly simplifies client creation and keeps your application portable.</p>
       
    
      <h2 id="region-selection-query-service">Checking for service availability in a Region</h2>
      <p>To see if a particular AWS service is available in a region, use the <code class="code">serviceMetadata</code> and <code class="code">region</code> method on the service that you’d like to check.</p>
      <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="java ">DynamoDbClient.serviceMetadata().regions().forEach(System.out::println);</code></pre>
      <p>See the <a href="http://docs.aws.amazon.com/sdk-for-java/latest/reference/software/amazon/awssdk/regions/Region.html">Region</a> class documentation for the regions you can specify, and use the endpoint prefix of the service to query.</p>
   <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./ec2-iam-roles.html">Configuring IAM roles for Amazon EC2</div><div id="next" class="next-link" accesskey="n" href="./lambda-optimize-starttime.html">Reducing SDK startup time for AWS Lambda</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=AWS SDK for Java&amp;topic_url=https://docs.aws.amazon.com/en_us/sdk-for-java/latest/developer-guide/region-selection.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=AWS SDK for Java&amp;topic_url=https://docs.aws.amazon.com/en_us/sdk-for-java/latest/developer-guide/region-selection.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>