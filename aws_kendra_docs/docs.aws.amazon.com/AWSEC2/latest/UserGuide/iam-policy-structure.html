<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Policy structure - Amazon Elastic Compute Cloud</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="iam-policy-structure" /><meta name="default_state" content="iam-policy-structure" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-policy-structure.html" /><meta name="description" content="Learn about the structure of an IAM policy to control access to Amazon EC2." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Elastic Compute Cloud" /><meta name="guide" content="User Guide for Linux Instances" /><meta name="abstract" content="Use Amazon EC2 to configure, launch, and manage virtual servers in the AWS cloud." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-policy-structure.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSEC2/latest/UserGuide/iam-policy-structure.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AWSEC2/latest/UserGuide/iam-policy-structure.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSEC2/latest/UserGuide/iam-policy-structure.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AWSEC2/latest/UserGuide/iam-policy-structure.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-policy-structure.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-policy-structure.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSEC2/latest/UserGuide/iam-policy-structure.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AWSEC2/latest/UserGuide/iam-policy-structure.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSEC2/latest/UserGuide/iam-policy-structure.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AWSEC2/latest/UserGuide/iam-policy-structure.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSEC2/latest/UserGuide/iam-policy-structure.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AWSEC2/latest/UserGuide/iam-policy-structure.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSEC2/latest/UserGuide/iam-policy-structure.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AWSEC2/latest/UserGuide/iam-policy-structure.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/iam-policy-structure.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AWSEC2/latest/UserGuide/iam-policy-structure.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSEC2/latest/UserGuide/iam-policy-structure.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AWSEC2/latest/UserGuide/iam-policy-structure.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AWSEC2/latest/UserGuide/iam-policy-structure.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AWSEC2/latest/UserGuide/iam-policy-structure.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-policy-structure.html" hreflang="x-default" /><meta name="feedback-item" content="EC2" /><meta name="this_doc_product" content="Amazon Elastic Compute Cloud" /><meta name="this_doc_guide" content="User Guide for Linux Instances" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'ec2'}"></script><meta id="panorama-serviceSubSection" value="User Guide for Linux Instances" /><meta id="panorama-serviceConsolePage" value="Policy structure" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Policy structure - Amazon Elastic Compute Cloud</title><meta name="pdf" content="/pdfs/AWSEC2/latest/UserGuide/ec2-ug.pdf#iam-policy-structure" /><meta name="github" content="https://github.com/awsdocs/amazon-ec2-user-guide/tree/master/doc_source/iam-policy-structure.md" /><meta name="rss" content="amazon-ec2-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=30" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=EC2&amp;topic_url=http://docs.aws.amazon.com/en_us/AWSEC2/latest/UserGuide/iam-policy-structure.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/AWSEC2/latest/UserGuide/iam-policy-structure.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/AWSEC2/latest/UserGuide/iam-policy-structure.html" /><meta name="keywords" content="EC2,Amazon EC2,EC2 instance,instance,VM,virtual machine" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon EC2",
        "item" : "https://docs.aws.amazon.com/ec2/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide for Linux Instances",
        "item" : "https://docs.aws.amazon.com/AWSEC2/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Security in Amazon EC2",
        "item" : "https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-security.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Identity and access management for Amazon EC2",
        "item" : "https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/security-iam.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "IAM policies for Amazon EC2",
        "item" : "https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-policies-for-amazon-ec2.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "Policy structure",
        "item" : "https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-policies-for-amazon-ec2.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/AWSEC2/latest/UserGuide/ec2-ug.pdf#iam-policy-structure" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a href="https://github.com/awsdocs/amazon-ec2-user-guide/tree/master/doc_source/iam-policy-structure.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/ec2/index.html">Amazon EC2</a><a href="concepts.html">User Guide for Linux Instances</a></div><div id="page-toc-src"><a href="#policy-syntax">Policy syntax</a><a href="#UsingWithEC2_Actions">Actions for Amazon EC2</a><a href="#ec2-supported-iam-actions-resources">Supported resource-level
						permissions for Amazon EC2 API actions</a><a href="#EC2_ARN_Format">Amazon Resource Names (ARNs) for Amazon EC2</a><a href="#amazon-ec2-keys">Condition keys for Amazon EC2</a><a href="#check-required-permissions">Check permissions</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="iam-policy-structure">Policy structure</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>The following topics explain the structure of an IAM policy.</p><div class="highlights" id="inline-topiclist"><h6>Contents</h6><ul><li><a href="#policy-syntax">Policy syntax</a></li><li><a href="#UsingWithEC2_Actions">Actions for Amazon EC2</a></li><li><a href="#ec2-supported-iam-actions-resources">Supported resource-level
						permissions for Amazon EC2 API actions</a></li><li><a href="#EC2_ARN_Format">Amazon Resource Names (ARNs) for Amazon EC2</a></li><li><a href="#amazon-ec2-keys">Condition keys for Amazon EC2</a></li><li><a href="#check-required-permissions">Check that users have the required
						permissions</a></li></ul></div>
				<h2 id="policy-syntax">Policy syntax</h2>
				<p>An IAM policy is a JSON document that consists of one or more statements.
					Each statement is structured as follows.</p>
				<pre class="programlisting"><div class="code-btn-container"></div><code class="json "><span>{</span>
  "Statement":[<span>{</span>
    "Effect":"<code class="replaceable">effect</code>",
    "Action":"<code class="replaceable">action</code>",
    "Resource":"<code class="replaceable">arn</code>",
    "Condition":<span>{</span>
      "<code class="replaceable">condition</code>":<span>{</span>
        "<code class="replaceable">key</code>":"<code class="replaceable">value</code>"
        }
      }
    }
  ]
}</code></pre>
				<p>There are various elements that make up a statement:</p>
				<div class="itemizedlist">
					 
					 
					 
					 
				<ul class="itemizedlist"><li class="listitem">
						<p><b>Effect:</b> The <em>effect</em> can be
								<code class="code">Allow</code> or <code class="code">Deny</code>. By default, users
							don't have permission to use resources and API actions, so all requests
							are denied. An explicit allow overrides the default. An explicit deny
							overrides any allows.</p>
					</li><li class="listitem">
						<p><b>Action</b>: The <em>action</em> is the
							specific API action for which you are granting or denying permission. To
							learn about specifying <em>action</em>, see <a href="#UsingWithEC2_Actions">Actions for Amazon EC2</a>. </p>
					</li><li class="listitem">
						<p><b>Resource</b>: The resource that's affected by the
							action. Some Amazon EC2 API actions allow you to include specific resources
							in your policy that can be created or modified by the action. You
							specify a resource using an Amazon Resource Name (ARN) or using the
							wildcard (*) to indicate that the statement applies to all resources.
							For more information, see <a href="#ec2-supported-iam-actions-resources">Supported resource-level
						permissions for Amazon EC2 API actions</a>. </p>
					</li><li class="listitem">
						<p><b>Condition</b>: Conditions are optional. They can be
							used to control when your policy is in effect. For more information
							about specifying conditions for Amazon EC2, see <a href="#amazon-ec2-keys">Condition keys for Amazon EC2</a>.</p>
					</li></ul></div>
				<p>For more information about policy requirements, see the <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies.html">IAM JSON policy reference</a> in 
					the <em>IAM User Guide</em>. For example IAM policy statements 
					for Amazon EC2, see <a href="./ExamplePolicies_EC2.html">Example policies for working with the AWS CLI or an AWS
      SDK</a>.
				</p>
			 
				<h2 id="UsingWithEC2_Actions">Actions for Amazon EC2</h2>
				<p>In an IAM policy statement, you can specify any API action from any service
					that supports IAM. For Amazon EC2, use the following prefix with the name of the
					API action: <code class="code">ec2:</code>. For example: <code class="code">ec2:RunInstances</code> and
						<code class="code">ec2:CreateImage</code>.</p>
				<p>To specify multiple actions in a single statement, separate them with commas
					as follows:</p>
				<pre class="programlisting"><div class="code-btn-container"></div><code class="json ">"Action": ["ec2:<em>action1</em>", "ec2:<em>action2</em>"]</code></pre>
				<p>You can also specify multiple actions using wildcards. For example, you can
					specify all actions whose name begins with the word "Describe" as
					follows:</p>
				<pre class="programlisting"><div class="code-btn-container"></div><code class="json ">"Action": "ec2:Describe*"</code></pre>
				<div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Currently, the Amazon EC2 Describe* API actions do not support resource-level
						permissions. For more information about resource-level permissions for Amazon EC2, see
							<a href="./iam-policies-for-amazon-ec2.html">IAM policies for Amazon EC2</a>.</p></div></div>
				<p>To specify all Amazon EC2 API actions, use the * wildcard as follows:</p>
				<pre class="programlisting"><div class="code-btn-container"></div><code class="json ">"Action": "ec2:*"</code></pre>
				<p>For a list of Amazon EC2 actions, see <a href="https://docs.aws.amazon.com/service-authorization/latest/reference/list_amazonec2.html#amazonec2-actions-as-permissions">Actions defined by Amazon EC2</a> in the
						<em>Service Authorization Reference</em>.</p>
			 
				<h2 id="ec2-supported-iam-actions-resources">Supported resource-level
						permissions for Amazon EC2 API actions</h2>
				<p><em>Resource-level permissions</em> refers to the ability to
					specify which resources users are allowed to perform actions on. Amazon EC2 has
					partial support for resource-level permissions. This means that for certain
					Amazon EC2 actions, you can control when users are allowed to use those actions based
					on conditions that have to be fulfilled, or specific resources that users are
					allowed to use. For example, you can grant users permissions to launch
					instances, but only of a specific type, and only using a specific AMI.</p>
				<p>To specify a resource in an IAM policy statement, use its Amazon Resource
					Name (ARN). For more information about specifying the ARN value, see <a href="#EC2_ARN_Format">Amazon Resource Names (ARNs) for Amazon EC2</a>. If an API action
					does not support individual ARNs, you must use a wildcard (*) to specify that
					all resources can be affected by the action. </p>
				<p>To see tables that identify which Amazon EC2 API actions support resource-level
					permissions, and the ARNs and condition keys that you can use in a policy, see
						<a href="https://docs.aws.amazon.com/service-authorization/latest/reference/list_amazonec2.html">Actions, resources, and condition keys for
						Amazon EC2</a>.</p>
				<p>Keep in mind that you can apply tag-based resource-level permissions in the
					IAM policies you use for Amazon EC2 API actions. This gives you better control over
					which resources a user can create, modify, or use. For more information, see
						<a href="./supported-iam-actions-tagging.html">Grant permission to tag resources
					during creation</a>. </p>
			 
				<h2 id="EC2_ARN_Format">Amazon Resource Names (ARNs) for Amazon EC2</h2>
				<p>Each IAM policy statement applies to the resources that you specify using
					their ARNs. </p>
				<p>An ARN has the following general syntax:</p>
				<pre class="programlisting"><div class="code-btn-container"></div><code class="json ">arn:aws:[<em>service</em>]:[<em>region</em>]:[<em>account-id</em>]:<em>resourceType</em>/<em>resourcePath</em></code></pre>
				<div class="variablelist">
					 
					 
					 
					 
					 
				<dl>
						<dt><span class="term"><em>service</em></span></dt>
						<dd>
							<p>The service (for example, <code class="code">ec2</code>).</p>
						</dd>
					 
						<dt><span class="term"><em>region</em></span></dt>
						<dd>
							<p>The Region for the resource (for example,
									<code class="code">us-east-1</code>).</p>
						</dd>
					 
						<dt><span class="term"><em>account-id</em></span></dt>
						<dd>
							<p>The AWS account ID, with no hyphens (for example,
									<code class="code">123456789012</code>).</p>
						</dd>
					 
						<dt><span class="term"><em>resourceType</em></span></dt>
						<dd>
							<p>The type of resource (for example, <code class="code">instance</code>).</p>
						</dd>
					 
						<dt><span class="term"><em>resourcePath</em></span></dt>
						<dd>
							<p>A path that identifies the resource. You can use the * wildcard in
								your paths.</p>
						</dd>
					</dl></div>
				<p>For example, you can indicate a specific instance
						(<code class="code">i-1234567890abcdef0</code>) in your statement using its ARN as
					follows. </p>
				<pre class="programlisting"><div class="code-btn-container"></div><code class="json ">"Resource": "arn:aws:ec2:us-east-1:123456789012:instance/i-1234567890abcdef0"</code></pre>
				<p>You can specify all instances that belong to a specific account by using the *
					wildcard as follows.</p>
				<pre class="programlisting"><div class="code-btn-container"></div><code class="json ">"Resource": "arn:aws:ec2:us-east-1:123456789012:instance/*"</code></pre>
				<p>You can also specify all Amazon EC2 resources that belong to a specific account by
					using the * wildcard as follows.</p>
				<pre class="programlisting"><div class="code-btn-container"></div><code class="json ">"Resource": "arn:aws:ec2:us-east-1:123456789012:*"</code></pre>
				<p>To specify all resources, or if a specific API action does not support ARNs,
					use the * wildcard in the <code class="code">Resource</code> element as follows.</p>
				<pre class="programlisting"><div class="code-btn-container"></div><code class="json ">"Resource": "*"</code></pre>
				<p>Many Amazon EC2 API actions involve multiple resources. For example, <code class="code">AttachVolume</code>
					attaches an Amazon EBS volume to an instance, so a user must have permissions to use
					the volume and the instance. To specify multiple resources in a single
					statement, separate their ARNs with commas, as follows.</p>
				<pre class="programlisting"><div class="code-btn-container"></div><code class="json ">"Resource": ["<code class="code" copy="true">arn1</code>", "<code class="code" copy="true">arn2</code>"]</code></pre>
				<p>For a list of ARNs for Amazon EC2 resources, see <a href="https://docs.aws.amazon.com/service-authorization/latest/reference/list_amazonec2.html#amazonec2-resources-for-iam-policies">Resource types defined by Amazon EC2</a>.</p>
			 
				<h2 id="amazon-ec2-keys">Condition keys for Amazon EC2</h2>
				<p>In a policy statement, you can optionally specify conditions that control when
					it is in effect. Each condition contains one or more key-value pairs. Condition
					keys are not case-sensitive. We've defined AWS global condition keys, plus
					additional service-specific condition keys.</p>
				<p>For a list of service-specific condition keys for Amazon EC2, see <a href="https://docs.aws.amazon.com/service-authorization/latest/reference/list_amazonec2.html#amazonec2-policy-keys">Condition keys for Amazon EC2</a>. Amazon EC2 also implements the AWS global
					condition keys. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_variables.html#policy-vars-infoallreqs">Information available in all requests</a> in the
						<em>IAM User Guide</em>. </p>
				<p>To use a condition key in your IAM policy, use the <code class="code">Condition</code>
					statement. For example, the following policy grants users permission to add and
					remove inbound and outbound rules for any security group. It uses the
						<code class="code">ec2:Vpc</code> condition key to specify that these actions can only be
					performed on security groups in a specific VPC.</p>
				<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
"Version": "2012-10-17",
  "Statement":[<span>{</span>
    "Effect":"Allow",
    "Action": [
       "ec2:AuthorizeSecurityGroupIngress",
       "ec2:AuthorizeSecurityGroupEgress",
       "ec2:RevokeSecurityGroupIngress",
       "ec2:RevokeSecurityGroupEgress"],
     "Resource": "arn:aws:ec2:<em>region</em>:<em>account</em>:security-group/*",
      "Condition": <span>{</span>
        "StringEquals": <span>{</span>
          "ec2:Vpc": "arn:aws:ec2:<em>region</em>:<em>account</em>:vpc/vpc-11223344556677889"
        }
      }
    }
  ]
}</code></pre>
				<p>If you specify multiple conditions, or multiple keys in a single condition, we
					evaluate them using a logical AND operation. If you specify a single condition
					with multiple values for one key, we evaluate the condition using a logical OR
					operation. For permissions to be granted, all conditions must be met.</p>
				<p>You can also use placeholders when you specify conditions. For more information, see
						<a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/PolicyVariables.html">IAM policy elements:
						Variables and tags</a> in the
					<em>IAM User Guide</em>.</p>
				<div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>Many condition keys are specific to a resource, and some API actions use
						multiple resources. If you write a policy with a condition key, use the
							<code class="code">Resource</code> element of the statement to specify the resource
						to which the condition key applies. If not, the policy may prevent users
						from performing the action at all, because the condition check fails for the
						resources to which the condition key does not apply. If you do not want to
						specify a resource, or if you've written the <code class="code">Action</code> element of
						your policy to include multiple API actions, then you must use the
							<code class="code">...IfExists</code> condition type to ensure that the condition key
						is ignored for resources that do not use it. For more information, see
							<a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements.html#Conditions_IfExists">...IfExists Conditions</a> in the
							<em>IAM User Guide</em>.</p></div></div>
				<p>All Amazon EC2 actions support the <code class="code">aws:RequestedRegion</code> and
						<code class="code">ec2:Region</code> condition keys. For more information, see <a href="./ExamplePolicies_EC2.html#iam-example-region">Example: Restrict access to a specific Region</a>.</p>
				
				 
					<h3 id="SourceInstanceARN"><code class="code">ec2:SourceInstanceARN</code> condition key</h3>
					<p>The <code class="code">ec2:SourceInstanceARN</code> condition key can be used for
						conditions that specify the ARN of the instance from which a request is
						made. This is an AWS global condition key and is not service-specific. For
						policy examples, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_examples_ec2_volumes-instance.html">Amazon EC2: Attach or detach volumes to an EC2 instance</a> and <a href="./ExamplePolicies_EC2.html#iam-example-source-instance">Example: Allow a specific instance to view
                resources in other AWS services</a>. The
							<code class="code">ec2:SourceInstanceARN</code> key cannot be used as a variable to
						populate the ARN for the <code class="code">Resource</code> element in a
						statement.</p>
					<p>For example policy statements for Amazon EC2, see <a href="./ExamplePolicies_EC2.html">Example policies for working with the AWS CLI or an AWS
      SDK</a>.</p>
				 
				
				 
					<h3 id="attribute-key"><code class="code">ec2:Attribute</code> condition key</h3>
					<p>The <code class="code">ec2:Attribute</code> condition key can be used for conditions that filter access by 
						an attribute of a resource. The condition key supports only properties that are of a primitive 
						data type, such as a string or integer, or complex objects that have only a <code class="code">Value</code> 
						property, such as the <b>Description</b> object of the 
						<a href="https://docs.aws.amazon.com/AWSEC2/latest/APIReference/API_AttributeValue.html">
							ModifyImageAttribute</a> API action.</p>
					
					<p>For example, the following policy uses the <code class="code">ec2:Attribute/Description</code> condition 
						key to filter access by the complex <b>Description</b> object of
						the <b>ModifyImageAttribute</b> API action. The condition key allows 
						only requests that modify an image's description to either <code class="code">Production</code> or 
						<code class="code">Development</code>.
						</p>
					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Action": "ec2:ModifyImageAttribute",
      "Resource": "arn:aws:ec2:us-east-1::image/ami-*",
      "Condition": <span>{</span>
        "StringEquals": <span>{</span>
          "ec2:Attribute/Description": [
            "Production",
            "Development"
          ]
        }
      }
    }
  ]
}</code></pre>
					<p>The following example policy uses the <code class="code">ec2:Attribute</code> condition key to filter access 
						by the primitive <b>Attribute</b> property of the <b>
							ModifyImageAttribute</b> API action. The condition key denies all requests that attempt 
						to modify an image's description.</p>
					<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Effect": "Deny",
      "Action": "ec2:ModifyImageAttribute",
      "Resource": "arn:aws:ec2:us-east-1::image/ami-*",
      "Condition": <span>{</span>
        "StringEquals": <span>{</span>
          "ec2:Attribute": "Description"
        }
      }
    }
  ]
}</code></pre>
					
				 
				
			 
				<h2 id="check-required-permissions">Check that users have the required
						permissions</h2>
				<p>After you've created an IAM policy, we recommend that you check whether it
					grants users the permissions to use the particular API actions and resources
					they need before you put the policy into production.</p>
				<p>First, create a user for testing purposes, and then attach the IAM policy that you
					created to the test user. Then, make a request as the test user.</p>
				<p>If the Amazon EC2 action that you are testing creates or modifies a resource, you
					should make the request using the <code class="code">DryRun</code> parameter (or run the
					AWS CLI command with the <code class="code">--dry-run</code> option). In this case, the call
					completes the authorization check, but does not complete the operation. For
					example, you can check whether the user can terminate a particular instance
					without actually terminating it. If the test user has the required permissions,
					the request returns <code class="code">DryRunOperation</code>; otherwise, it returns
						<code class="code">UnauthorizedOperation</code>.</p>
				<p>If the policy doesn't grant the user the permissions that you expected, or is
					overly permissive, you can adjust the policy as needed and retest until you get
					the desired results. </p>
				<div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>It can take several minutes for policy changes to propagate before they
						take effect. Therefore, we recommend that you allow five minutes to pass
						before you test your policy updates.</p></div></div>
				<p>If an authorization check fails, the request returns an encoded message with
					diagnostic information. You can decode the message using the
						<code class="code">DecodeAuthorizationMessage</code> action. For more information, see
						<a href="https://docs.aws.amazon.com/STS/latest/APIReference/API_DecodeAuthorizationMessage.html">DecodeAuthorizationMessage</a> in the
						<em>AWS Security Token Service API Reference</em>, and <a href="https://docs.aws.amazon.com/cli/latest/reference/sts/decode-authorization-message.html">decode-authorization-message</a> in the
						<em>AWS CLI Command Reference</em>.</p>
			<awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./iam-policies-for-amazon-ec2.html">IAM policies</div><div id="next" class="next-link" accesskey="n" href="./supported-iam-actions-tagging.html">Tag resources during creation</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=EC2&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSEC2/latest/UserGuide/iam-policy-structure.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=EC2&amp;topic_url=https://docs.aws.amazon.com/en_us/AWSEC2/latest/UserGuide/iam-policy-structure.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>