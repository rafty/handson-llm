<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="fr-FR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Amazon KendraUn classement intelligent pour une gestion autonome OpenSearch - Amazon Kendra</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="opensearch-rerank" /><meta name="default_state" content="opensearch-rerank" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/kendra/latest/dg/opensearch-rerank.html" /><meta name="description" content="Comment configurer et utiliser le pluginAmazon Kendra Intelligent Ranking pour OpenSearch (autogéré)." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Kendra" /><meta name="guide" content="Guide du développeur" /><meta name="abstract" content="Propose une présentation conceptuelle de Amazon Kendra. Découvrez lesAmazon Kendra fonctionnalités et commencez à indexer vos documents à l'aide de la console, de l'interface de ligne de commande et de l'API." /><meta name="guide-locale" content="fr_fr" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/kendra/latest/dg/opensearch-rerank.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/kendra/latest/dg/opensearch-rerank.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/kendra/latest/dg/opensearch-rerank.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/kendra/latest/dg/opensearch-rerank.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/kendra/latest/dg/opensearch-rerank.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/kendra/latest/dg/opensearch-rerank.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/kendra/latest/dg/opensearch-rerank.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/kendra/latest/dg/opensearch-rerank.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/kendra/latest/dg/opensearch-rerank.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/kendra/latest/dg/opensearch-rerank.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/kendra/latest/dg/opensearch-rerank.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/kendra/latest/dg/opensearch-rerank.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/kendra/latest/dg/opensearch-rerank.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/kendra/latest/dg/opensearch-rerank.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/kendra/latest/dg/opensearch-rerank.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/kendra/latest/dg/opensearch-rerank.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/kendra/latest/dg/opensearch-rerank.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/kendra/latest/dg/opensearch-rerank.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/kendra/latest/dg/opensearch-rerank.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/kendra/latest/dg/opensearch-rerank.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/kendra/latest/dg/opensearch-rerank.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/kendra/latest/dg/opensearch-rerank.html" hreflang="x-default" /><meta name="feedback-item" content="Kendra" /><meta name="this_doc_product" content="Amazon Kendra" /><meta name="this_doc_guide" content="Guide du développeur" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'kendra'}"></script><meta id="panorama-serviceSubSection" value="Guide du développeur" /><meta id="panorama-serviceConsolePage" value="Amazon KendraUn classement intelligent pour une gestion autonome OpenSearch" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Amazon KendraUn classement intelligent pour une gestion autonome OpenSearch - Amazon Kendra</title><meta name="pdf" content="kendra-dg.pdf#opensearch-rerank" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Kendra&amp;topic_url=http://docs.aws.amazon.com/fr_fr/kendra/latest/dg/opensearch-rerank.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/fr_fr/kendra/latest/dg/opensearch-rerank.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/fr_fr/kendra/latest/dg/opensearch-rerank.html" /><meta name="keywords" content="Kendra,Amazon Kendra,search,recherche intelligente,langage naturel,index,question,mot-clé,source de données,connector,FAQ,question fréquemment posée,Recherche sémantique,Classement de recherche intelligent,classement de recherche intelligent" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Kendra",
        "item" : "https://docs.aws.amazon.com/kendra/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guide du développeur",
        "item" : "https://docs.aws.amazon.com/fr_fr/kendra/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Amazon KendraClassement intelligent",
        "item" : "https://docs.aws.amazon.com/fr_fr/kendra/latest/dg/intelligent-rerank.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Amazon KendraUn classement intelligent pour une gestion autonome OpenSearch",
        "item" : "https://docs.aws.amazon.com/fr_fr/kendra/latest/dg/intelligent-rerank.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="kendra-dg.pdf#opensearch-rerank" target="_blank" rel="noopener noreferrer" title="Ouvrir le PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/kendra/index.html">Amazon Kendra</a><a href="what-is-kendra.html">Guide du développeur</a></div><div id="page-toc-src"><a href="#how-opensearch-rerank-plugin-works">Comment fonctionne le plugin de recherche intelligent</a><a href="#setup-opensearch-rerank-plugin">Installation du plugin de recherche intelligent</a><a href="#interact-opensearch-rerank-plugin">Interaction avec le plugin de recherche intelligent</a><a href="#compare-opensearch-rerank-plugin">Comparaison OpenSearch  des résultats avec lesAmazon Kendra résultats</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Les traductions sont fournies par des outils de traduction automatique. En cas de conflit entre le contenu d'une traduction et celui de la version originale en anglais, la version anglaise prévaudra.</p></awsui-alert><h1 class="topictitle" id="opensearch-rerank">Amazon KendraUn classement intelligent pour une gestion autonome OpenSearch</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Vous pouvez tirerAmazon Kendra parti des fonctionnalités de recherche sémantique de ce service de <a href="https://opensearch.org/docs/latest" rel="noopener noreferrer" target="_blank"><span>OpenSearch</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>recherche open source autogéré basé sur la licence Apache 2.0 pour améliorer les résultats de recherche. Le pluginAmazon Kendra Intelligent Ranking reclasse sémantiquement OpenSearch les résultats en utilisantAmazon Kendra. Pour ce faire, il comprend la signification et le contexte d'une requête de recherche à l'aide de champs spécifiques, tels que le corps ou le titre du document, à partir des résultats de OpenSearch  recherche par défaut.</p><p>Prenons, par exemple, cette requête : « discours principal ». Étant donné que le terme « adresse » a plusieurs significations,Amazon Kendra vous pouvez déduire le sens de la requête pour renvoyer des informations pertinentes correspondant à la signification souhaitée. Dans ce contexte, il s'agit d'un discours liminaire de conférence. Un service de recherche plus simple pourrait ne pas prendre en compte l'intention et pourrait renvoyer des résultats pour une adresse sur Main Street, par exemple.</p><p>Le plugin Intelligent Ranking pour OpenSearch  est disponible pour les versions OpenSearch  (autogérées) 2.4.0 et ultérieures. Vous pouvez installer le plugin à l'aide d'un script Bash de démarrage rapide pour créer une nouvelle image Docker de OpenSearch  avec le plugin Intelligent Ranking inclus. Vous<a href="#setup-opensearch-rerank-plugin">Installation du plugin de recherche intelligent</a> pouvez voir : il s'agit d'un exemple de configuration qui vous permettra d'être rapidement opérationnel.</p>
        <h2 id="how-opensearch-rerank-plugin-works">Comment fonctionne le plugin de recherche intelligent</h2>
        <p>Le processus global du plugin Intelligent Ranking pour OpenSearch  (autogéré) est le suivant :</p>
        <div class="orderedlist">
             
             
             
             
             
        <ol><li>
                <p>Un OpenSearch  utilisateur émet une requête et OpenSearch  fournit une réponse à la requête ou une liste de documents pertinents pour la requête.</p>
            </li><li>
                <p>Le plugin Intelligent Ranking prend la réponse à la requête et extrait les informations des documents.</p>
            </li><li>
                <p>Le plugin Intelligent Ranking appelle l'API <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_Ranking_Rescore.html">Rescore</a> d'Amazon KendraIntelligent Ranking.</p>
            </li><li>
                <p>L'<code class="code">Rescore</code>API prend les informations extraites des documents et reclasse sémantiquement les résultats de recherche.</p>
            </li><li>
                <p>L'<code class="code">Rescore</code>API renvoie les résultats de recherche reclassés au plugin. Le plugin réorganise les résultats de recherche dans la réponse OpenSearch  de recherche pour refléter le nouveau classement sémantique.</p>
            </li></ol></div>
        <p>Le plugin Intelligent Ranking reclasse les résultats à l'aide des champs « corps » et « titre ». Ces champs de plug-in peuvent être mappés aux champs de votre OpenSearch  index qui correspondent le mieux à la définition du corps et du titre d'un document. Par exemple, si votre index contient des chapitres d'un livre avec des champs tels que « chapter_heading » et « chapter_contents », vous pouvez associer le premier à « title » et le second à « body » pour obtenir les meilleurs résultats.</p>
     
        <h2 id="setup-opensearch-rerank-plugin">Installation du plugin de recherche intelligent</h2>
        <p>Ce qui suit explique comment configurer rapidement OpenSearch  (autogestion) le plugin Intelligent Ranking.</p>
        <div class="procedure"><h6>Configuration OpenSearch  (autogérée) avec le plugin Intelligent Ranking (configuration rapide)</h6><p>Si vous utilisez déjà une image Docker<code class="code">opensearch:2.4.0</code>, vous pouvez utiliser ce <a href="https://docs.aws.amazon.com/kendra/latest/dg/opensearch-rerank.html#dockerfile-build-opensearch-example">Dockerfile</a> pour créer une nouvelle image de la OpenSearch  version 2.4.0 avec le plugin Intelligent Ranking. Vous incluez un conteneur pour la nouvelle image dans votre fichier <a href="https://docs.aws.amazon.com/kendra/latest/dg/opensearch-rerank.html#docker-compose-opensearch-example">docker-compose.yml</a> ou opensearch.yml. Vous devez également inclure l'ID du plan d'exécution du rescore généré lors de la création d'un plan d'exécution du rescore, ainsi que les informations relatives à votre région et à votre point de terminaison. Reportez-vous à l'étape 2 pour créer un plan d'exécution de rescore.</p><p>Si vous avez déjà téléchargé une version de l'image<code class="code">opensearch</code> Docker antérieure à la version 2.4.0, vous devez utiliser l'image Docker<code class="code">opensearch:2.4.0</code> ou une version ultérieure et créer une nouvelle image à l'aide du plugin Intelligent Ranking inclus.</p><ol><li>
                <p>Téléchargez et installez <a href="https://docs.docker.com/get-docker/" rel="noopener noreferrer" target="_blank"><span>Docker Desktop</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> pour votre système d'exploitation. Docker Desktop inclut Docker Compose et Docker Engine. Il est recommandé de vérifier si votre ordinateur répond à la configuration requise mentionnée dans les détails d'installation de Docker.</p>
                <p>Vous pouvez également augmenter vos besoins en matière d'utilisation de la mémoire dans les paramètres de votre bureau Docker. Vous êtes responsable des exigences d'utilisation de Docker en dehors des limites d'utilisation librement disponibles pour les services Docker. Voir <a href="https://docs.docker.com/subscription/" rel="noopener noreferrer" target="_blank"><span>Abonnements Docker</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
                <p>Vérifiez que l'état de Docker Desktop est « en cours d'exécution ».</p>
            </li><li>
                <p>ProvisionnezAmazon Kendra un classement intelligent et vos exigences en matière <a href="https://docs.aws.amazon.com/kendra/latest/dg/adjusting-capacity.html">de capacité</a>. Une fois que vous avez configuré le classementAmazon Kendra intelligent, vous êtes facturé toutes les heures en fonction des unités de capacité que vous avez définies. Consultez les <a href="http://aws.amazon.com/kendra/intelligent-ranking-pricing/" rel="noopener noreferrer" target="_blank"><span>informations sur le niveau gratuit et les prix</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
                <p>Vous utilisez l'<a href="https://docs.aws.amazon.com/kendra/latest/dg/API_Ranking_CreateRescoreExecutionPlan.html">CreateRescoreExecutionPlan</a>API pour provisionner le<code class="code">Rescore API</code>. Si vous n'avez pas besoin de plus d'unités de capacité que l'unité par défaut, n'ajoutez pas d'unités supplémentaires et ne donnez qu'un nom à votre plan d'exécution du rescore. Vous pouvez également mettre à jour vos exigences en matière de capacité à l'aide de l'<a href="https://docs.aws.amazon.com/kendra/latest/dg/API_Ranking_UpdateRescoreExecutionPlan.html">UpdateRescoreExecutionPlan</a>API. Pour plus d'informations, consultez la section <a href="https://docs.aws.amazon.com/kendra/latest/dg/search-service-rerank.html">Classement sémantique des résultats d'un service de recherche</a>.</p>
                <p>Vous pouvez éventuellement passer à l'étape 3 pour créer un plan d'exécution de rescore par défaut lorsque vous exécutez le script Bash de démarrage rapide.</p>
                <p>Notez pour l'étape 4 l'ID du plan d'exécution du rescore inclus dans la réponse.</p>
                <awsdocs-tabs><dl style="display: none">
                    <dt>CLI</dt><dd tab-id="cli">
                            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws kendra-ranking create-rescore-execution-plan \
  --name MyRescoreExecutionPlan \ 
  --capacity-units '<span>{</span>"RescoreCapacityUnits":&lt;integer number of additional capacity units&gt;}'
 
Response:
 
<span>{</span>
    "Id": "&lt;rescore execution plan ID&gt;",
    "Arn": "arn:aws:kendra-ranking:&lt;region&gt;:&lt;account-id&gt;:rescore-execution-plan/&lt;rescore-execution-plan-id&gt;"
}</code></pre>
                        </dd>
                    <dt>Python</dt><dd tab-id="python">
                            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="python ">import boto3
from botocore.exceptions import ClientError
import pprint
import time

kendra_ranking = boto3.client("kendra-ranking")

print("Create a rescore execution plan.")

# Provide a name for the rescore execution plan
name = "MyRescoreExecutionPlan"
# Set your required additional capacity units
# Don't set capacity units if you don't require more than 1 unit given by default
capacity_units = 1

try:
    rescore_execution_plan_response = kendra_ranking.create_rescore_execution_plan(
        Name = name,
        CapacityUnits = <span>{</span>"RescoreCapacityUnits":capacity_units}
    )

    pprint.pprint(rescore_execution_plan_response)

    rescore_execution_plan_id = rescore_execution_plan_response["Id"]

    print("Wait for Amazon Kendra to create the rescore execution plan.")

    while True:
        # Get the details of the rescore execution plan, such as the status
        rescore_execution_plan_description = kendra_ranking.describe_rescore_execution_plan(
            Id = rescore_execution_plan_id
        )
        # When status is not CREATING quit.
        status = rescore_execution_plan_description["Status"]
        print(" Creating rescore execution plan. Status: "+status)
        time.sleep(60)
        if status != "CREATING":
            break

except ClientError as e:
        print("%s" % e)

print("Program ends.")</code></pre>
                        </dd>
                </dl></awsdocs-tabs>
            </li><li>
                <p>Téléchargez le <a href="https://github.com/opensearch-project/search-processor/tree/main/helpers" rel="noopener noreferrer" target="_blank"><span>script Bash de démarrage rapide correspondant</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> GitHub  à votre version de en OpenSearch  sélectionnant la branche de version dans la liste déroulante de la branche principale.</p>
            </li><li>
                <p>Ouvrez votre terminal et dans le répertoire du script Bash, exécutez la commande suivante.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">bash search_processing_kendra_quickstart.sh -p &lt;execution-plan-id&gt; -r &lt;region&gt;</code></pre>
                <p>Lorsque vous exécutez cette commande, vous fournissez l'ID du plan d'exécution du rescore que vous avez noté à l'étape 2 lorsque vous avez configuréAmazon Kendra Intelligent Ranking, ainsi que les informations relatives à votre région. Vous pouvez éventuellement configurer le classementAmazon Kendra intelligent à l'aide de l'<code class="code">--create-execution-plan</code>option. Cela crée un plan d'exécution du rescore avec un nom et une capacité par défaut. Si lesAWS informations d'identification ne peuvent être obtenues à partir des variables d'environnement, du profil par défaut ou de l'Amazon EC2instance, fournissez vos informations d'identification à l'aide de l'<code class="code">--profile</code>option.</p>
                <p>Pour ne pas perdre votre index lorsque le conteneur éphémère par défaut est supprimé, vous pouvez conserver votre index d'une exécution à l'autre en fournissant le nom du volume de données à l'aide de l'<code class="code">--volume-name</code>option. Si vous avez déjà créé un index, vous pouvez spécifier le volume dans votre fichier docker-compose.yml ou opensearch.yml.</p>
                <p>Ce script utilise des images Docker OpenSearch  et des OpenSearch  tableaux de bord utilisant la version que vous avez sélectionnée dans le GitHub  référentiel pour le script. Il télécharge un fichier zip pour le plugin Intelligent Ranking et génère une<code class="code">Dockerfile</code> nouvelle image Docker OpenSearch  incluant le plugin. Il crée également un fichier <a href="https://docs.aws.amazon.com/kendra/latest/dg/opensearch-rerank.html#docker-compose-opensearch-example">docker-compose.yml</a> qui inclut des conteneurs pour OpenSearch  le plugin Intelligent Ranking et les OpenSearch  tableaux de bord. Le script ajoute l'ID de votre plan d'exécution Rescore, les informations de région et le point de terminaison (utilise la région) au fichier docker-compose.yml. Le script s'exécute ensuite<code class="code">docker-compose up</code> pour démarrer les conteneurs OpenSearch  avec le classement intelligent inclus et les OpenSearch  tableaux de bord. Pour arrêter les conteneurs sans les retirer, exécutez<code class="code">docker-compose stop</code>. Pour retirer les conteneurs, exécutez<code class="code">docker-compose down</code>. Pour conserver vos volumes intacts, <b>ne les exécutez pas</b><code class="code">docker-compose down -v</code>.</p>
            </li></ol></div>
         
            <h3 id="docker-compose-opensearch-example">Exemple de docker-compose.yml</h3>
            <p>Exemple de fichier docker-compose.yml utilisant la OpenSearch  version 2.4.0 ou ultérieure avec le plugin Intelligent Ranking et OpenSearch  Dashboards 2.4.0 ou version ultérieure.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">version: '3'
networks:
  opensearch-net:
volumes: 
  &lt;volume-name&gt;:
services:
  opensearch-node:
    image: &lt;Docker image tag name of OpenSearch with Intelligent Ranking plugin&gt;
    container_name: opensearch-node
    environment: 
      - cluster.name=opensearch-cluster
      - node.name=opensearch-node
      - discovery.type=single-node
      - kendra_intelligent_ranking.service.endpoint=https://kendra-ranking.&lt;region&gt;.api.aws
      - kendra_intelligent_ranking.service.region=&lt;region&gt;
      - kendra_intelligent_ranking.service.execution_plan_id=&lt;rescore-execution-plan-id&gt;
    ulimits:
      memlock:
        soft: -1
        hard: -1
      nofile:
        soft: 65536
        hard: 65536
    ports:
      - 9200:9200
      - 9600:9600
    networks:
      - opensearch-net
  volumes:
    &lt;docker-volume-name&gt;:/usr/share/opensearch/data 
  opensearch-dashboard:
   image: opensearchproject/opensearch-dashboards:&lt;your-version&gt;
   container_name: opensearch-dashboards
   ports:
     - 5601:5601
   environment:
     OPENSEARCH_HOSTS: '["https://opensearch-node:9200"]'
   networks:
     - opensearch-net</code></pre>
         
         
            <h3 id="dockerfile-build-opensearch-example">Exemple de Dockerfile et de création d'une image</h3>
            <p>Un exemple d'utilisation de<code class="code">Dockerfile</code> la OpenSearch  version 2.4.0 ou ultérieure avec le plugin Intelligent Ranking.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">FROM opensearchproject/opensearch:&lt;your-version&gt;
RUN /usr/share/opensearch/bin/opensearch-plugin install --batch  https://github.com/opensearch-project/search-processor/releases/download/&lt;your-version&gt;/search-processor.zip</code></pre>
            <p>Création d'une image Docker pour OpenSearch  avec le plugin Intelligent Ranking.</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">docker build --tag=&lt;Docker image tag name of OpenSearch with Intelligent Ranking plugin&gt;</code></pre>
         
     
        <h2 id="interact-opensearch-rerank-plugin">Interaction avec le plugin de recherche intelligent</h2>
        <p>Une fois que vous avez configuré OpenSearch  (autogéré) le plugin Intelligent Ranking, vous pouvez interagir avec le plugin à l'aide de commandes curl ou de bibliothèques OpenSearch  clientes. Les informations d'identification par défaut pour accéder OpenSearch  au plugin Intelligent Ranking sont le nom d'utilisateur « admin » et le mot de passe « admin ».</p>
        <p>Pour appliquer les paramètres du plugin Intelligent Ranking à un OpenSearch  index, procédez comme suit :</p>
        <awsdocs-tabs><dl style="display: none">
            <dt>Curl</dt><dd tab-id="curl">
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">curl -XPUT "https://localhost:9200/&lt;your-docs-index&gt;/_settings" -u 'admin:admin' --insecure -H 'Content-Type: application/json' -d'
<span>{</span>
  "index": <span>{</span>
    "plugin" : <span>{</span>
      "searchrelevance" : <span>{</span>
        "result_transformer" : <span>{</span>
          "kendra_intelligent_ranking": <span>{</span>
              "order": 1,
              "properties": <span>{</span>
                "title_field": "title_field_name_here",
                "body_field": "body_field_name_here"
              }
          }
        }
      }
    }
  }
}
'</code></pre>
                </dd>
            <dt>Python</dt><dd tab-id="python">
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="python ">pip install opensearch-py

from opensearchpy import OpenSearch
host = 'localhost'
port = 9200
auth = ('admin', 'admin')

client = OpenSearch(
    hosts = [<span>{</span>'host': host, 'port': port}],
    http_compress = True, # enables gzip compression for request bodies
    http_auth = auth,
    # client_cert = client_cert_path,
    # client_key = client_key_path,
    use_ssl = True,
    verify_certs = False,
    ssl_assert_hostname = False,
    ssl_show_warn = False,
    ca_certs = ca_certs_path
)

setting_body = <span>{</span>
    "index": <span>{</span>
        "plugin" : <span>{</span>
            "searchrelevance" : <span>{</span>
                "result_transformer" : <span>{</span>
                    "kendra_intelligent_ranking": <span>{</span>
                            "order": 1,
                            "properties": <span>{</span>
                                "title_field": "title_field_name_here",
                                "body_field": "body_field_name_here"
                            }
                    }
                }
            }
        }
    }
}

response = client.indices.put_settings(index_name, body=setting_body)</code></pre>
                </dd>
        </dl></awsdocs-tabs>
        <p>Vous devez inclure le nom du champ de texte principal que vous souhaitez utiliser pour effectuer un nouveau classement, tel que le corps du document ou le champ de contenu du document. Vous pouvez également inclure d'autres champs de texte, tels que le titre ou le résumé du document.</p>
        <p>Vous pouvez maintenant émettre n'importe quelle requête et les résultats sont classés à l'aide du plugin Intelligent Ranking.</p>
        <awsdocs-tabs><dl style="display: none">
            <dt>Curl</dt><dd tab-id="curl">
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">curl -XGET "https://localhost:9200/&lt;your-docs-index&gt;/_search?pretty" -u 'admin:admin' --insecure -H 'Content-Type: application/json' -d'
<span>{</span>
  "query" : <span>{</span>
    "match" : <span>{</span>
      "body_field_name_here": "intelligent systems"
    }
  }
}
'</code></pre>
                </dd>
            <dt>Python</dt><dd tab-id="python">
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="python ">from opensearchpy import OpenSearch
host = 'localhost'
port = 9200
auth = ('admin', 'admin')

client = OpenSearch(
    hosts = [<span>{</span>'host': host, 'port': port}],
    http_compress = True, # enables gzip compression for request bodies
    http_auth = auth,
    # client_cert = client_cert_path,
    # client_key = client_key_path,
    use_ssl = True,
    verify_certs = False,
    ssl_assert_hostname = False,
    ssl_show_warn = False,
    ca_certs = ca_certs_path
)

query = <span>{</span>
  'size': 10,
  "query" : <span>{</span>
    "match" : <span>{</span>
      "body_field_name_here": "intelligent systems"
    }
  }
}

response = client.search(
    body = query,
    index = index_name
)

print('\nSearch results:')
print(response)</code></pre>
                </dd>
        </dl></awsdocs-tabs>
        <p>Pour supprimer les paramètres du plugin Intelligent Ranking pour un OpenSearch  index, procédez comme suit :</p>
        <awsdocs-tabs><dl style="display: none">
            <dt>Curl</dt><dd tab-id="curl">
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">curl -XPUT "http://localhost:9200/&lt;your-docs-index&gt;/_settings" -H 'Content-Type: application/json' -d'
<span>{</span>
  "index": <span>{</span>
    "plugin": <span>{</span>
      "searchrelevance": <span>{</span>
        "result_transformer": <span>{</span>
          "kendra_intelligent_ranking.*": null
        }
      }
    }
  }
}
'</code></pre>
                </dd>
            <dt>Python</dt><dd tab-id="python">
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="python ">from opensearchpy import OpenSearch
host = 'localhost'
port = 9200
auth = ('admin', 'admin')

client = OpenSearch(
    hosts = [<span>{</span>'host': host, 'port': port}],
    http_compress = True, # enables gzip compression for request bodies
    http_auth = auth,
    # client_cert = client_cert_path,
    # client_key = client_key_path,
    use_ssl = True,
    verify_certs = False,
    ssl_assert_hostname = False,
    ssl_show_warn = False,
    ca_certs = ca_certs_path
)

setting_body = <span>{</span>
  "index": <span>{</span>
    "plugin": <span>{</span>
      "searchrelevance": <span>{</span>
        "result_transformer": <span>{</span>
          "kendra_intelligent_ranking.*": null
        }
      }
    }
  }
}

response = client.indices.put_settings(index_name, body=setting_body)</code></pre>
                </dd>
        </dl></awsdocs-tabs>
        <p>Pour tester le plugin Intelligent Ranking sur une certaine requête ou pour tester sur certains champs de corps et de titre :</p>
        <awsdocs-tabs><dl style="display: none">
            <dt>Curl</dt><dd tab-id="curl">
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">curl -XGET "https://localhost:9200/&lt;your-docs-index&gt;/_search?pretty" -u 'admin:admin' --insecure -H 'Content-Type: application/json' -d'
<span>{</span>
  "query": <span>{</span>
    "multi-match": <span>{</span>
      "query": "intelligent systems",
      "fields": ["body_field_name_here", "title_field_name_here"]
    }
  },
  "size": 25,
  "ext": <span>{</span>
    "search_configuration": <span>{</span>
      "result_transformer": <span>{</span>
        "kendra_intelligent_ranking": <span>{</span>
          "order": 1,
          "properties": <span>{</span>
            "title_field": "title_field_name_here",
            "body_field": "body_field_name_here"
          }
        }
      }
    }
  }
}
'</code></pre>
                </dd>
            <dt>Python</dt><dd tab-id="python">
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="python ">from opensearchpy import OpenSearch
host = 'localhost'
port = 9200
auth = ('admin', 'admin')

client = OpenSearch(
    hosts = [<span>{</span>'host': host, 'port': port}],
    http_compress = True, # enables gzip compression for request bodies
    http_auth = auth,
    # client_cert = client_cert_path,
    # client_key = client_key_path,
    use_ssl = True,
    verify_certs = False,
    ssl_assert_hostname = False,
    ssl_show_warn = False,
    ca_certs = ca_certs_path
)

# Index settings null for kendra_intelligent_ranking

query = <span>{</span>
  "query": <span>{</span>
    "multi_match": <span>{</span>
      "query": "intelligent systems",
      "fields": ["body_field_name_here", "title_field_name_here"] 
    }
  },
  "size": 25,
  "ext": <span>{</span>
    "search_configuration": <span>{</span>
      "result_transformer": <span>{</span>
        "kendra_intelligent_ranking": <span>{</span>
          "order": 1,
          "properties": <span>{</span>
            "title_field": "title_field_name_here",
            "body_field": "body_field_name_here"
          }
        }
      }
    }
  }
}

response = client.search(
    body = query,
    index = index_name
)

print('\nSearch results:')
print(response)</code></pre>
                </dd>
        </dl></awsdocs-tabs>
     
        <h2 id="compare-opensearch-rerank-plugin">Comparaison OpenSearch  des résultats avec lesAmazon Kendra résultats</h2>
        <p>Vous pouvez comparer les résultats classés side-by-side OpenSearch  (autogérés) avec lesAmazon Kendra résultats reclassés.  OpenSearch Les versions 2.4.0 et ultérieures de Dashboards side-by-side  proposent des résultats qui vous permettent de comparer le OpenSearch  classement des documents à la manière dontAmazon Kendra le plugin classe les documents pour une requête de recherche.</p>
        <p>Avant de pouvoir comparer les résultats OpenSearch  classés à des résultatsAmazon Kendra reclassés, assurez-vous que vos OpenSearch  tableaux de bord sont soutenus par un OpenSearch  serveur doté du plugin Intelligent Ranking. Vous pouvez configurer cela à l'aide de Docker et d'un script Bash de démarrage rapide. Consultez <a href="#setup-opensearch-rerank-plugin">Installation du plugin de recherche intelligent</a>.</p>
        <p>Ce qui suit explique comment comparer OpenSearch  etAmazon Kendra rechercher des résultats dans OpenSearch  des tableaux de bord. Pour de plus amples d'informations, consultez <a href="https://opensearch.org/docs/latest/search-plugins/search-relevance" rel="noopener noreferrer" target="_blank"><span>la documentationOpenSearch </span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
        <div class="procedure"><h6>Comparaison des résultats de recherche dans les OpenSearch  tableaux de bord</h6><ol><li>
                <p>Ouvrez http://localhost:5601 et connectez-vous à OpenSearch  Dashboards. Les informations d'identification par défaut sont le nom d'utilisateur « admin » et le mot de passe « admin ».</p>
            </li><li>
                <p>Sélectionnez <b>Search Relevance</b> dans les OpenSearch  plugins du menu de navigation.</p>
            </li><li>
                <p>Entrez le texte de recherche dans la barre de recherche.</p>
            </li><li>
                <p>Sélectionnez votre index pour la <b>requête 1</b> et entrez une requête dans le DSL de OpenSearch  requête. Vous pouvez utiliser la<code class="code">%SearchText%</code> variable pour faire référence au texte de recherche que vous avez saisi dans la barre de recherche. Pour un exemple de cette requête, consultez <a href="https://opensearch.org/docs/latest/search-plugins/search-relevance" rel="noopener noreferrer" target="_blank"><span>OpenSearch la documentation</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. Les résultats renvoyés pour cette requête sont les OpenSearch  résultats obtenus sans utiliser le plugin Intelligent Ranking.</p>
            </li><li>
                <p>Sélectionnez le même index pour la <b>requête 2</b> et entrez la même requête dans le DSL de la OpenSearch  requête. De plus, incluez l'extension avec<code class="code">kendra_intelligent_ranking</code> et spécifiez l'extension obligatoire<code class="code">body_field</code> pour le classement. Vous pouvez également spécifier le champ de titre, mais le champ de corps est obligatoire. Pour un exemple de cette requête, consultez <a href="https://opensearch.org/docs/latest/search-plugins/search-relevance" rel="noopener noreferrer" target="_blank"><span>OpenSearch la documentation</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. Les résultats renvoyés pour cette requête sont les résultatsAmazon Kendra reclassés à l'aide du plugin Intelligent Ranking. Le plugin classe jusqu'à 25 résultats.</p>
            </li><li>
                <p>Sélectionnez <b>Rechercher</b> pour afficher et comparer les résultats.</p>
            </li></ol></div>
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Avertissement" /> <strong>JavaScript est désactivé ou n'est pas disponible dans votre navigateur.</strong></p><p>Pour que vous puissiez utiliser la documentation AWS, Javascript doit être activé. Vous trouverez des instructions sur les pages d'aide de votre navigateur.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Conventions de rédaction</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./intelligent-rerank.html">Amazon KendraClassement intelligent</div><div id="next" class="next-link" accesskey="n" href="./search-service-rerank.html">Classement sémantique des résultats d'un service de recherche</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Oui</div><div class="content"><p>Merci de nous avoir fait part de votre satisfaction.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer ce qui vous a plu afin que nous puissions nous améliorer davantage.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Kendra&amp;topic_url=https://docs.aws.amazon.com/fr_fr/kendra/latest/dg/opensearch-rerank.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Non</div><div class="content"><p>Merci de nous avoir avertis que cette page avait besoin d'être retravaillée. Nous sommes désolés de ne pas avoir répondu à vos attentes.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer comment nous pourrions améliorer cette documentation.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Kendra&amp;topic_url=https://docs.aws.amazon.com/fr_fr/kendra/latest/dg/opensearch-rerank.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>