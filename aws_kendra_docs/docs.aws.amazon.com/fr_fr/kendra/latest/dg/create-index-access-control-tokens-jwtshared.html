<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="fr-FR"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Utiliser un jeton web JWT (JSON Web Token) avec un jeton web JWT (JSON Web - Amazon Kendra</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="create-index-access-control-tokens-jwtshared" /><meta name="default_state" content="create-index-access-control-tokens-jwtshared" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/kendra/latest/dg/create-index-access-control-tokens-jwtshared.html" /><meta name="description" content="Décrit comment utiliser JWT avec un secret partagé avec contrôle d'accès pourAmazon Kendra." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Kendra" /><meta name="guide" content="Guide du développeur" /><meta name="abstract" content="Propose une présentation conceptuelle de Amazon Kendra. Découvrez lesAmazon Kendra fonctionnalités et commencez à indexer vos documents à l'aide de la console, de l'interface de ligne de commande et de l'API." /><meta name="guide-locale" content="fr_fr" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/fr_fr/kendra/latest/dg/create-index-access-control-tokens-jwtshared.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/kendra/latest/dg/create-index-access-control-tokens-jwtshared.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/kendra/latest/dg/create-index-access-control-tokens-jwtshared.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/kendra/latest/dg/create-index-access-control-tokens-jwtshared.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/kendra/latest/dg/create-index-access-control-tokens-jwtshared.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/kendra/latest/dg/create-index-access-control-tokens-jwtshared.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/kendra/latest/dg/create-index-access-control-tokens-jwtshared.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/kendra/latest/dg/create-index-access-control-tokens-jwtshared.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/kendra/latest/dg/create-index-access-control-tokens-jwtshared.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/kendra/latest/dg/create-index-access-control-tokens-jwtshared.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/kendra/latest/dg/create-index-access-control-tokens-jwtshared.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/kendra/latest/dg/create-index-access-control-tokens-jwtshared.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/kendra/latest/dg/create-index-access-control-tokens-jwtshared.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/kendra/latest/dg/create-index-access-control-tokens-jwtshared.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/kendra/latest/dg/create-index-access-control-tokens-jwtshared.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/kendra/latest/dg/create-index-access-control-tokens-jwtshared.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/kendra/latest/dg/create-index-access-control-tokens-jwtshared.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/kendra/latest/dg/create-index-access-control-tokens-jwtshared.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/kendra/latest/dg/create-index-access-control-tokens-jwtshared.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/kendra/latest/dg/create-index-access-control-tokens-jwtshared.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/kendra/latest/dg/create-index-access-control-tokens-jwtshared.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/kendra/latest/dg/create-index-access-control-tokens-jwtshared.html" hreflang="x-default" /><meta name="feedback-item" content="Kendra" /><meta name="this_doc_product" content="Amazon Kendra" /><meta name="this_doc_guide" content="Guide du développeur" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'kendra'}"></script><meta id="panorama-serviceSubSection" value="Guide du développeur" /><meta id="panorama-serviceConsolePage" value="Utiliser un jeton web JWT (JSON Web Token) avec un jeton web JWT (JSON Web" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Utiliser un jeton web JWT (JSON Web Token) avec un jeton web JWT (JSON Web - Amazon Kendra</title><meta name="pdf" content="kendra-dg.pdf#create-index-access-control-tokens-jwtshared" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Kendra&amp;topic_url=http://docs.aws.amazon.com/fr_fr/kendra/latest/dg/create-index-access-control-tokens-jwtshared.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/fr_fr/kendra/latest/dg/create-index-access-control-tokens-jwtshared.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/fr_fr/kendra/latest/dg/create-index-access-control-tokens-jwtshared.html" /><meta name="keywords" content="Kendra,Amazon Kendra,search,recherche intelligente,langage naturel,index,question,mot-clé,source de données,connector,FAQ,question fréquemment posée" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Kendra",
        "item" : "https://docs.aws.amazon.com/kendra/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guide du développeur",
        "item" : "https://docs.aws.amazon.com/fr_fr/kendra/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Création d'un index",
        "item" : "https://docs.aws.amazon.com/fr_fr/kendra/latest/dg/create-index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Contrôle de l'accès aux documents d'un index",
        "item" : "https://docs.aws.amazon.com/fr_fr/kendra/latest/dg/create-index-access-control.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Utiliser un jeton web JWT (JSON Web Token) avec un jeton web JWT (JSON Web",
        "item" : "https://docs.aws.amazon.com/fr_fr/kendra/latest/dg/create-index-access-control.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="kendra-dg.pdf#create-index-access-control-tokens-jwtshared" target="_blank" rel="noopener noreferrer" title="Ouvrir le PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/kendra/index.html">Amazon Kendra</a><a href="what-is-kendra.html">Guide du développeur</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Les traductions sont fournies par des outils de traduction automatique. En cas de conflit entre le contenu d'une traduction et celui de la version originale en anglais, la version anglaise prévaudra.</p></awsui-alert><h1 class="topictitle" id="create-index-access-control-tokens-jwtshared">Utiliser un jeton web JWT (JSON Web Token) avec un jeton web JWT (JSON Web</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Les exemples suivants montrent comment utiliser un jeton Web JSON (JWT) avec un jeton secret partagé pour le contrôle d'accès des utilisateurs lorsque vous créez un index. </p><awsdocs-tabs><dl style="display: none">
    <dt>Console</dt><dd tab-id="console">
        
        <div class="procedure"><ol><li>
            <p>Choisissez <b>Créer un index</b> pour commencer à créer un nouvel index.</p>
          </li><li>
            <p>Sur la page <b>Spécifier les détails</b> de l'index, attribuez un nom et une description à votre index.</p>
          </li><li>
            <p>Pour <b>le rôle IAM</b>, sélectionnez un rôle ou sélectionnez <b>Créer un nouveau rôle</b> pour et spécifiez un nom de rôle pour créer un nouveau rôle. Le rôle IAM portera le préfixe «AmazonKendra - ».</p>
          </li><li>
            <p>Conservez les valeurs par défaut des autres champs. Choisissez <b>Suivant</b>.</p>
          </li><li>
            <p>Sur la page <b>Configurer le contrôle d'accès utilisateur</b>, sous <b>Paramètres de contrôle d'accès</b>, choisissez <b>Oui</b> pour utiliser des jetons pour le contrôle d'accès.</p>
          </li><li>
            <p>Sous <b>Configuration du jeton</b>, sélectionnez <b>JWT avec secret partagé</b> comme <b>type de jeton</b>.</p>
          </li><li>
            <p>Sous <b>Paramètres de signature d'un secret partagé</b>, choisissez le <b>type de secret</b>. Vous pouvez utiliser un secretAWS Secrets Manager partagé existant ou en créer un nouveau.</p>
            <p>Pour créer un nouveau secret partagé, choisissez <b>Nouveau</b>, puis procédez comme suit :</p>
            <ol><li>
                <p>Sous <b>NouveauAWS Secrets Manager secret</b>, spécifiez un <b>nom de secret</b>. Le préfixe<code class="code">AmazonKendra-</code> sera ajouté lorsque vous enregistrerez la clé publique.</p>
              </li><li>
                <p>Spécifiez un <b>ID de clé</b>. Le paramètre d'en-tête kid indique quelle clé a été utilisée pour sécuriser la signature web du jeton.</p>
              </li><li>
                <p>Choisissez l'<b>algorithme</b> de signature pour le jeton. Il s'agit de l'algorithme de chiffrement utilisé pour sécuriser le jeton d'd'identification. Pour plus d'informations sur la norme RSA, consultez <a href="https://tools.ietf.org/html/rfc3447" rel="noopener noreferrer" target="_blank"><span>Chiffrement RSA</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
              </li><li>
                <p>Spécifiez un <b>secret partagé</b> en saisissant un secret codé en URL base64. Vous pouvez également sélectionner <b>Générer un secret</b> pour qu'un secret soit généré pour vous. Vous devez vous assurer que le secret est un code secret codé en URL base64.</p>
              </li><li>
                <p>(<em>Facultatif</em>) Spécifiez quand le secret partagé est valide. Vous pouvez spécifier la date et l'heure à partir desquelles un secret est valide, ou les deux. Le secret sera valide dans l'intervalle spécifié.</p>
              </li><li>
                <p>Sélectionnez <b>Enregistrer le secret</b> pour enregistrer le nouveau secret.</p>
              </li></ol>
          </li><li>
            <p>(<em>Facultatif</em>) Sous <b>Configuration avancée</b> :</p>
            <ol><li>
                <p>Spécifiez un <b>nom d'utilisateur</b> à utiliser lors de la vérification de l'ACL.</p>
              </li><li>
                <p>Spécifiez un ou plusieurs <b>groupes</b> à utiliser lors de la vérification de l'ACL.</p>
              </li><li>
                <p>Spécifiez l'<b>émetteur</b> qui validera l'émetteur du jeton.</p>
              </li><li>
                <p>Spécifiez le <b>ou les numéros de réclamation</b>. Vous devez spécifier une expression régulière qui correspond à l'audience du JWT.</p>
              </li></ol>
          </li><li>
            <p>Sur la page des <b>détails du provisionnement</b>, sélectionnez <b>Developer Edition</b>.</p>
          </li><li>
            <p>Choisissez <b>Créer</b> pour créer votre index.</p>
          </li><li>
            <p>Attendez que votre index soit créé. Amazon Kendrafournit le matériel nécessaire à votre index. Cette opération peut prendre un certain temps.</p>
          </li></ol></div>
      </dd>
    <dt>CLI</dt><dd tab-id="cli">
        <p>Vous pouvez utiliser un jeton JWT contenant un secret partagéAWS Secrets Manager. Le code dée dée dée dée dée dée dée dée dée dée dée dée dée dée dée dée dée dée dée dée dée Vous avez besoin de l'Secrets ManagerARN et votreAmazon Kendra rôle doit avoir accès<code class="code">GetSecretValue</code> à laSecrets Manager ressource. Si vous chiffrez laSecrets Manager ressource avecAWS KMS, le rôle doit également avoir accès à l'action de déchiffrement.</p>
        <p>Pour créer un index à l'AWS CLIaide d'un fichier d'entrée JSON, créez d'abord un fichier JSON avec les paramètres souhaités : </p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Name": "<code class="replaceable">user-context</code>",
    "Edition": "<code class="replaceable">ENTERPRISE_EDITION</code>",
    "RoleArn": "arn:aws:iam::<code class="replaceable">account-id</code>:role:/<code class="replaceable">my-role</code>",
    "UserTokenConfigurations": [
        <span>{</span>
            "JwtTokenTypeConfiguration": <span>{</span>
                "KeyLocation": "SECRET_MANAGER",
                "Issuer": "<code class="replaceable">optional: specify the issuer url</code>",
                "ClaimRegex": "<code class="replaceable">optional: regex to validate claims in the token</code>",
                "UserNameAttributeField": "<code class="replaceable">optional: user</code>",
                "GroupAttributeField": "<code class="replaceable">optional: group</code>",
                "SecretManagerArn": "arn:aws:secretsmanager:<code class="replaceable">us-west-2</code>:<code class="replaceable">account id</code>:secret:/<code class="replaceable">my-user-context-secret</code>
            }
        }
    ],    
    "UserContextPolicy": "USER_TOKEN"
}</code></pre>
        <p>Vous pouvez remplacer les noms des champs d'utilisateur et de groupe par défaut. La valeur par défaut pour<code class="code">UserNameAttributeField</code> est « user ». La valeur par défaut pour<code class="code">GroupAttributeField</code> est « groupes ». </p>
        <p>Ensuite, appelez<code class="code">create-index</code> en utilisant le fichier d'entrée. Par exemple, si le nom de votre fichier JSON est<code>create-index-openid.json</code>, vous pouvez utiliser ce qui suit : </p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws kendra create-index --cli-input-json file://create-index-openid.json</code></pre>
        <p>Le secret doit avoir le format suivantAWS Secrets Manager :</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "keys": [
    <span>{</span>
      "kid": "<code class="replaceable">key_id</code>",
      "alg": "HS256|HS384|HS512",
      "kty": "OCT", 
      "use": "sig", //this value can be sig only for now
      "k": "<code class="replaceable">secret</code>",
      "nbf":"<code class="replaceable">ISO1806 date format</code>"
      "exp":"<code class="replaceable">ISO1806 date format</code>"
    }
  ]
}</code></pre>
        <p>Pour plus d'informations sur JWT, consultez <a href="http://jwt.io" rel="noopener noreferrer" target="_blank"><span>jwt.io</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
      </dd>
    <dt>Python</dt><dd tab-id="python">
        <p>Vous pouvez utiliser un jeton JWT contenant un secret partagéAWS Secrets Manager. Le code dée dée dée dée dée dée dée dée dée dée dée dée dée dée dée dée dée dée dée dée dée Vous avez besoin de l'Secrets ManagerARN et votreAmazon Kendra rôle doit avoir accès<code class="code">GetSecretValue</code> à laSecrets Manager ressource. Si vous chiffrez laSecrets Manager ressource avecAWS KMS, le rôle doit également avoir accès à l'action de déchiffrement.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Texte"><awsui-icon name="copy"></awsui-icon></div></div><code class="Python ">response = kendra.create_index(
    Name='<code class="replaceable">user-context</code>',
    Edition='<code class="replaceable">ENTERPRISE_EDITION</code>',
    RoleArn='arn:aws:iam::<code class="replaceable">account-id</code>:role:/<code class="replaceable">my-role</code>',
    UserTokenConfigurations=[
        <span>{</span>
            "JwtTokenTypeConfiguration": <span>{</span>
                "KeyLocation": "URL",
                "Issuer": "<code class="replaceable">optional: specify the issuer url</code>",
                "ClaimRegex": "<code class="replaceable">optional: regex to validate claims in the token</code>",
                "UserNameAttributeField": "<code class="replaceable">optional: user</code>",
                "GroupAttributeField": "<code class="replaceable">optional: group</code>",
                "SecretManagerArn": "arn:aws:secretsmanager:<code class="replaceable">us-west-2</code>:<code class="replaceable">account id</code>:secret:/<code class="replaceable">my-user-context-secret</code>"
            }
        }
    ],
    UserContextPolicy='USER_TOKEN'
)</code></pre>
      </dd>
  </dl></awsdocs-tabs><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Avertissement" /> <strong>JavaScript est désactivé ou n'est pas disponible dans votre navigateur.</strong></p><p>Pour que vous puissiez utiliser la documentation AWS, Javascript doit être activé. Vous trouverez des instructions sur les pages d'aide de votre navigateur.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Conventions de rédaction</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./create-index-access-control-tokens-openid.html">Utilisation d'OpenID</div><div id="next" class="next-link" accesskey="n" href="./create-index-access-control-tokens-jwtpublic.html">Jeton Jeton JWS (JSON Web Token) (JSON Web Token) (JSON Web Token)</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Oui</div><div class="content"><p>Merci de nous avoir fait part de votre satisfaction.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer ce qui vous a plu afin que nous puissions nous améliorer davantage.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Kendra&amp;topic_url=https://docs.aws.amazon.com/fr_fr/kendra/latest/dg/create-index-access-control-tokens-jwtshared.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Cette page vous a-t-elle été utile ? - Non</div><div class="content"><p>Merci de nous avoir avertis que cette page avait besoin d'être retravaillée. Nous sommes désolés de ne pas avoir répondu à vos attentes.</p><p>Si vous avez quelques minutes à nous consacrer, merci de nous indiquer comment nous pourrions améliorer cette documentation.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Commentaire" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Kendra&amp;topic_url=https://docs.aws.amazon.com/fr_fr/kendra/latest/dg/create-index-access-control-tokens-jwtshared.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>