<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Using service-linked roles for Amazon MSK - Amazon Managed Streaming for Apache Kafka</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="using-service-linked-roles" /><meta name="default_state" content="using-service-linked-roles" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/msk/latest/developerguide/using-service-linked-roles.html" /><meta name="description" content="Use service-linked roles to give Amazon MSK access to resources in your AWS account." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Managed Streaming for Apache Kafka" /><meta name="guide" content="Developer Guide" /><meta name="abstract" content="Developer guide for Amazon Managed Streaming for Apache Kafka." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/msk/latest/developerguide/using-service-linked-roles.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/msk/latest/developerguide/using-service-linked-roles.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/msk/latest/developerguide/using-service-linked-roles.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/msk/latest/developerguide/using-service-linked-roles.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/msk/latest/developerguide/using-service-linked-roles.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/msk/latest/developerguide/using-service-linked-roles.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/msk/latest/developerguide/using-service-linked-roles.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/msk/latest/developerguide/using-service-linked-roles.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/msk/latest/developerguide/using-service-linked-roles.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/msk/latest/developerguide/using-service-linked-roles.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/msk/latest/developerguide/using-service-linked-roles.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/msk/latest/developerguide/using-service-linked-roles.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/msk/latest/developerguide/using-service-linked-roles.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/msk/latest/developerguide/using-service-linked-roles.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/msk/latest/developerguide/using-service-linked-roles.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/msk/latest/developerguide/using-service-linked-roles.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/msk/latest/developerguide/using-service-linked-roles.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/msk/latest/developerguide/using-service-linked-roles.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/msk/latest/developerguide/using-service-linked-roles.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/msk/latest/developerguide/using-service-linked-roles.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/msk/latest/developerguide/using-service-linked-roles.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/msk/latest/developerguide/using-service-linked-roles.html" hreflang="x-default" /><meta name="feedback-item" content="msk" /><meta name="this_doc_product" content="Amazon Managed Streaming for Apache Kafka" /><meta name="this_doc_guide" content="Developer Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'msk'}"></script><meta id="panorama-serviceSubSection" value="Developer Guide" /><meta id="panorama-serviceConsolePage" value="Using service-linked roles for Amazon MSK" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Using service-linked roles for Amazon MSK - Amazon Managed Streaming for Apache Kafka</title><meta name="pdf" content="/pdfs/msk/latest/developerguide/MSKDevGuide.pdf#using-service-linked-roles" /><meta name="github" content="https://github.com/awsdocs/amazon-msk-developer-guide/tree/main/doc_source/using-service-linked-roles.md" /><meta name="rss" content="amazon-msk-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=315" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=msk&amp;topic_url=http://docs.aws.amazon.com/en_us/msk/latest/developerguide/using-service-linked-roles.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/msk/latest/developerguide/using-service-linked-roles.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/msk/latest/developerguide/using-service-linked-roles.html" /><meta name="keywords" content="Apache Kafka,Apache ZooKeeper,MSK,Amazon MSK,Broker,cluster,MSK cluster" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Managed Streaming for Apache Kafka",
        "item" : "https://docs.aws.amazon.com/msk/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Developer Guide",
        "item" : "https://docs.aws.amazon.com/msk/latest/developerguide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Security in Amazon Managed Streaming for Apache Kafka",
        "item" : "https://docs.aws.amazon.com/msk/latest/developerguide/security.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Authentication and authorization for Amazon MSK APIs",
        "item" : "https://docs.aws.amazon.com/msk/latest/developerguide/security-iam.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Using service-linked roles for Amazon MSK",
        "item" : "https://docs.aws.amazon.com/msk/latest/developerguide/security-iam.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/msk/latest/developerguide/MSKDevGuide.pdf#using-service-linked-roles" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a href="https://github.com/awsdocs/amazon-msk-developer-guide/tree/main/doc_source/using-service-linked-roles.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/msk/index.html">Amazon Managed Streaming for Apache Kafka</a><a href="what-is-msk.html">Developer Guide</a></div><div id="page-toc-src"><a href="#slr-permissions">Service-linked role permissions</a><a href="#create-slr">Creating a service-linked role</a><a href="#edit-slr">Editing a service-linked role</a><a href="#slr-regions">Supported Regions for service-linked roles</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="using-service-linked-roles">Using service-linked roles for
            Amazon MSK</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Amazon MSK uses AWS Identity and Access Management (IAM) <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-linked-role">
            service-linked roles</a>. A service-linked role is a unique type of IAM role that
        is linked directly to Amazon MSK. Service-linked roles are predefined by Amazon MSK
        and include all the permissions that the service requires to call other AWS services on
        your behalf. </p><p>A service-linked role makes setting up Amazon MSK easier because you do not have to
        manually add the necessary permissions. Amazon MSK defines the permissions of its
        service-linked roles. Unless defined otherwise, only Amazon MSK can assume its roles. The
        defined permissions include the trust policy and the permissions policy, and that
        permissions policy cannot be attached to any other IAM entity.</p><p>For information about other services that support service-linked roles, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_aws-services-that-work-with-iam.html">Amazon Web Services That
            Work with IAM</a>, and look for the services that have <b>Yes
        </b>in the <b>Service-Linked Role</b> column. Choose a
            <b>Yes</b> with a link to view the service-linked role
        documentation for that service.</p><div class="highlights" id="inline-topiclist"><h6>Topics</h6><ul><li><a href="#slr-permissions">Service-linked role permissions</a></li><li><a href="#create-slr">Creating a service-linked role</a></li><li><a href="#edit-slr">Editing a service-linked role</a></li><li><a href="#slr-regions">Supported Regions for service-linked roles</a></li></ul></div>
        <h2 id="slr-permissions">Service-linked role permissions for
                Amazon MSK</h2>
        <p>Amazon MSK uses the service-linked role named <b>AWSServiceRoleForKafka</b>.
            Amazon MSK uses this role to access your resources and perform operations such as:</p>
        <div class="itemizedlist">
             
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><code class="code">*NetworkInterface</code> – create and manage network
                    interfaces in the customer account that make cluster brokers accessible to clients in the customer VPC.</p>
            </li><li class="listitem">
                <p><code class="code">*VpcEndpoints</code> – manage VPC endpoints in the customer
                    account that make cluster brokers accessible to clients in the customer VPC
                    using AWS PrivateLink. Amazon MSK uses
                    permissions to <code class="code">DescribeVpcEndpoints</code>, <code class="code">ModifyVpcEndpoint</code> and <code class="code">DeleteVpcEndpoints</code>.</p>
            </li><li class="listitem">
                <p><code class="code">secretsmanager</code> – manage client credentials with AWS Secrets Manager.</p>
            </li><li class="listitem">
                <p><code class="code">GetCertificateAuthorityCertificate</code> – retrieve the certificate for your private certificate authority.</p>
            </li></ul></div>
        <p>This service-linked role is attached to the following managed policy:
            <code class="code">KafkaServiceRolePolicy</code>. For updates to this policy, see <a href="https://docs.aws.amazon.com/msk/latest/developerguide/security-iam-awsmanpol.html#security-iam-awsmanpol-KafkaServiceRolePolicy">KafkaServiceRolePolicy</a>.</p>
        <p>The AWSServiceRoleForKafka service-linked role trusts the following services to assume the
            role:</p>
        <div class="itemizedlist">
             
        <ul class="itemizedlist"><li class="listitem">
                <p><code class="code">kafka.amazonaws.com</code></p>
            </li></ul></div>
        <p>The role permissions policy allows Amazon MSK to complete the following actions on resources.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
	"Version": "2012-10-17",
	"Statement": [
		<span>{</span>
			"Effect": "Allow",
			"Action": [
				"ec2:CreateNetworkInterface",
				"ec2:DescribeNetworkInterfaces",
				"ec2:CreateNetworkInterfacePermission",
				"ec2:AttachNetworkInterface",
				"ec2:DeleteNetworkInterface",
				"ec2:DetachNetworkInterface",
				"ec2:DescribeVpcEndpoints",
				"acm-pca:GetCertificateAuthorityCertificate",
				"secretsmanager:ListSecrets"
			],
			"Resource": "*"
		},
		<span>{</span>
			"Effect": "Allow",
			"Action": [
				"ec2:ModifyVpcEndpoint"
			],
			"Resource": "arn:*:ec2:*:*:subnet/*"
		},
		<span>{</span>
			"Effect": "Allow",
			"Action": [
				"ec2:DeleteVpcEndpoints",
				"ec2:ModifyVpcEndpoint"
			],
			"Resource": "arn:*:ec2:*:*:vpc-endpoint/*",
			"Condition": <span>{</span>
				"StringEquals": <span>{</span>
					"ec2:ResourceTag/AWSMSKManaged": "true"
				},
				"StringLike": <span>{</span>
					"ec2:ResourceTag/ClusterArn": "*"
				}
			}
		},
		<span>{</span>
			"Effect": "Allow",
			"Action": [
				"secretsmanager:GetResourcePolicy",
				"secretsmanager:PutResourcePolicy",
				"secretsmanager:DeleteResourcePolicy",
				"secretsmanager:DescribeSecret"
			],
			"Resource": "*",
			"Condition": <span>{</span>
				"ArnLike": <span>{</span>
					"secretsmanager:SecretId": "arn:*:secretsmanager:*:*:secret:AmazonMSK_*"
				}
			}
		}
	]
}</code></pre>
        <p>You must configure permissions to allow an IAM entity (such as a user, group, or
            role) to create, edit, or delete a service-linked role. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/using-service-linked-roles.html#service-linked-role-permissions">Service-Linked Role Permissions</a> in the
                <em>IAM User Guide</em>.</p>
     
        <h2 id="create-slr">Creating a service-linked role for Amazon MSK</h2>
        <p>You don't need to create a service-linked role manually. When you
            create an Amazon MSK cluster in the AWS Management Console, the AWS CLI, or the AWS API, Amazon MSK
            creates the service-linked role for you. </p>
        <p>If you delete this service-linked role, and then need to create it again, you can use
            the same process to recreate the role in your account. When you
            create an Amazon MSK cluster, Amazon MSK creates the service-linked role for you again.
        </p>
     
        <h2 id="edit-slr">Editing a service-linked role for Amazon MSK</h2>
        <p>Amazon MSK does not allow you to edit the AWSServiceRoleForKafka service-linked role. After you
            create a service-linked role, you cannot change the name of the role because various
            entities might reference the role. However, you can edit the description of the role
            using IAM. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/using-service-linked-roles.html#edit-service-linked-role">Editing
                a Service-Linked Role</a> in the <em>IAM User Guide</em>.</p>
     
        <h2 id="slr-regions">Supported Regions for Amazon MSK service-linked
                roles</h2>
        <p>Amazon MSK supports using service-linked roles in all of the Regions where the
            service is available. For more information, see <a href="https://docs.aws.amazon.com/general/latest/gr/rande.html">AWS Regions and Endpoints</a>.</p>
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./security_iam_id-based-policy-examples.html">Identity-based policy examples</div><div id="next" class="next-link" accesskey="n" href="./security-iam-awsmanpol.html">AWS managed policies</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=msk&amp;topic_url=https://docs.aws.amazon.com/en_us/msk/latest/developerguide/using-service-linked-roles.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=msk&amp;topic_url=https://docs.aws.amazon.com/en_us/msk/latest/developerguide/using-service-linked-roles.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>