<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="es-ES"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Uso de un JSON Web Token (JWT) con una clave pública - Amazon Kendra</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="create-index-access-control-tokens-jwtpublic" /><meta name="default_state" content="create-index-access-control-tokens-jwtpublic" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/kendra/latest/dg/create-index-access-control-tokens-jwtpublic.html" /><meta name="description" content="Cómo utilizar JWT con una clave pública con control de acceso paraAmazon Kendra." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Kendra" /><meta name="guide" content="Guía para desarrolladores" /><meta name="abstract" content="Proporciona información general conceptual de Amazon Kendra. ConozcaAmazon Kendra las funciones y comience a indexar sus documentos mediante la consola, la CLI y la API." /><meta name="guide-locale" content="es_es" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/kendra/latest/dg/create-index-access-control-tokens-jwtpublic.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/kendra/latest/dg/create-index-access-control-tokens-jwtpublic.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/kendra/latest/dg/create-index-access-control-tokens-jwtpublic.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/kendra/latest/dg/create-index-access-control-tokens-jwtpublic.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/kendra/latest/dg/create-index-access-control-tokens-jwtpublic.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/kendra/latest/dg/create-index-access-control-tokens-jwtpublic.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/kendra/latest/dg/create-index-access-control-tokens-jwtpublic.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/kendra/latest/dg/create-index-access-control-tokens-jwtpublic.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/kendra/latest/dg/create-index-access-control-tokens-jwtpublic.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/kendra/latest/dg/create-index-access-control-tokens-jwtpublic.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/kendra/latest/dg/create-index-access-control-tokens-jwtpublic.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/kendra/latest/dg/create-index-access-control-tokens-jwtpublic.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/kendra/latest/dg/create-index-access-control-tokens-jwtpublic.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/kendra/latest/dg/create-index-access-control-tokens-jwtpublic.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/kendra/latest/dg/create-index-access-control-tokens-jwtpublic.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/kendra/latest/dg/create-index-access-control-tokens-jwtpublic.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/kendra/latest/dg/create-index-access-control-tokens-jwtpublic.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/kendra/latest/dg/create-index-access-control-tokens-jwtpublic.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/kendra/latest/dg/create-index-access-control-tokens-jwtpublic.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/kendra/latest/dg/create-index-access-control-tokens-jwtpublic.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/kendra/latest/dg/create-index-access-control-tokens-jwtpublic.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/kendra/latest/dg/create-index-access-control-tokens-jwtpublic.html" hreflang="x-default" /><meta name="feedback-item" content="Kendra" /><meta name="this_doc_product" content="Amazon Kendra" /><meta name="this_doc_guide" content="Guía para desarrolladores" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'kendra'}"></script><meta id="panorama-serviceSubSection" value="Guía para desarrolladores" /><meta id="panorama-serviceConsolePage" value="Uso de un JSON Web Token (JWT) con una clave pública" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Uso de un JSON Web Token (JWT) con una clave pública - Amazon Kendra</title><meta name="pdf" content="kendra-dg.pdf#create-index-access-control-tokens-jwtpublic" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Kendra&amp;topic_url=http://docs.aws.amazon.com/es_es/kendra/latest/dg/create-index-access-control-tokens-jwtpublic.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/es_es/kendra/latest/dg/create-index-access-control-tokens-jwtpublic.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/es_es/kendra/latest/dg/create-index-access-control-tokens-jwtpublic.html" /><meta name="keywords" content="Kendra,Amazon Kendra,search (buscar),búsqueda inteligente,lenguaje natural,índice,question,clave,origen de datos,conector,Preguntas frecuentes,pregunta frecuente" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Kendra",
        "item" : "https://docs.aws.amazon.com/kendra/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guía para desarrolladores",
        "item" : "https://docs.aws.amazon.com/es_es/kendra/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Creación de un índice",
        "item" : "https://docs.aws.amazon.com/es_es/kendra/latest/dg/create-index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Controlar el acceso a los documentos de un índice",
        "item" : "https://docs.aws.amazon.com/es_es/kendra/latest/dg/create-index-access-control.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Uso de un JSON Web Token (JWT) con una clave pública",
        "item" : "https://docs.aws.amazon.com/es_es/kendra/latest/dg/create-index-access-control.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="kendra-dg.pdf#create-index-access-control-tokens-jwtpublic" target="_blank" rel="noopener noreferrer" title="Abrir PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentación</a><a href="/kendra/index.html">Amazon Kendra</a><a href="what-is-kendra.html">Guía para desarrolladores</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Las traducciones son generadas a través de traducción automática. En caso de conflicto entre la traducción y la version original de inglés, prevalecerá la version en inglés.</p></awsui-alert><h1 class="topictitle" id="create-index-access-control-tokens-jwtpublic">Uso de un JSON Web Token (JWT) con una clave pública</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Los siguientes ejemplos muestran cómo utilizar un token web JSON (JWT) con un token de certificado para el control de acceso de los usuarios al crear un índice. Para obtener más información sobre JWT, consulte <a href="http://jwt.io" rel="noopener noreferrer" target="_blank"><span>jwt.io</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p><awsdocs-tabs><dl style="display: none">
    <dt>Console</dt><dd tab-id="console">
        
        <div class="procedure"><ol><li>
            <p>Elija <b>Crear índice</b> para empezar a crear un índice nuevo.</p>
          </li><li>
            <p>En la página <b>Specify index details (Especificar</b> detalles de índice), proporcione a su índice un nombre y una descripción. </p>
          </li><li>
            <p>Para el <b>rol de IAM</b>, seleccione un rol o seleccione <b>Crear un nuevo rol</b> y especifique un nombre de rol para crear un rol nuevo. El rol de IAM tendrá el prefijo "AmazonKendra-». </p>
          </li><li>
            <p>Deje todos los demás campos con sus valores predeterminados. Elija <b>Next</b> (Siguiente).</p>
          </li><li>
            <p>En la página <b>Configurar el control de acceso de los usuarios</b>, en la <b>sección Configuración del control de acceso</b>, elija <b>Sí</b> para usar los identificadores para el control de acceso. </p>
          </li><li>
            <p>En <b>Configuración del token</b>, seleccione <b>JWT con clave pública</b> como <b>tipo de token</b>. </p>
          </li><li>
            <p>En <b>Parámetros para firmar la clave pública</b>, elija el <b>tipo de secreto</b>. Puede utilizar unAWS Secrets Manager secreto existente o crear uno nuevo. </p>
            <p>Para crear un nuevo secreto, elija <b>Nuevo</b> y siga estos pasos:</p>
            <ol><li>
                <p>En <b>NuevoAWS Secrets Manager secreto</b>, especifique un <b>nombre secreto</b>. El prefijo se<code class="code">AmazonKendra-</code> añadirá al guardar la clave pública. </p>
              </li><li>
                <p>Especifique un <b>identificador de clave</b>. El parámetro kid es una sugerencia que indica qué clave se utilizó para proteger la firma web JSON del token. </p>
              </li><li>
                <p>Elija el <b>algoritmo</b> de firma para el token. Este es el algoritmo criptográfico que se utiliza para proteger el token de ID. Para obtener más información sobre RSA, consulte <a href="https://tools.ietf.org/html/rfc3447" rel="noopener noreferrer" target="_blank"><span>Criptografía de RSA</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. </p>
              </li><li>
                <p>En <b>Atributos de certificado</b>, especifique una <b>cadena de certificados</b> <em>opcional</em>. La cadena de certificados se compone de una lista de certificados. Comienza con el certificado de un servidor y termina con el certificado raíz. </p>
              </li><li>
                <p><em>Opcional</em>: especifique la <b>huella digital o la huella digital</b>. Debe ser un hash de un certificado, calculado sobre todos los datos del certificado y su firma. </p>
              </li><li>
                <p>Especifique el <b>exponente</b>. Este es el valor exponente de la clave pública RSA. Se representa como un valor codificado en Base64urlUInt. </p>
              </li><li>
                <p>Especifique el <b>módulo</b>. Este es el valor exponente de la clave pública RSA. Se representa como un valor codificado en Base64urlUInt. </p>
              </li><li>
                <p>Seleccione <b>Guardar clave</b> para guardar la nueva clave. </p>
              </li></ol>
          </li><li>
            <p><em>Opcional</em> en <b>Configuración avanzada</b>: </p>
            <ol><li>
                <p>Especifique un <b>nombre de usuario</b> para usarlo en la comprobación de ACL. </p>
              </li><li>
                <p>Especifique uno o más <b>grupos</b> para usarlos en la comprobación de ACL. </p>
              </li><li>
                <p>Especifique el <b>emisor</b> que validará el emisor del token. </p>
              </li><li>
                <p>Especifique los <b>identificadores de cliente</b>. Debe especificar una expresión regular que coincida con la audiencia del JWT. </p>
              </li></ol>
          </li><li>
            <p>En la página de <b>detalles del aprovisionamiento</b>, seleccione <b>Edición para desarrolladores</b>.</p>
          </li><li>
            <p>Elige <b>Crear</b> para crear tu índice.</p>
          </li><li>
            <p>Espere a que se cree el índice. Amazon Kendraaprovisiona el hardware para su índice. Esta operación puede llevar algún tiempo.</p>
          </li></ol></div>
      </dd>
    <dt>CLI</dt><dd tab-id="cli">
        <p>Puede usar JWT con una clave pública dentro de unAWS Secrets Manager. Necesita elSecrets Manager ARN y suAmazon Kendra rol debe tener acceso<code class="code">GetSecretValue</code> alSecrets Manager recurso. Si está cifrando elSecrets Manager recurso conAWS KMS, el rol también debe tener acceso a la acción de descifrado. </p>
        <p>Para crear un índice con elAWS CLI uso de un archivo de entrada JSON, primero cree un archivo JSON con los parámetros que desee: </p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Name": "<code class="replaceable">user-context</code>",
    "Edition": "<code class="replaceable">ENTERPRISE_EDITION</code>",
    "RoleArn": "arn:aws:iam::<code class="replaceable">account id</code>:role:/<code class="replaceable">my-role</code>",
    "UserTokenConfigurationList": [
        <span>{</span>
            "JwtTokenTypeConfiguration": <span>{</span>
                "KeyLocation": "SECRET_MANAGER",
                "Issuer": "<code class="replaceable">optional: specify the issuer url</code>",
                "ClaimRegex": "<code class="replaceable">optional: regex to validate claims in the token</code>",
                "UserNameAttributeField": "<code class="replaceable">optional: user</code>",
                "GroupAttributeField": "<code class="replaceable">optional: group</code>",
                "SecretManagerArn": "arn:aws:secretsmanager:<code class="replaceable">us-west-2</code>:<code class="replaceable">account id</code>:secret:/<code class="replaceable">my-user-context-secret</code>
            }
        }
    ],    "UserContextPolicy": "USER_TOKEN"
}</code></pre>
        <p>Puede anular los nombres de campo de usuario y grupo predeterminados. El valor predeterminado para<code class="code">UserNameAttributeField</code> es «user». El valor predeterminado para<code class="code">GroupAttributeField</code> es «groups». </p>
        <p>A continuación, llame<code class="code">create-index</code> con el archivo de entrada. Por ejemplo, si el nombre del archivo JSON es<code>create-index-openid.json</code>, puede utilizar lo siguiente: </p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws kendra create-index --cli-input-json file://create-index-openid.json</code></pre>
        <p>El secreto debe tener el siguiente formatoSecrets Manager:</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "keys": [
    <span>{</span>
      "alg": "RS256|RS384|RS512",
      "kty": "RSA", //this can be RSA only for now
      "use": "sig", //this value can be sig only for now
      "n": "<code class="replaceable">modulus of standard pem</code>",
      "e": "<code class="replaceable">exponent of standard pem</code>",
      "kid": "<code class="replaceable">key_id</code>",
      "x5t": "<code class="replaceable">certificate thumprint for x.509 cert</code>",
      "x5c": [
        "<code class="replaceable">certificate chain</code>"
      ]
    }
  ]
}</code></pre>
        <p>Para obtener más información sobre JWT, consulte <a href="http://jwt.io" rel="noopener noreferrer" target="_blank"><span>jwt.io</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
      </dd>
    <dt>Python</dt><dd tab-id="python">
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="Python ">response = kendra.create_index(
    Name='<code class="replaceable">user-context</code>',
    Edition='<code class="replaceable">ENTERPRISE_EDITION</code>',
    RoleArn='arn:aws:iam::<code class="replaceable">account id</code>:role:/<code class="replaceable">my-role</code>',
    UserTokenConfigurationList=[
        <span>{</span>
            "JwtTokenTypeConfiguration": <span>{</span>
                "KeyLocation": "URL",
                "Issuer": "<code class="replaceable">optional: specify the issuer url</code>",
                "ClaimRegex": "<code class="replaceable">optional: regex to validate claims in the token</code>",
                "UserNameAttributeField": "<code class="replaceable">optional: user</code>",
                "GroupAttributeField": "<code class="replaceable">optional: group</code>",
                "SecretManagerArn": "arn:aws:secretsmanager:<code class="replaceable">us-west-2</code>:<code class="replaceable">account id</code>:secret:/<code class="replaceable">my-user-context-secret</code>"
            }
        }
    ],
    UserContextPolicy='USER_TOKEN'
)</code></pre>
      </dd>
  </dl></awsdocs-tabs><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Aviso" /> <strong>JavaScript está desactivado o no está disponible en su navegador.</strong></p><p>Para utilizar la documentación de AWS, debe estar habilitado JavaScript. Para obtener más información, consulte las páginas de ayuda de su navegador.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenciones del documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./create-index-access-control-tokens-jwtshared.html">Uso de un JSON Web Token (JWT) con un secreto compartido</div><div id="next" class="next-link" accesskey="n" href="./create-index-access-control-tokens-json.html">Uso de JSON</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - Sí</div><div class="content"><p>Gracias por hacernos saber que estamos haciendo un buen trabajo.</p><p>Si tiene un momento, díganos qué es lo que le ha gustado para que podamos seguir trabajando en esa línea.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Kendra&amp;topic_url=https://docs.aws.amazon.com/es_es/kendra/latest/dg/create-index-access-control-tokens-jwtpublic.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - No</div><div class="content"><p>Gracias por informarnos de que debemos trabajar en esta página. Lamentamos haberle defraudado.</p><p>Si tiene un momento, díganos cómo podemos mejorar la documentación.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Kendra&amp;topic_url=https://docs.aws.amazon.com/es_es/kendra/latest/dg/create-index-access-control-tokens-jwtpublic.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>