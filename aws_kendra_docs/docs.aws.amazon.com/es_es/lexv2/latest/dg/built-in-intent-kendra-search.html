<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="es-ES"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>AMAZONA. KendraSearchIntent - Amazon Lex</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="built-in-intent-kendra-search" /><meta name="default_state" content="built-in-intent-kendra-search" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/lexv2/latest/dg/built-in-intent-kendra-search.html" /><meta name="description" content="Para buscar documentos que haya indexado en Amazon Kendra, utilice la AMAZON.KendraSearchIntent intención. Cuando Amazon Lex V2 no puede determinar la siguiente acción de una conversación con el usuario, se activa la intención de búsqueda." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Lex" /><meta name="guide" content="Guía para desarrolladores de V2" /><meta name="abstract" content="Proporciona una descripción general conceptual de Amazon Lex V2. Incluye instrucciones detalladas sobre el uso de diversas funciones, como la transmisión de conversaciones, y proporciona una referencia completa de las API de la versión 2." /><meta name="guide-locale" content="es_es" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/lexv2/latest/dg/built-in-intent-kendra-search.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="x-default" /><meta name="feedback-item" content="Lex" /><meta name="this_doc_product" content="Amazon Lex" /><meta name="this_doc_guide" content="Guía para desarrolladores de V2" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'lex'}"></script><meta id="panorama-serviceSubSection" value="Guía para desarrolladores de V2" /><meta id="panorama-serviceConsolePage" value="AMAZONA. KendraSearchIntent" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>AMAZONA. KendraSearchIntent - Amazon Lex</title><meta name="pdf" content="lex2.0.pdf#built-in-intent-kendra-search" /><meta name="rss" content="amazon-lex-v2-document-history.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=251" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lex&amp;topic_url=http://docs.aws.amazon.com/es_es/lexv2/latest/dg/built-in-intent-kendra-search.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/es_es/lexv2/latest/dg/built-in-intent-kendra-search.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/es_es/lexv2/latest/dg/built-in-intent-kendra-search.html" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Lex",
        "item" : "https://docs.aws.amazon.com/lex/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guía para desarrolladores de V2",
        "item" : "https://docs.aws.amazon.com/es_es/lexv2/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Construyendo bots",
        "item" : "https://docs.aws.amazon.com/es_es/lexv2/latest/dg/building-bots.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Intenciones y tipos de ranuras incorporados",
        "item" : "https://docs.aws.amazon.com/es_es/lexv2/latest/dg/built-in.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Intenciones integradas",
        "item" : "https://docs.aws.amazon.com/es_es/lexv2/latest/dg/howitworks-builtins-intents.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "AMAZONA. KendraSearchIntent",
        "item" : "https://docs.aws.amazon.com/es_es/lexv2/latest/dg/howitworks-builtins-intents.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="lex2.0.pdf#built-in-intent-kendra-search" target="_blank" rel="noopener noreferrer" title="Abrir PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentación</a><a href="/lex/index.html">Amazon Lex</a><a href="what-is.html">Guía para desarrolladores de V2</a></div><div id="page-toc-src"><a href="#kendra-search-iam">Política de IAM</a><a href="#kendra-search-filter">Uso de atributos de solicitud y sesión como filtros</a><a href="#kendra-search-response">Uso de la respuesta de búsqueda</a><a href="#kendra-search-lambda">Uso de una función Lambda para gestionar la solicitud y la respuesta</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Las traducciones son generadas a través de traducción automática. En caso de conflicto entre la traducción y la version original de inglés, prevalecerá la version en inglés.</p></awsui-alert><h1 class="topictitle" id="built-in-intent-kendra-search">AMAZONA. KendraSearchIntent</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Para buscar documentos que haya indexado en Amazon Kendra, utilice la<code class="code">AMAZON.KendraSearchIntent</code> intención. Cuando Amazon Lex V2 no puede determinar la siguiente acción de una conversación con el usuario, se activa la intención de búsqueda.</p><p>Solo<code class="code">AMAZON.KendraSearchIntent</code> está disponible en la región de Este de EE. UU. (Oregón) y Europa (Irlanda).</p><p>Amazon Kendra es un servicio machine-learning-based  de búsqueda que indexa documentos en lenguaje natural, como documentos PDF o archivos de Microsoft Word. Puede buscar documentos indexados y devolver los siguientes tipos de contestaciones a una pregunta:</p><div class="itemizedlist">
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>Una respuesta </p>
                </li><li class="listitem">
                    <p>Una entrada de una pregunta frecuente que podría dar respuesta a la pregunta</p>
                </li><li class="listitem">
                    <p>Un documento relacionado con la pregunta</p>
                </li></ul></div><p>Para ver un ejemplo del uso de <code class="code">AMAZON.KendraSearchIntent</code>, consulte <a href="./faq-bot-kendra-search.html">Ejemplo: creación de un bot de preguntas frecuentes para un índice de Amazon Kendra</a>.</p><p>Si configura una<code class="code">AMAZON.KendraSearchIntent</code> intención para su bot, Amazon Lex V2 invoca la intención siempre que no pueda determinar la expresión del usuario para dicha intención. Si no hay respuesta de Amazon Kendra, la conversación continúa tal como se configuró en el bot.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p> Amazon Lex V2 actualmente no admite la activación<code class="code">AMAZON.KendraSearchIntent</code> durante la obtención de franjas horarias. Si Amazon Lex V2 no puede determinar la expresión del usuario de una ranura, llama al<code class="code">AMAZON.FallbackIntent</code>. </p></div></div><p>Cuando lo usa<code class="code">AMAZON.KendraSearchIntent</code> con<code class="code">AMAZON.FallbackIntent</code> el mismo bot, Amazon Lex V2 usa las siguientes intenciones:</p><div class="orderedlist">
                 
                 
                 
                 
            <ol><li>
                    <p>Amazon Lex V2<code class="code">AMAZON.KendraSearchIntent</code>. La intención llama a la<code class="code">Query</code> operación Amazon Kendra.</p>
                </li><li>
                    <p>Si Amazon Kendra devuelve una respuesta, Amazon Lex V2 muestra el resultado al usuario.</p>
                </li><li>
                    <p>Si Amazon Kendra no responde, Amazon Lex V2 vuelve a preguntar al usuario. La siguiente acción dependerá de la respuesta del usuario.</p>
                    <div class="itemizedlist">
                         
                         
                    <ul class="itemizedlist"><li class="listitem">
                            <p>Si la respuesta del usuario contiene una expresión que Amazon Lex V2 reconozca, como rellenar un valor de ranura o confirmar una intención, la conversación con el usuario continúa según lo configurado para el bot.</p>
                        </li><li class="listitem">
                            <p>Si la respuesta del usuario no contiene ningún enunciado que Amazon Lex V2 reconozca, Amazon Lex V2 realiza otra llamada a la<code class="code">Query</code> operación.</p>
                        </li></ul></div>
                </li><li>
                    <p>Si no hay respuesta después del número configurado de reintentos, Amazon Lex V2 llama al usuario<code class="code">AMAZON.FallbackIntent</code> y finaliza la conversación con él.</p>
                </li></ol></div><p>Hay tres formas de utilizar el<code class="code">AMAZON.KendraSearchIntent</code> para hacer una solicitud a Amazon Kendra:</p><div class="itemizedlist">
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>Deje que la intención de búsqueda haga la solicitud por usted. Amazon Lex V2 llama a Amazon Kendra con la expresión del usuario como cadena de búsqueda. Al crear la intención, puede definir una cadena de filtro de consulta que limite el número de respuestas que devuelve Amazon Kendra. Amazon Lex V2 usa el filtro en la solicitud de consulta.</p>
                </li><li class="listitem">
                    <p>Añada parámetros de consulta adicionales a la solicitud para restringir los resultados de la búsqueda mediante la función Lambda. Añada un<code class="code">kendraQueryFilterString</code> campo que contenga los parámetros de consulta de Amazon Kendra a la acción del<code class="code">delegate</code> diálogo. Al añadir parámetros de consulta a la solicitud con la función Lambda, tienen prioridad sobre el filtro de consulta que definió al crear la intención.</p>
                </li><li class="listitem">
                    <p>Cree una nueva consulta con la función Lambda. Puede crear una solicitud de consulta completa de Amazon Kendra que envíe Amazon Lex V2. Especifique la consulta en el campo <code class="code">kendraQueryRequestPayload</code> de la acción de diálogo <code class="code">delegate</code>. El campo <code class="code">kendraQueryRequestPayload</code> tiene prioridad sobre el campo <code class="code">kendraQueryFilterString</code>.</p>
                </li></ul></div><p>Para especificar el<code class="code">queryFilterString</code> parámetro al crear un bot o especificar el<code class="code">kendraQueryFilterString</code> campo al llamar a la<code class="code">delegate</code> acción en una función Lambda del cuadro de diálogo, especifique una cadena que se utilice como filtro de atributos para la consulta de Amazon Kendra. Si la cadena no es un filtro de atributos válido, aparecerá una excepción <code class="code">InvalidBotConfigException</code> en tiempo de ejecución. Para obtener más información sobre los filtros de atributos, consulte <a href="https://docs.aws.amazon.com/kendra/latest/dg/filtering.html#search-filtering">Uso de atributos de documentos para filtrar consultas</a> en la <em>Guía para desarrolladores de Amazon Kendra</em>.</p><p>Para tener control sobre la consulta que Amazon Lex V2 envía a Amazon Kendra, puede especificar una consulta en el<code class="code">kendraQueryRequestPayload</code> campo de la función Lambda. Si la consulta no es válida, Amazon Lex V2 devuelve una<code class="code">InvalidLambdaResponseException</code> excepción. Para obtener más información, consulte la <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_Query.html">operación de consulta</a> en la <em>Guía para desarrolladores de Amazon Kendra</em>.</p><p>Si desea ver un ejemplo de cómo se usa <code class="code">AMAZON.KendraSearchIntent</code>, consulte <a href="./faq-bot-kendra-search.html">Ejemplo: creación de un bot de preguntas frecuentes para un índice de Amazon Kendra</a>&gt;.</p>
                <h2 id="kendra-search-iam">Política de IAM para Amazon Kendra Search</h2>
                <p>Para utilizar la<code class="code">AMAZON.KendraSearchIntent</code> intención, debe utilizar una función que proporcione políticasAWS Identity and Access Management (de IAM) que permitan a Amazon Lex V2 asumir una función de tiempo de ejecución que tenga permiso para llamar a la<code class="code">Query</code> intención de Amazon Kendra. La configuración de IAM que utilice dependerá de si la crea<code class="code">AMAZON.KendraSearchIntent</code> con la consola Amazon Lex V2, con un SDK de AWS o con elAWS Command Line Interface (AWS CLI). Al utilizar la consola, puede elegir entre añadir permiso para llamar a Amazon Kendra al rol vinculado al servicio Amazon Lex V2 o utilizar un rol específico para llamar a la<code class="code">Query</code> operación Amazon Kendra. Si utiliza AWS CLI o un SDK para crear la intención, debe usar un rol específico para llamar a la operación <code class="code">Query</code>.</p>
                 
                    <h3 id="kendra-iam-attach">Asociación de permisos </h3>
                    <p>Puede utilizar la consola para adjuntar permisos de acceso a la<code class="code">Query</code> operación de Amazon Kendra al rol predeterminado vinculado al servicio Amazon Lex V2. Al adjuntar permisos al rol vinculado al servicio, no es necesario crear ni administrar un rol en tiempo de ejecución específicamente para conectarse al índice de Amazon Kendra.</p>
                    <p>El usuario, rol o grupo que utilice para acceder a la consola Amazon Lex V2 debe tener permisos para administrar las políticas de roles. Adjunte la siguiente política de IAM al rol de acceso a la consola. Al conceder estos permisos, el rol podrá cambiar la política del rol vinculado al servicio existente. </p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "iam:AttachRolePolicy",
                "iam:PutRolePolicy",
                "iam:GetRolePolicy"
            ],
            "Resource": "arn:aws:iam::*:role/aws-service-role/lexv2.amazonaws.com/AWSServiceRoleForLexBots*"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": "iam:ListRoles",
            "Resource": "*"
        }
    ]
}</code></pre>
                 
                 
                    <h3 id="kendra-iam-role">Especificación de un rol </h3>
                    <p>Puede utilizar la consolaAWS CLI, la API o la API para especificar el rol de ejecución que se utilizará al llamar a la<code class="code">Query</code> operación de Amazon Kendra. </p>
                    <p>El usuario, rol o grupo que utilice para especificar el rol de tiempo de ejecución debe tener el<code class="code">iam:PassRole</code> permiso. La siguiente política define el permiso. Puede utilizar las claves de contexto de condición <code class="code">iam:AssociatedResourceArn</code> y <code class="code">iam:PassedToService</code> para limitar aún más el alcance de los permisos. Para obtener más información, consulte <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html">IAM yAWS STS Condition Context Keys</a> en la <em>Guía delAWS Identity and Access Management usuario</em>.</p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": "iam:PassRole",
            "Resource": "arn:aws:iam::<code class="replaceable">account</code>:role/<code class="replaceable">role</code>"
        }
    ]
}</code></pre>
                    <p>El rol de ejecución que Amazon Lex V2 debe usar para llamar a Amazon Kendra debe tener los<code class="code">kendra:Query</code> permisos. Cuando utilice un rol de IAM existente para obtener permiso para llamar a la<code class="code">Query</code> operación de Amazon Kendra, el rol debe incluir la siguiente política adjunta.</p>
                    <p>Puede utilizar la consola de IAM, la API de IAMAWS CLI para crear una política y asociarla a un rol. Estas instrucciones utilizan la CLI de AWS para crear el rol y las políticas.</p>
                    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>nota</h6></div><div class="awsdocs-note-text"><p>El siguiente código tiene formato para Linux y MacOS. Para Windows, reemplace el carácter de continuación de línea de Linux (\) por un signo de intercalación (^).</p></div></div>
                    <div class="procedure"><h6>Para agregar permisos de la operación Query a un rol</h6><ol><li>
                            <p>Cree un documento llamado <code class="userinput">KendraQueryPolicy.json</code> en el directorio actual, agregue el código siguiente y guárdelo.</p>
                            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "kendra:Query"
            ],
            "Resource": [
                "arn:aws:kendra:<code class="replaceable">region</code>:<code class="replaceable">account</code>:index/<code class="replaceable">index ID</code>"
            ]
        }
    ]
}</code></pre>
                        </li><li>
                            <p>EnAWS CLI, ejecute el siguiente comando para crear la política de IAM para ejecutar la<code class="code">Query</code> operación de Amazon Kendra.</p>
                            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws iam create-policy \
    --policy-name <code class="replaceable">query-policy-name</code> \
    --policy-document file://KendraQueryPolicy.json</code></pre>
                        </li><li>
                            <p>Asocie la política al rol de IAM al rol de IAM para llamar a la<code class="code">Query</code> operación.</p>
                            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws iam attach-role-policy \
    --policy-arn arn:aws:iam::<code class="replaceable">account-id</code>:policy/<code class="replaceable">query-policy-name</code>
    --role-name <code class="replaceable">role-name</code></code></pre>
                        </li></ol></div>
                    <p>Puede optar por actualizar la función vinculada al servicio Amazon Lex V2 o utilizar una función que haya creado al crearla<code class="code">AMAZON.KendraSearchIntent</code> para su bot. El siguiente procedimiento muestra cómo elegir el rol de IAM para utilizar.</p>
                    <div class="procedure"><h6>Para especificar la función de tiempo de ejecución de AMAZON. KendraSearchIntent</h6><ol><li>
                            <p>Inicie enAWS Management Console y y abra la consola de Amazon Lex en <a href="https://console.aws.amazon.com/lex/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/lex/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p>
                        </li><li>
                            <p>Elija el bot al que desee agregar <code class="code">AMAZON.KendraSearchIntent</code>.</p>
                        </li><li>
                            <p>Elija el signo más (+) situado junto a <b>Intenciones</b>.</p>
                        </li><li>
                            <p>En <b>Agregar intención</b>, elija <b>Buscar intenciones existentes</b>.</p>
                        </li><li>
                            <p>En <b>Intenciones de búsqueda</b>, escriba <code class="userinput">AMAZON.KendraSearchIntent</code> y elija <b>Agregar</b>.</p>
                        </li><li>
                            <p>En <b>Copiar intención integrada</b>, escriba un nombre para la intención, como <code class="userinput">KendraSearchIntent</code>, y elija <b>Agregar</b>.</p>
                        </li><li>
                            <p>Abra la sección de <b>consultas de Amazon Kendra</b>.</p>
                        </li><li>
                            <p>En <b>Rol de IAM</b>, elija una de las opciones siguientes:</p>
                            <div class="itemizedlist">
                                 
                                 
                            <ul class="itemizedlist"><li class="listitem">
                                    <p>Para actualizar la función vinculada al servicio Amazon Lex V2 para que su bot pueda consultar los índices de Amazon Kendra, seleccione <b>Agregar permisos de Amazon Kendra</b>.</p>
                                </li><li class="listitem">
                                    <p>Para usar un rol que tenga permiso para llamar a la<code class="code">Query</code> operación Amazon Kendra, elija <b>Usar un rol existente</b>.</p>
                                </li></ul></div>
                        </li></ol></div>
                 
             
                <h2 id="kendra-search-filter">Uso de atributos de solicitud y sesión como filtros</h2>
                <p>Para filtrar la respuesta de Amazon Kendra a los elementos relacionados con la conversación actual, utilice los atributos de sesión y solicitud como filtros; para ello, añada el<code class="code">queryFilterString</code> parámetro al crear su bot. Debe especificar un marcador de posición para el atributo al crear la intención y, a continuación, Amazon Lex V2 sustituye un valor antes de llamar a Amazon Kendra. Para obtener más información sobre los atributos de solicitud, consulte <a href="./context-mgmt-request-attribs.html">Cómo establecer los atributos de la solicitud</a>. Para obtener más información acerca de los atributos de la sesión, consulte <a href="./context-mgmt-session-attribs.html">Cómo establecer los atributos de la sesión</a>.</p>
                <p>A continuación se muestra un ejemplo de un<code class="code">queryFilterString</code> parámetro que utiliza una cadena para filtrar la consulta de Amazon Kendra.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"<span>{</span>"equalsTo": <span>{</span>"key": "City", "value": <span>{</span>"stringValue": "Seattle"}}}"</code></pre>
                <p>El siguiente es un ejemplo de un<code class="code">queryFilterString</code> parámetro que usa un atributo de sesión llamado<code class="code">"SourceURI"</code> para filtrar la consulta de Amazon Kendra.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"<span>{</span>"equalsTo": <span>{</span>"key": "SourceURI","value": <span>{</span>"stringValue": "[FileURL]"}}}"</code></pre>
                <p>El siguiente es un ejemplo de un<code class="code">queryFilterString</code> parámetro que usa un atributo de solicitud llamado<code class="code">"DepartmentName"</code> para filtrar la consulta de Amazon Kendra.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"<span>{</span>"equalsTo": <span>{</span>"key": "Department","value": <span>{</span>"stringValue": "((DepartmentName))"}}}"</code></pre>
                <p>Los<code class="code">AMAZON.KendraSearchInteng</code> filtros utilizan el mismo formato que los filtros de búsqueda de Amazon Kendra. Para obtener más información, consulte <a href="https://docs.aws.amazon.com/kendra/latest/dg/filtering.html#search-filtering">Uso de atributos de documentos para filtrar los resultados de búsqueda</a> en la <em>guía para desarrolladores de Amazon Kendra</em>.</p>
                <p>La cadena de filtro de consulta que se utiliza junto con las letras minúsculas<code class="code">AMAZON.KendraSearchIntent</code> deben utilizarse para la primera letra de cada filtro. Por ejemplo, a continuación se muestra un filtro de consulta válido para<code class="code">AMAZON.KendraSearchIntent</code>.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "andAllFilters": [
        <span>{</span>
            "equalsTo": <span>{</span>
                "key": "City",
                "value": <span>{</span>
                    "stringValue": "Seattle"
                }
            }
        },
        <span>{</span>
            "equalsTo": <span>{</span>
                "key": "State",
                "value": <span>{</span>
                    "stringValue": "Washington"
                }
            }
        }
    ]
}</code></pre>
             
                <h2 id="kendra-search-response">Uso de la respuesta de búsqueda</h2>
                <p>Amazon Kendra devuelve la respuesta a una búsqueda en una respuesta a la<code class="code">IntentClosingSetting</code> declaración de intenciones. La intención debe tener una<code class="code">closingResponse</code> sentencia, a menos que una función Lambda genere un mensaje de respuesta de cierre.</p>
                <p>Amazon Kendra tiene cinco tipos de respuestas. </p>
                <div class="itemizedlist">
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>Las dos respuestas siguientes requieren que se configure una sección de preguntas frecuentes para su índice de Amazon Kendra. Para obtener más información, consulta <a href="https://docs.aws.amazon.com/kendra/latest/dg/in-creating-faq.html">Añadir preguntas y respuestas directamente a un índice</a>.</p>
                        <div class="itemizedlist">
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p> <code class="code">x-amz-lex:kendra-search-response-question_answer-question-&lt;N&gt;</code>— La pregunta de una sección de preguntas frecuentes que coincide con la búsqueda. </p>
                            </li><li class="listitem">
                                <p> <code class="code">x-amz-lex:kendra-search-response-question_answer-answer-&lt;N&gt;</code>— La respuesta de una pregunta frecuente que coincide con la búsqueda. </p>
                            </li></ul></div>                        
                    </li><li class="listitem">
                        <p>Las tres respuestas siguientes requieren que se configure una fuente de datos para su índice de Amazon Kendra. Para obtener más información, consulte <a href="https://docs.aws.amazon.com/kendra/latest/dg/data-source.html">Crear una fuente de datos</a>. </p>
                        <div class="itemizedlist">
                             
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p><code class="code">x-amz-lex:kendra-search-response-document-&lt;N&gt;</code>— Un extracto de un documento del índice relacionado con el texto del enunciado.</p>
                            </li><li class="listitem">
                                <p><code class="code">x-amz-lex:kendra-search-response-document-link-&lt;N&gt;</code>— La URL de un documento del índice que está relacionada con el texto del enunciado.</p>
                            </li><li class="listitem">
                                <p><code class="code">x-amz-lex:kendra-search-response-answer-&lt;N&gt;</code>— Un extracto de un documento del índice que responde a la pregunta.</p>
                            </li></ul></div>
                    </li></ul></div>
                <p>Las respuestas se devuelven en atributos <code class="code">request</code>. Puede haber hasta cinco respuestas para cada atributo, numeradas del 1 al 5. Para obtener más información sobre las respuestas, consulte <a href="https://docs.aws.amazon.com/kendra/latest/dg/response-types.html">Tipos de respuesta</a> en la <em>Guía para desarrolladores de Amazon Kendra</em>. </p>
                <p>La declaración <code class="code">closingResponse</code> debe tener uno o varios grupos de mensajes. Cada grupo contiene uno o varios mensajes. Cada mensaje puede contener una o más variables de marcador de posición que se sustituyen por atributos de solicitud en la respuesta de Amazon Kendra. En el grupo de mensajes debe haber al menos un mensaje en el que todas las variables se hayan sustituido por los valores de atributo de solicitud obtenidos de la respuesta en tiempo de ejecución o debe haber un mensaje sin variables de marcador de posición. Los atributos de solicitud se separan con paréntesis dobles ("((" "))"). Los siguientes mensajes del grupo de mensajes coinciden con cualquier respuesta de Amazon Kendra:</p>
                <div class="itemizedlist">
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>«He encontrado una pregunta de preguntas frecuentes para ti: (x-amz-lex:kendra-search-response-question _answer-questionon-1)), y la respuesta es ((x-amz-lex:kendra-search-response-question _answer-answer-1))»</p>
                    </li><li class="listitem">
                        <p>«He encontrado un extracto de un documento útil: ((x-amz-lex:kendra-search-response-document -1))»</p>
                    </li><li class="listitem">
                        <p>«Creo que la respuesta a tus preguntas es ((x-amz-lex:kendra-search-response-answer -1))»</p>
                    </li></ul></div>
             
                <h2 id="kendra-search-lambda">Uso de una función Lambda para gestionar la solicitud y la respuesta</h2>
                <p>La<code class="code">AMAZON.KendraSearchIntent</code> intención puede utilizar el enlace de código de diálogo y el enlace del código de logística para gestionar la solicitud a Amazon Kendra y la respuesta. Utilice la función Lambda de enlace de códigos de diálogo cuando desee modificar la consulta que envía a Amazon Kendra y la función Lambda de enlace de códigos de cumplimiento cuando desee modificar la respuesta.</p>
                 
                    <h3 id="kendra-search-lambda-dialog">Creación de una consulta con el enlace de código de diálogo</h3>
                    <p>Puede utilizar el enlace de código de diálogo para crear una consulta y enviarla a Amazon Kendra. El uso del enlace de código de diálogo es opcional. Si no especifica un enlace de código de diálogo, Amazon Lex V2 crea una consulta a partir de la expresión del usuario y utiliza la<code class="code">queryFilterString</code> que proporcionó al configurar la intención, si la proporcionó.</p>
                    <p>Puede utilizar dos campos del cuadro de diálogo Code Hook Response para modificar la solicitud a Amazon Kendra:</p>
                    <div class="itemizedlist">
                         
                         
                    <ul class="itemizedlist"><li class="listitem">
                            <p><code class="code">kendraQueryFilterString</code>— Utilice esta cadena para especificar los filtros de atributos para la solicitud de Amazon Kendra. Puede filtrar la consulta utilizando cualquiera de los campos definidos en el índice. Para conocer la estructura de la cadena de filtro, consulte <a href="https://docs.aws.amazon.com/kendra/latest/dg/filtering.html#search-filtering">Uso de atributos de documentos para filtrar consultas</a> en la <em>Guía para desarrolladores de Amazon Kendra</em>. Si la cadena de filtro especificada no es válida, aparecerá una excepción <code class="code">InvalidLambdaResponseException</code>. La cadena <code class="code">kendraQueryFilterString</code> invalida cualquier otra cadena de consulta especificada en el campo <code class="code">queryFilterString</code> configurado para la intención.</p>
                        </li><li class="listitem">
                            <p><code class="code">kendraQueryRequestPayload</code>— Utilice esta cadena para especificar una consulta de Amazon Kendra. Su consulta puede utilizar cualquiera de las funciones de Amazon Kendra. Si no especifica una consulta válida, aparecerá una excepción <code class="code">InvalidLambdaResponseException</code>. Para obtener más información, consulte la <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_Query.html">consulta</a> en la <em>Guía para desarrolladores de Amazon Kendra</em>.</p>
                        </li></ul></div>
                    <p>Una vez creado el filtro o la cadena de consulta, envía la respuesta a Amazon Lex V2 con el<code class="code">dialogAction</code> campo de la respuesta establecido en<code class="code">delegate</code>. Amazon Lex V2 envía la consulta a Amazon Kendra y, a continuación, devuelve la respuesta de la consulta al enlace del código de gestión logística.</p>
                 
                 
                    <h3 id="kendra-search-lambda-fulfillment">Uso del enlace de código de cumplimentación en la respuesta</h3>
                    <p>Cuando Amazon Lex V2 envía una consulta a Amazon Kendra, la respuesta de la consulta se devuelve a la función Lambda de<code class="code">AMAZON.KendraSearchIntent</code> cumplimiento. El evento de entrada al enlace de código contiene la respuesta completa de Amazon Kendra. Los datos de la consulta tienen la misma estructura que los devueltos por la<code class="code">Query</code> operación de Amazon Kendra. Para obtener más información, consulte la <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_Query.html#API_Query_ResponseSyntax">sintaxis de las respuestas a las consultas</a> en la <em>Guía para desarrolladores de Amazon Kendra</em>.</p>
                    <p>El enlace de código de cumplimentación es opcional. Si no existe ninguno o si el enlace de código no devuelve ningún mensaje en la respuesta, Amazon Lex V2 utiliza la<code class="code">closingResponse</code> sentencia para las respuestas.</p>
                 
            <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Aviso" /> <strong>JavaScript está desactivado o no está disponible en su navegador.</strong></p><p>Para utilizar la documentación de AWS, debe estar habilitado JavaScript. Para obtener más información, consulte las páginas de ayuda de su navegador.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenciones del documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./built-in-intent-help.html">AMAZONA. HelpIntent</div><div id="next" class="next-link" accesskey="n" href="./faq-bot-kendra-search.html">Ejemplo: creación de un bot de preguntas frecuentes para un índice de Amazon Kendra</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - Sí</div><div class="content"><p>Gracias por hacernos saber que estamos haciendo un buen trabajo.</p><p>Si tiene un momento, díganos qué es lo que le ha gustado para que podamos seguir trabajando en esa línea.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lex&amp;topic_url=https://docs.aws.amazon.com/es_es/lexv2/latest/dg/built-in-intent-kendra-search.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - No</div><div class="content"><p>Gracias por informarnos de que debemos trabajar en esta página. Lamentamos haberle defraudado.</p><p>Si tiene un momento, díganos cómo podemos mejorar la documentación.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lex&amp;topic_url=https://docs.aws.amazon.com/es_es/lexv2/latest/dg/built-in-intent-kendra-search.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>