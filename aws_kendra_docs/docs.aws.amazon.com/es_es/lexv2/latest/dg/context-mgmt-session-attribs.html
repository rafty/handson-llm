<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="es-ES"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Cómo establecer los atributos de la sesión - Amazon Lex</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="context-mgmt-session-attribs" /><meta name="default_state" content="context-mgmt-session-attribs" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/lexv2/latest/dg/context-mgmt-session-attribs.html" /><meta name="description" content="Los atributos de sesión contienen información específica de la aplicación que se transfiere entre un bot y una aplicación cliente durante una sesión. Amazon Lex pasa los atributos de sesión a todas las funciones de Lambda configuradas para un bot. Si una función de Lambda añade o actualiza los atributos de sesión, Amazon Lex devuelve la nueva información a la aplicación cliente." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Lex" /><meta name="guide" content="Guía para desarrolladores de V2" /><meta name="abstract" content="Proporciona una descripción general conceptual de Amazon Lex V2. Incluye instrucciones detalladas sobre el uso de diversas funciones, como la transmisión de conversaciones, y proporciona una referencia completa de las API de la versión 2." /><meta name="guide-locale" content="es_es" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/es_es/lexv2/latest/dg/context-mgmt-session-attribs.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/lexv2/latest/dg/context-mgmt-session-attribs.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/lexv2/latest/dg/context-mgmt-session-attribs.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/lexv2/latest/dg/context-mgmt-session-attribs.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/lexv2/latest/dg/context-mgmt-session-attribs.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/lexv2/latest/dg/context-mgmt-session-attribs.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/lexv2/latest/dg/context-mgmt-session-attribs.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/lexv2/latest/dg/context-mgmt-session-attribs.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/lexv2/latest/dg/context-mgmt-session-attribs.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/lexv2/latest/dg/context-mgmt-session-attribs.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/lexv2/latest/dg/context-mgmt-session-attribs.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/lexv2/latest/dg/context-mgmt-session-attribs.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/lexv2/latest/dg/context-mgmt-session-attribs.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/lexv2/latest/dg/context-mgmt-session-attribs.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/lexv2/latest/dg/context-mgmt-session-attribs.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/lexv2/latest/dg/context-mgmt-session-attribs.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/lexv2/latest/dg/context-mgmt-session-attribs.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/lexv2/latest/dg/context-mgmt-session-attribs.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/lexv2/latest/dg/context-mgmt-session-attribs.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/lexv2/latest/dg/context-mgmt-session-attribs.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/lexv2/latest/dg/context-mgmt-session-attribs.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/lexv2/latest/dg/context-mgmt-session-attribs.html" hreflang="x-default" /><meta name="feedback-item" content="Lex" /><meta name="this_doc_product" content="Amazon Lex" /><meta name="this_doc_guide" content="Guía para desarrolladores de V2" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'lex'}"></script><meta id="panorama-serviceSubSection" value="Guía para desarrolladores de V2" /><meta id="panorama-serviceConsolePage" value="Cómo establecer los atributos de la sesión" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Cómo establecer los atributos de la sesión - Amazon Lex</title><meta name="pdf" content="lex2.0.pdf#context-mgmt-session-attribs" /><meta name="rss" content="amazon-lex-v2-document-history.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=251" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lex&amp;topic_url=http://docs.aws.amazon.com/es_es/lexv2/latest/dg/context-mgmt-session-attribs.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/es_es/lexv2/latest/dg/context-mgmt-session-attribs.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/es_es/lexv2/latest/dg/context-mgmt-session-attribs.html" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Lex",
        "item" : "https://docs.aws.amazon.com/lex/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Guía para desarrolladores de V2",
        "item" : "https://docs.aws.amazon.com/es_es/lexv2/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Uso de bots",
        "item" : "https://docs.aws.amazon.com/es_es/lexv2/latest/dg/using-bots.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Administrar el contexto de la conversación",
        "item" : "https://docs.aws.amazon.com/es_es/lexv2/latest/dg/using-contexts.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Cómo establecer los atributos de la sesión",
        "item" : "https://docs.aws.amazon.com/es_es/lexv2/latest/dg/using-contexts.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="lex2.0.pdf#context-mgmt-session-attribs" target="_blank" rel="noopener noreferrer" title="Abrir PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentación</a><a href="/lex/index.html">Amazon Lex</a><a href="what-is.html">Guía para desarrolladores de V2</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Las traducciones son generadas a través de traducción automática. En caso de conflicto entre la traducción y la version original de inglés, prevalecerá la version en inglés.</p></awsui-alert><h1 class="topictitle" id="context-mgmt-session-attribs">Cómo establecer los atributos de la sesión</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p><em>Los atributos de sesión</em> contienen información específica de la aplicación que se transfiere entre un bot y una aplicación cliente durante una sesión. Amazon Lex pasa los atributos de sesión a todas las funciones de Lambda configuradas para un bot. Si una función de Lambda añade o actualiza los atributos de sesión, Amazon Lex devuelve la nueva información a la aplicación cliente. </p><p>Utilice los atributos de sesión en sus funciones de Lambda para inicializar un bot y personalizar las indicaciones y las tarjetas de respuesta. Por ejemplo:</p><div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>Inicialización: en un robot de pedidos de pizza, la aplicación cliente transfiere la ubicación del usuario como atributo de sesión en la primera llamada a la <a href="https://docs.aws.amazon.com/lexv2/latest/APIReference/API_runtime_RecognizeUtterance.html">RecognizeUtterance</a>operación <a href="https://docs.aws.amazon.com/lexv2/latest/APIReference/API_runtime_RecognizeText.html">RecognizeText</a>o. Por ejemplo, <code class="code">"Location": "111 Maple
                        Street"</code>. La función Lambda utiliza esta información para encontrar la pizzería más cercana para realizar el pedido.</p>
            </li><li class="listitem">
                <p>Personalize las indicaciones: configure las indicaciones y las tarjetas de respuesta para hacer referencia a los atributos de la sesión. Por ejemplo, «Hola [FirstName], ¿qué ingredientes quieres?» Si introduce el nombre del usuario como atributo de sesión (<code class="code"><span>{</span>"FirstName": "Vivian"}</code>), Amazon Lex sustituirá el marcador por el nombre. A continuación, envía un mensaje personalizado al usuario: «Hola, Vivian, ¿qué ingredientes quieres?»</p>
            </li></ul></div><p>Los atributos de la sesión se mantienen durante la sesión. Amazon Lex los almacena en un almacén de datos cifrado hasta que finalice la sesión. El cliente puede crear atributos de sesión en una solicitud llamando a la <a href="https://docs.aws.amazon.com/lexv2/latest/APIReference/API_runtime_RecognizeUtterance.html">RecognizeUtterance</a>operación <a href="https://docs.aws.amazon.com/lexv2/latest/APIReference/API_runtime_RecognizeText.html">RecognizeText</a>o con el<code class="code">sessionAttributes</code> campo establecido en un valor. Una función Lambda puede crear un atributo de sesión en una respuesta. Una vez que el cliente o una función de Lambda crean un atributo de sesión, el valor del atributo almacenado se utiliza siempre que la aplicación cliente no incluya un<code class="code">sessionAttribute</code> campo en una solicitud a Amazon Lex.</p><p>Por ejemplo, supongamos que tiene dos atributos de la sesión: <code class="code"><span>{</span>"x":
                "1", "y": "2"}</code>. Si el cliente llama a la<code class="code">RecognizeUtterance</code> operación<code class="code">RecognizeText</code> o sin especificar el<code class="code">sessionAttributes</code> campo, Amazon Lex llama a la función Lambda con los atributos de sesión almacenados (<code class="code"><span>{</span>"x": 1, "y": 2}</code>). Si la función Lambda no devuelve los atributos de sesión, Amazon Lex devuelve los atributos de sesión almacenados a la aplicación cliente.</p><p>Si la aplicación cliente o una función de Lambda transfieren los atributos de sesión, Amazon Lex actualiza los atributos de sesión almacenados. Al pasar un valor existente, como por ejemplo <code class="code"> <span>{</span>"x": 2}</code>, se actualiza el valor almacenado. Si pasa un nuevo conjunto de atributos de sesión, por ejemplo <code class="code"><span>{</span>"z": 3}</code>, los valores existentes se eliminan y solo se mantiene el nuevo valor. Cuando se pasa una asignación vacía, <code class="code"><span>{</span>}</code>, los valores almacenados se borran.</p><p>Para enviar atributos de sesión a Amazon Lex, debe crear un string-to-string mapa de los atributos. A continuación, se muestra cómo asignar atributos de la sesión: </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
   "attributeName": "attributeValue",
   "attributeName": "attributeValue"
}</code></pre><p>Para la<code class="code">RecognizeText</code> operación, inserte el mapa en el cuerpo de la solicitud mediante el<code class="code">sessionAttributes</code> campo de la<code class="code">sessionState</code> estructura, de la siguiente manera:</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copiar"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"sessionState": <span>{</span>
    "sessionAttributes": <span>{</span>
        "attributeName": "attributeValue",
        "attributeName": "attributeValue"
    }
}</code></pre><p>Para la<code class="code">RecognizeUtterance</code> operación, codifica el mapa en base64 y, a continuación, lo envía como parte del<code class="code">x-amz-lex-session-state</code> encabezado.</p><p>Si va a enviar datos binarios o estructurados en un atributo de la sesión, primero debe transformar los datos en una cadena sencilla. Para obtener más información, consulte <a href="./context-mgmt-complex-attributes.html">Cómo establecer los atributos complejos</a>.</p><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Aviso" /> <strong>JavaScript está desactivado o no está disponible en su navegador.</strong></p><p>Para utilizar la documentación de AWS, debe estar habilitado JavaScript. Para obtener más información, consulte las páginas de ayuda de su navegador.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Convenciones del documento</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./context-mgmt-default.html">Uso de valores de ranura predeterminados</div><div id="next" class="next-link" accesskey="n" href="./context-mgmt-request-attribs.html">Cómo establecer los atributos de la solicitud</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - Sí</div><div class="content"><p>Gracias por hacernos saber que estamos haciendo un buen trabajo.</p><p>Si tiene un momento, díganos qué es lo que le ha gustado para que podamos seguir trabajando en esa línea.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lex&amp;topic_url=https://docs.aws.amazon.com/es_es/lexv2/latest/dg/context-mgmt-session-attribs.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">¿Le ha servido de ayuda esta página? - No</div><div class="content"><p>Gracias por informarnos de que debemos trabajar en esta página. Lamentamos haberle defraudado.</p><p>Si tiene un momento, díganos cómo podemos mejorar la documentación.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Comentarios" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lex&amp;topic_url=https://docs.aws.amazon.com/es_es/lexv2/latest/dg/context-mgmt-session-attribs.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>