<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Using service-linked roles for Refactor Spaces - AWS Migration Hub Refactor Spaces</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="using-service-linked-roles" /><meta name="default_state" content="using-service-linked-roles" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/migrationhub-refactor-spaces/latest/userguide/using-service-linked-roles.html" /><meta name="description" content="How to use service-linked roles to give Refactor Spaces access to resources in your AWS account." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS Migration Hub Refactor Spaces" /><meta name="guide" content="User Guide" /><meta name="abstract" content="AWS Migration Hub Refactor Spaces User Guide" /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/migrationhub-refactor-spaces/latest/userguide/using-service-linked-roles.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/migrationhub-refactor-spaces/latest/userguide/using-service-linked-roles.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/migrationhub-refactor-spaces/latest/userguide/using-service-linked-roles.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/migrationhub-refactor-spaces/latest/userguide/using-service-linked-roles.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/migrationhub-refactor-spaces/latest/userguide/using-service-linked-roles.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/migrationhub-refactor-spaces/latest/userguide/using-service-linked-roles.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/migrationhub-refactor-spaces/latest/userguide/using-service-linked-roles.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/migrationhub-refactor-spaces/latest/userguide/using-service-linked-roles.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/migrationhub-refactor-spaces/latest/userguide/using-service-linked-roles.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/migrationhub-refactor-spaces/latest/userguide/using-service-linked-roles.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/migrationhub-refactor-spaces/latest/userguide/using-service-linked-roles.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/migrationhub-refactor-spaces/latest/userguide/using-service-linked-roles.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/migrationhub-refactor-spaces/latest/userguide/using-service-linked-roles.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/migrationhub-refactor-spaces/latest/userguide/using-service-linked-roles.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/migrationhub-refactor-spaces/latest/userguide/using-service-linked-roles.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/migrationhub-refactor-spaces/latest/userguide/using-service-linked-roles.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/migrationhub-refactor-spaces/latest/userguide/using-service-linked-roles.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/migrationhub-refactor-spaces/latest/userguide/using-service-linked-roles.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/migrationhub-refactor-spaces/latest/userguide/using-service-linked-roles.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/migrationhub-refactor-spaces/latest/userguide/using-service-linked-roles.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/migrationhub-refactor-spaces/latest/userguide/using-service-linked-roles.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/migrationhub-refactor-spaces/latest/userguide/using-service-linked-roles.html" hreflang="x-default" /><meta name="feedback-item" content="migrationhub-refactor-spaces" /><meta name="this_doc_product" content="AWS Migration Hub Refactor Spaces" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'migrationhub'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="Using service-linked roles for Refactor Spaces" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Using service-linked roles for Refactor Spaces - AWS Migration Hub Refactor Spaces</title><meta name="pdf" content="/pdfs/migrationhub-refactor-spaces/latest/userguide/migrationhub-refactor-spaces-ug.pdf#using-service-linked-roles" /><meta name="rss" content="migrationhub-refactor-spaces.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=255" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=migrationhub-refactor-spaces&amp;topic_url=http://docs.aws.amazon.com/en_us/migrationhub-refactor-spaces/latest/userguide/using-service-linked-roles.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/migrationhub-refactor-spaces/latest/userguide/using-service-linked-roles.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/migrationhub-refactor-spaces/latest/userguide/using-service-linked-roles.html" /><meta name="keywords" content="Refactor Spaces,AWS Migration Hub Refactor Spaces,migrationhub-refactor-spaces" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS Migration Hub Refactor Spaces",
        "item" : "https://docs.aws.amazon.com/migrationhub/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/migrationhub-refactor-spaces/latest/userguide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Security in AWS Migration Hub Refactor Spaces",
        "item" : "https://docs.aws.amazon.com/migrationhub-refactor-spaces/latest/userguide/security.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Identity and Access Management for AWS Migration Hub Refactor Spaces",
        "item" : "https://docs.aws.amazon.com/migrationhub-refactor-spaces/latest/userguide/security-iam.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Using service-linked roles for Refactor Spaces",
        "item" : "https://docs.aws.amazon.com/migrationhub-refactor-spaces/latest/userguide/security-iam.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/migrationhub-refactor-spaces/latest/userguide/migrationhub-refactor-spaces-ug.pdf#using-service-linked-roles" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/migrationhub/index.html">AWS Migration Hub Refactor Spaces</a><a href="what-is-mhub-refactor-spaces.html">User Guide</a></div><div id="page-toc-src"><a href="#slr-permissions">Service-linked role permissions for
                Refactor Spaces</a><a href="#create-slr">Creating a service-linked role for Refactor Spaces</a><a href="#edit-slr">Editing a service-linked role for Refactor Spaces</a><a href="#delete-slr">Deleting a service-linked role for Refactor Spaces</a><a href="#slr-regions">Supported Regions for Refactor Spaces service-linked
                roles</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="using-service-linked-roles">Using service-linked roles for
            Refactor Spaces</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>AWS Migration Hub Refactor Spaces uses AWS Identity and Access Management (IAM)<a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-linked-role"> service-linked roles</a>. A service-linked role is a unique type of IAM role
        that is linked directly to Refactor Spaces. Service-linked roles are predefined by
        Refactor Spaces and include all the permissions that the service requires to call other AWS
        services on your behalf. </p><p>A service-linked role makes setting up Refactor Spaces easier because you don’t have to
        manually add the necessary permissions. Refactor Spaces defines the permissions of its
        service-linked roles, and unless defined otherwise, only Refactor Spaces can assume its roles.
        The defined permissions include the trust policy and the permissions policy, and that
        permissions policy cannot be attached to any other IAM entity.</p><p>You can delete a service-linked role only after first deleting their related resources.
        This protects your Refactor Spaces resources because you can't inadvertently remove permission
        to access the resources.</p><p>For information about other services that support service-linked roles, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_aws-services-that-work-with-iam.html">AWS Services
            That Work with IAM</a> and look for the services that have <b>Yes
        </b>in the <b>Service-Linked Role</b> column. Choose a
            <b>Yes</b> with a link to view the service-linked role
        documentation for that service.</p>
        <h2 id="slr-permissions">Service-linked role permissions for
                Refactor Spaces</h2>
        <p>Refactor Spaces uses the service-linked role named <b>AWSServiceRoleForMigrationHubRefactorSpaces</b> and
            associates it with the <b>MigrationHubRefactorSpacesServiceRolePolicy</b> IAM policy –
            Provides access to AWS resources managed or used by AWS Migration Hub Refactor Spaces.</p>
        <p>The AWSServiceRoleForMigrationHubRefactorSpaces service-linked role trusts the following services to assume the
            role:</p>
        <div class="itemizedlist">
             
        <ul class="itemizedlist"><li class="listitem">
                <p><code class="code">refactor-spaces.amazonaws.com</code></p>
            </li></ul></div>
        <p>The following is the Amazon Resource Name (ARN) for AWSServiceRoleForMigrationHubRefactorSpaces.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="">arn:aws:iam::111122223333:role/aws-service-role/refactor-spaces.amazonaws.com/AWSServiceRoleForMigrationHubRefactorSpaces</code></pre>
        <p>Refactor Spaces uses the <b>AWSServiceRoleForMigrationHubRefactorSpaces</b> service-linked role when performing
            cross-account changes. This role must be present in your account to use Refactor Spaces. If it
            is not present, Refactor Spaces creates it during the following API calls:</p>
        <div class="itemizedlist">
             
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><code class="code">CreateEnvironment</code></p>
            </li><li class="listitem">
                <p><code class="code">CreateService</code></p>
            </li><li class="listitem">
                <p><code class="code">CreateApplication</code></p>
            </li><li class="listitem">
                <p><code class="code">CreateRoute</code></p>
            </li></ul></div>
        <p>You must have <code class="code">iam:CreateServiceLinkedRole</code> permissions to create the
            service-linked role. If the service-linked role doesn't exist in your account and cannot
            be created, the <code class="code">Create</code> calls will fail. You must create the service-linked
            role in the IAM console before using Refactor Spaces, unless you are using the Refactor Spaces
            console. </p>
        <p>Refactor Spaces does not use the service-linked role when making changes in the current
            signed-in account. For example, when an application is created, Refactor Spaces updates all of
            the VPCs in the environment so that they can communicate with the newly added VPC. If
            the VPCs are in other accounts, Refactor Spaces uses the service-linked role and the
                <code class="code">ec2:CreateRoute</code> permission to update the route tables in other
            accounts.</p>
        <p>To further expand on the create application example, when creating an application,
            Refactor Spaces updates the route tables that are in the virtual private cloud (VPC) provided
            in the <code class="code">CreateApplication</code> call. This way, the VPC can communicate with other
            VPCs in the environment. </p>
        <p>The caller must have the <code class="code">ec2:CreateRoute</code> permission that we use to update
            the route tables. This permission exists in the service-linked role, but Refactor Spaces does
            not use the service-linked role in the caller’s account to gain this permission.
            Instead, the caller must have the <code class="code">ec2:CreateRoute</code> permission. Otherwise,
            the call fails. </p>
        <p>You cannot use the service-linked role to escalate your privileges. Your account must
            already have the permissions in the service-linked role to make the changes in the
            calling account. The <code class="code">AWSMigrationHubRefactorSpacesFullAccess</code> managed
            policy, together with a policy that grants the extra required permissions, defines all
            of the necessary permissions to create Refactor Spaces resources. The service-linked role is a
            subset of these permissions that is used for specific cross-account calls. For more
            information about <code class="code">AWSMigrationHubRefactorSpacesFullAccess</code>, see <a href="./security-iam-awsmanpol.html#security-iam-awsmanpol-AWSMigrationHubRefactorSpacesFullAccess">AWS
                managed policy: AWSMigrationHubRefactorSpacesFullAccess</a>.</p>
        <p></p>
         
            <h3 id="slr-permissions-tags">Tags</h3>
            <p>When Refactor Spaces creates resources in your account, they are tagged with the
                appropriate Refactor Spaces resource ID. For example, the Transit Gateway created from
                    <code class="code">CreateEnvironment</code> is tagged with the
                    <code class="code">refactor-spaces:environment-id</code> tag with the environment ID as the
                value. The API Gateway API created from <code class="code">CreateApplication</code> is tagged with
                    <code class="code">refactor-spaces:application-id</code> with the application ID as the
                value. These tags allow Refactor Spaces to manage these resources. If you edit or remove
                the tags, Refactor Spaces can no longer update or delete the resource.</p>
         

         
            <h3 id="slr-permissions-iam-policy">MigrationHubRefactorSpacesServiceRolePolicy</h3>
            <p>The role permissions policy named MigrationHubRefactorSpacesServiceRolePolicy allows Refactor Spaces to
                complete the following actions on the specified resources:</p>
            
            
            
            <div class="variablelist">
                 
                 
                 
                 
            <dl>
                    <dt><span class="term">Amazon API Gateway actions</span></dt>
                    <dd>
                        <p>
                            <code class="code">apigateway:PUT</code>
                        </p>
                        <p>
                            <code class="code">apigateway:POST</code>
                        </p>
                        <p>
                            <code class="code">apigateway:GET</code>
                        </p>
                        <p>
                            <code class="code">apigateway:PATCH</code>
                        </p>
                        <p>
                            <code class="code">apigateway:DELETE</code>
                        </p>
                    </dd>
                 

                    <dt><span class="term">Amazon Elastic Compute Cloud actions</span></dt>
                    <dd>
                        <p>
                            <code class="code">ec2:DescribeNetworkInterfaces</code>
                        </p>
                        <p>
                            <code class="code">ec2:DescribeRouteTables</code>
                        </p>
                        <p>
                            <code class="code">ec2:DescribeSubnets</code>
                        </p>
                        <p>
                            <code class="code">ec2:DescribeSecurityGroups</code>
                        </p>
                        <p>
                            <code class="code">ec2:DescribeVpcEndpointServiceConfigurations</code>
                        </p>
                        <p>
                            <code class="code">ec2:DescribeTransitGatewayVpcAttachments</code>
                        </p>
                        <p>
                            <code class="code">ec2:AuthorizeSecurityGroupIngress</code>
                        </p>
                        <p>
                            <code class="code">ec2:RevokeSecurityGroupIngress</code>
                        </p>
                        <p>
                            <code class="code">ec2:DeleteSecurityGroup</code>
                        </p>
                        <p>
                            <code class="code">ec2:DeleteTransitGatewayVpcAttachment</code>
                        </p>
                        <p>
                            <code class="code">ec2:CreateRoute</code>
                        </p>
                        <p>
                            <code class="code">ec2:DeleteRoute</code>
                        </p>
                        <p>
                            <code class="code">ec2:DeleteTags</code>
                        </p>
                        <p>
                            <code class="code">ec2:DeleteVpcEndpointServiceConfigurations</code>
                        </p>
                    </dd>
                 
                    <dt><span class="term">AWS Resource Access Manager actions</span></dt>
                    <dd>
                        <p>
                            <code class="code">ram:GetResourceShareAssociations</code>
                        </p>
                        <p>
                            <code class="code">ram:DeleteResourceShare</code>
                        </p>
                        <p>
                            <code class="code">ram:AssociateResourceShare</code>
                        </p>
                        <p>
                            <code class="code">ram:DisassociateResourceShare</code>
                        </p>
                    </dd>
                 
                    <dt><span class="term">Elastic Load Balancing; actions</span></dt>
                    <dd>
                        <p>
                            <code class="code">elasticloadbalancing:DescribeTargetHealth</code>
                        </p>
                        <p>
                            <code class="code">elasticloadbalancing:DescribeListener</code>
                        </p>
                        <p>
                            <code class="code">elasticloadbalancing:DescribeTargetGroups</code>
                        </p>
                        <p>
                            <code class="code">elasticloadbalancing:RegisterTargets</code>
                        </p>
                        <p>
                            <code class="code">elasticloadbalancing:CreateLoadBalancerListeners</code>
                        </p>
                        <p>
                            <code class="code">elasticloadbalancing:CreateListener</code>
                        </p>
                        <p>
                            <code class="code">elasticloadbalancing:DeleteListener</code>
                        </p>
                        <p>
                            <code class="code">elasticloadbalancing:DeleteTargetGroup</code>
                        </p>
                        <p>
                            <code class="code">elasticloadbalancing:DeleteLoadBalancer</code>
                        </p>
                        <p>
                            <code class="code">elasticloadbalancing:DeregisterTargets</code>
                        </p>
                        <p>
                            <code class="code">elasticloadbalancing:AddTags</code>
                        </p>
                        <p>
                            <code class="code">elasticloadbalancing:CreateTargetGroup</code>
                        </p>
                    </dd>
                </dl></div>

            <p>The following is the full policy showing which resources the preceding actions
                apply to:</p>

            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "ec2:DescribeNetworkInterfaces",
                "ec2:DescribeRouteTables",
                "ec2:DescribeSubnets",
                "ec2:DescribeSecurityGroups",
                "ec2:DescribeVpcEndpointServiceConfigurations",
                "ec2:DescribeTransitGatewayVpcAttachments",
                "elasticloadbalancing:DescribeTargetHealth",
                "elasticloadbalancing:DescribeListeners",
                "elasticloadbalancing:DescribeTargetGroups",
                "ram:GetResourceShareAssociations"
            ],
            "Resource": "*"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "ec2:AuthorizeSecurityGroupIngress",
                "ec2:RevokeSecurityGroupIngress",
                "ec2:DeleteSecurityGroup",
                "ec2:DeleteTransitGatewayVpcAttachment",
                "ec2:CreateRoute",
                "ec2:DeleteRoute",
                "ec2:DeleteTags",
                "ram:DeleteResourceShare",
                "ram:AssociateResourceShare",
                "ram:DisassociateResourceShare"
            ],
            "Resource": "*",
            "Condition": <span>{</span>
                "Null": <span>{</span>
                    "aws:ResourceTag/refactor-spaces:environment-id": "false"
                }
            }
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": "ec2:DeleteVpcEndpointServiceConfigurations",
            "Resource": "*",
            "Condition": <span>{</span>
                "Null": <span>{</span>
                    "aws:ResourceTag/refactor-spaces:application-id": "false"
                }
            }
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "elasticloadbalancing:RegisterTargets",
                "elasticloadbalancing:CreateLoadBalancerListeners",
                "elasticloadbalancing:CreateListener",
                "elasticloadbalancing:DeleteListener",
                "elasticloadbalancing:DeleteTargetGroup"
            ],
            "Resource": "*",
            "Condition": <span>{</span>
                "StringLike": <span>{</span>
                    "aws:ResourceTag/refactor-spaces:route-id": [
                        "*"
                    ]
                }
            }
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "apigateway:PUT",
                "apigateway:POST",
                "apigateway:GET",
                "apigateway:PATCH",
                "apigateway:DELETE"
            ],
            "Resource": [
                "arn:aws:apigateway:*::/restapis",
                "arn:aws:apigateway:*::/restapis/*",
                "arn:aws:apigateway:*::/vpclinks/*",
                "arn:aws:apigateway:*::/tags",
                "arn:aws:apigateway:*::/tags/*"
            ],
            "Condition": <span>{</span>
                "Null": <span>{</span>
                    "aws:ResourceTag/refactor-spaces:application-id": "false"
                }
            }
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": "apigateway:GET",
            "Resource": "arn:aws:apigateway:*::/vpclinks/*"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": "elasticloadbalancing:DeleteLoadBalancer",
            "Resource": "arn:*:elasticloadbalancing:*:*:loadbalancer/net/refactor-spaces-nlb-*"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "elasticloadbalancing:AddTags",
                "elasticloadbalancing:CreateListener"
            ],
            "Resource": "arn:*:elasticloadbalancing:*:*:loadbalancer/net/refactor-spaces-nlb-*",
            "Condition": <span>{</span>
                "Null": <span>{</span>
                    "aws:RequestTag/refactor-spaces:route-id": "false"
                }
            }
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": "elasticloadbalancing:DeleteListener",
            "Resource": "arn:*:elasticloadbalancing:*:*:listener/net/refactor-spaces-nlb-*"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "elasticloadbalancing:DeleteTargetGroup",
                "elasticloadbalancing:RegisterTargets"
            ],
            "Resource": "arn:*:elasticloadbalancing:*:*:targetgroup/refactor-spaces-tg-*"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "elasticloadbalancing:DeregisterTargets"
            ],
            "Resource": "arn:*:elasticloadbalancing:*:*:targetgroup/refactor-spaces-tg-*",
            "Condition": <span>{</span>
                "Null": <span>{</span>
                    "aws:ResourceTag/refactor-spaces:route-id": "false"
                }
            }
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "elasticloadbalancing:AddTags",
                "elasticloadbalancing:CreateTargetGroup"
            ],
            "Resource": "arn:*:elasticloadbalancing:*:*:targetgroup/refactor-spaces-tg-*",
            "Condition": <span>{</span>
                "Null": <span>{</span>
                    "aws:RequestTag/refactor-spaces:route-id": "false"
                }
            }
        }
    ]
}</code></pre>
         
        <p>You must configure permissions to allow an IAM entity (such as a user, group, or
            role) to create, edit, or delete a service-linked role. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/using-service-linked-roles.html#service-linked-role-permissions">Service-Linked Role Permissions</a> in the
                <em>IAM User Guide</em>.</p>
     
        <h2 id="create-slr">Creating a service-linked role for Refactor Spaces</h2>
        
        <p>You don't need to manually create a service-linked role. When you
            create Refactor Spaces environment, application, service, or route resources in the AWS Management Console, the AWS CLI, or the AWS API, Refactor Spaces
            creates the service-linked role for you. For more information about creating a
            service-linked role for Refactor Spaces, see <a href="#slr-permissions">Service-linked role permissions for
                Refactor Spaces</a>.</p>
        
        
        <p>If you delete this service-linked role, and then need to create it again, you can use
            the same process to recreate the role in your account. When you
            create Refactor Spaces environment, application, service, or route resources, Refactor Spaces creates the service-linked role for you again. </p>
        
        
        
     
        <h2 id="edit-slr">Editing a service-linked role for Refactor Spaces</h2>
        <p>Refactor Spaces does not allow you to edit the AWSServiceRoleForMigrationHubRefactorSpaces service-linked role. After you
            create a service-linked role, you cannot change the name of the role because various
            entities might reference the role. However, you can edit the description of the role
            using IAM. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/using-service-linked-roles.html#edit-service-linked-role">Editing a Service-Linked Role</a> in the
            <em>IAM User Guide</em>.</p>
     
        <h2 id="delete-slr">Deleting a service-linked role for Refactor Spaces</h2>
        
        <p>If you no longer need to use a feature or service that requires a service-linked role,
            we recommend that you delete that role. That way you don’t have an unused entity that is
            not actively monitored or maintained. However, you must clean up the resources for your
            service-linked role before you can manually delete it.</p>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>If the Refactor Spaces service is using the role when you try to delete the
                resources, then the deletion might fail. If that happens, wait for a few minutes and
                try the operation again.</p></div></div>

        <p>To delete the Refactor Spaces resources used by AWSServiceRoleForMigrationHubRefactorSpaces, use the Refactor Spaces console to
            delete the resources, or use the delete API operations for the resources. For more
            information about the delete API operations, see <a href="https://docs.aws.amazon.com/migrationhub-refactor-spaces/latest/APIReference/Welcome.html">Refactor Spaces API
                Reference</a>.</p>

        <p><b>To manually delete the service-linked role using
                IAM</b></p>
        <p>Use the IAM console, the AWS CLI, or the AWS API to delete the AWSServiceRoleForMigrationHubRefactorSpaces
            service-linked role. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/using-service-linked-roles.html#delete-service-linked-role">Deleting a Service-Linked Role</a> in the
            <em>IAM User Guide</em>.</p>
     
        <h2 id="slr-regions">Supported Regions for Refactor Spaces service-linked
                roles</h2>
        

        
        <p>Refactor Spaces supports using service-linked roles in all of the Regions where the
            service is available. For more information, see <a href="https://docs.aws.amazon.com/general/latest/gr/rande.html">AWS Regions and Endpoints</a>.</p>
        

    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./security_iam_troubleshoot.html">Troubleshooting</div><div id="next" class="next-link" accesskey="n" href="./compliance-validation.html">Compliance validation</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=migrationhub-refactor-spaces&amp;topic_url=https://docs.aws.amazon.com/en_us/migrationhub-refactor-spaces/latest/userguide/using-service-linked-roles.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=migrationhub-refactor-spaces&amp;topic_url=https://docs.aws.amazon.com/en_us/migrationhub-refactor-spaces/latest/userguide/using-service-linked-roles.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>