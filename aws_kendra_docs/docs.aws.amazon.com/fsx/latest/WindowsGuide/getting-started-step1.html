<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Step 1: Create your file system - Amazon FSx for Windows File Server</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="getting-started-step1" /><meta name="default_state" content="getting-started-step1" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/fsx/latest/WindowsGuide/getting-started-step1.html" /><meta name="description" content="To create your Amazon FSx file system, you must create your Amazon Elastic Compute Cloud (Amazon EC2) instance and the AWS Directory Service directory. If you don't have that set up already, see ." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon FSx for Windows File Server" /><meta name="guide" content="Windows User Guide" /><meta name="abstract" content="This is the official Amazon Web Services documentation for Amazon FSx for Windows File Server. Amazon FSx is an AWS service that makes it easier to launch and run shared file storage for Microsoft Windows workloads in the AWS Cloud. These workloads can include your business applications, home directories, web serving environments, and software build setups." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/fsx/latest/WindowsGuide/getting-started-step1.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/fsx/latest/WindowsGuide/getting-started-step1.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/fsx/latest/WindowsGuide/getting-started-step1.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/fsx/latest/WindowsGuide/getting-started-step1.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/fsx/latest/WindowsGuide/getting-started-step1.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/fsx/latest/WindowsGuide/getting-started-step1.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/fsx/latest/WindowsGuide/getting-started-step1.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/fsx/latest/WindowsGuide/getting-started-step1.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/fsx/latest/WindowsGuide/getting-started-step1.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/fsx/latest/WindowsGuide/getting-started-step1.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/fsx/latest/WindowsGuide/getting-started-step1.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/fsx/latest/WindowsGuide/getting-started-step1.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/fsx/latest/WindowsGuide/getting-started-step1.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/fsx/latest/WindowsGuide/getting-started-step1.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/fsx/latest/WindowsGuide/getting-started-step1.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/fsx/latest/WindowsGuide/getting-started-step1.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/fsx/latest/WindowsGuide/getting-started-step1.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/fsx/latest/WindowsGuide/getting-started-step1.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/fsx/latest/WindowsGuide/getting-started-step1.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/fsx/latest/WindowsGuide/getting-started-step1.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/fsx/latest/WindowsGuide/getting-started-step1.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/fsx/latest/WindowsGuide/getting-started-step1.html" hreflang="x-default" /><meta name="feedback-item" content="FSx" /><meta name="this_doc_product" content="Amazon FSx for Windows File Server" /><meta name="this_doc_guide" content="Windows User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'fsx'}"></script><meta id="panorama-serviceSubSection" value="Windows User Guide" /><meta id="panorama-serviceConsolePage" value="Step 1: Create your file system" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Step 1: Create your file system - Amazon FSx for Windows File Server</title><meta name="pdf" content="/pdfs/fsx/latest/WindowsGuide/WindowsGuide.pdf#getting-started-step1" /><meta name="github" content="https://github.com/awsdocs/amazon-fsx-windows-user-guide/tree/main/doc_source/getting-started-step1.md" /><meta name="rss" content="WindowsGuide.rss" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=FSx&amp;topic_url=http://docs.aws.amazon.com/en_us/fsx/latest/WindowsGuide/getting-started-step1.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/fsx/latest/WindowsGuide/getting-started-step1.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/fsx/latest/WindowsGuide/getting-started-step1.html" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon FSx",
        "item" : "https://docs.aws.amazon.com/fsx/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Windows User Guide",
        "item" : "https://docs.aws.amazon.com/fsx/latest/WindowsGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Getting started with Amazon FSx",
        "item" : "https://docs.aws.amazon.com/fsx/latest/WindowsGuide/getting-started.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Step 1: Create your file system",
        "item" : "https://docs.aws.amazon.com/fsx/latest/WindowsGuide/getting-started.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/fsx/latest/WindowsGuide/WindowsGuide.pdf#getting-started-step1" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a href="https://github.com/awsdocs/amazon-fsx-windows-user-guide/tree/main/doc_source/getting-started-step1.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/fsx/index.html">Amazon FSx</a><a href="what-is.html">Windows User Guide</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="getting-started-step1">Step 1: Create your file system</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>To create your Amazon FSx file system, you must create your Amazon Elastic Compute Cloud (Amazon EC2) instance and the
      AWS Directory Service directory. If you don't have that set up already, see <a href="./walkthrough01-prereqs.html">Walkthrough 1: Prerequisites for getting started</a>.</p><div class="procedure"><h6>To create your first file system</h6><ol><li> <p>Open the Amazon FSx console at <a href="https://console.aws.amazon.com/fsx/" rel="noopener noreferrer" target="_blank"><span>https://console.aws.amazon.com/fsx/</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p> </li><li>
        <p>On the dashboard, choose <b>Create file system</b> to start the file
          system creation wizard.</p>
      </li><li>
        <p>On the <b>Select file system type</b> page, choose
            <b>FSx for Windows File Server</b>, and then choose <b>Next</b>. The
            <b>Create file system</b> page appears.</p>
      </li><li>
        <p>In the <b>File system details</b> section, provide a name for your file
          system. It's easier to find and manage your file systems when you name them. You can use a
          maximum of 256 Unicode letters, white space, and numbers, plus the special characters + -
          = . _ : /</p>
      </li><li>
        <p>For <b>Deployment type</b> choose <b>Multi-AZ</b> or
            <b>Single-AZ</b>. </p>
        
        <div class="itemizedlist">
           
           
        <ul class="itemizedlist"><li class="listitem">
            <p>Choose <b>Multi-AZ</b> to deploy a file system that is tolerant to
              Availability Zone unavailability. This option supports SSD and HDD storage. </p>
          </li><li class="listitem">
            <p>Choose <b>Single-AZ</b> to deploy a file system that is deployed in
              a single Availability Zone. <em>Single-AZ 2</em> is the latest generation
              of single Availability Zone file systems, and it supports SSD and HDD storage.</p>
          </li></ul></div>
        <p>For more information, see <a href="./high-availability-multiAZ.html">Availability and durability: Single-AZ and Multi-AZ file systems</a>.</p>
        <p>The following image shows all of the configuration options available in the
            <b>File system details</b> section. </p>
        <div class="mediaobject">
           
            <img src="/images/fsx/latest/WindowsGuide/images/CreateFSxWindow-details.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;            Create file system details screen showing options for deployment type, storage&#xA;              type, storage capacity, and recommended throughput.&#xA;          " style="max-width:90%" />
           
           
        </div>
      </li><li>
        <p>For <b>Storage type</b>, you can choose either <b>SSD</b>
          or <b>HDD</b>. </p>
        <p>FSx for Windows File Server offers solid state drive (SSD) and hard disk drive (HDD) storage types.
            <b>SSD</b> storage is designed for the highest-performance and most
          latency-sensitive workloads, including databases, media processing workloads, and data
          analytics applications. <b>HDD</b> storage is designed for a broad spectrum
          of workloads, including home directories, user and departmental file shares, and content
          management systems. For more information, see <a href="./optimize-fsx-costs.html#storage-type-options">Optimizing costs using storage types</a>.</p>

      </li><li>
        <p>For <b>Storage capacity</b>, enter the storage capacity of your file
          system, in GiB. If you're using SSD storage, enter any whole number in the range of
          32–65,536. If you're using HDD storage, enter any whole number in the range of
          2,000–65,536. You can increase the amount of storage capacity as needed at any time
          after you create the file system. For more information, see <a href="./managing-storage-capacity.html">Managing storage capacity</a>.</p>
      </li><li>
        <p>Keep <b>Throughput capacity</b> at its default setting.
            <b>Throughput capacity</b> is the sustained speed at which the file server
          that hosts your file system can serve data. The <b>Recommended throughput
            capacity</b> setting is based on the amount of storage capacity you choose. If
          you need more than the recommended throughput capacity, choose <b>Specify
            throughput capacity</b>, and then choose a value. For more information, see <a href="./performance.html">FSx for Windows File Server performance</a>. </p>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>If you are going to enable file access auditing, you must choose a throughput
            capacity of 32 MB/s or greater. For more information, see <a href="./file-access-auditing.html">File access auditing</a>.</p></div></div>
        <p>You can modify the throughput capacity as needed at any time after you create the file
          system. For more information, see <a href="./managing-throughput-capacity.html">Managing throughput capacity</a>.</p>
      </li><li>
        <p>In the <b>Network &amp; security</b> section, choose the Amazon VPC that you
          want to associate with your file system. For this getting started exercise, choose the
          same Amazon VPC that you chose for your AWS Directory Service directory and your Amazon EC2 instance.</p>
      </li><li>
        <a id="security_group_setup"></a>
        <p>For <b>VPC Security Groups</b>, the default security group for your
          default Amazon VPC is already added to your file system in the console. If you're not
          using the default security group, make sure that the security group you choose is in the same AWS Region as your file system. You will also need to add the following rules to your
          chosen security group:</p>

        <ol><li>
            <p>Add the following inbound and outbound rules to allow the following ports.</p>
            <div class="table-container"><div class="table-contents"><table id="w436aac11b7b5c20b5b1b3"><thead>
                  <tr>
                    <th>Rules</th>
                    <th>Ports</th>
                  </tr>
                </thead>
                  <tr>
                    <td>
                      <p>UDP</p>
                    </td>
                    <td>
                      <p>53, 88, 123, 389, 464</p>
                    </td>
                  </tr>
                  <tr>
                    <td>TCP </td>
                    <td> 53, 88, 135, 389, 445, 464, 636, 3268, 3269, 5985, 9389, 49152-65535
                    </td>
                  </tr>
                </table></div></div>
            <p>Add from and to IP addresses or security group IDs associated with the client
              compute instances that you want to access your file system from.</p>

          </li><li>
            <p>Add outbound rules to allow all traffic to the Active Directory that you're
              joining your file system to. To do this, do one of the following:</p>
            <div class="itemizedlist">
               
               
            <ul class="itemizedlist"><li class="listitem">
                <p>Allow outbound traffic to the security group ID associated with your AWS
                  Managed AD directory. </p>
              </li><li class="listitem">
                <p>Allow outbound traffic to the IP addresses associated with your self-managed
                  Active Directory domain controllers. </p>
              </li></ul></div>
          </li></ol>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>In some cases, you might have modified the rules of your AWS Managed Microsoft AD security group
            from the default settings. If so, make sure that this security group has the required
            inbound rules to allow traffic from your Amazon FSx file system. For more information about
            the required inbound rules, see <a href="https://docs.aws.amazon.com/directoryservice/latest/admin-guide/ms_ad_getting_started_prereqs.html">AWS Managed Microsoft AD
              Prerequisites</a> in the <em>AWS Directory Service Administration Guide</em>.</p></div></div>
        <p>For more information, see <a href="./limit-access-security-groups.html">File System Access Control with Amazon VPC</a>.</p>
      </li><li>
        <p>If you have a Multi-AZ deployment (see step 5), choose a <b>Preferred
            subnet</b> value for the primary file server and a <b>Standby
            subnet</b> value for the standby file server. A Multi-AZ deployment has a primary
          and a standby file server, each in its own Availability Zone and subnet. </p>
      </li><li>
        <p>For <b>Windows authentication</b>, you have the following
          options:</p>
        <p>If you want to join your file system to a Microsoft Active Directory domain that is
          managed by AWS, choose <b>AWS Managed Microsoft Active Directory</b>,
          and then choose your AWS Directory Service directory from the list. For more information, see <a href="./aws-ad-integration-fsxW.html">Working with Microsoft Active Directory in FSx for Windows File Server</a>.</p>
        <p>If you want to join your file system to a self-managed Microsoft Active Directory
          domain, choose <b>Self-managed Microsoft Active Directory</b>, and provide
          the following details for your Active Directory.</p>
        <div class="itemizedlist">
           
           
           
           
           
           
           
        <ul class="itemizedlist"><li class="listitem">
            <p>The fully qualified domain name of your Active Directory.</p>
            <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>For Single-AZ 2 and all Multi-AZ file systems, the Active Directory domain name
                cannot exceed 47 characters. This limitation applies to both AWS managed and
                self-managed Active Directory domain names.</p><p>Amazon FSx requires a direct connection or internal traffic to your DNS IP Address.
                Connection via an internet gateway is not supported. Instead, use a VPN, VPC peering,
                Direct Connect or a transit gateway association.</p></div></div>
          </li><li class="listitem">
            <p><b>DNS server IP addresses</b>—the IPv4 addresses of the DNS
              servers for your domain</p>
            <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Your DNS server must have EDNS (Extension Mechanisms for DNS) enabled. If EDNS
                is disabled, you may not be able to create an Amazon FSx file system.</p></div></div>
          </li><li class="listitem">
            <p><b>Service account username</b>—the user name of the service
              account in your existing Active Directory. Do not include a domain prefix or suffix.
            </p>
          </li><li class="listitem">
            <p><b>Service account password</b>—the password for the service
              account.</p>
          </li><li class="listitem">
            <p><b>Confirm password</b>—the password for the service
              account.</p>
          </li><li class="listitem">
            <p>(Optional) <b>Organizational Unit (OU)</b>—the distinguished
              path name of the organizational unit in which you want to join your file
              system.</p>
          </li><li class="listitem">
            <p>(Optional) <b>Delegated file system administrators group</b>—
              the name of the group in your Active Directory that can administer your file system.
              The default group is 'Domain Admins'.</p>
          </li></ul></div>
      </li><li>
        <p>For <b>Encryption</b>, keep the default <b>Encryption
            key</b> setting of <b>aws/fsx (default)</b>.</p>
      </li><li>
        <p>For <b>Auditing - optional</b>, file access auditing is disabled by
          default. For information about enabling and configuring file access auditing, see <a href="./file-access-auditing.html#faa-create-modify-config">To enable file access auditing
          when creating a file system (console)</a>.</p>
      </li><li>
        <p>For <b>Access - optional</b>, enter any DNS aliases that you want to
          associate with the file system. Each alias name must be formatted as a fully qualified
          domain name (FQDN). For more information, see <a href="./managing-dns-aliases.html">Managing DNS aliases</a>.</p>
      </li><li>
        <p>For <b>Backup and maintenance - optional</b>, keep the default
          settings.</p>
      </li><li>
        <p>For <b>Tags - optional</b>, enter a key and value to add tags to your
          file system. A tag is a case-sensitive key-value pair that helps you manage, filter, and
          search for your file system. </p>
        <p>Choose <b>Next</b>.</p>
      </li><li>
        <p>Review the file system configuration shown on the <b>Create file
            system</b> page. For your reference, note which file system settings you can
          modify after file system is created. Choose <b>Create file system</b>. </p>
        
      </li><li>
        <p>After Amazon FSx creates the file system, choose the file system ID in the <b>File
            Systems</b> dashboard. Choose <b>Attach</b>, and note the fully
          qualified domain name for your file system. You will need it in a later step.</p>
      </li></ol></div><awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./getting-started.html">Getting started</div><div id="next" class="next-link" accesskey="n" href="./getting-started-step2.html">Step 2: Map your file share to an EC2 instance running
        Windows Server</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=FSx&amp;topic_url=https://docs.aws.amazon.com/en_us/fsx/latest/WindowsGuide/getting-started-step1.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=FSx&amp;topic_url=https://docs.aws.amazon.com/en_us/fsx/latest/WindowsGuide/getting-started-step1.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>