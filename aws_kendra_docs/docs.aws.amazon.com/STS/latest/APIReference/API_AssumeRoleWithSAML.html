<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>AssumeRoleWithSAML - AWS Security Token Service</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="API_AssumeRoleWithSAML" /><meta name="default_state" content="API_AssumeRoleWithSAML" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRoleWithSAML.html" /><meta name="description" content="Returns a set of temporary security credentials for users who have been authenticated via a SAML authentication response. This operation provides a mechanism for tying an enterprise identity store or directory to role-based AWS access without user-specific credentials or configuration. For a comparison of" /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS Security Token Service" /><meta name="guide" content="API Reference" /><meta name="abstract" content="AWS Security Token Service (AWS STS) enables you to request temporary, limited-privilege credentials for users. This guide provides descriptions of the AWS STS API. For more information about using this service, see Temporary Security Credentials." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRoleWithSAML.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/STS/latest/APIReference/API_AssumeRoleWithSAML.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/STS/latest/APIReference/API_AssumeRoleWithSAML.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/STS/latest/APIReference/API_AssumeRoleWithSAML.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/STS/latest/APIReference/API_AssumeRoleWithSAML.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRoleWithSAML.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRoleWithSAML.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/STS/latest/APIReference/API_AssumeRoleWithSAML.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/STS/latest/APIReference/API_AssumeRoleWithSAML.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/STS/latest/APIReference/API_AssumeRoleWithSAML.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/STS/latest/APIReference/API_AssumeRoleWithSAML.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/STS/latest/APIReference/API_AssumeRoleWithSAML.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/STS/latest/APIReference/API_AssumeRoleWithSAML.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/STS/latest/APIReference/API_AssumeRoleWithSAML.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/STS/latest/APIReference/API_AssumeRoleWithSAML.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/STS/latest/APIReference/API_AssumeRoleWithSAML.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/STS/latest/APIReference/API_AssumeRoleWithSAML.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/STS/latest/APIReference/API_AssumeRoleWithSAML.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/STS/latest/APIReference/API_AssumeRoleWithSAML.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/STS/latest/APIReference/API_AssumeRoleWithSAML.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/STS/latest/APIReference/API_AssumeRoleWithSAML.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRoleWithSAML.html" hreflang="x-default" /><meta name="feedback-item" content="IAM" /><meta name="this_doc_product" content="AWS Security Token Service" /><meta name="this_doc_guide" content="API Reference" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'iam'}"></script><meta id="panorama-serviceSubSection" value="API Reference" /><meta id="panorama-serviceConsolePage" value="AssumeRoleWithSAML" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>AssumeRoleWithSAML - AWS Security Token Service</title><meta name="pdf" content="/pdfs/STS/latest/APIReference/sts-api.pdf#API_AssumeRoleWithSAML" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=76" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=http://docs.aws.amazon.com/en_us/STS/latest/APIReference/API_AssumeRoleWithSAML.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/STS/latest/APIReference/API_AssumeRoleWithSAML.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/STS/latest/APIReference/API_AssumeRoleWithSAML.html" /><meta name="keywords" content="API,requests,AssumeRoleWithSAML" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS Security Token Service",
        "item" : "https://docs.aws.amazon.com/iam/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "API Reference",
        "item" : "https://docs.aws.amazon.com/STS/latest/APIReference"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Actions",
        "item" : "https://docs.aws.amazon.com/STS/latest/APIReference/API_Operations.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "AssumeRoleWithSAML",
        "item" : "https://docs.aws.amazon.com/STS/latest/APIReference/API_Operations.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/STS/latest/APIReference/sts-api.pdf#API_AssumeRoleWithSAML" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/iam/index.html">AWS Security Token Service</a><a href="welcome.html">API Reference</a></div><div id="page-toc-src"><a href="#API_AssumeRoleWithSAML_RequestParameters">Request Parameters</a><a href="#API_AssumeRoleWithSAML_ResponseElements">Response Elements</a><a href="#API_AssumeRoleWithSAML_Errors">Errors</a><a href="#API_AssumeRoleWithSAML_Examples">Examples</a><a href="#API_AssumeRoleWithSAML_SeeAlso">See Also</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="API_AssumeRoleWithSAML">AssumeRoleWithSAML</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Returns a set of temporary security credentials for users who have been authenticated
         via a SAML authentication response. This operation provides a mechanism for tying an
         enterprise identity store or directory to role-based AWS access without user-specific
         credentials or configuration. For a comparison of <code class="code">AssumeRoleWithSAML</code> with the
         other API operations that produce temporary credentials, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_request.html">Requesting Temporary Security
            Credentials</a> and <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_request.html#stsapi_comparison">Comparing the
            AWS STS API operations</a> in the <em>IAM User Guide</em>.</p><p>The temporary security credentials returned by this operation consist of an access key
         ID, a secret access key, and a security token. Applications can use these temporary
         security credentials to sign calls to AWS services.</p><p>
      <b>Session Duration</b>
   </p><p>By default, the temporary security credentials created by
            <code class="code">AssumeRoleWithSAML</code> last for one hour. However, you can use the optional
            <code class="code">DurationSeconds</code> parameter to specify the duration of your session. Your
         role session lasts for the duration that you specify, or until the time specified in the
         SAML authentication response's <code class="code">SessionNotOnOrAfter</code> value, whichever is
         shorter. You can provide a <code class="code">DurationSeconds</code> value from 900 seconds (15 minutes)
         up to the maximum session duration setting for the role. This setting can have a value from
         1 hour to 12 hours. To learn how to view the maximum value for your role, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use.html#id_roles_use_view-role-max-session">View the
            Maximum Session Duration Setting for a Role</a> in the
            <em>IAM User Guide</em>. The maximum session duration limit applies when
         you use the <code class="code">AssumeRole*</code> API operations or the <code class="code">assume-role*</code> CLI
         commands. However the limit does not apply when you use those operations to create a
         console URL. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use.html">Using IAM Roles</a> in the
            <em>IAM User Guide</em>.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>
         <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-role-chaining">Role chaining</a> limits your AWS CLI or AWS API role
            session to a maximum of one hour. When you use the <code class="code">AssumeRole</code> API operation
            to assume a role, you can specify the duration of your role session with the
               <code class="code">DurationSeconds</code> parameter. You can specify a parameter value of up to
            43200 seconds (12 hours), depending on the maximum session duration setting for your
            role. However, if you assume a role using role chaining and provide a
               <code class="code">DurationSeconds</code> parameter value greater than one hour, the operation
            fails.</p></div></div><p>
      <b>Permissions</b>
   </p><p>The temporary security credentials created by <code class="code">AssumeRoleWithSAML</code> can be
         used to make API calls to any AWS service with the following exception: you cannot call
         the AWS STS
      <code class="code">GetFederationToken</code> or <code class="code">GetSessionToken</code> API
         operations.</p><p>(Optional) You can pass inline or managed <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html#policies_session">session policies</a> to
         this operation. You can pass a single JSON policy document to use as an inline session
         policy. You can also specify up to 10 managed policy Amazon Resource Names (ARNs) to use as
         managed session policies. The plaintext that you use for both inline and managed session
         policies can't exceed 2,048 characters. Passing policies to this operation returns new 
         temporary credentials. The resulting session's permissions are the intersection of the 
         role's identity-based policy and the session policies. You can use the role's temporary 
         credentials in subsequent AWS API calls to access resources in the account that owns 
         the role. You cannot use session policies to grant more permissions than those allowed 
         by the identity-based policy of the role that is being assumed. For more information, see
            <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html#policies_session">Session
            Policies</a> in the <em>IAM User Guide</em>.</p><p>Calling <code class="code">AssumeRoleWithSAML</code> does not require the use of AWS security
         credentials. The identity of the caller is validated by using keys in the metadata document
         that is uploaded for the SAML provider entity for your identity provider. </p><div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>Calling <code class="code">AssumeRoleWithSAML</code> can result in an entry in your AWS CloudTrail logs.
            The entry includes the value in the <code class="code">NameID</code> element of the SAML assertion.
            We recommend that you use a <code class="code">NameIDType</code> that is not associated with any
            personally identifiable information (PII). For example, you could instead use the
            persistent identifier
            (<code class="code">urn:oasis:names:tc:SAML:2.0:nameid-format:persistent</code>).</p></div></div><p>
      <b>Tags</b>
   </p><p>(Optional) You can configure your IdP to pass attributes into your SAML assertion as
         session tags. Each session tag consists of a key name and an associated value. For more
         information about session tags, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_session-tags.html">Passing Session Tags in AWS STS</a> in the
            <em>IAM User Guide</em>.</p><p>You can pass up to 50 session tags. The plaintext session tag keys can’t exceed 128
         characters and the values can’t exceed 256 characters. For these and additional limits, see
            <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_iam-limits.html#reference_iam-limits-entity-length">IAM
            and AWS STS Character Limits</a> in the <em>IAM User Guide</em>.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>An AWS conversion compresses the passed inline session policy, managed policy ARNs,
            and session tags into a packed binary format that has a separate limit. Your request can
            fail for this limit even if your plaintext meets the other requirements. The
               <code class="code">PackedPolicySize</code> response element indicates by percentage how close the
            policies and tags for your request are to the upper size limit.</p></div></div><p>You can pass a session tag with the same key as a tag that is attached to the role. When
         you do, session tags override the role's tags with the same key.</p><p>An administrator must grant you the permissions necessary to pass session tags. The
         administrator can also create granular permissions to allow you to pass only specific
         session tags. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/tutorial_attribute-based-access-control.html">Tutorial: Using Tags
            for Attribute-Based Access Control</a> in the
         <em>IAM User Guide</em>.</p><p>You can set the session tags as transitive. Transitive tags persist during role
         chaining. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_session-tags.html#id_session-tags_role-chaining">Chaining Roles
            with Session Tags</a> in the <em>IAM User Guide</em>.</p><p>
      <b>SAML Configuration</b>
   </p><p>Before your application can call <code class="code">AssumeRoleWithSAML</code>, you must configure
         your SAML identity provider (IdP) to issue the claims required by AWS. Additionally, you
         must use AWS Identity and Access Management (IAM) to create a SAML provider entity in your AWS account that
         represents your identity provider. You must also create an IAM role that specifies this
         SAML provider in its trust policy. </p><p>For more information, see the following resources:</p><div class="itemizedlist">
       
       
       
       
   <ul class="itemizedlist"><li class="listitem">
         <p>
            <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_providers_saml.html">About
                  SAML 2.0-based Federation</a> in the <em>IAM User Guide</em>.
            </p>
      </li><li class="listitem">
         <p>
            <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_providers_create_saml.html">Creating SAML Identity Providers</a> in the
                  <em>IAM User Guide</em>. </p>
      </li><li class="listitem">
         <p>
            <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_providers_create_saml_relying-party.html">Configuring
                  a Relying Party and Claims</a> in the <em>IAM User Guide</em>.
            </p>
      </li><li class="listitem">
         <p>
            <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-idp_saml.html">Creating a Role for SAML 2.0 Federation</a> in the
                  <em>IAM User Guide</em>. </p>
      </li></ul></div>
      <h2 id="API_AssumeRoleWithSAML_RequestParameters">Request Parameters</h2>
      <p> For information about the parameters that are common to all actions, see <a href="./CommonParameters.html">Common Parameters</a>.</p>
      <div class="variablelist">
          
          
          
          
          
          
      <dl>
            <dt><span class="term">
               <b>
                  DurationSeconds
               </b>
            </span></dt>
            <dd>
               <p>The duration, in seconds, of the role session. Your role session lasts for the duration
         that you specify for the <code class="code">DurationSeconds</code> parameter, or until the time
         specified in the SAML authentication response's <code class="code">SessionNotOnOrAfter</code> value,
         whichever is shorter. You can provide a <code class="code">DurationSeconds</code> value from 900 seconds
         (15 minutes) up to the maximum session duration setting for the role. This setting can have
         a value from 1 hour to 12 hours. If you specify a value higher than this setting, the
         operation fails. For example, if you specify a session duration of 12 hours, but your
         administrator set the maximum session duration to 6 hours, your operation fails. To learn
         how to view the maximum value for your role, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use.html#id_roles_use_view-role-max-session">View the
            Maximum Session Duration Setting for a Role</a> in the
            <em>IAM User Guide</em>.</p>
               <p>By default, the value is set to <code class="code">3600</code> seconds. </p>
               <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>The <code class="code">DurationSeconds</code> parameter is separate from the duration of a console
            session that you might request using the returned credentials. The request to the
            federation endpoint for a console sign-in token takes a <code class="code">SessionDuration</code>
            parameter that specifies the maximum length of the console session. For more
            information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_providers_enable-console-custom-url.html">Creating a URL
               that Enables Federated Users to Access the AWS Management Console</a> in the
               <em>IAM User Guide</em>.</p></div></div>
               <p>Type: Integer</p>
               <p>Valid Range: Minimum value of 900. Maximum value of 43200.</p>
               <p>Required: No</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  Policy
               </b>
            </span></dt>
            <dd>
               <p>An IAM policy in JSON format that you want to use as an inline session policy.</p>
               <p>This parameter is optional. Passing policies to this operation returns new 
         temporary credentials. The resulting session's permissions are the intersection of the 
         role's identity-based policy and the session policies. You can use the role's temporary 
         credentials in subsequent AWS API calls to access resources in the account that owns 
         the role. You cannot use session policies to grant more permissions than those allowed 
         by the identity-based policy of the role that is being assumed. For more information, see
            <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html#policies_session">Session
            Policies</a> in the <em>IAM User Guide</em>. </p>
               <p>The plaintext that you use for both inline and managed session policies can't exceed
         2,048 characters. The JSON policy characters can be any ASCII character from the space
         character to the end of the valid character list (\u0020 through \u00FF). It can also
         include the tab (\u0009), linefeed (\u000A), and carriage return (\u000D)
         characters.</p>
               <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>An AWS conversion compresses the passed inline session policy, managed policy ARNs,
            and session tags into a packed binary format that has a separate limit. Your request can
            fail for this limit even if your plaintext meets the other requirements. The
               <code class="code">PackedPolicySize</code> response element indicates by percentage how close the
            policies and tags for your request are to the upper size limit.</p></div></div>
               <p>Type: String</p>
               <p>Length Constraints: Minimum length of 1. Maximum length of 2048.</p>
               <p>Pattern: <code class="code">[\u0009\u000A\u000D\u0020-\u00FF]+</code>
               </p>
               <p>Required: No</p>
            </dd>
          
            <dt><span class="term">
               <b>PolicyArns.member.N</b>
            </span></dt>
            <dd>
               <p>The Amazon Resource Names (ARNs) of the IAM managed policies that you want to use as
         managed session policies. The policies must exist in the same account as the role.</p>
               <p>This parameter is optional. You can provide up to 10 managed policy ARNs. However, the
         plaintext that you use for both inline and managed session policies can't exceed 2,048
         characters. For more information about ARNs, see <a href="https://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html">Amazon Resource Names (ARNs) and AWS
            Service Namespaces</a> in the AWS General Reference.</p>
               <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>An AWS conversion compresses the passed inline session policy, managed policy ARNs,
            and session tags into a packed binary format that has a separate limit. Your request can
            fail for this limit even if your plaintext meets the other requirements. The
               <code class="code">PackedPolicySize</code> response element indicates by percentage how close the
            policies and tags for your request are to the upper size limit.</p></div></div>
               <p>Passing policies to this operation returns new 
         temporary credentials. The resulting session's permissions are the intersection of the 
         role's identity-based policy and the session policies. You can use the role's temporary 
         credentials in subsequent AWS API calls to access resources in the account that owns 
         the role. You cannot use session policies to grant more permissions than those allowed 
         by the identity-based policy of the role that is being assumed. For more information, see
            <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html#policies_session">Session
            Policies</a> in the <em>IAM User Guide</em>.</p>
               <p>Type: Array of <a href="./API_PolicyDescriptorType.html">PolicyDescriptorType</a> objects</p>
               <p>Required: No</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  PrincipalArn
               </b>
            </span></dt>
            <dd>
               <p>The Amazon Resource Name (ARN) of the SAML provider in IAM that describes the
         IdP.</p>
               <p>Type: String</p>
               <p>Length Constraints: Minimum length of 20. Maximum length of 2048.</p>
               <p>Pattern: <code class="code">[\u0009\u000A\u000D\u0020-\u007E\u0085\u00A0-\uD7FF\uE000-\uFFFD\u10000-\u10FFFF]+</code>
               </p>
               <p>Required: Yes</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  RoleArn
               </b>
            </span></dt>
            <dd>
               <p>The Amazon Resource Name (ARN) of the role that the caller is assuming.</p>
               <p>Type: String</p>
               <p>Length Constraints: Minimum length of 20. Maximum length of 2048.</p>
               <p>Pattern: <code class="code">[\u0009\u000A\u000D\u0020-\u007E\u0085\u00A0-\uD7FF\uE000-\uFFFD\u10000-\u10FFFF]+</code>
               </p>
               <p>Required: Yes</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  SAMLAssertion
               </b>
            </span></dt>
            <dd>
               <p>The base64 encoded SAML authentication response provided by the IdP.</p>
               <p>For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/create-role-saml-IdP-tasks.html">Configuring a Relying Party and
            Adding Claims</a> in the <em>IAM User Guide</em>. </p>
               <p>Type: String</p>
               <p>Length Constraints: Minimum length of 4. Maximum length of 100000.</p>
               <p>Required: Yes</p>
            </dd>
         </dl></div>
    
      <h2 id="API_AssumeRoleWithSAML_ResponseElements">Response Elements</h2>
      <p>The following elements are returned by the service.</p>
      <div class="variablelist">
          
          
          
          
          
          
          
          
          
      <dl>
            <dt><span class="term">
               <b>
                  AssumedRoleUser
               </b>
            </span></dt>
            <dd>
               <p>The identifiers for the temporary security credentials that the operation
         returns.</p>
               <p>Type: <a href="./API_AssumedRoleUser.html">AssumedRoleUser</a> object</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  Audience
               </b>
            </span></dt>
            <dd>
               <p> The value of the <code class="code">Recipient</code> attribute of the
            <code class="code">SubjectConfirmationData</code> element of the SAML assertion. </p>
               <p>Type: String</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  Credentials
               </b>
            </span></dt>
            <dd>
               <p>The temporary security credentials, which include an access key ID, a secret access key,
         and a security (or session) token.</p>
               <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>The size of the security token that AWS STS API operations return is not fixed. We
        strongly recommend that you make no assumptions about the maximum size.</p></div></div>
               <p>Type: <a href="./API_Credentials.html">Credentials</a> object</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  Issuer
               </b>
            </span></dt>
            <dd>
               <p>The value of the <code class="code">Issuer</code> element of the SAML assertion.</p>
               <p>Type: String</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  NameQualifier
               </b>
            </span></dt>
            <dd>
               <p>A hash value based on the concatenation of the following:</p>
               <div class="itemizedlist">
                   
                   
                   
               <ul class="itemizedlist"><li class="listitem">
                     <p>The <code class="code">Issuer</code> response value.</p>
                  </li><li class="listitem">
                     <p>The AWS account ID.</p>
                  </li><li class="listitem">
                     <p>The friendly name (the last part of the ARN) of the SAML provider in IAM.</p>
                  </li></ul></div>
               <p>The combination of <code class="code">NameQualifier</code> and <code class="code">Subject</code> can be used to
         uniquely identify a user.</p>
               <p>The following pseudocode shows how the hash value is calculated:</p>
               <p>
                  <code class="code">BASE64 ( SHA1 ( "https://example.com/saml" + "123456789012" + "/MySAMLIdP" ) )</code>
               </p>
               <p>Type: String</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  PackedPolicySize
               </b>
            </span></dt>
            <dd>
               <p>A percentage value that indicates the packed size of the session policies and session 
      tags combined passed in the request. The request fails if the packed size is greater than 100 percent, 
      which means the policies and tags exceeded the allowed space.</p>
               <p>Type: Integer</p>
               <p>Valid Range: Minimum value of 0.</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  SourceIdentity
               </b>
            </span></dt>
            <dd>
               <p>The value in the <code class="code">SourceIdentity</code> attribute in the SAML assertion. </p>
               <p>You can require users to set a source identity value when they assume a role. You do
         this by using the <code class="code">sts:SourceIdentity</code> condition key in a role trust policy.
         That way, actions that are taken with the role are associated with that user. After the
         source identity is set, the value cannot be changed. It is present in the request for all
         actions that are taken by the role and persists across <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts#iam-term-role-chaining">chained
            role</a> sessions. You can configure your SAML identity provider to use an attribute
         associated with your users, like user name or email, as the source identity when calling
            <code class="code">AssumeRoleWithSAML</code>. You do this by adding an attribute to the SAML
         assertion. For more information about using source identity, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_control-access_monitor.html">Monitor and control
            actions taken with assumed roles</a> in the
         <em>IAM User Guide</em>.</p>
               <p>The regex used to validate this parameter is a string of characters 
    consisting of upper- and lower-case alphanumeric characters with no spaces. You can 
    also include underscores or any of the following characters: =,.@-</p>
               <p>Type: String</p>
               <p>Length Constraints: Minimum length of 2. Maximum length of 64.</p>
               <p>Pattern: <code class="code">[\w+=,.@-]*</code>
               </p>
            </dd>
          
            <dt><span class="term">
               <b>
                  Subject
               </b>
            </span></dt>
            <dd>
               <p>The value of the <code class="code">NameID</code> element in the <code class="code">Subject</code> element of the
         SAML assertion.</p>
               <p>Type: String</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  SubjectType
               </b>
            </span></dt>
            <dd>
               <p> The format of the name ID, as defined by the <code class="code">Format</code> attribute in the
            <code class="code">NameID</code> element of the SAML assertion. Typical examples of the format are
            <code class="code">transient</code> or <code class="code">persistent</code>. </p>
               <p> If the format includes the prefix
            <code class="code">urn:oasis:names:tc:SAML:2.0:nameid-format</code>, that prefix is removed. For
         example, <code class="code">urn:oasis:names:tc:SAML:2.0:nameid-format:transient</code> is returned as
            <code class="code">transient</code>. If the format includes any other prefix, the format is returned
         with no modifications.</p>
               <p>Type: String</p>
            </dd>
         </dl></div>
    
      <h2 id="API_AssumeRoleWithSAML_Errors">Errors</h2>
      <p>For information about the errors that are common to all actions, see <a href="./CommonErrors.html">Common Errors</a>.</p>
      <div class="variablelist">
          
          
          
          
          
          
      <dl>
            <dt><span class="term">
               <b>
                  ExpiredToken
               </b>
            </span></dt>
            <dd>
               <p>The web identity token that was passed is expired or is not valid. Get a new identity
            token from the identity provider and then retry the request.</p>
               <p>HTTP Status Code: 400</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  IDPRejectedClaim
               </b>
            </span></dt>
            <dd>
               <p>The identity provider (IdP) reported that authentication failed. This might be because
            the claim is invalid.</p>
               <p>If this error is returned for the <code class="code">AssumeRoleWithWebIdentity</code> operation, it
            can also mean that the claim has expired or has been explicitly revoked. </p>
               <p>HTTP Status Code: 403</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  InvalidIdentityToken
               </b>
            </span></dt>
            <dd>
               <p>The web identity token that was passed could not be validated by AWS. Get a new
            identity token from the identity provider and then retry the request.</p>
               <p>HTTP Status Code: 400</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  MalformedPolicyDocument
               </b>
            </span></dt>
            <dd>
               <p>The request was rejected because the policy document was malformed. The error message
            describes the specific error.</p>
               <p>HTTP Status Code: 400</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  PackedPolicyTooLarge
               </b>
            </span></dt>
            <dd>
               <p>The request was rejected because the total packed size of the session policies and
            session tags combined was too large. An AWS conversion compresses the session policy
            document, session policy ARNs, and session tags into a packed binary format that has a
            separate limit. The error message indicates by percentage how close the policies and
            tags are to the upper size limit. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_session-tags.html">Passing Session Tags in AWS STS</a> in
            the <em>IAM User Guide</em>.</p>
               <p>You could receive this error even though you meet other defined session policy and
            session tag limits. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_iam-quotas.html#reference_iam-limits-entity-length">IAM and AWS STS Entity
                Character Limits</a> in the <em>IAM User Guide</em>.</p>
               <p>HTTP Status Code: 400</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  RegionDisabled
               </b>
            </span></dt>
            <dd>
               <p>
                  AWS STS is not activated in the requested region for the account that is being asked to
            generate credentials. The account administrator must use the IAM console to activate AWS STS
            in that region. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_enable-regions.html">Activating and
                Deactivating AWSAWS STS in an AWS Region</a> in the <em>IAM User
                    Guide</em>.</p>
               <p>HTTP Status Code: 403</p>
            </dd>
         </dl></div>
    
      <h2 id="API_AssumeRoleWithSAML_Examples">Examples</h2>
       
         <h3 id="API_AssumeRoleWithSAML_Example_1">Example</h3>
         <p>This example requires that the <code class="code">TestSaml</code> role and the
                  <code class="code">SAML-test</code> SAML identity provider are configured in IAM.
               Additionally, this example requires an encoded SAML assertion that includes all of
               the necessary information. For more information about SAML assertions, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_providers_create_saml_assertions.html">Configuring
                  SAML Assertions for the Authentication Response</a> in the
                  <em>IAM User Guide</em>.</p>
          
            <h4 id="API_AssumeRoleWithSAML_Example_1_Request">Sample Request</h4>
            <pre class="programlisting"><div class="code-btn-container"></div><code class="">https://sts.amazonaws.com/
?Version=2011-06-15
&amp;Action=AssumeRoleWithSAML
&amp;RoleArn=arn:aws:iam::123456789012:role/TestSaml
&amp;PrincipalArn=arn:aws:iam::123456789012:saml-provider/SAML-test 
&amp;SAMLAssertion=VERYLONGENCODEDASSERTIONEXAMPLExzYW1sOkF1ZGllbmNl
PmJsYW5rPC9zYW1sOkF1ZGllbmNlPjwvc2FtbDpBdWRpZW5jZVJlc3RyaWN0aW9u
Pjwvc2FtbDpDb25kaXRpb25zPjxzYW1sOlN1YmplY3Q+PHNhbWw6TmFtZUlEIEZv
cm1hdD0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOm5hbWVpZC1mb3JtYXQ6
dHJhbnNpZW50Ij5TYW1sRXhhbXBsZTwvc2FtbDpOYW1lSUQ+PHNhbWw6U3ViamVj
dENvbmZpcm1hdGlvbiBNZXRob2Q9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIu
MDpjbTpiZWFyZXIiPjxzYW1sOlN1YmplY3RDb25maXJtYXRpb25EYXRhIE5vdE9u
T3JBZnRlcj0iMjAxOS0xMS0wMVQyMDoyNTowNS4xNDVaIiBSZWNpcGllbnQ9Imh0
dHBzOi8vc2lnbmluLmF3cy5hbWF6b24uY29tL3NhbWwiLz48L3NhbWw6U3ViamVj
dENvbmZpcm1hdGlvbj48L3NhbWw6U3ViamVjdD48c2FtbDpBdXRoblN0YXRlbWVu
dCBBdXRoPD94bWwgdmpSZXNwb25zZT4=
&amp;AUTHPARAMS</code></pre>
          
          
            <h4 id="API_AssumeRoleWithSAML_Example_1_Response">Sample Response</h4>
            <pre class="programlisting"><div class="code-btn-container"></div><code class="">&lt;AssumeRoleWithSAMLResponse xmlns="https://sts.amazonaws.com/doc/2011-06-15/"&gt;
    &lt;AssumeRoleWithSAMLResult&gt;
        &lt;Issuer&gt; https://integ.example.com/idp/shibboleth&lt;/Issuer&gt;
        &lt;AssumedRoleUser&gt;
            &lt;Arn&gt;arn:aws:sts::123456789012:assumed-role/TestSaml&lt;/Arn&gt;
            &lt;AssumedRoleId&gt;ARO456EXAMPLE789:TestSaml&lt;/AssumedRoleId&gt;
        &lt;/AssumedRoleUser&gt;
        &lt;Credentials&gt;
            &lt;AccessKeyId&gt;ASIAV3ZUEFP6EXAMPLE&lt;/AccessKeyId&gt;
            &lt;SecretAccessKey&gt;8P+SQvWIuLnKhh8d++jpw0nNmQRBZvNEXAMPLEKEY&lt;/SecretAccessKey&gt;
            &lt;SessionToken&gt; IQoJb3JpZ2luX2VjEOz////////////////////wEXAMPLEtMSJHMEUCIDoKK3JH9uG
                QE1z0sINr5M4jk+Na8KHDcCYRVjJCZEvOAiEA3OvJGtw1EcViOleS2vhs8VdCKFJQWP
                QrmGdeehM4IC1NtBmUpp2wUE8phUZampKsburEDy0KPkyQDYwT7WZ0wq5VSXDvp75YU
                9HFvlRd8Tx6q6fE8YQcHNVXAkiY9q6d+xo0rKwT38xVqr7ZD0u0iPPkUL64lIZbqBAz
                +scqKmlzm8FDrypNC9Yjc8fPOLn9FX9KSYvKTr4rvx3iSIlTJabIQwj2ICCR/oLxBA== &lt;/SessionToken&gt;
            &lt;Expiration&gt;2019-11-01T20:26:47Z&lt;/Expiration&gt;
        &lt;/Credentials&gt;
        &lt;Audience&gt;https://signin.aws.amazon.com/saml&lt;/Audience&gt;
        &lt;SubjectType&gt;transient&lt;/SubjectType&gt;
        &lt;PackedPolicySize&gt;6&lt;/PackedPolicySize&gt;
        &lt;NameQualifier&gt;SbdGOnUkh1i4+EXAMPLExL/jEvs=&lt;/NameQualifier&gt;
        &lt;SourceIdentity&gt;SourceIdentityValue&lt;/SourceIdentity&gt;
        &lt;Subject&gt;SamlExample&lt;/Subject&gt;
    &lt;/AssumeRoleWithSAMLResult&gt;
    &lt;ResponseMetadata&gt;
        &lt;RequestId&gt;c6104cbe-af31-11e0-8154-cbc7ccf896c7&lt;/RequestId&gt;
    &lt;/ResponseMetadata&gt;
&lt;/AssumeRoleWithSAMLResponse&gt;</code></pre>
          
       
    
      <h2 id="API_AssumeRoleWithSAML_SeeAlso">See Also</h2>
      <p>For more information about using this API in one of the language-specific AWS SDKs, see the following:</p>
      <div class="itemizedlist">
          
          
          
          
          
          
          
          
          
      <ul class="itemizedlist"><li class="listitem">
            <p>
               <a href="https://docs.aws.amazon.com/goto/aws-cli/sts-2011-06-15/AssumeRoleWithSAML">AWS Command Line Interface</a>
            </p>
         </li><li class="listitem">
            <p>
               <a href="https://docs.aws.amazon.com/goto/DotNetSDKV3/sts-2011-06-15/AssumeRoleWithSAML">AWS SDK for .NET</a>
            </p>
         </li><li class="listitem">
            <p>
               <a href="https://docs.aws.amazon.com/goto/SdkForCpp/sts-2011-06-15/AssumeRoleWithSAML">AWS SDK for C++</a>
            </p>
         </li><li class="listitem">
            <p>
               <a href="https://docs.aws.amazon.com/goto/SdkForGoV1/sts-2011-06-15/AssumeRoleWithSAML">AWS SDK for Go</a>
            </p>
         </li><li class="listitem">
            <p>
               <a href="https://docs.aws.amazon.com/goto/SdkForJavaV2/sts-2011-06-15/AssumeRoleWithSAML">AWS SDK for Java V2</a>
            </p>
         </li><li class="listitem">
            <p>
               <a href="https://docs.aws.amazon.com/goto/AWSJavaScriptSDK/sts-2011-06-15/AssumeRoleWithSAML">AWS SDK for JavaScript</a>
            </p>
         </li><li class="listitem">
            <p>
               <a href="https://docs.aws.amazon.com/goto/SdkForPHPV3/sts-2011-06-15/AssumeRoleWithSAML">AWS SDK for PHP V3</a>
            </p>
         </li><li class="listitem">
            <p>
               <a href="https://docs.aws.amazon.com/goto/boto3/sts-2011-06-15/AssumeRoleWithSAML">AWS SDK for Python</a>
            </p>
         </li><li class="listitem">
            <p>
               <a href="https://docs.aws.amazon.com/goto/SdkForRubyV3/sts-2011-06-15/AssumeRoleWithSAML">AWS SDK for Ruby V3</a>
            </p>
         </li></ul></div>
   <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./API_AssumeRole.html">AssumeRole</div><div id="next" class="next-link" accesskey="n" href="./API_AssumeRoleWithWebIdentity.html">AssumeRoleWithWebIdentity</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/en_us/STS/latest/APIReference/API_AssumeRoleWithSAML.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/en_us/STS/latest/APIReference/API_AssumeRoleWithSAML.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>