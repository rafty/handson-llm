<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>AssumeRoleWithWebIdentity - AWS Security Token Service</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="API_AssumeRoleWithWebIdentity" /><meta name="default_state" content="API_AssumeRoleWithWebIdentity" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html" /><meta name="description" content="Returns a set of temporary security credentials for users who have been authenticated in a mobile or web application with a web identity provider. Example providers include the OAuth 2.0 providers Login with Amazon and Facebook, or any OpenID Connect-compatible identity provider such as Google or" /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS Security Token Service" /><meta name="guide" content="API Reference" /><meta name="abstract" content="AWS Security Token Service (AWS STS) enables you to request temporary, limited-privilege credentials for users. This guide provides descriptions of the AWS STS API. For more information about using this service, see Temporary Security Credentials." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html" hreflang="x-default" /><meta name="feedback-item" content="IAM" /><meta name="this_doc_product" content="AWS Security Token Service" /><meta name="this_doc_guide" content="API Reference" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'iam'}"></script><meta id="panorama-serviceSubSection" value="API Reference" /><meta id="panorama-serviceConsolePage" value="AssumeRoleWithWebIdentity" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>AssumeRoleWithWebIdentity - AWS Security Token Service</title><meta name="pdf" content="/pdfs/STS/latest/APIReference/sts-api.pdf#API_AssumeRoleWithWebIdentity" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=76" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=http://docs.aws.amazon.com/en_us/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html" /><meta name="keywords" content="API,requests,AssumeRoleWithWebIdentity" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS Security Token Service",
        "item" : "https://docs.aws.amazon.com/iam/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "API Reference",
        "item" : "https://docs.aws.amazon.com/STS/latest/APIReference"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Actions",
        "item" : "https://docs.aws.amazon.com/STS/latest/APIReference/API_Operations.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "AssumeRoleWithWebIdentity",
        "item" : "https://docs.aws.amazon.com/STS/latest/APIReference/API_Operations.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/STS/latest/APIReference/sts-api.pdf#API_AssumeRoleWithWebIdentity" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/iam/index.html">AWS Security Token Service</a><a href="welcome.html">API Reference</a></div><div id="page-toc-src"><a href="#API_AssumeRoleWithWebIdentity_RequestParameters">Request Parameters</a><a href="#API_AssumeRoleWithWebIdentity_ResponseElements">Response Elements</a><a href="#API_AssumeRoleWithWebIdentity_Errors">Errors</a><a href="#API_AssumeRoleWithWebIdentity_Examples">Examples</a><a href="#API_AssumeRoleWithWebIdentity_SeeAlso">See Also</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="API_AssumeRoleWithWebIdentity">AssumeRoleWithWebIdentity</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Returns a set of temporary security credentials for users who have been authenticated in
         a mobile or web application with a web identity provider. Example providers include the
         OAuth 2.0 providers Login with Amazon and Facebook, or any OpenID Connect-compatible
         identity provider such as Google or <a href="https://docs.aws.amazon.com/cognito/latest/developerguide/cognito-identity.html">Amazon Cognito federated identities</a>.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>For mobile applications, we recommend that you use Amazon Cognito. You can use Amazon Cognito with the
               <a href="http://aws.amazon.com/sdkforios/" rel="noopener noreferrer" target="_blank"><span>AWS SDK for iOS Developer Guide</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> and the <a href="http://aws.amazon.com/sdkforandroid/" rel="noopener noreferrer" target="_blank"><span>AWS SDK for Android Developer Guide</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> to uniquely
            identify a user. You can also supply the user with a consistent identity throughout the
            lifetime of an application.</p><p>To learn more about Amazon Cognito, see <a href="https://docs.aws.amazon.com/cognito/latest/developerguide/cognito-identity.html">Amazon Cognito identity pools</a> in
            <em>Amazon Cognito Developer Guide</em>.</p></div></div><p>Calling <code class="code">AssumeRoleWithWebIdentity</code> does not require the use of AWS
         security credentials. Therefore, you can distribute an application (for example, on mobile
         devices) that requests temporary security credentials without including long-term AWS
         credentials in the application. You also don't need to deploy server-based proxy services
         that use long-term AWS credentials. Instead, the identity of the caller is validated by
         using a token from the web identity provider. For a comparison of
            <code class="code">AssumeRoleWithWebIdentity</code> with the other API operations that produce
         temporary credentials, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_request.html">Requesting Temporary Security
            Credentials</a> and <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_request.html#stsapi_comparison">Comparing the
            AWS STS API operations</a> in the <em>IAM User Guide</em>.</p><p>The temporary security credentials returned by this API consist of an access key ID, a
         secret access key, and a security token. Applications can use these temporary security
         credentials to sign calls to AWS service API operations.</p><p>
      <b>Session Duration</b>
   </p><p>By default, the temporary security credentials created by
            <code class="code">AssumeRoleWithWebIdentity</code> last for one hour. However, you can use the
         optional <code class="code">DurationSeconds</code> parameter to specify the duration of your session.
         You can provide a value from 900 seconds (15 minutes) up to the maximum session duration
         setting for the role. This setting can have a value from 1 hour to 12 hours. To learn how
         to view the maximum value for your role, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use.html#id_roles_use_view-role-max-session">View the
            Maximum Session Duration Setting for a Role</a> in the
            <em>IAM User Guide</em>. The maximum session duration limit applies when
         you use the <code class="code">AssumeRole*</code> API operations or the <code class="code">assume-role*</code> CLI
         commands. However the limit does not apply when you use those operations to create a
         console URL. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use.html">Using IAM Roles</a> in the
            <em>IAM User Guide</em>. </p><p>
      <b>Permissions</b>
   </p><p>The temporary security credentials created by <code class="code">AssumeRoleWithWebIdentity</code> can
         be used to make API calls to any AWS service with the following exception: you cannot
         call the AWS STS
      <code class="code">GetFederationToken</code> or <code class="code">GetSessionToken</code> API
         operations.</p><p>(Optional) You can pass inline or managed <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html#policies_session">session policies</a> to
         this operation. You can pass a single JSON policy document to use as an inline session
         policy. You can also specify up to 10 managed policy Amazon Resource Names (ARNs) to use as
         managed session policies. The plaintext that you use for both inline and managed session
         policies can't exceed 2,048 characters. Passing policies to this operation returns new 
         temporary credentials. The resulting session's permissions are the intersection of the 
         role's identity-based policy and the session policies. You can use the role's temporary 
         credentials in subsequent AWS API calls to access resources in the account that owns 
         the role. You cannot use session policies to grant more permissions than those allowed 
         by the identity-based policy of the role that is being assumed. For more information, see
            <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html#policies_session">Session
            Policies</a> in the <em>IAM User Guide</em>.</p><p>
      <b>Tags</b>
   </p><p>(Optional) You can configure your IdP to pass attributes into your web identity token as
         session tags. Each session tag consists of a key name and an associated value. For more
         information about session tags, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_session-tags.html">Passing Session Tags in AWS STS</a> in the
            <em>IAM User Guide</em>.</p><p>You can pass up to 50 session tags. The plaintext session tag keys can’t exceed 128
         characters and the values can’t exceed 256 characters. For these and additional limits, see
            <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_iam-limits.html#reference_iam-limits-entity-length">IAM
            and AWS STS Character Limits</a> in the <em>IAM User Guide</em>.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>An AWS conversion compresses the passed inline session policy, managed policy ARNs,
            and session tags into a packed binary format that has a separate limit. Your request can
            fail for this limit even if your plaintext meets the other requirements. The
               <code class="code">PackedPolicySize</code> response element indicates by percentage how close the
            policies and tags for your request are to the upper size limit.</p></div></div><p>You can pass a session tag with the same key as a tag that is attached to the role. When
         you do, the session tag overrides the role tag with the same key.</p><p>An administrator must grant you the permissions necessary to pass session tags. The
         administrator can also create granular permissions to allow you to pass only specific
         session tags. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/tutorial_attribute-based-access-control.html">Tutorial: Using Tags
            for Attribute-Based Access Control</a> in the
         <em>IAM User Guide</em>.</p><p>You can set the session tags as transitive. Transitive tags persist during role
         chaining. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_session-tags.html#id_session-tags_role-chaining">Chaining Roles
            with Session Tags</a> in the <em>IAM User Guide</em>.</p><p>
      <b>Identities</b>
   </p><p>Before your application can call <code class="code">AssumeRoleWithWebIdentity</code>, you must have
         an identity token from a supported identity provider and create a role that the application
         can assume. The role that your application assumes must trust the identity provider that is
         associated with the identity token. In other words, the identity provider must be specified
         in the role's trust policy. </p><div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>Calling <code class="code">AssumeRoleWithWebIdentity</code> can result in an entry in your
            AWS CloudTrail logs. The entry includes the <a href="http://openid.net/specs/openid-connect-core-1_0.html#Claims" rel="noopener noreferrer" target="_blank"><span>Subject</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> of
            the provided web identity token. We recommend that you avoid using any personally
            identifiable information (PII) in this field. For example, you could instead use a GUID
            or a pairwise identifier, as <a href="http://openid.net/specs/openid-connect-core-1_0.html#SubjectIDTypes" rel="noopener noreferrer" target="_blank"><span>suggested
               in the OIDC specification</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.</p></div></div><p>For more information about how to use web identity federation and the
            <code class="code">AssumeRoleWithWebIdentity</code> API, see the following resources: </p><div class="itemizedlist">
       
       
       
       
   <ul class="itemizedlist"><li class="listitem">
         <p>
            <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_providers_oidc_manual.html">Using Web Identity Federation API Operations for Mobile Apps</a> and <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_request.html#api_assumerolewithwebidentity">Federation Through a Web-based Identity Provider</a>. </p>
      </li><li class="listitem">
         <p>
            <a href="https://aws.amazon.com/blogs/aws/the-aws-web-identity-federation-playground/" rel="noopener noreferrer" target="_blank"><span> Web Identity Federation Playground</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. Walk through the process of
               authenticating through Login with Amazon, Facebook, or Google, getting temporary
               security credentials, and then using those credentials to make a request to AWS.
            </p>
      </li><li class="listitem">
         <p>
            <a href="http://aws.amazon.com/sdkforios/" rel="noopener noreferrer" target="_blank"><span>AWS SDK for iOS Developer Guide</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> and <a href="http://aws.amazon.com/sdkforandroid/" rel="noopener noreferrer" target="_blank"><span>AWS SDK for Android Developer Guide</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. These toolkits
               contain sample apps that show how to invoke the identity providers. The toolkits then
               show how to use the information from these providers to get and use temporary
               security credentials. </p>
      </li><li class="listitem">
         <p>
            <a href="http://aws.amazon.com/articles/web-identity-federation-with-mobile-applications" rel="noopener noreferrer" target="_blank"><span>Web Identity
                  Federation with Mobile Applications</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. This article discusses web identity
               federation and shows an example of how to use web identity federation to get access
               to content in Amazon S3. </p>
      </li></ul></div>
      <h2 id="API_AssumeRoleWithWebIdentity_RequestParameters">Request Parameters</h2>
      <p> For information about the parameters that are common to all actions, see <a href="./CommonParameters.html">Common Parameters</a>.</p>
      <div class="variablelist">
          
          
          
          
          
          
          
      <dl>
            <dt><span class="term">
               <b>
                  DurationSeconds
               </b>
            </span></dt>
            <dd>
               <p>The duration, in seconds, of the role session. The value can range from 900 seconds (15
         minutes) up to the maximum session duration setting for the role. This setting can have a
         value from 1 hour to 12 hours. If you specify a value higher than this setting, the
         operation fails. For example, if you specify a session duration of 12 hours, but your
         administrator set the maximum session duration to 6 hours, your operation fails. To learn
         how to view the maximum value for your role, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use.html#id_roles_use_view-role-max-session">View the
            Maximum Session Duration Setting for a Role</a> in the
            <em>IAM User Guide</em>.</p>
               <p>By default, the value is set to <code class="code">3600</code> seconds. </p>
               <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>The <code class="code">DurationSeconds</code> parameter is separate from the duration of a console
            session that you might request using the returned credentials. The request to the
            federation endpoint for a console sign-in token takes a <code class="code">SessionDuration</code>
            parameter that specifies the maximum length of the console session. For more
            information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_providers_enable-console-custom-url.html">Creating a URL
               that Enables Federated Users to Access the AWS Management Console</a> in the
               <em>IAM User Guide</em>.</p></div></div>
               <p>Type: Integer</p>
               <p>Valid Range: Minimum value of 900. Maximum value of 43200.</p>
               <p>Required: No</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  Policy
               </b>
            </span></dt>
            <dd>
               <p>An IAM policy in JSON format that you want to use as an inline session policy.</p>
               <p>This parameter is optional. Passing policies to this operation returns new 
         temporary credentials. The resulting session's permissions are the intersection of the 
         role's identity-based policy and the session policies. You can use the role's temporary 
         credentials in subsequent AWS API calls to access resources in the account that owns 
         the role. You cannot use session policies to grant more permissions than those allowed 
         by the identity-based policy of the role that is being assumed. For more information, see
            <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html#policies_session">Session
            Policies</a> in the <em>IAM User Guide</em>.</p>
               <p>The plaintext that you use for both inline and managed session policies can't exceed
         2,048 characters. The JSON policy characters can be any ASCII character from the space
         character to the end of the valid character list (\u0020 through \u00FF). It can also
         include the tab (\u0009), linefeed (\u000A), and carriage return (\u000D)
         characters.</p>
               <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>An AWS conversion compresses the passed inline session policy, managed policy ARNs,
            and session tags into a packed binary format that has a separate limit. Your request can
            fail for this limit even if your plaintext meets the other requirements. The
               <code class="code">PackedPolicySize</code> response element indicates by percentage how close the
            policies and tags for your request are to the upper size limit.</p></div></div>
               <p>Type: String</p>
               <p>Length Constraints: Minimum length of 1. Maximum length of 2048.</p>
               <p>Pattern: <code class="code">[\u0009\u000A\u000D\u0020-\u00FF]+</code>
               </p>
               <p>Required: No</p>
            </dd>
          
            <dt><span class="term">
               <b>PolicyArns.member.N</b>
            </span></dt>
            <dd>
               <p>The Amazon Resource Names (ARNs) of the IAM managed policies that you want to use as
         managed session policies. The policies must exist in the same account as the role.</p>
               <p>This parameter is optional. You can provide up to 10 managed policy ARNs. However, the
         plaintext that you use for both inline and managed session policies can't exceed 2,048
         characters. For more information about ARNs, see <a href="https://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html">Amazon Resource Names (ARNs) and AWS
            Service Namespaces</a> in the AWS General Reference.</p>
               <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>An AWS conversion compresses the passed inline session policy, managed policy ARNs,
            and session tags into a packed binary format that has a separate limit. Your request can
            fail for this limit even if your plaintext meets the other requirements. The
               <code class="code">PackedPolicySize</code> response element indicates by percentage how close the
            policies and tags for your request are to the upper size limit.</p></div></div>
               <p>Passing policies to this operation returns new 
         temporary credentials. The resulting session's permissions are the intersection of the 
         role's identity-based policy and the session policies. You can use the role's temporary 
         credentials in subsequent AWS API calls to access resources in the account that owns 
         the role. You cannot use session policies to grant more permissions than those allowed 
         by the identity-based policy of the role that is being assumed. For more information, see
            <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html#policies_session">Session
            Policies</a> in the <em>IAM User Guide</em>.</p>
               <p>Type: Array of <a href="./API_PolicyDescriptorType.html">PolicyDescriptorType</a> objects</p>
               <p>Required: No</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  ProviderId
               </b>
            </span></dt>
            <dd>
               <p>The fully qualified host component of the domain name of the OAuth 2.0 identity
         provider. Do not specify this value for an OpenID Connect identity provider.</p>
               <p>Currently <code class="code">www.amazon.com</code> and <code class="code">graph.facebook.com</code> are the only
         supported identity providers for OAuth 2.0 access tokens. Do not include URL schemes and
         port numbers.</p>
               <p>Do not specify this value for OpenID Connect ID tokens.</p>
               <p>Type: String</p>
               <p>Length Constraints: Minimum length of 4. Maximum length of 2048.</p>
               <p>Required: No</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  RoleArn
               </b>
            </span></dt>
            <dd>
               <p>The Amazon Resource Name (ARN) of the role that the caller is assuming.</p>
               <p>Type: String</p>
               <p>Length Constraints: Minimum length of 20. Maximum length of 2048.</p>
               <p>Pattern: <code class="code">[\u0009\u000A\u000D\u0020-\u007E\u0085\u00A0-\uD7FF\uE000-\uFFFD\u10000-\u10FFFF]+</code>
               </p>
               <p>Required: Yes</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  RoleSessionName
               </b>
            </span></dt>
            <dd>
               <p>An identifier for the assumed role session. Typically, you pass the name or identifier
         that is associated with the user who is using your application. That way, the temporary
         security credentials that your application will use are associated with that user. This
         session name is included as part of the ARN and assumed role ID in the
            <code class="code">AssumedRoleUser</code> response element.</p>
               <p>The regex used to validate this parameter is a string of characters 
    consisting of upper- and lower-case alphanumeric characters with no spaces. You can 
    also include underscores or any of the following characters: =,.@-</p>
               <p>Type: String</p>
               <p>Length Constraints: Minimum length of 2. Maximum length of 64.</p>
               <p>Pattern: <code class="code">[\w+=,.@-]*</code>
               </p>
               <p>Required: Yes</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  WebIdentityToken
               </b>
            </span></dt>
            <dd>
               <p>The OAuth 2.0 access token or OpenID Connect ID token that is provided by the identity
         provider. Your application must get this token by authenticating the user who is using your
         application with a web identity provider before the application makes an
         <code class="code">AssumeRoleWithWebIdentity</code> call. Only tokens with RSA algorithms (RS256) are supported.</p>
               <p>Type: String</p>
               <p>Length Constraints: Minimum length of 4. Maximum length of 20000.</p>
               <p>Required: Yes</p>
            </dd>
         </dl></div>
    
      <h2 id="API_AssumeRoleWithWebIdentity_ResponseElements">Response Elements</h2>
      <p>The following elements are returned by the service.</p>
      <div class="variablelist">
          
          
          
          
          
          
          
      <dl>
            <dt><span class="term">
               <b>
                  AssumedRoleUser
               </b>
            </span></dt>
            <dd>
               <p>The Amazon Resource Name (ARN) and the assumed role ID, which are identifiers that you
         can use to refer to the resulting temporary security credentials. For example, you can
         reference these credentials as a principal in a resource-based policy by using the ARN or
         assumed role ID. The ARN and ID include the <code class="code">RoleSessionName</code> that you specified
         when you called <code class="code">AssumeRole</code>. </p>
               <p>Type: <a href="./API_AssumedRoleUser.html">AssumedRoleUser</a> object</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  Audience
               </b>
            </span></dt>
            <dd>
               <p>The intended audience (also known as client ID) of the web identity token. This is
         traditionally the client identifier issued to the application that requested the web
         identity token.</p>
               <p>Type: String</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  Credentials
               </b>
            </span></dt>
            <dd>
               <p>The temporary security credentials, which include an access key ID, a secret access key,
         and a security token.</p>
               <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>The size of the security token that AWS STS API operations return is not fixed. We
        strongly recommend that you make no assumptions about the maximum size.</p></div></div>
               <p>Type: <a href="./API_Credentials.html">Credentials</a> object</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  PackedPolicySize
               </b>
            </span></dt>
            <dd>
               <p>A percentage value that indicates the packed size of the session policies and session 
      tags combined passed in the request. The request fails if the packed size is greater than 100 percent, 
      which means the policies and tags exceeded the allowed space.</p>
               <p>Type: Integer</p>
               <p>Valid Range: Minimum value of 0.</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  Provider
               </b>
            </span></dt>
            <dd>
               <p> The issuing authority of the web identity token presented. For OpenID Connect ID
         tokens, this contains the value of the <code class="code">iss</code> field. For OAuth 2.0 access tokens,
         this contains the value of the <code class="code">ProviderId</code> parameter that was passed in the
            <code class="code">AssumeRoleWithWebIdentity</code> request.</p>
               <p>Type: String</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  SourceIdentity
               </b>
            </span></dt>
            <dd>
               <p>The value of the source identity that is returned in the JSON web token (JWT) from the
         identity provider.</p>
               <p>You can require users to set a source identity value when they assume a role. You do
         this by using the <code class="code">sts:SourceIdentity</code> condition key in a role trust policy.
         That way, actions that are taken with the role are associated with that user. After the
         source identity is set, the value cannot be changed. It is present in the request for all
         actions that are taken by the role and persists across <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts#iam-term-role-chaining">chained
            role</a> sessions. You can configure your identity provider to use an attribute
         associated with your users, like user name or email, as the source identity when calling
            <code class="code">AssumeRoleWithWebIdentity</code>. You do this by adding a claim to the JSON web
         token. To learn more about OIDC tokens and claims, see <a href="https://docs.aws.amazon.com/cognito/latest/developerguide/amazon-cognito-user-pools-using-tokens-with-identity-providers.html">Using Tokens with User Pools</a> in the <em>Amazon Cognito Developer Guide</em>.
         For more information about using source identity, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_control-access_monitor.html">Monitor and control
            actions taken with assumed roles</a> in the
         <em>IAM User Guide</em>.</p>
               <p>The regex used to validate this parameter is a string of characters 
    consisting of upper- and lower-case alphanumeric characters with no spaces. You can 
    also include underscores or any of the following characters: =,.@-</p>
               <p>Type: String</p>
               <p>Length Constraints: Minimum length of 2. Maximum length of 64.</p>
               <p>Pattern: <code class="code">[\w+=,.@-]*</code>
               </p>
            </dd>
          
            <dt><span class="term">
               <b>
                  SubjectFromWebIdentityToken
               </b>
            </span></dt>
            <dd>
               <p>The unique user identifier that is returned by the identity provider. This identifier is
         associated with the <code class="code">WebIdentityToken</code> that was submitted with the
            <code class="code">AssumeRoleWithWebIdentity</code> call. The identifier is typically unique to the
         user and the application that acquired the <code class="code">WebIdentityToken</code> (pairwise
         identifier). For OpenID Connect ID tokens, this field contains the value returned by the
         identity provider as the token's <code class="code">sub</code> (Subject) claim. </p>
               <p>Type: String</p>
               <p>Length Constraints: Minimum length of 6. Maximum length of 255.</p>
            </dd>
         </dl></div>
    
      <h2 id="API_AssumeRoleWithWebIdentity_Errors">Errors</h2>
      <p>For information about the errors that are common to all actions, see <a href="./CommonErrors.html">Common Errors</a>.</p>
      <div class="variablelist">
          
          
          
          
          
          
          
      <dl>
            <dt><span class="term">
               <b>
                  ExpiredToken
               </b>
            </span></dt>
            <dd>
               <p>The web identity token that was passed is expired or is not valid. Get a new identity
            token from the identity provider and then retry the request.</p>
               <p>HTTP Status Code: 400</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  IDPCommunicationError
               </b>
            </span></dt>
            <dd>
               <p>The request could not be fulfilled because the identity provider (IDP) that
            was asked to verify the incoming identity token could not be reached. This is often a
            transient error caused by network conditions. Retry the request a limited number of
            times so that you don't exceed the request rate. If the error persists, the
            identity provider might be down or not responding.</p>
               <p>HTTP Status Code: 400</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  IDPRejectedClaim
               </b>
            </span></dt>
            <dd>
               <p>The identity provider (IdP) reported that authentication failed. This might be because
            the claim is invalid.</p>
               <p>If this error is returned for the <code class="code">AssumeRoleWithWebIdentity</code> operation, it
            can also mean that the claim has expired or has been explicitly revoked. </p>
               <p>HTTP Status Code: 403</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  InvalidIdentityToken
               </b>
            </span></dt>
            <dd>
               <p>The web identity token that was passed could not be validated by AWS. Get a new
            identity token from the identity provider and then retry the request.</p>
               <p>HTTP Status Code: 400</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  MalformedPolicyDocument
               </b>
            </span></dt>
            <dd>
               <p>The request was rejected because the policy document was malformed. The error message
            describes the specific error.</p>
               <p>HTTP Status Code: 400</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  PackedPolicyTooLarge
               </b>
            </span></dt>
            <dd>
               <p>The request was rejected because the total packed size of the session policies and
            session tags combined was too large. An AWS conversion compresses the session policy
            document, session policy ARNs, and session tags into a packed binary format that has a
            separate limit. The error message indicates by percentage how close the policies and
            tags are to the upper size limit. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_session-tags.html">Passing Session Tags in AWS STS</a> in
            the <em>IAM User Guide</em>.</p>
               <p>You could receive this error even though you meet other defined session policy and
            session tag limits. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_iam-quotas.html#reference_iam-limits-entity-length">IAM and AWS STS Entity
                Character Limits</a> in the <em>IAM User Guide</em>.</p>
               <p>HTTP Status Code: 400</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  RegionDisabled
               </b>
            </span></dt>
            <dd>
               <p>
                  AWS STS is not activated in the requested region for the account that is being asked to
            generate credentials. The account administrator must use the IAM console to activate AWS STS
            in that region. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_enable-regions.html">Activating and
                Deactivating AWSAWS STS in an AWS Region</a> in the <em>IAM User
                    Guide</em>.</p>
               <p>HTTP Status Code: 403</p>
            </dd>
         </dl></div>
    
      <h2 id="API_AssumeRoleWithWebIdentity_Examples">Examples</h2>
       
         <h3 id="API_AssumeRoleWithWebIdentity_Example_1">Example</h3>
         <p>This example illustrates one usage of AssumeRoleWithWebIdentity.</p>
          
            <h4 id="API_AssumeRoleWithWebIdentity_Example_1_Request">Sample Request</h4>
            <pre class="programlisting"><div class="code-btn-container"></div><code class="">https://sts.amazonaws.com/
?Action=AssumeRoleWithWebIdentity
&amp;DurationSeconds=3600
&amp;PolicyArns.member.1.arn=arn:aws:iam::123456789012:policy/webidentitydemopolicy1
&amp;PolicyArns.member.2.arn=arn:aws:iam::123456789012:policy/webidentitydemopolicy2
&amp;ProviderId=www.amazon.com
&amp;RoleSessionName=app1
&amp;RoleArn=arn:aws:iam::123456789012:role/FederatedWebIdentityRole
&amp;WebIdentityToken=Atza%7CIQEBLjAsAhRFiXuWpUXuRvQ9PZL3GMFcYevydwIUFAHZwXZXX
XXXXXXJnrulxKDHwy87oGKPznh0D6bEQZTSCzyoCtL_8S07pLpr0zMbn6w1lfVZKNTBdDansFB
mtGnIsIapjI6xKR02Yc_2bQ8LZbUXSGm6Ry6_BG7PrtLZtj_dfCTj92xNGed-CrKqjG7nPBjNI
L016GGvuS5gSvPRUxWES3VYfm1wl7WTI7jn-Pcb6M-buCgHhFOzTQxod27L9CqnOLio7N3gZAG
psp6n1-AJBOCJckcyXe2c6uD0srOJeZlKUm2eTDVMf8IehDVI0r1QOnTV6KzzAI3OY87Vd_cVMQ
&amp;Version=2011-06-15</code></pre>
          
          
            <h4 id="API_AssumeRoleWithWebIdentity_Example_1_Response">Sample Response</h4>
            <pre class="programlisting"><div class="code-btn-container"></div><code class="">
&lt;AssumeRoleWithWebIdentityResponse xmlns="https://sts.amazonaws.com/doc/2011-06-15/"&gt;
  &lt;AssumeRoleWithWebIdentityResult&gt;
    &lt;SubjectFromWebIdentityToken&gt;amzn1.account.AF6RHO7KZU5XRVQJGXK6HB56KR2A&lt;/SubjectFromWebIdentityToken&gt;
    &lt;Audience&gt;client.5498841531868486423.1548@apps.example.com&lt;/Audience&gt;
    &lt;AssumedRoleUser&gt;
      &lt;Arn&gt;arn:aws:sts::123456789012:assumed-role/FederatedWebIdentityRole/app1&lt;/Arn&gt;
      &lt;AssumedRoleId&gt;AROACLKWSDQRAOEXAMPLE:app1&lt;/AssumedRoleId&gt;
    &lt;/AssumedRoleUser&gt;
    &lt;Credentials&gt;
      &lt;SessionToken&gt;AQoDYXdzEE0a8ANXXXXXXXXNO1ewxE5TijQyp+IEXAMPLE&lt;/SessionToken&gt;
      &lt;SecretAccessKey&gt;wJalrXUtnFEMI/K7MDENG/bPxRfiCYzEXAMPLEKEY&lt;/SecretAccessKey&gt;
      &lt;Expiration&gt;2014-10-24T23:00:23Z&lt;/Expiration&gt;
      &lt;AccessKeyId&gt;ASgeIAIOSFODNN7EXAMPLE&lt;/AccessKeyId&gt;
    &lt;/Credentials&gt;
    &lt;SourceIdentity&gt;SourceIdentityValue&lt;/SourceIdentity&gt;
    &lt;Provider&gt;www.amazon.com&lt;/Provider&gt;
  &lt;/AssumeRoleWithWebIdentityResult&gt;
  &lt;ResponseMetadata&gt;
    &lt;RequestId&gt;ad4156e9-bce1-11e2-82e6-6b6efEXAMPLE&lt;/RequestId&gt;
  &lt;/ResponseMetadata&gt;
&lt;/AssumeRoleWithWebIdentityResponse&gt;</code></pre>
          
       
    
      <h2 id="API_AssumeRoleWithWebIdentity_SeeAlso">See Also</h2>
      <p>For more information about using this API in one of the language-specific AWS SDKs, see the following:</p>
      <div class="itemizedlist">
          
          
          
          
          
          
          
          
          
      <ul class="itemizedlist"><li class="listitem">
            <p>
               <a href="https://docs.aws.amazon.com/goto/aws-cli/sts-2011-06-15/AssumeRoleWithWebIdentity">AWS Command Line Interface</a>
            </p>
         </li><li class="listitem">
            <p>
               <a href="https://docs.aws.amazon.com/goto/DotNetSDKV3/sts-2011-06-15/AssumeRoleWithWebIdentity">AWS SDK for .NET</a>
            </p>
         </li><li class="listitem">
            <p>
               <a href="https://docs.aws.amazon.com/goto/SdkForCpp/sts-2011-06-15/AssumeRoleWithWebIdentity">AWS SDK for C++</a>
            </p>
         </li><li class="listitem">
            <p>
               <a href="https://docs.aws.amazon.com/goto/SdkForGoV1/sts-2011-06-15/AssumeRoleWithWebIdentity">AWS SDK for Go</a>
            </p>
         </li><li class="listitem">
            <p>
               <a href="https://docs.aws.amazon.com/goto/SdkForJavaV2/sts-2011-06-15/AssumeRoleWithWebIdentity">AWS SDK for Java V2</a>
            </p>
         </li><li class="listitem">
            <p>
               <a href="https://docs.aws.amazon.com/goto/AWSJavaScriptSDK/sts-2011-06-15/AssumeRoleWithWebIdentity">AWS SDK for JavaScript</a>
            </p>
         </li><li class="listitem">
            <p>
               <a href="https://docs.aws.amazon.com/goto/SdkForPHPV3/sts-2011-06-15/AssumeRoleWithWebIdentity">AWS SDK for PHP V3</a>
            </p>
         </li><li class="listitem">
            <p>
               <a href="https://docs.aws.amazon.com/goto/boto3/sts-2011-06-15/AssumeRoleWithWebIdentity">AWS SDK for Python</a>
            </p>
         </li><li class="listitem">
            <p>
               <a href="https://docs.aws.amazon.com/goto/SdkForRubyV3/sts-2011-06-15/AssumeRoleWithWebIdentity">AWS SDK for Ruby V3</a>
            </p>
         </li></ul></div>
   <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./API_AssumeRoleWithSAML.html">AssumeRoleWithSAML</div><div id="next" class="next-link" accesskey="n" href="./API_DecodeAuthorizationMessage.html">DecodeAuthorizationMessage</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/en_us/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/en_us/STS/latest/APIReference/API_AssumeRoleWithWebIdentity.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>