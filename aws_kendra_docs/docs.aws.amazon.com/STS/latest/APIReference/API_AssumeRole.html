<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>AssumeRole - AWS Security Token Service</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="API_AssumeRole" /><meta name="default_state" content="API_AssumeRole" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRole.html" /><meta name="description" content="Returns a set of temporary security credentials that you can use to access AWS resources. These temporary credentials consist of an access key ID, a secret access key, and a security token. Typically, you use AssumeRole within your account or for cross-account access. For a comparison of" /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS Security Token Service" /><meta name="guide" content="API Reference" /><meta name="abstract" content="AWS Security Token Service (AWS STS) enables you to request temporary, limited-privilege credentials for users. This guide provides descriptions of the AWS STS API. For more information about using this service, see Temporary Security Credentials." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRole.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/STS/latest/APIReference/API_AssumeRole.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/STS/latest/APIReference/API_AssumeRole.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/STS/latest/APIReference/API_AssumeRole.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/STS/latest/APIReference/API_AssumeRole.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRole.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRole.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/STS/latest/APIReference/API_AssumeRole.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/STS/latest/APIReference/API_AssumeRole.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/STS/latest/APIReference/API_AssumeRole.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/STS/latest/APIReference/API_AssumeRole.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/STS/latest/APIReference/API_AssumeRole.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/STS/latest/APIReference/API_AssumeRole.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/STS/latest/APIReference/API_AssumeRole.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/STS/latest/APIReference/API_AssumeRole.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/STS/latest/APIReference/API_AssumeRole.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/STS/latest/APIReference/API_AssumeRole.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/STS/latest/APIReference/API_AssumeRole.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/STS/latest/APIReference/API_AssumeRole.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/STS/latest/APIReference/API_AssumeRole.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/STS/latest/APIReference/API_AssumeRole.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRole.html" hreflang="x-default" /><meta name="feedback-item" content="IAM" /><meta name="this_doc_product" content="AWS Security Token Service" /><meta name="this_doc_guide" content="API Reference" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'iam'}"></script><meta id="panorama-serviceSubSection" value="API Reference" /><meta id="panorama-serviceConsolePage" value="AssumeRole" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>AssumeRole - AWS Security Token Service</title><meta name="pdf" content="/pdfs/STS/latest/APIReference/sts-api.pdf#API_AssumeRole" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=76" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=http://docs.aws.amazon.com/en_us/STS/latest/APIReference/API_AssumeRole.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/STS/latest/APIReference/API_AssumeRole.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/STS/latest/APIReference/API_AssumeRole.html" /><meta name="keywords" content="API,requests,AssumeRole" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS Security Token Service",
        "item" : "https://docs.aws.amazon.com/iam/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "API Reference",
        "item" : "https://docs.aws.amazon.com/STS/latest/APIReference"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Actions",
        "item" : "https://docs.aws.amazon.com/STS/latest/APIReference/API_Operations.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "AssumeRole",
        "item" : "https://docs.aws.amazon.com/STS/latest/APIReference/API_Operations.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/STS/latest/APIReference/sts-api.pdf#API_AssumeRole" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/iam/index.html">AWS Security Token Service</a><a href="welcome.html">API Reference</a></div><div id="page-toc-src"><a href="#API_AssumeRole_RequestParameters">Request Parameters</a><a href="#API_AssumeRole_ResponseElements">Response Elements</a><a href="#API_AssumeRole_Errors">Errors</a><a href="#API_AssumeRole_Examples">Examples</a><a href="#API_AssumeRole_SeeAlso">See Also</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="API_AssumeRole">AssumeRole</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Returns a set of temporary security credentials that you can use to access AWS
         resources. These temporary credentials consist of an access key ID, a secret access key,
         and a security token. Typically, you use <code class="code">AssumeRole</code> within your account or for
         cross-account access. For a comparison of <code class="code">AssumeRole</code> with other API operations
         that produce temporary credentials, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_request.html">Requesting Temporary Security
            Credentials</a> and <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_request.html#stsapi_comparison">Comparing the
            AWS STS API operations</a> in the <em>IAM User Guide</em>.</p><p>
      <b>Permissions</b>
   </p><p>The temporary security credentials created by <code class="code">AssumeRole</code> can be used to
         make API calls to any AWS service with the following exception: You cannot call the
         AWS STS
      <code class="code">GetFederationToken</code> or <code class="code">GetSessionToken</code> API
         operations.</p><p>(Optional) You can pass inline or managed <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html#policies_session">session policies</a> to
         this operation. You can pass a single JSON policy document to use as an inline session
         policy. You can also specify up to 10 managed policy Amazon Resource Names (ARNs) to use as
         managed session policies. The plaintext that you use for both inline and managed session
         policies can't exceed 2,048 characters. Passing policies to this operation returns new 
         temporary credentials. The resulting session's permissions are the intersection of the 
         role's identity-based policy and the session policies. You can use the role's temporary 
         credentials in subsequent AWS API calls to access resources in the account that owns 
         the role. You cannot use session policies to grant more permissions than those allowed 
         by the identity-based policy of the role that is being assumed. For more information, see
            <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html#policies_session">Session
            Policies</a> in the <em>IAM User Guide</em>.</p><p>When you create a role, you create two policies: a role trust policy that specifies
            <em>who</em> can assume the role, and a permissions policy that specifies
            <em>what</em> can be done with the role. You specify the trusted principal
         that is allowed to assume the role in the role trust policy.</p><p>To assume a role from a different account, your AWS account must be trusted by the
         role. The trust relationship is defined in the role's trust policy when the role is
         created. That trust policy states which accounts are allowed to delegate that access to
         users in the account. </p><p>A user who wants to access a role in a different account must also have permissions that
         are delegated from the account administrator. The administrator must attach a policy
         that allows the user to call <code class="code">AssumeRole</code> for the ARN of the role in the other
         account.</p><p>To allow a user to assume a role in the same account, you can do either of the
         following:</p><div class="itemizedlist">
       
       
   <ul class="itemizedlist"><li class="listitem">
         <p>Attach a policy to the user that allows the user to call <code class="code">AssumeRole</code>
               (as long as the role's trust policy trusts the account).</p>
      </li><li class="listitem">
         <p>Add the user as a principal directly in the role's trust policy.</p>
      </li></ul></div><p>You can do either because the role’s trust policy acts as an IAM resource-based
         policy. When a resource-based policy grants access to a principal in the same account, no
         additional identity-based policy is required. For more information about trust policies and
         resource-based policies, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html">IAM Policies</a> in the
            <em>IAM User Guide</em>.</p><p>
      <b>Tags</b>
   </p><p>(Optional) You can pass tag key-value pairs to your session. These tags are called
         session tags. For more information about session tags, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_session-tags.html">Passing Session Tags in AWS STS</a> in the
            <em>IAM User Guide</em>.</p><p>An administrator must grant you the permissions necessary to pass session tags. The
         administrator can also create granular permissions to allow you to pass only specific
         session tags. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/tutorial_attribute-based-access-control.html">Tutorial: Using Tags
            for Attribute-Based Access Control</a> in the
         <em>IAM User Guide</em>.</p><p>You can set the session tags as transitive. Transitive tags persist during role
         chaining. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_session-tags.html#id_session-tags_role-chaining">Chaining Roles
            with Session Tags</a> in the <em>IAM User Guide</em>.</p><p>
      <b>Using MFA with AssumeRole</b>
   </p><p>(Optional) You can include multi-factor authentication (MFA) information when you call
            <code class="code">AssumeRole</code>. This is useful for cross-account scenarios to ensure that the
         user that assumes the role has been authenticated with an AWS MFA device. In that
         scenario, the trust policy of the role being assumed includes a condition that tests for
         MFA authentication. If the caller does not include valid MFA information, the request to
         assume the role is denied. The condition in a trust policy that tests for MFA
         authentication might look like the following example.</p><p>
      <code class="code">"Condition": <span>{</span>"Bool": <span>{</span>"aws:MultiFactorAuthPresent": true}}</code>
   </p><p>For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/MFAProtectedAPI.html">Configuring MFA-Protected API Access</a>
         in the <em>IAM User Guide</em> guide.</p><p>To use MFA with <code class="code">AssumeRole</code>, you pass values for the
            <code class="code">SerialNumber</code> and <code class="code">TokenCode</code> parameters. The
            <code class="code">SerialNumber</code> value identifies the user's hardware or virtual MFA device.
         The <code class="code">TokenCode</code> is the time-based one-time password (TOTP) that the MFA device
         produces. </p>
      <h2 id="API_AssumeRole_RequestParameters">Request Parameters</h2>
      <p> For information about the parameters that are common to all actions, see <a href="./CommonParameters.html">Common Parameters</a>.</p>
      <div class="variablelist">
          
          
          
          
          
          
          
          
          
          
          
      <dl>
            <dt><span class="term">
               <b>
                  DurationSeconds
               </b>
            </span></dt>
            <dd>
               <p>The duration, in seconds, of the role session. The value specified can range from 900
         seconds (15 minutes) up to the maximum session duration set for the role. The maximum
         session duration setting can have a value from 1 hour to 12 hours. If you specify a value
         higher than this setting or the administrator setting (whichever is lower), the operation
         fails. For example, if you specify a session duration of 12 hours, but your administrator
         set the maximum session duration to 6 hours, your operation fails. </p>
               <p>Role chaining limits your AWS CLI or AWS API role session to a maximum of one hour.
         When you use the <code class="code">AssumeRole</code> API operation to assume a role, you can specify
         the duration of your role session with the <code class="code">DurationSeconds</code> parameter. You can
         specify a parameter value of up to 43200 seconds (12 hours), depending on the maximum
         session duration setting for your role. However, if you assume a role using role chaining
         and provide a <code class="code">DurationSeconds</code> parameter value greater than one hour, the
         operation fails. To learn how to view the maximum value for your role, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use.html#id_roles_use_view-role-max-session">View the
            Maximum Session Duration Setting for a Role</a> in the
            <em>IAM User Guide</em>.</p>
               <p>By default, the value is set to <code class="code">3600</code> seconds. </p>
               <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>The <code class="code">DurationSeconds</code> parameter is separate from the duration of a console
            session that you might request using the returned credentials. The request to the
            federation endpoint for a console sign-in token takes a <code class="code">SessionDuration</code>
            parameter that specifies the maximum length of the console session. For more
            information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_providers_enable-console-custom-url.html">Creating a URL
               that Enables Federated Users to Access the AWS Management Console</a> in the
               <em>IAM User Guide</em>.</p></div></div>
               <p>Type: Integer</p>
               <p>Valid Range: Minimum value of 900. Maximum value of 43200.</p>
               <p>Required: No</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  ExternalId
               </b>
            </span></dt>
            <dd>
               <p>A unique identifier that might be required when you assume a role in another account. If
         the administrator of the account to which the role belongs provided you with an external
         ID, then provide that value in the <code class="code">ExternalId</code> parameter. This value can be any
         string, such as a passphrase or account number. A cross-account role is usually set up to
         trust everyone in an account. Therefore, the administrator of the trusting account might
         send an external ID to the administrator of the trusted account. That way, only someone
         with the ID can assume the role, rather than everyone in the account. For more information
         about the external ID, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-user_externalid.html">How to Use an External ID
            When Granting Access to Your AWS Resources to a Third Party</a> in the
            <em>IAM User Guide</em>.</p>
               <p>The regex used to validate this parameter is a string of 
    characters consisting of upper- and lower-case alphanumeric characters with no spaces. 
    You can also include underscores or any of the following characters: =,.@:/-</p>
               <p>Type: String</p>
               <p>Length Constraints: Minimum length of 2. Maximum length of 1224.</p>
               <p>Pattern: <code class="code">[\w+=,.@:\/-]*</code>
               </p>
               <p>Required: No</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  Policy
               </b>
            </span></dt>
            <dd>
               <p>An IAM policy in JSON format that you want to use as an inline session policy.</p>
               <p>This parameter is optional. Passing policies to this operation returns new 
         temporary credentials. The resulting session's permissions are the intersection of the 
         role's identity-based policy and the session policies. You can use the role's temporary 
         credentials in subsequent AWS API calls to access resources in the account that owns 
         the role. You cannot use session policies to grant more permissions than those allowed 
         by the identity-based policy of the role that is being assumed. For more information, see
            <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html#policies_session">Session
            Policies</a> in the <em>IAM User Guide</em>.</p>
               <p>The plaintext that you use for both inline and managed session policies can't exceed
         2,048 characters. The JSON policy characters can be any ASCII character from the space
         character to the end of the valid character list (\u0020 through \u00FF). It can also
         include the tab (\u0009), linefeed (\u000A), and carriage return (\u000D)
         characters.</p>
               <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>An AWS conversion compresses the passed inline session policy, managed policy ARNs,
            and session tags into a packed binary format that has a separate limit. Your request can
            fail for this limit even if your plaintext meets the other requirements. The
               <code class="code">PackedPolicySize</code> response element indicates by percentage how close the
            policies and tags for your request are to the upper size limit.</p></div></div>
               <p>Type: String</p>
               <p>Length Constraints: Minimum length of 1. Maximum length of 2048.</p>
               <p>Pattern: <code class="code">[\u0009\u000A\u000D\u0020-\u00FF]+</code>
               </p>
               <p>Required: No</p>
            </dd>
          
            <dt><span class="term">
               <b>PolicyArns.member.N</b>
            </span></dt>
            <dd>
               <p>The Amazon Resource Names (ARNs) of the IAM managed policies that you want to use as
         managed session policies. The policies must exist in the same account as the role.</p>
               <p>This parameter is optional. You can provide up to 10 managed policy ARNs. However, the
         plaintext that you use for both inline and managed session policies can't exceed 2,048
         characters. For more information about ARNs, see <a href="https://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html">Amazon Resource Names (ARNs) and AWS
            Service Namespaces</a> in the AWS General Reference.</p>
               <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>An AWS conversion compresses the passed inline session policy, managed policy ARNs,
            and session tags into a packed binary format that has a separate limit. Your request can
            fail for this limit even if your plaintext meets the other requirements. The
               <code class="code">PackedPolicySize</code> response element indicates by percentage how close the
            policies and tags for your request are to the upper size limit.</p></div></div>
               <p>Passing policies to this operation returns new 
         temporary credentials. The resulting session's permissions are the intersection of the 
         role's identity-based policy and the session policies. You can use the role's temporary 
         credentials in subsequent AWS API calls to access resources in the account that owns 
         the role. You cannot use session policies to grant more permissions than those allowed 
         by the identity-based policy of the role that is being assumed. For more information, see
            <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies.html#policies_session">Session
            Policies</a> in the <em>IAM User Guide</em>.</p>
               <p>Type: Array of <a href="./API_PolicyDescriptorType.html">PolicyDescriptorType</a> objects</p>
               <p>Required: No</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  RoleArn
               </b>
            </span></dt>
            <dd>
               <p>The Amazon Resource Name (ARN) of the role to assume.</p>
               <p>Type: String</p>
               <p>Length Constraints: Minimum length of 20. Maximum length of 2048.</p>
               <p>Pattern: <code class="code">[\u0009\u000A\u000D\u0020-\u007E\u0085\u00A0-\uD7FF\uE000-\uFFFD\u10000-\u10FFFF]+</code>
               </p>
               <p>Required: Yes</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  RoleSessionName
               </b>
            </span></dt>
            <dd>
               <p>An identifier for the assumed role session.</p>
               <p>Use the role session name to uniquely identify a session when the same role is assumed
         by different principals or for different reasons. In cross-account scenarios, the role
         session name is visible to, and can be logged by the account that owns the role. The role
         session name is also used in the ARN of the assumed role principal. This means that
         subsequent cross-account API requests that use the temporary security credentials will
         expose the role session name to the external account in their AWS CloudTrail logs.</p>
               <p>The regex used to validate this parameter is a string of characters 
    consisting of upper- and lower-case alphanumeric characters with no spaces. You can 
    also include underscores or any of the following characters: =,.@-</p>
               <p>Type: String</p>
               <p>Length Constraints: Minimum length of 2. Maximum length of 64.</p>
               <p>Pattern: <code class="code">[\w+=,.@-]*</code>
               </p>
               <p>Required: Yes</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  SerialNumber
               </b>
            </span></dt>
            <dd>
               <p>The identification number of the MFA device that is associated with the user who is
         making the <code class="code">AssumeRole</code> call. Specify this value if the trust policy of the role
         being assumed includes a condition that requires MFA authentication. The value is either
         the serial number for a hardware device (such as <code class="code">GAHT12345678</code>) or an Amazon
         Resource Name (ARN) for a virtual device (such as
            <code class="code">arn:aws:iam::123456789012:mfa/user</code>).</p>
               <p>The regex used to validate this parameter is a string of characters 
    consisting of upper- and lower-case alphanumeric characters with no spaces. You can 
    also include underscores or any of the following characters: =,.@-</p>
               <p>Type: String</p>
               <p>Length Constraints: Minimum length of 9. Maximum length of 256.</p>
               <p>Pattern: <code class="code">[\w+=/:,.@-]*</code>
               </p>
               <p>Required: No</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  SourceIdentity
               </b>
            </span></dt>
            <dd>
               <p>The source identity specified by the principal that is calling the
            <code class="code">AssumeRole</code> operation.</p>
               <p>You can require users to specify a source identity when they assume a role. You do this
         by using the <code class="code">sts:SourceIdentity</code> condition key in a role trust policy. You can
         use source identity information in AWS CloudTrail logs to determine who took actions with a role.
         You can use the <code class="code">aws:SourceIdentity</code> condition key to further control access to
         AWS resources based on the value of source identity. For more information about using
         source identity, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_control-access_monitor.html">Monitor and control
            actions taken with assumed roles</a> in the
         <em>IAM User Guide</em>.</p>
               <p>The regex used to validate this parameter is a string of characters consisting of upper-
         and lower-case alphanumeric characters with no spaces. You can also include underscores or
         any of the following characters: =,.@-. You cannot use a value that begins with the text
            <code class="code">aws:</code>. This prefix is reserved for AWS internal use.</p>
               <p>Type: String</p>
               <p>Length Constraints: Minimum length of 2. Maximum length of 64.</p>
               <p>Pattern: <code class="code">[\w+=,.@-]*</code>
               </p>
               <p>Required: No</p>
            </dd>
          
            <dt><span class="term">
               <b>Tags.member.N</b>
            </span></dt>
            <dd>
               <p>A list of session tags that you want to pass. Each session tag consists of a key name
         and an associated value. For more information about session tags, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_session-tags.html">Tagging AWS STS
            Sessions</a> in the <em>IAM User Guide</em>.</p>
               <p>This parameter is optional. You can pass up to 50 session tags. The plaintext session
         tag keys can’t exceed 128 characters, and the values can’t exceed 256 characters. For these
         and additional limits, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_iam-limits.html#reference_iam-limits-entity-length">IAM
            and AWS STS Character Limits</a> in the <em>IAM User Guide</em>.</p>
               <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>An AWS conversion compresses the passed inline session policy, managed policy ARNs,
            and session tags into a packed binary format that has a separate limit. Your request can
            fail for this limit even if your plaintext meets the other requirements. The
               <code class="code">PackedPolicySize</code> response element indicates by percentage how close the
            policies and tags for your request are to the upper size limit.</p></div></div>
               <p>You can pass a session tag with the same key as a tag that is already attached to the
         role. When you do, session tags override a role tag with the same key. </p>
               <p>Tag key–value pairs are not case sensitive, but case is preserved. This means that you
         cannot have separate <code class="code">Department</code> and <code class="code">department</code> tag keys. Assume
         that the role has the <code class="code">Department</code>=<code class="code">Marketing</code> tag and you pass the
            <code class="code">department</code>=<code class="code">engineering</code> session tag. <code class="code">Department</code>
         and <code class="code">department</code> are not saved as separate tags, and the session tag passed in
         the request takes precedence over the role tag.</p>
               <p>Additionally, if you used temporary credentials to perform this operation, the new
         session inherits any transitive session tags from the calling session. If you pass a
         session tag with the same key as an inherited tag, the operation fails. To view the
         inherited tags for a session, see the AWS CloudTrail logs. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_session-tags.html#id_session-tags_ctlogs">Viewing Session Tags in CloudTrail</a> in the
         <em>IAM User Guide</em>.</p>
               <p>Type: Array of <a href="./API_Tag.html">Tag</a> objects</p>
               <p>Array Members: Maximum number of 50 items.</p>
               <p>Required: No</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  TokenCode
               </b>
            </span></dt>
            <dd>
               <p>The value provided by the MFA device, if the trust policy of the role being assumed
         requires MFA. (In other words, if the policy includes a condition that tests for MFA). If
         the role being assumed requires MFA and if the <code class="code">TokenCode</code> value is missing or
         expired, the <code class="code">AssumeRole</code> call returns an "access denied" error.</p>
               <p>The format for this parameter, as described by its regex pattern, is a sequence of six
         numeric digits.</p>
               <p>Type: String</p>
               <p>Length Constraints: Fixed length of 6.</p>
               <p>Pattern: <code class="code">[\d]*</code>
               </p>
               <p>Required: No</p>
            </dd>
          
            <dt><span class="term">
               <b>TransitiveTagKeys.member.N</b>
            </span></dt>
            <dd>
               <p>A list of keys for session tags that you want to set as transitive. If you set a tag key
         as transitive, the corresponding key and value passes to subsequent sessions in a role
         chain. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_session-tags.html#id_session-tags_role-chaining">Chaining Roles
            with Session Tags</a> in the <em>IAM User Guide</em>.</p>
               <p>This parameter is optional. When you set session tags as transitive, the session policy
         and session tags packed binary limit is not affected.</p>
               <p>If you choose not to specify a transitive tag key, then no tags are passed from this
         session to any subsequent sessions.</p>
               <p>Type: Array of strings</p>
               <p>Array Members: Maximum number of 50 items.</p>
               <p>Length Constraints: Minimum length of 1. Maximum length of 128.</p>
               <p>Pattern: <code class="code">[\p<span>{</span>L}\p<span>{</span>Z}\p<span>{</span>N}_.:/=+\-@]+</code>
               </p>
               <p>Required: No</p>
            </dd>
         </dl></div>
    
      <h2 id="API_AssumeRole_ResponseElements">Response Elements</h2>
      <p>The following elements are returned by the service.</p>
      <div class="variablelist">
          
          
          
          
      <dl>
            <dt><span class="term">
               <b>
                  AssumedRoleUser
               </b>
            </span></dt>
            <dd>
               <p>The Amazon Resource Name (ARN) and the assumed role ID, which are identifiers that you
         can use to refer to the resulting temporary security credentials. For example, you can
         reference these credentials as a principal in a resource-based policy by using the ARN or
         assumed role ID. The ARN and ID include the <code class="code">RoleSessionName</code> that you specified
         when you called <code class="code">AssumeRole</code>. </p>
               <p>Type: <a href="./API_AssumedRoleUser.html">AssumedRoleUser</a> object</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  Credentials
               </b>
            </span></dt>
            <dd>
               <p>The temporary security credentials, which include an access key ID, a secret access key,
         and a security (or session) token.</p>
               <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>The size of the security token that AWS STS API operations return is not fixed. We
        strongly recommend that you make no assumptions about the maximum size.</p></div></div>
               <p>Type: <a href="./API_Credentials.html">Credentials</a> object</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  PackedPolicySize
               </b>
            </span></dt>
            <dd>
               <p>A percentage value that indicates the packed size of the session policies and session 
      tags combined passed in the request. The request fails if the packed size is greater than 100 percent, 
      which means the policies and tags exceeded the allowed space.</p>
               <p>Type: Integer</p>
               <p>Valid Range: Minimum value of 0.</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  SourceIdentity
               </b>
            </span></dt>
            <dd>
               <p>The source identity specified by the principal that is calling the
            <code class="code">AssumeRole</code> operation.</p>
               <p>You can require users to specify a source identity when they assume a role. You do this
         by using the <code class="code">sts:SourceIdentity</code> condition key in a role trust policy. You can
         use source identity information in AWS CloudTrail logs to determine who took actions with a role.
         You can use the <code class="code">aws:SourceIdentity</code> condition key to further control access to
         AWS resources based on the value of source identity. For more information about using
         source identity, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_control-access_monitor.html">Monitor and control
            actions taken with assumed roles</a> in the
         <em>IAM User Guide</em>.</p>
               <p>The regex used to validate this parameter is a string of characters consisting of upper-
         and lower-case alphanumeric characters with no spaces. You can also include underscores or
         any of the following characters: =,.@-</p>
               <p>Type: String</p>
               <p>Length Constraints: Minimum length of 2. Maximum length of 64.</p>
               <p>Pattern: <code class="code">[\w+=,.@-]*</code>
               </p>
            </dd>
         </dl></div>
    
      <h2 id="API_AssumeRole_Errors">Errors</h2>
      <p>For information about the errors that are common to all actions, see <a href="./CommonErrors.html">Common Errors</a>.</p>
      <div class="variablelist">
          
          
          
          
      <dl>
            <dt><span class="term">
               <b>
                  ExpiredToken
               </b>
            </span></dt>
            <dd>
               <p>The web identity token that was passed is expired or is not valid. Get a new identity
            token from the identity provider and then retry the request.</p>
               <p>HTTP Status Code: 400</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  MalformedPolicyDocument
               </b>
            </span></dt>
            <dd>
               <p>The request was rejected because the policy document was malformed. The error message
            describes the specific error.</p>
               <p>HTTP Status Code: 400</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  PackedPolicyTooLarge
               </b>
            </span></dt>
            <dd>
               <p>The request was rejected because the total packed size of the session policies and
            session tags combined was too large. An AWS conversion compresses the session policy
            document, session policy ARNs, and session tags into a packed binary format that has a
            separate limit. The error message indicates by percentage how close the policies and
            tags are to the upper size limit. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_session-tags.html">Passing Session Tags in AWS STS</a> in
            the <em>IAM User Guide</em>.</p>
               <p>You could receive this error even though you meet other defined session policy and
            session tag limits. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_iam-quotas.html#reference_iam-limits-entity-length">IAM and AWS STS Entity
                Character Limits</a> in the <em>IAM User Guide</em>.</p>
               <p>HTTP Status Code: 400</p>
            </dd>
          
            <dt><span class="term">
               <b>
                  RegionDisabled
               </b>
            </span></dt>
            <dd>
               <p>
                  AWS STS is not activated in the requested region for the account that is being asked to
            generate credentials. The account administrator must use the IAM console to activate AWS STS
            in that region. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp_enable-regions.html">Activating and
                Deactivating AWSAWS STS in an AWS Region</a> in the <em>IAM User
                    Guide</em>.</p>
               <p>HTTP Status Code: 403</p>
            </dd>
         </dl></div>
    
      <h2 id="API_AssumeRole_Examples">Examples</h2>
       
         <h3 id="API_AssumeRole_Example_1">Example</h3>
         <p>This example illustrates one usage of AssumeRole.</p>
          
            <h4 id="API_AssumeRole_Example_1_Request">Sample Request</h4>
            <pre class="programlisting"><div class="code-btn-container"></div><code class="">https://sts.amazonaws.com/
?Version=2011-06-15
&amp;Action=AssumeRole
&amp;RoleSessionName=testAR
&amp;RoleArn=arn:aws:iam::123456789012:role/demo
&amp;PolicyArns.member.1.arn=arn:aws:iam::123456789012:policy/demopolicy1
&amp;PolicyArns.member.2.arn=arn:aws:iam::123456789012:policy/demopolicy2
&amp;Policy=<span>{</span>"Version":"2012-10-17","Statement":[<span>{</span>"Sid":"Stmt1",
"Effect":"Allow","Action":"s3:*","Resource":"*"}]}
&amp;DurationSeconds=3600
&amp;Tags.member.1.Key=Project
&amp;Tags.member.1.Value=Pegasus
&amp;Tags.member.2.Key=Team
&amp;Tags.member.2.Value=Engineering
&amp;Tags.member.3.Key=Cost-Center
&amp;Tags.member.3.Value=12345
&amp;TransitiveTagKeys.member.1=Project
&amp;TransitiveTagKeys.member.2=Cost-Center
&amp;ExternalId=123ABC
&amp;SourceIdentity=Alice
&amp;AUTHPARAMS</code></pre>
          
          
            <h4 id="API_AssumeRole_Example_1_Response">Sample Response</h4>
            <pre class="programlisting"><div class="code-btn-container"></div><code class="">&lt;AssumeRoleResponse xmlns="https://sts.amazonaws.com/doc/2011-06-15/"&gt;
  &lt;AssumeRoleResult&gt;
  &lt;SourceIdentity&gt;Alice&lt;/SourceIdentity&gt;
    &lt;AssumedRoleUser&gt;
      &lt;Arn&gt;arn:aws:sts::123456789012:assumed-role/demo/TestAR&lt;/Arn&gt;
      &lt;AssumedRoleId&gt;ARO123EXAMPLE123:TestAR&lt;/AssumedRoleId&gt;
    &lt;/AssumedRoleUser&gt;
    &lt;Credentials&gt;
      &lt;AccessKeyId&gt;ASIAIOSFODNN7EXAMPLE&lt;/AccessKeyId&gt;
      &lt;SecretAccessKey&gt;wJalrXUtnFEMI/K7MDENG/bPxRfiCYzEXAMPLEKEY&lt;/SecretAccessKey&gt;
      &lt;SessionToken&gt;
       AQoDYXdzEPT//////////wEXAMPLEtc764bNrC9SAPBSM22wDOk4x4HIZ8j4FZTwdQW
       LWsKWHGBuFqwAeMicRXmxfpSPfIeoIYRqTflfKD8YUuwthAx7mSEI/qkPpKPi/kMcGd
       QrmGdeehM4IC1NtBmUpp2wUE8phUZampKsburEDy0KPkyQDYwT7WZ0wq5VSXDvp75YU
       9HFvlRd8Tx6q6fE8YQcHNVXAkiY9q6d+xo0rKwT38xVqr7ZD0u0iPPkUL64lIZbqBAz
       +scqKmlzm8FDrypNC9Yjc8fPOLn9FX9KSYvKTr4rvx3iSIlTJabIQwj2ICCR/oLxBA==
      &lt;/SessionToken&gt;
      &lt;Expiration&gt;2019-11-09T13:34:41Z&lt;/Expiration&gt;
    &lt;/Credentials&gt;
    &lt;PackedPolicySize&gt;6&lt;/PackedPolicySize&gt;
  &lt;/AssumeRoleResult&gt;
  &lt;ResponseMetadata&gt;
    &lt;RequestId&gt;c6104cbe-af31-11e0-8154-cbc7ccf896c7&lt;/RequestId&gt;
  &lt;/ResponseMetadata&gt;
&lt;/AssumeRoleResponse&gt;</code></pre>
          
       
    
      <h2 id="API_AssumeRole_SeeAlso">See Also</h2>
      <p>For more information about using this API in one of the language-specific AWS SDKs, see the following:</p>
      <div class="itemizedlist">
          
          
          
          
          
          
          
          
          
      <ul class="itemizedlist"><li class="listitem">
            <p>
               <a href="https://docs.aws.amazon.com/goto/aws-cli/sts-2011-06-15/AssumeRole">AWS Command Line Interface</a>
            </p>
         </li><li class="listitem">
            <p>
               <a href="https://docs.aws.amazon.com/goto/DotNetSDKV3/sts-2011-06-15/AssumeRole">AWS SDK for .NET</a>
            </p>
         </li><li class="listitem">
            <p>
               <a href="https://docs.aws.amazon.com/goto/SdkForCpp/sts-2011-06-15/AssumeRole">AWS SDK for C++</a>
            </p>
         </li><li class="listitem">
            <p>
               <a href="https://docs.aws.amazon.com/goto/SdkForGoV1/sts-2011-06-15/AssumeRole">AWS SDK for Go</a>
            </p>
         </li><li class="listitem">
            <p>
               <a href="https://docs.aws.amazon.com/goto/SdkForJavaV2/sts-2011-06-15/AssumeRole">AWS SDK for Java V2</a>
            </p>
         </li><li class="listitem">
            <p>
               <a href="https://docs.aws.amazon.com/goto/AWSJavaScriptSDK/sts-2011-06-15/AssumeRole">AWS SDK for JavaScript</a>
            </p>
         </li><li class="listitem">
            <p>
               <a href="https://docs.aws.amazon.com/goto/SdkForPHPV3/sts-2011-06-15/AssumeRole">AWS SDK for PHP V3</a>
            </p>
         </li><li class="listitem">
            <p>
               <a href="https://docs.aws.amazon.com/goto/boto3/sts-2011-06-15/AssumeRole">AWS SDK for Python</a>
            </p>
         </li><li class="listitem">
            <p>
               <a href="https://docs.aws.amazon.com/goto/SdkForRubyV3/sts-2011-06-15/AssumeRole">AWS SDK for Ruby V3</a>
            </p>
         </li></ul></div>
   <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./API_Operations.html">Actions</div><div id="next" class="next-link" accesskey="n" href="./API_AssumeRoleWithSAML.html">AssumeRoleWithSAML</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/en_us/STS/latest/APIReference/API_AssumeRole.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/en_us/STS/latest/APIReference/API_AssumeRole.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>