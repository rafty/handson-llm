<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Choosing a network type - Amazon ElastiCache for Redis</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="network-type" /><meta name="default_state" content="network-type" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/AmazonElastiCache/latest/red-ug/network-type.html" /><meta name="description" content="Choose a network type." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon ElastiCache for Redis" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Amazon ElastiCache is a web service that makes it easy to set up, manage, and scale a distributed in-memory data store or cache in the cloud." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/AmazonElastiCache/latest/red-ug/network-type.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AmazonElastiCache/latest/red-ug/network-type.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/AmazonElastiCache/latest/red-ug/network-type.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AmazonElastiCache/latest/red-ug/network-type.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/AmazonElastiCache/latest/red-ug/network-type.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/AmazonElastiCache/latest/red-ug/network-type.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/AmazonElastiCache/latest/red-ug/network-type.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AmazonElastiCache/latest/red-ug/network-type.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/AmazonElastiCache/latest/red-ug/network-type.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AmazonElastiCache/latest/red-ug/network-type.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/AmazonElastiCache/latest/red-ug/network-type.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AmazonElastiCache/latest/red-ug/network-type.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/AmazonElastiCache/latest/red-ug/network-type.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AmazonElastiCache/latest/red-ug/network-type.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/AmazonElastiCache/latest/red-ug/network-type.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AmazonElastiCache/latest/red-ug/network-type.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/AmazonElastiCache/latest/red-ug/network-type.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AmazonElastiCache/latest/red-ug/network-type.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/AmazonElastiCache/latest/red-ug/network-type.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/AmazonElastiCache/latest/red-ug/network-type.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/AmazonElastiCache/latest/red-ug/network-type.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/AmazonElastiCache/latest/red-ug/network-type.html" hreflang="x-default" /><meta name="feedback-item" content="ElastiCache" /><meta name="this_doc_product" content="Amazon ElastiCache for Redis" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'elasticache'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="Choosing a network type" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Choosing a network type - Amazon ElastiCache for Redis</title><meta name="pdf" content="/pdfs/AmazonElastiCache/latest/red-ug/redis-ug.pdf#network-type" /><meta name="github" content="https://github.com/awsdocs/amazon-elasticache-docs/tree/master/doc_source/redis/network-type.md" /><meta name="rss" content="amazon-elcr-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=127" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=ElastiCache&amp;topic_url=http://docs.aws.amazon.com/en_us/AmazonElastiCache/latest/red-ug/network-type.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/AmazonElastiCache/latest/red-ug/network-type.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/AmazonElastiCache/latest/red-ug/network-type.html" /><meta name="keywords" content="ElastiCache,Amazon ElastiCache,cache,cluster,cache cluster,Redis,replication,replication group" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon ElastiCache",
        "item" : "https://docs.aws.amazon.com/elasticache/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/AmazonElastiCache/latest/red-ug"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Managing clusters",
        "item" : "https://docs.aws.amazon.com/AmazonElastiCache/latest/red-ug/Clusters.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Choosing a network type",
        "item" : "https://docs.aws.amazon.com/AmazonElastiCache/latest/red-ug/Clusters.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/AmazonElastiCache/latest/red-ug/redis-ug.pdf#network-type" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a href="https://github.com/awsdocs/amazon-elasticache-docs/tree/master/doc_source/redis/network-type.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/elasticache/index.html">Amazon ElastiCache</a><a href="WhatIs.html">User Guide</a></div><div id="page-toc-src"><a href="#network-type-subnets">Configuring subnets for network type</a><a href="#network-type-dual-stack">Using dual-stack </a><a href="#configuring-tls-enabled-dual-stack">TLS enabled dual stack ElastiCache clusters</a><a href="#network-type-console">Using the AWS Management Console</a><a href="#network-type-cli">Using the CLI </a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="network-type">Choosing a network type</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>ElastiCache supports the Internet Protocol versions 4 and 6 (IPv4 and IPv6), allowing you to configure your cluster to accept:</p><div class="itemizedlist">
        
        
        
   <ul class="itemizedlist"><li class="listitem"><p>only IPv4 connections,</p></li><li class="listitem"><p>only IPv6 connections,</p></li><li class="listitem"><p>both IPv4 and IPv6 connections (dual-stack)</p></li></ul></div><p>IPv6 is supported for workloads using Redis engine version 6.2 onward on all instances built on the <a href="https://aws.amazon.com/ec2/nitro/" rel="noopener noreferrer" target="_blank"><span>Nitro system</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>. There are no additional charges for accessing ElastiCache over IPv6. </p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Migration of clusters created prior to the availability of IPV6 / dual-stack is not supported. Switching between network types on newly created clusters is also not supported.</p></div></div>
        <h2 id="network-type-subnets">Configuring subnets for network type</h2>
        <p>If you create a cluster in an Amazon VPC, you must specify a subnet group. ElastiCache uses that subnet group to choose a subnet 
            and IP addresses within that subnet to associate with your nodes. ElastiCache clusters require a 
            dual-stack subnet with both IPv4 and IPv6 addresses assigned to them to operate in dual-stack mode and an IPv6-only subnet to operate as IPv6-only.</p>
     
            <h2 id="network-type-dual-stack">Using dual-stack </h2>
            
            <p>When using ElastiCache for Redis in cluster mode enabled, from an application's perspective, connecting to all the cluster nodes through the configuration endpoint is no different than connecting directly to an individual cache node. To achieve this, a 
                cluster-aware client must engage in a cluster discovery process and request the configuration information for all nodes. 
                Redis' discovery protocol supports only one IP per node. </p>
         
            
            
            <p>To maintain backwards compatibility with all existing clients, 
                IP discovery is introduced, which allows you to select the IP type (i.e., IPv4 or IPv6) to advertise in the discovery protocol. 
                While this limits auto discovery to only one IP type, dual-stack is still beneficial for cluster mode enabled workloads, as it enables migrations 
                (or rollbacks) from an IPv4 to an IPv6 Discovery IP type with no downtime.</p>
        
        
     
        <h2 id="configuring-tls-enabled-dual-stack">TLS enabled dual stack ElastiCache clusters</h2>           
        
        <p>When TLS is enabled for ElastiCache clusters the cluster discovery functions <span>(<code class="code">cluster slots</code>, 
            <code class="code">cluster shards</code>, and <code class="code">cluster nodes</code>)</span>  return
            hostnames instead of IPs. The hostnames are then used instead of IPs to connect to the ElastiCache cluster and perform a TLS handshake. 
            This means that clients won’t be affected by the IP Discovery parameter. <em>For TLS enabled clusters the IP Discovery parameter has no effect 
            on the preferred IP protocol.</em> Instead, the IP protocol used will be determined by which IP protocol
            the client prefers when resolving DNS hostnames.</p>
        <p>For examples on how to configure an IP protocol preference when resolving DNS hostnames, see <a href="./network-type-best-practices.html#network-type-configuring-tls-enabled-dual-stack">TLS enabled dual stack ElastiCache clusters</a>.</p>
     
        <h2 id="network-type-console">Using the AWS Management Console</h2>
        <p>When creating a cluster using the AWS Management Console, under <b>Connectivity</b>, choose a network type, either <b>IPv4</b>, <b>IPv6</b> or <b>Dual stack</b>. If you are creating 
            a Redis (cluster mode enabled) cluster and 
            choose dual stack, you then must select a <b>Discovery IP type</b>, either IPv6 or IPv4.</p> 
        <p>For more information, see <a href="./Clusters.Create.html#Clusters.Create.CON.RedisCluster">Creating a Redis (cluster mode enabled) cluster (Console)</a> or 
            <a href="./Clusters.Create.html#Clusters.Create.CON.Redis">Creating a Redis (cluster mode disabled) (Console)</a>.</p>
        
        <p>When creating a replication group using the AWS Management Console, choose a network type, either <b>IPv4</b>, <b>IPv6</b> or <b>Dual stack</b>. 
         If you choose dual stack, you then must select a <b>Discovery IP type</b>, either IPv6 or IPv4.</p> 
        <p>For more information, see <a href="./Replication.CreatingReplGroup.NoExistingCluster.Classic.html">Creating a Redis (Cluster Mode Disabled) replication group from scratch</a> or 
            <a href="./Replication.CreatingReplGroup.NoExistingCluster.Cluster.html">Creating a replication group in Redis (Cluster Mode Enabled) from scratch</a>.</p>
    
     
        <h2 id="network-type-cli">Using the CLI </h2>
        
        
   
        

 
        
        <p>When creating a cache cluster using the CLI, you use the <a href="https://docs.aws.amazon.com/cli/latest/reference/elasticache/create-cache-cluster.html">create-cache-cluster</a> command and specify the <code class="code">NetworkType</code> and <code class="code">IPDiscovery</code> parameters:</p>
        <p>For Linux, macOS, or Unix:</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">aws elasticache create-cache-cluster \
    --cache-cluster-id "cluster-test" \
    --engine redis \
    --cache-node-type cache.m5.large \
    --num-cache-nodes 1 \
    --network-type dual_stack \
    --ip-discovery ipv4 
  </code></pre>
        
        <p>For Windows:</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">aws elasticache create-cache-cluster ^
    --cache-cluster-id "cluster-test" ^
    --engine redis ^
    --cache-node-type cache.m5.large ^
    --num-cache-nodes 1 ^
    --network-type dual_stack ^
    --ip-discovery ipv4 
  </code></pre>      
        
        <p>When creating a replication group with cluster mode disabled using the CLI, you use the <a href="https://docs.aws.amazon.com/cli/latest/reference/elasticache/create-replication-group.html">create-replication-group</a> command and specify the <code class="code">NetworkType</code> and <code class="code">IPDiscovery</code> parameters:</p>
        <p>For Linux, macOS, or Unix:</p>  
      
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">aws elasticache create-replication-group \
   --replication-group-id sample-repl-group \
   --replication-group-description "demo cluster with replicas" \
   --num-cache-clusters 3 \
   --primary-cluster-id redis01 \
   --network-type dual_stack \
   --ip-discovery ipv4 
  </code></pre>
        
        <p>For Windows:</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">aws elasticache create-replication-group ^
   --replication-group-id sample-repl-group ^
   --replication-group-description "demo cluster with replicas" ^
   --num-cache-clusters 3 ^
   --primary-cluster-id redis01 ^
   --network-type dual_stack ^
   --ip-discovery ipv4 </code></pre>         
        
        <p>When creating a replication group with cluster mode enabled and use IPv4 for IP discovery using the CLI, you use the <a href="https://docs.aws.amazon.com/cli/latest/reference/elasticache/create-replication-group.html">create-replication-group</a> command and specify the <code class="code">NetworkType</code> and <code class="code">IPDiscovery</code> parameters:</p>
        <p>For Linux, macOS, or Unix:</p>  
        
  <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">aws elasticache create-replication-group \
  --replication-group-id demo-cluster \
  --replication-group-description "demo cluster" \
  --cache-node-type cache.m5.large \
  --num-node-groups 2 \
  --engine redis \
  --cache-subnet-group-name xyz \
  --network-type dual_stack \
  --ip-discovery ipv4 \
  --region us-east-1 </code></pre>
        
        <p>For Windows:</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">aws elasticache create-replication-group ^
  --replication-group-id demo-cluster ^
  --replication-group-description "demo cluster" ^
  --cache-node-type cache.m5.large ^
  --num-node-groups 2 ^
  --engine redis ^
  --cache-subnet-group-name xyz ^
  --network-type dual_stack ^
  --ip-discovery ipv4 ^
  --region us-east-1 </code></pre>         
        
        <p>When creating a replication group with cluster mode enabled and use IPv6 for IP discovery using the CLI, you use the <a href="https://docs.aws.amazon.com/cli/latest/reference/elasticache/create-replication-group.html">create-replication-group</a> command and specify the <code class="code">NetworkType</code> and <code class="code">IPDiscovery</code> parameters:</p>
        <p>For Linux, macOS, or Unix:</p>  
        
<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">aws elasticache create-replication-group \
  --replication-group-id demo-cluster \
  --replication-group-description "demo cluster" \
  --cache-node-type cache.m5.large \
  --num-node-groups 2 \
  --engine redis \
  --cache-subnet-group-name xyz \
  --network-type dual_stack \
  --ip-discovery ipv6 \
  --region us-east-1 </code></pre>
        
        <p>For Windows:</p>
<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">aws elasticache create-replication-group ^
  --replication-group-id demo-cluster ^
  --replication-group-description "demo cluster" ^
  --cache-node-type cache.m5.large ^
  --num-node-groups 2 ^
  --engine redis ^
  --cache-subnet-group-name xyz ^
  --network-type dual_stack ^
  --ip-discovery ipv6 ^
  --region us-east-1 </code></pre>         
        
    
        
        
        
        
        
        
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./Clusters.html">Managing clusters</div><div id="next" class="next-link" accesskey="n" href="./data-tiering.html">Data tiering</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=ElastiCache&amp;topic_url=https://docs.aws.amazon.com/en_us/AmazonElastiCache/latest/red-ug/network-type.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=ElastiCache&amp;topic_url=https://docs.aws.amazon.com/en_us/AmazonElastiCache/latest/red-ug/network-type.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>