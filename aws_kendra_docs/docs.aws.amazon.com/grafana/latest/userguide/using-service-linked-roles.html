<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Using service-linked roles for Amazon Managed Grafana - Amazon Managed Grafana</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="using-service-linked-roles" /><meta name="default_state" content="using-service-linked-roles" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/grafana/latest/userguide/using-service-linked-roles.html" /><meta name="description" content="How to use service-linked roles to give Amazon Managed Grafana access to resources in your AWS account." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Managed Grafana" /><meta name="guide" content="User Guide" /><meta name="abstract" content="Insert abstract text" /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/grafana/latest/userguide/using-service-linked-roles.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/grafana/latest/userguide/using-service-linked-roles.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/grafana/latest/userguide/using-service-linked-roles.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/grafana/latest/userguide/using-service-linked-roles.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/grafana/latest/userguide/using-service-linked-roles.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/grafana/latest/userguide/using-service-linked-roles.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/grafana/latest/userguide/using-service-linked-roles.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/grafana/latest/userguide/using-service-linked-roles.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/grafana/latest/userguide/using-service-linked-roles.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/grafana/latest/userguide/using-service-linked-roles.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/grafana/latest/userguide/using-service-linked-roles.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/grafana/latest/userguide/using-service-linked-roles.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/grafana/latest/userguide/using-service-linked-roles.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/grafana/latest/userguide/using-service-linked-roles.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/grafana/latest/userguide/using-service-linked-roles.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/grafana/latest/userguide/using-service-linked-roles.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/grafana/latest/userguide/using-service-linked-roles.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/grafana/latest/userguide/using-service-linked-roles.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/grafana/latest/userguide/using-service-linked-roles.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/grafana/latest/userguide/using-service-linked-roles.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/grafana/latest/userguide/using-service-linked-roles.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/grafana/latest/userguide/using-service-linked-roles.html" hreflang="x-default" /><meta name="feedback-item" content="Grafana" /><meta name="this_doc_product" content="Amazon Managed Grafana" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'grafana'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="Using service-linked roles for Amazon Managed Grafana" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Using service-linked roles for Amazon Managed Grafana - Amazon Managed Grafana</title><meta name="pdf" content="/pdfs/grafana/latest/userguide/service-guide.pdf.pdf#using-service-linked-roles" /><meta name="rss" content="amazon-managed-grafana-release-notes.rss" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Grafana&amp;topic_url=http://docs.aws.amazon.com/en_us/grafana/latest/userguide/using-service-linked-roles.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/grafana/latest/userguide/using-service-linked-roles.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/grafana/latest/userguide/using-service-linked-roles.html" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Managed Grafana",
        "item" : "https://docs.aws.amazon.com/grafana/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/grafana/latest/userguide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Security in Amazon Managed Grafana",
        "item" : "https://docs.aws.amazon.com/grafana/latest/userguide/security.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Identity and Access Management for Amazon Managed Grafana",
        "item" : "https://docs.aws.amazon.com/grafana/latest/userguide/security-iam.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Using service-linked roles for Amazon Managed Grafana",
        "item" : "https://docs.aws.amazon.com/grafana/latest/userguide/security-iam.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/grafana/latest/userguide/service-guide.pdf.pdf#using-service-linked-roles" target="_blank" rel="noopener noreferrer" title="Open PDF"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/grafana/index.html">Amazon Managed Grafana</a><a href="what-is-Amazon-Managed-Service-Grafana.html">User Guide</a></div><div id="page-toc-src"><a href="#slr-permissions">Service-linked role permissions for
                Amazon Managed Grafana</a><a href="#create-slr">Creating a service-linked role for Amazon Managed Grafana</a><a href="#edit-slr">Editing a service-linked role for Amazon Managed Grafana</a><a href="#delete-slr">Deleting a service-linked role for Amazon Managed Grafana</a><a href="#slr-regions">Supported regions for Amazon Managed Grafana service-linked
                roles</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="using-service-linked-roles">Using service-linked roles for
            Amazon Managed Grafana</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Amazon Managed Grafana uses AWS Identity and Access Management (IAM) <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-linked-role">service-linked roles</a>. A service-linked role is a unique type of IAM role that
        is linked directly to Amazon Managed Grafana. Service-linked roles are predefined by Amazon Managed Grafana
        and include all the permissions that the service requires to call other AWS services on
        your behalf. </p><p>A service-linked role makes setting up Amazon Managed Grafana easier because you don’t have to
        manually add the necessary permissions. Amazon Managed Grafana defines the permissions of its
        service-linked roles, and unless defined otherwise, only Amazon Managed Grafana can assume its roles.
        The defined permissions include the trust policy and the permissions policy, and that
        permissions policy cannot be attached to any other IAM entity.</p><p>You can delete a service-linked role only after first deleting their related resources.
        This protects your Amazon Managed Grafana resources because you can't inadvertently remove permission
        to access the resources.</p><p>For information about other services that support service-linked roles, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_aws-services-that-work-with-iam.html">AWS Services
            That Work with IAM</a> and look for the services that have <b>Yes
        </b>in the <b>Service-linked roles</b> column. Choose a
            <b>Yes</b> with a link to view the service-linked role
        documentation for that service.</p>
        <h2 id="slr-permissions">Service-linked role permissions for
                Amazon Managed Grafana</h2>
        <p>Amazon Managed Grafana uses the service-linked role named <b>AmazonManagedGrafana</b>
            – Amazon Managed Grafana uses this role to create and configure resources, such as ENIs or Secrets Manager secrets, within customer accounts. The AmazonManagedGrafana service-linked role trusts the following 
            services to assume the role:</p>
        <div class="itemizedlist">
             
        <ul class="itemizedlist"><li class="listitem">
                <p><code class="code">Grafana</code></p>
            </li></ul></div>
        <p>The AmazonManagedGrafana service-linked role is attached to the <code class="code">AmazonGrafanaServiceLinkedRolePolicy</code>
            policy. For updates to this policy, see <a href="./security-iam-awsmanpol.html#iam-awsmanpol-updates">Amazon Managed Grafana updates to AWS managed
                policies</a>.</p>
        <p>The role permissions policy allows Amazon Managed Grafana to complete the following actions 
            on the specified resources.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "ec2:DescribeNetworkInterfaces",
                "ec2:DescribeVpcs",
                "ec2:DescribeDhcpOptions",
                "ec2:DescribeSubnets",
                "ec2:DescribeSecurityGroups"
            ],
            "Resource": "*"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": "ec2:CreateNetworkInterface",
            "Resource": "*",
            "Condition": <span>{</span>
                "ForAllValues:StringEquals": <span>{</span>
                    "aws:TagKeys": [
                        "AmazonGrafanaManaged"
                    ]
                }
            }
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": "ec2:CreateTags",
            "Resource": "arn:aws:ec2:*:*:network-interface/*",
                "Condition": <span>{</span>
                    "StringEquals": <span>{</span>
                    "ec2:CreateAction": "CreateNetworkInterface"
                },
                "Null": <span>{</span>
                    "aws:RequestTag/AmazonGrafanaManaged": "false"
                }
            }
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": "ec2:DeleteNetworkInterface",
            "Resource": "*",
            "Condition": <span>{</span>
                "Null": <span>{</span>
                    "ec2:ResourceTag/AmazonGrafanaManaged": "false"
                }
            }
        }
    ]
} </code></pre>
        <p>You must configure permissions to allow an IAM entity (such as a user, group, or
            role) to create, edit, or delete a service-linked role. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/using-service-linked-roles.html#service-linked-role-permissions">Service-linked role permissions</a> in the
                <em>IAM User Guide</em>.</p>
     
        <h2 id="create-slr">Creating a service-linked role for Amazon Managed Grafana</h2>
        
        <p>You don't need to manually create a service-linked role. When you
            call CreateWorkspace with a VpcConfiguration in the AWS Management Console, the AWS CLI, or the AWS API, Amazon Managed Grafana
            creates the service-linked role for you. </p>
        
        <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>This service-linked role can appear in your account if you completed an action in
                another service that uses the features supported by this role. Also, if you were
                using the Amazon Managed Grafana service before November 30, 2022, when it began supporting
                service-linked roles, then Amazon Managed Grafana created the AmazonManagedGrafana role in your
                account. To learn more, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/troubleshoot_roles.html#troubleshoot_roles_new-role-appeared">A new role appeared in my IAM account</a>.</p></div></div>
        <p>If you delete this service-linked role, and then need to create it again, you can use
            the same process to recreate the role in your account. When you
            call CreateWorkspace with a VpcConfiguration, Amazon Managed Grafana creates the service-linked role for you again. </p>
        
        <p>You can also use the IAM console to create a service-linked role with the
                <b>Grafana</b> use case. In the AWS CLI or the AWS API,
            create a service-linked role with the <code class="code">Grafana</code> service name.
            For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/using-service-linked-roles.html#create-service-linked-role">Creating a service-linked role</a> in the
            <em>IAM User Guide</em>. If you delete this service-linked role, you can
            use this same process to create the role again.</p>
        
     
        <h2 id="edit-slr">Editing a service-linked role for Amazon Managed Grafana</h2>
        <p>Amazon Managed Grafana does not allow you to edit the AmazonManagedGrafana service-linked role. After you
            create a service-linked role, you cannot change the name of the role because various
            entities might reference the role. However, you can edit the description of the role
            using IAM. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/using-service-linked-roles.html#edit-service-linked-role">Editing a service-linked role</a> in the
            <em>IAM User Guide</em>.</p>
     
        <h2 id="delete-slr">Deleting a service-linked role for Amazon Managed Grafana</h2>
        
        <p>If you no longer need to use a feature or service that requires a service-linked role,
            we recommend that you delete that role. That way you don’t have an unused entity that is
            not actively monitored or maintained. However, you must clean up the resources for your
            service-linked role before you can manually delete it.</p>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>If the Amazon Managed Grafana service is using the role when you try to delete the
                resources, then the deletion might fail. If that happens, wait for a few minutes and
                try the operation again.</p></div></div>
        <div class="procedure"><h6>To delete Amazon Managed Grafana resources used by the AmazonManagedGrafana</h6><ol><li>
                <p>Navigate to the <b>All workspaces</b> view in your
                        <code class="code">Region</code> in the AWS console.</p>
            </li><li>
                <p>Delete all the workspaces in the <code class="code">Region</code>. You have to check the
                    radio button for each workspace and choose the <b>delete</b>
                    button in the upper right side of the <b>All workspaces</b> view.
                    Repeat deleting each workspace until all the workspaces are deleted from the
                        <code class="code">Region</code>. For more information about deleting a workspace in
                    Amazon Managed Grafana, see <a href="https://docs.aws.amazon.com/grafana/latest/userguide/AMG-edit-delete-workspace.html">Deleting a workspace</a> topic in this user guide.</p>
            </li></ol></div>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>Repeat the procedure for each AWS Region where you have workspaces. You must
                delete all workspaces <em>in all Regions</em> before you can delete the
                service-linked role.</p></div></div>
        <p><b>To manually delete the service-linked role using
                IAM</b></p>
        <p>Use the IAM console, the AWS CLI, or the AWS API to delete the AmazonManagedGrafana
            service-linked role. For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/using-service-linked-roles.html#delete-service-linked-role">Deleting a service-linked role</a> in the
            <em>IAM User Guide</em>.</p>
     
        <h2 id="slr-regions">Supported regions for Amazon Managed Grafana service-linked
                roles</h2>
        <p>Amazon Managed Grafana supports using service-linked roles in all of the regions where the
            service is available. For more information, see <a href="https://docs.aws.amazon.com/general/latest/gr/grafana-service.html">AWS regions and endpoints</a>.</p>

    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./cross-service-confused-deputy-prevention.html">Cross-service confused deputy
            prevention</div><div id="next" class="next-link" accesskey="n" href="./AMG-manage-permissions.html">Permissions and policies for other AWS services</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Grafana&amp;topic_url=https://docs.aws.amazon.com/en_us/grafana/latest/userguide/using-service-linked-roles.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Grafana&amp;topic_url=https://docs.aws.amazon.com/en_us/grafana/latest/userguide/using-service-linked-roles.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>