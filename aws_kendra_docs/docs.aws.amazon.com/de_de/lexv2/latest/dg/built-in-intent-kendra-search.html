<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="de-DE"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>AMAZON. KendraSearchIntent - Amazon Lex</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="built-in-intent-kendra-search" /><meta name="default_state" content="built-in-intent-kendra-search" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/de_de/lexv2/latest/dg/built-in-intent-kendra-search.html" /><meta name="description" content="Verwenden Sie den AMAZON.KendraSearchIntent Intent, um nach Dokumenten zu suchen, die Sie mit Amazon Kendra indexiert haben. Wenn Amazon Lex V2 die nächste Aktion in einer Konversation mit dem Benutzer nicht ermitteln kann, löst es die Suchabsicht aus." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Lex" /><meta name="guide" content="V2-Entwicklerhandbuch" /><meta name="abstract" content="Bietet einen konzeptionellen Überblick über Amazon Lex V2. Enthält detaillierte Anweisungen zur Verwendung verschiedener Funktionen, z. B. zum Streamen von Konversationen, und bietet eine vollständige Referenz für die V2-APIs." /><meta name="guide-locale" content="de_de" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/de_de/lexv2/latest/dg/built-in-intent-kendra-search.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/lexv2/latest/dg/built-in-intent-kendra-search.html" hreflang="x-default" /><meta name="feedback-item" content="Lex" /><meta name="this_doc_product" content="Amazon Lex" /><meta name="this_doc_guide" content="V2-Entwicklerhandbuch" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'lex'}"></script><meta id="panorama-serviceSubSection" value="V2-Entwicklerhandbuch" /><meta id="panorama-serviceConsolePage" value="AMAZON. KendraSearchIntent" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>AMAZON. KendraSearchIntent - Amazon Lex</title><meta name="pdf" content="lex2.0.pdf#built-in-intent-kendra-search" /><meta name="rss" content="amazon-lex-v2-document-history.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=251" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lex&amp;topic_url=http://docs.aws.amazon.com/de_de/lexv2/latest/dg/built-in-intent-kendra-search.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/de_de/lexv2/latest/dg/built-in-intent-kendra-search.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/de_de/lexv2/latest/dg/built-in-intent-kendra-search.html" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Lex",
        "item" : "https://docs.aws.amazon.com/lex/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "V2-Entwicklerhandbuch",
        "item" : "https://docs.aws.amazon.com/de_de/lexv2/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Bots bauen",
        "item" : "https://docs.aws.amazon.com/de_de/lexv2/latest/dg/building-bots.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Integrierte Absichten und Slot-Typen",
        "item" : "https://docs.aws.amazon.com/de_de/lexv2/latest/dg/built-in.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Integrierte Absichten",
        "item" : "https://docs.aws.amazon.com/de_de/lexv2/latest/dg/howitworks-builtins-intents.html"
      },
      {
        "@type" : "ListItem",
        "position" : 7,
        "name" : "AMAZON. KendraSearchIntent",
        "item" : "https://docs.aws.amazon.com/de_de/lexv2/latest/dg/howitworks-builtins-intents.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="lex2.0.pdf#built-in-intent-kendra-search" target="_blank" rel="noopener noreferrer" title="PDF öffnen"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Dokumentation</a><a href="/lex/index.html">Amazon Lex</a><a href="what-is.html">V2-Entwicklerhandbuch</a></div><div id="page-toc-src"><a href="#kendra-search-iam">IAM-Richtlinie</a><a href="#kendra-search-filter">Verwenden von Anforderungs- und Sitzungsattributen als Filter</a><a href="#kendra-search-response">Verwenden der Suchantwort</a><a href="#kendra-search-lambda">Verwendung einer Lambda-Funktion zur Verwaltung von Anfrage und Antwort</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Die vorliegende Übersetzung wurde maschinell erstellt. Im Falle eines Konflikts oder eines Widerspruchs zwischen dieser übersetzten Fassung und der englischen Fassung (einschließlich infolge von Verzögerungen bei der Übersetzung) ist die englische Fassung maßgeblich.</p></awsui-alert><h1 class="topictitle" id="built-in-intent-kendra-search">AMAZON. KendraSearchIntent</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Verwenden Sie den<code class="code">AMAZON.KendraSearchIntent</code> Intent, um nach Dokumenten zu suchen, die Sie mit Amazon Kendra indexiert haben. Wenn Amazon Lex V2 die nächste Aktion in einer Konversation mit dem Benutzer nicht ermitteln kann, löst es die Suchabsicht aus.</p><p>Die<code class="code">AMAZON.KendraSearchIntent</code> ist nur in den Regionen USA Ost (Nord-Virginia), USA West (Oregon) und Europa (Irland) verfügbar.</p><p>Amazon Kendra ist ein machine-learning-based  Suchdienst, der Dokumente in natürlicher Sprache wie PDF-Dokumente oder Microsoft Word-Dateien indexiert. Es kann indizierte Dokumente durchsuchen und die folgenden Arten von Antworten auf Fragen zurückgeben:</p><div class="itemizedlist">
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>Antworten </p>
                </li><li class="listitem">
                    <p>Einträge aus häufig gestellten Fragen, die die Fragen möglicherweise beantworten</p>
                </li><li class="listitem">
                    <p>Dokumente, die sich auf die Fragen beziehen</p>
                </li></ul></div><p>Ein Beispiel für die Verwendung von <code class="code">AMAZON.KendraSearchIntent</code> finden Sie unter <a href="./faq-bot-kendra-search.html">Beispiel: Einen FAQ-Bot für einen Amazon Kendra Kendra-Index erstellen</a>.</p><p>Wenn Sie eine<code class="code">AMAZON.KendraSearchIntent</code> Absicht für Ihren Bot konfigurieren, ruft Amazon Lex V2 die Absicht immer dann auf, wenn es die Äußerung des Benutzers für eine Absicht nicht ermitteln kann. Wenn Amazon Kendra keine Antwort gibt, wird die Konversation wie im Bot konfiguriert fortgesetzt.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Anmerkung</h6></div><div class="awsdocs-note-text"><p> Amazon Lex V2 unterstützt die Funktion „<code class="code">AMAZON.KendraSearchIntent</code>Während der Slot-Ermittlung“ derzeit nicht. Wenn Amazon Lex V2 die Äußerung des Benutzers für einen Slot nicht ermitteln kann, ruft es den auf<code class="code">AMAZON.FallbackIntent</code>. </p></div></div><p>Wenn Sie das<code class="code">AMAZON.KendraSearchIntent</code> mit dem<code class="code">AMAZON.FallbackIntent</code> im selben Bot verwenden, verwendet Amazon Lex V2 die Intents wie folgt:</p><div class="orderedlist">
                 
                 
                 
                 
            <ol><li>
                    <p>Amazon Lex V2 ruft Sie die<code class="code">AMAZON.KendraSearchIntent</code>. Die Absicht nennt die<code class="code">Query</code> Operation Amazon Kendra.</p>
                </li><li>
                    <p>Wenn Amazon Kendra eine Antwort zurückgibt, zeigt Amazon Lex V2 dem Benutzer das Ergebnis an.</p>
                </li><li>
                    <p>Wenn Amazon Kendra keine Antwort gibt, fordert Amazon Lex V2 den Benutzer erneut auf. Die nächste Aktion hängt von der Antwort des Benutzers ab.</p>
                    <div class="itemizedlist">
                         
                         
                    <ul class="itemizedlist"><li class="listitem">
                            <p>Wenn die Antwort des Benutzers eine Äußerung enthält, die Amazon Lex V2 erkennt, z. B. das Ausfüllen eines Slot-Werts oder die Bestätigung einer Absicht, wird die Konversation mit dem Benutzer wie für den Bot konfiguriert fortgesetzt.</p>
                        </li><li class="listitem">
                            <p>Wenn die Antwort des Benutzers keine Äußerung enthält, die Amazon Lex V2 erkennt, ruft Amazon Lex V2 den<code class="code">Query</code> Vorgang erneut auf.</p>
                        </li></ul></div>
                </li><li>
                    <p>Wenn nach der konfigurierten Anzahl von Wiederholungsversuchen keine Antwort erfolgt, ruft Amazon Lex V2 den an<code class="code">AMAZON.FallbackIntent</code> und beendet die Konversation mit dem Benutzer.</p>
                </li></ol></div><p>Es gibt drei Möglichkeiten, den zu verwenden<code class="code">AMAZON.KendraSearchIntent</code>, um eine Anfrage an Amazon Kendra zu stellen:</p><div class="itemizedlist">
                 
                 
                 
            <ul class="itemizedlist"><li class="listitem">
                    <p>Lassen Sie die Suchabsicht die Anfrage für Sie stellen. Amazon Lex V2 ruft Amazon Kendra mit der Äußerung des Benutzers als Suchzeichenfolge auf. Wenn Sie die Absicht erstellen, können Sie eine Abfragefilterzeichenfolge definieren, die die Anzahl der Antworten begrenzt, die Amazon Kendra zurückgibt. Amazon Lex V2 verwendet den Filter in der Abfrageanforderung.</p>
                </li><li class="listitem">
                    <p>Fügen Sie der Anfrage zusätzliche Abfrageparameter hinzu, um die Suchergebnisse mithilfe Ihrer Lambda-Funktion einzugrenzen. Sie fügen der<code class="code">delegate</code> Dialogaktion ein<code class="code">kendraQueryFilterString</code> Feld hinzu, das Amazon Kendra Kendra-Abfrageparameter enthält. Wenn Sie der Anfrage mit der Lambda-Funktion Abfrageparameter hinzufügen, haben diese Vorrang vor dem Abfragefilter, den Sie bei der Erstellung der Absicht definiert haben.</p>
                </li><li class="listitem">
                    <p>Erstellen Sie Sie sich mithilfe der Lambda-Funktion verwenden Sie die Lambda-Funktion verwenden Sie die Funktion Sie können eine vollständige Amazon Kendra Kendra-Abfrageanforderung erstellen, die Amazon Lex V2 sendet. Sie legen die Abfrage im Feld <code class="code">kendraQueryRequestPayload</code> in der Dialogaktion <code class="code">delegate</code> fest. Das Feld <code class="code">kendraQueryRequestPayload</code> hat Vorrang vor dem Feld <code class="code">kendraQueryFilterString</code>.</p>
                </li></ul></div><p>Um den<code class="code">queryFilterString</code> Parameter anzugeben, wenn Sie einen Bot erstellen, oder um das<code class="code">kendraQueryFilterString</code> Feld anzugeben, wenn Sie die<code class="code">delegate</code> Aktion in einer Lambda-Dialogfunktion aufrufen, geben Sie eine Zeichenfolge an, die als Attributfilter für die Amazon Kendra Kendra-Abfrage verwendet wird. Wenn die Zeichenfolge kein gültiger Attributfilter ist, wird zur Laufzeit die Ausnahme <code class="code">InvalidBotConfigException</code> zurückgegeben. Weitere Informationen zu Attributfiltern finden Sie unter <a href="https://docs.aws.amazon.com/kendra/latest/dg/filtering.html#search-filtering">Verwenden von Dokumentattributen zum Filtern von Abfragen</a> im <em>Amazon Kendra Developer Guide</em>.</p><p>Um die Kontrolle über die Abfrage zu haben, die Amazon Lex V2 an Amazon Kendra sendet, können Sie in dem<code class="code">kendraQueryRequestPayload</code> Feld Ihrer Lambda-Funktion eine Abfrage angeben. Wenn die Abfrage nicht gültig ist, gibt Amazon Lex V2 eine<code class="code">InvalidLambdaResponseException</code> Ausnahme zurück. Weitere Informationen finden Sie unter <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_Query.html">Abfragevorgang</a> im <em>Amazon Kendra Developer Guide</em>.</p><p>Ein Beispiel für die Verwendung von <code class="code">AMAZON.KendraSearchIntent</code> finden Sie unter <a href="./faq-bot-kendra-search.html">Beispiel: Einen FAQ-Bot für einen Amazon Kendra Kendra-Index erstellen</a>.</p>
                <h2 id="kendra-search-iam">IAM-Richtlinie für Amazon Kendra Search</h2>
                <p>Um den<code class="code">AMAZON.KendraSearchIntent</code> Intent zu verwenden, müssen Sie eine Rolle verwenden, dieAWS Identity and Access Management (IAM) -Richtlinien bereitstellt, die es Amazon Lex V2 ermöglichen, eine Laufzeitrolle anzunehmen, die berechtigt ist, den Amazon Kendra<code class="code">Query</code> Kendra-Intent aufzurufen. Die IAM-Einstellungen, die Sie verwenden, hängen davon ab, ob Sie sie<code class="code">AMAZON.KendraSearchIntent</code> mit der Amazon Lex V2-Konsole oder mit einem AWS-SDK oder derAWS Command Line Interface (AWS CLI) erstellen. Wenn Sie die Konsole verwenden, können Sie wählen, ob Sie der serviceverknüpften Amazon Lex V2-Rolle die Berechtigung zum Aufrufen von Amazon Kendra hinzufügen oder eine Rolle speziell für den Aufruf des Amazon Kendra<code class="code">Query</code> Kendra-Vorgangs verwenden möchten. Wenn Sie die AWS CLI oder ein SDK verwenden, um die Absicht zu erstellen, müssen Sie eine Rolle speziell zum Aufrufen der <code class="code">Query</code>-Operation verwenden.</p>
                 
                    <h3 id="kendra-iam-attach">Anfügen von Berechtigungen </h3>
                    <p>Sie können die Konsole verwenden, um der standardmäßigen Amazon Lex V2-Dienstverknüpfungsrolle Berechtigungen für den Zugriff auf den Amazon<code class="code">Query</code> Kendra-Vorgang zuzuordnen. Wenn Sie der serviceverknüpften Rolle Berechtigungen zuweisen, müssen Sie keine Runtime-Rolle speziell für die Verbindung mit dem Amazon Kendra Kendra-Index erstellen und verwalten.</p>
                    <p>Der Benutzer, die Rolle oder die Gruppe, die Sie für den Zugriff auf die Amazon Lex V2-Konsole verwenden, muss über Berechtigungen zur Verwaltung von Rollenrichtlinien verfügen. Fügen Sie Sie Sie Sie sich die folgende IAM-Richtlinie an Sie die Rolle für Richtlinien Wenn Sie diese Berechtigungen erteilen, verfügt die Rolle über Berechtigungen zum Ändern der vorhandenen Richtlinie für die serviceverknüpfte Rolle. </p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "iam:AttachRolePolicy",
                "iam:PutRolePolicy",
                "iam:GetRolePolicy"
            ],
            "Resource": "arn:aws:iam::*:role/aws-service-role/lexv2.amazonaws.com/AWSServiceRoleForLexBots*"
        },
        <span>{</span>
            "Effect": "Allow",
            "Action": "iam:ListRoles",
            "Resource": "*"
        }
    ]
}</code></pre>
                 
                 
                    <h3 id="kendra-iam-role">Angeben einer Rolle </h3>
                    <p>Sie können die Konsole, die oder die API verwendenAWS CLI, um eine Laufzeitrolle anzugeben, die beim Aufrufen des Amazon Kendra<code class="code">Query</code> Kendra-Vorgangs verwendet werden soll. </p>
                    <p>Der Benutzer, die Rolle oder die Gruppe, die Sie zur Angabe der Laufzeitrolle verwenden, muss über die<code class="code">iam:PassRole</code> entsprechende Berechtigung verfügen. Die folgende Richtlinie definiert die Berechtigung. Sie können die Bedingungskontextschlüssel <code class="code">iam:AssociatedResourceArn</code> und <code class="code">iam:PassedToService</code> verwenden, um den Umfang der Berechtigungen weiter einzuschränken. Weitere Informationen finden Sie unter <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_iam-condition-keys.html">IAM undAWS STS Condition Context Keys</a> im <em>AWS Identity and Access ManagementBenutzerhandbuch</em>.</p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": "iam:PassRole",
            "Resource": "arn:aws:iam::<code class="replaceable">account</code>:role/<code class="replaceable">role</code>"
        }
    ]
}</code></pre>
                    <p>Die Laufzeitrolle, die Amazon Lex V2 zum Aufrufen von Amazon Kendra verwenden muss, muss über die entsprechenden<code class="code">kendra:Query</code> Berechtigungen verfügen. Wenn Sie eine vorhandene IAM-Rolle verwenden, um die Genehmigung zum Aufrufen des Amazon Kendra<code class="code">Query</code> Kendra-Vorgangs zu erhalten, muss der Rolle die folgende Richtlinie beigefügt sein.</p>
                    <p>Sie können die IAM-Konsole,AWS CLI die IAM-API oder die In diesen Anweisungen wird die AWS CLI zum Erstellen der Rolle und Richtlinien verwendet.</p>
                    <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Anmerkung</h6></div><div class="awsdocs-note-text"><p>Der folgende Code ist für Linux und MacOS formatiert. Ersetzen Sie unter Windows das Linux-Zeilenfortsetzungszeichen (\) durch ein Caret-Zeichen (^).</p></div></div>
                    <div class="procedure"><h6>So fügen Sie einer Rolle die Berechtigung für die Query-Operation hinzu</h6><ol><li>
                            <p>Erstellen Sie im aktuellen Verzeichnis ein Dokument mit dem Namen <code class="userinput">KendraQueryPolicy.json</code>, fügen Sie ihm folgenden Code hinzu und speichern Sie es.</p>
                            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Allow",
            "Action": [
                "kendra:Query"
            ],
            "Resource": [
                "arn:aws:kendra:<code class="replaceable">region</code>:<code class="replaceable">account</code>:index/<code class="replaceable">index ID</code>"
            ]
        }
    ]
}</code></pre>
                        </li><li>
                            <p>Führen Sie in der den folgenden Befehl ausAWS CLI, um die IAM-Richtlinie für die Ausführung des Amazon Kendra<code class="code">Query</code> Kendra-Vorgangs zu erstellen.</p>
                            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws iam create-policy \
    --policy-name <code class="replaceable">query-policy-name</code> \
    --policy-document file://KendraQueryPolicy.json</code></pre>
                        </li><li>
                            <p>Fügen Sie Sie sich die Richtlinie an die IAM-Rolle, die Sie verwenden, verwenden Sie den Vorgang aufrufen Sie den<code class="code">Query</code> Vorgang aufrufen.</p>
                            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws iam attach-role-policy \
    --policy-arn arn:aws:iam::<code class="replaceable">account-id</code>:policy/<code class="replaceable">query-policy-name</code>
    --role-name <code class="replaceable">role-name</code></code></pre>
                        </li></ol></div>
                    <p>Sie können wählen, ob Sie die serviceverknüpfte Amazon Lex V2-Rolle aktualisieren oder eine Rolle verwenden möchten, die Sie bei der Erstellung der Rolle<code class="code">AMAZON.KendraSearchIntent</code> für Ihren Bot erstellt haben. Das folgende Verfahren zeigt, wie Sie die zu verwendende IAM-Rolle auswählen können.</p>
                    <div class="procedure"><h6>Um die Laufzeitrolle für AMAZON anzugeben. KendraSearchIntent</h6><ol><li>
                            <p>Melden Sie sich sich Sie sich bei derAWS Management Console Sie sich Sie Sie Sie Sie Sie sich Amazon Lex Sie sich Sie sich Sie <a href="https://console.aws.amazon.com/lex/" rel="noopener noreferrer" target="_blank"><span>sich</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> Sie sich https://console.aws.amazon.com/lex/</p>
                        </li><li>
                            <p>Wählen Sie den Bot, dem Sie <code class="code">AMAZON.KendraSearchIntent</code> hinzufügen möchten.</p>
                        </li><li>
                            <p>Wählen Sie das Pluszeichen (+) neben <b>Intents (Absichten)</b>.</p>
                        </li><li>
                            <p>Wählen Sie unter <b>Add intent (Absicht hinzufügen)</b> die Option <b>Search existing intents (Vorhandene Absichten durchsuchen)</b>.</p>
                        </li><li>
                            <p>Geben Sie unter <b>Search intents (Absichten suchen)</b> <code class="userinput">AMAZON.KendraSearchIntent</code> ein und wählen Sie dann <b>Add (Hinzufügen)</b>.</p>
                        </li><li>
                            <p>Geben Sie unter <b>Copy built-in intent (Integrierte Absicht kopieren)</b> einen Namen für die Absicht ein, z. B. <code class="userinput">KendraSearchIntent</code>, und wählen Sie dann <b>Add (Hinzufügen)</b>.</p>
                        </li><li>
                            <p>Öffnen Sie den Abschnitt <b>Amazon Kendra query (Amazon Kendra-Abfrage)</b>.</p>
                        </li><li>
                            <p>Wählen Sie unter <b>IAM role (IAM-Rolle)</b> eine der folgenden Optionen:</p>
                            <div class="itemizedlist">
                                 
                                 
                            <ul class="itemizedlist"><li class="listitem">
                                    <p>Um die serviceverknüpfte Amazon Lex V2-Rolle zu aktualisieren, damit Ihr Bot Amazon Kendra Kendra-Indizes abfragen kann, wählen Sie <b>Amazon Kendra Kendra-Berechtigungen hinzufügen</b>.</p>
                                </li><li class="listitem">
                                    <p>Um eine Rolle zu verwenden, die berechtigt ist, den Amazon Kendra<code class="code">Query</code> Kendra-Vorgang aufzurufen, wählen Sie <b>Bestehende Rolle verwenden</b>.</p>
                                </li></ul></div>
                        </li></ol></div>
                 
             
                <h2 id="kendra-search-filter">Verwenden von Anforderungs- und Sitzungsattributen als Filter</h2>
                <p>Um die Antwort von Amazon Kendra auf Elemente zu filtern, die sich auf die aktuelle Konversation beziehen, verwenden Sie Sitzungs- und Anforderungsattribute als Filter, indem Sie den<code class="code">queryFilterString</code> Parameter hinzufügen, wenn Sie Ihren Bot erstellen. Sie geben einen Platzhalter für das Attribut an, wenn Sie die Absicht erstellen, und Amazon Lex V2 ersetzt dann einen Wert, bevor Amazon Kendra aufgerufen wird. Weitere Informationen zu Anforderungsattributen finden Sie unter <a href="./context-mgmt-request-attribs.html">Festlegen von Anforderattributen</a>. Weitere Informationen über Sitzungsattribute finden Sie unter <a href="./context-mgmt-session-attribs.html">Festlegen von Sitzungsattributen</a>.</p>
                <p>Im Folgenden finden Sie ein Beispiel für einen<code class="code">queryFilterString</code> Parameter, der eine Zeichenfolge verwendet, um die Amazon Kendra Kendra-Abfrage zu filtern.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"<span>{</span>"equalsTo": <span>{</span>"key": "City", "value": <span>{</span>"stringValue": "Seattle"}}}"</code></pre>
                <p>Im Folgenden finden Sie ein Beispiel für einen<code class="code">queryFilterString</code> Parameter, der ein Sitzungsattribut verwendet, das aufgerufen wird<code class="code">"SourceURI"</code>, um die Amazon Kendra Kendra-Abfrage zu filtern.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"<span>{</span>"equalsTo": <span>{</span>"key": "SourceURI","value": <span>{</span>"stringValue": "[FileURL]"}}}"</code></pre>
                <p>Im Folgenden finden Sie ein Beispiel für einen<code class="code">queryFilterString</code> Parameter, der ein Anforderungsattribut verwendet, das aufgerufen wird<code class="code">"DepartmentName"</code>, um die Amazon Kendra Kendra-Abfrage zu filtern.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"<span>{</span>"equalsTo": <span>{</span>"key": "Department","value": <span>{</span>"stringValue": "((DepartmentName))"}}}"</code></pre>
                <p>Die<code class="code">AMAZON.KendraSearchInteng</code> Filter verwenden dasselbe Format wie die Amazon Kendra Kendra-Suchfilter. Weitere Informationen finden Sie unter <a href="https://docs.aws.amazon.com/kendra/latest/dg/filtering.html#search-filtering">Verwenden von Dokumentattributen zum Filtern von Suchergebnissen</a> im <em>Amazon Kendra Developer Guide</em>.</p>
                <p>Die zusammen mit dem verwendete Abfragefilterzeichenfolge<code class="code">AMAZON.KendraSearchIntent</code> muss Kleinbuchstaben für den ersten Buchstaben jedes Filters verwenden. Das folgende Beispiel zeigt einen gültigen Abfragefilter für die<code class="code">AMAZON.KendraSearchIntent</code>.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "andAllFilters": [
        <span>{</span>
            "equalsTo": <span>{</span>
                "key": "City",
                "value": <span>{</span>
                    "stringValue": "Seattle"
                }
            }
        },
        <span>{</span>
            "equalsTo": <span>{</span>
                "key": "State",
                "value": <span>{</span>
                    "stringValue": "Washington"
                }
            }
        }
    ]
}</code></pre>
             
                <h2 id="kendra-search-response">Verwenden der Suchantwort</h2>
                <p>Amazon Kendra gibt die Antwort auf eine Suche als Antwort aus der Absichtserklärung zurück.<code class="code">IntentClosingSetting</code> Die Absicht muss eine<code class="code">closingResponse</code> Anweisung enthalten, es sei denn, eine Lambda-Funktion erzeugt eine abschließende Antwortnachricht.</p>
                <p>Amazon Kendra hat fünf Arten von Antworten. </p>
                <div class="itemizedlist">
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>Für die folgenden beiden Antworten müssen häufig gestellte Fragen für Ihren Amazon Kendra Kendra-Index eingerichtet werden. Weitere Informationen finden Sie unter <a href="https://docs.aws.amazon.com/kendra/latest/dg/in-creating-faq.html">Fragen und Antworten direkt zu einem Index hinzufügen</a>.</p>
                        <div class="itemizedlist">
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p> <code class="code">x-amz-lex:kendra-search-response-question_answer-question-&lt;N&gt;</code>— Die Frage aus einer FAQ, die der Suche entspricht. </p>
                            </li><li class="listitem">
                                <p> <code class="code">x-amz-lex:kendra-search-response-question_answer-answer-&lt;N&gt;</code>— Die Antwort aus einer häufig gestellten Frage, die der Suche entspricht. </p>
                            </li></ul></div>                        
                    </li><li class="listitem">
                        <p>Für die folgenden drei Antworten muss eine Datenquelle für Ihren Amazon Kendra Kendra-Index eingerichtet werden. Weitere Informationen finden Sie unter <a href="https://docs.aws.amazon.com/kendra/latest/dg/data-source.html">Erstellen einer Datenquelle</a>. </p>
                        <div class="itemizedlist">
                             
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p><code class="code">x-amz-lex:kendra-search-response-document-&lt;N&gt;</code>— Ein Auszug aus einem Dokument im Index, der sich auf den Text der Äußerung bezieht.</p>
                            </li><li class="listitem">
                                <p><code class="code">x-amz-lex:kendra-search-response-document-link-&lt;N&gt;</code>— Die URL eines Dokuments im Index, das sich auf den Text der Äußerung bezieht.</p>
                            </li><li class="listitem">
                                <p><code class="code">x-amz-lex:kendra-search-response-answer-&lt;N&gt;</code>— Ein Auszug aus einem Dokument im Index, das die Frage beantwortet.</p>
                            </li></ul></div>
                    </li></ul></div>
                <p>Die Antworten werden in <code class="code">request</code>-Attributen zurückgegeben. Für jedes Attribut kann es bis zu fünf Antworten geben, nummeriert von 1 bis 5. Weitere Informationen zu Antworten finden Sie unter <a href="https://docs.aws.amazon.com/kendra/latest/dg/response-types.html">Antworttypen</a> im <em>Amazon Kendra Developer Guide</em>. </p>
                <p>Die Anweisung <code class="code">closingResponse</code> muss eine oder mehrere Nachrichtengruppen aufweisen. Jede Nachrichtengruppe enthält eine oder mehrere Nachrichten. Jede Nachricht kann eine oder mehrere Platzhaltervariablen enthalten, die in der Antwort von Amazon Kendra durch Anforderungsattribute ersetzt werden. In der Nachrichtengruppe muss mindestens eine Nachricht vorhanden sein, in der alle Variablen in der Nachricht durch Anforderungsattributwerte in der Laufzeitantwort ersetzt werden, oder in der Gruppe muss eine Nachricht ohne Platzhaltervariablen vorhanden sein. Die Anforderungsattribute werden durch doppelte Klammern ("((" "))") hervorgehoben. Die folgenden Nachrichtengruppennachrichten entsprechen jeder Antwort von Amazon Kendra:</p>
                <div class="itemizedlist">
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>„Ich habe eine FAQ-Frage für Sie gefunden: ((x-amz-lex:kendra-search-response-question _answer-question-1)), und die Antwort lautet ((x-amz-lex:kendra-search-response-question _answer-answer-1))“</p>
                    </li><li class="listitem">
                        <p>„Ich habe einen Auszug aus einem hilfreichen Dokument gefunden: ((x-amz-lex:kendra-search-response-document -1))“</p>
                    </li><li class="listitem">
                        <p>„Ich denke, die Antwort auf Ihre Fragen lautet ((x-amz-lex:kendra-search-response-answer -1))“</p>
                    </li></ul></div>
             
                <h2 id="kendra-search-lambda">Verwendung einer Lambda-Funktion zur Verwaltung von Anfrage und Antwort</h2>
                <p>Die<code class="code">AMAZON.KendraSearchIntent</code> Absicht kann Ihren Dialogcode-Hook und den Fulfillment-Code-Hook verwenden, um die Anfrage an Amazon Kendra und die Antwort zu verwalten. Verwenden Sie die Dialogcode-Hook-Lambda-Funktion, wenn Sie die Abfrage, die Sie an Amazon Kendra senden, ändern möchten, und die Fulfillment-Code-Hook-Funktion Lambda, wenn Sie die Antwort ändern möchten.</p>
                 
                    <h3 id="kendra-search-lambda-dialog">Erstellen einer Abfrage mit dem Dialogcode-Hook</h3>
                    <p>Sie können den Dialogcode-Hook verwenden, um eine Abfrage zu erstellen, die an Amazon Kendra gesendet werden soll. Die Verwendung des Dialogcode-Hooks ist optional. Wenn Sie keinen Dialogcode-Hook angeben, erstellt Amazon Lex V2 eine Abfrage aus der Äußerung des Benutzers und verwendet die Abfrage<code class="code">queryFilterString</code>, die Sie bei der Konfiguration der Absicht angegeben haben, sofern Sie eine angegeben haben.</p>
                    <p>Sie können zwei Felder in der Code-Hook-Antwort des Dialogs verwenden, um die Anfrage an Amazon Kendra zu ändern:</p>
                    <div class="itemizedlist">
                         
                         
                    <ul class="itemizedlist"><li class="listitem">
                            <p><code class="code">kendraQueryFilterString</code>— Verwenden Sie diese Zeichenfolge, um Attributfilter für die Amazon Kendra Kendra-Anfrage anzugeben. Sie können die Abfrage mithilfe eines beliebigen in Ihrem Index definierten Indexfelds filtern. Informationen zur Struktur der Filterzeichenfolge finden Sie unter <a href="https://docs.aws.amazon.com/kendra/latest/dg/filtering.html#search-filtering">Verwenden von Dokumentattributen zum Filtern von Abfragen</a> im <em>Amazon Kendra Developer Guide</em>. Wenn die angegebene Filterzeichenfolge ungültig ist, erhalten Sie die Ausnahme <code class="code">InvalidLambdaResponseException</code>. Die <code class="code">kendraQueryFilterString</code>-Zeichenfolge überschreibt alle Abfragezeichenfolgen, die im für diese Absicht konfigurierten <code class="code">queryFilterString</code> angegeben sind.</p>
                        </li><li class="listitem">
                            <p><code class="code">kendraQueryRequestPayload</code>— Verwenden Sie diese Zeichenfolge, um eine Amazon Kendra Kendra-Abfrage anzugeben. Ihre Anfrage kann alle Funktionen von Amazon Kendra verwenden. Wenn Sie keine gültige Abfrage angeben, erhalten Sie die Ausnahme <code class="code">InvalidLambdaResponseException</code>. Weitere Informationen finden Sie unter <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_Query.html">Query</a> im <em>Amazon Kendra Developer Guide</em>.</p>
                        </li></ul></div>
                    <p>Nachdem Sie den Filter oder die Abfragezeichenfolge erstellt haben, senden Sie die Antwort an Amazon Lex V2, wobei das<code class="code">dialogAction</code> Feld der Antwort auf gesetzt ist<code class="code">delegate</code>. Amazon Lex V2 sendet die Anfrage an Amazon Kendra und gibt die Abfrageantwort dann an den Fulfillment-Code-Hook zurück.</p>
                 
                 
                    <h3 id="kendra-search-lambda-fulfillment">Verwenden des Erfüllungscode-Hooks für die Antwort</h3>
                    <p>Nachdem Amazon Lex V2 eine Anfrage an Amazon Kendra gesendet hat, wird die Abfrageantwort an die<code class="code">AMAZON.KendraSearchIntent</code> Fulfillment-Lambda-Funktion zurückgegeben. Das Eingabeereignis für den Code-Hook enthält die vollständige Antwort von Amazon Kendra. Die Abfragedaten haben dieselbe Struktur wie die, die von der Amazon Kendra<code class="code">Query</code> Kendra-Operation zurückgegeben wurden. Weitere Informationen finden Sie unter <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_Query.html#API_Query_ResponseSyntax">Syntax der Abfrageantwort</a> im <em>Amazon Kendra Developer Guide</em>.</p>
                    <p>Der Erfüllungscode-Hook ist optional. Existiert kein Code oder gibt der Code-Hook in der Antwort keine Nachricht zurück, verwendet Amazon Lex V2 die<code class="code">closingResponse</code> Anweisung für Antworten.</p>
                 
            <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warnung" /> <strong>JavaScript ist in Ihrem Browser nicht verfügbar oder deaktiviert.</strong></p><p>Zur Nutzung der AWS-Dokumentation muss JavaScript aktiviert sein. Weitere Informationen finden auf den Hilfe-Seiten Ihres Browsers.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Dokumentkonventionen</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./built-in-intent-help.html">AMAZON. HelpIntent</div><div id="next" class="next-link" accesskey="n" href="./faq-bot-kendra-search.html">Beispiel: Einen FAQ-Bot für einen Amazon Kendra Kendra-Index erstellen</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Hat Ihnen diese Seite geholfen? – Ja</div><div class="content"><p>Vielen Dank, dass Sie uns mitgeteilt haben, dass wir gute Arbeit geleistet haben!</p><p>Würden Sie sich einen Moment Zeit nehmen, um uns mitzuteilen, was wir richtig gemacht haben, damit wir noch besser werden?</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lex&amp;topic_url=https://docs.aws.amazon.com/de_de/lexv2/latest/dg/built-in-intent-kendra-search.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Hat Ihnen diese Seite geholfen? – Nein</div><div class="content"><p>Vielen Dank, dass Sie uns mitgeteilt haben, dass diese Seite überarbeitet werden muss. Es tut uns Leid, dass wir Ihnen nicht weiterhelfen konnten.</p><p>Würden Sie sich einen Moment Zeit nehmen, um uns mitzuteilen, wie wir die Dokumentation verbessern können?</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lex&amp;topic_url=https://docs.aws.amazon.com/de_de/lexv2/latest/dg/built-in-intent-kendra-search.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>