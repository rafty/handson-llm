<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="de-DE"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Globale AWS-Bedingungskontextschlüssel - AWS Identity and Access Management</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="reference_policies_condition-keys" /><meta name="default_state" content="reference_policies_condition-keys" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/reference_policies_condition-keys.html" /><meta name="description" content="Beschreibt jeden globalen AWS-Bedingungsschlüssel, der in IAM-Richtlinien verwendet werden kann." /><meta name="deployment_region" content="IAD" /><meta name="product" content="AWS Identity and Access Management" /><meta name="guide" content="Leitfaden" /><meta name="abstract" content="Steuern des Zugriffs auf Ihre AWS-Ressourcen mit Benutzeridentität (Authentifizierung) und Richtlinien, die spezifische Berechtigungen (Autorisierung) definieren." /><meta name="guide-locale" content="de_de" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/reference_policies_condition-keys.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_condition-keys.html" hreflang="x-default" /><meta name="feedback-item" content="IAM" /><meta name="this_doc_product" content="AWS Identity and Access Management" /><meta name="this_doc_guide" content="Leitfaden" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'iam'}"></script><meta id="panorama-serviceSubSection" value="Leitfaden" /><meta id="panorama-serviceConsolePage" value="Globale AWS-Bedingungskontextschlüssel" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Globale AWS-Bedingungskontextschlüssel - AWS Identity and Access Management</title><meta name="pdf" content="iam-ug.pdf#reference_policies_condition-keys" /><meta name="rss" content="aws-iam-release-notes.rss" /><meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=76" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=http://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/reference_policies_condition-keys.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/reference_policies_condition-keys.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/reference_policies_condition-keys.html" /><meta name="keywords" content="IAM,AWS Identity and Access Management,IAM-Benutzer,user,IAM-Gruppe,Gruppe,IAM role (IAM-Rolle),Rolle,Berechtigungsrichtlinie,Vertrauensrichtlinie,Richtlinie,Zugriffsschlüssel,password,Ressourcen-OU-ID" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "AWS Identity and Access Management",
        "item" : "https://docs.aws.amazon.com/iam/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Leitfaden",
        "item" : "https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Referenzinformationen für AWS Identity and Access Management.",
        "item" : "https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/reference.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "IAM-JSON-Richtlinienreferenz",
        "item" : "https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/reference_policies.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Globale AWS-Bedingungskontextschlüssel",
        "item" : "https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/reference_policies.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="iam-ug.pdf#reference_policies_condition-keys" target="_blank" rel="noopener noreferrer" title="PDF öffnen"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Dokumentation</a><a href="/iam/index.html">AWS Identity and Access Management</a><a href="introduction.html">Leitfaden</a></div><div id="page-toc-src"><a href="#condition-keys-calledvia">CalledVia</a><a href="#condition-keys-calledviafirst">CalledViaFirst</a><a href="#condition-keys-calledvialast">CalledViaLast</a><a href="#condition-keys-currenttime">CurrentTime</a><a href="#condition-keys-ec2instancesourcevpc">Ec2InstanceSourceVpc</a><a href="#condition-keys-ec2instancesourceprivateip4">Ec2InstanceSourcePrivateIPv4</a><a href="#condition-keys-epochtime">EpochTime</a><a href="#condition-keys-federatedprovider">FederatedProvider</a><a href="#condition-keys-multifactorauthage">MultiFactorAuthAge</a><a href="#condition-keys-multifactorauthpresent">MultiFactorAuthPresent</a><a href="#condition-keys-principalaccount">PrincipalAccount</a><a href="#condition-keys-principalarn">PrincipalArn</a><a href="#condition-keys-principalisawsservice">PrincipalIsawsService</a><a href="#condition-keys-principalorgid">PrincipalOrgID</a><a href="#condition-keys-principalorgpaths">PrincipalOrgPaths</a><a href="#condition-keys-principalservicename">PrincipalServiceName</a><a href="#condition-keys-principalservicenameslist">PrincipalServiceNamesList</a><a href="#condition-keys-principaltag">PrincipalTag</a><a href="#condition-keys-principaltype">PrincipalType</a><a href="#condition-keys-referer">Referer</a><a href="#condition-keys-requestedregion">RequestedRegion</a><a href="#condition-keys-requesttag">RequestTag</a><a href="#condition-keys-resourceaccount">ResourceAccount</a><a href="#condition-keys-resourceorgid">ResourceOrgID</a><a href="#condition-keys-resourceorgpaths">ResourceOrgPaths</a><a href="#condition-keys-resourcetag">ResourceTag</a><a href="#condition-keys-securetransport">SecureTransport</a><a href="#condition-keys-sourceaccount">SourceAccount</a><a href="#condition-keys-sourcearn">SourceArn</a><a href="#condition-keys-sourceidentity">SourceIdentity</a><a href="#condition-keys-sourceip">SourceIp</a><a href="#condition-keys-sourcevpc">SourceVpc</a><a href="#condition-keys-sourcevpce">SourceVpce</a><a href="#condition-keys-tagkeys">TagKeys</a><a href="#condition-keys-tokenissuetime">TokenIssueTime</a><a href="#condition-keys-useragent">UserAgent</a><a href="#condition-keys-userid">Userid</a><a href="#condition-keys-username">Benutzername</a><a href="#condition-keys-viaawsservice">ViaAWSService</a><a href="#condition-keys-vpcsourceip">VpcSourceIp</a><a href="#condition-keys-other">Andere dienstübergreifende Schlüssel</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="reference_policies_condition-keys">Globale AWS-Bedingungskontextschlüssel</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Wenn ein <a href="./intro-structure.html#intro-structure-principal">Auftraggeber</a> eine <a href="./intro-structure.html#intro-structure-request">Anforderung</a> an AWS stellt, erfasst AWS Anforderungsinformationen in einem <a href="./intro-structure.html#intro-structure-request">Anforderungskontext</a>. Sie können das <code class="code">Condition</code>-Element einer JSON-Richtlinie verwenden, um Schlüssel im Anforderungskontext mit Schlüsselwerten zu vergleichen, die Sie in Ihrer Richtlinie angeben. Weitere Informationen zu den Umständen, unter denen ein globaler Schlüssel in den Anforderungskontext aufgenommen wird, finden Sie unter <b>Verfügbarkeitsinformationen</b> für die einzelnen globalen Bedingungsschlüssel. Weitere Informationen zur Verwendung des Elements <code class="code">Condition</code> in JSON-Richtlinien finden Sie unter <a href="./reference_policies_elements_condition.html">IAM-JSON-Richtlinienelemente: Condition</a>.</p><div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Anmerkung</h6></div><div class="awsdocs-note-text"><p>Wenn Sie Bedingungsschlüssel verwenden, die nur unter bestimmten Umständen verfügbar sind, können Sie die <a href="./reference_policies_elements_condition_operators.html#Conditions_IfExists">IfExists</a>-Versionen der Bedingungsoperatoren verwenden. Wenn die entsprechenden Bedingungsschlüssel im Kontext einer Anforderung fehlen, kann die Richtlinienauswertung fehlschlagen. Verwenden Sie beispielsweise den folgenden Bedingungsblock mit <code class="code">...IfExists</code>-Operatoren, um abzugleichen, ob eine Anforderung aus einem bestimmten IP-Bereich oder von einer bestimmten VPC stammt. Wenn einer oder beide Schlüssel nicht im Anforderungskontext enthalten sind, gibt die Bedingung weiterhin <code class="code">true</code> zurück. Die Werte werden nur überprüft, wenn der angegebene Schlüssel im Anforderungskontext enthalten ist. </p><pre class="programlisting"><div class="code-btn-container"></div><code class="json ">"Condition": <span>{</span>
    "IpAddressIfExists": <span>{</span>"aws:SourceIp" : ["xxx"] },
    "StringEqualsIfExists" : <span>{</span>"aws:SourceVpc" : ["yyy"]} 
}</code></pre></div></div><p>Globale Bedingungsschlüssel sind Bedingungsschlüssel mit einem <code class="code">aws:</code>-Präfix. AWS-Services können globale Bedingungsschlüssel unterstützen oder servicespezifische Schlüssel bereitstellen, die ihr Servicepräfix enthalten. Beispielsweise enthalten IAM-Bedingungsschlüssel das <code class="code">iam:</code>-Präfix. Weitere Informationen finden Sie unter <a href="reference_policies_actions-resources-contextkeys.html" rel="noopener noreferrer" target="_blank">Aktionen, Ressourcen und Bedingungsschlüssel für AWS-Services </a>. Wählen Sie den Service aus, dessen Schlüssel Sie anzeigen möchten.</p><div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Wichtig</h6></div><div class="awsdocs-note-text"><p>Um Ihre Bedingung mit einem Anforderungskontext mit mehreren Schlüsselwerten zu vergleichen, müssen Sie die Set-Operatoren <code class="code">ForAllValues</code> oder <code class="code">ForAnyValue</code> verwenden. Verwenden Sie Satz-Operatoren nur mit mehrwertigen Bedingungsschlüssel. Verwenden Sie keine Satz-Operatoren mit einzelwertigen Bedingungsschlüssel. Weitere Informationen finden Sie unter <a href="./reference_policies_multi-value-conditions.html">Erstellen einer Bedingung mit mehreren Schlüsseln oder Werten</a>.</p></div></div>
        <h2 id="condition-keys-calledvia">aws:CalledVia</h2>
        <p>Funktioniert mit <a href="./reference_policies_elements_condition_operators.html#Conditions_String">Zeichenfolgenoperatoren</a>.</p>
        <p>Verwenden Sie diesen Schlüssel, um die Services in der Richtlinie mit den Services zu vergleichen, die im Auftrag des IAM-Auftraggebers (Benutzer oder Rolle) Anforderungen ausgegeben haben. Wenn ein Auftraggeber eine Anforderung an einen AWS-Service ausgibt, kann dieser Service die Anmeldeinformationen des Auftraggebers verwenden, um nachfolgende Anforderungen an andere Services auszugeben. Der Schlüssel <code class="code">aws:CalledVia</code> enthält eine geordnete Liste aller Services in der Kette, die im Auftrag des Auftraggebers Anforderungen ausgegeben haben.</p>
        <p>Sie können zum Beispiel AWS CloudFormation zum Lesen und Schreiben aus einer Amazon DynamoDB-Tabelle verwenden. DynamoDB verwendet dann die Verschlüsselung, die von AWS Key Management Service (AWS KMS) enthalten.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Verfügbarkeit</b>  Dieser Schlüssel ist in der Anforderung vorhanden, wenn ein Service, der <code class="code">aws:CalledVia</code> unterstützt, die Anmeldeinformationen eines IAM-Auftraggebers verwendet, um eine Anforderung an einen anderen Service auszugeben. Dieser Schlüssel ist nicht vorhanden, wenn der Service eine <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-role">Servicerolle</a> oder eine <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-linked-role">serviceverknüpfte Rolle</a> verwendet, um einen Aufruf im Auftrag des Auftraggebers durchzuführen. Dieser Schlüssel ist auch nicht vorhanden, wenn der Auftraggeber den Aufruf direkt durchführt.</p>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Mehrwertig</p>
            </li></ul></div>
        <a id="calledvia-services"></a>
        <p>Um den Bedingungsschlüssel <code class="code">aws:CalledVia</code> in einer Richtlinie verwenden zu können, müssen Sie die Serviceprinzipale zum Zulassen oder Verweigern von AWS-Serviceanforderungen festlegen. AWS unterstützt die Verwendung der folgenden Serviceprinzipale mit <code class="code">aws:CalledVia</code>.</p>
        <div class="table-container"><div class="table-contents"><table id="w339aac25c19c19c13c15"><thead>
                    <tr>
                        <th>Dienstauftraggeber</th>
                    </tr>
                </thead>
                    <tr>
                        <td>athena.amazonaws.com</td>
                    </tr>
                    <tr>
                        <td>cloud9.amazonaws.com</td>
                    </tr>
                    <tr>
                        <td>cloudformation.amazonaws.com</td>
                    </tr>
                    <tr>
                        <td>databrew.amazonaws.com</td>
                    </tr>
                    <tr>
                        <td>dataexchange.amazonaws.com</td>
                    </tr>
                    <tr>
                        <td>dynamodb.amazonaws.com</td>
                    </tr>
                    <tr>
                        <td>kms.amazonaws.com</td>
                    </tr>
                    <tr>
                        <td>servicecatalog-appregistry.amazonaws.com</td>
                    </tr>
                    <tr>
                        <td>sqlworkbench.amazonaws.com</td>
                    </tr>
                </table></div></div>
        <p>Um den Zugriff zu erlauben oder zu verweigern, wenn <em>irgendein</em> Service unter Verwendung der Anmeldeinformationen des Auftraggebers eine Anforderung ausgibt, verwenden Sie den Bedingungsschlüssel <code class="code"><a href="#condition-keys-viaawsservice">aws:ViaAWSService</a></code>. Dieser Bedingungsschlüssel unterstützt alle AWS-Services.</p>
        <p>Der <code class="code">aws:CalledVia</code>-Schlüssel ist ein <a href="./reference_policies_multi-value-conditions.html">mehrwertiger Schlüssel</a>. Sie können die Reihenfolge jedoch nicht mit diesem Schlüssel in einer Bedingung erzwingen. Anhand des obigen Beispiels gibt <b>User 1 (Benutzer 1)</b> eine Anforderung an AWS CloudFormation aus, das DynamoDB aufruft, das wiederum AWS KMS aufruft. Dies sind drei separate Anforderungen. Der letzte Aufruf von AWS KMS wird von Benutzer 1 <em>über</em> AWS CloudFormation und dann DynamoDB ausgeführt. </p>
        <div class="mediaobject">
             
                <img src="images/condition-key-calledvia-example-diagram.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                Beispiel mit aws:CalledVia&#xA;            " style="max-width:100%" />
             
             
        </div>
        <p>In diesem Fall enthält der Schlüssel <code class="code">aws:CalledVia</code> im Anforderungskontext <code class="code">cloudformation.amazonaws.com</code> und <code class="code">dynamodb.amazonaws.com</code> (in dieser Reihenfolge). Wenn Ihnen nur wichtig ist, dass der Aufruf über DynamoDB irgendwo in der Kette von Anforderungen erfolgt ist, können Sie diesen Bedingungsschlüssel in Ihrer Richtlinie verwenden. </p>
        <p>Die folgende Richtlinie ermöglicht beispielsweise das Verwalten des AWS KMS-Schlüssels mit dem Namen <code class="code">my-example-key</code>, jedoch nur, wenn es sich bei DynamoDB um einen der anfordernden Services handelt. Der Bedingungsoperator <code class="code"><a href="./reference_policies_multi-value-conditions.html#reference_policies_multi-key-or-value-conditions">ForAnyValue:StringEquals</a></code> stellt sicher, dass DynamoDB einer der aufrufenden Services ist. Wenn der Auftraggeber AWS KMS direkt aufruft, gibt die Bedingung <code class="code">false</code> zurück, und die Anforderung wird von dieser Richtlinie nicht zugelassen.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "KmsActionsIfCalledViaDynamodb",
            "Effect": "Allow",
            "Action": [
                "kms:Encrypt",
                "kms:Decrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey",
                "kms:DescribeKey"
            ],
            "Resource": "arn:aws:kms:<code class="replaceable">region</code>:<code class="replaceable">111122223333</code>:key/<code class="replaceable">my-example-key</code>",
            "Condition": <span>{</span>
                "ForAnyValue:StringEquals": <span>{</span>
                    "aws:CalledVia": ["dynamodb.amazonaws.com"]
                }
            }
        }
    ]
}</code></pre>
        <p>Mit den Schlüsseln <code class="code"><a href="#condition-keys-calledviafirst">aws:CalledViaFirst</a></code> und <code class="code"><a href="#condition-keys-calledviafirst">aws:CalledViaLast</a></code> können Sie auf Wunsch erzwingen, welcher Service den ersten oder letzten Aufruf in der Kette durchführt. Mit der folgenden Richtlinie können Sie beispielsweise den Schlüssel mit dem Namen <code class="code">my-example-key</code> in AWS KMS verwalten. Diese AWS KMS-Operationen sind nur zulässig, wenn mehrere Anforderungen in die Kette aufgenommen wurden. Die erste Anforderung muss über AWS CloudFormation und die letzte über DynamoDB erfolgen. Wenn andere Services mitten in der Kette Anforderungen ausgeben, ist die Operation trotzdem zulässig.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "KmsActionsIfCalledViaChain",
            "Effect": "Allow",
            "Action": [
                "kms:Encrypt",
                "kms:Decrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey",
                "kms:DescribeKey"
            ],
            "Resource": "arn:aws:kms:<code class="replaceable">region</code>:<code class="replaceable">111122223333</code>:key/<code class="replaceable">my-example-key</code>",
            "Condition": <span>{</span>
                "StringEquals": <span>{</span>
                    "aws:CalledViaFirst": "cloudformation.amazonaws.com",
                    "aws:CalledViaLast": "dynamodb.amazonaws.com"
                }
            }
        }
    ]
}</code></pre>
        <p>Die Schlüssel <code class="code"><a href="#condition-keys-calledviafirst">aws:CalledViaFirst</a></code> und <code class="code"><a href="#condition-keys-calledviafirst">aws:CalledViaLast</a></code> sind in der Anforderung vorhanden, wenn ein Service die Anmeldeinformationen eines IAM-Auftraggebers verwendet, um einen anderen Service aufzurufen. Sie geben die ersten und letzten Services an, die in der Kette von Anforderungen Aufrufe durchgeführt haben. Nehmen wir beispielsweise an, dass AWS CloudFormation einen anderen Service mit dem Namen <code class="code">X
                Service</code> aufruft, der DynamoDB aufruft, der wiederum AWS KMS aufruft. Der letzte Aufruf von AWS KMS wird von <code class="code">User 1</code> <em>via</em> AWS CloudFormation, dann <code class="code">X Service</code> und dann DynamoDB ausgeführt. Es wurde zuerst über AWS CloudFormation und zuletzt über DynamoDB aufgerufen. </p>
        <div class="mediaobject">
             
                <img src="images/condition-key-calledviafirstlast-example-diagram.png" class="aws-docs-img-whiteBg aws-docs-img-padding" alt="&#xA;                Beispiel mit aws:CalledViaFirst und aws:CalledViaLast&#xA;            " style="max-width:100%" />
             
             
        </div>
        
     
        <h2 id="condition-keys-calledviafirst">aws:CalledViaFirst</h2>
        <p>Funktioniert mit <a href="./reference_policies_elements_condition_operators.html#Conditions_String">Zeichenfolgenoperatoren</a>.</p>
        <p>Verwenden Sie diesen Schlüssel, um die Services in der Richtlinie mit dem <em><b>ersten Service</b></em> zu vergleichen, der im Auftrag des IAM-Auftraggebers (Benutzer oder Rolle) eine Anforderung ausgegeben hat. Weitere Informationen finden Sie unter <code class="code"><a href="#condition-keys-calledvia">aws:CalledVia</a></code>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Verfügbarkeit</b> – Dieser Schlüssel ist in der Anforderung vorhanden, wenn ein Service die Anmeldeinformationen eines IAM-Auftraggebers verwendet, um mindestens eine andere Anforderung an einen anderen Service auszugeben. Dieser Schlüssel ist nicht vorhanden, wenn der Service eine <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-role">Servicerolle</a> oder eine <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-linked-role">serviceverknüpfte Rolle</a> verwendet, um einen Aufruf im Auftrag des Auftraggebers durchzuführen. Dieser Schlüssel ist auch nicht vorhanden, wenn der Auftraggeber den Aufruf direkt durchführt.</p>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Einzelwertig</p>
            </li></ul></div>
     
        <h2 id="condition-keys-calledvialast">aws:CalledViaLast</h2>
        <p>Funktioniert mit <a href="./reference_policies_elements_condition_operators.html#Conditions_String">Zeichenfolgenoperatoren</a>.</p>
        <p>Verwenden Sie diesen Schlüssel, um die Services in der Richtlinie mit den <em>letzten Services</em> zu vergleichen, die im Auftrag des IAM-Auftraggebers (Benutzer oder Rolle) eine Anforderung ausgegeben haben. Weitere Informationen finden Sie unter <code class="code"><a href="#condition-keys-calledvia">aws:CalledVia</a></code>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Verfügbarkeit</b> – Dieser Schlüssel ist in der Anforderung vorhanden, wenn ein Service die Anmeldeinformationen eines IAM-Auftraggebers verwendet, um mindestens eine andere Anforderung an einen anderen Service auszugeben. Dieser Schlüssel ist nicht vorhanden, wenn der Service eine <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-role">Servicerolle</a> oder eine <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-linked-role">serviceverknüpfte Rolle</a> verwendet, um einen Aufruf im Auftrag des Auftraggebers durchzuführen. Dieser Schlüssel ist auch nicht vorhanden, wenn der Auftraggeber den Aufruf direkt durchführt.</p>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Einzelwertig</p>
            </li></ul></div>
     
        <h2 id="condition-keys-currenttime">aws:CurrentTime</h2>
        <p>Funktioniert mit <a href="./reference_policies_elements_condition_operators.html#Conditions_Date">Datumsoperatoren</a>.</p>
        <p>Verwenden Sie diesen Schlüssel, um das Datum und die Uhrzeit der Anforderung mit dem Datum und der Uhrzeit zu vergleichen, das bzw. die Sie in der Richtlinie angeben. Informationen zum Anzeigen einer Beispielrichtlinie, die diesen Bedingungsschlüssel verwendet, finden Sie unter <a href="./reference_policies_examples_aws-dates.html">AWS: Ermöglicht Zugriff basierend auf Datum und Uhrzeit</a>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>-<b>Verfügbarkeit</b> – Dieser Schlüssel ist immer im Anforderungskontext enthalten.</p>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Einzelwertig</p>
            </li></ul></div>
     
        <h2 id="condition-keys-ec2instancesourcevpc">aws:Ec2InstanceSourceVpc</h2>
        <p>Funktioniert mit <a href="./reference_policies_elements_condition_operators.html#Conditions_String">Zeichenfolgenoperatoren</a>.</p>
        <p>Dieser Schlüssel identifiziert die VPC, an die Amazon-EC2-IAM-Rollen-Anmeldeinformationen übermittelt wurden. Sie können diesen Schlüssel in einer Richtlinie mit dem <a href="#condition-keys-sourcevpc">aws:SourceVPC</a>globalen Schlüssel verwenden, um zu überprüfen, ob ein Anruf von einer VPC (<code class="code">aws:SourceVPC</code>) aus getätigt wird, die der VPC entspricht, an die die Anmeldeinformation übermittelt wurden (<code class="code">aws:Ec2InstanceSourceVpc</code>).</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Verfügbarkeit</b> – Dieser Schlüssel ist immer dann im Anforderungskontext enthalten, wenn der Anforderer Anforderungen mit einer Amazon EC2-Rollen-Anmeldeinformation signiert. Er kann in IAM-Richtlinien, Service-Control-Richtlinien, VPC-Endpunkt-Richtlinien und Ressourcenrichtlinien verwendet werden.</p>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Einzelwertig</p>
            </li></ul></div>
        <p>Dieser Schlüssel kann mit VPC-Identifikationswerten verwendet werden, ist jedoch am nützlichsten, wenn er als Variable in Kombination mit dem <code class="code">aws:SourceVpc</code>-Kontextschlüssel verwendet wird. Dieser <code class="code">aws:SourceVpc</code>-Kontextschlüssel ist nur dann im Anforderungskontext enthalten, wenn der Anforderer einen VPC-Endpunkt für die Anforderung verwendet. Die Verwendung von <code class="code">aws:Ec2InstanceSourceVpc</code> mit <code class="code">aws:SourceVpc</code> ermöglicht eine <code class="code">aws:Ec2InstanceSourceVpc</code> breitere Verwendung, da Werte verglichen werden, die sich normalerweise zusammen ändern.</p>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Anmerkung</h6></div><div class="awsdocs-note-text"><p>Dieser Bedingungsschlüssel ist in EC2-Classic nicht verfügbar.</p></div></div>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Sid": "RequireSameVPC",
      "Effect": "Deny",
      "Action": "*",
      "Resource": "*",
      "Condition": <span>{</span>
        "StringNotEquals": <span>{</span>
            "aws:SourceVpc": "$<span>{</span>aws:Ec2InstanceSourceVpc}"
        },
        "Null": <span>{</span>
          "ec2:SourceInstanceARN": "false"
        },
        "BoolIfExists": <span>{</span>
          "aws:ViaAWSService": "false"
        }
      }
    }
  ]
}</code></pre>
        <p>Im obigen Beispiel wird der Zugriff verweigert, wenn der <code class="code">aws:SourceVpc</code>-Wert nicht dem <code class="code">aws:Ec2InstanceSourceVpc</code>-Wert entspricht. Die Richtlinienerklärung ist nur auf Rollen beschränkt, die als Amazon EC2-Instance-Rollen verwendet werden, indem getestet wird, ob der <code class="code">ec2:SourceInstanceARN</code>-Bedingungsschlüssel vorhanden ist.</p>
        <p>Die Richtlinie nutzt <code class="code">aws:ViaAWSService</code>, um es AWS zu ermöglichen, Anforderungen zu autorisieren, wenn Anforderungen im Namen Ihrer Amazon EC2-Instance-Rollen gestellt werden. Wenn Sie beispielsweise eine Anforderung von einer Amazon EC2-Instance an einen verschlüsselten Amazon S3-Bucket stellen, ruft Amazon S3 in Ihrem Namen AWS KMS auf. Einige der Schlüssel sind nicht vorhanden, wenn die Anfrage an AWS KMS gestellt wird.</p>
     
        <h2 id="condition-keys-ec2instancesourceprivateip4">aws:Ec2InstanceSourcePrivateIPv4</h2>
        <p>Funktioniert mit <a href="./reference_policies_elements_condition_operators.html#Conditions_IPAddress">IP-Adressoperatoren</a>.</p>
        <p>Dieser Schlüssel identifiziert die private IPv4-Adresse der primären elastischen Netzwerk-Schnittstelle, an die die Amazon EC2-IAM-Rollen-Anmeldeinformation übermittelt wurde. Sie müssen diesen Bedingungsschlüssel zusammen mit dem zugehörigen Schlüssel <code class="code">aws:Ec2InstanceSourceVpc</code> verwenden, um sicherzustellen, dass Sie über eine global eindeutige Kombination aus VPC-ID und privater Quell-IP verfügen. Verwenden Sie diesen Schlüssel mit <code class="code">aws:Ec2InstanceSourceVpc</code>, um sicherzustellen, dass eine Anfrage von derselben privaten IP-Adresse aus gestellt wurde, an die die Anmeldeinformation übermittelt wurde.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Verfügbarkeit</b> – Dieser Schlüssel ist immer dann im Anforderungskontext enthalten, wenn der Anforderer Anforderungen mit einer Amazon EC2-Rollen-Anmeldeinformation signiert. Er kann in IAM-Richtlinien, Service-Control-Richtlinien, VPC-Endpunkt-Richtlinien und Ressourcenrichtlinien verwendet werden.</p>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Einzelwertig</p>
            </li></ul></div>
        <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Wichtig</h6></div><div class="awsdocs-note-text"><p>Dieser Schlüssel sollte nicht alleine in einer <code class="code">Allow</code>-Anweisung verwendet werden. Private IP-Adressen sind per Definition nicht global eindeutig. Sie sollten den <code class="code">aws:Ec2InstanceSourceVpc</code>-Schlüssel jedes Mal verwenden, wenn Sie den <code class="code">aws:Ec2InstanceSourcePrivateIPv4</code>-Schlüssel verwenden, um die VPC anzugeben, von der aus Ihre Amazon EC2-Instance-Anmeldeinformation verwendet werden kann.</p></div></div>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Anmerkung</h6></div><div class="awsdocs-note-text"><p>Dieser Bedingungsschlüssel ist in EC2-Classic nicht verfügbar.</p></div></div>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Effect": "Deny",
            "Action":  "*",
            "Resource": "*",
            "Condition": <span>{</span>
                "StringNotEquals": <span>{</span>
                    "aws:Ec2InstanceSourceVpc": "$<span>{</span>aws:SourceVpc}"
                },                
                "Null": <span>{</span>
                    "ec2:SourceInstanceARN": "false"
                },
                "BoolIfExists": <span>{</span>
                    "aws:ViaAWSService": "false"
                }
            }
        },
        <span>{</span>
            "Effect": "Deny",
            "Action":  "*",
            "Resource": "*",
            "Condition": <span>{</span>
                "StringNotEquals": <span>{</span>
                    "aws:Ec2InstanceSourcePrivateIPv4": "$<span>{</span>aws:VpcSourceIp}"
                },                               
                "Null": <span>{</span>
                    "ec2:SourceInstanceARN": "false"
                },
                "BoolIfExists": <span>{</span>
                    "aws:ViaAWSService": "false"
                }
            }
        }
    ]
}</code></pre>
     
        <h2 id="condition-keys-epochtime">aws:EpochTime</h2>
        <p>Funktioniert mit <a href="./reference_policies_elements_condition_operators.html#Conditions_Date">Datumsoperatoren</a> oder <a href="./reference_policies_elements_condition_operators.html#Conditions_Numeric">numerischen Operatoren</a>.</p>
        <p>Verwenden Sie diesen Schlüssel, um das Datum und die Uhrzeit der Anforderung in Epochen- oder Unix-Zeit mit dem Wert zu vergleichen, den Sie in der Richtlinie angeben. Dieser Schlüssel akzeptiert auch die Anzahl der Sekunden, die seit dem 1. Januar 1970 verstrichen sind. </p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Verfügbarkeit</b> – Dieser Schlüssel ist immer im Anforderungskontext enthalten.</p>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Einzelwertig</p>
            </li></ul></div>
     
        <h2 id="condition-keys-federatedprovider">aws:FederatedProvider</h2>
        <p>Funktioniert mit <a href="./reference_policies_elements_condition_operators.html#Conditions_String">Zeichenfolgenoperatoren</a>.</p>
        <p>Verwenden Sie diesen Schlüssel, um die Auftraggeber-ID des Anforderers (IdP) mit der ID zu vergleichen, die Sie in der Richtlinie angeben. Dies bedeutet, dass eine IAM-Rolle annimmt, die <code class="code">AssumeRoleWithWebIdentity</code>- oder <code class="code">AssumeRoleWithSAML</code>-AWS STS-Produktion zu verwenden. Wenn die temporären Anmeldeinformationen der resultierenden Rollensitzung verwendet werden, um eine Anforderung zu stellen, identifiziert der Anforderungskontext den IdP, der die ursprüngliche Verbundidentität authentifiziert hat.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Verfügbarkeit</b> - Dieser Schlüssel ist vorhanden, wenn der Prinzipal ein Rollensitzungsprinzipal ist und diese Sitzung mit einem Drittanbieter-Identitätsanbieter ausgestellt wurde. </p>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Einzelwertig</p>
            </li></ul></div>
        <p>Wenn der Benutzer beispielsweise über Amazon Cognito authentifiziert wurde, enthält der Anforderungskontext den Wert <code class="code">cognito-identity.amazonaws.com</code>. Wenn der Benutzer über Login with Amazon authentifiziert wurde, enthält der Anforderungskontext den Wert <code class="code">www.amazon.com</code>.</p>
        <p>Sie können jeden einwertigen Bedingungsschlüssel als <a href="./reference_policies_variables.html">Variable</a> verwenden. Im folgenden Beispiel verwendet die ressourcenbasierte Richtlinie <code class="code">aws:FederatedProvider</code>-Schlüssel als Richtlinienvariable im ARN einer Ressource. Diese Richtlinie ermöglicht es Benutzern, die sich über einen Identitätsanbieter authentifiziert haben, Objekte aus einem Amazon-S3-Bucket mit einem für den ausstellenden Identitätsanbieter spezifischen Pfad abzurufen.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": <span>{</span>
    "Effect": "Allow",
    "Principal": "*",
    "Action": "s3:GetObject",
    "Resource": "arn:aws:s3:::<code class="replaceable"><code class="replaceable">DOC-EXAMPLE-BUCKET</code></code>/$<span>{</span>aws:FederatedProvider}/*"
  }
}</code></pre>
     
        <h2 id="condition-keys-multifactorauthage">aws:MultiFactorAuthAge</h2>
        <p>Funktioniert mit <a href="./reference_policies_elements_condition_operators.html#Conditions_Numeric">nummerischen Operatoren</a>.</p>
        <p>Verwenden Sie diesen Schlüssel, um die Anzahl der Sekunden, die seit dem Zeitpunkt, zu dem der anfordernde Auftraggeber per MFA autorisiert wurde, verstrichen sind mit der Anzahl, die Sie in der Richtlinie angeben, zu vergleichen. Weitere Informationen zu MFA finden Sie unter <a href="./id_credentials_mfa.html">Verwenden von Multi-Factor Authentication (MFA) in AWS</a>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Verfügbarkeit</b> – Dieser Schlüssel ist nur dann im Anforderungskontext enthalten, wenn der Auftraggeber, von dem der Aufruf stammte, per MFA authentifiziert wurde. Wenn MFA nicht verwendet wurde, ist der Schlüssel nicht vorhanden.</p>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Einzelwertig</p>
            </li></ul></div>
     
        <h2 id="condition-keys-multifactorauthpresent">aws:MultiFactorAuthPresent</h2>
        <p>Arbeitet mit <a href="./reference_policies_elements_condition_operators.html#Conditions_Boolean">booleschen Operatoren</a>.</p>
        <p>Verwenden Sie diesen Schlüssel, um zu überprüfen, ob die Multi-Factor Authentication (MFA) zur Validierung der temporären Sicherheitsanmeldeinformationen verwendet wurde, über die die Anforderung gestellt wurde.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – Dieser Schlüssel ist nur dann im Anforderungskontext enthalten, wenn der Auftraggeber temporäre Anmeldeinformationen für die Anforderung verwendet. Der Schlüssel ist nicht in AWS-CLI-, AWS-API- oder AWS-SDK-Anforderungen enthalten, die mit langfristigen Anmeldeinformationen gestellt wurden. </p>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Einzelwertig</p>
            </li></ul></div>
        <p>Temporäre Anmeldeinformationen werden zur Authentifizierung von IAM-Rollen, Verbundbenutzern, IAM-Benutzern mit temporären Token von <code class="code">sts:GetSessionToken</code> und Benutzern der AWS Management Console. IAM-Benutzerzugriffsschlüssel sind langfristige Berechtigungsnachweise, aber in einigen Fällen erstellt AWS temporäre Berechtigungsnachweise im Namen von IAM-Benutzern, um Operationen durchzuführen. In diesen Fällen ist der Schlüssel <code class="code">aws:MultiFactorAuthPresent</code> in der Anforderung vorhanden und auf einen Wert von <code class="code">false</code> gesetzt werden. Es gibt zwei häufige Fälle, in denen dies passieren kann:</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>IAM-Benutzer in der AWS Management Console verwenden unwissentlich temporäre Anmeldeinformationen. Benutzer melden sich mit ihrem Benutzernamen und Passwort bei der Konsole an. Dabei handelt es sich um langfristige Anmeldeinformationen. Im Hintergrund erstellt die Konsole jedoch temporäre Anmeldeinformationen für den Benutzer. </p>
            </li><li class="listitem">
                <p>Wenn ein IAM-Benutzer einen Aufruf an einen AWS-Service sendet, verwendet der Service die Anmeldeinformationen des Benutzers erneut, um eine weitere Anforderung an einen anderen Service zu senden. Zum Beispiel, wenn Sie Athena aufrufen, um auf einen Amazon S3-Bucket zuzugreifen, oder wenn Sie AWS CloudFormation verwenden, um eine Amazon EC2-Instance zu erstellen. Für die nachfolgende Anforderung verwendet AWS temporäre Anmeldeinformationen.</p>
            </li></ul></div>
        <p>Informationen darüber, welche Services die Verwendung von temporären Anmeldeinformationen unterstützen, finden Sie unter <a href="./reference_aws-services-that-work-with-iam.html">AWS-Services, die mit IAM funktionieren</a>.</p>
        <p>Der <code class="code">aws:MultiFactorAuthPresent</code>-Schlüssel ist nie vorhanden, wenn ein API- oder CLI-Befehl mit langfristigen Anmeldeinformationen wie Zugriffsschlüsselpaare eines Benutzers aufgerufen wird. Wir empfehlen daher, beim Prüfen dieses Schlüssels die Versionen <code class="code"><a href="./reference_policies_elements_condition_operators.html#Conditions_IfExists">...IfExists</a></code> der Bedingungsoperatoren zu verwenden.</p>
        <p>Beachten Sie, dass das folgende <code class="code">Condition</code>-Element <em><b>keine</b></em> zuverlässige Methode ist, um zu überprüfen, ob eine Anforderung über MFA authentifiziert wird.</p>
        <pre class="programlisting"><div class="code-btn-container"></div><code class="json ">#####   WARNING: NOT RECOMMENDED   #####
"Effect" : "Deny",
"Condition" : <span>{</span> "Bool" : <span>{</span> "aws:MultiFactorAuthPresent" : "false" } }</code></pre>
        <p>Diese Kombination aus <code class="code">Deny</code> Effekt <code class="code">Bool</code>-Element und <code class="code">false</code>-Wert verweigert Anforderungen, die mit MFA authentifiziert werden können, es aber nicht waren. Dies gilt nur für temporäre Anmeldeinformationen, die die Verwendung von MFA unterstützen. Diese Anweisung verweigert nicht den Zugriff auf Anforderungen, die mit langfristigen Anmeldeinformationen gestellt wurden, oder auf Anforderungen, die per MFA authentifiziert wurden. Verwenden Sie dieses Beispiel mit Vorsicht, da seine Logik kompliziert ist und nicht prüft, ob die MFA-Authentifizierung tatsächlich verwendet wurde. </p>
        <p>Verwenden Sie auch nicht die Kombination aus <code class="code">Deny</code> Effekt <code class="code">Null</code>-Element und <code class="code">true</code>, da sie sich genauso verhält und die Logik noch komplizierter ist.</p>
         
            <h6>Empfohlene Kombination</h6>
            <p>Wir empfehlen Ihnen, den Operator <a href="./reference_policies_elements_condition_operators.html#Conditions_IfExists">BoolIfExists</a> zu verwenden, um zu überprüfen, ob eine Anforderung über MFA authentifiziert wird.</p>
         
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Effect" : "Deny",
"Condition" : <span>{</span> "BoolIfExists" : <span>{</span> "aws:MultiFactorAuthPresent" : "false" } }</code></pre>
        <p>Diese Kombination aus <code class="code">Deny</code>, <code class="code">BoolIfExists</code> und <code class="code">false</code> verweigert Anforderungen, die nicht mit MFA authentifiziert wurden. Insbesondere lehnt sie Anforderungen von temporären Anmeldeinformationen ab, die keine MFA umfassen. Sie lehnt auch Anforderungen ab, die mit langfristigen Anmeldeinformationen gestellt werden, beispielsweise AWS CLI- oder AWS-API-Operationen über Zugriffsschlüssel. Der Operator <code class="code">*IfExists</code> prüft das Vorhandensein des <code class="code">aws:MultiFactorAuthPresent</code>-Schlüssels und ob er vorhanden sein könnte oder nicht, wie durch seine Existenz angezeigt wird. Verwenden Sie diesen Operator, wenn Sie eine Anforderung ablehnen möchten, die nicht über die MFA authentifiziert wird. Diese Methode ist sicherer, kann jedoch jeglichen Code oder Skripte unterbrechen, die Zugriffsschlüssel für den Zugriff auf die AWS CLI- oder AWS-API verwenden. </p>
         
            <h6>Alternative Kombinationen</h6>
            <p>Sie können auch den <a href="./reference_policies_elements_condition_operators.html#Conditions_IfExists">BoolIfExists</a>-Operator verwenden, um MFA-authentifizierte Anforderungen und AWS CLI- oder AWS-API-Anforderungen mit langfristigen Anmeldeinformationen zuzulassen.</p>
         
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">"Effect" : "Allow",
"Condition" : <span>{</span> "BoolIfExists" : <span>{</span> "aws:MultiFactorAuthPresent" : "true" } }</code></pre>
        <p>Diese Bedingung ist erfüllt, wenn der Schlüssel existiert und vorhanden ist <b>oder</b> wenn der Schlüssel nicht vorhanden ist. Diese Kombination aus <code class="code">Allow</code>, <code class="code">BoolIfExists</code>, und <code class="code">true</code> lässt Anforderungen zu, die mit MFA authentifiziert werden, oder Anforderungen, die nicht mit MFA authentifiziert werden können. Das bedeutet, dass AWS CLI-,AWS-API- und AWS-SDK-Operationen zulässig sind, wenn der Anforderer seine langfristigen Zugriffsschlüssel verwendet. Diese Kombination erlaubt keine Anforderungen von temporären Anmeldeinformationen, die MFA umfassen könnten, aber keine MFA enthalten. </p>
        <p>Wenn Sie eine Richtlinie mit dem visuellen Editor der IAM-Konsole erstellen und <b>MFA required</b> (MFA erforderlich), auswählen, wird diese Kombination angewendet. Diese Einstellung erfordert zwar MFA für den Konsolenzugriff, ermöglicht jedoch den programmgesteuerten Zugriff ohne MFA. </p>
        <p>Alternativ können Sie den <code class="code">Bool</code>-Operator verwenden, damit programmgesteuerte Anforderungen und Konsolenanforderungen nur dann zugelassen werden, wenn sie mit MFA authentifiziert werden.</p>
        <pre class="programlisting"><div class="code-btn-container"></div><code class="json ">"Effect" : "Allow",
"Condition" : <span>{</span> "Bool" : <span>{</span> "aws:MultiFactorAuthPresent" : "true" } }</code></pre>
        <p>Diese Kombination aus <code class="code">Allow</code>, <code class="code">Bool</code> und <code class="code">true</code> lässt nur mit MFA authentifizierte Anforderungen zu. Dies gilt nur für temporäre Anmeldeinformationen, die die Verwendung von MFA unterstützen. Diese Anweisung erlaubt keinen Zugriff auf Anforderungen, die mit langfristigen Zugriffsschlüsseln gestellt wurden, oder auf Anforderungen, die mit temporären Anmeldeinformationen ohne MFA durchgeführt wurden. </p>
        <p>Verwenden Sie <b><em>keine</em></b> Richtlinie wie die folgende Beispielrichtlinie, um auf das Vorhandensein des MFA-Schlüssels hin zu prüfen:</p>
        <pre class="programlisting"><div class="code-btn-container"></div><code class="json ">#####   WARNING: USE WITH CAUTION   #####

"Effect" : "Allow",
"Condition" : <span>{</span> "Null" : <span>{</span> "aws:MultiFactorAuthPresent" : "false" } }</code></pre>
        <p>Diese Kombination aus <code class="code">Allow</code> Effekt, <code class="code">Null</code>-Element und <code class="code">false</code>-Wert erlaubt nur Anforderungen, die mit MFA authentifiziert werden können, unabhängig davon, ob die Anforderung tatsächlich authentifiziert ist. Dies ermöglicht alle Anforderungen, die mit temporären Anmeldeinformationen gestellt werden, und verweigert den Zugriff mit langfristigen Anmeldeinformationen. Verwenden Sie dieses Beispiel mit Vorsicht, da es nicht prüft, ob die MFA-Authentifizierung tatsächlich verwendet wurde. </p>
     
        <h2 id="condition-keys-principalaccount">aws:PrincipalAccount</h2>
        <p>Funktioniert mit <a href="./reference_policies_elements_condition_operators.html#Conditions_String">Zeichenfolgenoperatoren</a>.</p>
        <p>Verwenden Sie diesen Schlüssel, um das Konto, zu dem der anfordernde Auftraggeber gehört, mit der Konto-ID zu vergleichen, die Sie in der Richtlinie angeben. Bei anonymen Anforderungen gibt der Anforderungskontext <code class="code">anonymous</code> zurück.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Verfügbarkeit</b> – Dieser Schlüssel wird in den Anforderungskontext für alle Anforderungen, einschließlich anonymer Anforderungen, aufgenommen.</p>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Einzelwertig</p>
            </li></ul></div>
        <p>Im folgenden Beispiel wird der Zugriff verweigert, mit Ausnahme von Auftraggebern mit der Kontonummer <code class="code">123456789012</code>.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Sid": "DenyAccessFromPrincipalNotInSpecificAccount",
      "Action": "<code class="replaceable">service</code>:*",
      "Effect": "Deny",
      "Resource": [
        "arn:aws:<code class="replaceable">service:region:accountID:resource</code>"
      ],
      "Condition": <span>{</span>
        "StringNotEquals": <span>{</span>
          "aws:PrincipalAccount": [
            "123456789012"
          ]
        }
      }
    }
  ]
}
        </code></pre>

     
        <h2 id="condition-keys-principalarn">aws:PrincipalArn</h2>
        <p>Funktioniert mit <a href="./reference_policies_elements_condition_operators.html#Conditions_ARN">ARN-Operatoren</a> und <a href="./reference_policies_elements_condition_operators.html#Conditions_String">Zeichenfolgen-Operatoren</a>.</p>
        <p>Verwenden Sie diesen Schlüssel, um den <a href="./reference_identifiers.html#identifiers-arns">Amazon-Ressourcennamen</a> (ARN) des Auftraggebers, von dem die Anforderung stammt, mit dem ARN zu vergleichen, den Sie in der Richtlinie angeben. Bei IAM-Rollen gibt der Anforderungskontext den ARN der Rolle zurück, nicht den ARN des Benutzers, der die Rolle übernommen hat. </p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Verfügbarkeit</b> – Dieser Schlüssel ist im Anforderungskontext aller signierten Anforderungen enthalten. Anonyme Anforderungen enthalten diesen Schlüssel nicht. In diesem Bedingungsschlüssel können Sie die folgenden Arten von Prinzipals angeben: </p>
                <div class="itemizedlist">
                     
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>IAM role (IAM-Rolle)</p>
                    </li><li class="listitem">
                        <p>IAM-Benutzer</p>
                    </li><li class="listitem">
                        <p>AWS STS-Verbundbenutzersitzung</p>
                    </li><li class="listitem">
                        <p>AWS-Konto-Stammbenutzer</p>
                    </li></ul></div>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Einzelwertig</p>
            </li></ul></div>
        <p>Die folgende Liste zeigt den Anfragekontextwert, der für verschiedene Typen von Prinzipals zurückgegeben wird, die Sie im <code class="code">aws:PrincipalArn</code>-Bedingungsschlüssel angeben können:</p>
        <div class="itemizedlist">
             
             
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>IAM-Rolle</b> – Der Anforderungskontext enthält den folgenden Wert für den Bedingungsschlüssel <code class="code">aws:PrincipalArn</code>. Geben Sie den ARN der angenommenen Rollensitzung nicht als Wert für diesen Bedingungsschlüssel an. Weitere Informationen über die angenommene Rollen des Sitzungs-Prinzipals finden Sie unter <a href="./reference_policies_elements_principal.html#principal-role-session">Rollensitzungsgsprinzipale</a>.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="code" copy="true">arn:aws:iam::123456789012:role/role-name</code></code></pre>
            </li><li class="listitem">
                <p><b>IAM-Benutzer</b> – Der Anforderungskontext enthält den folgenden Wert für den Bedingungsschlüssel <code class="code">aws:PrincipalArn</code>.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="code" copy="true">arn:aws:iam::123456789012:user/<code class="replaceable">user-name</code></code></code></pre>
            </li><li class="listitem">
                <p><b>AWS STS-Verbundbenutzersitzungen</b> – Der Anforderungskontext enthält den folgenden Wert für den Bedingungsschlüssel <code class="code">aws:PrincipalArn</code>.</p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="code" copy="true">arn:aws:sts::123456789012:federated-user/<code class="replaceable">user-name</code></code></code></pre>
            </li><li class="listitem">
                <p><b>AWS-Konto-Root-Benutzer</b> – Der Anforderungskontext enthält den folgenden Wert für den Bedingungsschlüssel <code class="code">aws:PrincipalArn</code>. Wenn Sie den Root-Benutzer-ARN als Wert für den Bedingungsschlüssel <code class="code">aws:PrincipalArn</code> angeben, werden die Berechtigungen nur für den Root-Benutzer des AWS-Konto eingeschränkt. Dies unterscheidet sich von der Angabe des Root-Benutzer-ARN im Prinzipal-Element einer ressourcenbasierten Richtlinie, die die Autorität an die AWS-Konto delegiert. Weitere Informationen zur Angabe des Root-Benutzer-ARN im Prinzipal-Element einer ressourcenbasierten Richtlinie finden Sie unter <a href="./reference_policies_elements_principal.html#principal-accounts">AWS-Konto-Prinzipale</a>. </p>
                <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight"><code class="code" copy="true">arn:aws:iam::123456789012:root</code></code></pre>
                <p>Sie können den Root-Benutzer-ARN als Wert für den Bedingungsschlüssel <code class="code">aws:PrincipalArn</code> in AWS Organizations-Service-Kontrollrichtlinien (SCPs) angeben. SCPs sind eine Art von Organisationsrichtlinien, die zum Verwalten von Berechtigungen in Ihrer Organisation verwendet werden und sich nur auf Mitgliedskonten in der Organisation auswirken. Ein SCP beschränkt die Berechtigungen für IAM-Benutzer und -Rollen in Mitgliedskonten, einschließlich des Stammverzeichnisses des Mitgliedskonten. Weitere Informationen zu den Auswirkungen von SCPs auf Berechtigungen finden Sie unter <a href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_policies_scps.html#scp-effects-on-permissions">SCP-Auswirkungen auf Berechtigungen</a> im <em>Benutzerhandbuch für Organisationen</em>.</p>
            </li></ul></div>
        
     
        <h2 id="condition-keys-principalisawsservice">AWS:PrincipalisawsService</h2>
        <p>Arbeitet mit <a href="./reference_policies_elements_condition_operators.html#Conditions_Boolean">booleschen Operatoren</a>.</p>
        <p>Verwenden Sie diesen Schlüssel, um zu prüfen, ob der Aufruf Ihrer Ressource direkt von einem AWS-<a href="./reference_policies_elements_principal.html#principal-services">Dienstauftraggeber</a> vorgenommen wird. Zum Beispiel verwendet AWS CloudTrail den Service-Prinzipal <code class="code">cloudtrail.amazonaws.com</code>, um Protokolle in Ihr Amazon S3-Bucket zu schreiben. Der Anforderungskontextschlüssel wird auf true festgelegt, wenn ein Dienst einen Dienstauftraggeber verwendet, um eine direkte Aktion für Ihre Ressourcen auszuführen. Der Kontextschlüssel wird auf false gesetzt, wenn der Dienst die Anmeldeinformationen eines IAM-Auftraggeber verwendet, um eine Anforderung im Namen des Auftraggeber zu stellen. Sie wird auch verweigert, wenn der Service eine <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-role">Servicerolle</a> oder eine <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-linked-role">serviceverknüpfte Rolle</a> verwendet, um einen Aufruf im Auftrag des Auftraggebers durchzuführen.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Verfügbarkeit</b> – Dieser Schlüssel ist im Anforderungskontext aller signierten API-Anforderungen vorhanden, dieAWS-Anmeldeinformationen. Anonyme Anforderungen enthalten diesen Schlüssel nicht.</p>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Einzelwertig</p>
            </li></ul></div>
        <p>Sie können diesen Bedingungsschlüssel verwenden, um den Zugriff auf Ihre vertrauenswürdigen Identitäten und erwarteten Netzwerkstandorte zu beschränken und gleichzeitig den Zugriff auf AWS-Services.</p>
        <p>Im folgenden Beispiel für eine Amazon S3-Bucket-Richtlinie wird der Zugriff auf den Bucket eingeschränkt, es sei denn, die Anforderung stammt von <code class="code">vpc-111bbb22</code> oder von einem Dienstauftraggeber, wie CloudTrail.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Sid": "Expected-network+service-principal",
      "Effect": "Deny",
      "Principal": "*",
      "Action": "s3:PutObject",
      "Resource": "arn:aws:s3:::<code class="replaceable"><code class="replaceable">DOC-EXAMPLE-BUCKET1</code></code>/AWSLogs/<code class="replaceable">AccountNumber</code>/*",
      "Condition": <span>{</span>
        "StringNotEqualsIfExists": <span>{</span>
          "aws:SourceVpc": "vpc-111bbb22"
        },
        "BoolIfExists": <span>{</span>
          "aws:PrincipalIsAWSService": "false"
        }
      }
    }
  ]
}</code></pre>
        
        <p>Im folgenden Video erfahren Sie mehr darüber, wie Sie den Bedingungsschlüssel <code class="code">aws:PrincipalIsAWSService</code> in einer Richtlinie verwenden können.</p>
        <div class="mediaobject">
             
                <iframe width="720" height="330" frameborder="0" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" sandbox="allow-scripts allow-same-origin allow-popups" src="https://www.youtube-nocookie.com/embed/gv-_H8a42G4"></iframe>
             
             
        </div>
        
        
        
     
        <h2 id="condition-keys-principalorgid">aws:PrincipalOrgID</h2>
        <p>Funktioniert mit <a href="./reference_policies_elements_condition_operators.html#Conditions_String">Zeichenfolgenoperatoren</a>.</p>
        <p>Verwenden Sie diesen Schlüssel, um den Bezeichner der Organisation in AWS Organizations, zu der der anfordernde Auftraggeber gehört, mit dem in der Richtlinie angegebenen zu vergleichen.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Verfügbarkeit</b> – Dieser Schlüssel ist nur dann im Anforderungskontext enthalten, wenn der Auftraggeber Mitglied einer Organisation ist. Anonyme Anforderungen enthalten diesen Schlüssel nicht.</p>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Einzelwertig</p>
            </li></ul></div>
        <p>Dieser globale Schlüssel stellt eine Alternative zum Auflisten aller Konto-IDs für alle AWS-Konten in einer Organisation dar. Sie können diesen Bedingungsschlüssel verwenden, um das Angeben des Elements <code class="code">Principal</code> in einer <a href="./access_policies_identity-vs-resource.html">resource-based-Richtlinie</a> zu vereinfachen. Sie können die <a href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_org_details.html">Organisations-ID</a> im Bedingungselement angeben. Wenn Sie Konten hinzufügen und entfernen, schließen Richtlinien, die den <code class="code">aws:PrincipalOrgID</code>-Schlüssel enthalten, automatisch die richtigen Konten ein und müssen nicht manuell aktualisiert werden.</p>
        <p>Mit der folgenden Amazon S3-Bucket-Richtlinie können beispielsweise Mitglieder aller Konten in der Organisation <code class="code">o-xxxxxxxxxxx</code> ein Objekt in den Bucket <code class="code">policy-ninja-dev</code> einfügen. </p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="JSON "> <span>{</span>
  "Version": "2012-10-17",
  "Statement": <span>{</span>
    "Sid": "AllowPutObject",
    "Effect": "Allow",
    "Principal": "*",
    "Action": "s3:PutObject",
    "Resource": "arn:aws:s3:::policy-ninja-dev/*",
    "Condition": <span>{</span>"StringEquals":
      <span>{</span>"aws:PrincipalOrgID":"o-xxxxxxxxxxx"}
    }
  }
}</code></pre>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Anmerkung</h6></div><div class="awsdocs-note-text"><p>Diese globale Bedingung gilt auch für das Masterkonto einer AWS-Organisation. Diese Richtlinie verhindert, dass alle Hauptbenutzer außerhalb der angegebenen Organisation auf den Amazon-S3-Bucket zugreifen können. Dies umfasst alle AWS-Services, die mit Ihren internen Ressourcen interagieren, wie AWS CloudTrailSenden von Protokolldaten an Ihre Amazon-S3-Buckets. Um zu erfahren, wie Sie sicher Zugriff auf AWS-Services gewähren können, siehe <a href="#condition-keys-principalisawsservice">AWS:PrincipalisawsService</a>.</p></div></div>
        <p>Weitere Informationen zu AWS Organizations finden Sie unter <a href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_introduction.html">Was ist AWS Organizations?</a> im <em>AWS Organizations-Leitfaden</em>.</p>
     
        <h2 id="condition-keys-principalorgpaths">aws:PrincipalOrgPaths</h2>
        <p>Funktioniert mit <a href="./reference_policies_elements_condition_operators.html#Conditions_String">Zeichenfolgenoperatoren</a>.</p>
        <p>Verwenden Sie diesen Schlüssel, um den AWS Organizations-Pfad für den Auftraggeber zu vergleichen, der die Anforderung an den Pfad in der Richtlinie stellt. Dieser Prinzipal kann ein IAM-Benutzer, eine IAM-Rolle, ein Verbundbenutzer oder ein Root-Benutzer des AWS-Kontos sein. In einer Richtlinie stellt dieser Bedingungsschlüssel sicher, dass der Anforderer ein Kontomitglied innerhalb des angegebenen Organisationsstammes oder der Organisationseinheiten in AWS Organizations ist. Ein AWS Organizations-Pfad ist eine Textdarstellung der Struktur einer Organizations-Entität. Weitere Hinweise zum Verwenden und Verstehen von Pfaden finden Sie unter <a href="./access_policies_access-advisor-view-data-orgs.html#access_policies_access-advisor-viewing-orgs-entity-path">Der AWS Organizations-Entitätspfad</a>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Verfügbarkeit</b> – Dieser Schlüssel ist nur dann im Anforderungskontext enthalten, wenn der Auftraggeber Mitglied einer Organisation ist. Anonyme Anforderungen enthalten diesen Schlüssel nicht.</p>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Mehrwertig</p>
            </li></ul></div>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Anmerkung</h6></div><div class="awsdocs-note-text"><p>Organisations-IDs sind global eindeutig, Organisationeinheiten-IDs und Stamm-IDs sind jedoch nur innerhalb einer Organisation eindeutig. Dies bedeutet, dass keine zwei Organisationen dieselbe Organisations-ID verwenden. Eine andere Organisation verfügt jedoch möglicherweise über eine Organisationseinheit oder ein Stammverzeichnis mit derselben ID wie Ihre. Es wird empfohlen, immer die Organisations-ID anzugeben, wenn Sie eine Organisationseinheit oder ein Stammverzeichnis angeben.</p></div></div>
        
        <p>Beispielsweise gibt die folgende Bedingung <code class="code">true</code> für Auftraggeber in Konten zurück, die direkt an die <code class="code">ou-ab12-22222222</code>-Organisationseinheit angefügt sind, aber nicht an die untergeordneten Organisationseinheiten.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">"Condition" : <span>{</span> "ForAnyValue:StringEquals" : <span>{</span>
     "aws:PrincipalOrgPaths":["o-a1b2c3d4e5/r-ab12/ou-ab12-11111111/ou-ab12-22222222/"]
}}</code></pre>
        
        <p>Die folgende Bedingung gibt <code class="code">true</code> für Auftraggeber in einem Konto zurück, das direkt an die Organisationseinheit oder eine ihrer untergeordneten Organisationseinheiten angefügt ist. Wenn Sie einen Platzhalter hinzufügen, müssen Sie den <code class="code">StringLike</code>-Bedingungsoperator verwenden.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">"Condition" : <span>{</span> "ForAnyValue:StringLike" : <span>{</span>
     "aws:PrincipalOrgPaths":["o-a1b2c3d4e5/r-ab12/ou-ab12-11111111/ou-ab12-22222222/*"]
}}</code></pre>
        <p>Die folgende Bedingung gibt <code class="code">true</code> für Auftraggeber in einem Konto zurück, das direkt an die Organisationseinheit oder eine ihrer untergeordneten Organisationseinheiten angefügt ist. Die vorherige Bedingung gilt für die Organisationseinheit oder für untergeordnete Elemente. Die folgende Bedingung gilt nur für untergeordnete Elemente (und für untergeordnete Elemente dieser Kinder).</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">"Condition" : <span>{</span> "ForAnyValue:StringLike" : <span>{</span>
     "aws:PrincipalOrgPaths":["o-a1b2c3d4e5/r-ab12/ou-ab12-11111111/ou-ab12-22222222/ou-*"]
}}</code></pre>
        <p>Die folgende Bedingung ermöglicht den Zugriff für jeden Auftraggeber in der <code class="code">o-a1b2c3d4e5</code>-Organisation, unabhängig von der übergeordneten Organisationseinheit.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">"Condition" : <span>{</span> "ForAnyValue:StringLike" : <span>{</span>
     "aws:PrincipalOrgPaths":["o-a1b2c3d4e5/*"]
}}</code></pre>
        <p><code class="code">aws:PrincipalOrgPaths</code> ist ein mehrwertiger Bedingungsschlüssel. Mehrwertige Bedingungsschlüssel können im Anforderungskontext mehrere Werte haben. Wenn Sie mehrere Werte mit dem <code class="code">ForAnyValue</code>-Bedingungsoperator verwenden, muss der Pfad des Auftraggebers mit einem der in der Richtlinie aufgeführten Pfade übereinstimmen. Weitere Hinweise zu mehrwertigen Bedingungsschlüsseln finden Sie unter <a href="./reference_policies_multi-value-conditions.html#reference_policies_multi-key-or-value-conditions">Verwenden mehrerer Schlüssel und Werte</a>.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">    "Condition": <span>{</span>
        "ForAnyValue:StringLike": <span>{</span>
            "aws:PrincipalOrgPaths": [
                "o-a1b2c3d4e5/r-ab12/ou-ab12-33333333/*",
                "o-a1b2c3d4e5/r-ab12/ou-ab12-22222222/*"
            ]
        }
    }</code></pre>
     
        <h2 id="condition-keys-principalservicename">AWS:PrincipalServiceName</h2>
        <p>Funktioniert mit <a href="./reference_policies_elements_condition_operators.html#Conditions_String">Zeichenfolgenoperatoren</a>.</p>
        <p>Verwenden Sie diesen Schlüssel, um den <a href="./reference_policies_elements_principal.html#principal-services">Dienstauftraggeber</a>-Namen in der Richtlinie mit dem Dienstauftraggeber zu vergleichen, der Anforderungen an Ihre Ressourcen stellt. Sie können diesen Schlüssel verwenden, um zu überprüfen, ob dieser Aufruf von einem bestimmten Dienstauftraggeber erfolgt. Wenn ein Dienstauftraggeber eine direkte Anforderung an Ihre Ressource stellt, enthält der <code class="code">aws:PrincipalServiceName</code>-Schlüssel den Namen des Dienstauftraggebers. Beispielsweise ist AWS CloudTrail der <code class="code">cloudtrail.amazonaws.com</code>-CodeArtifact-Dienstauftraggeber.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Verfügbarkeit</b> – Dieser Schlüssel ist in der Anforderung vorhanden, wenn der Aufruf durch eine erfolgtAWSDienstauftraggeber. Dieser Schlüssel ist in keiner anderen Situation vorhanden, einschließlich der folgenden:</p>
                <div class="itemizedlist">
                     
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>Sie wird auch verweigert, wenn der Service eine <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-role">Servicerolle</a> oder eine <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-linked-role">serviceverknüpfte Rolle</a> verwendet, um einen Aufruf im Auftrag des Auftraggebers durchzuführen.</p>
                    </li><li class="listitem">
                        <p>Wenn der Dienst die Anmeldeinformationen eines IAM-Auftraggebers verwendet, um eine Anforderung im Namen des Auftraggebers zu stellen.</p>
                    </li><li class="listitem">
                        <p>Wenn der Anruf direkt von einem IAM-Auftraggeber getätigt wird.</p>
                    </li><li class="listitem">
                        <p>Wenn der Anruf von einem anonymen Antragsteller getätigt wird.</p>
                    </li></ul></div>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Einzelwertig</p>
            </li></ul></div>
        <p>Sie können diesen Bedingungsschlüssel verwenden, um den Zugriff auf Ihre vertrauenswürdigen Identitäten und erwarteten Netzwerkstandorte zu beschränken und gleichzeitig den Zugriff auf AWS-Services.</p>
        <p>Im folgenden Amazon S3 Bucket-Richtlinienbeispiel ist der Zugriff auf den Bucket eingeschränkt, es sei denn, die Anforderung stammt von<code class="code">vpc-111bbb22</code>oder stammt von einem Dienstauftraggeber wie CloudTrail.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Sid": "expected-network+service-principal",
      "Effect": "Deny",
      "Principal": "*",
      "Action": "s3:PutObject",
      "Resource": "arn:aws:s3:::<code class="replaceable"><code class="replaceable">DOC-EXAMPLE-BUCKET1</code></code>/AWSLogs/<code class="replaceable">AccountNumber</code>/*",
      "Condition": <span>{</span>
        "StringNotEqualsIfExists": <span>{</span>
          "aws:SourceVpc": "vpc-111bbb22",
          "aws:PrincipalServiceName": "cloudtrail.amazonaws.com"
        }
      }
    }
  ]
}
        </code></pre>
     
        <h2 id="condition-keys-principalservicenameslist">AWS:PrincipalServiceNamesList</h2>
        <p>Funktioniert mit <a href="./reference_policies_elements_condition_operators.html#Conditions_String">Zeichenfolgenoperatoren</a>.</p>
        <p>Dieser Schlüssel enthält eine Liste aller<a href="./reference_policies_elements_principal.html#principal-services">-Dienstauftraggeber</a>Namen, die zum Dienst gehören. Dies ist ein erweiterter Bedingungsschlüssel. Sie können damit den Service daran hindern, nur von einer bestimmten Region aus auf Ihre Ressource zuzugreifen. Einige Dienste können regionale Dienstauftraggeber erstellen, um eine bestimmte Instance des Dienstes innerhalb einer bestimmten Region anzugeben. Sie können den Zugriff auf eine Ressource auf eine bestimmte Instance des Dienstes beschränken. Wenn ein Dienstauftraggeber eine direkte Anforderung an Ihre Ressource stellt, enthält der <code class="code">aws:PrincipalServiceNamesList</code> eine ungeordnete Liste aller Dienst-Auftraggebernamen, die mit der regionalen Instance des Dienstes verbunden sind.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Verfügbarkeit</b> – Dieser Schlüssel ist in der Anforderung vorhanden, wenn der Anruf von einem Auftraggeber des AWS-Dienstes getätigt wird. Dieser Schlüssel ist in keiner anderen Situation vorhanden, einschließlich der folgenden:</p>
                <div class="itemizedlist">
                     
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>Sie wird auch verweigert, wenn der Service eine <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-role">Servicerolle</a> oder eine <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-linked-role">serviceverknüpfte Rolle</a> verwendet, um einen Aufruf im Auftrag des Auftraggebers durchzuführen.</p>
                    </li><li class="listitem">
                        <p>Wenn der Dienst die Anmeldeinformationen eines IAM-Auftraggebers verwendet, um eine Anforderung im Namen des Auftraggebers zu stellen.</p>
                    </li><li class="listitem">
                        <p>Wenn der Anruf direkt von einem IAM-Auftraggeber getätigt wird.</p>
                    </li><li class="listitem">
                        <p>Wenn der Anruf von einem anonymen Antragsteller getätigt wird.</p>
                    </li></ul></div>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Mehrwertig</p>
            </li></ul></div>
        <p><code class="code">aws:PrincipalServiceNamesList</code> ist ein mehrwertiger Bedingungsschlüssel. Mehrwertige Bedingungsschlüssel können im Anforderungskontext mehrere Werte haben. Sie müssen die Set-Operatoren <code class="code">ForAnyValue</code> oder <code class="code">ForAllValues</code> zusammen mit <a href="./reference_policies_elements_condition_operators.html#Conditions_String">String-Bedingungsoperatoren</a> für diesen Schlüssel verwenden. Weitere Hinweise zu mehrwertigen Bedingungsschlüsseln finden Sie unter <a href="./reference_policies_multi-value-conditions.html#reference_policies_multi-key-or-value-conditions">Verwenden mehrerer Schlüssel und Werte</a>.</p>
     
        <h2 id="condition-keys-principaltag">aws:PrincipalTag/<em>tag-key</em></h2>
        <p>Funktioniert mit <a href="./reference_policies_elements_condition_operators.html#Conditions_String">Zeichenfolgenoperatoren</a>.</p>
        <p>Verwenden Sie diesen Schlüssel, um das Tag, das dem Auftraggeber angefügt ist, der die Anforderung stellt, mit dem Tag zu vergleichen, das Sie in der Richtlinie angeben. Wenn dem Auftraggeber mehr als ein Tag angefügt ist, enthält der Anforderungskontext einen <code class="code">aws:PrincipalTag</code>-Schlüssel für jeden angefügten Tag-Schlüssel.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability (Verfügbarkeit)</b> – Dieser Schlüssel ist nur dann im Anforderungskontext enthalten, wenn der Auftraggeber ein IAM-Benutzer mit angefügten Tags ist. Er ist für einen Auftraggeber enthalten, der eine IAM-Rolle mit angefügten Tags oder <a href="./id_session-tags.html">Sitzungs-Tags</a> verwendet. Anonyme Anforderungen enthalten diesen Schlüssel nicht.</p>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Einzelwertig</p>
            </li></ul></div>
        <p>Sie können einem Benutzer oder einer Rolle benutzerdefinierte Attribute in Form eines Schlüssel-Wert-Paares hinzufügen. Weitere Informationen zur Verwendung von Tags in IAM finden Sie unter <a href="./id_tags.html">Markieren von IAM-Ressourcen</a>. Sie können <code class="code">aws:PrincipalTag</code> für die <a href="./access_iam-tags.html#access_iam-tags_control-principals">Zugriffskontrolle</a> für AWS-Auftraggeber einsetzen.</p>
        <p>Dieses Beispiel zeigt, wie Sie eine identitätsbasierte Richtlinie erstellen können, die es Benutzern mit dem Tag <code class="userinput">department=hr</code> erlaubt, IAM-Benutzer, -Gruppen oder -Rollen zu verwalten. Um diese Richtlinie zu verwenden, ersetzen Sie den <code class="replaceable">kursiv gedruckten Platzhaltertext</code> in der Beispielrichtlinie durch Ihre eigenen Informationen. Befolgen Sie dann die Anweisungen unter <a href="./access_policies_create.html">Erstellen einer Richtlinie</a> oder <a href="./access_policies_manage-edit.html">Bearbeiten einer Richtlinie</a>.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Effect": "Allow",
      "Action": "iam:*",
      "Resource": "*",
      "Condition": <span>{</span>
        "StringEquals": <span>{</span>
          "aws:PrincipalTag/<code class="replaceable">department</code>": "<code class="replaceable">hr</code>"
        }
      }
    }
  ]
}</code></pre>
        <p>Dieses Beispiel zeigt, wie Sie eine ressourcenbasierte Richtlinie mit dem Schlüssel <code class="code">aws:PrincipalTag</code> im Ressourcen-ARN erstellen können. Die Richtlinie erlaubt die Aktion <code class="code">s3:GetObject</code> nur dann, wenn der Bucket-Name mit einem Teamnamen aus dem <code class="code"><code class="replaceable">team</code></code>-Prinzipal-Tag endet. Um diese Richtlinie zu verwenden, ersetzen Sie den <code class="replaceable">kursiv gedruckten Platzhaltertext</code> in der Beispielrichtlinie durch Ihre eigenen Informationen. Befolgen Sie dann die Anweisungen unter <a href="./access_policies_create.html">Erstellen einer Richtlinie</a> oder <a href="./access_policies_manage-edit.html">Bearbeiten einer Richtlinie</a>.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": <span>{</span>
    "Effect": "Allow",
    "Principal": "*",
    "Action": "s3:GetObject",
    "Resource": "arn:aws:s3:::<code class="replaceable">DOC-EXAMPLE-BUCKET</code>-$<span>{</span>aws:PrincipalTag/<code class="replaceable">team</code>}/"
  }
}</code></pre>
     
        <h2 id="condition-keys-principaltype">aws:PrincipalType</h2>
        <p>Funktioniert mit <a href="./reference_policies_elements_condition_operators.html#Conditions_String">Zeichenfolgenoperatoren</a>.</p>
        <p>Verwenden Sie diesen Schlüssel, um den Typ des Auftraggebers, der die Anforderung stellt, mit dem Auftraggebertyp zu vergleichen, den Sie in der Richtlinie angeben. Weitere Informationen finden Sie unter <a href="./reference_policies_elements_principal.html#Principal_specifying">Angeben eines Auftraggebers</a>. Für konkrete Beispiele von <code class="code">principal</code>-Schlüsselwerten, siehe <a href="./reference_policies_variables.html#principaltable">Auftraggeber-Schlüsselwerte</a>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Verfügbarkeit</b> – Dieser Schlüssel ist im Anforderungskontext für alle Anforderungen, einschließlich anonymer Anforderungen, enthalten.</p>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Einzelwertig</p>
            </li></ul></div>
     
        <h2 id="condition-keys-referer">aws:referer</h2>
        <p>Funktioniert mit <a href="./reference_policies_elements_condition_operators.html#Conditions_String">Zeichenfolgenoperatoren</a>.</p>
        <p>Verwenden Sie diesen Schlüssel, um den Referrer, der im Client-Browser auf die Anforderung verwiesen hat, mit dem Referrer zu vergleichen, den Sie in der Richtlinie angeben. Der <code class="code">aws:referer</code>-Anforderungskontextwert wird vom Aufrufer in einem HTTP-Header bereitgestellt. Der <code class="code">Referer</code>-Header ist in einer Webbrowser-Anforderung enthalten, wenn Sie einen Link auf einer Webseite auswählen. Der <code class="code">Referer</code>-Header enthält die URL der Webseite, auf der der Link ausgewählt wurde.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Verfügbarkeit</b> – Dieser Schlüssel ist nur dann im Anforderungskontext enthalten, wenn die Anforderung an die AWS-Ressource durch Verknüpfung von einer Webseiten-URL im Browser aufgerufen wurde. Dieser Schlüssel ist nicht für programmatische Anforderungen enthalten, da er keinen Browserlink verwendet, um auf die AWS-Ressource zuzugreifen.</p>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Einzelwertig</p>
            </li></ul></div>
        <p>Sie können beispielsweise direkt über eine URL oder einen direkten API-Aufruf auf ein Amazon S3-Objekt zugreifen. Weitere Informationen finden Sie unter <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/example-bucket-policies.html#example-bucket-policies-use-case-4">Amazon S3-API-Vorgänge direkt mit einem Webbrowser</a>. Wenn Sie von einer URL, die in einer Webseite existiert, auf ein Amazon S3-Objekt zugreifen, wird die URL der Quellwebseite in <code class="code">aws:referer</code> verwendet. Wenn Sie auf ein Amazon S3-Objekt zugreifen, indem Sie die URL in Ihren Browser eingeben, ist <code class="code">aws:referer</code> nicht vorhanden. Wenn Sie die API direkt aufrufen, ist <code class="code">aws:referer</code> auch nicht vorhanden. Sie können den <code class="code">aws:referer</code>-Bedingungsschlüssel in einer Richtlinie verwenden, um Anforderungen von einem bestimmten Referer zuzulassen, z. B. einen Link auf einer Webseite in der Domain Ihres Unternehmens. </p>
        <div class="awsdocs-note awsdocs-warning"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Warnung</h6></div><div class="awsdocs-note-text"><p>Dieser Schlüssel sollte mit Vorsicht verwendet werden. Ein öffentlich bekannter Referer-Header-Wert sollte möglichst nicht eingeschlossen werden. Nicht autorisierte Parteien können mit modifizierten oder benutzerdefinierten Browsern einen beliebigen <code class="code">aws:referer</code>-Wert ihrer Wahl bereitstellen. Daher sollten Sie <code class="code">aws:referer</code> nicht verwenden, um zu verhindern, dass nicht autorisierte Parteien direkte AWS-Anforderungen senden. Die Funktion wird nur bereitgestellt, damit Kunden ihre digitalen, in Amazon S3 gespeicherten Inhalte vor der Referenzierung auf nicht autorisierte Drittanbieter-Websites schützen können.</p></div></div>
     
        <h2 id="condition-keys-requestedregion">aws:RequestedRegion</h2>
        <p>Funktioniert mit <a href="./reference_policies_elements_condition_operators.html#Conditions_String">Zeichenfolgenoperatoren</a>.</p>
        <p>Verwenden Sie diesen Schlüssel, um die AWS-Region, die in der Anforderung aufgerufen wurde, mit der Region zu vergleichen, die Sie in der Richtlinie angeben. Mit diesem globalen Bedingungsschlüssel können Sie steuern, welche Regionen angefordert werden können. Informationen zum Anzeigen der AWS-Regionen für die einzelnen Services finden Sie unter <a href="https://docs.aws.amazon.com/general/latest/gr/aws-service-information.html">Service-Endpunkte und -Kontingente</a> im <em>Allgemeine Amazon Web Services-Referenz</em>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p>-<b>Verfügbarkeit</b> – Dieser Schlüssel ist immer im Anforderungskontext enthalten.</p>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Einzelwertig</p>
            </li></ul></div>
        <p>Globale Services wie IAM haben einen einzelnen Endpunkt. Da sich dieser Endpunkt in der US East (N. Virginia)-Region befindet, werden IAM-Anrufe immer an die us-east-1 Region gesendet. Wenn Sie beispielsweise eine Richtlinie erstellen, die den Zugriff auf alle Services verweigert, wenn die angeforderte Region nicht us-west-2 ist, schlagen die IAM-Aufrufe immer fehl. Ein Beispiel zur Umgehung dieses Problems finden Sie unter <a href="./reference_policies_elements_notaction.html">NotAction mit Deny</a>. </p>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Anmerkung</h6></div><div class="awsdocs-note-text"><p>Mit dem Bedingungsschlüssel <code class="code">aws:RequestedRegion</code> können Sie steuern, welche Endpunkt eines Services aufgerufen wird, jedoch nicht die Auswirkungen der Operation. Einige Services haben regionsübergreifende Auswirkungen. Amazon S3 verfügt beispielsweise über API-Vorgänge, die die regionenübergreifende Replikation steuern. Sie können <code class="code">s3:PutBucketReplication</code> in einer Region aufrufen (betroffen über den Bedingungsschlüssel <code class="code">aws:RequestedRegion</code>), während andere Regionen basierend auf den Konfigurationseinstellungen der Replikation betroffen sind. </p></div></div>
        <p>Sie können diesen Kontextschlüssel verwenden, um den Zugriff auf AWS-Services innerhalb einer bestimmten Gruppe von Regionen zu beschränken. Mit der folgenden Richtlinie wird Benutzern beispielsweise erlaubt, alle Amazon EC2-Instances in der AWS Management Console anzuzeigen. Sie gestattet den Benutzern aber nur Änderungen an Instances in Irland (eu-west-1), London (eu-west-2) und Paris (eu-west-3).</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "InstanceConsoleReadOnly",
            "Effect": "Allow",
            "Action": [
                "ec2:Describe*",
                "ec2:Export*",
                "ec2:Get*",
                "ec2:Search*"
            ],
            "Resource": "*"
        },
        <span>{</span>
            "Sid": "InstanceWriteRegionRestricted",
            "Effect": "Allow",
            "Action": [
                "ec2:Associate*",
                "ec2:Import*",
                "ec2:Modify*",
                "ec2:Monitor*",
                "ec2:Reset*",
                "ec2:Run*",
                "ec2:Start*",
                "ec2:Stop*",
                "ec2:Terminate*"
            ],
            "Resource": "*",
            "Condition": <span>{</span>
                "StringEquals": <span>{</span>
                    "aws:RequestedRegion": [
                        "eu-west-1",
                        "eu-west-2",
                        "eu-west-3"
                    ]
                }
            }
        }
    ]
}       </code></pre>
     
        <h2 id="condition-keys-requesttag">aws:RequestTag/<em>Tag-Schlüssel</em></h2>
        <p>Funktioniert mit <a href="./reference_policies_elements_condition_operators.html#Conditions_String">Zeichenfolgenoperatoren</a>.</p>
        <p>Verwenden Sie diesen Schlüssel, um das Tag-Schlüssel-Wert-Paar, das in der Anforderung übergeben wurde, mit dem Tag-Paar zu vergleichen, das Sie in der Richtlinie angeben. Sie können beispielsweise prüfen, ob die Anforderung den Tag-Schlüssel <code class="code">"Dept"</code> enthält und dieser den Wert <code class="code">"Accounting"</code> hat. Weitere Informationen finden Sie unter <a href="./access_tags.html#access_tags_control-requests">Zugriffssteuerung während AWS-Anforderungen</a>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Verfügbarkeit</b> – Dieser Schlüssel ist im Anforderungskontext enthalten, wenn Tag-Schlüssel-Wert-Paare in der Anforderung übergeben werden. Wenn mehrere Tags in der Anforderung übergeben werden, gibt es einen Kontextschlüssel für jedes Tag-Schlüssel-Wert-Paar.</p>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Einzelwertig</p>
            </li></ul></div>
        <p>Dieser Kontextschlüssel liegt im Format <code class="code">"aws:RequestTag/<code class="replaceable">tag-key</code>":"<code class="replaceable">tag-value</code>"</code> vor. Dabei bezeichnen <code class="replaceable">tag-key</code> und <code class="replaceable">tag-value</code> ein Paar aus Tag-Schlüssel und -Wert. Bei Tag-Schlüsseln und -Werten wird nicht zwischen Groß- und Kleinschreibung unterschieden. Dies bedeutet Folgendes: Wenn Sie <code class="code">"aws:RequestTag/TagKey1": "Value1"</code> im Bedingungselement Ihrer Richtlinie angeben, stimmt die Bedingung mit einem Ressourcen-Tag-Schlüssel mit dem Namen <code class="code">TagKey1</code> oder <code class="code">tagkey1</code> überein, aber nicht mit beiden.</p>
        <p>Dieses Beispiel zeigt, dass der Schlüssel zwar einwertig ist, Sie aber dennoch mehrere Schlüssel-Wert-Paare in einer Anforderung verwenden können, wenn die Schlüssel unterschiedlich sind.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": <span>{</span>
    "Effect": "Allow",
    "Action": "ec2:CreateTags",
    "Resource": "arn:aws:ec2:::instance/*",
    "Condition": <span>{</span>
      "StringEquals": <span>{</span>
        "aws:RequestTag/environment": [
          "preprod",
          "production"
        ],
        "aws:RequestTag/team": [
          "engineering"
        ]
      }
    }
  }
}
</code></pre>
     
        <h2 id="condition-keys-resourceaccount">aws:ResourceAccount</h2>
        <p>Funktioniert mit <a href="./reference_policies_elements_condition_operators.html#Conditions_String">Zeichenfolgenoperatoren</a>.</p>
        <p>Verwenden Sie diesen Schlüssel, um die <a href="https://docs.aws.amazon.com/general/latest/gr/acct-identifiers.html">AWS-Konto-ID</a> des angeforderten Ressourcenbesitzers mit dem Ressourcenkonto in der Richtlinie zu vergleichen. Sie können dann den Zugriff auf diese Ressource basierend auf dem Konto, dem die Ressource gehört, erlauben oder verweigern.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Verfügbarkeit</b> – Dieser Schlüssel ist immer im Anforderungskontext für die meisten Service-Aktionen enthalten. Die folgenden Aktionen unterstützen diesen Schlüssel nicht:</p>
                <div class="itemizedlist">
                     
                     
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>Amazon Elastic Block Store – Alle Aktionen</p>
                    </li><li class="listitem">
                        <p>Amazon EC2</p>
                        <div class="itemizedlist">
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p><code class="code">ec2:AcceptTransitGatewayPeeringAttachment</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:AcceptVpcEndpointConnections</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:AcceptVpcPeeringConnection</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:CopySnapshot</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:CreateVolume</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:CreateVpcEndpoint</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:CreateVpcPeeringConnection</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:DeleteTransitGatewayPeeringAttachment</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:DeleteVpcPeeringConnection</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:RejectTransitGatewayPeeringAttachment</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:RejectVpcEndpointConnections</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:RejectVpcPeeringConnection</code></p>
                            </li></ul></div>
                    </li><li class="listitem">
                        <p>Amazon EventBridge – Alle Aktionen</p>
                    </li><li class="listitem">
                        <p>Amazon Route 53</p>
                        <div class="itemizedlist">
                             
                             
                             
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p><code class="code">route53:AssociateVpcWithHostedZone</code></p>
                            </li><li class="listitem">
                                <p><code class="code">route53:CreateVPCAssociationAuthorization</code></p>
                            </li><li class="listitem">
                                <p><code class="code">route53:DeleteVPCAssociationAuthorization</code></p>
                            </li><li class="listitem">
                                <p><code class="code">route53:DisassociateVPCFromHostedZone</code></p>
                            </li><li class="listitem">
                                <p><code class="code">route53:ListHostedZonesByVPC</code></p>
                            </li></ul></div>
                    </li><li class="listitem">
                        <p>Amazon WorkSpaces</p>
                        <div class="itemizedlist">
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p><code class="code">workspaces:DescribeWorkspaceImages</code></p>
                            </li></ul></div>
                    </li></ul></div>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Einzelwertig</p>
            </li></ul></div>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Anmerkung</h6></div><div class="awsdocs-note-text"><p>Weitere Überlegungen zu den oben genannten nicht unterstützten Aktionen finden Sie im Repository <a href="https://github.com/aws-samples/data-perimeter-policy-examples" rel="noopener noreferrer" target="_blank"><span>Data Perimeter Policy Examples</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> (Beispiele für Datenperimeter-Richtlinien).</p></div></div>
        <p>Dieser Schlüssel entspricht der AWS-Konto-ID für das Konto mit den in der Anforderung ausgewerteten Ressourcen.</p>
        <p>Für die meisten Ressourcen in Ihrem Konto, enthält der <a href="./reference_policies_elements_condition_operators.html#Conditions_ARN">ARN</a> die Besitzer-Konto-ID für diese Ressource. Für bestimmte Ressourcen, wie Amazon S3-Buckets, enthält der Ressourcen-ARN nicht die Konto-ID. Die folgenden zwei Beispiele zeigen den Unterschied zwischen einer Ressource mit einer Konto-ID im ARN und einem Amazon-S3-ARN ohne Konto-ID:</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><code class="code">arn:aws:iam::123456789012:role/AWSExampleRole</code> – Erstellung und Eigentümerschaft der IAM-Rolle innerhalb des Kontos 123456789012. </p>
            </li><li class="listitem">
                <p><code class="code">arn:aws:s3:::<code class="replaceable">DOC-EXAMPLE-BUCKET2</code></code> – Erstellung und Eigentümerchaft des Amazon-S3-Buckets innerhalb des Kontos <code class="code">111122223333</code>, wird nicht im ARN angezeigt.</p>
            </li></ul></div>
        <p>Verwenden Sie die AWS-Konsole, die API oder die CLI, um alle Ihre Ressourcen und die entsprechenden ARNs zu finden.</p>
        <p>Sie schreiben eine Richtlinie, die Berechtigungen für Ressourcen basierend auf der Konto-ID des Ressourcenbesitzers verweigert. Zum Beispiel verweigert die folgende identitätsbasierte Richtlinie den Zugriff auf die <em>angegebene Ressource</em>, wenn die Ressource nicht dem <em>angegebenen Konto</em> angehört.</p>
        <p>Um diese Richtlinie zu verwenden, ersetzen Sie den <em>kursiv gedruckten Platzhaltertext</em> durch Ihre eigenen Kontoinformationen. </p>
        <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Wichtig</h6></div><div class="awsdocs-note-text"><p>Diese Richtlinie lässt keine Aktionen zu. Stattdessen wird der <code class="code">Deny</code>-Effekt verwendet, der explizit den Zugriff auf alle in der Anweisung aufgeführten Ressourcen verweigert, die nicht zu dem aufgelisteten Konto gehören. Verwenden Sie diese Richtlinie in Kombination mit anderen Richtlinien, die den Zugriff auf bestimmte Ressourcen gewähren.</p></div></div>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": [
    <span>{</span>
      "Sid": "DenyInteractionWithResourcesNotInSpecificAccount",
      "Action": "<code class="replaceable">service</code>:*",
      "Effect": "Deny",
      "Resource": [
        "arn:aws:<code class="replaceable">service</code>:<code class="replaceable">region</code>:<code class="replaceable">account</code>:<code class="replaceable">*</code>"
      ],
      "Condition": <span>{</span>
        "StringNotEquals": <span>{</span>
          "aws:ResourceAccount": [
            "<code class="replaceable">account</code>"
          ]
        }
      }
    }
  ]
}</code></pre>
        <p>Diese Richtlinie verweigert den Zugriff auf alle Ressourcen für einen bestimmten AWS-Service, sofern das angegebene AWS-Konto nicht Eigentümer der Ressource ist. </p>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Anmerkung</h6></div><div class="awsdocs-note-text"><p>Einige AWS-Services benötigen Zugriff auf AWS-eigene Ressourcen, die in einem anderen AWS-Konto gehostet werden. Wenn Sie <code class="code">aws:ResourceAccount</code> in Ihren identitätsbasierten Richtlinien verwenden, kann sich dies auf die Fähigkeit Ihrer Identität auswirken, auf diese Ressourcen zuzugreifen.</p></div></div>
        <p>Gewisse AWS-Services, wie AWS Data Exchange und CloudFormation, verlassen Sie sich auf den Zugriff auf Ressourcen außerhalb Ihrer AWS-Konten für den normalen Betrieb. Wenn Sie das Element <code class="code">aws:ResourceAccount</code> in Ihren Richtlinien verwenden, fügen Sie zusätzliche Erklärungen hinzu, um Ausnahmen für diese Services zu erstellen. Die Beispielrichtlinie <a href="./reference_policies_examples_resource_account_data_exch.html">AWS: Verweigern des Zugriffs auf Amazon-S3-Ressourcen außerhalb Ihres Kontos, außer AWS Data Exchange</a> zeigt, wie der Zugriff basierend auf dem Ressourcenkonto verweigert wird, während Ausnahmen für serviceeigene Ressourcen definiert werden.</p>
        <p>Verwenden Sie diese Richtlinienbeispiele als Vorlagen für die Erstellung Ihrer eigenen benutzerdefinierten Richtlinien. Weitere Informationen finden Sie in Ihrer Service-<a href="https://docs.aws.amazon.com/index.html">Dokumentation</a>.</p>
     
        <h2 id="condition-keys-resourceorgid">aws:ResourceOrgID</h2>
        <p>Funktioniert mit <a href="./reference_policies_elements_condition_operators.html#Conditions_String">Zeichenfolgenoperatoren</a>.</p>
        <p>Verwenden Sie diesen Schlüssel, um die Kennung der Organisation in AWS Organizations, zu der die angeforderte Ressource gehört, mit der in der Richtlinie angegebenen Kennung zu vergleichen.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Verfügbarkeit</b> – Dieser Schlüssel ist nur dann im Anforderungskontext enthalten, wenn das Konto, das Eigentümer der Ressource ist, Mitglied einer Organisation ist. Dieser globale Bedingungsschlüssel unterstützt die folgenden Aktionen nicht:</p>
                <div class="itemizedlist">
                     
                     
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>Amazon Elastic Block Store – Alle Aktionen</p>
                    </li><li class="listitem">
                        <p>Amazon EC2</p>
                        <div class="itemizedlist">
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p><code class="code">ec2:AcceptTransitGatewayPeeringAttachment</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:AcceptVpcEndpointConnections</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:AcceptVpcPeeringConnection</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:CopySnapshot</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:CreateVolume</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:CreateVpcEndpoint</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:CreateVpcPeeringConnection</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:DeleteTransitGatewayPeeringAttachment</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:DeleteVpcPeeringConnection</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:RejectTransitGatewayPeeringAttachment</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:RejectVpcEndpointConnections</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:RejectVpcPeeringConnection</code></p>
                            </li></ul></div>
                    </li><li class="listitem">
                        <p>Amazon EventBridge – Alle Aktionen</p>
                    </li><li class="listitem">
                        <p>Amazon Route 53</p>
                        <div class="itemizedlist">
                             
                             
                             
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p><code class="code">route53:AssociateVpcWithHostedZone</code></p>
                            </li><li class="listitem">
                                <p><code class="code">route53:CreateVPCAssociationAuthorization</code></p>
                            </li><li class="listitem">
                                <p><code class="code">route53:DeleteVPCAssociationAuthorization</code></p>
                            </li><li class="listitem">
                                <p><code class="code">route53:DisassociateVPCFromHostedZone</code></p>
                            </li><li class="listitem">
                                <p><code class="code">route53:ListHostedZonesByVPC</code></p>
                            </li></ul></div>
                    </li><li class="listitem">
                        <p>Amazon WorkSpaces</p>
                        <div class="itemizedlist">
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p><code class="code">workspaces:DescribeWorkspaceImages</code></p>
                            </li></ul></div>
                    </li></ul></div>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Einzelwertig</p>
            </li></ul></div>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Anmerkung</h6></div><div class="awsdocs-note-text"><p>Weitere Überlegungen zu den oben genannten nicht unterstützten Aktionen finden Sie im Repository <a href="https://github.com/aws-samples/data-perimeter-policy-examples" rel="noopener noreferrer" target="_blank"><span>Data Perimeter Policy Examples</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> (Beispiele für Datenperimeter-Richtlinien).</p></div></div>
        <p>Dieser globale Schlüssel gibt die ID der Ressourcenorganisation für eine bestimmte Anforderung zurück. Es erlaubt Ihnen, Regeln zu erstellen, die für alle Ressourcen in einer Organisation gelten, die im <code class="code">Resource</code>-Element einer <a href="./access_policies_identity-vs-resource.html">identitätsbasierten Richtlinie</a> angegeben sind. Sie können die <a href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_manage_org_details.html">Organisations-ID</a> im Bedingungselement angeben. Wenn Sie Konten hinzufügen und entfernen, schließen Richtlinien, die den <code class="code">aws:ResourceOrgID</code>-Schlüssel enthalten, automatisch die richtigen Konten ein und Sie müssen sie nicht manuell aktualisieren.</p>
        <p>Zum Beispiel verhindert die folgende Richtlinie, dass der Prinzipal der <code class="code">policy-genius-dev</code>-Ressource Objekte hinzufügt, es sei denn, die Amazon-S3-Ressource gehört derselben Organisation an wie der Prinzipal, der die Anforderung stellt.</p>
        <div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Wichtig</h6></div><div class="awsdocs-note-text"><p>Diese Richtlinie lässt keine Aktionen zu. Stattdessen wird der <code class="code">Deny</code>-Effekt verwendet, der explizit den Zugriff auf alle in der Anweisung aufgeführten Ressourcen verweigert, die nicht zu dem aufgelisteten Konto gehören. Verwenden Sie diese Richtlinie in Kombination mit anderen Richtlinien, die den Zugriff auf bestimmte Ressourcen gewähren.</p></div></div>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
  "Version": "2012-10-17",
  "Statement": <span>{</span>
    "Sid": "DenyPutObjectToS3ResourcesOutsideMyOrganization",
    "Effect": "Deny",
    "Action": "s3:PutObject",
    "Resource": "arn:<code class="replaceable">partition</code>:s3:::policy-genius-dev/*",
    "Condition": <span>{</span>
      "StringNotEquals": <span>{</span>
        "aws:ResourceOrgID": "$<span>{</span>aws:PrincipalOrgID}"
      }
    }
  }
}</code></pre>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Anmerkung</h6></div><div class="awsdocs-note-text"><p>Einige AWS-Services benötigen Zugriff auf AWS-eigene Ressourcen, die in einem anderen AWS-Konto gehostet werden. Wenn Sie <code class="code">aws:ResourceOrgID</code> in Ihren identitätsbasierten Richtlinien verwenden, kann sich dies auf die Fähigkeit Ihrer Identität auswirken, auf diese Ressourcen zuzugreifen.</p></div></div>
        
        <p>Gewisse AWS-Services, wie AWS Data Exchange und CloudFormation, verlassen Sie sich auf den Zugriff auf Ressourcen außerhalb Ihrer AWS-Konten für den normalen Betrieb. Wenn Sie den Schlüssel <code class="code">aws:ResourceOrgID</code> in Ihren Richtlinien verwenden, fügen Sie zusätzliche Erklärungen hinzu, um Ausnahmen für diese Services zu erstellen. Die Beispielrichtlinie <a href="./reference_policies_examples_resource_account_data_exch.html">AWS: Verweigern des Zugriffs auf Amazon-S3-Ressourcen außerhalb Ihres Kontos, außer AWS Data Exchange</a> zeigt, wie der Zugriff basierend auf dem Ressourcenkonto verweigert wird, während Ausnahmen für serviceeigene Ressourcen definiert werden. Sie können eine ähnliche Richtlinie erstellen, um den Zugriff auf Ressourcen innerhalb Ihrer Organisation mithilfe des <code class="code">aws:ResourceOrgID</code>-Schlüssels zu beschränken und gleichzeitig serviceeigene Ressourcen zu berücksichtigen.</p>
        <p>Verwenden Sie diese Richtlinienbeispiele als Vorlagen für die Erstellung Ihrer eigenen benutzerdefinierten Richtlinien. Weitere Informationen finden Sie in Ihrer Service-<a href="https://docs.aws.amazon.com/index.html">Dokumentation</a>.</p>
        
        <p>Im folgenden Video erfahren Sie mehr darüber, wie Sie den Bedingungsschlüssel <code class="code">aws:ResourceOrgID</code> in einer Richtlinie verwenden können.</p>
        <div class="mediaobject">
             
                <iframe width="720" height="330" frameborder="0" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen="" sandbox="allow-scripts allow-same-origin allow-popups" src="https://www.youtube-nocookie.com/embed/cWVW0xAiWwc"></iframe>
             
             
        </div>
        
        
        
     
        <h2 id="condition-keys-resourceorgpaths">aws:ResourceOrgPaths</h2>
        <p>Funktioniert mit <a href="./reference_policies_elements_condition_operators.html#Conditions_String">Zeichenfolgenoperatoren</a>.</p>
        <p>Verwenden Sie diesen Schlüssel, um den AWS-Organizations-Pfad für die aufgerufene Ressource mit dem Pfad in der Richtlinie zu vergleichen. In einer Richtlinie stellt dieser Bedingungsschlüssel sicher, dass die Ressource zu einem Kontomitglied innerhalb des angegebenen Organisationsstamms oder der Organisationseinheiten (OUs) in AWS Organizations gehört. Ein AWS-Organizations-Pfad ist eine Textdarstellung der Struktur einer Organizations-Entität. Weitere Informationen zum Verwenden und Verstehen von Pfaden finden Sie unter <a href="./access_policies_access-advisor-view-data-orgs.html#access_policies_access-advisor-viewing-orgs-entity-path">Der AWS Organizations-Entitätspfad</a>. </p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Verfügbarkeit</b> – Dieser Schlüssel wird nur dann in den Anforderungskontext aufgenommen, wenn das Konto, dem die Ressource gehört, Mitglied einer Organisation ist. Dieser globale Bedingungsschlüssel unterstützt die folgenden Aktionen nicht:</p>
                <div class="itemizedlist">
                     
                     
                     
                     
                     
                <ul class="itemizedlist"><li class="listitem">
                        <p>Amazon Elastic Block Store – Alle Aktionen</p>
                    </li><li class="listitem">
                        <p>Amazon EC2</p>
                        <div class="itemizedlist">
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p><code class="code">ec2:AcceptTransitGatewayPeeringAttachment</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:AcceptVpcEndpointConnections</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:AcceptVpcPeeringConnection</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:CopySnapshot</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:CreateVolume</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:CreateVpcEndpoint</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:CreateVpcPeeringConnection</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:DeleteTransitGatewayPeeringAttachment</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:DeleteVpcPeeringConnection</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:RejectTransitGatewayPeeringAttachment</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:RejectVpcEndpointConnections</code></p>
                            </li><li class="listitem">
                                <p><code class="code">ec2:RejectVpcPeeringConnection</code></p>
                            </li></ul></div>
                    </li><li class="listitem">
                        <p>Amazon EventBridge – Alle Aktionen</p>
                    </li><li class="listitem">
                        <p>Amazon Route 53</p>
                        <div class="itemizedlist">
                             
                             
                             
                             
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p><code class="code">route53:AssociateVpcWithHostedZone</code></p>
                            </li><li class="listitem">
                                <p><code class="code">route53:CreateVPCAssociationAuthorization</code></p>
                            </li><li class="listitem">
                                <p><code class="code">route53:DeleteVPCAssociationAuthorization</code></p>
                            </li><li class="listitem">
                                <p><code class="code">route53:DisassociateVPCFromHostedZone</code></p>
                            </li><li class="listitem">
                                <p><code class="code">route53:ListHostedZonesByVPC</code></p>
                            </li></ul></div>
                    </li><li class="listitem">
                        <p>Amazon WorkSpaces</p>
                        <div class="itemizedlist">
                             
                        <ul class="itemizedlist"><li class="listitem">
                                <p><code class="code">workspaces:DescribeWorkspaceImages</code></p>
                            </li></ul></div>
                    </li></ul></div>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Mehrwertig</p>
            </li></ul></div>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Anmerkung</h6></div><div class="awsdocs-note-text"><p>Weitere Überlegungen zu den oben genannten nicht unterstützten Aktionen finden Sie im Repository <a href="https://github.com/aws-samples/data-perimeter-policy-examples" rel="noopener noreferrer" target="_blank"><span>Data Perimeter Policy Examples</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> (Beispiele für Datenperimeter-Richtlinien).</p></div></div>
        <p><code class="code">aws:ResourceOrgPaths</code> ist ein mehrwertiger Bedingungsschlüssel. Mehrwertige Bedingungsschlüssel können im Anforderungskontext mehrere Werte haben. Sie müssen die Set-Operatoren <code class="code">ForAnyValue</code> oder <code class="code">ForAllValues</code> zusammen mit <a href="./reference_policies_elements_condition_operators.html#Conditions_String">String-Bedingungsoperatoren</a> für diesen Schlüssel verwenden. Weitere Hinweise zu mehrwertigen Bedingungsschlüsseln finden Sie unter <a href="./reference_policies_multi-value-conditions.html#reference_policies_multi-key-or-value-conditions">Verwenden mehrerer Schlüssel und Werte</a>.</p>
        <p>Zum Beispiel gibt die folgende Bedingung <code class="code">True</code> für Ressourcen zurück, die zur Organisation <code class="code">o-a1b2c3d4e5</code> gehören. Wenn Sie einen Platzhalter einschließen, müssen Sie den Bedingungsoperator <a href="./reference_policies_elements_condition_operators.html">StringLike</a> verwenden.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">"Condition": <span>{</span> 
      "ForAnyValue:StringLike": <span>{</span>
             "aws:ResourceOrgPaths":["o-a1b2c3d4e5/*"]
   }
}</code></pre>
        <p>Die folgende Bedingung gibt <code class="code">True</code> für Ressourcen mit der OU-ID <code class="code">ou-ab12-11111111</code> zurück. Es werden Ressourcen abgestimmt, die Konten gehören, die der OU ou-ab12-11111111 oder einer der untergeordneten OUs zugeordnet sind.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">"Condition": <span>{</span> "ForAnyValue:StringLike" : <span>{</span>
     "aws:ResourceOrgPaths":["o-a1b2c3d4e5/r-ab12/ou-ab12-11111111/*"]
}}</code></pre>
        <p>Die folgende Bedingung gibt <code class="code">True</code> für Ressourcen zurück, die sich im Besitz von Konten befinden, die direkt der OU-ID <code class="code">ou-ab12-22222222</code> angefügt sind, aber nicht ihren untergeordneten OUs. Das folgende Beispiel verwendet den Bedingungsoperator <a href="./reference_policies_elements_condition_operators.html">StringEquals</a>, um die exakte Übereinstimmungsanforderung für die OU-ID und nicht eine Platzhalter-Übereinstimmung anzugeben.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="">"Condition": <span>{</span> "ForAnyValue:StringEquals" : <span>{</span>
     "aws:ResourceOrgPaths":["o-a1b2c3d4e5/r-ab12/ou-ab12-11111111/ou-ab12-22222222/"]
}}</code></pre>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Anmerkung</h6></div><div class="awsdocs-note-text"><p>Einige AWS-Services benötigen Zugriff auf AWS-eigene Ressourcen, die in einem anderen AWS-Konto gehostet werden. Wenn Sie <code class="code">aws:ResourceOrgPaths</code> in Ihren identitätsbasierten Richtlinien verwenden, kann sich dies auf die Fähigkeit Ihrer Identität auswirken, auf diese Ressourcen zuzugreifen.</p></div></div>
        
        <p>Gewisse AWS-Services, wie AWS Data Exchange und CloudFormation, verlassen Sie sich auf den Zugriff auf Ressourcen außerhalb Ihrer AWS-Konten für den normalen Betrieb. Wenn Sie den Schlüssel <code class="code">aws:ResourceOrgPaths</code> in Ihren Richtlinien verwenden, fügen Sie zusätzliche Erklärungen hinzu, um Ausnahmen für diese Services zu erstellen. Die Beispielrichtlinie <a href="./reference_policies_examples_resource_account_data_exch.html">AWS: Verweigern des Zugriffs auf Amazon-S3-Ressourcen außerhalb Ihres Kontos, außer AWS Data Exchange</a> zeigt, wie der Zugriff basierend auf dem Ressourcenkonto verweigert wird, während Ausnahmen für serviceeigene Ressourcen definiert werden. Sie können eine ähnliche Richtlinie erstellen, um den Zugriff auf Ressourcen innerhalb Ihrer Organisationseinheit (OU) mithilfe des <code class="code">aws:ResourceOrgPaths</code>-Schlüssels zu beschränken und gleichzeitig serviceeigene Ressourcen zu berücksichtigen.</p>
        <p>Verwenden Sie diese Richtlinienbeispiele als Vorlagen für die Erstellung Ihrer eigenen benutzerdefinierten Richtlinien. Weitere Informationen finden Sie in Ihrer Service-<a href="https://docs.aws.amazon.com/index.html">Dokumentation</a>.</p>
     
        <h2 id="condition-keys-resourcetag">aws:ResourceTag/<em>tag-key</em></h2>
        <p>Funktioniert mit <a href="./reference_policies_elements_condition_operators.html#Conditions_String">Zeichenfolgenoperatoren</a>.</p>
        <p>Verwenden Sie diesen Schlüssel, um das Tag-Schlüssel-Wert-Paar, das Sie in der Richtlinie angeben, mit dem Schlüssel-Wert-Paar zu vergleichen, das der Ressource zugeordnet ist. Beispiel: Sie können verlangen, dass der Zugriff auf eine Ressource nur gewährt wird, wenn die Ressource über den angefügten Tag-Schlüssel <code class="code">"Dept"</code> mit dem Wert <code class="code">"Marketing"</code> verfügt. Weitere Informationen finden Sie unter <a href="./access_tags.html#access_tags_control-resources">Steuern des Zugriffs auf AWS-Ressourcen</a>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Verfügbarkeit</b> – Dieser Schlüssel wird in den Anforderungskontext aufgenommen, wenn die angeforderte Ressource bereits angefügte Tags hat oder in Anforderungen, die eine Ressource mit einem angefügten Tag erstellen. Dieser Schlüssel wird nur für Ressourcen zurückgegeben, die <a href="./reference_aws-services-that-work-with-iam.html">Berechtigung auf Basis von Tags</a> unterstützen. Es gibt einen Kontextschlüssel für jedes Tag-Schlüssel-Wert-Paar.</p>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Einzelwertig</p>
            </li></ul></div>
        <p>Dieser Kontextschlüssel liegt im Format <code class="code">"aws:ResourceTag/<code class="replaceable">tag-key</code>":"<code class="replaceable">tag-value</code>"</code> vor. Dabei bezeichnen <code class="replaceable">tag-key</code> und <code class="replaceable">tag-value</code> ein Paar aus Tag-Schlüssel und -Wert. Bei Tag-Schlüsseln und -Werten wird nicht zwischen Groß- und Kleinschreibung unterschieden. Dies bedeutet Folgendes: Wenn Sie <code class="code">"aws:ResourceTag/TagKey1": "Value1"</code> im Bedingungselement Ihrer Richtlinie angeben, stimmt die Bedingung mit einem Ressourcen-Tag-Schlüssel mit dem Namen <code class="code">TagKey1</code> oder <code class="code">tagkey1</code> überein, aber nicht mit beiden.</p>
        <p>Beispiele für die Verwendung des <code class="code">aws:ResourceTag</code>-Schlüssels zur Steuerung des Zugriffs auf IAM-Ressourcen finden Sie unter <a href="./access_tags.html#access_tags_control-resources">Steuern des Zugriffs auf AWS-Ressourcen</a>.</p>
        <p>Beispiele für die Verwendung des <code class="code">aws:ResourceTag</code>-Schlüssels zur Steuerung des Zugriffs auf andere AWS-Ressourcen finden Sie unter <a href="./access_tags.html">Steuern des Zugriffs auf AWS-Ressourcen mithilfe von Tags</a>.</p>
        <p>Ein Tutorial zur Verwendung des <code class="code">aws:ResourceTag</code>-Bedingungsschlüssels für attributbasierte Zugriffskontrolle (ABAC) finden Sie unter <a href="./tutorial_attribute-based-access-control.html">IAM-Tutorial: Definieren von Berechtigungen für den Zugriff auf AWS-Ressourcen basierend auf Tags</a>.</p>
     
        <h2 id="condition-keys-securetransport">aws:SecureTransport</h2>
        <p>Arbeitet mit <a href="./reference_policies_elements_condition_operators.html#Conditions_Boolean">booleschen Operatoren</a>.</p>
        <p>Mit diesem Schlüssel können Sie überprüfen, ob die Anforderung über SSL gesendet wurde. Der Anforderungskontext gibt <code class="code">true</code> oder <code class="code">false</code> zurück. In einer Richtlinie können Sie bestimmte Aktionen nur zulassen, wenn die Anforderung mit SSL gesendet wird.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Verfügbarkeit</b> – Dieser Schlüssel ist immer im Anforderungskontext enthalten.</p>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Einzelwertig</p>
            </li></ul></div>
     
        <h2 id="condition-keys-sourceaccount">aws:SourceAccount</h2>
        <p>Funktioniert mit <a href="./reference_policies_elements_condition_operators.html#Conditions_String">Zeichenfolgenoperatoren</a>.</p>
        <p>Verwenden Sie diesen Schlüssel, um die Konto-ID der Ressource, von der eine Service-zu-Service-Anforderung stammt, mit der Konto-ID zu vergleichen, die Sie in der Richtlinie angeben. </p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Verfügbarkeit</b> – Dieser Schlüssel ist nur dann im Anforderungskontext enthalten, wenn durch den Zugriff auf eine Ressource ein AWS-Service dazu veranlasst wird, einen anderen Service im Namen des Ressourceneigentümers aufzurufen. Der aufrufende Dienst muss die Ressourcenkonto-ID der Quelle an den aufgerufenen Dienst weitergeben. Diese Konto-ID enthält die ID des Quellkontos.</p>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Einzelwertig</p>
            </li></ul></div>
        <p>Sie können diesen Bedingungsschlüssel verwenden, um zu verhindern, dass ein AWS-Dienst bei Transaktionen zwischen Diensten als <a href="./confused-deputy.html">verwechselter Stellvertreter</a> verwendet wird. Legen Sie den Wert dieses Bedingungsschlüssels auf das Konto der Ressource in der Anforderung fest. Wenn beispielsweise eine Aktualisierung eines Amazon S3-Buckets einen Amazon SNS-Themenbeitrag auslöst, ruft der Amazon S3-Service den <code class="code">sns:Publish</code>-API-Vorgang auf. Setzen Sie in der Richtlinie, die den Vorgang <code class="code">sns:Publish</code> erlaubt, den Wert des Bedingungsschlüssels auf die Konto-ID des Amazon S3-Buckets. Informationen darüber, wie und wann diese Bedingungsschlüssel empfohlen werden, finden Sie in der Dokumentation der von Ihnen verwendeten AWS-Dienste.</p>
     
        <h2 id="condition-keys-sourcearn">aws:SourceArn</h2>
        <p>Arbeitet mit <a href="./reference_policies_elements_condition_operators.html#Conditions_ARN">ARN-Produktion</a> und <a href="./reference_policies_elements_condition_operators.html#Conditions_String">Zeichenfolgenproduktionen</a>. AWS empfiehlt, ARN-Produktionen anstelle von String-Produktionen zu verwenden, wenn Sie ARNs vergleichen.</p>
        <p>Verwenden Sie diesen Schlüssel, um den <a href="./reference_identifiers.html#identifiers-arns">Amazon Resource Name (ARN)</a> der Ressource, von der eine Service-zu-Service-Anforderung stammt, mit dem von Ihnen in der Richtlinie angegebenen ARN zu vergleichen. </p>
        <p>Dieser Schlüssel funktioniert nicht mit dem ARN des Auftraggebers, der die Anforderung stellt. Verwenden Sie stattdessen <a href="#condition-keys-principalarn">aws:PrincipalArn</a>. Der ARN der Quelle enthält die Konto-ID, daher ist es nicht erforderlich, <code class="code">aws:SourceAccount</code> mit <code class="code">aws:SourceArn</code> zu verwenden.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Verfügbarkeit</b> – Dieser Schlüssel ist nur dann im Anforderungskontext enthalten, wenn durch den Zugriff auf eine Ressource ein AWS-Service dazu veranlasst wird, einen anderen Service im Namen des Ressourceneigentümers aufzurufen. Der aufrufende Service muss den ARN der ursprünglichen Ressource an den aufgerufenen Service übergeben.</p>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Einzelwertig</p>
            </li></ul></div>
        <p>Sie können diesen Bedingungsschlüssel verwenden, um zu verhindern, dass ein AWS-Dienst bei Transaktionen zwischen Diensten als <a href="./confused-deputy.html">verwechselter Stellvertreter</a> verwendet wird. Legen Sie den Wert dieses Bedingungsschlüssels auf den ARN der Ressource in der Anforderung fest. Wenn beispielsweise eine Aktualisierung eines Amazon S3-Buckets einen Amazon SNS-Themenbeitrag auslöst, ruft der Amazon S3-Service den <code class="code">sns:Publish</code>-API-Vorgang auf. Setzen Sie in der Richtlinie, die den Vorgang <code class="code">sns:Publish</code> zulässt, den Wert des Bedingungsschlüssels auf den ARN des Amazon S3-Buckets. Informationen darüber, wie und wann diese Bedingungsschlüssel empfohlen werden, finden Sie in der Dokumentation der von Ihnen verwendeten AWS-Dienste.</p>
     
        <h2 id="condition-keys-sourceidentity">AWS:QuellenIdentity</h2>
        <p>Funktioniert mit <a href="./reference_policies_elements_condition_operators.html#Conditions_String">Zeichenfolgenoperatoren</a>.</p>
        <p>Verwenden Sie diesen Schlüssel, um die Queltidentität, die vom Auftraggeber festgelegt wurde, mit der Quellidentität zu vergleichen, die Sie in der Richtlinie angeben. </p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Verfügbarkeit</b> – Dieser Schlüssel wird im Anforderungskontext enthalten, nachdem eine Quellidentität festgelegt wurde, wenn eine Rolle mit einem AWS STSassume-role CLI-Befehl oder AWS STS <code class="code">AssumeRole</code>API-Operation.</p>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Einzelwertig</p>
            </li></ul></div>
        <p>Sie können diesen Schlüssel in einer Richtlinie verwenden, um Aktionen in AWS von Auftraggebern zu erlauben, die bei der Übernahme einer Rolle eine Quellidentität festgelegt haben. Die Aktivität für die angegebene Quellidentität der Rolle erscheint in <a href="./cloudtrail-integration.html#cloudtrail-integration_signin-tempcreds">AWS CloudTrail</a>. Auf diese Weise können Administratoren leichter feststellen, welcher Benutzer eine bestimmte Aktion in AWS ausgeführt hat.</p>
        <p>Im Gegensatz zu <a href="./reference_policies_iam-condition-keys.html#ck_rolesessionname">sts:RoleSessionName</a>, nachdem die Quellidentität festgelegt wurde, kann der Wert nicht geändert werden. Es ist im Kontext der Anforderung aller Aktionen vorhanden, die von der Rolle ausgeführt werden. Wenn Sie die Sitzungsanmeldeinformationen verwenden, bleibt der Wert in nachfolgenden Rollensitzungen bestehen, um eine andere Rolle anzunehmen. Die Annahme einer Rolle von einer anderen wird als <a href="./id_roles_terms-and-concepts.html#iam-term-role-chaining">Rollenverkettung</a> bezeichnet. </p>
        <p>Die<a href="./reference_policies_iam-condition-keys.html#ck_sourceidentity">sts:SourceIdentity</a>-Schlüssel ist in der Anforderung vorhanden, wenn der Auftraggeber zunächst eine Quellidentität festlegt, während er eine Rolle mit einemAWS STSassume-role CLI-Befehl oderAWS STS <code class="code">AssumeRole</code>API-Operation. Der Schlüssel <code class="code">aws:SourceIdentity</code> ist in der Anforderung für alle Aktionen vorhanden, die mit einer Rollensitzung durchgeführt werden, für die eine Quellidentität festgelegt wurde.</p>
        <p>Die folgende Rollen-Vertrauensrichtlinie für <code class="code">CriticalRole</code> im Konto <code class="code">111122223333</code> enthält eine Bedingung für <code class="code">aws:SourceIdentity</code>, die verhindert, dass ein Auftraggeber ohne eine Quellidentität, die auf Saanvi oder Diego eingestellt ist, die Rolle übernehmen kann.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "AssumeRoleIfSourceIdentity",
            "Effect": "Allow",
            "Principal": <span>{</span>"AWS": "arn:aws:iam::123456789012:role/CriticalRole"},
            "Action": [
                "sts:AssumeRole",
                "sts:SetSourceIdentity"
            ],
            "Condition": <span>{</span>
                "StringLike": <span>{</span>
                    "aws:SourceIdentity": ["Saanvi","Diego"]
                }
            }
        }
    ]
}
</code></pre>
        <p>Weitere Informationen zur Verwendung von Quellidentitätsinformationen finden Sie unter <a href="./id_credentials_temp_control-access_monitor.html">Überwachen und Steuern von Aktionen mit übernommenen Rollen</a>.</p>
     
        <h2 id="condition-keys-sourceip">aws:SourceIp</h2>
        <p>Funktioniert mit <a href="./reference_policies_elements_condition_operators.html#Conditions_IPAddress">IP-Adressoperatoren</a>.</p>
        <p>Verwenden Sie diesen Schlüssel, um die IP-Adresse des Anforderers mit der IP-Adresse zu vergleichen, die Sie in der Richtlinie angeben. Der <code class="code">aws:SourceIp</code>-Bedingungsschlüssel kann nur für öffentliche IP-Adressbereiche verwendet werden.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Verfügbarkeit</b> – Dieser Schlüssel ist im Anforderungskontext enthalten, es sei denn, der Anforderer verwendet einen VPC-Endpunkt für die Anforderung.</p>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Einzelwertig</p>
            </li></ul></div>
        <p>Der <code class="code">aws:SourceIp</code>-Bedingungsschlüssel kann in einer Richtlinie verwendet werden, um Auftraggeber zu erlauben, Anforderungen nur innerhalb eines angegebenen IP-Bereichs zu stellen. Diese Richtlinie verweigert jedoch den Zugriff, wenn ein AWS-Service im Namen des Auftraggebers Aufrufe durchführt. In diesem Fall können Sie <code class="code">aws:SourceIp</code> mit dem Schlüssel <code class="code"><a href="#condition-keys-viaawsservice">aws:ViaAWSService</a></code> verwenden, um sicherzustellen, dass die Quell-IP-Einschränkung nur für Anforderungen gilt, die direkt von einem Auftraggeber stammen. </p>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Anmerkung</h6></div><div class="awsdocs-note-text"><p> <code class="code">aws:SourceIp</code> unterstützt IPv4- und IPv6-IP-Adressen oder einen Bereich von IP-Adressen. Einzelheiten finden Sie unter <a href="https://docs.aws.amazon.com/marketplace/latest/buyerguide/buyer-security-ipv6-upgrade.html">Aktualisieren von IAM-Richtlinien auf IPv6</a>.</p></div></div>
        <p>Sie können einem IAM-Benutzer z. B. die folgende Richtlinie zuweisen. Diese Richtlinie ermöglicht es dem Benutzer, ein Objekt direkt in den Amazon S3-Bucket <code class="code"><code class="replaceable">DOC-EXAMPLE-BUCKET3</code></code> zu legen, wenn er den Aufruf über die angegebene IP-Adresse durchführt. Wenn der Benutzer jedoch eine andere Anforderung stellt, die einen Dienst veranlasst, Amazon S3 aufzurufen, gilt die IP-Adressbeschränkung nicht. Die Anweisung <code class="code">PrincipalPutObjectIfIpAddress</code> schränkt die IP-Adresse nur ein, wenn die Anforderung nicht von einem Service ausgegeben wird. Die Anweisung <code class="code">ServicePutObject</code> erlaubt die Operation ohne IP-Adresseinschränkung, wenn die Anforderung von einem Service ausgegeben wird.</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "Version": "2012-10-17",
    "Statement": [
        <span>{</span>
            "Sid": "PrincipalPutObjectIfIpAddress",
            "Effect": "Allow",
            "Action": "s3:PutObject",
            "Resource": "arn:aws:s3:::<code class="replaceable">DOC-EXAMPLE-BUCKET3</code>/*",
            "Condition": <span>{</span>
                "Bool": <span>{</span>"aws:ViaAWSService": "false"},
                "IpAddress": <span>{</span>"aws:SourceIp": "<code class="replaceable">203.0.113.0</code>"}
            }
        },
        <span>{</span>
            "Sid": "ServicePutObject",
            "Effect": "Allow",
            "Action": "s3:PutObject",
            "Resource": "arn:aws:s3:::<code class="replaceable">DOC-EXAMPLE-BUCKET</code>/*",
            "Condition": <span>{</span>
                "Bool": <span>{</span>"aws:ViaAWSService": "true"}
            }
        }
    ]
}</code></pre>
        <p>Wenn die Anforderung von einem Host stammt, der einen Amazon VPC-Endpunkt verwendet, ist der Schlüssel <code class="code">aws:SourceIp</code> nicht verfügbar. Sie sollten stattdessen einen VPC-spezifischen Schlüssel wie aws:VpcSourceIp verwenden. Weitere Informationen zur Verwendung von VPC-Endpunkten finden Sie unter <a href="https://docs.aws.amazon.com/vpc/latest/privatelink/vpc-endpoints-iam.html">Identitäts- und Zugriffsmanagement für VPC-Endpunkte und VPC-Endpunkt-Services</a> im <em>AWS PrivateLink-Leitfaden</em>.</p>
     
        <h2 id="condition-keys-sourcevpc">aws:SourceVpc</h2>
        <p>Funktioniert mit <a href="./reference_policies_elements_condition_operators.html#Conditions_String">Zeichenfolgenoperatoren</a>.</p>
        <p>Verwenden Sie diesen Schlüssel, um zu überprüfen, ob die Anforderung von der VPC stammt, die Sie in der Richtlinie angeben. In einer Richtlinie können Sie diesen Schlüssel verwenden, um den Zugriff auf nur eine bestimmte VPC zu erlauben. Weitere Informationen finden Sie unter <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/example-bucket-policies-vpc-endpoint.html#example-bucket-policies-restrict-access-vpc">Beschränkung des Zugriffs auf eine bestimmte VPC</a> im <em>Benutzerhandbuch für Amazon Simple Storage Service</em>. </p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Verfügbarkeit</b> – Dieser Schlüssel ist nur dann im Anforderungskontext enthalten, wenn der Anforderer einen VPC-Endpunkt für die Anforderung verwendet.</p>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Einzelwertig</p>
            </li></ul></div>
     
        <h2 id="condition-keys-sourcevpce">aws:SourceVpce</h2>
        <p>Funktioniert mit <a href="./reference_policies_elements_condition_operators.html#Conditions_String">Zeichenfolgenoperatoren</a>.</p>
        <p>Verwenden Sie diesen Schlüssel, um die VPC-Endpunkt-ID der Anforderung mit der Endpunkt-ID zu vergleichen, die Sie in der Richtlinie angeben. In einer Richtlinie können Sie diesen Schlüssel verwenden, um den Zugriff auf einen bestimmten VPC-Endpunkt zu beschränken. Weitere Informationen finden Sie unter <a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/example-bucket-policies-vpc-endpoint.html#example-bucket-policies-restrict-access-vpc-endpoint">Beschränken des Zugriffs auf einen bestimmten VPC-Endpunkt</a> im <em>Benutzerhandbuch für Amazon Simple Storage Service</em>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Verfügbarkeit</b> – Dieser Schlüssel ist nur dann im Anforderungskontext enthalten, wenn der Anforderer einen VPC-Endpunkt für die Anforderung verwendet.</p>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Einzelwertig</p>
            </li></ul></div>
     
        <h2 id="condition-keys-tagkeys">aws:TagKeys</h2>
        <p>Funktioniert mit <a href="./reference_policies_elements_condition_operators.html#Conditions_String">Zeichenfolgenoperatoren</a>.</p>
        <p>Verwenden Sie diesen Schlüssel, um die Tag-Schlüssel in einer Anforderung mit den Schlüsseln zu vergleichen, die Sie in der Richtlinie angeben. Wir empfehlen, dass Sie bei der Verwendung von Richtlinien zur Zugriffskontrolle mithilfe von Tags den <code class="code">aws:TagKeys</code>-Bedingungsschlüssel verwenden, um festzulegen, welche Tag-Schlüssel zulässig sind. Beispielrichtlinien und weitere Informationen finden Sie unter <a href="./access_tags.html#access_tags_control-tag-keys">Zugriffssteuerung auf der Grundlage von Tag-Schlüsseln</a>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Verfügbarkeit</b> – Dieser Schlüssel ist in den Anforderungskontext enthalten, wenn die Operation die Übergabe von Tags in der Anforderung unterstützt.</p>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Mehrwertig</p>
            </li></ul></div>
        <p>Dieser Kontextschlüssel liegt im Format <code class="code">"aws:TagKeys":"<code class="replaceable">tag-key</code>"</code> vor. Dabei ist <code class="replaceable">tag-key</code> eine Liste von Tag-Schlüsseln ohne Werte (z. B. <code class="code">["Dept","Cost-Center"]</code>).</p>
        <p>Da Sie mehrere Tag-Schlüssel-Wert-Paare in eine Anforderung aufnehmen können, könnte der Anforderungsinhalt eine <a href="./reference_policies_multi-value-conditions.html">mehrwertige</a> Anforderung sein. In diesem Fall müssen Sie die Operatoren <code class="code">ForAllValues</code> oder <code class="code">ForAnyValue</code> verwenden. Weitere Informationen finden Sie unter <a href="./reference_policies_multi-value-conditions.html#reference_policies_multi-key-or-value-conditions">Verwenden mehrerer Schlüssel und Werte</a>.</p>
        <p>Einige Services unterstützen das Markieren mit Ressourcenoperationen, wie etwa das Erstellen, Ändern oder Löschen einer Ressource. Um das Markieren und Operationen als einzelnen Aufruf zu erlauben, müssen Sie eine Richtlinie erstellen, die die Aktionen Markieren und Ressourcenbearbeitung enthält. Anschließend können Sie den <code class="code">aws:TagKeys</code>-Bedingungsschlüssel zum Erzwingen mit spezifischen Tag-Schlüssel in der Anforderung verwenden. Beispiel: Zum Einschränken von Tags, wenn jemand einen Amazon EC2-Snapshot erstellt, müssen Sie die Aktion zum Erstellen eines <code class="code">ec2:CreateSnapshot</code> <em><b>und</b></em> die Aktion zum Markieren von <code class="code">ec2:CreateTags</code> in die Richtlinie einbeziehen. Eine Richtlinie für dieses Szenario, die <code class="code">aws:TagKeys</code> verwendet, finden Sie unter <a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ExamplePolicies_EC2.html#iam-creating-snapshot-with-tags">Creating a Snapshot with Tags</a> im <em>Amazon EC2 Leitfaden für Linux-Instances</em>. </p>
     
        <h2 id="condition-keys-tokenissuetime">aws:TokenIssueTime</h2>
        <p>Funktioniert mit <a href="./reference_policies_elements_condition_operators.html#Conditions_Date">Datumsoperatoren</a>.</p>
        <p>Verwenden Sie diesen Schlüssel, um das Datum und die Uhrzeit der Ausstellung der Sicherheitsanmeldeinformationen mit dem Datum und der Uhrzeit zu vergleichen, das bzw. die Sie in der Richtlinie angeben. </p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Availability</b> – Dieser Schlüssel ist nur dann im Anforderungskontext enthalten, wenn der Auftraggeber temporäre Anmeldeinformationen für die Anforderung verwendet. Der Schlüssel ist in AWS CLI-, AWS-API- oder AWS-SDK-Anforderungen, die mit Zugriffsschlüsseln gestellt werden, nicht vorhanden.</p>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Einzelwertig</p>
            </li></ul></div>
        <p>Informationen darüber, welche Services die Verwendung von temporären Anmeldeinformationen unterstützen, finden Sie unter <a href="./reference_aws-services-that-work-with-iam.html">AWS-Services, die mit IAM funktionieren</a>.</p>
     
        <h2 id="condition-keys-useragent">aws:UserAgent</h2>
        <p>Funktioniert mit <a href="./reference_policies_elements_condition_operators.html#Conditions_String">Zeichenfolgenoperatoren</a>.</p>
        <p>Verwenden Sie diesen Schlüssel, um die Client-Anwendung des Anforderers mit der Anwendung zu vergleichen, die Sie in der Richtlinie angeben.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Verfügbarkeit</b> – Dieser Schlüssel ist immer im Anforderungskontext enthalten.</p>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Einzelwertig</p>
            </li></ul></div>
        <div class="awsdocs-note awsdocs-warning"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Warnung</h6></div><div class="awsdocs-note-text"><p>Dieser Schlüssel sollte mit Vorsicht verwendet werden. Da der Wert <code class="code">aws:UserAgent</code> vom Aufrufer in einem HTTP-Header bereitgestellt wird, können nicht autorisierte Parteien modifizierte oder benutzerdefinierte Browser verwenden, um beliebige <code class="code">aws:UserAgent</code>-Werte bereitzustellen. Daher sollten Sie <code class="code">aws:UserAgent</code> nicht verwenden, um zu verhindern, dass nicht autorisierte Parteien direkte AWS-Anforderungen senden. Sie können es verwenden, um nur bestimmte Client-Anwendungen zuzulassen, und zwar erst nach dem Testen Ihrer Richtlinie.</p></div></div>
     
        <h2 id="condition-keys-userid">aws:userid</h2>
        <p>Funktioniert mit <a href="./reference_policies_elements_condition_operators.html#Conditions_String">Zeichenfolgenoperatoren</a>.</p>
        <p>Verwenden Sie diesen Schlüssel, um die Auftraggeber-ID des Anforderers mit der ID zu vergleichen, die Sie in der Richtlinie angeben. Bei IAM-Benutzern ist der Anforderungskontextwert die Benutzer-ID. Bei IAM-Rollen kann dieses Werteformat variieren. Weitere Informationen dazu, wie die Informationen für verschiedene Auftraggeber angezeigt werden, finden Sie unter <a href="./reference_policies_elements_principal.html#Principal_specifying">Angeben eines Auftraggebers</a>. Für konkrete Beispiele von <code class="code">principal</code>-Schlüsselwerten, siehe <a href="./reference_policies_variables.html#principaltable">Auftraggeber-Schlüsselwerte</a>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Verfügbarkeit</b> – Dieser Schlüssel ist im Anforderungskontext für alle Anforderungen, einschließlich anonymer Anforderungen, enthalten.</p>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Einzelwertig</p>
            </li></ul></div>
     
        <h2 id="condition-keys-username">aws:username</h2>
        <p>Funktioniert mit <a href="./reference_policies_elements_condition_operators.html#Conditions_String">Zeichenfolgenoperatoren</a>.</p>
        <p>Verwenden Sie diesen Schlüssel, um den Benutzernamen des Anforderers mit dem Benutzernamen zu vergleichen, den Sie in der Richtlinie angeben. Weitere Informationen dazu, wie die Informationen für verschiedene Auftraggeber angezeigt werden, finden Sie unter <a href="./reference_policies_elements_principal.html#Principal_specifying">Angeben eines Auftraggebers</a>. Für konkrete Beispiele von <code class="code">principal</code>-Schlüsselwerten, siehe <a href="./reference_policies_variables.html#principaltable">Auftraggeber-Schlüsselwerte</a>.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Verfügbarkeit</b> – Dieser Schlüssel ist immer im Anforderungskontext für IAM-Benutzer enthalten. Anonyme Anforderungen und Anforderungen, die über Root-Benutzer des AWS-Kontos oder IAM-Rollen gestellt werden, enthalten diesen Schlüssel nicht. Anforderungen, die mit IAM Identity Center-Anmeldeinformationen gestellt werden, enthalten diesen Schlüssel nicht im Kontext. Informationen zur Steuerung des Zugriffs auf Benutzer im IAM Identity Center finden Sie in <code class="code">identitystore:UserId</code> unter <a href="https://docs.aws.amazon.com/singlesignon/latest/userguide/using-predefined-attributes.html">Verwendung vordefinierter Attribute aus dem IAM Identity Center-Identitätsspeicher für die Zugriffskontrolle in AWS</a>. Benutzer im IAM Identity Center sind die Personen in Ihrer Belegschaft, die Zugriff auf Ihre AWS-Konten oder für Ihre Cloud-Anwendungen haben.</p>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Einzelwertig</p>
            </li></ul></div>
     
        <h2 id="condition-keys-viaawsservice">aws:ViaAWSService</h2>
        <p>Arbeitet mit <a href="./reference_policies_elements_condition_operators.html#Conditions_Boolean">booleschen Operatoren</a>.</p>
        <p>Verwenden Sie diesen Schlüssel, um zu überprüfen, ob ein AWS-Service in Ihrem Namen eine Anforderung an einen anderen Service ausgibt.</p>
        <p>Der Anforderungskontextschlüssel gibt <code class="code">true</code> zurück, wenn ein Service die Anmeldeinformationen eines IAM-Auftraggebers verwendet, um eine Anforderung im Auftrag des Auftraggebers zu stellen. Der Kontextschlüssel gibt <code class="code">false</code> zurück, wenn der Service eine <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-role">Servicerolle</a> oder eine <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-linked-role">serviceverknüpfte Rolle</a> verwendet, um einen Aufruf im Auftrag des Auftraggebers durchzuführen. Der Anforderungskontextschlüssel gibt auch <code class="code">false</code> zurück, wenn der Auftraggeber den Aufruf direkt durchführt.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Verfügbarkeit</b> – Dieser Schlüssel ist immer im Anforderungskontext enthalten.</p>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Einzelwertig</p>
            </li></ul></div>
        <p>Sie können diesen Bedingungsschlüssel verwenden, um den Zugriff basierend darauf zuzulassen oder zu verweigern, ob eine Anforderung von einem Service ausgegeben wurde. Eine Beispielrichtlinie finden Sie unter <a href="./reference_policies_examples_aws_deny-ip.html">AWS: Verwehrt den Zugriff auf AWS basierend auf der Quell-IP</a>.</p>
     
        <h2 id="condition-keys-vpcsourceip">aws:VpcSourceIp</h2>
        <p>Funktioniert mit <a href="./reference_policies_elements_condition_operators.html#Conditions_IPAddress">IP-Adressoperatoren</a>.</p>
        <p>Verwenden Sie diesen Schlüssel, um die IP-Adresse, von der eine Anforderung stammt, mit der IP-Adresse zu vergleichen, die Sie in der Richtlinie angeben. In einer Richtlinie stimmt der Schlüssel nur dann überein, wenn die Anforderung von der angegebenen IP-Adresse stammt und über einen VPC-Endpunkt geleitet wird.</p>
        <div class="itemizedlist">
             
             
        <ul class="itemizedlist"><li class="listitem">
                <p><b>Verfügbarkeit</b> – Dieser Schlüssel ist nur dann im Anforderungskontext enthalten, wenn die Anforderung über einen VPC-Endpunkt erfolgt.</p>
            </li><li class="listitem">
                <p><b>Werttyp</b> - Einzelwertig</p>
            </li></ul></div>
        <p>Weitere Informationen finden Sie unter <a href="https://docs.aws.amazon.com/vpc/latest/userguide/vpc-endpoints-access.html">Steuerung des Zugriffs auf Services mit VPC-Endpunkten</a> im <em>Amazon VPC User Guide</em>.</p>
     
        <h2 id="condition-keys-other">Andere dienstübergreifende Bedingungsschlüssel</h2>
        <p>Globale Bedingungsschlüssel sind Bedingungsschlüssel mit einem <code class="code">aws:</code>-Präfix. Einzelne Dienste können ihre eigenen Bedingungsschlüssel erstellen. Diese dienstspezifischen Bedingungsschlüssel enthalten ein Präfix, das mit dem Namen des Dienstes übereinstimmt, wie <code class="code">iam:</code> oder <code class="code">sts:</code>.</p>
        <p>Services können dienstspezifische Schlüssel erstellen, die im Anforderungskontext für andere Dienste verfügbar sind. Diese Schlüssel sind für mehrere Services verfügbar, sind jedoch keine globalen Bedingungsschlüssel. AWS STS unterstützt beispielsweise <a href="./reference_policies_iam-condition-keys.html#condition-keys-saml">SAML-basierte Verbund-Bedingungsschlüssel</a>. Diese Schlüssel sind verfügbar, wenn ein Benutzer, der mit SAML verbunden war, AWS Vorgänge in anderen Diensten ausführt. Beispiele hierfür sind <code class="code"><a href="https://docs.aws.amazon.com/singlesignon/latest/userguide/using-predefined-attributes.html">identitystore:UserId</a></code> und <code class="code"><a href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-policy-structure.html#amazon-ec2-keys">ec2:SourceInstanceArn</a></code>.</p>
        <p>Informationen zum Anzeigen der dienstspezifischen Bedingungsschlüssel für einen Dienst finden Sie unter <a href="https://docs.aws.amazon.com/service-authorization/latest/reference/reference_policies_actions-resources-contextkeys.html">Aktionen, Ressourcen und Bedingungsschlüssel für AWS Services</a>. Wählen Sie anschließend den Dienst aus, dessen Schlüssel Sie anzeigen möchten.</p>
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warnung" /> <strong>JavaScript ist in Ihrem Browser nicht verfügbar oder deaktiviert.</strong></p><p>Zur Nutzung der AWS-Dokumentation muss JavaScript aktiviert sein. Weitere Informationen finden auf den Hilfe-Seiten Ihres Browsers.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Dokumentkonventionen</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./access_policies_job-functions_create-policies.html">Erstellen von Rollen und Anfügen von Richtlinien (Konsole)</div><div id="next" class="next-link" accesskey="n" href="./reference_policies_iam-condition-keys.html">IAM-Bedingungsschlüssel</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Hat Ihnen diese Seite geholfen? – Ja</div><div class="content"><p>Vielen Dank, dass Sie uns mitgeteilt haben, dass wir gute Arbeit geleistet haben!</p><p>Würden Sie sich einen Moment Zeit nehmen, um uns mitzuteilen, was wir richtig gemacht haben, damit wir noch besser werden?</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/reference_policies_condition-keys.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Hat Ihnen diese Seite geholfen? – Nein</div><div class="content"><p>Vielen Dank, dass Sie uns mitgeteilt haben, dass diese Seite überarbeitet werden muss. Es tut uns Leid, dass wir Ihnen nicht weiterhelfen konnten.</p><p>Würden Sie sich einen Moment Zeit nehmen, um uns mitzuteilen, wie wir die Dokumentation verbessern können?</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=IAM&amp;topic_url=https://docs.aws.amazon.com/de_de/IAM/latest/UserGuide/reference_policies_condition-keys.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>