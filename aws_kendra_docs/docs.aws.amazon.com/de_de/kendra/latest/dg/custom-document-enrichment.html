<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="de-DE"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Anreicherung Ihrer Dokumente während der Aufnahme - Amazon Kendra</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="custom-document-enrichment" /><meta name="default_state" content="custom-document-enrichment" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/de_de/kendra/latest/dg/custom-document-enrichment.html" /><meta name="description" content="So erstellen, ändern oder löschen Sie Dokumenten-Attribute und -Inhalte während der Dokumentenerfassung inAmazon Kendra." /><meta name="deployment_region" content="IAD" /><meta name="product" content="Amazon Kendra" /><meta name="guide" content="Entwicklerhandbuch" /><meta name="abstract" content="Bietet eine konzeptionelle Übersicht über Amazon Kendra. Erfahren Sie mehr überAmazon Kendra Funktionen und beginnen Sie mit der Indexierung Ihrer Dokumente mithilfe der Konsole, der CLI und der API." /><meta name="guide-locale" content="de_de" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/de_de/kendra/latest/dg/custom-document-enrichment.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/kendra/latest/dg/custom-document-enrichment.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/kendra/latest/dg/custom-document-enrichment.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/kendra/latest/dg/custom-document-enrichment.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/kendra/latest/dg/custom-document-enrichment.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/kendra/latest/dg/custom-document-enrichment.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/kendra/latest/dg/custom-document-enrichment.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/kendra/latest/dg/custom-document-enrichment.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/kendra/latest/dg/custom-document-enrichment.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/kendra/latest/dg/custom-document-enrichment.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/kendra/latest/dg/custom-document-enrichment.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/kendra/latest/dg/custom-document-enrichment.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/kendra/latest/dg/custom-document-enrichment.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/kendra/latest/dg/custom-document-enrichment.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/kendra/latest/dg/custom-document-enrichment.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/kendra/latest/dg/custom-document-enrichment.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/kendra/latest/dg/custom-document-enrichment.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/kendra/latest/dg/custom-document-enrichment.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/kendra/latest/dg/custom-document-enrichment.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/kendra/latest/dg/custom-document-enrichment.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/kendra/latest/dg/custom-document-enrichment.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/kendra/latest/dg/custom-document-enrichment.html" hreflang="x-default" /><meta name="feedback-item" content="Kendra" /><meta name="this_doc_product" content="Amazon Kendra" /><meta name="this_doc_guide" content="Entwicklerhandbuch" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'kendra'}"></script><meta id="panorama-serviceSubSection" value="Entwicklerhandbuch" /><meta id="panorama-serviceConsolePage" value="Anreicherung Ihrer Dokumente während der Aufnahme" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Anreicherung Ihrer Dokumente während der Aufnahme - Amazon Kendra</title><meta name="pdf" content="kendra-dg.pdf#custom-document-enrichment" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Kendra&amp;topic_url=http://docs.aws.amazon.com/de_de/kendra/latest/dg/custom-document-enrichment.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/de_de/kendra/latest/dg/custom-document-enrichment.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/de_de/kendra/latest/dg/custom-document-enrichment.html" /><meta name="keywords" content="Kendra,Amazon Kendra,search,intelligente Suche,natürliche Sprache,index,question,Schlüsselwort,Datenquelle,Anschluss,Häufig gestellte Fragen,häufig gestellte Frage" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "Amazon Kendra",
        "item" : "https://docs.aws.amazon.com/kendra/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "Entwicklerhandbuch",
        "item" : "https://docs.aws.amazon.com/de_de/kendra/latest/dg"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Anreicherung Ihrer Dokumente während der Aufnahme",
        "item" : "https://docs.aws.amazon.com/de_de/kendra/latest/dg/custom-document-enrichment.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="kendra-dg.pdf#custom-document-enrichment" target="_blank" rel="noopener noreferrer" title="PDF öffnen"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Dokumentation</a><a href="/kendra/index.html">Amazon Kendra</a><a href="what-is-kendra.html">Entwicklerhandbuch</a></div><div id="page-toc-src"><a href="#how-custom-document-enrichment-works">So funktioniert Custom Document Enrichment</a><a href="#basic-data-maniplation">Grundlegende Operationen zum Ändern von Metadaten</a><a href="#advanced-data-manipulation">Lambda-Funktionen: Metadaten oder Inhalte extrahieren und ändern</a><a href="#cde-data-contracts-lambda">Datenverträge für Lambda-Funktionen</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><awsui-alert class="awsdocs-page-banner awsui-util-mb-l"><p>Die vorliegende Übersetzung wurde maschinell erstellt. Im Falle eines Konflikts oder eines Widerspruchs zwischen dieser übersetzten Fassung und der englischen Fassung (einschließlich infolge von Verzögerungen bei der Übersetzung) ist die englische Fassung maßgeblich.</p></awsui-alert><h1 class="topictitle" id="custom-document-enrichment">Anreicherung Ihrer Dokumente während der Aufnahme</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>Sie können Ihre Inhalte- und Dokumentenmetadaten-Felder oder Attribute während der Dokumentenerfassung ändern. MitAmazon Kendra der Funktion „<em>Benutzerdefinierte Dokumentenanreicherung</em>“ können Sie Dokumentattribute und Inhalte erstellen, ändern oder löschen, wenn Sie Ihre Dokumente importierenAmazon Kendra. Das bedeutet, dass Sie Ihre Daten nach Bedarf bearbeiten und aufnehmen können.</p><p>Mit dieser Funktion haben Sie die Kontrolle darüber, wie Ihre Dokumente behandelt und in sie aufgenommen werdenAmazon Kendra. Sie können beispielsweise personenbezogene Daten in den Metadaten des Dokuments löschen, während Sie Ihre Dokumente in das Dokument einfügenAmazon Kendra.</p><p>Sie können diese Funktion auch verwenden, indem Sie eine Lambda-Funktion aufrufen,AWS Lambda um die optische Zeichenerkennung (OCR) für Bilder, die Übersetzung für Text und andere Aufgaben zur Vorbereitung der Daten für die Suche oder Analyse auszuführen. Sie können beispielsweise eine Funktion aufrufen, um OCR auf Bildern auszuführen. Die Funktion könnte Text aus Bildern interpretieren und jedes Bild als Textdokument behandeln. Ein Unternehmen, das Kundenumfragen per Post erhält und diese Umfragen als Bilder speichert, könnte diese Bilder als Textdokumente aufnehmenAmazon Kendra. Das Unternehmen kann dann nach wertvollen Informationen zur Kundenumfrage suchenAmazon Kendra.</p><p>Sie können grundlegende Operationen verwenden, um sie als erstes Parsen Ihrer Daten anzuwenden, und dann eine Lambda-Funktion verwenden, um komplexere Operationen auf Ihre Daten anzuwenden. Sie könnten beispielsweise eine einfache Operation verwenden, um einfach alle Werte im Dokumentmetadatenfeld 'Customer_ID' zu entfernen und dann eine Lambda-Funktion anzuwenden, um Text aus Bildern des Texts in den Dokumenten zu extrahieren.</p>
        <h2 id="how-custom-document-enrichment-works">So funktioniert Custom Document Enrichment</h2>
        <p>Der Gesamtprozess von Custom Document Enrichment sieht wie folgt aus:</p>
        <div class="orderedlist">
             
             
             
             
        <ol><li>
                <p>Sie konfigurieren Custom Document Enrichment, wenn Sie Ihre Datenquelle erstellen oder aktualisieren oder Ihre Dokumente direkt indexierenAmazon Kendra.</p>
            </li><li>
                <p>Amazon Kendrawendet Inline-Konfigurationen oder grundlegende Logik an, um Ihre Daten zu ändern. Weitere Informationen finden Sie unter <a href="#basic-data-maniplation">Grundlegende Operationen zum Ändern von Metadaten</a>.</p>
            </li><li>
                <p>Wenn Sie sich für die Konfiguration der erweiterten Datenbearbeitung entscheiden,Amazon Kendra können Sie dies auf Ihre ursprünglichen Rohdokumente oder auf die strukturierten, analysierten Dokumente anwenden. Weitere Informationen finden Sie unter <a href="#advanced-data-manipulation">Lambda-Funktionen: Metadaten oder Inhalte extrahieren und ändern</a>.</p>
            </li><li>
                <p>Ihre geänderten Dokumente werden übernommenAmazon Kendra.</p>
            </li></ol></div>
        <p>Wenn Ihre Konfiguration zu einem beliebigen Zeitpunkt dieses Prozesses nicht gültig ist,Amazon Kendra wird ein Fehler ausgelöst.</p>
        <p>Wenn Sie oder <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_BatchPutDocument.html">BatchPutDocument</a>APIs aufrufen <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_CreateDataSource.html">CreateDataSource<a href="https://docs.aws.amazon.com/kendra/latest/dg/API_UpdateDataSource.html">UpdateDataSource</a></a>, geben Sie Ihre Konfiguration für die benutzerdefinierte Dokumentenanreicherung an. Wenn Sie anrufen<code class="code">BatchPutDocument</code>, müssen Sie Custom Document Enrichment für jede Anfrage konfigurieren. Wenn Sie die Konsole verwenden, wählen Sie Ihren Index und dann <b>Dokumentanreicherungen</b> aus, um die benutzerdefinierte Dokumentenanreicherung zu konfigurieren.</p>
        <p>Wenn Sie <b>Document Enrichments</b> in der Konsole verwenden, können Sie wählen, ob Sie nur grundlegende Operationen oder nur Lambda-Funktionen oder beides konfigurieren möchten, wie Sie es mit der API tun können. Sie können in den Konsolenschritten auf <b>Weiter</b> klicken, um keine grundlegenden Operationen und nur Lambda-Funktionen zu konfigurieren, einschließlich der Frage, ob sie auf die Originaldaten (vor der Extraktion) oder die strukturierten Daten (nach der Extraktion) angewendet werden sollen. Sie können Ihre Konfigurationen nur speichern, indem Sie alle Schritte in der Konsole ausführen. Ihre Dokumentkonfigurationen werden nicht gespeichert, wenn Sie nicht alle Schritte ausführen.</p>
     
        <h2 id="basic-data-maniplation">Grundlegende Operationen zum Ändern von Metadaten</h2>
        <p>Sie können Ihre Dokumentfelder und Inhalte mithilfe grundlegender Logik bearbeiten. Dazu gehören das Entfernen von Werten in einem Feld, das Ändern von Werten in einem Feld mithilfe einer Bedingung oder das Erstellen eines Felds. Rufen Sie für erweiterte Manipulationen, die über das hinausgehen, was Sie mit einfacher Logik manipulieren können, eine Lambda-Funktion auf. Weitere Informationen finden Sie unter <a href="#advanced-data-manipulation">Lambda-Funktionen: Metadaten oder Inhalte extrahieren und ändern</a>.</p>
        <p>Um grundlegende Logik anzuwenden, geben Sie das Zielfeld an, das Sie mithilfe des <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_DocumentAttributeTarget.html">DocumentAttributeTarget</a>Objekts bearbeiten möchten. Sie geben den Attributschlüssel an. Beispielsweise ist der Schlüssel „Department“ ein Feld oder Attribut, das alle mit den Dokumenten verknüpften Abteilungsnamen enthält. Sie können auch einen Wert angeben, der im Zielfeld verwendet werden soll, wenn eine bestimmte Bedingung erfüllt ist. Sie legen die Bedingung mithilfe des <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_DocumentAttributeCondition.html">DocumentAttributeCondition</a>Objekts fest. Wenn das Feld „source_URI“ in seinem URI-Wert „financial“ enthält, füllen Sie das Zielfeld „Department“ mit dem Zielwert „Finance“ für das Dokument vorab ausgefüllt wird. Sie können auch die Werte des ZieldokumentAttributs löschen.</p>
        <p>Um grundlegende Logik mithilfe der Konsole anzuwenden, wählen Sie Ihren Index und dann im Navigationsmenü <b>Dokumentanreicherungen</b> aus. Gehen <b>Sie zu Grundoperationen konfigurieren</b>, um grundlegende Manipulationen auf Ihre Dokumentfelder und Inhalte anzuwenden.</p>
        <p>Im Folgenden finden Sie ein Beispiel für die Verwendung der grundlegenden Logik zum Entfernen aller Kundenidentifikationsnummern aus dem Dokumentenfeld „Customer_ID“.</p>
        <p><b>Beispiel 1: Den Dokumenten zugeordnete Kundenidentifikationsnummern entfernen</b></p>
        <p>Daten vor der Anwendung der grundlegenden Manipulation.</p>
        <div class="table-container"><div class="table-contents"><table id="w1460aac27c13c15"><thead>
                    <tr>
                        <th><b>Dokument-ID</b></th>
                        <th><b>Body_Text</b></th>
                        <th><b>Kunden-ID</b></th>
                    </tr>
                </thead>
                    <tr>
                        <td>1</td>
                        <td>Lorem ipsum.</td>
                        <td>CID1234</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>Lorem ipsum.</td>
                        <td>CID1235</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>Lorem ipsum.</td>
                        <td>CID1236</td>
                    </tr>
                </table></div></div>
        <p>Daten wurden nach der grundlegenden Manipulation angewendet.</p>
        <div class="table-container"><div class="table-contents"><table id="w1460aac27c13c19"><thead>
                    <tr>
                        <th><b>Dokument-ID</b></th>
                        <th><b>Body_Text</b></th>
                        <th><b>Kunden-ID</b></th>
                    </tr>
                </thead>
                    <tr>
                        <td>1</td>
                        <td>Lorem ipsum.</td>
                        <td> </td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>Lorem ipsum.</td>
                        <td> </td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>Lorem ipsum.</td>
                        <td> </td>
                    </tr>
                </table></div></div>
        <p>Im Folgenden finden Sie ein Beispiel für die Verwendung grundlegender Logik, um ein Feld mit dem Namen „Abteilung“ zu erstellen und dieses Feld anhand der Informationen aus dem Feld „Source_URI“ vorab mit den Abteilungsnamen auszufüllen. Dabei wird die Bedingung verwendet, dass, wenn das Feld „source_URI“ in seinem URI-Wert „financial“ enthält, das Zielfeld „Department“ mit dem Zielwert „Finance“ für das Dokument vorab ausgefüllt wird.</p>
        <p><b>Beispiel 2: Erstellen Sie das Feld „Abteilung“ und füllen Sie es mithilfe einer Bedingung vorab mit den Dokumenten verknüpften Abteilungsnamen aus.</b></p>
        <p>Daten vor der Anwendung der grundlegenden Manipulation.</p>
        <div class="table-container"><div class="table-contents"><table id="w1460aac27c13c27"><thead>
                    <tr>
                        <th><b>Dokument-ID</b></th>
                        <th><b>Body_Text</b></th>
                        <th><b>Quelle_URI</b></th>
                    </tr>
                </thead>
                    <tr>
                        <td>1</td>
                        <td>Lorem ipsum.</td>
                        <td>finanz/1</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>Lorem ipsum.</td>
                        <td>finanz/2</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>Lorem ipsum.</td>
                        <td>finanz/3</td>
                    </tr>
                </table></div></div>
        <p>Daten wurden nach der grundlegenden Manipulation angewendet.</p>
        <div class="table-container"><div class="table-contents"><table id="w1460aac27c13c31"><thead>
                    <tr>
                        <th><b>Dokument-ID</b></th>
                        <th><b>Body_Text</b></th>
                        <th><b>Quelle_URI</b></th>
                        <th><b>Abteilung</b></th>
                    </tr>
                </thead>
                    <tr>
                        <td>1</td>
                        <td>Lorem ipsum.</td>
                        <td>finanz/1</td>
                        <td>Finanzen</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>Lorem ipsum.</td>
                        <td>finanz/2</td>
                        <td>Finanzen</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>Lorem ipsum.</td>
                        <td>finanz/3</td>
                        <td>Finanzen</td>
                    </tr>
                </table></div></div>
        <div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Anmerkung</h6></div><div class="awsdocs-note-text"><p>Amazon Kendrakann kein Zieldokumentfeld ertellen, wenn es nicht bereits als Indexfeld erstellt wurde. Nachdem Sie Ihr Indexfeld erstellt haben, können Sie mit dem Befehl „Dokumenten-Feld“ ertellen<code class="code">DocumentAttributeTarget</code>. Amazon Kendraordnet dann Ihr neu erstelltes Metadatenfeld Ihrem Indexfeld zu.</p></div></div>
        <p>Der folgende Code ist ein Beispiel für die Konfiguration grundlegender Datenmanipulationen, um Kundenidentifikationsnummern zu entfernen, die den Dokumenten zugeordnet sind.</p>
        <awsdocs-tabs><dl style="display: none">
            <dt>Console</dt><dd tab-id="console">
                    
                    <div class="procedure"><h6>Um grundlegende Datenmanipulationen zu konfigurieren, um Kundenidentifikationsnummern zu entfernen</h6><ol><li>
                            <p>Wählen Sie im linken Navigationsbereich unter <b>Indizes</b> die Option <b>Dokumentanreicherungen</b> und dann <b>Dokumentanreicherung hinzufügen</b> aus.</p>
                        </li><li>
                            <p>Wählen Sie auf der Seite „<b>Grundlegende Operationen konfigurieren</b>“ aus der Dropdown-Liste Ihre Datenquelle aus, für die Sie die Felder und den Inhalt des Dokuments ändern möchten. Wählen Sie dann aus der Dropdown-Liste den Dokumentfeldnamen 'Customer_ID', wählen Sie aus der Dropdown-Liste den Indexfeldnamen 'Customer_ID' und wählen Sie aus der Dropdown-Liste die Zielaktion <b>Löschen</b> aus. Wählen Sie dann <b>Basisoperation hinzufügen</b> aus.</p>
                        </li></ol></div>
                </dd>
            <dt>CLI</dt><dd tab-id="cli">
                    <p><b>Um grundlegende Datenmanipulationen zu konfigurieren, um Kundenidentifikationsnummern zu entfernen</b></p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws kendra create-data-source \
 --name <code class="replaceable">data-source-name</code> \
 --index-id <code class="replaceable">index-id</code> \
 --role-arn <code class="replaceable">arn:aws:iam::account-id:role/role-name</code> \
 --type S3 \
 --configuration '<span>{</span>"S3Configuration":<span>{</span>"BucketName":"<code class="replaceable">S3-bucket-name</code>"}}' \
 --custom-document-enrichment-configuration '<span>{</span>"InlineConfigurations":[<span>{</span>"Target":<span>{</span>"TargetDocumentAttributeKey":"Customer_ID", "TargetDocumentAttributeValueDeletion": true}}]}' 
</code></pre>
                </dd>
            <dt>Python</dt><dd tab-id="python">
                    <p><b>Um grundlegende Datenmanipulationen zu konfigurieren, um Kundenidentifikationsnummern zu entfernen</b></p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="python ">import boto3&#xD;
from botocore.exceptions import ClientError&#xD;
import pprint&#xD;
import time&#xD;
&#xD;
kendra = boto3.client("kendra")&#xD;
&#xD;
print("Create a data source with customizations")&#xD;
&#xD;
# Provide the name of the data source&#xD;
name = "data-source-name"&#xD;
# Provide the index ID for the data source&#xD;
index_id = "index-id"&#xD;
# Provide the IAM role ARN required for data sources&#xD;
role_arn = "arn:aws:iam::$<span>{</span>account-id}:role/$<span>{</span>role-name}"&#xD;
# Provide the data source connection information&#xD;
data_source_type = "S3"&#xD;
S3_bucket_name = "S3-bucket-name"&#xD;
# Configure the data source with Custom Document Enrichment&#xD;
configuration = <span>{</span>"S3Configuration":&#xD;
        <span>{</span>&#xD;
            "BucketName": S3_bucket_name&#xD;
        }&#xD;
    }&#xD;
custom_document_enrichment_configuration = <span>{</span>"InlineConfigurations":[&#xD;
        <span>{</span>&#xD;
            "Target":<span>{</span>"TargetDocumentAttributeKey":"Customer_ID",&#xD;
                       "TargetDocumentAttributeValueDeletion": True}&#xD;
        }]&#xD;
    }&#xD;
&#xD;
try:&#xD;
    data_source_response = kendra.create_data_source(&#xD;
        Name = name,&#xD;
        IndexId = index_id,&#xD;
        RoleArn = role_arn,&#xD;
        Type = data_source_type&#xD;
        Configuration = configuration&#xD;
        CustomDocumentEnrichmentConfiguration = custom_document_enrichment_configuration&#xD;
    )&#xD;
&#xD;
    pprint.pprint(data_source_response)&#xD;
&#xD;
    data_source_id = data_source_response["Id"]&#xD;
&#xD;
    print("Wait for Amazon Kendra to create the data source with your customizations.")&#xD;
&#xD;
    while True:&#xD;
        # Get the details of the data source, such as the status&#xD;
        data_source_description = kendra.describe_data_source(&#xD;
            Id = data_source_id,&#xD;
            IndexId = index_id&#xD;
        )&#xD;
        status = data_source_description["Status"]&#xD;
        print(" Creating data source. Status: "+status)&#xD;
        time.sleep(60)&#xD;
        if status != "CREATING":&#xD;
            break&#xD;
&#xD;
    print("Synchronize the data source.")&#xD;
&#xD;
    sync_response = kendra.start_data_source_sync_job(&#xD;
        Id = data_source_id,&#xD;
        IndexId = index_id&#xD;
    )&#xD;
&#xD;
    pprint.pprint(sync_response)&#xD;
&#xD;
    print("Wait for the data source to sync with the index.")&#xD;
&#xD;
    while True:&#xD;
&#xD;
        jobs = kendra.list_data_source_sync_jobs(&#xD;
            Id= data_source_id,&#xD;
            IndexId= index_id&#xD;
        )&#xD;
&#xD;
        # For this example, there should be one job&#xD;
        status = jobs["History"][0]["Status"]&#xD;
&#xD;
        print(" Syncing data source. Status: "+status)&#xD;
        time.sleep(60)&#xD;
        if status != "SYNCING":&#xD;
            break&#xD;
&#xD;
except  ClientError as e:&#xD;
        print("%s" % e)&#xD;
&#xD;
print("Program ends.")</code></pre>
                </dd>
            <dt>Java</dt><dd tab-id="java">
                    <p><b>Um grundlegende Datenmanipulationen zu konfigurieren, um Kundenidentifikationsnummern zu entfernen</b></p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="java ">package com.amazonaws.kendra;

import java.util.concurrent.TimeUnit;
import software.amazon.awssdk.services.kendra.KendraClient;
import software.amazon.awssdk.services.kendra.model.CreateDataSourceRequest;
import software.amazon.awssdk.services.kendra.model.CreateDataSourceResponse;
import software.amazon.awssdk.services.kendra.model.CreateIndexRequest;
import software.amazon.awssdk.services.kendra.model.CreateIndexResponse;
import software.amazon.awssdk.services.kendra.model.DataSourceConfiguration;
import software.amazon.awssdk.services.kendra.model.DataSourceStatus;
import software.amazon.awssdk.services.kendra.model.DataSourceSyncJob;
import software.amazon.awssdk.services.kendra.model.DataSourceSyncJobStatus;
import software.amazon.awssdk.services.kendra.model.DataSourceType;
import software.amazon.awssdk.services.kendra.model.DescribeDataSourceRequest;
import software.amazon.awssdk.services.kendra.model.DescribeDataSourceResponse;
import software.amazon.awssdk.services.kendra.model.DescribeIndexRequest;
import software.amazon.awssdk.services.kendra.model.DescribeIndexResponse;
import software.amazon.awssdk.services.kendra.model.IndexStatus;
import software.amazon.awssdk.services.kendra.model.ListDataSourceSyncJobsRequest;
import software.amazon.awssdk.services.kendra.model.ListDataSourceSyncJobsResponse;
import software.amazon.awssdk.services.kendra.model.S3DataSourceConfiguration;
import software.amazon.awssdk.services.kendra.model.StartDataSourceSyncJobRequest;
import software.amazon.awssdk.services.kendra.model.StartDataSourceSyncJobResponse;

public class CreateDataSourceWithCustomizationsExample <span>{</span>

    public static void main(String[] args) throws InterruptedException <span>{</span>
        System.out.println("Create a data source with customizations");
        
        String dataSourceName = "data-source-name";
        String indexId = "index-id";
        String dataSourceRoleArn = "arn:aws:iam::account-id:role/role-name";
        String s3BucketName = "S3-bucket-name"

        KendraClient kendra = KendraClient.builder().build();
        
        CreateDataSourceRequest createDataSourceRequest = CreateDataSourceRequest
            .builder()
            .name(dataSourceName)
            .description(experienceDescription)
            .roleArn(experienceRoleArn)
            .type(DataSourceType.S3)
            .configuration(
                DataSourceConfiguration
                    .builder()
                    .s3Configuration(
                        S3DataSourceConfiguration
                            .builder()
                            .bucketName(s3BucketName)
                            .build()
                    ).build()
            )
            .customDocumentEnrichmentConfiguration(
                CustomDocumentEnrichmentConfiguration
                    .builder()
                    .inlineConfigurations(Arrays.asList(
                        InlineCustomDocumentEnrichmentConfiguration
                            .builder()
                            .target(
                                DocumentAttributeTarget
                                    .builder()
                                    .targetDocumentAttributeKey("Customer_ID")
                                    .targetDocumentAttributeValueDeletion(true)
                                    .build())
                            .build()
                    )).build();
        
        CreateDataSourceResponse createDataSourceResponse = kendra.createDataSource(createDataSourceRequest);
        System.out.println(String.format("Response of creating data source: %s", createDataSourceResponse));

        String dataSourceId = createDataSourceResponse.id();
        System.out.println(String.format("Waiting for Kendra to create the data source %s", dataSourceId));
        DescribeDataSourceRequest describeDataSourceRequest = DescribeDataSourceRequest
            .builder()
            .indexId(indexId)
            .id(dataSourceId)
            .build();

        while (true) <span>{</span>
            DescribeDataSourceResponse describeDataSourceResponse = kendra.describeDataSource(describeDataSourceRequest);

            DataSourceStatus status = describeDataSourceResponse.status();
            System.out.println(String.format("Creating data source. Status: %s", status));
            TimeUnit.SECONDS.sleep(60);
            if (status != DataSourceStatus.CREATING) <span>{</span>
                break;
            }
        }

        System.out.println(String.format("Synchronize the data source %s", dataSourceId));
        StartDataSourceSyncJobRequest startDataSourceSyncJobRequest = StartDataSourceSyncJobRequest
            .builder()
            .indexId(indexId)
            .id(dataSourceId)
            .build();
        StartDataSourceSyncJobResponse startDataSourceSyncJobResponse = kendra.startDataSourceSyncJob(startDataSourceSyncJobRequest);
        System.out.println(String.format("Waiting for the data source to sync with the index %s for execution ID %s", indexId, startDataSourceSyncJobResponse.executionId()));

        // For this example, there should be one job
        ListDataSourceSyncJobsRequest listDataSourceSyncJobsRequest = ListDataSourceSyncJobsRequest
            .builder()
            .indexId(indexId)
            .id(dataSourceId)
            .build();

        while (true) <span>{</span>
            ListDataSourceSyncJobsResponse listDataSourceSyncJobsResponse = kendra.listDataSourceSyncJobs(listDataSourceSyncJobsRequest);
            DataSourceSyncJob job = listDataSourceSyncJobsResponse.history().get(0);
            System.out.println(String.format("Syncing data source. Status: %s", job.status()));

            TimeUnit.SECONDS.sleep(60);
            if (job.status() != DataSourceSyncJobStatus.SYNCING) <span>{</span>
                break;
            }

        }

        System.out.println("Data source creation with customizations is complete");
    }
}</code></pre>
                </dd>
        </dl></awsdocs-tabs>
     
        <h2 id="advanced-data-manipulation">Lambda-Funktionen: Metadaten oder Inhalte extrahieren und ändern</h2>
        <p>Sie können Ihre Dokumentfelder und Inhalte mithilfe von Lambda-Funktionen bearbeiten. Dies ist nützlich, wenn Sie über die grundlegende Logik hinausgehen und erweiterte Datenmanipulationen anwenden möchten. Beispielsweise mithilfe der optischen Zeichenerkennung (OCR), die Text aus Bildern interpretiert und jedes Bild als Textdokument behandelt. Oder Sie rufen das aktuelle Datum und die Uhrzeit in einer bestimmten Zeitzone ab und fügen Sie das Datum und die Uhrzeit ein, wo ein leerer Wert für ein Datumsfeld vorhanden ist.</p>
        <p>Sie können zuerst grundlegende Logik anwenden und dann eine Lambda-Funktion verwenden, um Ihre Daten weiter zu bearbeiten, oder umgekehrt. Sie können auch nur eine Lambda-Funktion anwenden.</p>
        <p>Amazon Kendrakann eine Lambda-Funktion aufrufen, um erweiterte Datenmanipulationen während des Erfassungsprozesses als Teil Ihres vorzunehmen <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_CustomDocumentEnrichmentConfiguration.html">CustomDocumentEnrichmentConfiguration</a>. Sie geben eine Rolle an, die die Berechtigung beinhaltet, die Lambda-Funktion auszuführen und auf IhrenAmazon S3 Bucket zuzugreifen, um die Ergebnisse Ihrer Datenmanipulationen zu speichern — siehe <a href="https://docs.aws.amazon.com/kendra/latest/dg/iam-roles.html">IAMZugriffsrollen</a>.</p>
        <p>Amazon Kendrakann eine Lambda-Funktion auf Ihre ursprünglichen unformattierten Dokumente oder auf die strukturierten, geparsten Dokumente anwenden. Sie können eine Lambda-Funktion konfigurieren, die Ihre Original- oder Rohdaten verwendet und Ihre Datenmanipulationen mithilfe von <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_CustomDocumentEnrichmentConfiguration.html">PreExtractionHookConfiguration</a>. Sie können auch eine Lambda-Funktion konfigurieren, die Ihre strukturierten Dokumente verwendet und Ihre Datenmanipulationen mithilfe von <a href="https://docs.aws.amazon.com/kendra/latest/dg/API_CustomDocumentEnrichmentConfiguration.html">PostExtractionHookConfiguration</a>. Amazon Kendraextrahiert die Metadaten und den Text des Dokuments, um Ihre Dokumente zu strukturieren. Ihre Lambda-Funktionen müssen den obligatorischen Anforderungs- und Antwortstrukturen folgen. Weitere Informationen finden Sie unter <a href="#cde-data-contracts-lambda">Datenverträge für Lambda-Funktionen</a>.</p>
        <p>Um eine Lambda-Funktion in der Konsole zu konfigurieren, wählen Sie Ihren Index und dann im Navigationsmenü <b>Dokumentanreicherungen</b> aus. Gehen <b>Sie zu Lambda-Funktionen</b> konfigurieren, um eine Lambda-Funktion zu konfigurieren.</p>
        <p>Sie können nur eine Lambda-Funktion für<code class="code">PreExtractionHookConfiguration</code> und nur eine Lambda-Funktion für konfigurieren<code class="code">PostExtractionHookConfiguration</code>. Ihre Lambda-Funktion kann jedoch andere Funktionen aufrufen, die sie benötigt. Sie können<code class="code">PreExtractionHookConfiguration</code> sowohl<code class="code">PostExtractionHookConfiguration</code> als auch eines von beiden konfigurieren. Ihre Lambda-Funktion für<code class="code">PreExtractionHookConfiguration</code> darf eine Laufzeit von 5 Minuten nicht überschreiten und Ihre Lambda-Funktion für<code class="code">PostExtractionHookConfiguration</code> darf eine Laufzeit von 1 Minute nicht überschreiten. Die Konfiguration von Custom Document Enrichment dauert natürlich länger, bis Ihre Dokumente in sie aufgenommen werden,Amazon Kendra als wenn Sie dies nicht konfigurieren würden.</p>
        <p>Sie können so konfigurierenAmazon Kendra, dass eine Lambda-Funktion nur aufgerufen wird, wenn eine Bedingung erfüllt ist. Sie können beispielsweise eine Bedingung angeben, dass bei leeren Datums- und Uhrzeitwerten eine Funktion aufrufenAmazon Kendra sollte, die die aktuelle Datums- und Uhrzeitangabe einfügt.</p>
        <p>Im Folgenden finden Sie ein Beispiel für die Verwendung einer Lambda-Funktion, um OCR auszuführen, um Text aus Bildern zu interpretieren und diesen Text in einem Feld namens 'Document_Image_Text' zu speichern.</p>
        <p><b>Beispiel 1: Extrahieren von Text aus Bildern, um Textdokumente zu erstellen</b></p>
        <p>Daten vor der Anwendung fortgeschrittener Manipulationen.</p>
        <div class="table-container"><div class="table-contents"><table id="w1460aac27c15c23"><thead>
                    <tr>
                        <th><b>Dokument-ID</b></th>
                        <th><b>Dokument_Bild</b></th>
                    </tr>
                </thead>
                    <tr>
                        <td>1</td>
                        <td>image_1.png</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>image_2.png</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>image_3.png</td>
                    </tr>
                </table></div></div>
        <p>Daten wurden nach fortgeschrittener Bearbeitung angewendet.</p>
        <div class="table-container"><div class="table-contents"><table id="w1460aac27c15c27"><thead>
                    <tr>
                        <th><b>Dokument-ID</b></th>
                        <th><b>Dokument_Bild</b></th>
                        <th><b>Dokument_Bild_Text</b></th>
                    </tr>
                </thead>
                    <tr>
                        <td>1</td>
                        <td>image_1.png</td>
                        <td>Umfrageantwort per E-Mail</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>image_2.png</td>
                        <td>Umfrageantwort per E-Mail</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>image_3.png</td>
                        <td>Umfrageantwort per E-Mail</td>
                    </tr>
                </table></div></div>
        <p>Im Folgenden finden Sie ein Beispiel für die Verwendung einer Lambda-Funktion zum Einfügen des aktuellen Datums und der Uhrzeit für leere Datumswerte. Dabei wird die Bedingung verwendet, dass, wenn ein Datumsfeldwert 'Null' ist, dieser durch das aktuelle Datum und die Uhrzeit ersetzt wird.</p>
        <p><b>Beispiel 2: Ersetzen leerer Werte im Feld Last_Updated durch das aktuelle Datum und die Uhrzeit.</b></p>
        <p>Daten vor der Anwendung fortgeschrittener Manipulationen.</p>
        <div class="table-container"><div class="table-contents"><table id="w1460aac27c15c35"><thead>
                    <tr>
                        <th><b>Dokument-ID</b></th>
                        <th><b>Body_Text</b></th>
                        <th><b>Letzte_Aktualisiert</b></th>
                    </tr>
                </thead>
                    <tr>
                        <td>1</td>
                        <td>Lorem ipsum.</td>
                        <td>1. Januar 2020</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>Lorem ipsum.</td>
                        <td> </td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>Lorem ipsum.</td>
                        <td>1. Juli 2020</td>
                    </tr>
                </table></div></div>
        <p>Daten wurden nach fortgeschrittener Bearbeitung angewendet.</p>
        <div class="table-container"><div class="table-contents"><table id="w1460aac27c15c39"><thead>
                    <tr>
                        <th><b>Dokument-ID</b></th>
                        <th><b>Body_Text</b></th>
                        <th><b>Letzte_Aktualisiert</b></th>
                    </tr>
                </thead>
                    <tr>
                        <td>1</td>
                        <td>Lorem ipsum.</td>
                        <td>1. Januar 2020</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>Lorem ipsum.</td>
                        <td>1. Dezember 2021</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>Lorem ipsum.</td>
                        <td>1. Juli 2020</td>
                    </tr>
                </table></div></div>
        <p>Der folgende Code ist ein Beispiel für die Konfiguration einer Lambda-Funktion für die erweiterte Datenbearbeitung der ursprünglichen Rohdaten.</p>
        <awsdocs-tabs><dl style="display: none">
            <dt>Console</dt><dd tab-id="console">
                    
                    <div class="procedure"><h6>So konfigurieren Sie eine Lambda-Funktion für die erweiterte Datenbearbeitung an den rohen Originaldaten</h6><ol><li>
                            <p>Wählen Sie im linken Navigationsbereich unter <b>Indizes</b> die Option <b>Dokumentanreicherungen</b> und dann <b>Dokumentanreicherung hinzufügen</b> aus.</p>
                        </li><li>
                            <p>Wählen Sie auf der Seite <b>Lambda-Funktionen konfigurieren</b> im Abschnitt <b>Lambda für die Vorextraktion</b> aus den Dropdownlisten Ihren Lambda-Funktions-ARN und IhrenAmazon S3 Bucket aus. Fügen Sie IhreIAM Zugriffsrolle hinzu, indem Sie in der Dropdown-Liste die Option zum Erstellen einer neuen Rolle auswählen. Dadurch werden die erforderlichenAmazon Kendra Berechtigungen für die Erstellung der Dokumentanreicherung erstellt.</p>
                        </li></ol></div>
                </dd>
            <dt>CLI</dt><dd tab-id="cli">
                    <p><b>So konfigurieren Sie eine Lambda-Funktion für die erweiterte Datenbearbeitung an den rohen Originaldaten</b></p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="nohighlight">aws kendra create-data-source \
 --name <code class="replaceable">data-source-name</code> \
 --index-id <code class="replaceable">index-id</code> \
 --role-arn <code class="replaceable">arn:aws:iam::account-id:role/role-name</code> \
 --type S3 \
 --configuration '<span>{</span>"S3Configuration":<span>{</span>"BucketName":"<code class="replaceable">S3-bucket-name</code>"}}' \
 --custom-document-enrichment-configuration '<span>{</span>"PreExtractionHookConfiguration":<span>{</span>"LambdaArn":"<code class="replaceable">arn:aws:iam::account-id:function/function-name</code>", "S3Bucket":"<code class="replaceable">S3-bucket-name</code>"}, "RoleArn": "<code class="replaceable">arn:aws:iam:account-id:role/cde-role-name</code>"}'
</code></pre>
                </dd>
            <dt>Python</dt><dd tab-id="python">
                    <p><b>So konfigurieren Sie eine Lambda-Funktion für die erweiterte Datenbearbeitung an den rohen Originaldaten</b></p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="python ">import boto3&#xD;
from botocore.exceptions import ClientError&#xD;
import pprint&#xD;
import time&#xD;
&#xD;
kendra = boto3.client("kendra")&#xD;
&#xD;
print("Create a data source with customizations.")&#xD;
&#xD;
# Provide the name of the data source&#xD;
name = "data-source-name"&#xD;
# Provide the index ID for the data source&#xD;
index_id = "index-id"&#xD;
# Provide the IAM role ARN required for data sources&#xD;
role_arn = "arn:aws:iam::$<span>{</span>account-id}:role/$<span>{</span>role-name}"&#xD;
# Provide the data source connection information&#xD;
data_source_type = "S3"&#xD;
S3_bucket_name = "S3-bucket-name"&#xD;
# Configure the data source with Custom Document Enrichment&#xD;
configuration = <span>{</span>"S3Configuration":&#xD;
        <span>{</span>&#xD;
            "BucketName": S3_bucket_name&#xD;
        }&#xD;
    }&#xD;
custom_document_enrichment_configuration = <span>{</span>"PreExtractionHookConfiguration":&#xD;
        <span>{</span>&#xD;
            "LambdaArn":"arn:aws:iam::account-id:function/function-name",&#xD;
            "S3Bucket":"S3-bucket-name"&#xD;
        }&#xD;
    "RoleArn":"arn:aws:iam::account-id:role/cde-role-name"&#xD;
    }&#xD;
&#xD;
try:&#xD;
    data_source_response = kendra.create_data_source(&#xD;
        Name = name,&#xD;
        IndexId = index_id,&#xD;
        RoleArn = role_arn,&#xD;
        Type = data_source_type&#xD;
        Configuration = configuration&#xD;
        CustomDocumentEnrichmentConfiguration = custom_document_enrichment_configuration&#xD;
    )&#xD;
&#xD;
    pprint.pprint(data_source_response)&#xD;
&#xD;
    data_source_id = data_source_response["Id"]&#xD;
&#xD;
    print("Wait for Amazon Kendra to create the data source with your customizations.")&#xD;
&#xD;
    while True:&#xD;
        # Get the details of the data source, such as the status&#xD;
        data_source_description = kendra.describe_data_source(&#xD;
            Id = data_source_id,&#xD;
            IndexId = index_id&#xD;
        )&#xD;
        status = data_source_description["Status"]&#xD;
        print(" Creating data source. Status: "+status)&#xD;
        time.sleep(60)&#xD;
        if status != "CREATING":&#xD;
            break&#xD;
&#xD;
    print("Synchronize the data source.")&#xD;
&#xD;
    sync_response = kendra.start_data_source_sync_job(&#xD;
        Id = data_source_id,&#xD;
        IndexId = index_id&#xD;
    )&#xD;
&#xD;
    pprint.pprint(sync_response)&#xD;
&#xD;
    print("Wait for the data source to sync with the index.")&#xD;
&#xD;
    while True:&#xD;
&#xD;
        jobs = kendra.list_data_source_sync_jobs(&#xD;
            Id = data_source_id,&#xD;
            IndexId = index_id&#xD;
        )&#xD;
&#xD;
        # For this example, there should be one job&#xD;
        status = jobs["History"][0]["Status"]&#xD;
&#xD;
        print(" Syncing data source. Status: "+status)&#xD;
        time.sleep(60)&#xD;
        if status != "SYNCING":&#xD;
            break&#xD;
&#xD;
except  ClientError as e:&#xD;
        print("%s" % e)&#xD;
&#xD;
print("Program ends.")&#xD;
</code></pre>
                </dd>
            <dt>Java</dt><dd tab-id="java">
                    <p><b>So konfigurieren Sie eine Lambda-Funktion für die erweiterte Datenbearbeitung an den rohen Originaldaten</b></p>
                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="java ">package com.amazonaws.kendra;

import java.util.concurrent.TimeUnit;
import software.amazon.awssdk.services.kendra.KendraClient;
import software.amazon.awssdk.services.kendra.model.CreateDataSourceRequest;
import software.amazon.awssdk.services.kendra.model.CreateDataSourceResponse;
import software.amazon.awssdk.services.kendra.model.CreateIndexRequest;
import software.amazon.awssdk.services.kendra.model.CreateIndexResponse;
import software.amazon.awssdk.services.kendra.model.DataSourceConfiguration;
import software.amazon.awssdk.services.kendra.model.DataSourceStatus;
import software.amazon.awssdk.services.kendra.model.DataSourceSyncJob;
import software.amazon.awssdk.services.kendra.model.DataSourceSyncJobStatus;
import software.amazon.awssdk.services.kendra.model.DataSourceType;
import software.amazon.awssdk.services.kendra.model.DescribeDataSourceRequest;
import software.amazon.awssdk.services.kendra.model.DescribeDataSourceResponse;
import software.amazon.awssdk.services.kendra.model.DescribeIndexRequest;
import software.amazon.awssdk.services.kendra.model.DescribeIndexResponse;
import software.amazon.awssdk.services.kendra.model.IndexStatus;
import software.amazon.awssdk.services.kendra.model.ListDataSourceSyncJobsRequest;
import software.amazon.awssdk.services.kendra.model.ListDataSourceSyncJobsResponse;
import software.amazon.awssdk.services.kendra.model.S3DataSourceConfiguration;
import software.amazon.awssdk.services.kendra.model.StartDataSourceSyncJobRequest;
import software.amazon.awssdk.services.kendra.model.StartDataSourceSyncJobResponse;


public class CreateDataSourceWithCustomizationsExample <span>{</span>

    public static void main(String[] args) throws InterruptedException <span>{</span>
        System.out.println("Create a data source with customizations");
        
        String dataSourceName = "data-source-name";
        String indexId = "index-id";
        String dataSourceRoleArn = "arn:aws:iam::account-id:role/role-name";
        String s3BucketName = "S3-bucket-name"

        KendraClient kendra = KendraClient.builder().build();
        
        CreateDataSourceRequest createDataSourceRequest = CreateDataSourceRequest
            .builder()
            .name(dataSourceName)
            .description(experienceDescription)
            .roleArn(experienceRoleArn)
            .type(DataSourceType.S3)
            .configuration(
                DataSourceConfiguration
                    .builder()
                    .s3Configuration(
                        S3DataSourceConfiguration
                            .builder()
                            .bucketName(s3BucketName)
                            .build()
                    ).build()
            )
            .customDocumentEnrichmentConfiguration(
                CustomDocumentEnrichmentConfiguration
                    .builder()
                    .preExtractionHookConfiguration(
                        HookConfiguration
                            .builder()
                            .lambdaArn("arn:aws:iam::account-id:function/function-name")
                            .s3Bucket("S3-bucket-name")
                            .build())
                    .roleArn("arn:aws:iam::account-id:role/cde-role-name")
                    .build();
        
        CreateDataSourceResponse createDataSourceResponse = kendra.createDataSource(createDataSourceRequest);
        System.out.println(String.format("Response of creating data source: %s", createDataSourceResponse));

        String dataSourceId = createDataSourceResponse.id();
        System.out.println(String.format("Waiting for Kendra to create the data source %s", dataSourceId));
        DescribeDataSourceRequest describeDataSourceRequest = DescribeDataSourceRequest
            .builder()
            .indexId(indexId)
            .id(dataSourceId)
            .build();

        while (true) <span>{</span>
            DescribeDataSourceResponse describeDataSourceResponse = kendra.describeDataSource(describeDataSourceRequest);

            DataSourceStatus status = describeDataSourceResponse.status();
            System.out.println(String.format("Creating data source. Status: %s", status));
            TimeUnit.SECONDS.sleep(60);
            if (status != DataSourceStatus.CREATING) <span>{</span>
                break;
            }
        }

        System.out.println(String.format("Synchronize the data source %s", dataSourceId));
        StartDataSourceSyncJobRequest startDataSourceSyncJobRequest = StartDataSourceSyncJobRequest
            .builder()
            .indexId(indexId)
            .id(dataSourceId)
            .build();
        StartDataSourceSyncJobResponse startDataSourceSyncJobResponse = kendra.startDataSourceSyncJob(startDataSourceSyncJobRequest);
        System.out.println(String.format("Waiting for the data source to sync with the index %s for execution ID %s", indexId, startDataSourceSyncJobResponse.executionId()));

        // For this example, there should be one job
        ListDataSourceSyncJobsRequest listDataSourceSyncJobsRequest = ListDataSourceSyncJobsRequest
            .builder()
            .indexId(indexId)
            .id(dataSourceId)
            .build();

        while (true) <span>{</span>
            ListDataSourceSyncJobsResponse listDataSourceSyncJobsResponse = kendra.listDataSourceSyncJobs(listDataSourceSyncJobsRequest);
            DataSourceSyncJob job = listDataSourceSyncJobsResponse.history().get(0);
            System.out.println(String.format("Syncing data source. Status: %s", job.status()));

            TimeUnit.SECONDS.sleep(60);
            if (job.status() != DataSourceSyncJobStatus.SYNCING) <span>{</span>
                break;
            }

        }

        System.out.println("Data source creation with customizations is complete");
    }
}</code></pre>
                </dd>
        </dl></awsdocs-tabs>
     
        <h2 id="cde-data-contracts-lambda">Datenverträge für Lambda-Funktionen</h2>
        <p>Ihre Lambda-Funktionen für erweiterte Datenbearbeitung interagieren mitAmazon Kendra Datenverträgen. Die Verträge sind die obligatorischen Anforderungs- und Antwortstrukturen Ihrer Lambda-Funktionen. Wenn Ihre Lambda-Funktionen diesen Strukturen nicht folgen,Amazon Kendra wird ein Fehler ausgelöst.</p>
        <p>Ihre Lambda-Funktion für<code class="code">PreExtractionHookConfiguration</code> sollte die folgende Anforderungsstruktur erwarten:</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "version": &lt;str&gt;,
    "dataBlobStringEncodedInBase64": &lt;str&gt;, //In the case of a data blob
    "s3Bucket": &lt;str&gt;, //In the case of an S3 bucket
    "s3ObjectKey": &lt;str&gt;, //In the case of an S3 bucket
    "metadata": &lt;Metadata&gt;
}</code></pre>
        <p>Die<code class="code">metadata</code> Struktur, die die<code class="code">CustomerDocumentAttribute</code> Struktur beinhaltet, sieht wie folgt aus:</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json "><span>{</span>
    "attributes": [&lt;CustomerDocumentAttribute&lt;]
}

CustomerDocumentAttribute
<span>{</span>
    "name": &lt;str&gt;,
    "value": &lt;CustomerDocumentAttributeValue&gt;
}

CustomerDocumentAttributeValue
<span>{</span>
    "stringValue": &lt;str&gt;,
    "integerValue": &lt;int&gt;,
    "longValue": &lt;long&gt;,
    "stringListValue": list&lt;str&gt;,
    "dateValue": &lt;str&gt;
}</code></pre>
        <p>Ihre Lambda-Funktion für<code class="code">PreExtractionHookConfiguration</code> muss die folgende Antwortstruktur einhalten:</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "version": &lt;str&gt;,
    "dataBlobStringEncodedInBase64": &lt;str&gt;, //In the case of a data blob
    "s3ObjectKey": &lt;str&gt;, //In the case of an S3 bucket
    "metadataUpdates": [&lt;CustomDocumentAttribute&gt;]
}</code></pre>
        <p>Ihre Lambda-Funktion für<code class="code">PostExtractionHookConfiguration</code> sollte die folgende Anforderungsstruktur erwarten:</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><span>{</span>
    "version": &lt;str&gt;,
    "s3Bucket": &lt;str&gt;,
    "s3ObjectKey": &lt;str&gt;,
    "metadata": &lt;Metadata&gt;
}</code></pre>
        <p>Ihre Lambda-Funktion für<code class="code">PostExtractionHookConfiguration</code> muss die folgende Antwortstruktur einhalten:</p>
        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">PostExtractionHookConfiguration Lambda Response
<span>{</span>
    "version": &lt;str&gt;,
    "s3ObjectKey": &lt;str&gt;,
    "metadataUpdates": [&lt;CustomDocumentAttribute&gt;]
}</code></pre>
        <p>Ihr geändertes Dokument wird in IhrenAmazon S3 Bucket hochgeladen. Das geänderte Dokument muss dem in angegebenen Format entsprechen<a href="#structured-document-format">Strukturiertes Dokumentenformat</a>.</p>
         
            <h3 id="structured-document-format">Strukturiertes Dokumentenformat</h3>
            <p>Amazon Kendralädt Ihr strukturiertes Dokument in den angegebenenAmazon S3 Bucket hoch. Das strukturierte Dokument folgt diesem Format:</p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="json ">Kendra document

<span>{</span>
   "textContent": &lt;TextContent&gt;
}

TextContent
<span>{</span>
  "documentBodyText": &lt;str&gt;
}</code></pre>
         
         
            <h3 id="example-lambda-function-advanced-manipulation">Beispiel für eine Lambda-Funktion, die Datenverträge einhält</h3>
            <p>Der folgende Python-Code ist ein Beispiel für eine Lambda-Funktion, die erweiterte Manipulationen der Metadatenfelder<code class="code">_authors</code> und des<code class="code">_document_title</code> Textinhalts in den Rohdokumenten oder Originaldokumenten anwendet.</p>
            <p><b>Im Falle des Körperinhalts, der sich in einemAmazon S3 Eimer befindet</b></p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="python ">import json&#xD;
import boto3&#xD;
     &#xD;
s3 = boto3.client("s3")&#xD;
&#xD;
# Lambda function for advanced data manipulation    &#xD;
def lambda_handler(event, context):&#xD;
    # Get the value of "S3Bucket" key name or item from the given event input&#xD;
    s3_bucket = event.get("s3Bucket")&#xD;
    # Get the value of "S3ObjectKey" key name or item from the given event input&#xD;
    s3_object_key = event.get("s3ObjectKey")&#xD;
    &#xD;
    content_object_before_CDE = s3.get_object(Bucket = s3_bucket, Key = s3_object_key)&#xD;
    content_before_CDE = content_object_before_CDE["Body"].read().decode("utf-8");&#xD;
    content_after_CDE = "CDEInvolved " + content_before_CDE&#xD;
    &#xD;
    # Get the value of "metadata" key name or item from the given event input&#xD;
    metadata = event.get("metadata")&#xD;
    # Get the document "attributes" from the metadata &#xD;
    document_attributes = metadata.get("attributes")&#xD;
    &#xD;
    s3.put_object(Bucket = s3_bucket, Key = "dummy_updated_kendra_document", Body=json.dumps(content_after_CDE))&#xD;
    return <span>{</span>&#xD;
        "version": "v0",&#xD;
        "s3ObjectKey": "dummy_updated_kendra_document",&#xD;
        "metadataUpdates": [&#xD;
            <span>{</span>"name":"_document_title", "value":<span>{</span>"stringValue":"title_from_pre_extraction_lambda"}},&#xD;
            <span>{</span>"name":"_authors", "value":<span>{</span>"stringListValue":["author1", "author2"]}}&#xD;
        ]&#xD;
    }</code></pre>
            <p><b>Im Fall, dass sich der Körperinhalt in einem Datenblob befindet</b></p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="python ">import json&#xD;
import boto3&#xD;
import base64&#xD;
&#xD;
# Lambda function for advanced data manipulation&#xD;
def lambda_handler(event, context):&#xD;
    &#xD;
    # Get the value of "dataBlobStringEncodedInBase64" key name or item from the given event input &#xD;
    data_blob_string_encoded_in_base64 = event.get("dataBlobStringEncodedInBase64")&#xD;
    # Decode the data blob string in UTF-8&#xD;
    data_blob_string = base64.b64decode(data_blob_string_encoded_in_base64).decode("utf-8")&#xD;
    # Get the value of "metadata" key name or item from the given event input    &#xD;
    metadata = event.get("metadata")&#xD;
    # Get the document "attributes" from the metadata&#xD;
    document_attributes = metadata.get("attributes")&#xD;
    &#xD;
    new_data_blob = "This should be the modified data in the document by pre processing lambda ".encode("utf-8")&#xD;
    return <span>{</span>&#xD;
        "version": "v0",&#xD;
        "dataBlobStringEncodedInBase64": base64.b64encode(new_data_blob).decode("utf-8"),&#xD;
        "metadataUpdates": [&#xD;
            <span>{</span>"name":"_document_title", "value":<span>{</span>"stringValue":"title_from_pre_extraction_lambda"}},&#xD;
            <span>{</span>"name":"_authors", "value":<span>{</span>"stringListValue":["author1", "author2"]}}&#xD;
        ]&#xD;
    }</code></pre>
            <p>Der folgende Python-Code ist ein Beispiel für eine Lambda-Funktion, die erweiterte Manipulationen der Metadatenfelder<code class="code">_authors</code> und des Textinhalts der strukturierten oder analysierten Dokumente anwendet.<code class="code">_document_title</code></p>
            <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Kopieren"><awsui-icon name="copy"></awsui-icon></div></div><code class="python ">import json&#xD;
import boto3&#xD;
import time&#xD;
&#xD;
s3 = boto3.client("s3")&#xD;
&#xD;
# Lambda function for advanced data manipulation&#xD;
def lambda_handler(event, context):&#xD;
    &#xD;
    # Get the value of "S3Bucket" key name or item from the given event input&#xD;
    s3_bucket = event.get("s3Bucket")&#xD;
    # Get the value of "S3ObjectKey" key name or item from the given event input&#xD;
    s3_key = event.get("s3ObjectKey")&#xD;
    # Get the value of "metadata" key name or item from the given event input&#xD;
    metadata = event.get("metadata")&#xD;
    # Get the document "attributes" from the metadata &#xD;
    document_attributes = metadata.get("attributes")&#xD;
    &#xD;
    kendra_document_object = s3.get_object(Bucket = s3_bucket, Key = s3_key)&#xD;
    kendra_document_string = kendra_document_object['Body'].read().decode('utf-8')&#xD;
    kendra_document = json.loads(kendra_document_string)&#xD;
    kendra_document["textContent"]["documentBodyText"] = "Changing document body to a short sentence."&#xD;
    &#xD;
    s3.put_object(Bucket = s3_bucket, Key = "dummy_updated_kendra_document", Body=json.dumps(kendra_document))&#xD;
&#xD;
    return <span>{</span>&#xD;
        "version" : "v0",&#xD;
        "s3ObjectKey": "dummy_updated_kendra_document",&#xD;
        "metadataUpdates": [&#xD;
            <span>{</span>"name": "_document_title", "value":<span>{</span>"stringValue": "title_from_post_extraction_lambda"}},&#xD;
            <span>{</span>"name": "_authors", "value":<span>{</span>"stringListValue":["author1", "author2"]}}&#xD;
        ]&#xD;
    }</code></pre>
         
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warnung" /> <strong>JavaScript ist in Ihrem Browser nicht verfügbar oder deaktiviert.</strong></p><p>Zur Nutzung der AWS-Dokumentation muss JavaScript aktiviert sein. Weitere Informationen finden auf den Hilfe-Seiten Ihres Browsers.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Dokumentkonventionen</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./delete-data-source.html">Löschen</div><div id="next" class="next-link" accesskey="n" href="./searching.html">Indizes durchsuchen</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Hat Ihnen diese Seite geholfen? – Ja</div><div class="content"><p>Vielen Dank, dass Sie uns mitgeteilt haben, dass wir gute Arbeit geleistet haben!</p><p>Würden Sie sich einen Moment Zeit nehmen, um uns mitzuteilen, was wir richtig gemacht haben, damit wir noch besser werden?</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Kendra&amp;topic_url=https://docs.aws.amazon.com/de_de/kendra/latest/dg/custom-document-enrichment.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Hat Ihnen diese Seite geholfen? – Nein</div><div class="content"><p>Vielen Dank, dass Sie uns mitgeteilt haben, dass diese Seite überarbeitet werden muss. Es tut uns Leid, dass wir Ihnen nicht weiterhelfen konnten.</p><p>Würden Sie sich einen Moment Zeit nehmen, um uns mitzuteilen, wie wir die Dokumentation verbessern können?</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Kendra&amp;topic_url=https://docs.aws.amazon.com/de_de/kendra/latest/dg/custom-document-enrichment.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>