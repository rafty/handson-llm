<!DOCTYPE html>
    <html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Using service-linked roles for EC2 Image Builder - EC2 Image Builder</title><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="assets_root" content="/assets" /><meta name="target_state" content="image-builder-service-linked-role" /><meta name="default_state" content="image-builder-service-linked-role" /><link rel="icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="shortcut icon" type="image/ico" href="/assets/images/favicon.ico" /><link rel="canonical" href="https://docs.aws.amazon.com/imagebuilder/latest/userguide/image-builder-service-linked-role.html" /><meta name="description" content="Describes how Image Builder uses service-linked roles." /><meta name="deployment_region" content="IAD" /><meta name="product" content="EC2 Image Builder" /><meta name="guide" content="User Guide" /><meta name="abstract" content="EC2 Image Builder is a fully managed AWS service that makes it more efficient to automate creating, managing, and deploying customized, secure, and up-to-date server images that are pre-installed and pre-configured with software and settings to meet specific IT standards." /><meta name="guide-locale" content="en_us" /><meta name="tocs" content="toc-contents.json" /><link rel="canonical" href="https://docs.aws.amazon.com/imagebuilder/latest/userguide/image-builder-service-linked-role.html" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/imagebuilder/latest/userguide/image-builder-service-linked-role.html" hreflang="id-id" /><link rel="alternative" href="https://docs.aws.amazon.com/id_id/imagebuilder/latest/userguide/image-builder-service-linked-role.html" hreflang="id" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/imagebuilder/latest/userguide/image-builder-service-linked-role.html" hreflang="de-de" /><link rel="alternative" href="https://docs.aws.amazon.com/de_de/imagebuilder/latest/userguide/image-builder-service-linked-role.html" hreflang="de" /><link rel="alternative" href="https://docs.aws.amazon.com/imagebuilder/latest/userguide/image-builder-service-linked-role.html" hreflang="en-us" /><link rel="alternative" href="https://docs.aws.amazon.com/imagebuilder/latest/userguide/image-builder-service-linked-role.html" hreflang="en" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/imagebuilder/latest/userguide/image-builder-service-linked-role.html" hreflang="es-es" /><link rel="alternative" href="https://docs.aws.amazon.com/es_es/imagebuilder/latest/userguide/image-builder-service-linked-role.html" hreflang="es" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/imagebuilder/latest/userguide/image-builder-service-linked-role.html" hreflang="fr-fr" /><link rel="alternative" href="https://docs.aws.amazon.com/fr_fr/imagebuilder/latest/userguide/image-builder-service-linked-role.html" hreflang="fr" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/imagebuilder/latest/userguide/image-builder-service-linked-role.html" hreflang="it-it" /><link rel="alternative" href="https://docs.aws.amazon.com/it_it/imagebuilder/latest/userguide/image-builder-service-linked-role.html" hreflang="it" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/imagebuilder/latest/userguide/image-builder-service-linked-role.html" hreflang="ja-jp" /><link rel="alternative" href="https://docs.aws.amazon.com/ja_jp/imagebuilder/latest/userguide/image-builder-service-linked-role.html" hreflang="ja" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/imagebuilder/latest/userguide/image-builder-service-linked-role.html" hreflang="ko-kr" /><link rel="alternative" href="https://docs.aws.amazon.com/ko_kr/imagebuilder/latest/userguide/image-builder-service-linked-role.html" hreflang="ko" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/imagebuilder/latest/userguide/image-builder-service-linked-role.html" hreflang="pt-br" /><link rel="alternative" href="https://docs.aws.amazon.com/pt_br/imagebuilder/latest/userguide/image-builder-service-linked-role.html" hreflang="pt" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_cn/imagebuilder/latest/userguide/image-builder-service-linked-role.html" hreflang="zh-cn" /><link rel="alternative" href="https://docs.aws.amazon.com/zh_tw/imagebuilder/latest/userguide/image-builder-service-linked-role.html" hreflang="zh-tw" /><link rel="alternative" href="https://docs.aws.amazon.com/imagebuilder/latest/userguide/image-builder-service-linked-role.html" hreflang="x-default" /><meta name="feedback-item" content="Image Builder" /><meta name="this_doc_product" content="EC2 Image Builder" /><meta name="this_doc_guide" content="User Guide" /><script defer="" src="/assets/r/vendor4.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor3.js?version=2021.12.02"></script><script defer="" src="/assets/r/vendor1.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-common.js?version=2021.12.02"></script><script defer="" src="/assets/r/awsdocs-doc-page.js?version=2021.12.02"></script><link href="/assets/r/vendor4.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-common.css?version=2021.12.02" rel="stylesheet" /><link href="/assets/r/awsdocs-doc-page.css?version=2021.12.02" rel="stylesheet" /><script async="" id="awsc-panorama-bundle" type="text/javascript" src="https://prod.pa.cdn.uis.awsstatic.com/panorama-nav-init.js" data-config="{'appEntity':'aws-documentation','region':'us-east-1','service':'imagebuilder'}"></script><meta id="panorama-serviceSubSection" value="User Guide" /><meta id="panorama-serviceConsolePage" value="Using service-linked roles for EC2 Image Builder" /></head><body class="awsdocs awsui"><div class="awsdocs-container"><awsdocs-header></awsdocs-header><awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)"><div id="guide-toc" dom-region="navigation"><awsdocs-toc></awsdocs-toc></div><div id="main-column" dom-region="content" tabindex="-1"><awsdocs-view class="awsdocs-view"><div id="awsdocs-content"><head><title>Using service-linked roles for EC2 Image Builder - EC2 Image Builder</title><meta name="pdf" content="/pdfs/imagebuilder/latest/userguide/imagebuilder-ug.pdf#image-builder-service-linked-role" /><meta name="github" content="https://github.com/awsdocs/ec2-image-builder-user-guide/tree/master/doc_source/image-builder-service-linked-role.md" /><meta name="rss" content="ec2-image-builder-release-notes.rss" /><meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Image%20Builder&amp;topic_url=http://docs.aws.amazon.com/en_us/imagebuilder/latest/userguide/image-builder-service-linked-role.html" /><meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/imagebuilder/latest/userguide/image-builder-service-linked-role.html" /><meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/imagebuilder/latest/userguide/image-builder-service-linked-role.html" /><meta name="keywords" content="create custom Amazon machine images with EC2 Image Builder" /><script type="application/ld+json">
{
    "@context" : "https://schema.org",
    "@type" : "BreadcrumbList",
    "itemListElement" : [
      {
        "@type" : "ListItem",
        "position" : 1,
        "name" : "AWS",
        "item" : "https://aws.amazon.com"
      },
      {
        "@type" : "ListItem",
        "position" : 2,
        "name" : "EC2 Image Builder",
        "item" : "https://docs.aws.amazon.com/imagebuilder/index.html"
      },
      {
        "@type" : "ListItem",
        "position" : 3,
        "name" : "User Guide",
        "item" : "https://docs.aws.amazon.com/imagebuilder/latest/userguide"
      },
      {
        "@type" : "ListItem",
        "position" : 4,
        "name" : "Security in EC2 Image Builder",
        "item" : "https://docs.aws.amazon.com/imagebuilder/latest/userguide/image-builder-security.html"
      },
      {
        "@type" : "ListItem",
        "position" : 5,
        "name" : "Identity and Access Management for EC2 Image Builder",
        "item" : "https://docs.aws.amazon.com/imagebuilder/latest/userguide/security-iam.html"
      },
      {
        "@type" : "ListItem",
        "position" : 6,
        "name" : "Using service-linked roles for EC2 Image Builder",
        "item" : "https://docs.aws.amazon.com/imagebuilder/latest/userguide/security-iam.html"
      }
    ]
}
</script></head><body><div id="main"><div style="display: none"><a href="/pdfs/imagebuilder/latest/userguide/imagebuilder-ug.pdf#image-builder-service-linked-role" target="_blank" rel="noopener noreferrer" title="Open PDF"></a><a href="https://github.com/awsdocs/ec2-image-builder-user-guide/tree/master/doc_source/image-builder-service-linked-role.md" target="_blank" rel="noopener noreferrer" title="Edit this page on GitHub"></a></div><div id="breadcrumbs" class="breadcrumb"><a href="https://aws.amazon.com">AWS</a><a href="/index.html">Documentation</a><a href="/imagebuilder/index.html">EC2 Image Builder</a><a href="what-is-image-builder.html">User Guide</a></div><div id="page-toc-src"><a href="#image-builder-slr-permissions">Service-linked role permissions for
                Image Builder</a><a href="#image-builder-slr-deleting">Removing an Image Builder service-linked role from
				your account</a><a href="#image-builder-slr-regions">Supported Regions for EC2 Image Builder
                service-linked roles</a></div><div id="main-content" class="awsui-util-container"><div id="main-col-body"><awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner><h1 class="topictitle" id="image-builder-service-linked-role">Using service-linked roles for
            EC2 Image Builder</h1><div class="awsdocs-page-header-container"><awsdocs-page-header></awsdocs-page-header><awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector></div><p>EC2 Image Builder uses AWS Identity and Access Management (IAM) <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_terms-and-concepts.html#iam-term-service-linked-role">service-linked roles</a>. A service-linked role is a unique type of IAM role that
        is linked directly to Image Builder. Service-linked roles are predefined by Image Builder and include all of
        the permissions that the service requires to call other AWS services on your behalf. </p><p>A service-linked role makes setting up Image Builder more efficient, because you don’t have to add
		the necessary permissions manually. Image Builder defines the permissions of its service-linked
		roles, and unless defined otherwise, only Image Builder can assume its roles. The defined permissions
		include the trust policy and the permissions policy. The permissions policy cannot be
		attached to any other IAM entity. </p><p>For information about other services that support service-linked roles, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_aws-services-that-work-with-iam.html">AWS services That Work with IAM</a> and look for the services that have <b>Yes</b> in the <b>Service-Linked Role</b>
        column. Choose a <b>Yes</b> with a link to view the service-linked
        role documentation for that service.</p>
        <h2 id="image-builder-slr-permissions">Service-linked role permissions for
                Image Builder</h2>
    	<p>Image Builder uses the <b>AWSServiceRoleForImageBuilder</b> 
    		service-linked role to allow EC2 Image Builder to access AWS resources on your behalf. 
    		The service-linked role trusts the <em>imagebuilder.amazonaws.com</em> 
    		service to assume the role.</p>
    	<p>You don't need to manually create this service-linked role. When you create your first
    		Image Builder image in the AWS Management Console, the AWS CLI, or the AWS API, Image Builder creates
    		the service-linked role for you.</p>
    	<p>The following actions create a new image:</p>
    	<div class="itemizedlist">
    		 
    		 
    	<ul class="itemizedlist"><li class="listitem">
    			<p>Run the pipeline wizard in the Image Builder console to create a custom image.</p>
    		</li><li class="listitem">
    			<p>Use one of the following API actions, or its corresponding AWS CLI command:</p>
    			<div class="itemizedlist">
    				 
    				 
    				 
    			<ul class="itemizedlist"><li class="listitem">
    					<p>The <b><a href="https://docs.aws.amazon.com/imagebuilder/latest/APIReference/API_CreateImage.html">CreateImage</a></b> 
    						API action (<b><a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/imagebuilder/create-image.html" rel="noopener noreferrer" target="_blank"><span>create-image</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a></b> 
    						in the AWS CLI).</p>
    				</li><li class="listitem">
    					<p>The <b><a href="https://docs.aws.amazon.com/imagebuilder/latest/APIReference/API_ImportVmImage.html">ImportVmImage</a></b> 
    						API action (<b><a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/imagebuilder/import-vm-image.html" rel="noopener noreferrer" target="_blank"><span>import-vm-image</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a></b> 
    						in the AWS CLI).</p>
    				</li><li class="listitem">
    					<p>The <b><a href="https://docs.aws.amazon.com/imagebuilder/latest/APIReference/API_StartImagePipelineExecution.html">StartImagePipelineExecution</a></b> 
    						API action (<b><a href="https://awscli.amazonaws.com/v2/documentation/api/latest/reference/imagebuilder/start-image-pipeline-execution.html" rel="noopener noreferrer" target="_blank"><span>start-image-pipeline-execution</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a></b> 
    						in the AWS CLI).</p>
    				</li></ul></div>
    		</li></ul></div>
    	<div class="awsdocs-note awsdocs-important"><div class="awsdocs-note-title"><awsui-icon name="status-warning" variant="error"></awsui-icon><h6>Important</h6></div><div class="awsdocs-note-text"><p>If the service-linked role is deleted from your account, you can use the same process 
    			to create it again. When you create your first EC2 Image Builder resource, Image Builder creates the 
    			service-linked role for you again.</p></div></div>    	

    	<p>To see permissions for the <b>AWSServiceRoleForImageBuilder</b>, 
    		see the <a href="./security-iam-awsmanpol.html#sec-iam-manpol-AWSServiceRoleForImageBuilder">AWSServiceRoleForImageBuilder policy</a> page. To learn more 
    		about configuring permissions for a service-linked role, see 
    		<a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/using-service-linked-roles.html#service-linked-role-permissions">Service-Linked 
    			Role Permissions</a> in the <em>IAM User Guide</em>.</p>
     
		<h2 id="image-builder-slr-deleting">Removing an Image Builder service-linked role from
				your account</h2>
		<p>You can use the IAM console, the AWS CLI, or the AWS API to manually remove the
			service-linked role for Image Builder from your account. However, before you do this, you must 
			ensure that there are no Image Builder resources enabled that refer to it.</p>
		<div class="awsdocs-note"><div class="awsdocs-note-title"><awsui-icon name="status-info" variant="link"></awsui-icon><h6>Note</h6></div><div class="awsdocs-note-text"><p>If the Image Builder service is using the role when you try to delete the resources, the
				deletion might fail. If that happens, wait for a few minutes and try the operation
				again.</p></div></div>
		<div class="procedure"><h6>Clean up Image Builder resources used by the <code class="code">AWSServiceRoleForImageBuilder</code> role</h6><ol><li>
				<p>Verify that no pipeline builds are running before you start. To cancel a running 
					build, use the <code class="code">cancel-image-creation</code> command from the AWS CLI.</p>
				<pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"><awsui-icon name="copy"></awsui-icon></div></div><code class=""><code class="userinput">aws imagebuilder cancel-image-creation --image-build-version-arn <code class="replaceable">arn:aws:imagebuilder:us-east-1:123456789012:image-pipeline/sample-pipeline</code></code></code></pre>
			</li><li>
				<p>Change all pipeline schedules to use a manual build process, or delete them 
					if you won't be using them again. For more information about deleting resources, 
					see <a href="./delete-resources.html">Delete EC2 Image Builder resources</a>.</p>
			</li></ol></div>
		 
			<h6>Delete the service-linked role using IAM</h6>
			<p>You can use the IAM console, the AWS CLI, or the AWS API to delete the
				<code class="code">AWSServiceRoleForImageBuilder</code> role from your account. For more
				information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/using-service-linked-roles.html#delete-service-linked-role"> Deleting a Service-Linked Role</a> in the <em>IAM User Guide</em>.</p>
		 
	 
        <h2 id="image-builder-slr-regions">Supported Regions for EC2 Image Builder
                service-linked roles</h2>
        <p>Image Builder supports using service-linked roles in all of the AWS Regions where the service
            is available. For the list of supported AWS Regions, see <a href="./how-image-builder-works.html#image-builder-regions">AWS Regions and Endpoints</a>.</p>
    <awsdocs-copyright class="copyright-print"></awsdocs-copyright><awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback></div><noscript><div><div><div><div id="js_error_message"><p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your browser.</strong></p><p>To use the Amazon Web Services Documentation, Javascript must be enabled. Please refer to your browser's Help pages for instructions.</p></div></div></div></div></noscript><div id="main-col-footer" class="awsui-util-font-size-0"><div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div><div class="prev-next"><div id="previous" class="prev-link" accesskey="p" href="./security-iam-awsmanpol.html">Managed policies</div><div id="next" class="next-link" accesskey="n" href="./security_iam_troubleshoot.html">Troubleshooting</div></div></div><awsdocs-page-utilities></awsdocs-page-utilities></div><div id="quick-feedback-yes" style="display: none;"><div class="title">Did this page help you? - Yes</div><div class="content"><p>Thanks for letting us know we're doing a good job!</p><p>If you've got a moment, please tell us what we did right so we can do more of it.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Image Builder&amp;topic_url=https://docs.aws.amazon.com/en_us/imagebuilder/latest/userguide/image-builder-service-linked-role.html"></awsui-button></p></div></div><div id="quick-feedback-no" style="display: none;"><div class="title">Did this page help you? - No</div><div class="content"><p>Thanks for letting us know this page needs work. We're sorry we let you down.</p><p>If you've got a moment, please tell us how we can make the documentation better.</p><p><awsui-button id="fblink" rel="noopener noreferrer" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Image Builder&amp;topic_url=https://docs.aws.amazon.com/en_us/imagebuilder/latest/userguide/image-builder-service-linked-role.html"></awsui-button></p></div></div></div></body></div></awsdocs-view><div class="page-loading-indicator" id="page-loading-indicator"><awsui-spinner size="large"></awsui-spinner></div></div><div id="tools-panel" dom-region="tools"><awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel></div></awsui-app-layout><awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner></div></body></html>